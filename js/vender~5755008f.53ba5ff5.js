"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9560],{53273:(e,t,n)=>{n.d(t,{Z:()=>Tn});var i=n(52351),r=n(93517),o=n(90868),s=n(66866),a=n(17497),c=n(55077),u=n(6785),l=n(51138),d=n(93737),h=n(78505),m=n(88779),f=n(58587),p=n(54485),_=n(34971),g=n(90332),Z=n(20176),y=n(51178),x=n(74834),T=n(35395),S=n(7219),b=n(52312),C=n(16383),w=n(39172),E=n(98140),v=n(67410),A=n(22260),I=n(22874),M=n(39109),R=n(71118),P=n(91166),O=n(84473),L=n(20291),D=n(67197),B=n(7004),N=n(95411),F=n(31328),V=n(36627),U=n(71087),z=n(1577),k=n(74064),q=n(28696),H=n(17426),j=n(7048),G=n(47334),W=n(48867),$=n(91373),K=n(46801),Y=n(96232),X=n(40460),J=n(45813),Q=n(47428),ee=n(90289),te=n(57727),ne=n(58943),ie=n(319),re=n(81737),oe=n(995),se=n(53425),ae=n(30562),ce=n(86672),ue=n(10613),le=n(95189),de=n(44804),he=n(16272),me=n(66962),fe=n(43344),pe=n(25308),_e=n(16234),ge=n(97159),Ze=n(19715),ye=n(26184),xe=n(64766),Te=n(11487),Se=n(9257),be=n(35550),Ce=n(91507),we=n(18061),Ee=n(49616),ve=n(77493),Ae=n(52561),Ie=n(84067);const Me=new r.Z,Re=Te.Z.ModelState,Pe=I.Z.EPSILON16;function Oe(e,t){e._cachedGltf=t}function Le(e){this._gltf=e.gltf,this.ready=e.ready,this.modelsToLoad=[],this.count=0}Object.defineProperties(Le.prototype,{gltf:{set:function(e){this._gltf=e},get:function(){return this._gltf}}}),Le.prototype.makeReady=function(e){this.gltf=e;const t=this.modelsToLoad,n=t.length;for(let e=0;e<n;++e){const n=t[e];n.isDestroyed()||Oe(n,this)}this.modelsToLoad=void 0,this.ready=!0};const De={},Be={};function Ne(e){const t=(e=(0,m.Z)(e,m.Z.EMPTY_OBJECT)).cacheKey;let n;if(this._cacheKey=t,this._cachedGltf=void 0,this._releaseGltfJson=(0,m.Z)(e.releaseGltfJson,!1),(0,p.Z)(t)&&(0,p.Z)(De[t])&&De[t].ready)n=De[t],++n.count;else{let i=e.gltf;if((0,p.Z)(i)){if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),i instanceof Uint8Array){n=new Le({gltf:(0,ne.Z)(i),ready:!0})}else n=new Le({gltf:e.gltf,ready:!0});n.count=1,(0,p.Z)(t)&&(De[t]=n)}}Oe(this,n);const o=(0,m.Z)(e.basePath,"");this._resource=D.Z.createIfNeeded(o);let s=e.credit;"string"==typeof s&&(s=new h.Z(s)),this._credit=s,this._resourceCredits=[],this._gltfCredits=[],this._showCreditsOnScreen=(0,m.Z)(e.showCreditsOnScreen,!1),this.show=(0,m.Z)(e.show,!0),this.silhouetteColor=(0,m.Z)(e.silhouetteColor,u.Z.RED),this._silhouetteColor=new u.Z,this._silhouetteColorPreviousAlpha=1,this._normalAttributeName=void 0,this.silhouetteSize=(0,m.Z)(e.silhouetteSize,0),this.modelMatrix=R.Z.clone((0,m.Z)(e.modelMatrix,R.Z.IDENTITY)),this._modelMatrix=R.Z.clone(this.modelMatrix),this._clampedModelMatrix=void 0,this.scale=(0,m.Z)(e.scale,1),this._scale=this.scale,this.minimumPixelSize=(0,m.Z)(e.minimumPixelSize,0),this._minimumPixelSize=this.minimumPixelSize,this.maximumScale=e.maximumScale,this._maximumScale=this.maximumScale,this.id=e.id,this._id=e.id,this.heightReference=(0,m.Z)(e.heightReference,he.Z.NONE),this._heightReference=this.heightReference,this._heightChanged=!1,this._removeUpdateHeightCallback=void 0;const a=e.scene;this._scene=a,(0,p.Z)(a)&&(0,p.Z)(a.terrainProviderChanged)&&(this._terrainProviderChangedCallback=a.terrainProviderChanged.addEventListener((function(){this._heightChanged=!0}),this)),this._pickObject=e.pickObject,this._allowPicking=(0,m.Z)(e.allowPicking,!0),this._ready=!1,this._readyPromise=(0,f.Z)(),this.activeAnimations=new pe.Z(this),this.clampAnimations=(0,m.Z)(e.clampAnimations,!0),this._defaultTexture=void 0,this._incrementallyLoadTextures=(0,m.Z)(e.incrementallyLoadTextures,!0),this._asynchronous=(0,m.Z)(e.asynchronous,!0),this.shadows=(0,m.Z)(e.shadows,Ee.Z.ENABLED),this._shadows=this.shadows,this.color=u.Z.clone((0,m.Z)(e.color,u.Z.WHITE)),this._colorPreviousAlpha=1,this.colorBlendMode=(0,m.Z)(e.colorBlendMode,ae.Z.HIGHLIGHT),this.colorBlendAmount=(0,m.Z)(e.colorBlendAmount,.5),this._colorShadingEnabled=!1,this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,this._clippingPlanesState=0,this.referenceMatrix=void 0,this.backFaceCulling=(0,m.Z)(e.backFaceCulling,!0),this.showOutline=(0,m.Z)(e.showOutline,!0),this.splitDirection=(0,m.Z)(e.splitDirection,ve.Z.NONE),this._splittingEnabled=!1,this.debugShowBoundingVolume=(0,m.Z)(e.debugShowBoundingVolume,!1),this._debugShowBoundingVolume=!1,this.debugWireframe=(0,m.Z)(e.debugWireframe,!1),this._debugWireframe=!1,this._distanceDisplayCondition=e.distanceDisplayCondition,this._addBatchIdToGeneratedShaders=e.addBatchIdToGeneratedShaders,this._precreatedAttributes=e.precreatedAttributes,this._vertexShaderLoaded=e.vertexShaderLoaded,this._fragmentShaderLoaded=e.fragmentShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._pickIdLoaded=e.pickIdLoaded,this._ignoreCommands=(0,m.Z)(e.ignoreCommands,!1),this._requestType=e.requestType,this._upAxis=(0,m.Z)(e.upAxis,re.Z.Y),this._gltfForwardAxis=re.Z.Z,this._forwardAxis=e.forwardAxis,this.cull=(0,m.Z)(e.cull,!0),this.opaquePass=(0,m.Z)(e.opaquePass,z.Z.OPAQUE),this._computedModelMatrix=new R.Z,this._clippingPlanesMatrix=R.Z.clone(R.Z.IDENTITY),this._iblReferenceFrameMatrix=M.Z.clone(M.Z.IDENTITY),this._initialRadius=void 0,this._boundingSphere=void 0,this._scaledBoundingSphere=new i.Z,this._state=Re.NEEDS_LOAD,this._loadResources=void 0,this._mode=void 0,this._perNodeShowDirty=!1,this._cesiumAnimationsDirty=!1,this._dirty=!1,this._maxDirtyNumber=0,this._runtime={animations:void 0,articulationsByName:void 0,articulationsByStageKey:void 0,stagesByKey:void 0,rootNodes:void 0,nodes:void 0,nodesByName:void 0,skinnedNodes:void 0,meshesByName:void 0,materialsByName:void 0,materialsById:void 0},this._uniformMaps={},this._extensionsUsed=void 0,this._extensionsRequired=void 0,this._quantizedUniforms={},this._programPrimitives={},this._rendererResources={buffers:{},vertexArrays:{},programs:{},sourceShaders:{},silhouettePrograms:{},textures:{},samplers:{},renderStates:{}},this._cachedRendererResources=void 0,this._loadRendererResourcesFromCache=!1,e.dequantizeInShader&&(0,_.Z)("Model.dequantizeInShader","The Model dequantizeInShader constructor parameter was deprecated in CesiumJS 1.94 and will be removed in 1.95"),this._dequantizeInShader=(0,m.Z)(e.dequantizeInShader,!0),this._decodedData={},this._cachedGeometryByteLength=0,this._cachedTexturesByteLength=0,this._geometryByteLength=0,this._texturesByteLength=0,this._trianglesLength=0,this._pointsLength=0,this._sourceTechniques={},this._sourcePrograms={},this._quantizedVertexShaders={},this._nodeCommands=[],this._pickIds=[],this._rtcCenter=void 0,this._rtcCenterEye=void 0,this._rtcCenter3D=void 0,this._rtcCenter2D=void 0,this._sourceVersion=void 0,this._sourceKHRTechniquesWebGL=void 0,this._lightColor=r.Z.clone(e.lightColor),(0,p.Z)(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new E.Z,this._shouldDestroyImageBasedLighting=!0),this._shouldRegenerateShaders=!1}function Fe(e){return e.stencilBuffer}function Ve(e){return!u.Z.equals(e.color,u.Z.WHITE)||e.colorBlendMode!==ae.Z.HIGHLIGHT}function Ue(e){const t=e._clippingPlanes;return(0,p.Z)(t)&&t.enabled&&0!==t.length}function ze(e,t,n){if(e._state!==Re.LOADED)throw new Z.Z("The model is not loaded.  Use Model.readyPromise or wait for Model.ready to be true.");if(!(0,p.Z)(n))throw new Z.Z("name is required.");return e._runtime[t][n]}Object.defineProperties(Ne.prototype,{gltf:{get:function(){return(0,_.Z)("Model.gltf","Model.gltf getter was deprecated in CesiumJS 1.94 and will be removed in 1.95"),this.gltfInternal}},gltfInternal:{get:function(){return(0,p.Z)(this._cachedGltf)?this._cachedGltf.gltf:void 0}},releaseGltfJson:{get:function(){return this._releaseGltfJson}},cacheKey:{get:function(){return this._cacheKey}},basePath:{get:function(){return(0,_.Z)("model.basePath","Model.basePath getter is deprecated in CesiumJS 1.94. It will be removed in CesiumJS 1.95"),this.basePathInternal}},basePathInternal:{get:function(){return this._resource.url}},boundingSphere:{get:function(){return(0,_.Z)("model.boundingSphere","Model.boundingSphere currently returns results in model space. In CesiumJS 1.95, model.boundingSphere will be changed to return results in world space. The calling code will no longer need to multiply the bounding sphere by the model matrix"),this.boundingSphereInternal}},boundingSphereInternal:{get:function(){if(this._state!==Re.LOADED)throw new Z.Z("The model is not loaded.  Use Model.readyPromise or wait for Model.ready to be true.");let e=this.modelMatrix;this.heightReference!==he.Z.NONE&&this._clampedModelMatrix&&(e=this._clampedModelMatrix);const t=R.Z.getScale(e,Me),n=(0,p.Z)(this.maximumScale)?Math.min(this.maximumScale,this.scale):this.scale;r.Z.multiplyByScalar(t,n,t);const i=this._scaledBoundingSphere;return i.center=r.Z.multiplyComponents(this._boundingSphere.center,t,i.center),i.radius=r.Z.maximumComponent(t)*this._initialRadius,(0,p.Z)(this._rtcCenter)&&r.Z.add(this._rtcCenter,i.center,i.center),i}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},asynchronous:{get:function(){return this._asynchronous}},allowPicking:{get:function(){return this._allowPicking}},incrementallyLoadTextures:{get:function(){return this._incrementallyLoadTextures}},pendingTextureLoads:{get:function(){return(0,_.Z)("Model.pendingTextureLoads","The Model.pendingTextureLoads getter was deprecated in CesiumJS 1.94 and will be removed in CesiumJS 1.95"),this.pendingTextureLoadsInternal}},pendingTextureLoadsInternal:{get:function(){return(0,p.Z)(this._loadResources)?this._loadResources.pendingTextureLoads:0}},dirty:{get:function(){return this._dirty}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(e){if((0,p.Z)(e)&&e.far<=e.near)throw new Z.Z("far must be greater than near");this._distanceDisplayCondition=y.Z.clone(e,this._distanceDisplayCondition)}},extensionsUsed:{get:function(){return(0,p.Z)(this._extensionsUsed)||(this._extensionsUsed=Te.Z.getUsedExtensions(this.gltfInternal)),this._extensionsUsed}},extensionsRequired:{get:function(){return(0,p.Z)(this._extensionsRequired)||(this._extensionsRequired=Te.Z.getRequiredExtensions(this.gltfInternal)),this._extensionsRequired}},upAxis:{get:function(){return this._upAxis}},forwardAxis:{get:function(){return(0,p.Z)(this._forwardAxis)?this._forwardAxis:this._gltfForwardAxis}},trianglesLength:{get:function(){return this._trianglesLength}},pointsLength:{get:function(){return this._pointsLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},texturesByteLength:{get:function(){return this._texturesByteLength}},cachedGeometryByteLength:{get:function(){return this._cachedGeometryByteLength}},cachedTexturesByteLength:{get:function(){return this._cachedTexturesByteLength}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){e!==this._clippingPlanes&&se.Z.setOwner(e,this,"_clippingPlanes")}},pickIds:{get:function(){return this._pickIds}},lightColor:{get:function(){return this._lightColor},set:function(e){const t=this._lightColor;e===t||r.Z.equals(e,t)||(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,p.Z)(t)&&!(0,p.Z)(e)||(0,p.Z)(e)&&!(0,p.Z)(t),this._lightColor=r.Z.clone(e,t))}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){a.Z.typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1,this._shouldRegenerateShaders=!0)}},credit:{get:function(){return this._credit}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){if(this._showCreditsOnScreen!==e){(0,p.Z)(this._credit)&&(this._credit.showOnScreen=e);const t=this._resourceCredits.length;for(let n=0;n<t;n++)this._resourceCredits[n].showOnScreen=e;const n=this._gltfCredits.length;for(let t=0;t<n;t++)this._gltfCredits[t].showOnScreen=e}this._showCreditsOnScreen=e}}}),Ne.silhouetteSupported=function(e){return Fe(e.context)},Ne.fromGltf=function(e){if(!(0,p.Z)(e)||!(0,p.Z)(e.url))throw new Z.Z("options.url is required");const t=e.url;e=(0,c.Z)(e);const n=D.Z.createIfNeeded(t),i=(0,m.Z)(e.basePath,n.clone()),r=D.Z.createIfNeeded(i);let o=(0,m.Z)(e.cacheKey,Be[(0,T.Z)(n.url)]);(0,p.Z)(o)||(o=(0,d.Z)(),Be[(0,T.Z)(n.url)]=o),(0,p.Z)(e.basePath)&&!(0,p.Z)(e.cacheKey)&&(o+=r.url),e.cacheKey=o,e.basePath=r;const s=new Ne(e);let a=De[o];return(0,p.Z)(a)?a.ready||(++a.count,a.modelsToLoad.push(s)):(a=new Le({ready:!1}),a.count=1,a.modelsToLoad.push(s),Oe(s,a),De[o]=a,(0,p.Z)(n.headers.Accept)||(n.headers.Accept="model/gltf-binary,model/gltf+json;q=0.8,application/json;q=0.2,*/*;q=0.01"),n.fetchArrayBuffer().then((function(e){const t=new Uint8Array(e);if(i=t,"glTF"===(0,b.Z)(i)){const e=(0,ne.Z)(t);a.makeReady(e)}else{const e=(0,S.Z)(t);a.makeReady(e)}var i;const r=s._resourceCredits,o=n.credits;if((0,p.Z)(o)){const e=o.length;for(let t=0;t<e;t++)r.push(o[t])}})).catch(Te.Z.getFailedLoadFunction(s,"model",n.url))),s},Ne._gltfCache=De,Ne.prototype.getNode=function(e){const t=ze(this,"nodesByName",e);return(0,p.Z)(t)?t.publicNode:void 0},Ne.prototype.getMesh=function(e){return ze(this,"meshesByName",e)},Ne.prototype.getMaterial=function(e){return ze(this,"materialsByName",e)},Ne.prototype.setArticulationStage=function(e,t){a.Z.typeOf.number("value",t);const n=ze(this,"stagesByKey",e),i=ze(this,"articulationsByStageKey",e);(0,p.Z)(n)&&(0,p.Z)(i)&&(t=I.Z.clamp(t,n.minimumValue,n.maximumValue),I.Z.equalsEpsilon(n.currentValue,t,Pe)||(n.currentValue=t,i.isDirty=!0))};const ke=new r.Z,qe=new M.Z;function He(e,t){a.Z.typeOf.object("stage",e),a.Z.typeOf.object("result",t);const n=e.currentValue,i=ke;let r;switch(e.type){case"xRotate":r=M.Z.fromRotationX(I.Z.toRadians(n),qe),R.Z.multiplyByMatrix3(t,r,t);break;case"yRotate":r=M.Z.fromRotationY(I.Z.toRadians(n),qe),R.Z.multiplyByMatrix3(t,r,t);break;case"zRotate":r=M.Z.fromRotationZ(I.Z.toRadians(n),qe),R.Z.multiplyByMatrix3(t,r,t);break;case"xTranslate":i.x=n,i.y=0,i.z=0,R.Z.multiplyByTranslation(t,i,t);break;case"yTranslate":i.x=0,i.y=n,i.z=0,R.Z.multiplyByTranslation(t,i,t);break;case"zTranslate":i.x=0,i.y=0,i.z=n,R.Z.multiplyByTranslation(t,i,t);break;case"xScale":i.x=n,i.y=1,i.z=1,R.Z.multiplyByScale(t,i,t);break;case"yScale":i.x=1,i.y=n,i.z=1,R.Z.multiplyByScale(t,i,t);break;case"zScale":i.x=1,i.y=1,i.z=n,R.Z.multiplyByScale(t,i,t);break;case"uniformScale":R.Z.multiplyByUniformScale(t,n,t)}return t}const je=new R.Z;function Ge(e,t){return function(n){const i=e._loadResources,r=new Uint8Array(n);--i.pendingBufferLoads,e.gltfInternal.buffers[t].extras._pipeline.source=r}}function We(e,t){return function(n){const i=e._loadResources;let r;--i.pendingTextureLoads,Array.isArray(n)&&(r=n.slice(1,n.length).map((function(e){return e.bufferView})),n=n[0]),i.texturesToCreate.enqueue({id:t,image:n,bufferView:n.bufferView,width:n.width,height:n.height,internalFormat:n.internalFormat,mipLevels:r})}}Ne.prototype.applyArticulations=function(){const e=this._runtime.articulationsByName;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];if(n.isDirty){n.isDirty=!1;const e=n.nodes.length;for(let t=0;t<e;++t){const e=n.nodes[t];let i=R.Z.clone(e.originalMatrix,je);const r=n.stages.length;for(let e=0;e<r;++e){i=He(n.stages[e],i)}e.matrix=i}}}};const $e=/(^data:image\/ktx2)|(\.ktx2$)/i;const Ke=new R.Z;const Ye=function(){this.id=void 0,this.model=void 0,this.context=void 0};function Xe(e,t,n){const i=t._loadResources;let r=t.gltfInternal.bufferViews[e];(0,p.Z)(r)||(r=i.createdBufferViews[e]);const o=F.Z.createVertexBuffer({context:n,typedArray:i.getBuffer(r),usage:V.Z.STATIC_DRAW});o.vertexArrayDestroyable=!1,t._rendererResources.buffers[e]=o,t._geometryByteLength+=o.sizeInBytes}Ye.prototype.set=function(e,t,n){this.id=e,this.model=t,this.context=n},Ye.prototype.execute=function(){Xe(this.id,this.model,this.context)};const Je=function(){this.id=void 0,this.componentType=void 0,this.model=void 0,this.context=void 0};function Qe(e,t,n,i){const r=n._loadResources;let o=n.gltfInternal.bufferViews[e];(0,p.Z)(o)||(o=r.createdBufferViews[e]);const s=F.Z.createIndexBuffer({context:i,typedArray:r.getBuffer(o),usage:V.Z.STATIC_DRAW,indexDatatype:t});s.vertexArrayDestroyable=!1,n._rendererResources.buffers[e]=s,n._geometryByteLength+=s.sizeInBytes}Je.prototype.set=function(e,t,n,i){this.id=e,this.componentType=t,this.model=n,this.context=i},Je.prototype.execute=function(){Qe(this.id,this.componentType,this.model,this.context)};const et=new Ye,tt=new Je;function nt(e,t){const n=e._runtime.materialsById[t.material];if((0,p.Z)(n))return n._program}function it(e,t,n){let i;const r=n._programPrimitives[t];if(!(0,p.Z)(r))return e;let o,s;for(o in r)if(r.hasOwnProperty(o)&&(i=r[o],nt(n,i)===t))break;if(n._programPrimitives[t]=void 0,n.extensionsUsed.WEB3D_quantized_attributes)s=Te.Z.modifyShaderForQuantizedAttributes(n.gltfInternal,i,e),n._quantizedUniforms[t]=s.uniforms;else{const t=n._decodedData[o];if(!(0,p.Z)(t))return e;s=Te.Z.modifyShaderForDracoQuantizedAttributes(n.gltfInternal,i,e,t.attributes)}return s.shader}function rt(e,t,n){return(0,p.Z)(n)&&(e=n(e,t)),e}const ot=function(){this.programToCreate=void 0,this.model=void 0,this.context=void 0};function st(e,t,n){const i=e.programId,r=e.techniqueId,o=t._sourcePrograms[i],s=t._rendererResources.sourceShaders;let a=s[o.vertexShader];const c=s[o.fragmentShader],u=t._quantizedVertexShaders;if(t.extensionsUsed.WEB3D_quantized_attributes||t._dequantizeInShader){let e=u[i];(0,p.Z)(e)||(e=it(a,i,t),u[i]=e),a=e}const l=rt(a,i,t._vertexShaderLoaded);let d=rt(c,i,t._fragmentShaderLoaded);(0,p.Z)(t._uniformMapLoaded)||(d=`uniform vec4 czm_pickColor;\n${d}`);const h=t._imageBasedLighting,m=h.enabled;if(m&&(d=`#define USE_IBL_LIGHTING \n\n${d}`),(0,p.Z)(t._lightColor)&&(d=`#define USE_CUSTOM_LIGHT_COLOR \n\n${d}`),("2.0"!==t._sourceVersion||t._sourceKHRTechniquesWebGL)&&(d=j.Z.replaceMain(d,"non_gamma_corrected_main"),d=`${d}\nvoid main() { \n    non_gamma_corrected_main(); \n    gl_FragColor = czm_gammaCorrect(gl_FragColor); \n} \n`),Se.Z.isSupported(n)){const e=h.useSphericalHarmonicCoefficients,t=h.useSpecularEnvironmentMaps;(e||t||m)&&(d=`uniform mat3 gltf_iblReferenceFrameMatrix; \n${d}`),(0,p.Z)(h.sphericalHarmonicCoefficients)?d=`#define DIFFUSE_IBL \n#define CUSTOM_SPHERICAL_HARMONICS \nuniform vec3 gltf_sphericalHarmonicCoefficients[9]; \n${d}`:h.useDefaultSphericalHarmonics&&(d=`#define DIFFUSE_IBL \n${d}`),(0,p.Z)(h.specularEnvironmentMapAtlas)&&h.specularEnvironmentMapAtlas.ready?d=`#define SPECULAR_IBL \n#define CUSTOM_SPECULAR_IBL \nuniform sampler2D gltf_specularMap; \nuniform vec2 gltf_specularMapSize; \nuniform float gltf_maxSpecularLOD; \n${d}`:h.useDefaultSpecularMaps&&(d=`#define SPECULAR_IBL \n${d}`)}(0,p.Z)(h.luminanceAtZenith)&&(d=`#define USE_SUN_LUMINANCE \nuniform float gltf_luminanceAtZenith;\n${d}`),ct(i,r,d,l,t,n)}function at(e,t,n){const i=e.programId,r=e.techniqueId,o=t._sourcePrograms[i],s=t._rendererResources.sourceShaders,a=t._quantizedVertexShaders,c=t.clippingPlanes,u=Ue(t);let l=s[o.vertexShader];const d=s[o.fragmentShader];(t.extensionsUsed.WEB3D_quantized_attributes||t._dequantizeInShader)&&(l=a[i]);let h=d;Ve(t)&&(h=Ne._modifyShaderForColor(h)),u&&(h=function(e,t,n){return e=j.Z.replaceMain(e,"gltf_clip_main"),e+=`${Ne._getClippingFunction(t,n)}\n`,e+=`uniform highp sampler2D gltf_clippingPlanes; \nuniform mat4 gltf_clippingPlanesMatrix; \nuniform vec4 gltf_clippingPlanesEdgeStyle; \nvoid main() \n{ \n    gltf_clip_main(); \n${(0,le.Z)("gltf_clippingPlanes","gltf_clippingPlanesMatrix","gltf_clippingPlanesEdgeStyle")}} \n`}(h,c,n)),t.splitDirection!==ve.Z.NONE&&(h=Ae.Z.modifyFragmentShader(h));const m=rt(l,i,t._vertexShaderLoaded);let f=rt(h,i,t._fragmentShaderLoaded);(0,p.Z)(t._uniformMapLoaded)||(f=`uniform vec4 czm_pickColor;\n${f}`);const _=t._imageBasedLighting,g=_.enabled;if(g&&(f=`#define USE_IBL_LIGHTING \n\n${f}`),(0,p.Z)(t._lightColor)&&(f=`#define USE_CUSTOM_LIGHT_COLOR \n\n${f}`),("2.0"!==t._sourceVersion||t._sourceKHRTechniquesWebGL)&&(f=j.Z.replaceMain(f,"non_gamma_corrected_main"),f=`${f}\nvoid main() { \n    non_gamma_corrected_main(); \n    gl_FragColor = czm_gammaCorrect(gl_FragColor); \n} \n`),Se.Z.isSupported(n)){const e=_.useSphericalHarmonicCoefficients,t=_.useSpecularEnvironmentMaps;(e||t||g)&&(f=`uniform mat3 gltf_iblReferenceFrameMatrix; \n${f}`),(0,p.Z)(_.sphericalHarmonicCoefficients)?f=`#define DIFFUSE_IBL \n#define CUSTOM_SPHERICAL_HARMONICS \nuniform vec3 gltf_sphericalHarmonicCoefficients[9]; \n${f}`:_.useDefaultSphericalHarmonics&&(f=`#define DIFFUSE_IBL \n${f}`),(0,p.Z)(_.specularEnvironmentMapAtlas)&&_.specularEnvironmentMapAtlas.ready?f=`#define SPECULAR_IBL \n#define CUSTOM_SPECULAR_IBL \nuniform sampler2D gltf_specularMap; \nuniform vec2 gltf_specularMapSize; \nuniform float gltf_maxSpecularLOD; \n${f}`:_.useDefaultSpecularMaps&&(f=`#define SPECULAR_IBL \n${f}`)}(0,p.Z)(_.luminanceAtZenith)&&(f=`#define USE_SUN_LUMINANCE \nuniform float gltf_luminanceAtZenith;\n${f}`),ct(i,r,f,m,t,n)}function ct(e,t,n,i,r,o){const s=r._sourceTechniques[t],a=Te.Z.createAttributeLocations(s,r._precreatedAttributes);r._rendererResources.programs[e]=H.Z.fromCache({context:o,vertexShaderSource:i,fragmentShaderSource:n,attributeLocations:a})}ot.prototype.set=function(e,t,n){this.programToCreate=e,this.model=t,this.context=n},ot.prototype.execute=function(){st(this.programToCreate,this.model,this.context)};const ut=new ot;function lt(e,t){return function(n){e.texturesToCreate.enqueue({id:t.id,image:n,bufferView:void 0}),--e.pendingBufferViewToImage}}const dt=function(){this.gltfTexture=void 0,this.model=void 0,this.context=void 0};function ht(e,t,n){const i=t.gltfInternal.textures[e.id];let r=t._rendererResources.samplers[i.sampler];(0,p.Z)(r)||(r=new q.Z({wrapS:$.Z.REPEAT,wrapT:$.Z.REPEAT}));let o=!1;const s=t.gltfInternal.materials,a=s.length;for(let t=0;t<a;++t){const n=s[t];if((0,p.Z)(n.extensions)&&(0,p.Z)(n.extensions.KHR_techniques_webgl)){const t=n.extensions.KHR_techniques_webgl.values;for(const n in t)if(t.hasOwnProperty(n)&&-1!==n.indexOf("Texture")){const i=t[n];if(i.index===e.id&&(0,p.Z)(i.extensions)&&(0,p.Z)(i.extensions.KHR_texture_transform)){o=!0;break}}}if(o)break}const c=r.wrapS,u=r.wrapT;let l=r.minificationFilter;o&&l!==W.Z.LINEAR&&l!==W.Z.NEAREST&&(l=l===W.Z.NEAREST_MIPMAP_NEAREST||l===W.Z.NEAREST_MIPMAP_LINEAR?W.Z.NEAREST:W.Z.LINEAR,r=new q.Z({wrapS:r.wrapS,wrapT:r.wrapT,minificationFilter:l,magnificationFilter:r.magnificationFilter}));const d=e.internalFormat,h=!((0,p.Z)(d)&&P.Z.isCompressedFormat(d)||l!==W.Z.NEAREST_MIPMAP_NEAREST&&l!==W.Z.NEAREST_MIPMAP_LINEAR&&l!==W.Z.LINEAR_MIPMAP_NEAREST&&l!==W.Z.LINEAR_MIPMAP_LINEAR),m=h||c===$.Z.REPEAT||c===$.Z.MIRRORED_REPEAT||u===$.Z.REPEAT||u===$.Z.MIRRORED_REPEAT;let f,_,g=e.image;if((0,p.Z)(d)){f=!I.Z.isPowerOfTwo(e.width)||!I.Z.isPowerOfTwo(e.height),!n.webgl2&&P.Z.isCompressedFormat(d);let t=r.minificationFilter;(0,p.Z)(e.mipLevels)||l!==W.Z.NEAREST_MIPMAP_NEAREST&&l!==W.Z.NEAREST_MIPMAP_LINEAR?(0,p.Z)(e.mipLevels)||l!==W.Z.LINEAR_MIPMAP_NEAREST&&l!==W.Z.LINEAR_MIPMAP_LINEAR||(t=W.Z.LINEAR):t=W.Z.NEAREST,r=new q.Z({wrapS:r.wrapS,wrapT:r.wrapT,minificationFilter:t,magnificationFilter:r.magnificationFilter}),_=new G.Z({context:n,source:{arrayBufferView:e.bufferView,mipLevels:e.mipLevels},width:e.width,height:e.height,pixelFormat:d,sampler:r})}else if((0,p.Z)(g)){if(f=!I.Z.isPowerOfTwo(g.width)||!I.Z.isPowerOfTwo(g.height),m&&f){const e=document.createElement("canvas");e.width=I.Z.nextPowerOfTwo(g.width),e.height=I.Z.nextPowerOfTwo(g.height);e.getContext("2d").drawImage(g,0,0,g.width,g.height,0,0,e.width,e.height),g=e}_=new G.Z({context:n,source:g,pixelFormat:i.internalFormat,pixelDatatype:i.type,sampler:r,flipY:!1,skipColorSpaceConversion:!0}),h&&_.generateMipmap()}(0,p.Z)(_)&&(t._rendererResources.textures[e.id]=_,t._texturesByteLength+=_.sizeInBytes)}dt.prototype.set=function(e,t,n){this.gltfTexture=e,this.model=t,this.context=n},dt.prototype.execute=function(){ht(this.gltfTexture,this.model,this.context)};const mt=new dt;function ft(e,t,n,i){return function(r){(0,p.Z)(i)&&(r=e.clampAnimations?i.clampTime(r):i.wrapTime(r),t[n]=i.evaluate(r,t[n]),t.dirtyNumber=e._maxDirtyNumber)}}function pt(e,t){const n=e._loadResources;if(!n.finishedBuffersCreation()||!n.finishedProgramCreation()||!n.createVertexArrays)return;n.createVertexArrays=!1;const i=e._rendererResources.buffers,r=e._rendererResources.vertexArrays,o=e.gltfInternal,s=o.accessors;J.Z.mesh(o,(function(n,a){J.Z.meshPrimitive(n,(function(n,c){const u=[];let l;const d=function(e,t){const n=e._sourceTechniques,i={};let r,o;const s=e._runtime.materialsById[t.material];if(!(0,p.Z)(s))return i;const a=n[s._technique];if(!(0,p.Z)(a))return i;const c=a.attributes,u=e._rendererResources.programs[a.program]._attributeLocations;for(r in u)if(u.hasOwnProperty(r)){const e=c[r];(0,p.Z)(e)&&(o=u[r],i[e.semantic]=o)}const l=e._precreatedAttributes;if((0,p.Z)(l))for(r in l)l.hasOwnProperty(r)&&(o=u[r],i[r]=o);return i}(e,n),h=e._decodedData[`${a}.primitive.${c}`];let m,f;J.Z.meshPrimitiveAttribute(n,(function(e,t){if(l=d[t],(0,p.Z)(l)){if((0,p.Z)(h)){const e=h.attributes;if(e.hasOwnProperty(t)){const n=e[t];return void u.push({index:l,vertexBuffer:i[n.bufferView],componentsPerAttribute:n.componentsPerAttribute,componentDatatype:n.componentDatatype,normalize:n.normalized,offsetInBytes:n.byteOffset,strideInBytes:n.byteStride})}}const n=s[e],r=(0,p.Z)(n.normalized)&&n.normalized;u.push({index:l,vertexBuffer:i[n.bufferView],componentsPerAttribute:(0,te.Z)(n.type),componentDatatype:n.componentType,normalize:r,offsetInBytes:n.byteOffset,strideInBytes:(0,Q.Z)(o,n)})}}));const _=e._precreatedAttributes;if((0,p.Z)(_))for(f in _)_.hasOwnProperty(f)&&(l=d[f],(0,p.Z)(l)&&(m=_[f],m.index=l,u.push(m)));let g;if((0,p.Z)(n.indices)){let e=s[n.indices].bufferView;(0,p.Z)(h)&&(e=h.bufferView),g=i[e]}r[`${a}.primitive.${c}`]=new K.Z({context:t,attributes:u,indexBuffer:g})}))}))}function _t(e){const t=e._loadResources;t.createRenderStates&&(t.createRenderStates=!1,J.Z.material(e.gltfInternal,(function(t,n){!function(e,t,n){const i=e._rendererResources.renderStates;let r=[N.Z.FUNC_ADD,N.Z.FUNC_ADD],o=[N.Z.ONE,N.Z.ONE_MINUS_SRC_ALPHA,N.Z.ONE,N.Z.ONE_MINUS_SRC_ALPHA];(0,p.Z)(t.extensions)&&(0,p.Z)(t.extensions.KHR_blend)&&(r=t.extensions.KHR_blend.blendEquation,o=t.extensions.KHR_blend.blendFactors);const s=!t.doubleSided,a="BLEND"===t.alphaMode;i[n]=k.Z.fromCache({cull:{enabled:s},depthTest:{enabled:!0,func:ce.Z.LESS_OR_EQUAL},depthMask:!a,blending:{enabled:a,equationRgb:r[0],equationAlpha:r[1],functionSourceRgb:o[0],functionDestinationRgb:o[1],functionSourceAlpha:o[2],functionDestinationAlpha:o[3]}})}(e,t,n)})))}const gt={MODEL:function(e,t,n){return function(){return n.computedMatrix}},VIEW:function(e,t,n){return function(){return e.view}},PROJECTION:function(e,t,n){return function(){return e.projection}},MODELVIEW:function(e,t,n){const i=new R.Z;return function(){return R.Z.multiplyTransformation(e.view,n.computedMatrix,i)}},CESIUM_RTC_MODELVIEW:function(e,t,n){const i=new R.Z;return function(){return R.Z.multiplyTransformation(e.view,n.computedMatrix,i),R.Z.setTranslation(i,t._rtcCenterEye,i)}},MODELVIEWPROJECTION:function(e,t,n){const i=new R.Z;return function(){return R.Z.multiplyTransformation(e.view,n.computedMatrix,i),R.Z.multiply(e._projection,i,i)}},MODELINVERSE:function(e,t,n){const i=new R.Z;return function(){return R.Z.inverse(n.computedMatrix,i)}},VIEWINVERSE:function(e,t){return function(){return e.inverseView}},PROJECTIONINVERSE:function(e,t,n){return function(){return e.inverseProjection}},MODELVIEWINVERSE:function(e,t,n){const i=new R.Z,r=new R.Z;return function(){return R.Z.multiplyTransformation(e.view,n.computedMatrix,i),R.Z.inverse(i,r)}},MODELVIEWPROJECTIONINVERSE:function(e,t,n){const i=new R.Z,r=new R.Z;return function(){return R.Z.multiplyTransformation(e.view,n.computedMatrix,i),R.Z.multiply(e._projection,i,i),R.Z.inverse(i,r)}},MODELINVERSETRANSPOSE:function(e,t,n){const i=new R.Z,r=new M.Z;return function(){return R.Z.inverse(n.computedMatrix,i),R.Z.getMatrix3(i,r),M.Z.transpose(r,r)}},MODELVIEWINVERSETRANSPOSE:function(e,t,n){const i=new R.Z,r=new R.Z,o=new M.Z;return function(){return R.Z.multiplyTransformation(e.view,n.computedMatrix,i),R.Z.inverse(i,r),R.Z.getMatrix3(r,o),M.Z.transpose(o,o)}},VIEWPORT:function(e,t,n){return function(){return e.viewportCartesian4}}};function Zt(e,t,n,i,r,o,s){const a={},c={};let u,l;return J.Z.techniqueUniform(n,(function(n,d){let h;if((0,p.Z)(i)&&(0,p.Z)(i[d]))h=Te.Z.createUniformFunction(n.type,i[d],o,s),a[d]=h.func,c[d]=h;else if((0,p.Z)(n.node))a[d]=function(e,t,n,i){const r=t._runtime.nodes[e];return gt[n](i,t,r)}(n.node,e,n.semantic,r.uniformState);else if((0,p.Z)(n.semantic))if("JOINTMATRIX"===n.semantic)u=d;else if("MORPHWEIGHTS"===n.semantic)l=d;else if("ALPHACUTOFF"===n.semantic){const e=t.alphaMode;if((0,p.Z)(e)&&"MASK"===e){const e=(0,m.Z)(t.alphaCutoff,.5);h=Te.Z.createUniformFunction(n.type,e,o,s),a[d]=h.func,c[d]=h}}else a[d]=Te.Z.getGltfSemanticUniforms()[n.semantic](r.uniformState,e);else if((0,p.Z)(n.value)){const e=Te.Z.createUniformFunction(n.type,n.value,o,s);a[d]=e.func,c[d]=e}})),{map:a,values:c,jointMatrixUniformName:u,morphWeightsUniformName:l}}function yt(e){return Te.Z.createUniformsForDracoQuantizedAttributes(e.attributes)}function xt(e,t){const n=nt(e,t),i=e._quantizedUniforms[n];return Te.Z.createUniformsForQuantizedAttributes(e.gltfInternal,t,i)}function Tt(e){return function(){return e}}function St(e){return function(){return e.computedJointMatrices}}function bt(e){return function(){return e.weights}}function Ct(e){return function(){return e.silhouetteColor}}function wt(e){return function(){return e.silhouetteSize}}function Et(e){return function(){return e.color}}function vt(e){return function(){return e._clippingPlanesMatrix}}function At(e){return function(){return e._iblReferenceFrameMatrix}}function It(e){return function(){const t=e.clippingPlanes;return(0,p.Z)(t)&&t.enabled?t.texture:e._defaultTexture}}function Mt(e){return function(){const t=e.clippingPlanes;if(!(0,p.Z)(t))return u.Z.WHITE.withAlpha(0);const n=u.Z.clone(t.edgeColor);return n.alpha=t.edgeWidth,n}}function Rt(e){return function(){return ae.Z.getColorBlend(e.colorBlendMode,e.colorBlendAmount)}}function Pt(e){return function(){return e._imageBasedLighting.imageBasedLightingFactor}}function Ot(e){return function(){return e._lightColor}}function Lt(e){return function(){return e._imageBasedLighting.luminanceAtZenith}}function Dt(e){return function(){return e._imageBasedLighting.sphericalHarmonicCoefficients}}function Bt(e){return function(){return e._imageBasedLighting.specularEnvironmentMapAtlas.texture}}function Nt(e){return function(){return e._imageBasedLighting.specularEnvironmentMapAtlas.texture.dimensions}}function Ft(e){return function(){return e._imageBasedLighting.specularEnvironmentMapAtlas.maximumMipmapLevel}}function Vt(e,t){switch(e.mode){case O.Z.TRIANGLES:return t/3;case O.Z.TRIANGLE_STRIP:case O.Z.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}function Ut(e,t,n,o,s){const a=e._nodeCommands,c=e._pickIds,u=e.allowPicking,d=e._runtime.meshesByName,h=e._rendererResources,m=h.vertexArrays,f=h.programs,_=h.renderStates,g=e._uniformMaps,Z=e.gltfInternal,y=Z.accessors,x=Z.meshes,T=t.mesh,S=x[T],b=S.primitives,C=b.length;for(let t=0;t<C;++t){const h=b[t],x=y[h.indices],C=e._runtime.materialsById[h.material]._program,E=e._decodedData[`${T}.primitive.${t}`];let v;const A=h.attributes.POSITION;if((0,p.Z)(A)){const e=Te.Z.getAccessorMinMax(Z,A);v=i.Z.fromCornerPoints(r.Z.fromArray(e.min),r.Z.fromArray(e.max))}const I=m[`${T}.primitive.${t}`];let M,P;if((0,p.Z)(E))P=E.numberOfIndices,M=0;else if((0,p.Z)(x))P=x.count,M=x.byteOffset/w.Z.getSizeInBytes(x.componentType);else{P=y[h.attributes.POSITION].count,M=0}e._trianglesLength+=Vt(h,P),h.mode===O.Z.POINTS&&(e._pointsLength+=P);const L=g[h.material];let D=L.uniformMap;if((0,p.Z)(L.jointMatrixUniformName)){const e={};e[L.jointMatrixUniformName]=St(n),D=(0,l.Z)(D,e)}if((0,p.Z)(L.morphWeightsUniformName)){const e={};e[L.morphWeightsUniformName]=bt(n),D=(0,l.Z)(D,e)}D=(0,l.Z)(D,{gltf_color:Et(e),gltf_colorBlend:Rt(e),gltf_clippingPlanes:It(e),gltf_clippingPlanesEdgeStyle:Mt(e),gltf_clippingPlanesMatrix:vt(e),gltf_iblReferenceFrameMatrix:At(e),gltf_iblFactor:Pt(e),gltf_lightColor:Ot(e),gltf_sphericalHarmonicCoefficients:Dt(e),gltf_specularMap:Bt(e),gltf_specularMapSize:Nt(e),gltf_maxSpecularLOD:Ft(e),gltf_luminanceAtZenith:Lt(e)}),Ae.Z.addUniforms(e,D),(0,p.Z)(e._uniformMapLoaded)&&(D=e._uniformMapLoaded(D,C,n));let B={};e.extensionsUsed.WEB3D_quantized_attributes?B=xt(e,h):e._dequantizeInShader&&(0,p.Z)(E)&&(B=yt(E)),D=(0,l.Z)(D,B);const N=_[h.material],F=N.blending.enabled;let V=e._pickObject;(0,p.Z)(V)||(V={primitive:e,id:e.id,node:n.publicNode,mesh:d[S.name]});const k=Ee.Z.castShadows(e._shadows),q=Ee.Z.receiveShadows(e._shadows);let H;if(u&&!(0,p.Z)(e._uniformMapLoaded)){H=o.createPickId(V),c.push(H);const e={czm_pickColor:Tt(H.color)};D=(0,l.Z)(D,e)}u&&(H=(0,p.Z)(e._pickIdLoaded)&&(0,p.Z)(e._uniformMapLoaded)?e._pickIdLoaded():"czm_pickColor");const j=new U.Z({boundingVolume:new i.Z,cull:e.cull,modelMatrix:new R.Z,primitiveType:h.mode,vertexArray:I,count:P,offset:M,shaderProgram:f[C],castShadows:k,receiveShadows:q,uniformMap:D,renderState:N,owner:V,pass:F?z.Z.TRANSLUCENT:e.opaquePass,pickId:H});let G;s||(G=U.Z.shallowClone(j),G.boundingVolume=new i.Z,G.modelMatrix=new R.Z);const W={show:!0,boundingSphere:v,command:j,command2D:G,silhouetteModelCommand:void 0,silhouetteModelCommand2D:void 0,silhouetteColorCommand:void 0,silhouetteColorCommand2D:void 0,translucentCommand:void 0,translucentCommand2D:void 0,disableCullingCommand:void 0,disableCullingCommand2D:void 0,programId:C};n.commands.push(W),a.push(W)}}function zt(e,t){const n=t.context,i=t.scene3DOnly,o=e._quantizedVertexShaders,s=e._sourceTechniques,a=e._sourcePrograms,c=e._rendererResources;let u=c.sourceShaders;e._loadRendererResourcesFromCache&&(u=c.sourceShaders=e._cachedRendererResources.sourceShaders);for(const t in s)if(s.hasOwnProperty(t)){const i=s[t].program,r=a[i];let c=u[r.vertexShader];if(Te.Z.checkSupportedGlExtensions(r.glExtensions,n),e.extensionsUsed.WEB3D_quantized_attributes||e._dequantizeInShader){let t=o[i];(0,p.Z)(t)||(t=it(c,i,e),o[i]=t),c=t}c=rt(c,i,e._vertexShaderLoaded)}if(e._loadRendererResourcesFromCache){const t=e._cachedRendererResources;c.buffers=t.buffers,c.vertexArrays=t.vertexArrays,c.programs=t.programs,c.silhouettePrograms=t.silhouettePrograms,c.textures=t.textures,c.samplers=t.samplers,c.renderStates=t.renderStates,(0,p.Z)(e._precreatedAttributes)&&pt(e,n),e._cachedGeometryByteLength+=function(e){let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].sizeInBytes);return t}(t.buffers),e._cachedTexturesByteLength+=function(e){let t=0;for(const n in e)e.hasOwnProperty(n)&&(t+=e[n].sizeInBytes);return t}(t.textures)}else!function(e,t){const n=e._loadResources;if(0!==n.pendingBufferLoads)return;const i=t.context,r=n.vertexBuffersToCreate,o=n.indexBuffersToCreate;let s;if(e.asynchronous){for(;r.length>0&&(et.set(r.peek(),e,i),t.jobScheduler.execute(et,me.Z.BUFFER));)r.dequeue();for(;o.length>0&&(s=o.peek(),tt.set(s.id,s.componentType,e,i),t.jobScheduler.execute(tt,me.Z.BUFFER));)o.dequeue()}else{for(;r.length>0;)Xe(r.dequeue(),e,i);for(;o.length>0;)s=o.dequeue(),Qe(s.id,s.componentType,e,i)}}(e,t),function(e,t){const n=e._loadResources,i=n.programsToCreate;if(0!==n.pendingShaderLoads)return;if(0!==n.pendingBufferLoads)return;const r=t.context;if(e.asynchronous)for(;i.length>0&&(ut.set(i.peek(),e,r),t.jobScheduler.execute(ut,me.Z.PROGRAM));)i.dequeue();else for(;i.length>0;)st(i.dequeue(),e,r)}(e,t),function(e){const t=e._loadResources;if(t.createSamplers){t.createSamplers=!1;const n=e._rendererResources.samplers;J.Z.sampler(e.gltfInternal,(function(e,t){n[t]=new q.Z({wrapS:e.wrapS,wrapT:e.wrapT,minificationFilter:e.minFilter,magnificationFilter:e.magFilter})}))}}(e),function(e){const t=e._loadResources;if(0===t.pendingBufferLoads)for(;t.texturesToCreateFromBufferView.length>0;){const n=t.texturesToCreateFromBufferView.dequeue(),i=e.gltfInternal,r=i.bufferViews[n.bufferView],o=(i.textures[n.id].source,Te.Z.getFailedLoadFunction(e,"image",`id: ${n.id}, bufferView: ${n.bufferView}`));if("image/ktx2"===n.mimeType){const i=new Uint8Array(t.getBuffer(r));(0,A.Z)(i).then(We(e,n.id)).catch(o),++e._loadResources.pendingTextureLoads}else{const e=lt(t,n);(0,v.Z)({uint8Array:t.getBuffer(r),format:n.mimeType,flipY:!1,skipColorSpaceConversion:!0}).then(e).catch(o),++t.pendingBufferViewToImage}}}(e),function(e,t){const n=t.context,i=e._loadResources.texturesToCreate;if(e.asynchronous)for(;i.length>0&&(mt.set(i.peek(),e,n),t.jobScheduler.execute(mt,me.Z.TEXTURE));)i.dequeue();else for(;i.length>0;)ht(i.dequeue(),e,n)}(e,t);!function(e){const t=e._loadResources;if(0!==t.pendingBufferLoads)return;if(!t.createSkins)return;t.createSkins=!1;const n=e.gltfInternal,i=n.accessors,r={};J.Z.skin(n,(function(t,n){const o=i[t.inverseBindMatrices];let s;R.Z.equals(t.bindShapeMatrix,R.Z.IDENTITY)||(s=R.Z.clone(t.bindShapeMatrix)),r[n]={inverseBindMatrices:fe.Z.getSkinInverseBindMatrices(e,o),bindShapeMatrix:s}})),function(e,t){const n=e.gltfInternal,i=n.skins,r=n.nodes,o=e._runtime.nodes,s=e._loadResources.skinnedNodesIds,a=s.length;for(let e=0;e<a;++e){const n=s[e],a=o[n],c=r[n],u=t[c.skin];a.inverseBindMatrices=u.inverseBindMatrices,a.bindShapeMatrix=u.bindShapeMatrix;const l=i[c.skin].joints,d=l.length;for(let e=0;e<d;++e){const t=o[l[e]];a.joints.push(t)}}}(e,r)}(e),function(e){const t=e._loadResources;if(!t.finishedPendingBufferLoads())return;if(!t.createRuntimeAnimations)return;t.createRuntimeAnimations=!1,e._runtime.animations=[];const n=e._runtime.nodes,i=e.gltfInternal.accessors;J.Z.animation(e.gltfInternal,(function(t,r){const o=t.channels,s=t.samplers;let a=Number.MAX_VALUE,c=-Number.MAX_VALUE;const u=o.length,l=new Array(u);for(let d=0;d<u;++d){const u=o[d],h=u.target,m=h.path,f=s[u.sampler],p=fe.Z.getAnimationParameterValues(e,i[f.input]),_=fe.Z.getAnimationParameterValues(e,i[f.output]);a=Math.min(a,p[0]),c=Math.max(c,p[p.length-1]);const g=fe.Z.getAnimationSpline(e,r,t,u.sampler,f,p,m,_);l[d]=ft(e,n[h.node],h.path,g)}e._runtime.animations[r]={name:t.name,startTime:a,stopTime:c,channelEvaluators:l}}))}(e),e._loadRendererResourcesFromCache||(pt(e,n),_t(e)),function(e,t){const n=e._loadResources;if(!n.finishedProgramCreation())return;if(!n.createUniformMaps)return;n.createUniformMaps=!1;const i=e.gltfInternal,r=e._sourceTechniques,o=e._uniformMaps,s=e._rendererResources.textures,a=e._defaultTexture;J.Z.material(i,(function(n,i){const c=e._runtime.materialsById[i],u=r[c._technique],l=c._values,d=Zt(e,n,u,l,t,s,a),h=o[i];if(h.uniformMap=d.map,h.values=d.values,h.jointMatrixUniformName=d.jointMatrixUniformName,h.morphWeightsUniformName=d.morphWeightsUniformName,(0,p.Z)(u.attributes.a_outlineCoordinates)){const n=xe.Z.createTexture(e,t);h.uniformMap.u_outlineTexture=function(){return n}}}))}(e,n),function(e,t,n){const i=e._loadResources;if(!i.finishedEverythingButTextureCreation())return;if(!i.createRuntimeNodes)return;i.createRuntimeNodes=!1;const o=[],s=e._runtime.nodes,a=e.gltfInternal,c=a.nodes,u=a.scenes[a.scene].nodes,l=u.length,d=[],h={};for(let i=0;i<l;++i)for(d.push({parentRuntimeNode:void 0,gltfNode:c[u[i]],id:u[i]});d.length>0;){const i=d.pop();h[i.id]=!0;const a=i.parentRuntimeNode,u=i.gltfNode,l=s[i.id];if(0===l.parents.length)if((0,p.Z)(u.matrix))l.matrix=R.Z.fromColumnMajorArray(u.matrix);else{const e=u.rotation;l.translation=r.Z.fromArray(u.translation),l.rotation=L.Z.unpack(e),l.scale=r.Z.fromArray(u.scale)}(0,p.Z)(a)?(a.children.push(l),l.parents.push(a)):o.push(l),(0,p.Z)(u.mesh)&&Ut(e,u,l,t,n);const m=u.children;if((0,p.Z)(m)){const e=m.length;for(let t=0;t<e;t++){const e=m[t];h[e]||d.push({parentRuntimeNode:l,gltfNode:c[e],id:m[t]})}}}e._runtime.rootNodes=o,e._runtime.nodes=s}(e,n,i)}function kt(e,t){const n=e.publicNode,i=n.matrix;n.useMatrix&&(0,p.Z)(i)?R.Z.clone(i,t):(0,p.Z)(e.matrix)?R.Z.clone(e.matrix,t):(R.Z.fromTranslationQuaternionRotationScale(e.translation,e.rotation,e.scale,t),n.setMatrix(t))}const qt=[],Ht=new o.Z,jt=new R.Z;let Gt=new R.Z;function Wt(e,t){const n=U.Z.shallowClone(t);return n.pass=z.Z.TRANSLUCENT,n.renderState=function(e,t){const n=(0,c.Z)(t,!0);return n.cull.enabled=!1,n.depthTest.enabled=!0,n.depthMask=!1,n.blending=oe.Z.ALPHA_BLEND,e.opaquePass===z.Z.CESIUM_3D_TILE&&(n.stencilTest=Ie.Z.setCesium3DTileBit(),n.stencilMask=Ie.Z.CESIUM_3D_TILE_MASK),k.Z.fromCache(n)}(e,t.renderState),n}function $t(e,t,n){const i=t.scene3DOnly,r=e.color.alpha;if(r>0&&r<1){const t=e._nodeCommands,r=t.length;if(r>0&&(!(0,p.Z)(t[0].translucentCommand)||n))for(let n=0;n<r;++n){const r=t[n],o=r.command;if(r.translucentCommand=Wt(e,o),!i){const t=r.command2D;r.translucentCommand2D=Wt(e,t)}}}}function Kt(e){const t=U.Z.shallowClone(e);return t.renderState=function(e){const t=(0,c.Z)(e,!0);return t.cull.enabled=!1,k.Z.fromCache(t)}(e.renderState),t}function Yt(e,t,n){const i=t.scene3DOnly;if(!e.backFaceCulling){const t=e._nodeCommands,r=t.length;if(r>0&&(!(0,p.Z)(t[0].disableCullingCommand)||n))for(let e=0;e<r;++e){const n=t[e],r=n.command;if(n.disableCullingCommand=Kt(r),!i){const e=n.command2D;n.disableCullingCommand2D=Kt(e)}}}}function Xt(e,t){const n=e._rendererResources.programs;for(const e in n)if(n.hasOwnProperty(e)&&n[e]===t)return e}function Jt(e,t,n){let i=t.vertexShaderSource.sources[0];const r=t._attributeLocations,o=e._normalAttributeName;i=j.Z.replaceMain(i,"gltf_silhouette_main"),i+=`uniform float gltf_silhouetteSize; \nvoid main() \n{ \n    gltf_silhouette_main(); \n    vec3 n = normalize(czm_normal3D * ${o}); \n    n.x *= czm_projection[0][0]; \n    n.y *= czm_projection[1][1]; \n    vec4 clip = gl_Position; \n    clip.xy += n.xy * clip.w * gltf_silhouetteSize * czm_pixelRatio / czm_viewport.z; \n    gl_Position = clip; \n}`;return H.Z.fromCache({context:n.context,vertexShaderSource:i,fragmentShaderSource:"uniform vec4 gltf_silhouetteColor; \nvoid main() \n{ \n    gl_FragColor = czm_gammaCorrect(gltf_silhouetteColor); \n}",attributeLocations:r})}function Qt(e,t){return Fe(t.context)&&e.silhouetteSize>0&&e.silhouetteColor.alpha>0&&(0,p.Z)(e._normalAttributeName)}function en(e){return e.color.alpha>0&&e.color.alpha<1}function tn(e){return 0===e.color.alpha}function nn(e,t){return Math.floor(e)!==Math.floor(t)||Math.ceil(e)!==Math.ceil(t)}let rn=0;function on(e,t){const n=++rn%255,i=function(e){const t=e._nodeCommands,n=t.length;for(let e=0;e<n;++e)if(t[e].command.pass===z.Z.TRANSLUCENT)return!0;return!1}(e)||en(e)||e.silhouetteColor.alpha<1,r=e._rendererResources.silhouettePrograms,o=t.scene3DOnly,s=e._nodeCommands,a=s.length;for(let u=0;u<a;++u){const a=s[u],d=a.command,h=en(e)?a.translucentCommand:d,m=U.Z.shallowClone(h);let f=(0,c.Z)(h.renderState);f.stencilTest={enabled:!0,frontFunction:N.Z.ALWAYS,backFunction:N.Z.ALWAYS,reference:n,mask:-1,frontOperation:{fail:N.Z.KEEP,zFail:N.Z.KEEP,zPass:N.Z.REPLACE},backOperation:{fail:N.Z.KEEP,zFail:N.Z.KEEP,zPass:N.Z.REPLACE}},tn(e)&&(f.colorMask={red:!1,green:!1,blue:!1,alpha:!1},f.depthMask=!1),f=k.Z.fromCache(f),m.renderState=f,a.silhouetteModelCommand=m;const _=U.Z.shallowClone(d);f=(0,c.Z)(d.renderState,!0),f.depthTest.enabled=!0,f.cull.enabled=!1,i&&(_.pass=z.Z.TRANSLUCENT,f.depthMask=!1,f.blending=oe.Z.ALPHA_BLEND),f.stencilTest={enabled:!0,frontFunction:N.Z.NOTEQUAL,backFunction:N.Z.NOTEQUAL,reference:n,mask:-1,frontOperation:{fail:N.Z.KEEP,zFail:N.Z.KEEP,zPass:N.Z.KEEP},backOperation:{fail:N.Z.KEEP,zFail:N.Z.KEEP,zPass:N.Z.KEEP}},f=k.Z.fromCache(f);const g=d.shaderProgram,Z=Xt(e,g);let y=r[Z];(0,p.Z)(y)||(y=Jt(e,g,t),r[Z]=y);const x=(0,l.Z)(d.uniformMap,{gltf_silhouetteColor:Ct(e),gltf_silhouetteSize:wt(e)});if(_.renderState=f,_.shaderProgram=y,_.uniformMap=x,_.castShadows=!1,_.receiveShadows=!1,a.silhouetteColorCommand=_,!o){const e=a.command2D,t=U.Z.shallowClone(m);t.boundingVolume=e.boundingVolume,t.modelMatrix=e.modelMatrix,a.silhouetteModelCommand2D=t;const n=U.Z.shallowClone(_);t.boundingVolume=e.boundingVolume,t.modelMatrix=e.modelMatrix,a.silhouetteColorCommand2D=n}}}function sn(e,t,n){if(!Qt(e,t))return;const i=e._nodeCommands,r=i.length>0&&(nn(e.color.alpha,e._colorPreviousAlpha)||nn(e.silhouetteColor.alpha,e._silhouetteColorPreviousAlpha)||!(0,p.Z)(i[0].silhouetteModelCommand));e._colorPreviousAlpha=e.color.alpha,e._silhouetteColorPreviousAlpha=e.silhouetteColor.alpha,(r||n)&&on(e,t)}const an=new i.Z;const cn=new r.Z,un=new s.Z;function ln(e,t){let n=e.scale;if(0!==e.minimumPixelSize){const i=t.context,o=Math.max(i.drawingBufferWidth,i.drawingBufferHeight),s=(0,p.Z)(e._clampedModelMatrix)?e._clampedModelMatrix:e.modelMatrix;if(cn.x=s[12],cn.y=s[13],cn.z=s[14],(0,p.Z)(e._rtcCenter)&&r.Z.add(e._rtcCenter,cn,cn),e._mode!==we.Z.SCENE3D){const e=t.mapProjection,n=e.ellipsoid.cartesianToCartographic(cn,un);e.project(n,cn),r.Z.fromElements(cn.z,cn.x,cn.y,cn)}const a=e.boundingSphereInternal.radius,c=function(e,t,n){return an.center=e,an.radius=t,n.camera.getPixelSize(an,n.context.drawingBufferWidth,n.context.drawingBufferHeight)}(cn,a,t),u=1/c;Math.min(u*(2*a),o)<e.minimumPixelSize&&(n=e.minimumPixelSize*c/(2*e._initialRadius))}return(0,p.Z)(e.maximumScale)?Math.min(e.maximumScale,n):n}function dn(e){(0,p.Z)(e._cacheKey)&&(0,p.Z)(e._cachedGltf)&&0==--e._cachedGltf.count&&delete De[e._cacheKey],e._cachedGltf=void 0}function hn(e,t){this.buffers=void 0,this.vertexArrays=void 0,this.programs=void 0,this.sourceShaders=void 0,this.silhouettePrograms=void 0,this.textures=void 0,this.samplers=void 0,this.renderStates=void 0,this.ready=!1,this.context=e,this.cacheKey=t,this.count=0}function mn(e){for(const t in e)e.hasOwnProperty(t)&&e[t].destroy()}function fn(e,t,n){return function(i){if(e.heightReference===he.Z.RELATIVE_TO_GROUND){const e=t.cartesianToCartographic(i,un);e.height+=n.height,t.cartographicToCartesian(e,i)}const r=e._clampedModelMatrix;R.Z.clone(e.modelMatrix,r),r[12]=i.x,r[13]=i.y,r[14]=i.z,e._heightChanged=!0}}hn.prototype.release=function(){if(0==--this.count)return(0,p.Z)(this.cacheKey)&&delete this.context.cache.modelRendererResourceCache[this.cacheKey],mn((e=this).buffers),mn(e.vertexArrays),mn(e.programs),mn(e.silhouettePrograms),mn(e.textures),(0,g.Z)(this);var e};const pn=new r.Z,_n=new s.Z;const gn=new R.Z,Zn=new M.Z,yn=new R.Z;function xn(e,t){e.programs!==t.programs&&mn(e.programs),e.silhouettePrograms!==t.silhouettePrograms&&mn(e.silhouettePrograms)}Ne.prototype.update=function(e){if(e.mode===we.Z.MORPHING)return;if(!x.Z.supportsWebP.initialized)return void x.Z.supportsWebP.initialize();const t=e.context;this._defaultTexture=t.defaultTexture;const n=x.Z.supportsWebP();if(this._state===Re.NEEDS_LOAD&&(0,p.Z)(this.gltfInternal)){let n;const i=this.cacheKey;if((0,p.Z)(i)){t.cache.modelRendererResourceCache=(0,m.Z)(t.cache.modelRendererResourceCache,{});const e=t.cache.modelRendererResourceCache;if(n=e[this.cacheKey],(0,p.Z)(n)){if(!n.ready)return;++n.count,this._loadRendererResourcesFromCache=!0}else n=new hn(t,i),n.count=1,e[this.cacheKey]=n;this._cachedRendererResources=n}else n=new hn(t),n.count=1,this._cachedRendererResources=n;if(this._state=Re.LOADING,this._state!==Re.FAILED){const t=this.gltfInternal.extensions;if((0,p.Z)(t)&&(0,p.Z)(t.CESIUM_RTC)){const n=r.Z.fromArray(t.CESIUM_RTC.center);if(!r.Z.equals(n,r.Z.ZERO)){this._rtcCenter3D=n;const t=e.mapProjection,i=t.ellipsoid.cartesianToCartographic(this._rtcCenter3D),o=t.project(i);r.Z.fromElements(o.z,o.x,o.y,o),this._rtcCenter2D=o,this._rtcCenterEye=new r.Z,this._rtcCenter=this._rtcCenter3D}}(0,X.Z)(this.gltfInternal),this._loadResources=new _e.Z,this._loadRendererResourcesFromCache||Te.Z.parseBuffers(this,Ge)}}const a=this._loadResources,u=this._incrementallyLoadTextures;let l=!1;if(this._state===Re.LOADING){if(0===a.pendingBufferLoads){if(!a.initialized){if(e.brdfLutGenerator.update(e),Te.Z.checkSupportedExtensions(this.extensionsRequired,n),Te.Z.updateForwardAxis(this),!(0,p.Z)(this.gltfInternal.extras.sourceVersion)){const e=this.gltfInternal,t=Te.Z.getAssetVersion(e),n=(0,p.Z)(Te.Z.getUsedExtensions(e).KHR_techniques_webgl);"2.0"!==t&&(0,_.Z)("gltf-1.0","glTF 1.0 assets were deprecated in CesiumJS 1.94. They will be removed in 1.95. Please convert any glTF 1.0 assets to glTF 2.0."),n&&(0,_.Z)("KHR_techniques_webgl","Support for glTF 1.0 techniques and the KHR_techniques_webgl glTF extension were deprecated in CesiumJS 1.94. It will be removed in 1.95. If custom GLSL shaders are needed, use CustomShader instead."),e.extras.sourceVersion=t,e.extras.sourceKHRTechniquesWebGL=n,this._sourceVersion=t,this._sourceKHRTechniquesWebGL=n,(0,ie.Z)(e),(0,Y.Z)(e);const i={addBatchIdToGeneratedShaders:this._addBatchIdToGeneratedShaders};(0,be.Z)(e,i),(0,Ce.Z)(e,i)}this._sourceVersion=this.gltfInternal.extras.sourceVersion,this._sourceKHRTechniquesWebGL=this.gltfInternal.extras.sourceKHRTechniquesWebGL,this._dequantizeInShader=this._dequantizeInShader&&ue.Z.hasExtension(this),function(e){const t=e.gltfInternal,n=e._loadResources;J.Z.buffer(t,(function(e,t){n.buffers[t]=e.extras._pipeline.source}))}(this),function(e){const t={},n={},i={};e._runtime.articulationsByName=t,e._runtime.articulationsByStageKey=n,e._runtime.stagesByKey=i;const r=e.gltfInternal;if(!(0,ee.Z)(r,"AGI_articulations")||!(0,p.Z)(r.extensions)||!(0,p.Z)(r.extensions.AGI_articulations))return;const o=r.extensions.AGI_articulations.articulations;if(!(0,p.Z)(o))return;const s=o.length;for(let e=0;e<s;++e){const r=(0,c.Z)(o[e]);r.nodes=[],r.isDirty=!0,t[r.name]=r;const s=r.stages.length;for(let e=0;e<s;++e){const t=r.stages[e];t.currentValue=t.initialValue;const o=`${r.name} ${t.name}`;n[o]=r,i[o]=t}}}(this),function(e){const t=e.gltfInternal;if(!(0,ee.Z)(t,"KHR_techniques_webgl"))return;const n=e._sourcePrograms,i=e._sourceTechniques,r=t.extensions.KHR_techniques_webgl.programs;J.Z.technique(t,(function(e,t){i[t]=(0,c.Z)(e);const o=e.program;(0,p.Z)(n[o])||(n[o]=(0,c.Z)(r[o]))}))}(this),this._loadRendererResourcesFromCache||(function(e){const t=e.gltfInternal.bufferViews,n=e._loadResources.vertexBuffersToCreate;J.Z.bufferView(e.gltfInternal,(function(e,t){e.target===N.Z.ARRAY_BUFFER&&n.enqueue(t)}));const i=e._loadResources.indexBuffersToCreate,r={};J.Z.accessor(e.gltfInternal,(function(e){const n=e.bufferView;(0,p.Z)(n)&&(t[n].target!==N.Z.ELEMENT_ARRAY_BUFFER||(0,p.Z)(r[n])||(r[n]=!0,i.enqueue({id:n,componentType:e.componentType})))}))}(this),function(e){const t=e.gltfInternal,n=t.buffers,i=t.bufferViews,r=e._rendererResources.sourceShaders;J.Z.shader(t,(function(t,o){if((0,p.Z)(t.bufferView)){const e=t.bufferView,s=i[e],a=s.buffer,c=n[a],u=(0,C.Z)(c.extras._pipeline.source,s.byteOffset,s.byteLength);r[o]=u}else if((0,p.Z)(t.extras._pipeline.source))r[o]=t.extras._pipeline.source;else{++e._loadResources.pendingShaderLoads;const n=e._resource.getDerivedResource({url:t.uri});n.fetchText().then(function(e,t,n){return function(i){const r=e._loadResources;r.shaders[n]={source:i,type:t,bufferView:void 0},--r.pendingShaderLoads,e._rendererResources.sourceShaders[n]=i}}(e,t.type,o)).catch(Te.Z.getFailedLoadFunction(e,"shader",n.url))}}))}(this),function(e){const t=e._sourceTechniques;for(const n in t)if(t.hasOwnProperty(n)){const i=t[n];e._loadResources.programsToCreate.enqueue({programId:i.program,techniqueId:n})}}(this),function(e,t,n){const i=e.gltfInternal,r=i.images;let o;J.Z.texture(i,(function(i,s){let a=i.source;(0,p.Z)(i.extensions)&&(0,p.Z)(i.extensions.EXT_texture_webp)&&n?a=i.extensions.EXT_texture_webp.source:(0,p.Z)(i.extensions)&&(0,p.Z)(i.extensions.KHR_texture_basisu)&&t.supportsBasis&&(a=i.extensions.KHR_texture_basisu.source);const c=r[a],u=c.bufferView,l=c.mimeType;if(o=c.uri,(0,p.Z)(u))e._loadResources.texturesToCreateFromBufferView.enqueue({id:s,image:void 0,bufferView:u,mimeType:l});else{++e._loadResources.pendingTextureLoads;const t=e._resource.getDerivedResource({url:o});let n;n=$e.test(o)?(0,A.Z)(t):t.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0}),n.then(We(e,s)).catch(Te.Z.getFailedLoadFunction(e,"image",t.url))}}))}(this,t,n)),function(e){const t=e.gltfInternal,n=e._sourceTechniques,i={},r={},o=e._uniformMaps;J.Z.material(t,(function(t,s){o[s]={uniformMap:void 0,values:void 0,jointMatrixUniformName:void 0,morphWeightsUniformName:void 0};const a=new ge.Z(e,t,s);if((0,p.Z)(t.extensions)&&(0,p.Z)(t.extensions.KHR_techniques_webgl)){const e=t.extensions.KHR_techniques_webgl.technique;a._technique=e,a._program=n[e].program,J.Z.materialValue(t,(function(e,t){(0,p.Z)(a._values)||(a._values={}),a._values[t]=(0,c.Z)(e)}))}i[t.name]=a,r[s]=a})),e._runtime.materialsByName=i,e._runtime.materialsById=r}(this),function(e){const t={},n=e._runtime.materialsById;J.Z.mesh(e.gltfInternal,(function(i,r){t[i.name]=new Ze.Z(i,n,r),((0,p.Z)(e.extensionsUsed.WEB3D_quantized_attributes)||e._dequantizeInShader)&&J.Z.meshPrimitive(i,(function(t,n){const i=nt(e,t);let o=e._programPrimitives[i];(0,p.Z)(o)||(o={},e._programPrimitives[i]=o),o[`${r}.primitive.${n}`]=t}))})),e._runtime.meshesByName=t}(this),function(e){const t={},n={},i=[],r=e._loadResources.skinnedNodesIds,o=e._runtime.articulationsByName;J.Z.node(e.gltfInternal,(function(s,a){const c={matrix:void 0,translation:void 0,rotation:void 0,scale:void 0,computedShow:!0,transformToRoot:new R.Z,computedMatrix:new R.Z,dirtyNumber:0,commands:[],inverseBindMatrices:void 0,bindShapeMatrix:void 0,joints:[],computedJointMatrices:[],jointName:s.jointName,weights:[],children:[],parents:[],publicNode:void 0};if(c.publicNode=new ye.Z(e,s,c,a,Te.Z.getTransform(s)),t[a]=c,n[s.name]=c,(0,p.Z)(s.skin)&&(r.push(a),i.push(c)),(0,p.Z)(s.extensions)&&(0,p.Z)(s.extensions.AGI_articulations)){const e=s.extensions.AGI_articulations.articulationName;if((0,p.Z)(e)){let t=R.Z.clone(c.publicNode.originalMatrix,Ke);const n=o[e];n.nodes.push(c.publicNode);const i=n.stages.length;for(let e=0;e<i;++e)t=He(n.stages[e],t);c.publicNode.matrix=t}}})),e._runtime.nodes=t,e._runtime.nodesByName=n,e._runtime.skinnedNodes=i}(this),function(e){const t=e.gltfInternal.asset.copyright;if(!(0,p.Z)(t))return;const n=e._showCreditsOnScreen,i=t.split(";").map((function(e){return new h.Z(e.trim(),n)}));e._gltfCredits=i}(this),ue.Z.parse(this,t),a.initialized=!0}a.finishedDecoding()||ue.Z.decodeModel(this,t).catch(Te.Z.getFailedLoadFunction(this,"model",this.basePathInternal)),a.finishedDecoding()&&!a.resourcesParsed&&(this._boundingSphere=Te.Z.computeBoundingSphere(this),this._initialRadius=this._boundingSphere.radius,ue.Z.cacheDataForModel(this),a.resourcesParsed=!0),a.resourcesParsed&&0===a.pendingShaderLoads&&(this.showOutline&&xe.Z.outlinePrimitives(this),zt(this,e))}(a.finished()||u&&a.finishedEverythingButTextureCreation())&&(this._state=Re.LOADED,l=!0)}if((0,p.Z)(a)&&this._state===Re.LOADED&&(u&&!l&&zt(this,e),a.finished())){this._loadResources=void 0;const e=this._rendererResources,t=this._cachedRendererResources;t.buffers=e.buffers,t.vertexArrays=e.vertexArrays,t.programs=e.programs,t.sourceShaders=e.sourceShaders,t.silhouettePrograms=e.silhouettePrograms,t.textures=e.textures,t.samplers=e.samplers,t.renderStates=e.renderStates,t.ready=!0,this._normalAttributeName=Te.Z.getAttributeOrUniformBySemantic(this.gltfInternal,"NORMAL"),(0,p.Z)(this._precreatedAttributes)&&(t.vertexArrays={}),this.releaseGltfJson&&dn(this)}const d=Qt(this,e),f=en(this),g=tn(this),y=this.backFaceCulling,T=!(0,p.Z)(this.distanceDisplayCondition)||function(e,t){let n;const i=e.distanceDisplayCondition,o=i.near*i.near,s=i.far*i.far;if(t.mode===we.Z.SCENE2D)n=.5*(t.camera.frustum.right-t.camera.frustum.left),n*=n;else{let i=R.Z.getTranslation(e.modelMatrix,pn);if(t.mode===we.Z.COLUMBUS_VIEW){const e=t.mapProjection,n=e.ellipsoid.cartesianToCartographic(i,_n);i=e.project(n,i),r.Z.fromElements(i.z,i.x,i.y,i)}n=r.Z.distanceSquared(i,t.camera.positionWC)}return n>=o&&n<=s}(this,e),S=this.show&&T&&0!==this.scale&&(!g||d);if(this._imageBasedLighting.update(e),S&&this._state===Re.LOADED||l){const n=this.activeAnimations.update(e)||this._cesiumAnimationsDirty;this._cesiumAnimationsDirty=!1,this._dirty=!1;let a=this.modelMatrix;const c=e.mode!==this._mode;this._mode=e.mode;const u=!R.Z.equals(this._modelMatrix,a)||this._scale!==this.scale||this._minimumPixelSize!==this.minimumPixelSize||0!==this.minimumPixelSize||this._maximumScale!==this.maximumScale||this._heightReference!==this.heightReference||this._heightChanged||c;if(u||l){R.Z.clone(a,this._modelMatrix),function(e){(0,p.Z)(e._removeUpdateHeightCallback)&&(e._removeUpdateHeightCallback(),e._removeUpdateHeightCallback=void 0);const t=e._scene;if(!(0,p.Z)(t)||!(0,p.Z)(t.globe)||e.heightReference===he.Z.NONE){if(e.heightReference!==he.Z.NONE)throw new Z.Z("Height reference is not supported without a scene and globe.");return void(e._clampedModelMatrix=void 0)}const n=t.globe,i=n.ellipsoid,r=e.modelMatrix;cn.x=r[12],cn.y=r[13],cn.z=r[14];const o=i.cartesianToCartographic(cn);(0,p.Z)(e._clampedModelMatrix)||(e._clampedModelMatrix=R.Z.clone(r,new R.Z));const a=n._surface;e._removeUpdateHeightCallback=a.updateHeight(o,fn(e,i,o));const c=n.getHeight(o);if((0,p.Z)(c)){const t=fn(e,i,o);s.Z.clone(o,un),un.height=c,i.cartographicToCartesian(un,cn),t(cn)}}(this),(0,p.Z)(this._clampedModelMatrix)&&(a=this._clampedModelMatrix),this._scale=this.scale,this._minimumPixelSize=this.minimumPixelSize,this._maximumScale=this.maximumScale,this._heightReference=this.heightReference,this._heightChanged=!1;const t=ln(this,e),n=this._computedModelMatrix;R.Z.multiplyByUniformScale(a,t,n),this._upAxis===re.Z.Y?R.Z.multiplyTransformation(n,re.Z.Y_UP_TO_Z_UP,n):this._upAxis===re.Z.X&&R.Z.multiplyTransformation(n,re.Z.X_UP_TO_Z_UP,n),this.forwardAxis===re.Z.Z&&R.Z.multiplyTransformation(n,re.Z.Z_UP_TO_X_UP,n)}(n||u||l)&&(function(e,t,n,s){const a=e._maxDirtyNumber,c=e._runtime.rootNodes,u=c.length,l=qt;let d=e._computedModelMatrix;if(e._mode!==we.Z.SCENE3D&&!e._ignoreCommands){const t=R.Z.getColumn(d,3,Ht);if(o.Z.equals(t,o.Z.UNIT_W)){const t=e.boundingSphereInternal.center,n=B.Z.wgs84To2DModelMatrix(s,t,jt);d=R.Z.multiply(n,d,jt),(0,p.Z)(e._rtcCenter)&&(R.Z.setTranslation(d,o.Z.UNIT_W,d),e._rtcCenter=e._rtcCenter2D)}else d=B.Z.basisTo2D(s,d,jt),e._rtcCenter=e._rtcCenter3D}for(let o=0;o<u;++o){let u=c[o];for(kt(u,u.transformToRoot),l.push(u);l.length>0;){u=l.pop();const o=u.transformToRoot,c=u.commands;if(u.dirtyNumber===a||t||n){const t=R.Z.multiplyTransformation(d,o,u.computedMatrix),n=c.length;if(n>0)for(let o=0;o<n;++o){const n=c[o];let a=n.command;R.Z.clone(t,a.modelMatrix),i.Z.transform(n.boundingSphere,a.modelMatrix,a.boundingVolume),(0,p.Z)(e._rtcCenter)&&r.Z.add(e._rtcCenter,a.boundingVolume.center,a.boundingVolume.center),a=n.command2D,(0,p.Z)(a)&&e._mode===we.Z.SCENE2D&&(R.Z.clone(t,a.modelMatrix),a.modelMatrix[13]-=2*I.Z.sign(a.modelMatrix[13])*I.Z.PI*s.ellipsoid.maximumRadius,i.Z.transform(n.boundingSphere,a.modelMatrix,a.boundingVolume))}}const h=u.children;if((0,p.Z)(h)){const e=h.length;for(let t=0;t<e;++t){const e=h[t];e.dirtyNumber=Math.max(e.dirtyNumber,u.dirtyNumber),(e.dirtyNumber===a||n)&&(kt(e,e.transformToRoot),R.Z.multiplyTransformation(o,e.transformToRoot,e.transformToRoot)),l.push(e)}}}}++e._maxDirtyNumber}(this,u,l,e.mapProjection),this._dirty=!0,(n||l)&&function(e){const t=e._runtime.skinnedNodes,n=t.length;for(let e=0;e<n;++e){const n=t[e];Gt=R.Z.inverseTransformation(n.transformToRoot,Gt);const i=n.computedJointMatrices,r=n.joints,o=n.bindShapeMatrix,s=n.inverseBindMatrices,a=s.length;for(let e=0;e<a;++e)(0,p.Z)(i[e])||(i[e]=new R.Z),i[e]=R.Z.multiplyTransformation(Gt,r[e].transformToRoot,i[e]),i[e]=R.Z.multiplyTransformation(i[e],s[e],i[e]),(0,p.Z)(o)&&(i[e]=R.Z.multiplyTransformation(i[e],o,i[e]))}}(this)),this._perNodeShowDirty&&(this._perNodeShowDirty=!1,function(e){const t=e._runtime.rootNodes,n=t.length,i=qt;for(let e=0;e<n;++e){let n=t[e];for(n.computedShow=n.publicNode.show,i.push(n);i.length>0;){n=i.pop();const e=n.computedShow,t=n.commands,r=t.length;for(let n=0;n<r;++n)t[n].show=e;const o=n.children;if((0,p.Z)(o)){const t=o.length;for(let n=0;n<t;++n){const t=o[n];t.computedShow=e&&t.publicNode.show,i.push(t)}}}}}(this)),function(e,t){const n=e.id;if(e._id!==n){e._id=n;const t=e._pickIds,i=t.length;for(let e=0;e<i;++e)t[e].object.id=n}}(this),function(e){if(e._debugWireframe!==e.debugWireframe){e._debugWireframe=e.debugWireframe;const t=e.debugWireframe?O.Z.LINES:O.Z.TRIANGLES,n=e._nodeCommands,i=n.length;for(let e=0;e<i;++e)n[e].command.primitiveType=t}}(this),function(e){if(e.debugShowBoundingVolume!==e._debugShowBoundingVolume){e._debugShowBoundingVolume=e.debugShowBoundingVolume;const t=e.debugShowBoundingVolume,n=e._nodeCommands,i=n.length;for(let e=0;e<i;++e)n[e].command.debugShowBoundingVolume=t}}(this),function(e){if(e.shadows!==e._shadows){e._shadows=e.shadows;const t=Ee.Z.castShadows(e.shadows),n=Ee.Z.receiveShadows(e.shadows),i=e._nodeCommands,r=i.length;for(let e=0;e<r;e++){const r=i[e];r.command.castShadows=t,r.command.receiveShadows=n}}}(this),function(e,t){const n=e._clippingPlanes;(0,p.Z)(n)&&n.owner===e&&n.enabled&&n.update(t)}(this,e);const d=this._clippingPlanes;let h=0;const f=(0,m.Z)(this.referenceMatrix,a);if(this._imageBasedLighting.useSphericalHarmonicCoefficients||this._imageBasedLighting.useSpecularEnvironmentMaps){let e=Zn,n=gn;n=R.Z.multiply(t.uniformState.view3D,f,n),e=R.Z.getMatrix3(n,e),e=M.Z.getRotation(e,e),this._iblReferenceFrameMatrix=M.Z.transpose(e,this._iblReferenceFrameMatrix)}if(this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._imageBasedLighting.shouldRegenerateShaders,Ue(this)){let e=yn;e=R.Z.multiply(t.uniformState.view3D,f,e),e=R.Z.multiply(e,d.modelMatrix,e),this._clippingPlanesMatrix=R.Z.inverseTranspose(e,this._clippingPlanesMatrix),h=d.clippingPlanesState}this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._clippingPlanesState!==h,this._clippingPlanesState=h;const _=Ve(this);_!==this._colorShadingEnabled&&(this._colorShadingEnabled=_,this._shouldRegenerateShaders=!0);const g=this.splitDirection!==ve.Z.NONE;this._splittingEnabled!==g&&(this._splittingEnabled=g,this._shouldRegenerateShaders=!0),this._shouldRegenerateShaders?function(e,t){const n=e._rendererResources,i=e._cachedRendererResources;let r;if(xn(n,i),Ue(e)||Ve(e)||e.splitDirection!==ve.Z.NONE||e._shouldRegenerateShaders){e._shouldRegenerateShaders=!1,n.programs={},n.silhouettePrograms={};const i={},o=e._sourceTechniques;let s;for(const n in o)o.hasOwnProperty(n)&&(s=o[n],r=s.program,i[r]||(i[r]=!0,at({programId:r,techniqueId:n},e,t.context)))}else n.programs=i.programs,n.silhouettePrograms=i.silhouettePrograms;const o=n.programs,s=e._nodeCommands,a=s.length;for(let e=0;e<a;++e){const t=s[e];r=t.programId;const n=o[r];t.command.shaderProgram=n,(0,p.Z)(t.command2D)&&(t.command2D.shaderProgram=n)}$t(e,t,!0),Yt(e,t,!0),sn(e,t,!0)}(this,e):($t(this,e,!1),Yt(this,e,!1),sn(this,e,!1))}if(l){const t=this;return void e.afterRender.push((function(){t._ready=!0,t._readyPromise.resolve(t)}))}if(S&&!this._ignoreCommands){const t=e.commandList,n=e.passes,i=this._nodeCommands,r=i.length;let o,s;const a=e.mapProjection.ellipsoid.maximumRadius*I.Z.PI;let c;if(n.render||n.pick&&this.allowPicking){for(o=0;o<r;++o)if(s=i[o],s.show){let n=s.command;d?n=s.silhouetteModelCommand:f?n=s.translucentCommand:y||(n=s.disableCullingCommand),t.push(n),c=s.command.boundingVolume;const i=c.center.y-c.radius,r=c.center.y+c.radius,o=i<a&&r>a||i<-a&&r>-a;if(e.mode===we.Z.SCENE2D&&o){let e=s.command2D;d?e=s.silhouetteModelCommand2D:f?e=s.translucentCommand2D:y||(e=s.disableCullingCommand2D),t.push(e)}}if(d&&!n.pick)for(o=0;o<r;++o)if(s=i[o],s.show){t.push(s.silhouetteColorCommand),c=s.command.boundingVolume;const n=c.center.y-c.radius,i=c.center.y+c.radius,r=n<a&&i>a||n<-a&&i>-a;e.mode===we.Z.SCENE2D&&r&&t.push(s.silhouetteColorCommand2D)}}}const b=this._credit;(0,p.Z)(b)&&e.creditDisplay.addCredit(b);const w=this._resourceCredits,E=w.length;for(let t=0;t<E;t++)e.creditDisplay.addCredit(w[t]);const v=this._gltfCredits,P=v.length;for(let t=0;t<P;t++)e.creditDisplay.addCredit(v[t])},Ne.prototype.isDestroyed=function(){return!1},Ne.prototype.destroy=function(){(0,p.Z)(this._precreatedAttributes)&&mn(this._rendererResources.vertexArrays),(0,p.Z)(this._removeUpdateHeightCallback)&&(this._removeUpdateHeightCallback(),this._removeUpdateHeightCallback=void 0),(0,p.Z)(this._terrainProviderChangedCallback)&&(this._terrainProviderChangedCallback(),this._terrainProviderChangedCallback=void 0),(0,p.Z)(this._cachedRendererResources)&&xn(this._rendererResources,this._cachedRendererResources),this._rendererResources=void 0,this._cachedRendererResources=this._cachedRendererResources&&this._cachedRendererResources.release(),ue.Z.destroyCachedDataForModel(this);const e=this._pickIds,t=e.length;for(let n=0;n<t;++n)e[n].destroy();dn(this),this._quantizedVertexShaders=void 0;const n=this._clippingPlanes;return(0,p.Z)(n)&&!n.isDestroyed()&&n.owner===this&&n.destroy(),this._clippingPlanes=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,(0,g.Z)(this)},Ne._getClippingFunction=de.Z,Ne._modifyShaderForColor=function(e){return e=j.Z.replaceMain(e,"gltf_blend_main"),e+="uniform vec4 gltf_color; \nuniform float gltf_colorBlend; \nvoid main() \n{ \n    gltf_blend_main(); \n    gl_FragColor.rgb = mix(gl_FragColor.rgb, gltf_color.rgb, gltf_colorBlend); \n    float highlight = ceil(gltf_colorBlend); \n    gl_FragColor.rgb *= mix(gltf_color.rgb, vec3(1.0), highlight); \n    gl_FragColor.a *= gltf_color.a; \n} \n"};const Tn=Ne},64172:(e,t,n)=>{n.d(t,{Z:()=>y});var i=n(93517),r=n(22874),o=n(88779),s=n(54485),a=n(71118),c=n(74408),u=n(83567),l=n(98985),d=n(65606),h=n(18061),m=n(34240),f=n(12361),p=n(59137);const _={name:"PointCloudAttenuationPipelineStage"},g=new i.Z;_.process=function(e,t,n){const _=e.shaderBuilder;_.addVertexLines([l.Z]),_.addDefine("USE_POINT_CLOUD_ATTENUATION",void 0,u.Z.VERTEX);const y=e.model,x=y.pointCloudShading;let T,S,b;f.Z.is3DTiles(y.type)&&(S=!0,T=y.content,b=T.tile.refine===d.Z.ADD),_.addUniform("vec3","model_pointCloudAttenuation",u.Z.VERTEX),e.uniformMap.model_pointCloudAttenuation=function(){const u=g;let l=1;S&&(l=b?5:T.tileset.maximumScreenSpaceError),u.x=(0,o.Z)(x.maximumAttenuation,l),u.x*=n.pixelRatio;const d=function(e,t,n,o){if((0,s.Z)(o)){const e=o.tile.geometricError;if(e>0)return e}if((0,s.Z)(n.baseResolution))return n.baseResolution;const c=p.Z.getAttributeBySemantic(t,m.Z.POSITION),u=c.count,l=e.runtimeNode.transform;let d=i.Z.subtract(c.max,c.min,Z);d=a.Z.multiplyByPointAsVector(l,d,Z);const h=d.x*d.y*d.z;return r.Z.cbrt(h/u)}(e,t,x,T);u.y=d*x.geometricErrorScale;const f=n.context,_=n.camera.frustum;let y;return y=n.mode===h.Z.SCENE2D||_ instanceof c.Z?Number.POSITIVE_INFINITY:f.drawingBufferHeight/n.camera.frustum.sseDenominator,u.z=y,u}};const Z=new i.Z;const y=_},86943:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(52351),r=n(93517),o=n(17497),s=n(55077),a=n(51138),c=n(54485),u=n(995),l=n(86672),d=n(59137),h=n(43224);function m(e,t){o.Z.typeOf.object("nodeRenderResources",e),o.Z.typeOf.object("runtimePrimitive",t),this.model=e.model,this.runtimeNode=e.runtimeNode,this.attributes=e.attributes.slice(),this.attributeIndex=e.attributeIndex,this.featureIdVertexAttributeSetIndex=e.featureIdVertexAttributeSetIndex,this.hasPropertyTable=!1,this.uniformMap=(0,s.Z)(e.uniformMap),this.alphaOptions=(0,s.Z)(e.alphaOptions),this.shaderBuilder=e.shaderBuilder.clone(),this.instanceCount=e.instanceCount,this.runtimePrimitive=t;const n=t.primitive;this.count=(0,c.Z)(n.indices)?n.indices.count:d.Z.getAttributeBySemantic(n,"POSITION").count,this.indices=n.indices,this.wireframeIndexBuffer=void 0,this.primitiveType=n.primitiveType;const m=d.Z.getPositionMinMax(n,e.instancingTranslationMin,e.instancingTranslationMax);this.positionMin=r.Z.clone(m.min,new r.Z),this.positionMax=r.Z.clone(m.max,new r.Z),this.boundingSphere=i.Z.fromCornerPoints(this.positionMin,this.positionMax,new i.Z),this.lightingOptions=new h.Z,this.pickId=void 0,this.renderStateOptions=(0,a.Z)(e.renderStateOptions,{depthTest:{enabled:!0,func:l.Z.LESS_OR_EQUAL},blending:u.Z.DISABLED}),this.styleCommandsNeeded=void 0}},13887:(e,t,n)=>{n.d(t,{Z:()=>T});var i=n(52351),r=n(31328),o=n(36627),s=n(93517),a=n(55077),c=n(51138),u=n(54485),l=n(71118),d=n(59137),h=n(18061),m=n(83567),f=n(34240),p=n(53640);const _=new l.Z,g={name:"SceneMode2DPipelineStage"};g.process=function(e,t,n){const g=e.shaderBuilder,T=e.runtimePrimitive,S=e.model,b=S.sceneGraph.computedModelMatrix,C=e.runtimeNode.computedTransform,w=l.Z.multiplyTransformation(b,C,_),E=function(e,t,n){const r=l.Z.multiplyByPoint(t,e.positionMin,Z),o=p.Z.computeActualWgs84Position(n,r,r),s=l.Z.multiplyByPoint(t,e.positionMax,y),a=p.Z.computeActualWgs84Position(n,s,s);return i.Z.fromCornerPoints(o,a,new i.Z)}(e,w,n);T.boundingSphere2D=E;const v=d.Z.getAttributeBySemantic(t,f.Z.POSITION);if((0,u.Z)(v.typedArray)){const e=function(e,t,n,i){const c=(0,a.Z)(i);c.mode=h.Z.COLUMBUS_VIEW;const d=n.center,m=function(e,t,n,i){const r=e.typedArray.slice();let o;o=(0,u.Z)(e.quantization)?function(e,t){const n=e.length,i=new Float32Array(n),r=t.quantizedVolumeOffset,o=t.quantizedVolumeStepSize;for(let t=0;t<n;t+=3){const n=s.Z.fromArray(e,t,x),a=s.Z.multiplyComponents(n,o,n),c=s.Z.add(a,r,a);i[t]=c.x,i[t+1]=c.y,i[t+2]=c.z}return i}(e.typedArray,e.quantization):new Float32Array(r.buffer,r.byteOffset,r.byteLength/Float32Array.BYTES_PER_ELEMENT);const a=e.byteOffset/Float32Array.BYTES_PER_ELEMENT,c=o.length,d=(0,u.Z)(e.byteStride)?e.byteStride/Float32Array.BYTES_PER_ELEMENT:3;for(let e=a;e<c;e+=d){const r=s.Z.fromArray(o,e,x);if(isNaN(r.x)||isNaN(r.y)||isNaN(r.z))continue;const a=l.Z.multiplyByPoint(t,r,r),c=p.Z.computeActualWgs84Position(i,a,a),u=s.Z.subtract(c,n,c);o[e]=u.x,o[e+1]=u.y,o[e+2]=u.z}return o}(e,t,d,c),f=r.Z.createVertexBuffer({context:i.context,typedArray:m,usage:o.Z.STATIC_DRAW});return f.vertexArrayDestroyable=!1,f}(v,w,E,n);T.positionBuffer2D=e,S._modelResources.push(e),v.typedArray=void 0}g.addDefine("USE_2D_POSITIONS",void 0,m.Z.VERTEX),g.addUniform("mat4","u_modelView2D",m.Z.VERTEX);const A=l.Z.fromTranslation(E.center,new l.Z),I=new l.Z,M=n.context,R={u_modelView2D:function(){return l.Z.multiplyTransformation(M.uniformState.view,A,I)}};e.uniformMap=(0,c.Z)(R,e.uniformMap)};const Z=new s.Z,y=new s.Z;const x=new s.Z;const T=g},93435:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(88779),r=n(54485),o=n(83567),s=n(28891),a=n(53839),c=n(59137);const u={};function l(e){return e instanceof a.Z.FeatureIdTexture?"HAS_SELECTED_FEATURE_ID_TEXTURE":"HAS_SELECTED_FEATURE_ID_ATTRIBUTE"}function d(e){return e instanceof a.Z.FeatureIdTexture?o.Z.FRAGMENT:o.Z.BOTH}u.name="SelectedFeatureIdPipelineStage",u.STRUCT_ID_SELECTED_FEATURE="SelectedFeature",u.STRUCT_NAME_SELECTED_FEATURE="SelectedFeature",u.FUNCTION_ID_FEATURE_VARYINGS_VS="updateFeatureStructVS",u.FUNCTION_ID_FEATURE_VARYINGS_FS="updateFeatureStructFS",u.FUNCTION_SIGNATURE_UPDATE_FEATURE="void updateFeatureStruct(inout SelectedFeature feature)",u.process=function(e,t,n){const a=e.shaderBuilder;e.hasPropertyTable=!0;const h=function(e,t,n){let o,s;if((0,r.Z)(t.instances)&&(s=c.Z.getFeatureIdsByLabel(t.instances.featureIds,e.instanceFeatureIdLabel),(0,r.Z)(s)))return o=(0,i.Z)(s.label,s.positionalLabel),{featureIds:s,variableName:o,shaderDestination:d(s),featureIdDefine:l(s)};return s=c.Z.getFeatureIdsByLabel(n.featureIds,e.featureIdLabel),o=(0,i.Z)(s.label,s.positionalLabel),{featureIds:s,variableName:o,shaderDestination:d(s),featureIdDefine:l(s)}}(e.model,e.runtimeNode.node,t),m=h.shaderDestination;a.addDefine("HAS_SELECTED_FEATURE_ID",void 0,m),a.addDefine("SELECTED_FEATURE_ID",h.variableName,m),a.addDefine(h.featureIdDefine,void 0,m),function(e){e.addStructField(u.STRUCT_ID_SELECTED_FEATURE,"int","id"),e.addStructField(u.STRUCT_ID_SELECTED_FEATURE,"vec2","st"),e.addStructField(u.STRUCT_ID_SELECTED_FEATURE,"vec4","color")}(a);const f=h.featureIds.nullFeatureId,p=e.uniformMap;(0,r.Z)(f)&&(a.addDefine("HAS_NULL_FEATURE_ID",void 0,m),a.addUniform("int","model_nullFeatureId",m),p.model_nullFeatureId=function(){return f}),h.shaderDestination===o.Z.BOTH&&a.addVertexLines([s.Z]),a.addFragmentLines([s.Z])};const h=u},97648:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(51138),r=n(83567),o=n(72711),s=n(34240);const a={};a.name="SkinningPipelineStage",a.FUNCTION_ID_GET_SKINNING_MATRIX="getSkinningMatrix",a.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX="mat4 getSkinningMatrix()",a.process=function(e,t){const n=e.shaderBuilder;n.addDefine("HAS_SKINNING",void 0,r.Z.VERTEX),function(e,t){e.addFunction(a.FUNCTION_ID_GET_SKINNING_MATRIX,a.FUNCTION_SIGNATURE_GET_SKINNING_MATRIX,r.Z.VERTEX);const n="mat4 skinnedMatrix = mat4(0);";let i,o;e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,[n]);const c=["x","y","z","w"],u=function(e){let t=-1;const n=e.attributes,i=n.length;for(let e=0;e<i;e++){const i=n[e];(i.semantic===s.Z.JOINTS||i.semantic===s.Z.WEIGHTS)&&(t=Math.max(t,i.setIndex))}return t}(t);for(i=0;i<=u;i++)for(o=0;o<=3;o++){const t=c[o],n=`skinnedMatrix += a_weights_${i}.${t} * u_jointMatrices[int(a_joints_${i}.${t})];`;e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,[n])}const l="return skinnedMatrix;";e.addFunctionLines(a.FUNCTION_ID_GET_SKINNING_MATRIX,[l])}(n,t);const c=e.runtimeNode,u=c.computedJointMatrices;n.addUniform("mat4",`u_jointMatrices[${u.length}]`,r.Z.VERTEX),n.addVertexLines([o.Z]);const l={u_jointMatrices:function(){return c.computedJointMatrices}};e.uniformMap=(0,i.Z)(l,e.uniformMap)};const c=a},59964:(e,t,n)=>{n.d(t,{Z:()=>r});const i={ALL_OPAQUE:0,ALL_TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2,getStyleCommandsNeeded:function(e,t){return 0===t?i.ALL_OPAQUE:t===e?i.ALL_TRANSLUCENT:i.OPAQUE_AND_TRANSLUCENT}},r=Object.freeze(i)},12691:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(54485),r=n(90332),o=n(47334);function s(){this._defaultTexture=void 0,this._textures={},this._loadedImages=[],this._lastUpdatedFrame=-1}function a(e,t,n){const r=t.id,s=t.textureUniform,a=s.typedArray,c=s.sampler;let u;u=(0,i.Z)(a)?new o.Z({context:n,pixelFormat:s.pixelFormat,pixelDatatype:s.pixelDatatype,source:{arrayBufferView:a,width:s.width,height:s.height},sampler:c,flipY:!1}):new o.Z({context:n,source:t.image,sampler:c});const l=e._textures[r];(0,i.Z)(l)&&l!==n.defaultTexture&&l.destroy(),e._textures[r]=u}s.prototype.getTexture=function(e){return this._textures[e]},s.prototype.loadTexture2D=function(e,t){(0,i.Z)(t.typedArray)?this._loadedImages.push({id:e,textureUniform:t}):function(e,t,n){n.resource.fetchImage().then((function(i){e._loadedImages.push({id:t,image:i,textureUniform:n})})).catch((function(){const n=e._textures[t];(0,i.Z)(n)&&n!==e._defaultTexture&&n.destroy(),e._textures[t]=e._defaultTexture}))}(this,e,t)},s.prototype.update=function(e){if(e.frameNumber===this._lastUpdatedFrame)return;this._lastUpdatedFrame=e.frameNumber;const t=e.context;this._defaultTexture=t.defaultTexture;const n=this._loadedImages;for(let e=0;e<n.length;e++){a(this,n[e],t)}n.length=0},s.prototype.isDestroyed=function(){return!1},s.prototype.destroy=function(){const e=this._textures;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n!==this._defaultTexture&&n.destroy()}return(0,r.Z)(this)}},11323:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(88779),r=n(54485),o=n(20176),s=n(67197),a=n(91166),c=n(27400),u=n(28696),l=n(91373);function d(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT);const t=(0,r.Z)(e.typedArray);if(t===(0,r.Z)(e.url))throw new o.Z("exactly one of options.typedArray, options.url must be defined");if(t&&(!(0,r.Z)(e.width)||!(0,r.Z)(e.height)))throw new o.Z("options.width and options.height are required when options.typedArray is defined");this.typedArray=e.typedArray,this.width=e.width,this.height=e.height,this.pixelFormat=(0,i.Z)(e.pixelFormat,a.Z.RGBA),this.pixelDatatype=(0,i.Z)(e.pixelDatatype,c.Z.UNSIGNED_BYTE);let n=e.url;"string"==typeof n&&(n=s.Z.createIfNeeded(n)),this.resource=n;const d=(0,i.Z)(e.repeat,!0)?l.Z.REPEAT:l.Z.CLAMP_TO_EDGE;this.sampler=new u.Z({wrapS:d,wrapT:d,minificationFilter:e.minificationFilter,magnificationFilter:e.magnificationFilter,maximumAnisotropy:e.maximumAnisotropy})}},74495:(e,t,n)=>{n.d(t,{Z:()=>i});const i=Object.freeze({FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"})},49893:(e,t,n)=>{n.d(t,{Z:()=>i});const i=Object.freeze({FLOAT:"float",VEC2:"vec2",VEC3:"vec3",VEC4:"vec4",MAT2:"mat2",MAT3:"mat2",MAT4:"mat4"})},76180:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(31328),r=n(36627),o=n(54485),s=n(39172),a=n(84473),c=n(15881),u=n(34240),l=n(59137);const d={};d.name="WireframePipelineStage",d.process=function(e,t,n){const d=function(e,t,n){const a=l.Z.getAttributeBySemantic(e,u.Z.POSITION).count;let d;if((0,o.Z)(t)){const e=t.buffer,i=t.count;if((0,o.Z)(e)&&n.context.webgl2){d=e.sizeInBytes===i?new Uint8Array(i):s.Z.createTypedArray(a,i),e.getBufferData(d)}else d=t.typedArray}const h=e.primitiveType,m=c.Z.createWireframeIndices(h,a,d),f=s.Z.fromSizeInBytes(m.BYTES_PER_ELEMENT);return i.Z.createIndexBuffer({context:n.context,typedArray:m,usage:r.Z.STATIC_DRAW,indexDatatype:f})}(t,e.indices,n);e.model._resources.push(d),e.wireframeIndexBuffer=d;const h=e.primitiveType,m=e.count;e.primitiveType=a.Z.LINES,e.count=c.Z.getWireframeIndicesCount(h,m)};const h=d},3584:(e,t,n)=>{n.d(t,{Z:()=>T});var i=n(52351),r=n(31328),o=n(36627),s=n(55077),a=n(54485),c=n(71087),u=n(39172),l=n(71118),d=n(28901),h=n(27028),m=n(99685),f=n(59137),p=n(1577),_=n(74064),g=n(18061),Z=n(49616),y=n(84067),x=n(46801);function T(e,t){const n=e.shaderBuilder;n.addVertexLines([m.Z]),n.addFragmentLines([h.Z]);const T=e.model,S=t.context,b=function(e,t){const n=e.wireframeIndexBuffer;if((0,a.Z)(n))return n;const i=e.indices;if(!(0,a.Z)(i))return;if((0,a.Z)(i.buffer))return i.buffer;const s=i.typedArray,c=u.Z.fromSizeInBytes(s.BYTES_PER_ELEMENT);return r.Z.createIndexBuffer({context:t.context,typedArray:s,usage:o.Z.STATIC_DRAW,indexDatatype:c})}(e,t),C=new x.Z({context:S,indexBuffer:b,attributes:e.attributes});T._resources.push(C);const w=n.buildShaderProgram(t.context);T._resources.push(w);const E=e.alphaOptions.pass,v=T.sceneGraph,A=l.Z.multiplyTransformation(v.computedModelMatrix,e.runtimeNode.computedTransform,new l.Z);let I;if(t.mode!==g.Z.SCENE3D&&!t.scene3DOnly&&T._projectTo2D){I=e.runtimePrimitive.boundingSphere2D}else I=i.Z.transform(e.boundingSphere,A,e.boundingSphere);let M=(0,s.Z)(_.Z.fromCache(e.renderStateOptions),!0);T.opaquePass===p.Z.CESIUM_3D_TILE&&(M.stencilTest=y.Z.setCesium3DTileBit(),M.stencilMask=y.Z.CESIUM_3D_TILE_MASK),M.cull.face=f.Z.getCullFace(A,e.primitiveType),M=_.Z.fromCache(M);const R=e.count,P=new c.Z({boundingVolume:I,modelMatrix:A,uniformMap:e.uniformMap,renderState:M,vertexArray:C,shaderProgram:w,cull:T.cull,pass:E,count:R,pickId:e.pickId,instanceCount:e.instanceCount,primitiveType:e.primitiveType,debugShowBoundingVolume:T.debugShowBoundingVolume,castShadows:Z.Z.castShadows(T.shadows),receiveShadows:Z.Z.receiveShadows(T.shadows)});return new d.Z({primitiveRenderResources:e,command:P})}},28467:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(71118);function r(e,t,n){this.primitive=e,this._modelMatrix=i.Z.clone(t),this._instanceId=n}Object.defineProperties(r.prototype,{instanceId:{get:function(){return this._instanceId}},model:{get:function(){return this.primitive._model}},modelMatrix:{get:function(){return i.Z.clone(this._modelMatrix)},set:function(e){i.Z.clone(e,this._modelMatrix),this.primitive.expandBoundingSphere(this._modelMatrix),this.primitive._dirty=!0}}});const o=r},18889:(e,t,n)=>{n.d(t,{Z:()=>Y});var i=n(52351),r=n(93517),o=n(55077),s=n(6785),a=n(44990),c=n(88779),u=n(58587),l=n(54485),d=n(90332),h=n(20176),m=n(98140),f=n(71118),p=n(84473),_=n(67197),g=n(21514),Z=n(7004),y=n(31328),x=n(36627),T=n(71087),S=n(1577),b=n(74064),C=n(7048),w=n(45813),E=n(53273),v=n(28467),A=n(11487),I=n(18061),M=n(49616),R=n(77493);const P=0,O=1,L=2,D=3;function B(e){if(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT),!(0,l.Z)(e.gltf)&&!(0,l.Z)(e.url))throw new h.Z("Either options.gltf or options.url is required.");if((0,l.Z)(e.gltf)&&(0,l.Z)(e.url))throw new h.Z("Cannot pass in both options.gltf and options.url.");this.show=(0,c.Z)(e.show,!0),this._instancingSupported=!1,this._dynamic=(0,c.Z)(e.dynamic,!1),this._allowPicking=(0,c.Z)(e.allowPicking,!0),this._ready=!1,this._readyPromise=(0,u.Z)(),this._state=P,this._dirty=!1,this._cull=(0,c.Z)(e.cull,!0),this._opaquePass=(0,c.Z)(e.opaquePass,S.Z.OPAQUE),this._instances=function(e,t){const n=(t=(0,c.Z)(t,[])).length,i=new Array(n);for(let r=0;r<n;++r){const n=t[r],o=n.modelMatrix,s=(0,c.Z)(n.batchId,r);i[r]=new v.Z(e,o,s)}return i}(this,e.instances),this._batchTable=e.batchTable,this._model=void 0,this._vertexBufferTypedArray=void 0,this._vertexBuffer=void 0,this._batchIdBuffer=void 0,this._instancedUniformsByProgram=void 0,this._drawCommands=[],this._modelCommands=void 0,this._renderStates=void 0,this._disableCullingRenderStates=void 0,this._boundingSphere=function(e){const t=e.length,n=new Array(t);for(let i=0;i<t;++i)n[i]=f.Z.getTranslation(e._instances[i]._modelMatrix,new r.Z);return i.Z.fromPoints(n)}(this),this._center=r.Z.clone(this._boundingSphere.center),this._rtcTransform=new f.Z,this._rtcModelView=new f.Z,this._mode=void 0,this.modelMatrix=f.Z.clone(f.Z.IDENTITY),this._modelMatrix=f.Z.clone(this.modelMatrix),this._url=_.Z.createIfNeeded(e.url),this._requestType=e.requestType,this._gltf=e.gltf,this._basePath=_.Z.createIfNeeded(e.basePath),this._asynchronous=e.asynchronous,this._incrementallyLoadTextures=e.incrementallyLoadTextures,this._upAxis=e.upAxis,this._forwardAxis=e.forwardAxis,this.shadows=(0,c.Z)(e.shadows,M.Z.ENABLED),this._shadows=this.shadows,this._pickIdLoaded=e.pickIdLoaded,this.splitDirection=(0,c.Z)(e.splitDirection,R.Z.NONE),this.debugShowBoundingVolume=(0,c.Z)(e.debugShowBoundingVolume,!1),this._debugShowBoundingVolume=!1,this.debugWireframe=(0,c.Z)(e.debugWireframe,!1),this._debugWireframe=!1,(0,l.Z)(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new m.Z,this._shouldDestroyImageBasedLighting=!0),this.backFaceCulling=(0,c.Z)(e.backFaceCulling,!0),this._backFaceCulling=this.backFaceCulling,this.showCreditsOnScreen=(0,c.Z)(e.showCreditsOnScreen,!1)}Object.defineProperties(B.prototype,{allowPicking:{get:function(){return this._allowPicking}},length:{get:function(){return this._instances.length}},activeAnimations:{get:function(){return this._model.activeAnimations}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}}});const N=new r.Z,F=new f.Z;function V(e,t,n,i){return function(r,o){const s=r.semantic;if((0,l.Z)(s)&&e.indexOf(s)>-1){if(!(t.indexOf(s)>-1))throw new g.Z(`Shader program cannot be optimized for instancing. Uniform "${o}" in program "${n}" uses unsupported semantic "${s}"`);i[o]=s}}}function U(e,t){if((0,l.Z)(e._instancedUniformsByProgram))return e._instancedUniformsByProgram[t];const n={};e._instancedUniformsByProgram=n;const i=["MODEL","MODELVIEW","CESIUM_RTC_MODELVIEW","MODELVIEWPROJECTION","MODELINVERSE","MODELVIEWINVERSE","MODELVIEWPROJECTIONINVERSE","MODELINVERSETRANSPOSE","MODELVIEWINVERSETRANSPOSE"],r=["MODELVIEW","CESIUM_RTC_MODELVIEW","MODELVIEWPROJECTION","MODELVIEWINVERSETRANSPOSE"],o=e._model._sourceTechniques;for(const e in o)if(o.hasOwnProperty(e)){const s=o[e],a=s.program;if(!(0,l.Z)(n[a])){const e={};n[a]=e,w.Z.techniqueUniform(s,V(i,r,t,e))}}return n[t]}function z(e,t){return function(n,i,r){(n=(0,o.Z)(n)).czm_instanced_modifiedModelView=function(e,t){return function(){return f.Z.multiply(t.uniformState.view,e._rtcTransform,e._rtcModelView)}}(e,t),n.czm_instanced_nodeTransform=function(e){return function(){return e.computedMatrix}}(r);const s=U(e,i);for(const e in s)s.hasOwnProperty(e)&&delete n[e];return(0,l.Z)(e._batchTable)&&(n=e._batchTable.getUniformMapCallback()(n)),n}}function k(e){const t=e._instances,n=e.length,i=e._center;let r=e._vertexBufferTypedArray;(0,l.Z)(r)||(r=new Float32Array(12*n)),e._dynamic&&(e._vertexBufferTypedArray=r);for(let e=0;e<n;++e){const n=t[e]._modelMatrix,o=f.Z.clone(n,F);o[12]-=i.x,o[13]-=i.y,o[14]-=i.z;const s=12*e;r[s+0]=o[0],r[s+1]=o[4],r[s+2]=o[8],r[s+3]=o[12],r[s+4]=o[1],r[s+5]=o[5],r[s+6]=o[9],r[s+7]=o[13],r[s+8]=o[2],r[s+9]=o[6],r[s+10]=o[10],r[s+11]=o[14]}return r}function q(e,t){const n=e._instancingSupported,i=(0,l.Z)(e._batchTable),r=e._allowPicking,o={url:e._url,requestType:e._requestType,gltf:e._gltf,basePath:e._basePath,shadows:e._shadows,cacheKey:void 0,asynchronous:e._asynchronous,allowPicking:r,incrementallyLoadTextures:e._incrementallyLoadTextures,upAxis:e._upAxis,forwardAxis:e._forwardAxis,precreatedAttributes:void 0,vertexShaderLoaded:void 0,fragmentShaderLoaded:void 0,uniformMapLoaded:void 0,pickIdLoaded:e._pickIdLoaded,ignoreCommands:!0,opaquePass:e._opaquePass,imageBasedLighting:e._imageBasedLighting,showOutline:e.showOutline,showCreditsOnScreen:e.showCreditsOnScreen};if(i||(e._pickIds=function(e,t){const n=e._instances,i=n.length,r=new Array(i);for(let e=0;e<i;++e)r[e]=t.createPickId(n[e]);return r}(e,t)),n){!function(e,t){let n;const i=e._instances,r=e.length,o=e._dynamic,a=(0,l.Z)(e._batchTable);if(a){const o=new Uint16Array(r);for(n=0;n<r;++n)o[n]=i[n]._instanceId;e._batchIdBuffer=y.Z.createVertexBuffer({context:t,typedArray:o,usage:x.Z.STATIC_DRAW})}if(!a){const i=new Uint8Array(4*r);for(n=0;n<r;++n){const t=e._pickIds[n].color,r=4*n;i[r]=s.Z.floatToByte(t.red),i[r+1]=s.Z.floatToByte(t.green),i[r+2]=s.Z.floatToByte(t.blue),i[r+3]=s.Z.floatToByte(t.alpha)}e._pickIdBuffer=y.Z.createVertexBuffer({context:t,typedArray:i,usage:x.Z.STATIC_DRAW})}const c=k(e);e._vertexBuffer=y.Z.createVertexBuffer({context:t,typedArray:c,usage:o?x.Z.STREAM_DRAW:x.Z.STATIC_DRAW})}(e,t);const n=12,r=a.Z.getSizeInBytes(a.Z.FLOAT),c={czm_modelMatrixRow0:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:a.Z.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:r*n,instanceDivisor:1},czm_modelMatrixRow1:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:a.Z.FLOAT,normalize:!1,offsetInBytes:4*r,strideInBytes:r*n,instanceDivisor:1},czm_modelMatrixRow2:{index:0,vertexBuffer:e._vertexBuffer,componentsPerAttribute:4,componentDatatype:a.Z.FLOAT,normalize:!1,offsetInBytes:8*r,strideInBytes:r*n,instanceDivisor:1}};i&&(c.a_batchId={index:0,vertexBuffer:e._batchIdBuffer,componentsPerAttribute:1,componentDatatype:a.Z.UNSIGNED_SHORT,normalize:!1,offsetInBytes:0,strideInBytes:0,instanceDivisor:1}),i||(c.pickColor={index:0,vertexBuffer:e._pickIdBuffer,componentsPerAttribute:4,componentDatatype:a.Z.UNSIGNED_BYTE,normalize:!0,offsetInBytes:0,strideInBytes:0,instanceDivisor:1}),o.precreatedAttributes=c,o.vertexShaderLoaded=function(e){return function(t,n){const i=U(e,n),r=(0,l.Z)(e._batchTable);let o,s,a,c=C.Z.replaceMain(t,"czm_instancing_main"),u="",d="";for(const e in i)if(i.hasOwnProperty(e)){const t=i[e];let n;"MODELVIEW"===t||"CESIUM_RTC_MODELVIEW"===t?n="czm_instanced_modelView":"MODELVIEWPROJECTION"===t?(n="czm_instanced_modelViewProjection",u+="mat4 czm_instanced_modelViewProjection;\n",d+="czm_instanced_modelViewProjection = czm_projection * czm_instanced_modelView;\n"):"MODELVIEWINVERSETRANSPOSE"===t&&(n="czm_instanced_modelViewInverseTranspose",u+="mat3 czm_instanced_modelViewInverseTranspose;\n",d+="czm_instanced_modelViewInverseTranspose = mat3(czm_instanced_modelView);\n");let r=new RegExp(`uniform.*${e}.*`);c=c.replace(r,""),r=new RegExp(`${e}\\b`,"g"),c=c.replace(r,n)}r?(o="attribute float a_batchId;\n",s="",a=""):(o="",s="attribute vec4 pickColor;\nvarying vec4 v_pickColor;\n",a="    v_pickColor = pickColor;\n");let h="uniform mat4 czm_instanced_modifiedModelView;\nuniform mat4 czm_instanced_nodeTransform;\n"+u+"mat4 czm_instanced_modelView;\nattribute vec4 czm_modelMatrixRow0;\nattribute vec4 czm_modelMatrixRow1;\n"+`attribute vec4 czm_modelMatrixRow2;\n${o}${s}${c}void main()\n{\n    mat4 czm_instanced_model = mat4(czm_modelMatrixRow0.x, czm_modelMatrixRow1.x, czm_modelMatrixRow2.x, 0.0, czm_modelMatrixRow0.y, czm_modelMatrixRow1.y, czm_modelMatrixRow2.y, 0.0, czm_modelMatrixRow0.z, czm_modelMatrixRow1.z, czm_modelMatrixRow2.z, 0.0, czm_modelMatrixRow0.w, czm_modelMatrixRow1.w, czm_modelMatrixRow2.w, 1.0);\n`+`    czm_instanced_modelView = czm_instanced_modifiedModelView * czm_instanced_model * czm_instanced_nodeTransform;\n${d}    czm_instancing_main();\n${a}}\n`;if(r){const t=e._model.gltfInternal,i=A.Z.getDiffuseAttributeOrUniform(t,n);h=e._batchTable.getVertexShaderCallback(!0,"a_batchId",i)(h)}return h}}(e),o.fragmentShaderLoaded=function(e){return function(t,n){const i=e._batchTable;if((0,l.Z)(i)){const r=e._model.gltfInternal,o=A.Z.getDiffuseAttributeOrUniform(r,n);t=i.getFragmentShaderCallback(!0,o,!1)(t)}else t=`varying vec4 v_pickColor;\n${t}`;return t}}(e),o.uniformMapLoaded=z(e,t),(0,l.Z)(e._url)&&(o.cacheKey=`${e._url.getUrlComponent()}#instanced`)}else o.vertexShaderLoaded=function(e){return function(t,n){if((0,l.Z)(e._batchTable)){const i=e._model.gltfInternal,r=A.Z.getDiffuseAttributeOrUniform(i,n);t=`uniform float a_batchId\n;${t=e._batchTable.getVertexShaderCallback(!0,"a_batchId",r)(t)}`}return t}}(e),o.fragmentShaderLoaded=function(e){return function(t,n){const i=e._batchTable;if((0,l.Z)(i)){const r=e._model.gltfInternal,o=A.Z.getDiffuseAttributeOrUniform(r,n);t=i.getFragmentShaderCallback(!0,o,!1)(t)}else t=`uniform vec4 czm_pickColor;\n${t}`;return t}}(e),o.uniformMapLoaded=function(e){return function(t){return(0,l.Z)(e._batchTable)&&(t=e._batchTable.getUniformMapCallback()(t)),t}}(e);(0,l.Z)(e._url)?e._model=E.Z.fromGltf(o):e._model=new E.Z(o)}function H(e){const t=(0,o.Z)(e,!0);return t.cull.enabled=!1,b.Z.fromCache(t)}function j(e){return function(){return e}}function G(e){return function(){return e}}function W(e){const t=e._modelCommands,n=t.length,r=e.length,o=e._rtcTransform,s=e._center;for(let a=0;a<n;++a){const n=t[a];for(let t=0;t<r;++t){const c=a*r+t,u=e._drawCommands[c];let l=f.Z.clone(e._instances[t]._modelMatrix,F);l[12]-=s.x,l[13]-=s.y,l[14]-=s.z,l=f.Z.multiply(o,l,F);const d=n.modelMatrix,h=u.modelMatrix;f.Z.multiply(l,d,h);const m=n.boundingVolume,p=u.boundingVolume;i.Z.transform(m,l,p)}}}function $(e){const t=e._nodeCommands,n=t.length,i=[];for(let e=0;e<n;++e){const n=t[e];n.show&&i.push(n.command)}return i}function K(e,t){e._drawCommands=[];const n=$(e._model);t?function(e,t){const n=t.length,i=e.length,r=e._boundingSphere,o=e._cull;for(let s=0;s<n;++s){const n=T.Z.shallowClone(t[s]);n.instanceCount=i,n.boundingVolume=r,n.cull=o,(0,l.Z)(e._batchTable)?n.pickId=e._batchTable.getPickId():n.pickId="v_pickColor",e._drawCommands.push(n)}}(e,n):(!function(e,t){const n=e._instances,r=t.length,s=e.length,a=e._batchTable,c=(0,l.Z)(a),u=e._cull;for(let a=0;a<r;++a)for(let r=0;r<s;++r){const s=T.Z.shallowClone(t[a]);if(s.modelMatrix=new f.Z,s.boundingVolume=new i.Z,s.cull=u,s.uniformMap=(0,o.Z)(s.uniformMap),c)s.uniformMap.a_batchId=j(n[r]._instanceId);else{const t=e._pickIds[r];s.uniformMap.czm_pickColor=G(t.color)}e._drawCommands.push(s)}}(e,n),W(e))}B.prototype.expandBoundingSphere=function(e){const t=f.Z.getTranslation(e,N);i.Z.expand(this._boundingSphere,t,this._boundingSphere)},B.prototype.update=function(e){if(e.mode===I.Z.MORPHING)return;if(!this.show)return;if(0===this.length)return;const t=e.context;if(this._state===P){this._state=O,this._instancingSupported=t.instancedArrays,q(this,t);const e=this;this._model.readyPromise.catch((function(t){e._state=D,e._readyPromise.reject(t)}))}const n=this._instancingSupported,i=this._model;if(i.imageBasedLighting=this._imageBasedLighting,i.showCreditsOnScreen=this.showCreditsOnScreen,i.splitDirection=this.splitDirection,i.update(e),i.ready&&this._state===O){this._state=L,this._ready=!0;const e=i.boundingSphereInternal.radius+r.Z.magnitude(i.boundingSphereInternal.center);return this._boundingSphere.radius+=e,this._modelCommands=$(i),K(this,n),void this._readyPromise.resolve(this)}if(this._state!==L)return;const o=e.mode!==this._mode,s=this.modelMatrix,a=!f.Z.equals(this._modelMatrix,s);if(o||a){this._mode=e.mode,f.Z.clone(s,this._modelMatrix);let t=f.Z.multiplyByTranslation(this._modelMatrix,this._center,this._rtcTransform);this._mode!==I.Z.SCENE3D&&(t=Z.Z.basisTo2D(e.mapProjection,t,t)),f.Z.getTranslation(t,this._boundingSphere.center)}n&&this._dirty&&(this._dynamic=!0,this._dirty=!1,function(e){const t=k(e);e._vertexBuffer.copyFromArrayView(t)}(this));const c=function(e){const t=e._nodeCommands,n=t.length;let i=!1;for(let e=0;e<n;e++){const n=t[e];n.command.dirty&&(n.command.dirty=!1,i=!0)}return i}(i);c&&K(this,n),!n&&(i.dirty||this._dirty||o||a)&&W(this),function(e,t){if(e.shadows!==e._shadows||t){e._shadows=e.shadows;const t=M.Z.castShadows(e.shadows),n=M.Z.receiveShadows(e.shadows),i=e._drawCommands,r=i.length;for(let e=0;e<r;++e){const r=i[e];r.castShadows=t,r.receiveShadows=n}}}(this,c),function(e,t){if(e._debugWireframe!==e.debugWireframe||t){e._debugWireframe=e.debugWireframe;const t=e.debugWireframe?p.Z.LINES:p.Z.TRIANGLES,n=e._drawCommands,i=n.length;for(let e=0;e<i;++e)n[e].primitiveType=t}}(this,c),function(e,t){if(e._backFaceCulling!==e.backFaceCulling||t){e._backFaceCulling=e.backFaceCulling;const t=e._drawCommands,n=t.length;let i;if(!(0,l.Z)(e._disableCullingRenderStates))for(e._disableCullingRenderStates=new Array(n),e._renderStates=new Array(n),i=0;i<n;++i){const n=t[i].renderState,r=H(n);e._disableCullingRenderStates[i]=r,e._renderStates[i]=n}for(i=0;i<n;++i)t[i].renderState=e._backFaceCulling?e._renderStates[i]:e._disableCullingRenderStates[i]}}(this,c),function(e,t){if(e.debugShowBoundingVolume!==e._debugShowBoundingVolume||t){e._debugShowBoundingVolume=e.debugShowBoundingVolume;const t=e._drawCommands,n=t.length;for(let i=0;i<n;++i)t[i].debugShowBoundingVolume=e.debugShowBoundingVolume}}(this,c);const u=e.passes;if(!u.render&&!u.pick)return;const d=e.commandList,h=this._drawCommands,m=h.length;for(let e=0;e<m;++e)d.push(h[e])},B.prototype.isDestroyed=function(){return!1},B.prototype.destroy=function(){this._model=this._model&&this._model.destroy();const e=this._pickIds;if((0,l.Z)(e)){const t=e.length;for(let n=0;n<t;++n)e[n].destroy()}return this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,(0,d.Z)(this)};const Y=B},16234:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(47594);function r(){this.initialized=!1,this.resourcesParsed=!1,this.vertexBuffersToCreate=new i.Z,this.indexBuffersToCreate=new i.Z,this.buffers={},this.pendingBufferLoads=0,this.programsToCreate=new i.Z,this.shaders={},this.pendingShaderLoads=0,this.texturesToCreate=new i.Z,this.pendingTextureLoads=0,this.texturesToCreateFromBufferView=new i.Z,this.pendingBufferViewToImage=0,this.createSamplers=!0,this.createSkins=!0,this.createRuntimeAnimations=!0,this.createVertexArrays=!0,this.createRenderStates=!0,this.createUniformMaps=!0,this.createRuntimeNodes=!0,this.createdBufferViews={},this.primitivesToDecode=new i.Z,this.activeDecodingTasks=0,this.pendingDecodingCache=!1,this.skinnedNodesIds=[]}r.prototype.getBuffer=function(e){return t=this.buffers[e.buffer],n=e.byteOffset,i=e.byteLength,t.subarray(n,n+i);var t,n,i},r.prototype.finishedPendingBufferLoads=function(){return 0===this.pendingBufferLoads},r.prototype.finishedBuffersCreation=function(){return 0===this.pendingBufferLoads&&0===this.vertexBuffersToCreate.length&&0===this.indexBuffersToCreate.length},r.prototype.finishedProgramCreation=function(){return 0===this.pendingShaderLoads&&0===this.programsToCreate.length},r.prototype.finishedTextureCreation=function(){const e=0===this.pendingTextureLoads,t=0===this.texturesToCreate.length&&0===this.texturesToCreateFromBufferView.length;return e&&t},r.prototype.finishedEverythingButTextureCreation=function(){const e=0===this.pendingBufferLoads&&0===this.pendingShaderLoads,t=0===this.vertexBuffersToCreate.length&&0===this.indexBuffersToCreate.length&&0===this.programsToCreate.length&&0===this.pendingBufferViewToImage;return this.finishedDecoding()&&e&&t},r.prototype.finishedDecoding=function(){return 0===this.primitivesToDecode.length&&0===this.activeDecodingTasks&&!this.pendingDecodingCache},r.prototype.finished=function(){return this.finishedDecoding()&&this.finishedTextureCreation()&&this.finishedEverythingButTextureCreation()};const o=r},97159:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(54485),r=n(20176);function o(e,t,n){this._name=t.name,this._id=n,this._uniformMap=e._uniformMaps[n],this._technique=void 0,this._program=void 0,this._values=void 0}Object.defineProperties(o.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}}}),o.prototype.setValue=function(e,t){if(!(0,i.Z)(e))throw new r.Z("name is required.");const n=`u_${e}`,o=this._uniformMap.values[n];if(!(0,i.Z)(o))throw new r.Z("name must match a parameter name in the material's technique that is targetable and not optimized out.");o.value=o.clone(t,o.value)},o.prototype.getValue=function(e){if(!(0,i.Z)(e))throw new r.Z("name is required.");const t=`u_${e}`,n=this._uniformMap.values[t];if((0,i.Z)(n))return n.value};const s=o},19715:(e,t,n)=>{function i(e,t,n){const i=[],r=e.primitives,o=r.length;for(let e=0;e<o;++e){const n=r[e];i[e]=t[n.material]}this._name=e.name,this._materials=i,this._id=n}n.d(t,{Z:()=>r}),Object.defineProperties(i.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},materials:{get:function(){return this._materials}}});const r=i},26184:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(71118);function r(e,t,n,r,o){this._model=e,this._runtimeNode=n,this._name=t.name,this._id=r,this.useMatrix=!1,this._show=!0,this._matrix=i.Z.clone(o),this._originalMatrix=i.Z.clone(o)}Object.defineProperties(r.prototype,{name:{get:function(){return this._name}},id:{get:function(){return this._id}},show:{get:function(){return this._show},set:function(e){this._show!==e&&(this._show=e,this._model._perNodeShowDirty=!0)}},matrix:{get:function(){return this._matrix},set:function(e){this._matrix=i.Z.clone(e,this._matrix),this.useMatrix=!0;const t=this._model;t._cesiumAnimationsDirty=!0,this._runtimeNode.dirtyNumber=t._maxDirtyNumber}},originalMatrix:{get:function(){return this._originalMatrix}}}),r.prototype.setMatrix=function(e){i.Z.clone(e,this._matrix)};const o=r},64766:(e,t,n)=>{n.d(t,{Z:()=>x});var i=n(54485),r=n(91166),o=n(85834),s=n(28696),a=n(47334),c=n(92106),u=n(48867),l=n(91373),d=n(45813);function h(){}function m(e,t,n,i,r){const o=3*t,s=e[o],a=e[o+1],c=e[o+2];return void 0===s?63:((s===n&&a===i&&c===r)<<0)+((s===n&&a===r&&c===i)<<1)+((s===i&&a===n&&c===r)<<2)+((s===i&&a===r&&c===n)<<3)+((s===r&&a===n&&c===i)<<4)+((s===r&&a===i&&c===n)<<5)}function f(e){return(1&e)+(e>>1&1)+(e>>2&1)+(e>>3&1)+(e>>4&1)+(e>>5&1)}function p(e,t,n,i,r,o,s){const a=s?1:0,c=r?1:0,u=m(e,t,a,c,0);if(0===u)return t;const l=r?1:0,d=o?1:0,h=m(e,n,0,l,d);if(0===h)return n;const p=s?1:0,_=o?1:0,g=m(e,i,p,0,_);if(0===g)return i;const Z=u&h&g;let y,x,T;if(1&Z)y=0,x=1,T=2;else if(2&Z)y=0,T=1,x=2;else if(4&Z)x=0,y=1,T=2;else if(8&Z)x=0,T=1,y=2;else if(16&Z)T=0,y=1,x=2;else{if(!(32&Z)){const e=f(u),r=f(h),o=f(g);return e<r&&e<o?t:r<o?n:i}T=0,x=1,y=2}const S=3*t;e[S+y]=a,e[S+x]=c,e[S+T]=0;const b=3*n;e[b+y]=0,e[b+x]=l,e[b+T]=d;const C=3*i;return e[C+y]=p,e[C+x]=0,e[C+T]=_,-1}function _(e,t,n){const i=e[0];return 1===e[Math.min(t,n)*i+Math.max(t,n)]}function g(e){const t=new Uint8Array(e);return t[e-1]=192,8===e?t[e-1]=96:4===e?t[e-1]=48:2===e?t[e-1]=24:1===e&&(t[e-1]=12),t}function Z(e,t){const n=e.gltfInternal,i=e._loadResources;let r,o;for(r=0;r<t.length;++r){const s=t[r],a=s.extras._pipeline.vertexNumberingScope;s.extras._pipeline.vertexNumberingScope=void 0;const c=a.extraVertices,u=i.getBuffer(s),l=s.byteStride||4,d=c.length,h=new Uint8Array(u.byteLength+d*l);for(h.set(u),o=0;o<d;++o){const e=c[o]*l,t=u.length+o*l;for(let n=0;n<l;++n)h[t+n]=h[e+n]}s.byteOffset=0,s.byteLength=h.byteLength;const m=n.buffers.push({byteLength:h.byteLength,extras:{_pipeline:{source:h.buffer}}})-1;s.buffer=m,i.buffers[m]=h;const f=a.accessors;for(o=0;o<f.length;++o){const e=f[o];n.accessors[e].count+=d}if(!a.createdOutlines){const t=a.outlineCoordinates,n=new Float32Array(t),r=e.gltfInternal.buffers.push({byteLength:n.byteLength,extras:{_pipeline:{source:n.buffer}}})-1;i.buffers[r]=new Uint8Array(n.buffer,0,n.byteLength);const s=e.gltfInternal.bufferViews.push({buffer:r,byteLength:n.byteLength,byteOffset:0,byteStride:3*Float32Array.BYTES_PER_ELEMENT,target:34962})-1,c=e.gltfInternal.accessors.push({bufferView:s,byteOffset:0,componentType:5126,count:n.length/3,type:"VEC3",min:[0,0,0],max:[1,1,1]})-1,u=a.primitives;for(o=0;o<u.length;++o)u[o].attributes._OUTLINE_COORDINATES=c;i.vertexBuffersToCreate.enqueue(s),a.createdOutlines=!0}}}function y(e,t){return t.buffer===e}h.hasExtension=function(e){return(0,i.Z)(e.extensionsRequired.CESIUM_primitive_outline)||(0,i.Z)(e.extensionsUsed.CESIUM_primitive_outline)},h.outlinePrimitives=function(e){if(!h.hasExtension(e))return;const t=e.gltfInternal,n=[];d.Z.mesh(t,(function(t,r){d.Z.meshPrimitive(t,(function(t,o){if(!(0,i.Z)(t.extensions))return;const s=t.extensions.CESIUM_primitive_outline;if(!(0,i.Z)(s))return;const a=function(e,t){const n=t.attributes;if(void 0===n)return;const r=e.gltfInternal;let o;for(const e in n){if(!n.hasOwnProperty(e))continue;const t=n[e],s=r.accessors[t].bufferView,a=r.bufferViews[s];if((0,i.Z)(a.extras)||(a.extras={}),(0,i.Z)(a.extras._pipeline)||(a.extras._pipeline={}),(0,i.Z)(a.extras._pipeline.vertexNumberingScope)){if(void 0!==o&&a.extras._pipeline.vertexNumberingScope!==o)return}else a.extras._pipeline.vertexNumberingScope=o||{vertexCopies:[],extraVertices:[],outlineCoordinates:[],accessors:[],bufferViews:[],primitives:[],createdOutlines:!1};o=a.extras._pipeline.vertexNumberingScope,o.bufferViews.indexOf(a)<0&&o.bufferViews.push(a),o.accessors.indexOf(t)<0&&o.accessors.push(t)}return o.primitives.push(t),o}(e,t);void 0!==a&&(n.indexOf(a)<0&&n.push(a),function(e,t,n,r,o){const s=o.vertexCopies,a=o.extraVertices,c=o.outlineCoordinates,u=e.gltfInternal,l=u.meshes[t].primitives[n],d=u.accessors,h=u.bufferViews;let m;for(const e in l.attributes)if(l.attributes.hasOwnProperty(e)){const t=d[l.attributes[e]];if((0,i.Z)(t)){m=t.count;break}}if(!(0,i.Z)(m))return;const f=d[l.indices],g=h[f.bufferView],Z=d[r],y=h[Z.bufferView],x=e._loadResources,T=x.getBuffer(g),S=x.getBuffer(y);let b=5123===f.componentType?new Uint16Array(T.buffer,T.byteOffset+f.byteOffset,f.count):new Uint32Array(T.buffer,T.byteOffset+f.byteOffset,f.count);const C=5123===Z.componentType?new Uint16Array(S.buffer,S.byteOffset+Z.byteOffset,Z.count):new Uint32Array(S.buffer,S.byteOffset+Z.byteOffset,Z.count),w=m,E=[w];let v;for(v=0;v<C.length;v+=2){const e=C[v],t=C[v+1];E[Math.min(e,t)*w+Math.max(e,t)]=1}for(v=0;v<b.length;v+=3){let t=b[v],n=b[v+1],r=b[v+2];const o=!1,l=o||_(E,t,n),d=o||_(E,n,r),h=o||_(E,r,t);let Z=p(c,t,n,r,l,d,h);for(;Z>=0;){let o;if(o=Z===t?s[t]:Z===n?s[n]:s[r],void 0===o){o=m+a.length;let e=Z;for(;e>=m;)e=a[e-m];a.push(e),s[Z]=o}o>65534&&b instanceof Uint16Array&&(b=new Uint32Array(b),f.componentType=5125,g.buffer=u.buffers.push({byteLength:b.byteLength,extras:{_pipeline:{source:b.buffer}}})-1,g.byteLength=b.byteLength,g.byteOffset=0,e._loadResources.buffers[g.buffer]=new Uint8Array(b.buffer,0,b.byteLength),x.indexBuffersToCreate._array.forEach((function(e){e.id===f.bufferView&&(e.componentType=f.componentType)}))),Z===t?(t=o,b[v]=o):Z===n?(n=o,b[v+1]=o):(r=o,b[v+2]=o),(0,i.Z)(f.max)&&(f.max[0]=Math.max(f.max[0],o)),Z=p(c,t,n,r,l,d,h)}}}(e,r,o,s.indices,a))}))}));for(let t=0;t<n.length;++t)Z(e,n[t].bufferViews);!function(e){const t=e.gltfInternal,n=e._loadResources;let i;for(i=0;i<t.buffers.length;++i){const e=t.buffers[i],r=t.bufferViews.filter(y.bind(void 0,i)),o=r.reduce((function(e,t){return e+t.byteLength}),0);if(o===e.byteLength)continue;const s=new Uint8Array(o);let a=0;for(let e=0;e<r.length;++e){const t=r[e],i=n.getBuffer(t);s.set(i,a),t.byteOffset=a,a+=i.byteLength}n.buffers[i]=s,e.extras._pipeline.source=s.buffer,e.byteLength=o}}(e)},h.createTexture=function(e,t){let n=t.cache.modelOutliningCache;if((0,i.Z)(n)||(n=t.cache.modelOutliningCache={}),(0,i.Z)(n.outlineTexture))return n.outlineTexture;const d=Math.min(4096,o.Z.maximumTextureSize);let h=d;const m=g(h),f=[];for(;h>1;)h>>=1,f.push(g(h));const p=new a.Z({context:t,source:{arrayBufferView:m,mipLevels:f},width:d,height:1,pixelFormat:r.Z.LUMINANCE,sampler:new s.Z({wrapS:l.Z.CLAMP_TO_EDGE,wrapT:l.Z.CLAMP_TO_EDGE,minificationFilter:u.Z.LINEAR_MIPMAP_LINEAR,magnificationFilter:c.Z.LINEAR})});return n.outlineTexture=p,p};const x=h},11487:(e,t,n)=>{n.d(t,{Z:()=>H});var i=n(52351),r=n(59015),o=n(93517),s=n(90868),a=n(55077),c=n(54485),u=n(40734),l=n(39109),d=n(71118),h=n(20291),m=n(21514),f=n(95411),p=n(7048),_=n(75143),g=n(45813),Z=n(90289),y=n(91257),x=n(81737);const T={updateForwardAxis:function(e){const t=e.gltfInternal.extras.sourceVersion;((0,c.Z)(t)&&"2.0"!==t||"2.0"!==T.getAssetVersion(e.gltfInternal))&&(e._gltfForwardAxis=x.Z.X)},getAssetVersion:function(e){return(0,c.Z)(e.asset)&&(0,c.Z)(e.asset.version)?e.asset.version:"1.0"},splitIncompatibleMaterials:function(e){const t=e.accessors,n=e.materials,i={};return g.Z.mesh(e,(function(e){g.Z.meshPrimitive(e,(function(e){let r=e.material;const o=n[r],s=e.attributes.JOINTS_0;let u,l;if((0,c.Z)(s)){const e=t[s];u=e.componentType,l=e.type}const d=(0,c.Z)(s)&&"VEC4"===l,h=(0,c.Z)(e.attributes.COLOR_0),m=(0,c.Z)(e.targets),f=(0,c.Z)(e.attributes.NORMAL),p=(0,c.Z)(e.attributes.TANGENT),g=(0,c.Z)(e.attributes.TEXCOORD_0),Z=g&&(0,c.Z)(e.attributes.TEXCOORD_1),y=(0,c.Z)(e.extensions)&&(0,c.Z)(e.extensions.CESIUM_primitive_outline),x=i[r];if((0,c.Z)(x)){if(x.skinning.skinned!==d||x.hasVertexColors!==h||x.hasMorphTargets!==m||x.hasNormals!==f||x.hasTangents!==p||x.hasTexCoords!==g||x.hasTexCoord1!==Z||x.hasOutline!==y){const t=(0,a.Z)(o,!0);r=(0,_.Z)(n,t),e.material=r,i[r]={skinning:{skinned:d,componentType:u},hasVertexColors:h,hasMorphTargets:m,hasNormals:f,hasTangents:p,hasTexCoords:g,hasTexCoord1:Z,hasOutline:y}}}else i[r]={skinning:{skinned:d,componentType:u},hasVertexColors:h,hasMorphTargets:m,hasNormals:f,hasTangents:p,hasTexCoords:g,hasTexCoord1:Z,hasOutline:y}}))})),i},getShaderVariable:function(e){return"SCALAR"===e?"float":e.toLowerCase()},ModelState:{NEEDS_LOAD:0,LOADING:1,LOADED:2,FAILED:3},getFailedLoadFunction:function(e,t,n){return function(i){e._state=T.ModelState.FAILED;let r=`Failed to load ${t}: ${n}`;(0,c.Z)(i)&&(r+=`\n${i.message}`),e._readyPromise.reject(new m.Z(r))}},parseBuffers:function(e,t){const n=e._loadResources;g.Z.buffer(e.gltfInternal,(function(i,r){if((0,c.Z)(i.extras._pipeline.source))n.buffers[r]=i.extras._pipeline.source;else if((0,c.Z)(t)){const o=e._resource.getDerivedResource({url:i.uri});++n.pendingBufferLoads,o.fetchArrayBuffer().then(t(e,r)).catch(T.getFailedLoadFunction(e,"buffer",o.url))}}))}},S=new o.Z,b=new o.Z;function C(e,t){return g.Z.techniqueAttribute(e,(function(e,n){if(e.semantic===t)return n}))}function w(e,t,n,i){return(0,Z.Z)(e,"KHR_techniques_webgl")?function(e,t){if(!(e.semantic!==n||i&&(0,c.Z)(e.node)))return t}:function(e,r){const o=t.parameters[e];if(!(o.semantic!==n||i&&(0,c.Z)(o.node)))return r}}T.computeBoundingSphere=function(e){const t=e.gltfInternal,n=t.nodes,r=t.meshes,s=t.scenes[t.scene].nodes,a=s.length,u=[],l=new o.Z(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),h=new o.Z(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let e=0;e<a;++e){let i=n[s[e]];for(i._transformToRoot=T.getTransform(i),u.push(i);u.length>0;){i=u.pop();const e=i._transformToRoot,s=i.mesh;if((0,c.Z)(s)){const n=r[s].primitives,i=n.length;for(let r=0;r<i;++r){const i=n[r].attributes.POSITION;if((0,c.Z)(i)){const n=T.getAccessorMinMax(t,i);if((0,c.Z)(n.min)&&(0,c.Z)(n.max)){const t=o.Z.fromArray(n.min,0,S),i=o.Z.fromArray(n.max,0,b);d.Z.multiplyByPoint(e,t,t),d.Z.multiplyByPoint(e,i,i),o.Z.minimumByComponent(l,t,l),o.Z.maximumByComponent(h,i,h)}}}}const a=i.children;if((0,c.Z)(a)){const t=a.length;for(let i=0;i<t;++i){const t=n[a[i]];t._transformToRoot=T.getTransform(t),d.Z.multiplyTransformation(e,t._transformToRoot,t._transformToRoot),u.push(t)}}delete i._transformToRoot}}const m=i.Z.fromCornerPoints(l,h);return e.forwardAxis===x.Z.Z&&i.Z.transformWithoutScale(m,x.Z.Z_UP_TO_X_UP,m),e._upAxis===x.Z.Y?i.Z.transformWithoutScale(m,x.Z.Y_UP_TO_Z_UP,m):e._upAxis===x.Z.X&&i.Z.transformWithoutScale(m,x.Z.X_UP_TO_Z_UP,m),m},T.ensureSemanticExistence=function(e){return g.Z.mesh(e,(function(t){g.Z.meshPrimitive(t,(function(t){!function(e,t){const n=e.accessors,i=e.materials,r=e.extensions.KHR_techniques_webgl,o=r.techniques,s=r.programs,a=r.shaders,u=t.targets,l=t.attributes;for(const e in u)if(u.hasOwnProperty(e)){const t=u[e];for(const n in t)"extras"!==n&&(l[`${n}_${e}`]=t[n])}const d=o[i[t.material].extensions.KHR_techniques_webgl.technique],h=a[s[d.program].vertexShader];for(const e in l)if(l.hasOwnProperty(e)&&!(0,c.Z)(C(d,e))){const t=n[l[e]];let i=e.toLowerCase();"_"===i.charAt(0)&&(i=i.slice(1));const r=`a_${i}`;d.attributes[r]={semantic:e,type:t.componentType};const o=h.extras._pipeline;let s=o.source;s=`attribute ${T.getShaderVariable(t.type)} ${r};\n${s}`,o.source=s}}(e,t)}))})),e},T.createAttributeLocations=function(e,t){const n={};let i=!1,r=1;if(g.Z.techniqueAttribute(e,(function(e,t){/pos/i.test(t)&&!i?(n[t]=0,i=!0):n[t]=r++})),(0,c.Z)(t))for(const e in t)t.hasOwnProperty(e)&&(n[e]=r++);return n},T.getAccessorMinMax=function(e,t){const n=e.accessors[t],i=n.extensions;let r=n.min,o=n.max;if((0,c.Z)(i)){const e=i.WEB3D_quantized_attributes;(0,c.Z)(e)&&(r=e.decodedMin,o=e.decodedMax)}return{min:r,max:o}},T.getAttributeOrUniformBySemantic=function(e,t,n,i){return g.Z.technique(e,(function(r){if((0,c.Z)(n)&&r.program!==n)return;const o=g.Z.techniqueAttribute(r,w(e,r,t,i));return(0,c.Z)(o)?o:g.Z.techniqueUniform(r,w(e,r,t,i))}))},T.getDiffuseAttributeOrUniform=function(e,t){let n=T.getAttributeOrUniformBySemantic(e,"COLOR_0",t);return(0,c.Z)(n)||(n=T.getAttributeOrUniformBySemantic(e,"_3DTILESDIFFUSE",t)),n};const E=new o.Z,v=new h.Z,A=new o.Z;function I(e,t,n){t+="(?!\\w)",t=new RegExp(t,"g");const i=e.search(t);return e.replace(t,(function(e,t){return i===t?e:n}))}function M(e,t){const n=e.accessors[t].extensions;if((0,c.Z)(n))return n.WEB3D_quantized_attributes}function R(e,t,n){const i=t.material,r=e.materials[i];if(!(0,Z.Z)(e,"KHR_techniques_webgl")||!(0,c.Z)(r.extensions)||!(0,c.Z)(r.extensions.KHR_techniques_webgl))return;const o=r.extensions.KHR_techniques_webgl.technique,s=e.extensions.KHR_techniques_webgl.techniques[o];return g.Z.techniqueAttribute(s,(function(e,t){if(e.semantic===n)return t}))}function P(e){const t={value:e,clone:function(e,t){return e},func:function(){return t.value}};return t}function O(e){const t={value:r.Z.fromArray(e),clone:r.Z.clone,func:function(){return t.value}};return t}function L(e){const t={value:o.Z.fromArray(e),clone:o.Z.clone,func:function(){return t.value}};return t}function D(e){const t={value:s.Z.fromArray(e),clone:s.Z.clone,func:function(){return t.value}};return t}function B(e){const t={value:u.Z.fromColumnMajorArray(e),clone:u.Z.clone,func:function(){return t.value}};return t}function N(e){const t={value:l.Z.fromColumnMajorArray(e),clone:l.Z.clone,func:function(){return t.value}};return t}function F(e){const t={value:d.Z.fromColumnMajorArray(e),clone:d.Z.clone,func:function(){return t.value}};return t}function V(e,t,n){this._value=void 0,this._textureId=e.index,this._textures=t,this._defaultTexture=n}T.getTransform=function(e,t){return(0,c.Z)(e.matrix)?d.Z.fromColumnMajorArray(e.matrix,t):d.Z.fromTranslationQuaternionRotationScale(o.Z.fromArray(e.translation,0,E),h.Z.unpack(e.rotation,0,v),o.Z.fromArray(e.scale,0,A),t)},T.getUsedExtensions=function(e){const t=e.extensionsUsed,n={};if((0,c.Z)(t)){const e=t.length;for(let i=0;i<e;i++){n[t[i]]=!0}}return n},T.getRequiredExtensions=function(e){const t=e.extensionsRequired,n={};if((0,c.Z)(t)){const e=t.length;for(let i=0;i<e;i++){n[t[i]]=!0}}return n},T.supportedExtensions={AGI_articulations:!0,CESIUM_RTC:!0,EXT_texture_webp:!0,KHR_blend:!0,KHR_binary_glTF:!0,KHR_texture_basisu:!0,KHR_draco_mesh_compression:!0,KHR_materials_common:!0,KHR_techniques_webgl:!0,KHR_materials_unlit:!0,KHR_materials_pbrSpecularGlossiness:!0,KHR_texture_transform:!0,WEB3D_quantized_attributes:!0},T.checkSupportedExtensions=function(e,t){for(const n in e)if(e.hasOwnProperty(n)){if(!T.supportedExtensions[n])throw new m.Z(`Unsupported glTF Extension: ${n}`);if("EXT_texture_webp"===n&&!1===t)throw new m.Z("Loaded model requires WebP but browser does not support it.")}},T.checkSupportedGlExtensions=function(e,t){if((0,c.Z)(e)){const n=e.length;for(let i=0;i<n;i++){const n=e[i];if("OES_element_index_uint"!==n)throw new m.Z(`Unsupported WebGL Extension: ${n}`);if(!t.elementIndexUint)throw new m.Z("OES_element_index_uint WebGL extension is not enabled.")}}},T.modifyShaderForDracoQuantizedAttributes=function(e,t,n,i){const r={};for(let o in i)if(i.hasOwnProperty(o)){const s=i[o],a=s.quantization;if(!(0,c.Z)(a))continue;const u=R(e,t,o);"_"===o.charAt(0)&&(o=o.substring(1));const l=`gltf_u_dec_${o.toLowerCase()}`;if(!(0,c.Z)(r[l])){const e=`gltf_decoded_${o}`,t=u.replace("a_","gltf_a_dec_"),i=s.componentsPerAttribute;let r;n=I(n,u,t),r=a.octEncoded?"vec3":i>1?`vec${i}`:"float",n=`${r} ${t};\n${n}`;const c=3===i&&"COLOR_0"===o;c&&(n=I(n,t,`vec4(${t}, 1.0)`));let d="";if(a.octEncoded){const i=`${l}_rangeConstant`;n=`uniform float ${i};\n${n}`,d=`\nvoid main() {\n    ${t} = czm_octDecode(${u}.xy, ${i}).zxy;\n    ${e}();\n}\n`}else{const i=`${l}_normConstant`,o=`${l}_min`;n=`uniform float ${i};\nuniform ${r} ${o};\n${n}`;d=`\nvoid main() {\n    ${t} = ${o} + ${u}${c?".xyz":""} * ${i};\n    ${e}();\n}\n`}n=p.Z.replaceMain(n,e),n+=d}}return{shader:n}},T.modifyShaderForQuantizedAttributes=function(e,t,n){const i={},r=t.attributes;for(let o in r)if(r.hasOwnProperty(o)){const r=R(e,t,o),s=t.attributes[o];"_"===o.charAt(0)&&(o=o.substring(1));const a=`gltf_u_dec_${o.toLowerCase()}`,u=`${a}_scale`,l=`${a}_translate`;if(!(0,c.Z)(i[a])&&!(0,c.Z)(i[u])){const t=M(e,s);if((0,c.Z)(t)){const e=t.decodeMatrix,s=`gltf_decoded_${o}`,c=r.replace("a_","gltf_a_dec_"),d=Math.floor(Math.sqrt(e.length));let h;n=I(n,r,c),h=d>2?"vec"+(d-1):"float",n=`${h} ${c};\n${n}`;let m="";5===d?(n=`uniform vec4 ${l};\n${n=`uniform mat4 ${u};\n${n}`}`,m=`\nvoid main() {\n    ${c} = ${u} * ${r} + ${l};\n    ${s}();\n}\n`,i[u]={mat:4},i[l]={vec:4}):(n=`uniform mat${d} ${a};\n${n}`,m=`\nvoid main() {\n    ${c} = ${h}(${a} * vec${d}(${r},1.0));\n    ${s}();\n}\n`,i[a]={mat:d}),n=p.Z.replaceMain(n,s),n+=m}}}return{shader:n,uniforms:i}},Object.defineProperties(V.prototype,{value:{get:function(){if(!(0,c.Z)(this._value)){const e=this._textures[this._textureId];if(!(0,c.Z)(e))return this._defaultTexture;this._value=e}return this._value},set:function(e){this._value=e}}}),V.prototype.clone=function(e){return e},V.prototype.func=void 0;const U={};function z(e){return[e[20],e[21],e[22],e[23]]}U[f.Z.FLOAT]=P,U[f.Z.FLOAT_VEC2]=O,U[f.Z.FLOAT_VEC3]=L,U[f.Z.FLOAT_VEC4]=D,U[f.Z.INT]=P,U[f.Z.INT_VEC2]=O,U[f.Z.INT_VEC3]=L,U[f.Z.INT_VEC4]=D,U[f.Z.BOOL]=P,U[f.Z.BOOL_VEC2]=O,U[f.Z.BOOL_VEC3]=L,U[f.Z.BOOL_VEC4]=D,U[f.Z.FLOAT_MAT2]=B,U[f.Z.FLOAT_MAT3]=N,U[f.Z.FLOAT_MAT4]=F,U[f.Z.SAMPLER_2D]=function(e,t,n){const i=new V(e,t,n);return i.func=function(){return i.value},i},T.createUniformFunction=function(e,t,n,i){return U[e](t,n,i)},T.createUniformsForDracoQuantizedAttributes=function(e){const t={};for(let n in e)if(e.hasOwnProperty(n)){const i=e[n],r=i.quantization;if(!(0,c.Z)(r))continue;"_"===n.charAt(0)&&(n=n.substring(1));const o=`gltf_u_dec_${n.toLowerCase()}`;if(r.octEncoded){const e=`${o}_rangeConstant`,n=(1<<r.quantizationBits)-1;t[e]=P(n).func;continue}const s=`${o}_normConstant`,a=r.range/(1<<r.quantizationBits);t[s]=P(a).func;const u=`${o}_min`;switch(i.componentsPerAttribute){case 1:t[u]=P(r.minValues).func;break;case 2:t[u]=O(r.minValues).func;break;case 3:t[u]=L(r.minValues).func;break;case 4:t[u]=D(r.minValues).func}}return t},T.createUniformsForQuantizedAttributes=function(e,t,n){const i=e.accessors,r={},o={},s=t.attributes;for(let e in s)if(s.hasOwnProperty(e)){const t=i[s[e]],n=t.extensions;if("_"===e.charAt(0)&&(e=e.substring(1)),(0,c.Z)(n)){const i=n.WEB3D_quantized_attributes;if((0,c.Z)(i)){const n=i.decodeMatrix,s=`gltf_u_dec_${e.toLowerCase()}`;let c,u;switch(t.type){case y.Z.SCALAR:o[s]=B(n).func,r[s]=!0;break;case y.Z.VEC2:o[s]=N(n).func,r[s]=!0;break;case y.Z.VEC3:o[s]=F(n).func,r[s]=!0;break;case y.Z.VEC4:c=`${s}_scale`,u=`${s}_translate`,o[c]=F((a=n,[a[0],a[1],a[2],a[3],a[5],a[6],a[7],a[8],a[10],a[11],a[12],a[13],a[15],a[16],a[17],a[18]])).func,o[u]=D(z(n)).func,r[c]=!0,r[u]=!0}}}}var a;for(const e in n)if(n.hasOwnProperty(e)&&!r[e]){const t=n[e];(0,c.Z)(t.mat)&&(2===t.mat?o[e]=B(u.Z.IDENTITY).func:3===t.mat?o[e]=N(l.Z.IDENTITY).func:4===t.mat&&(o[e]=F(d.Z.IDENTITY).func)),(0,c.Z)(t.vec)&&4===t.vec&&(o[e]=D([0,0,0,0]).func)}return o};const k=new o.Z,q={MODEL:function(e,t){return function(){return e.model}},VIEW:function(e,t){return function(){return e.view}},PROJECTION:function(e,t){return function(){return e.projection}},MODELVIEW:function(e,t){return function(){return e.modelView}},CESIUM_RTC_MODELVIEW:function(e,t){const n=new d.Z;return function(){return(0,c.Z)(t._rtcCenter)?(d.Z.getTranslation(e.model,k),o.Z.add(k,t._rtcCenter,k),d.Z.multiplyByPoint(e.view,k,k),d.Z.setTranslation(e.modelView,k,n)):e.modelView}},MODELVIEWPROJECTION:function(e,t){return function(){return e.modelViewProjection}},MODELINVERSE:function(e,t){return function(){return e.inverseModel}},VIEWINVERSE:function(e,t){return function(){return e.inverseView}},PROJECTIONINVERSE:function(e,t){return function(){return e.inverseProjection}},MODELVIEWINVERSE:function(e,t){return function(){return e.inverseModelView}},MODELVIEWPROJECTIONINVERSE:function(e,t){return function(){return e.inverseModelViewProjection}},MODELINVERSETRANSPOSE:function(e,t){return function(){return e.inverseTransposeModel}},MODELVIEWINVERSETRANSPOSE:function(e,t){return function(){return e.normal}},VIEWPORT:function(e,t){return function(){return e.viewportCartesian4}}};T.getGltfSemanticUniforms=function(){return q};const H=T},33018:(e,t,n)=>{n.d(t,{Z:()=>T});var i=n(25914),r=n(93517),o=n(88779),s=n(54485),a=n(90332),c=n(99996),u=n(18463),l=n(39109),d=n(71118),h=n(39851),m=n(7004),f=n(35270),p=n(7063);function _(e){let t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).textureUrl;(0,s.Z)(t)||(t=(0,i.Z)("Assets/Textures/moonSmall.jpg")),this.show=(0,o.Z)(e.show,!0),this.textureUrl=t,this._ellipsoid=(0,o.Z)(e.ellipsoid,c.Z.MOON),this.onlySunLighting=(0,o.Z)(e.onlySunLighting,!0),this._ellipsoidPrimitive=new f.Z({radii:this.ellipsoid.radii,material:p.Z.fromType(p.Z.ImageType),depthTestEnabled:!1,_owner:this}),this._ellipsoidPrimitive.material.translucent=!1,this._axes=new u.Z}Object.defineProperties(_.prototype,{ellipsoid:{get:function(){return this._ellipsoid}}});const g=new l.Z,Z=new l.Z,y=new r.Z,x=[];_.prototype.update=function(e){if(!this.show)return;const t=this._ellipsoidPrimitive;t.material.uniforms.image=this.textureUrl,t.onlySunLighting=this.onlySunLighting;const n=e.time;(0,s.Z)(m.Z.computeIcrfToFixedMatrix(n,g))||m.Z.computeTemeToPseudoFixedMatrix(n,g);const i=this._axes.evaluate(n,Z);l.Z.transpose(i,i),l.Z.multiply(g,i,i);const r=h.Z.computeMoonPositionInEarthInertialFrame(n,y);l.Z.multiplyByVector(g,r,r),d.Z.fromRotationTranslation(i,r,t.modelMatrix);const o=e.commandList;return e.commandList=x,x.length=0,t.update(e),e.commandList=o,1===x.length?x[0]:void 0},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return this._ellipsoidPrimitive=this._ellipsoidPrimitive&&this._ellipsoidPrimitive.destroy(),(0,a.Z)(this)};const T=_},98289:(e,t,n)=>{n.d(t,{Z:()=>g});var i=n(54485),r=n(90332),o=n(20176),s=n(51625),a=n(59736),c=n(62969),u=n(22041),l=n(21514),d=n(89297),h=n(72060),m=n(10147),f=n(48836),p=n(97738),_=n(41783);function g(e,t,n,r){this._tileset=e,this._tile=t,this._tilesetResource=n,this._contents=[];const o=(0,i.Z)(r.contents)?r.contents:r.content;this._innerContentHeaders=o,this._requestsInFlight=0,this._cancelCount=0;const s=this._innerContentHeaders.length;this._arrayFetchPromises=new Array(s),this._requests=new Array(s),this._innerContentResources=new Array(s),this._serverKeys=new Array(s);for(let e=0;e<s;e++){const t=n.getDerivedResource({url:o[e].uri}),i=a.Z.getServerKey(t.getUrlComponent());this._innerContentResources[e]=t,this._serverKeys[e]=i}this._contentsFetchedPromise=void 0}function Z(e,t){e._requestsInFlight+=t,e.tileset.statistics.numberOfPendingRequests+=t}function y(e,t,n,i){const r=e._innerContentResources[t].clone(),o=e.tile,a=e._serverKeys[t],l=new s.Z({throttle:!0,throttleByServer:!0,type:u.Z.TILES3D,priorityFunction:function(){return o._priority},serverKey:a});return r.request=l,e._requests[t]=l,r.fetchArrayBuffer().then((function(t){if(!(n<e._cancelCount))return Z(e,-1),t})).catch((function(o){n<e._cancelCount||(r.request.state!==c.Z.CANCELLED?(Z(e,-1),x(e,t,o)):function(e,t){e._cancelCount++,e._tile._contentState=t,e.tileset.statistics.numberOfPendingRequests-=e._requestsInFlight,e._requestsInFlight=0;const n=e._innerContentHeaders.length;e._arrayFetchPromises=new Array(n)}(e,i))}))}function x(e,t,n){const r=e._tileset,o=e._innerContentResources[t].url,s=(0,i.Z)(n.message)?n.message:n.toString();r.tileFailed.numberOfListeners>0&&r.tileFailed.raiseEvent({url:o,message:s})}Object.defineProperties(g.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)if(e[n].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},readyPromise:{get:function(){const e=this._contents.map((function(e){return e.readyPromise})),t=this;return Promise.all(e).then((function(){return t}))}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(){throw new o.Z("Multiple3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(){throw new o.Z("Multiple3DTileContent cannot have group metadata")}},innerContentUrls:{get:function(){return this._innerContentHeaders.map((function(e){return e.uri}))}},contentsFetchedPromise:{get:function(){return this._contentsFetchedPromise}}}),g.prototype.requestInnerContents=function(){if(!function(e){const t={};for(let n=0;n<e.length;n++){const r=e[n];(0,i.Z)(t[r])?t[r]++:t[r]=1}for(const e in t)if(t.hasOwnProperty(e)&&!a.Z.serverHasOpenSlots(e,t[e]))return!1;return a.Z.heapHasOpenSlots(e.length)}(this._serverKeys))return this._serverKeys.length;const e=this._innerContentHeaders;Z(this,e.length);for(let t=0;t<e.length;t++)this._arrayFetchPromises[t]=y(this,t,this._cancelCount,this._tile._contentState);return this._contentsFetchedPromise=function(e){const t=e._cancelCount;return Promise.all(e._arrayFetchPromises).then((function(n){if(t<e._cancelCount)return;const r=n.map((function(t,n){if((0,i.Z)(t))return function(e,t,n){const r=(0,_.Z)(t);if(r.contentType===h.Z.EXTERNAL_TILESET){return x(e,n,new l.Z("External tilesets are disallowed inside multiple contents"))}e._disableSkipLevelOfDetail=e._disableSkipLevelOfDetail||r.contentType===h.Z.GEOMETRY||r.contentType===h.Z.VECTOR;const o=e._tileset,s=e._innerContentResources[n],a=e._tile;let c;const u=m.Z[r.contentType];c=(0,i.Z)(r.binaryPayload)?u(o,a,s,r.binaryPayload.buffer,0):u(o,a,s,r.jsonPayload);const g=e._innerContentHeaders[n];if(a.hasImplicitContentMetadata){const e=a.implicitSubtree,t=a.implicitCoordinates;c.metadata=e.getContentMetadataView(t,n)}else a.hasImplicitContent||(c.metadata=(0,f.Z)(o,g));const Z=(0,p.Z)(o,g);(0,i.Z)(Z)&&(c.group=new d.Z({metadata:Z}));return c}(e,t,n)}));e._contents=r.filter(i.Z)}))}(this),0},g.prototype.cancelRequests=function(){for(let e=0;e<this._requests.length;e++){const t=this._requests[e];(0,i.Z)(t)&&t.cancel()}},g.prototype.hasProperty=function(e,t){return!1},g.prototype.getFeature=function(e){},g.prototype.applyDebugSettings=function(e,t){const n=this._contents,i=n.length;for(let r=0;r<i;++r)n[r].applyDebugSettings(e,t)},g.prototype.applyStyle=function(e){const t=this._contents,n=t.length;for(let i=0;i<n;++i)t[i].applyStyle(e)},g.prototype.update=function(e,t){const n=this._contents,i=n.length;for(let r=0;r<i;++r)n[r].update(e,t)},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){const e=this._contents,t=e.length;for(let n=0;n<t;++n)e[n].destroy();return(0,r.Z)(this)}},52895:(e,t,n)=>{function i(e){}n.d(t,{Z:()=>r}),i.prototype.isReady=function(){return!0},i.prototype.shouldDiscardImage=function(e){return!1};const r=i},13558:(e,t,n)=>{n.d(t,{Z:()=>I});var i=n(23114),r=n(6785),o=n(54485),s=n(90332),a=n(91166),c=n(95411),u=n(74366),l=n(71087),d=n(37791),h=n(27400),m=n(74064),f=n(7048),p=n(47334),_=n(99841),g=n(37701),Z=n(53134),y=n(16829);function x(e){this._numSamples=1,this._translucentMultipassSupport=!1,this._translucentMRTSupport=!1;const t=e.colorBufferFloat&&e.depthTexture&&e.floatBlend;this._translucentMRTSupport=e.drawBuffers&&t,this._translucentMultipassSupport=!this._translucentMRTSupport&&t,this._opaqueFBO=void 0,this._opaqueTexture=void 0,this._depthStencilTexture=void 0,this._accumulationTexture=void 0,this._translucentFBO=new d.Z({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._alphaFBO=new d.Z({createColorAttachments:!1,createDepthAttachments:!1,depth:!0}),this._adjustTranslucentFBO=new d.Z({colorAttachmentsLength:this._translucentMRTSupport?2:1,createColorAttachments:!1}),this._adjustAlphaFBO=new d.Z({createColorAttachments:!1}),this._opaqueClearCommand=new u.Z({color:new r.Z(0,0,0,0),owner:this}),this._translucentMRTClearCommand=new u.Z({color:new r.Z(0,0,0,1),owner:this}),this._translucentMultipassClearCommand=new u.Z({color:new r.Z(0,0,0,0),owner:this}),this._alphaClearCommand=new u.Z({color:new r.Z(1,1,1,1),owner:this}),this._translucentRenderStateCache={},this._alphaRenderStateCache={},this._compositeCommand=void 0,this._adjustTranslucentCommand=void 0,this._adjustAlphaCommand=void 0,this._viewport=new i.Z,this._rs=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHDR=!1}function T(e){e._accumulationTexture=e._accumulationTexture&&!e._accumulationTexture.isDestroyed()&&e._accumulationTexture.destroy(),e._revealageTexture=e._revealageTexture&&!e._revealageTexture.isDestroyed()&&e._revealageTexture.destroy()}function S(e){e._translucentFBO.destroy(),e._alphaFBO.destroy(),e._adjustTranslucentFBO.destroy(),e._adjustAlphaFBO.destroy()}function b(e){T(e),S(e)}x.prototype.update=function(e,t,n,r,s){if(!this.isSupported())return;this._opaqueFBO=n,this._opaqueTexture=n.getColorTexture(0),this._depthStencilTexture=n.getDepthStencilTexture();const u=this._opaqueTexture.width,l=this._opaqueTexture.height,d=this._accumulationTexture,Z=!(0,o.Z)(d)||d.width!==u||d.height!==l||r!==this._useHDR,y=this._numSamples!==s;if((Z||y)&&(this._numSamples=s,function(e,t,n,i){T(e),e._accumulationTexture=new p.Z({context:t,width:n,height:i,pixelFormat:a.Z.RGBA,pixelDatatype:h.Z.FLOAT});const r=new Float32Array(n*i*4);e._revealageTexture=new p.Z({context:t,pixelFormat:a.Z.RGBA,pixelDatatype:h.Z.FLOAT,source:{arrayBufferView:r,width:n,height:i},flipY:!1})}(this,e,u,l)),(!(0,o.Z)(this._translucentFBO.framebuffer)||Z||y)&&!function(e,t){S(e);const n=c.Z.FRAMEBUFFER_COMPLETE;let i=!0;const r=e._accumulationTexture.width,o=e._accumulationTexture.height;if(e._translucentMRTSupport&&(e._translucentFBO.setColorTexture(e._accumulationTexture,0),e._translucentFBO.setColorTexture(e._revealageTexture,1),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,r,o),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture,0),e._adjustTranslucentFBO.setColorTexture(e._revealageTexture,1),e._adjustTranslucentFBO.update(t,r,o),e._translucentFBO.status===n&&e._adjustTranslucentFBO.status===n||(S(e),e._translucentMRTSupport=!1)),!e._translucentMRTSupport){e._translucentFBO.setColorTexture(e._accumulationTexture),e._translucentFBO.setDepthStencilTexture(e._depthStencilTexture),e._translucentFBO.update(t,r,o),e._alphaFBO.setColorTexture(e._revealageTexture),e._alphaFBO.setDepthStencilTexture(e._depthStencilTexture),e._alphaFBO.update(t,r,o),e._adjustTranslucentFBO.setColorTexture(e._accumulationTexture),e._adjustTranslucentFBO.update(t,r,o),e._adjustAlphaFBO.setColorTexture(e._revealageTexture),e._adjustAlphaFBO.update(t,r,o);const s=e._translucentFBO.status===n,a=e._alphaFBO.status===n,c=e._adjustTranslucentFBO.status===n,u=e._adjustAlphaFBO.status===n;s&&a&&c&&u||(b(e),e._translucentMultipassSupport=!1,i=!1)}return i}(this,e))return;this._useHDR=r;const x=this;let C,w;(0,o.Z)(this._compositeCommand)||(C=new f.Z({sources:[g.Z]}),this._translucentMRTSupport&&C.defines.push("MRT"),w={u_opaque:function(){return x._opaqueTexture},u_accumulation:function(){return x._accumulationTexture},u_revealage:function(){return x._revealageTexture}},this._compositeCommand=e.createViewportQuadCommand(C,{uniformMap:w,owner:this})),(0,o.Z)(this._adjustTranslucentCommand)||(this._translucentMRTSupport?(C=new f.Z({defines:["MRT"],sources:[_.Z]}),w={u_bgColor:function(){return x._translucentMRTClearCommand.color},u_depthTexture:function(){return x._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(C,{uniformMap:w,owner:this})):this._translucentMultipassSupport&&(C=new f.Z({sources:[_.Z]}),w={u_bgColor:function(){return x._translucentMultipassClearCommand.color},u_depthTexture:function(){return x._depthStencilTexture}},this._adjustTranslucentCommand=e.createViewportQuadCommand(C,{uniformMap:w,owner:this}),w={u_bgColor:function(){return x._alphaClearCommand.color},u_depthTexture:function(){return x._depthStencilTexture}},this._adjustAlphaCommand=e.createViewportQuadCommand(C,{uniformMap:w,owner:this}))),this._viewport.width=u,this._viewport.height=l;const E=!i.Z.equals(this._viewport,t.viewport);let v=E!==this._useScissorTest;this._useScissorTest=E,i.Z.equals(this._scissorRectangle,t.viewport)||(this._scissorRectangle=i.Z.clone(t.viewport,this._scissorRectangle),v=!0),(0,o.Z)(this._rs)&&i.Z.equals(this._viewport,this._rs.viewport)&&!v||(this._rs=m.Z.fromCache({viewport:this._viewport,scissorTest:{enabled:this._useScissorTest,rectangle:this._scissorRectangle}})),(0,o.Z)(this._compositeCommand)&&(this._compositeCommand.renderState=this._rs),this._adjustTranslucentCommand&&(this._adjustTranslucentCommand.renderState=this._rs),(0,o.Z)(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.renderState=this._rs)};const C={enabled:!0,color:new r.Z(0,0,0,0),equationRgb:Z.Z.ADD,equationAlpha:Z.Z.ADD,functionSourceRgb:y.Z.ONE,functionDestinationRgb:y.Z.ONE,functionSourceAlpha:y.Z.ZERO,functionDestinationAlpha:y.Z.ONE_MINUS_SOURCE_ALPHA},w={enabled:!0,color:new r.Z(0,0,0,0),equationRgb:Z.Z.ADD,equationAlpha:Z.Z.ADD,functionSourceRgb:y.Z.ONE,functionDestinationRgb:y.Z.ONE,functionSourceAlpha:y.Z.ONE,functionDestinationAlpha:y.Z.ONE},E={enabled:!0,color:new r.Z(0,0,0,0),equationRgb:Z.Z.ADD,equationAlpha:Z.Z.ADD,functionSourceRgb:y.Z.ZERO,functionDestinationRgb:y.Z.ONE_MINUS_SOURCE_ALPHA,functionSourceAlpha:y.Z.ZERO,functionDestinationAlpha:y.Z.ONE_MINUS_SOURCE_ALPHA};function v(e,t,n,i){let r=n[i.id];if(!(0,o.Z)(r)){const e=m.Z.getState(i);e.depthMask=!1,e.blending=t,r=m.Z.fromCache(e),n[i.id]=r}return r}function A(e,t,n,i){let r=e.shaderCache.getDerivedShaderProgram(t,n);if(!(0,o.Z)(r)){const o=t._attributeLocations,s=t.fragmentShaderSource.clone();s.sources=s.sources.map((function(e){return e=(e=(e=(e=f.Z.replaceMain(e,"czm_translucent_main")).replace(/gl_FragColor/g,"czm_gl_FragColor")).replace(/\bdiscard\b/g,"czm_discard = true")).replace(/czm_phong/g,"czm_translucentPhong")})),s.sources.splice(0,0,(-1!==i.indexOf("gl_FragData")?"#extension GL_EXT_draw_buffers : enable \n":"")+"vec4 czm_gl_FragColor;\nbool czm_discard = false;\n"),s.sources.push(`void main()\n{\n    czm_translucent_main();\n    if (czm_discard)\n    {\n        discard;\n    }\n${i}}\n`),r=e.shaderCache.createDerivedShaderProgram(t,n,{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:s,attributeLocations:o})}return r}x.prototype.createDerivedCommands=function(e,t,n){if((0,o.Z)(n)||(n={}),this._translucentMRTSupport){let s,a;(0,o.Z)(n.translucentCommand)&&(s=n.translucentCommand.shaderProgram,a=n.translucentCommand.renderState),n.translucentCommand=l.Z.shallowClone(e,n.translucentCommand),(0,o.Z)(s)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=s,n.translucentCommand.renderState=a):(n.translucentCommand.shaderProgram=function(e,t){return A(e,t,"translucentMRT","    vec3 Ci = czm_gl_FragColor.rgb * czm_gl_FragColor.a;\n    float ai = czm_gl_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    gl_FragData[0] = vec4(Ci * wzi, ai);\n    gl_FragData[1] = vec4(ai * wzi);\n")}(t,e.shaderProgram),n.translucentCommand.renderState=(i=this,r=e.renderState,v(0,C,i._translucentRenderStateCache,r)),n.shaderProgramId=e.shaderProgram.id)}else{let i,r,s,a;(0,o.Z)(n.translucentCommand)&&(i=n.translucentCommand.shaderProgram,r=n.translucentCommand.renderState,s=n.alphaCommand.shaderProgram,a=n.alphaCommand.renderState),n.translucentCommand=l.Z.shallowClone(e,n.translucentCommand),n.alphaCommand=l.Z.shallowClone(e,n.alphaCommand),(0,o.Z)(i)&&n.shaderProgramId===e.shaderProgram.id?(n.translucentCommand.shaderProgram=i,n.translucentCommand.renderState=r,n.alphaCommand.shaderProgram=s,n.alphaCommand.renderState=a):(n.translucentCommand.shaderProgram=function(e,t){return A(e,t,"translucentMultipass","    vec3 Ci = czm_gl_FragColor.rgb * czm_gl_FragColor.a;\n    float ai = czm_gl_FragColor.a;\n    float wzi = czm_alphaWeight(ai);\n    gl_FragColor = vec4(Ci, ai) * wzi;\n")}(t,e.shaderProgram),n.translucentCommand.renderState=function(e,t,n){return v(0,w,e._translucentRenderStateCache,n)}(this,0,e.renderState),n.alphaCommand.shaderProgram=function(e,t){return A(e,t,"alphaMultipass","    float ai = czm_gl_FragColor.a;\n    gl_FragColor = vec4(ai);\n")}(t,e.shaderProgram),n.alphaCommand.renderState=function(e,t,n){return v(0,E,e._alphaRenderStateCache,n)}(this,0,e.renderState),n.shaderProgramId=e.shaderProgram.id)}var i,r;return n},x.prototype.executeCommands=function(e,t,n,i,r){this._translucentMRTSupport?function(e,t,n,i,r,s){const a=t.context,c=t.frameState.useLogDepth,u=t._hdr,l=i.framebuffer,d=r.length,h=t.frameState.shadowState.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(a,i);const m=e._opaqueFBO.framebuffer;let f,p;i.framebuffer=e._translucentFBO.framebuffer;for(let e=0;e<d;++e)f=r[e],f=c?f.derivedCommands.logDepth.command:f,f=u?f.derivedCommands.hdr.command:f,p=h&&f.receiveShadows?f.derivedCommands.oit.shadows.translucentCommand:f.derivedCommands.oit.translucentCommand,n(p,t,a,i,m);(0,o.Z)(s)&&(f=s.unclassifiedCommand,p=h&&f.receiveShadows?f.derivedCommands.oit.shadows.translucentCommand:f.derivedCommands.oit.translucentCommand,n(p,t,a,i,m)),i.framebuffer=l}(this,e,t,n,i,r):function(e,t,n,i,r,s){let a,c,u;const l=t.context,d=t.frameState.useLogDepth,h=t._hdr,m=i.framebuffer,f=r.length,p=t.frameState.shadowState.lightShadowsEnabled;i.framebuffer=e._adjustTranslucentFBO.framebuffer,e._adjustTranslucentCommand.execute(l,i),i.framebuffer=e._adjustAlphaFBO.framebuffer,e._adjustAlphaCommand.execute(l,i);const _=e._opaqueFBO.framebuffer;for(i.framebuffer=e._translucentFBO.framebuffer,u=0;u<f;++u)a=r[u],a=d?a.derivedCommands.logDepth.command:a,a=h?a.derivedCommands.hdr.command:a,c=p&&a.receiveShadows?a.derivedCommands.oit.shadows.translucentCommand:a.derivedCommands.oit.translucentCommand,n(c,t,l,i,_);for((0,o.Z)(s)&&(a=s.unclassifiedCommand,c=p&&a.receiveShadows?a.derivedCommands.oit.shadows.translucentCommand:a.derivedCommands.oit.translucentCommand,n(c,t,l,i,_)),i.framebuffer=e._alphaFBO.framebuffer,u=0;u<f;++u)a=r[u],a=d?a.derivedCommands.logDepth.command:a,a=h?a.derivedCommands.hdr.command:a,c=p&&a.receiveShadows?a.derivedCommands.oit.shadows.alphaCommand:a.derivedCommands.oit.alphaCommand,n(c,t,l,i,_);(0,o.Z)(s)&&(a=s.unclassifiedCommand,c=p&&a.receiveShadows?a.derivedCommands.oit.shadows.alphaCommand:a.derivedCommands.oit.alphaCommand,n(c,t,l,i,_)),i.framebuffer=m}(this,e,t,n,i,r)},x.prototype.execute=function(e,t){this._compositeCommand.execute(e,t)},x.prototype.clear=function(e,t,n){const i=t.framebuffer;t.framebuffer=this._opaqueFBO.framebuffer,r.Z.clone(n,this._opaqueClearCommand.color),this._opaqueClearCommand.execute(e,t),t.framebuffer=this._translucentFBO.framebuffer;(this._translucentMRTSupport?this._translucentMRTClearCommand:this._translucentMultipassClearCommand).execute(e,t),this._translucentMultipassSupport&&(t.framebuffer=this._alphaFBO.framebuffer,this._alphaClearCommand.execute(e,t)),t.framebuffer=i},x.prototype.isSupported=function(){return this._translucentMRTSupport||this._translucentMultipassSupport},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return b(this),(0,o.Z)(this._compositeCommand)&&(this._compositeCommand.shaderProgram=this._compositeCommand.shaderProgram&&this._compositeCommand.shaderProgram.destroy()),(0,o.Z)(this._adjustTranslucentCommand)&&(this._adjustTranslucentCommand.shaderProgram=this._adjustTranslucentCommand.shaderProgram&&this._adjustTranslucentCommand.shaderProgram.destroy()),(0,o.Z)(this._adjustAlphaCommand)&&(this._adjustAlphaCommand.shaderProgram=this._adjustAlphaCommand.shaderProgram&&this._adjustAlphaCommand.shaderProgram.destroy()),(0,s.Z)(this)};const I=x},9257:(e,t,n)=>{n.d(t,{Z:()=>N});var i=n(93517),r=n(44990),o=n(58587),s=n(54485),a=n(90332),c=n(39172),u=n(22260),l=n(91166),d=n(31328),h=n(36627),m=n(2099),f=n(83159),p=n(27400),_=n(17426),g=n(7048),Z=n(47334),y=n(46801),x=n(22927),T=n(1973),S=n(42518);function b(e){this._url=e,this._cubeMapBuffers=void 0,this._cubeMaps=void 0,this._texture=void 0,this._mipTextures=void 0,this._va=void 0,this._sp=void 0,this._maximumMipmapLevel=void 0,this._loading=!1,this._ready=!1,this._readyPromise=(0,o.Z)()}Object.defineProperties(b.prototype,{url:{get:function(){return this._url}},texture:{get:function(){return this._texture}},maximumMipmapLevel:{get:function(){return this._maximumMipmapLevel}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}}}),b.isSupported=function(e){return e.colorBufferHalfFloat&&e.halfFloatingPointTexture||e.floatingPointTexture&&e.colorBufferFloat};const C=new i.Z(1,0,0),w=new i.Z(0,0,1),E=new i.Z(-1,0,0),v=new i.Z(0,0,-1),A=new i.Z(0,1,0),I=[A,E,w,new i.Z(0,-1,0),C,A,v,A,A],M=I.length,R=new Float32Array(3*M);let P=0;for(let e=0;e<M;++e,P+=3)i.Z.pack(I[e],R,P);const O=new Float32Array([-1,1,-1,0,0,1,0,0,1,0,1,1,0,-1,-1,-1,1,-1]),L=new Uint16Array([0,1,2,2,3,1,7,6,1,3,6,1,2,5,4,3,4,2,4,8,6,3,4,6]);function D(e){return function(){return e}}function B(e){let t,n;e._va=e._va&&e._va.destroy(),e._sp=e._sp&&e._sp.destroy();const i=e._cubeMaps;if((0,s.Z)(i))for(n=i.length,t=0;t<n;++t)i[t].destroy();const r=e._mipTextures;if((0,s.Z)(r))for(n=r.length,t=0;t<n;++t)r[t].destroy();e._va=void 0,e._sp=void 0,e._cubeMaps=void 0,e._cubeMapBuffers=void 0,e._mipTextures=void 0}b.prototype.update=function(e){const t=e.context;if(!b.isSupported(t))return;if((0,s.Z)(this._texture)&&(0,s.Z)(this._va)&&B(this),(0,s.Z)(this._texture))return;if(!(0,s.Z)(this._texture)&&!this._loading){const e=t.textureCache.getTexture(this._url);if((0,s.Z)(e))return B(this),this._texture=e,this._maximumMipmapLevel=this._texture.maximumMipmapLevel,this._ready=!0,void this._readyPromise.resolve()}const n=this._cubeMapBuffers;if(!(0,s.Z)(n)&&!this._loading){const e=this;(0,u.Z)(this._url).then((function(t){e._cubeMapBuffers=t,e._loading=!1})).catch((function(t){e._readyPromise.reject(t)})),this._loading=!0}if(!(0,s.Z)(this._cubeMapBuffers))return;const i=[];let o=n[0].positiveX.pixelDatatype;(0,s.Z)(o)?i.push("RGBA_NORMALIZED"):o=t.halfFloatingPointTexture?p.Z.HALF_FLOAT:p.Z.FLOAT;const a=l.Z.RGBA,C=new g.Z({defines:i,sources:[T.Z]});this._va=function(e){const t=d.Z.createVertexBuffer({context:e,typedArray:O,usage:h.Z.STATIC_DRAW}),n=d.Z.createVertexBuffer({context:e,typedArray:R,usage:h.Z.STATIC_DRAW}),i=d.Z.createIndexBuffer({context:e,typedArray:L,usage:h.Z.STATIC_DRAW,indexDatatype:c.Z.UNSIGNED_SHORT}),o=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:r.Z.FLOAT},{index:1,vertexBuffer:n,componentsPerAttribute:3,componentDatatype:r.Z.FLOAT}];return new y.Z({context:e,attributes:o,indexBuffer:i})}(t),this._sp=_.Z.fromCache({context:t,vertexShaderSource:S.Z,fragmentShaderSource:C,attributeLocations:{position:0,cubeMapCoordinates:1}});const w=Math.min(n.length,6);this._maximumMipmapLevel=w-1;const E=this._cubeMaps=new Array(w),v=this._mipTextures=new Array(w),A=2*n[0].positiveX.width,I={originalSize:function(){return A}};for(let i=0;i<w;++i){const r=n[i].positiveY;n[i].positiveY=n[i].negativeY,n[i].negativeY=r;const s=E[i]=new f.Z({context:t,source:n[i],pixelDatatype:o}),c=2*E[i].width,u=v[i]=new Z.Z({context:t,width:c,height:c,pixelDatatype:o,pixelFormat:a}),l=new m.Z({vertexArray:this._va,shaderProgram:this._sp,uniformMap:{cubeMap:D(s)},outputTexture:u,persists:!0,owner:this});e.commandList.push(l),I[`texture${i}`]=D(u)}this._texture=new Z.Z({context:t,width:1.5*A+2,height:A,pixelDatatype:o,pixelFormat:a}),this._texture.maximumMipmapLevel=this._maximumMipmapLevel,t.textureCache.addTexture(this._url,this._texture);const M=new m.Z({fragmentShaderSource:x.Z,uniformMap:I,outputTexture:this._texture,persists:!1,owner:this});e.commandList.push(M),this._ready=!0,this._readyPromise.resolve()},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return B(this),this._texture=this._texture&&this._texture.destroy(),(0,a.Z)(this)};const N=b},94299:(e,t,n)=>{n.d(t,{Z:()=>m});var i=n(78505),r=n(88779),o=n(54485),s=n(20176),a=n(34152),c=n(67197),u=n(67561),l=n(85933);const d=new i.Z("MapQuest, Open Street Map and contributors, CC-BY-SA");function h(e){e=(0,r.Z)(e,r.Z.EMPTY_OBJECT);const t=c.Z.createIfNeeded((0,r.Z)(e.url,"https://a.tile.openstreetmap.org/"));t.appendForwardSlash(),t.url+=`{z}/{x}/{y}.${(0,r.Z)(e.fileExtension,"png")}`;const n=new u.Z({ellipsoid:e.ellipsoid}),o=(0,r.Z)(e.minimumLevel,0),h=e.maximumLevel,m=(0,r.Z)(e.rectangle,n.rectangle),f=n.positionToTileXY(a.Z.southwest(m),o),p=n.positionToTileXY(a.Z.northeast(m),o),_=(Math.abs(p.x-f.x)+1)*(Math.abs(p.y-f.y)+1);if(_>4)throw new s.Z(`The rectangle and minimumLevel indicate that there are ${_} tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.`);let g=(0,r.Z)(e.credit,d);"string"==typeof g&&(g=new i.Z(g)),l.Z.call(this,{url:t,credit:g,tilingScheme:n,tileWidth:256,tileHeight:256,minimumLevel:o,maximumLevel:h,rectangle:m})}(0,o.Z)(Object.create)&&(h.prototype=Object.create(l.Z.prototype),h.prototype.constructor=h);const m=h},25936:(e,t,n)=>{n.d(t,{Z:()=>u});var i=n(17497),r=n(88779),o=n(54485),s=n(90332),a=n(87613);function c(){this._length=0,this._collections={},this._collectionsArray=[],this.show=!0}Object.defineProperties(c.prototype,{length:{get:function(){return this._length}}}),c.prototype.add=function(e,t){i.Z.defined("primitive",e),(0,o.Z)(t)&&i.Z.typeOf.number("zIndex",t),t=(0,r.Z)(t,0);let n=this._collections[t];if(!(0,o.Z)(n)){n=new a.Z({destroyPrimitives:!1}),n._zIndex=t,this._collections[t]=n;const e=this._collectionsArray;let i=0;for(;i<e.length&&e[i]._zIndex<t;)i++;e.splice(i,0,n)}return n.add(e),this._length++,e._zIndex=t,e},c.prototype.set=function(e,t){return i.Z.defined("primitive",e),i.Z.typeOf.number("zIndex",t),t===e._zIndex||(this.remove(e,!0),this.add(e,t)),e},c.prototype.remove=function(e,t){if(this.contains(e)){const n=e._zIndex,i=this._collections[n];let r;return r=t?i.remove(e):i.removeAndDestroy(e),r&&this._length--,0===i.length&&(this._collectionsArray.splice(this._collectionsArray.indexOf(i),1),this._collections[n]=void 0,i.destroy()),r}return!1},c.prototype.removeAll=function(){const e=this._collectionsArray;for(let t=0;t<e.length;t++){const n=e[t];n.destroyPrimitives=!0,n.destroy()}this._collections={},this._collectionsArray=[],this._length=0},c.prototype.contains=function(e){if(!(0,o.Z)(e))return!1;const t=this._collections[e._zIndex];return(0,o.Z)(t)&&t.contains(e)},c.prototype.update=function(e){if(!this.show)return;const t=this._collectionsArray;for(let n=0;n<t.length;n++)t[n].update(e)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this.removeAll(),(0,s.Z)(this)};const u=c},16597:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(59015),r=n(93517),o=n(6785),s=n(88779),a=n(54485);const c=new i.Z(1,1);function u(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),this.mass=(0,s.Z)(e.mass,1),this.position=r.Z.clone((0,s.Z)(e.position,r.Z.ZERO)),this.velocity=r.Z.clone((0,s.Z)(e.velocity,r.Z.ZERO)),this.life=(0,s.Z)(e.life,Number.MAX_VALUE),this.image=e.image,this.startColor=o.Z.clone((0,s.Z)(e.startColor,o.Z.WHITE)),this.endColor=o.Z.clone((0,s.Z)(e.endColor,o.Z.WHITE)),this.startScale=(0,s.Z)(e.startScale,1),this.endScale=(0,s.Z)(e.endScale,1),this.imageSize=i.Z.clone((0,s.Z)(e.imageSize,c)),this._age=0,this._normalizedAge=0,this._billboard=void 0}Object.defineProperties(u.prototype,{age:{get:function(){return this._age}},normalizedAge:{get:function(){return this._normalizedAge}}});const l=new r.Z;u.prototype.update=function(e,t){return r.Z.multiplyByScalar(this.velocity,e,l),r.Z.add(this.position,l,this.position),(0,a.Z)(t)&&t(this,e),this._age+=e,this.life===Number.MAX_VALUE?this._normalizedAge=0:this._normalizedAge=this._age/this.life,this._age<=this.life};const d=u},73555:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(88779);function r(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT),this.time=(0,i.Z)(e.time,0),this.minimum=(0,i.Z)(e.minimum,0),this.maximum=(0,i.Z)(e.maximum,50),this._complete=!1}Object.defineProperties(r.prototype,{complete:{get:function(){return this._complete}}});const o=r},94561:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(20176);function r(e){throw new i.Z("This type should not be instantiated directly.  Instead, use BoxEmitter, CircleEmitter, ConeEmitter or SphereEmitter.")}r.prototype.emit=function(e){i.Z.throwInstantiationError()};const o=r},96737:(e,t,n)=>{n.d(t,{Z:()=>w});var i=n(59015),r=n(93517),o=n(17497),s=n(6785),a=n(88779),c=n(54485),u=n(90332),l=n(92893),d=n(97262),h=n(22874),m=n(71118),f=n(64764),p=n(65214),_=n(16597);const g=new i.Z(1,1);function Z(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),this.show=(0,a.Z)(e.show,!0),this.updateCallback=e.updateCallback,this.loop=(0,a.Z)(e.loop,!0),this.image=(0,a.Z)(e.image,void 0);let t=e.emitter;(0,c.Z)(t)||(t=new p.Z(.5)),this._emitter=t,this._bursts=e.bursts,this._modelMatrix=m.Z.clone((0,a.Z)(e.modelMatrix,m.Z.IDENTITY)),this._emitterModelMatrix=m.Z.clone((0,a.Z)(e.emitterModelMatrix,m.Z.IDENTITY)),this._matrixDirty=!0,this._combinedMatrix=new m.Z,this._startColor=s.Z.clone((0,a.Z)(e.color,(0,a.Z)(e.startColor,s.Z.WHITE))),this._endColor=s.Z.clone((0,a.Z)(e.color,(0,a.Z)(e.endColor,s.Z.WHITE))),this._startScale=(0,a.Z)(e.scale,(0,a.Z)(e.startScale,1)),this._endScale=(0,a.Z)(e.scale,(0,a.Z)(e.endScale,1)),this._emissionRate=(0,a.Z)(e.emissionRate,5),this._minimumSpeed=(0,a.Z)(e.speed,(0,a.Z)(e.minimumSpeed,1)),this._maximumSpeed=(0,a.Z)(e.speed,(0,a.Z)(e.maximumSpeed,1)),this._minimumParticleLife=(0,a.Z)(e.particleLife,(0,a.Z)(e.minimumParticleLife,5)),this._maximumParticleLife=(0,a.Z)(e.particleLife,(0,a.Z)(e.maximumParticleLife,5)),this._minimumMass=(0,a.Z)(e.mass,(0,a.Z)(e.minimumMass,1)),this._maximumMass=(0,a.Z)(e.mass,(0,a.Z)(e.maximumMass,1)),this._minimumImageSize=i.Z.clone((0,a.Z)(e.imageSize,(0,a.Z)(e.minimumImageSize,g))),this._maximumImageSize=i.Z.clone((0,a.Z)(e.imageSize,(0,a.Z)(e.maximumImageSize,g))),this._sizeInMeters=(0,a.Z)(e.sizeInMeters,!1),this._lifetime=(0,a.Z)(e.lifetime,Number.MAX_VALUE),this._billboardCollection=void 0,this._particles=[],this._particlePool=[],this._previousTime=void 0,this._currentTime=0,this._carryOver=0,this._complete=new l.Z,this._isComplete=!1,this._updateParticlePool=!0,this._particleEstimate=0}function y(e){let t=e._particlePool.pop();return(0,c.Z)(t)||(t=new _.Z),t}function x(e,t){e._particlePool.push(t)}function T(e){(0,c.Z)(e._billboard)&&(e._billboard.show=!1)}function S(e,t){let n=t._billboard;(0,c.Z)(n)||(n=t._billboard=e._billboardCollection.add({image:t.image})),n.width=t.imageSize.x,n.height=t.imageSize.y,n.position=t.position,n.sizeInMeters=e.sizeInMeters,n.show=!0;const i=h.Z.lerp(t.startColor.red,t.endColor.red,t.normalizedAge),r=h.Z.lerp(t.startColor.green,t.endColor.green,t.normalizedAge),o=h.Z.lerp(t.startColor.blue,t.endColor.blue,t.normalizedAge),a=h.Z.lerp(t.startColor.alpha,t.endColor.alpha,t.normalizedAge);n.color=new s.Z(i,r,o,a),n.scale=h.Z.lerp(t.startScale,t.endScale,t.normalizedAge)}function b(e,t){t.startColor=s.Z.clone(e._startColor,t.startColor),t.endColor=s.Z.clone(e._endColor,t.endColor),t.startScale=e._startScale,t.endScale=e._endScale,t.image=e.image,t.life=h.Z.randomBetween(e._minimumParticleLife,e._maximumParticleLife),t.mass=h.Z.randomBetween(e._minimumMass,e._maximumMass),t.imageSize.x=h.Z.randomBetween(e._minimumImageSize.x,e._maximumImageSize.x),t.imageSize.y=h.Z.randomBetween(e._minimumImageSize.y,e._maximumImageSize.y),t._normalizedAge=0,t._age=0;const n=h.Z.randomBetween(e._minimumSpeed,e._maximumSpeed);r.Z.multiplyByScalar(t.velocity,n,t.velocity),e._particles.push(t)}Object.defineProperties(Z.prototype,{emitter:{get:function(){return this._emitter},set:function(e){o.Z.defined("value",e),this._emitter=e}},bursts:{get:function(){return this._bursts},set:function(e){this._bursts=e,this._updateParticlePool=!0}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){o.Z.defined("value",e),this._matrixDirty=this._matrixDirty||!m.Z.equals(this._modelMatrix,e),m.Z.clone(e,this._modelMatrix)}},emitterModelMatrix:{get:function(){return this._emitterModelMatrix},set:function(e){o.Z.defined("value",e),this._matrixDirty=this._matrixDirty||!m.Z.equals(this._emitterModelMatrix,e),m.Z.clone(e,this._emitterModelMatrix)}},startColor:{get:function(){return this._startColor},set:function(e){o.Z.defined("value",e),s.Z.clone(e,this._startColor)}},endColor:{get:function(){return this._endColor},set:function(e){o.Z.defined("value",e),s.Z.clone(e,this._endColor)}},startScale:{get:function(){return this._startScale},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._startScale=e}},endScale:{get:function(){return this._endScale},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._endScale=e}},emissionRate:{get:function(){return this._emissionRate},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._emissionRate=e,this._updateParticlePool=!0}},minimumSpeed:{get:function(){return this._minimumSpeed},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumSpeed=e}},maximumSpeed:{get:function(){return this._maximumSpeed},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumSpeed=e}},minimumParticleLife:{get:function(){return this._minimumParticleLife},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumParticleLife=e}},maximumParticleLife:{get:function(){return this._maximumParticleLife},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumParticleLife=e,this._updateParticlePool=!0}},minimumMass:{get:function(){return this._minimumMass},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._minimumMass=e}},maximumMass:{get:function(){return this._maximumMass},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMass=e}},minimumImageSize:{get:function(){return this._minimumImageSize},set:function(e){o.Z.typeOf.object("value",e),o.Z.typeOf.number.greaterThanOrEquals("value.x",e.x,0),o.Z.typeOf.number.greaterThanOrEquals("value.y",e.y,0),this._minimumImageSize=e}},maximumImageSize:{get:function(){return this._maximumImageSize},set:function(e){o.Z.typeOf.object("value",e),o.Z.typeOf.number.greaterThanOrEquals("value.x",e.x,0),o.Z.typeOf.number.greaterThanOrEquals("value.y",e.y,0),this._maximumImageSize=e}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(e){o.Z.typeOf.bool("value",e),this._sizeInMeters=e}},lifetime:{get:function(){return this._lifetime},set:function(e){o.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._lifetime=e}},complete:{get:function(){return this._complete}},isComplete:{get:function(){return this._isComplete}}});const C=new r.Z;Z.prototype.update=function(e){if(!this.show)return;(0,c.Z)(this._billboardCollection)||(this._billboardCollection=new f.Z),this._updateParticlePool&&(!function(e){const t=e._emissionRate,n=e._maximumParticleLife;let i=0;const r=e._bursts;if((0,c.Z)(r)){const e=r.length;for(let t=0;t<e;++t)i+=r[t].maximum}const o=e._billboardCollection,s=e.image,a=Math.ceil(t*n+i),u=e._particles,l=e._particlePool,d=Math.max(a-u.length-l.length,0);for(let e=0;e<d;++e){const e=new _.Z;e._billboard=o.add({image:s}),l.push(e)}e._particleEstimate=a}(this),this._updateParticlePool=!1);let t=0;this._previousTime&&(t=d.Z.secondsDifference(e.time,this._previousTime)),t<0&&(t=0);const n=this._particles,i=this._emitter,o=this.updateCallback;let s,a,u=n.length;for(s=0;s<u;++s)a=n[s],a.update(t,o)?S(this,a):(T(a),x(this,a),n[s]=n[u-1],--s,--u);n.length=u;const l=function(e,t){if(e._isComplete)return 0;const n=(t=h.Z.mod(t,e._lifetime))*e._emissionRate;let i=Math.floor(n);if(e._carryOver+=n-i,e._carryOver>1&&(i++,e._carryOver-=1),(0,c.Z)(e.bursts)){const t=e.bursts.length;for(let n=0;n<t;n++){const t=e.bursts[n],r=e._currentTime;(0,c.Z)(t)&&!t._complete&&r>t.time&&(i+=h.Z.randomBetween(t.minimum,t.maximum),t._complete=!0)}}return i}(this,t);if(l>0&&(0,c.Z)(i)){this._matrixDirty&&(this._combinedMatrix=m.Z.multiply(this.modelMatrix,this.emitterModelMatrix,this._combinedMatrix),this._matrixDirty=!1);const e=this._combinedMatrix;for(s=0;s<l;s++)a=y(this),this._emitter.emit(a),r.Z.add(a.position,a.velocity,C),m.Z.multiplyByPoint(e,C,C),a.position=m.Z.multiplyByPoint(e,a.position,a.position),r.Z.subtract(C,a.position,a.velocity),r.Z.normalize(a.velocity,a.velocity),b(this,a),S(this,a)}if(this._billboardCollection.update(e),this._previousTime=d.Z.clone(e.time,this._previousTime),this._currentTime+=t,this._lifetime!==Number.MAX_VALUE&&this._currentTime>this._lifetime)if(this.loop){if(this._currentTime=h.Z.mod(this._currentTime,this._lifetime),this.bursts){const e=this.bursts.length;for(s=0;s<e;s++)this.bursts[s]._complete=!1}}else this._isComplete=!0,this._complete.raiseEvent(this);e.frameNumber%120==0&&function(e){const t=e._particles,n=e._particlePool,i=e._billboardCollection,r=t.length,o=n.length,s=e._particleEstimate,a=o-Math.max(s-r-o,0);for(let e=a;e<o;++e){const t=n[e];i.remove(t._billboard)}n.length=a}(this)},Z.prototype.isDestroyed=function(){return!1},Z.prototype.destroy=function(){return this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),(0,u.Z)(this)};const w=Z},73020:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(88779),r=n(25225),o=n(99887),s=n(93365),a=n(73175),c=n(30431),u=n(58466);function l(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT);const t=(0,i.Z)(e.translucent,!0),n=(0,i.Z)(e.closed,!1),r=(0,i.Z)(e.flat,!1),d=r?c.Z:s.Z,h=r?a.Z:o.Z,m=r?l.FLAT_VERTEX_FORMAT:l.VERTEX_FORMAT;this.material=void 0,this.translucent=t,this._vertexShaderSource=(0,i.Z)(e.vertexShaderSource,d),this._fragmentShaderSource=(0,i.Z)(e.fragmentShaderSource,h),this._renderState=u.Z.getDefaultRenderState(t,n,e.renderState),this._closed=n,this._vertexFormat=m,this._flat=r,this._faceForward=(0,i.Z)(e.faceForward,!n)}Object.defineProperties(l.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return this._vertexFormat}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}}}),l.VERTEX_FORMAT=r.Z.POSITION_AND_NORMAL,l.FLAT_VERTEX_FORMAT=r.Z.POSITION_ONLY,l.prototype.getFragmentShaderSource=u.Z.prototype.getFragmentShaderSource,l.prototype.isTranslucent=u.Z.prototype.isTranslucent,l.prototype.getRenderState=u.Z.prototype.getRenderState;const d=l},5428:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(88779),r=n(54485),o=n(90332),s=n(20176),a=n(41780),c=n(52460);function u(e){e=(0,i.Z)(e,i.Z.EMPTY_OBJECT);const t=(0,c.Z)(e.container);if(!(0,r.Z)(t))throw new s.Z("container is required");this._container=t;const n=document.createElement("div");n.className="cesium-performanceDisplay";const o=document.createElement("div");o.className="cesium-performanceDisplay-fps",this._fpsText=document.createTextNode(""),o.appendChild(this._fpsText);const u=document.createElement("div");u.className="cesium-performanceDisplay-ms",this._msText=document.createTextNode(""),u.appendChild(this._msText),n.appendChild(u),n.appendChild(o),this._container.appendChild(n),this._lastFpsSampleTime=(0,a.Z)(),this._lastMsSampleTime=(0,a.Z)(),this._fpsFrameCount=0,this._msFrameCount=0,this._throttled=!1;const l=document.createElement("div");l.className="cesium-performanceDisplay-throttled",this._throttledText=document.createTextNode(""),l.appendChild(this._throttledText),n.appendChild(l)}Object.defineProperties(u.prototype,{throttled:{get:function(){return this._throttled},set:function(e){this._throttled!==e&&(this._throttledText.nodeValue=e?"(throttled)":"",this._throttled=e)}}}),u.prototype.update=function(e){const t=(0,a.Z)(),n=(0,i.Z)(e,!0);this._fpsFrameCount++;const r=t-this._lastFpsSampleTime;if(r>1e3){let e="N/A";n&&(e=1e3*this._fpsFrameCount/r|0),this._fpsText.nodeValue=`${e} FPS`,this._lastFpsSampleTime=t,this._fpsFrameCount=0}this._msFrameCount++;const o=t-this._lastMsSampleTime;if(o>200){let e="N/A";n&&(e=(o/this._msFrameCount).toFixed(2)),this._msText.nodeValue=`${e} MS`,this._lastMsSampleTime=t,this._msFrameCount=0}},u.prototype.destroy=function(){return(0,o.Z)(this)};const l=u},15519:(e,t,n)=>{n.d(t,{Z:()=>d});var i=n(90868),r=n(54485),o=n(90332),s=n(37791),a=n(74064);function c(){this._framebuffer=new s.Z,this._textureToCopy=void 0,this._copyDepthCommand=void 0}Object.defineProperties(c.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),c.prototype.update=function(e,t){!function(e,t,n){const i=n.width,r=n.height;e._framebuffer.update(t,i,r)}(this,e,t),function(e,t,n){if(!(0,r.Z)(e._copyDepthCommand)){const n="uniform highp sampler2D u_texture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    gl_FragColor = czm_packDepth(texture2D(u_texture, v_textureCoordinates).r);\n}\n";e._copyDepthCommand=t.createViewportQuadCommand(n,{renderState:a.Z.fromCache(),uniformMap:{u_texture:function(){return e._textureToCopy}},owner:e})}e._textureToCopy=n,e._copyDepthCommand.framebuffer=e.framebuffer}(this,e,t)};const u=new i.Z,l=new i.Z(1,1/255,1/65025,1/16581375);c.prototype.getDepth=function(e,t,n){if(!(0,r.Z)(this.framebuffer))return;const o=e.readPixels({x:t,y:n,width:1,height:1,framebuffer:this.framebuffer}),s=i.Z.unpack(o,0,u);return i.Z.divideByScalar(s,255,s),i.Z.dot(s,l)},c.prototype.executeCopyDepth=function(e,t){this._copyDepthCommand.execute(e,t)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){return this._framebuffer.destroy(),(0,r.Z)(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=(0,r.Z)(this._copyDepthCommand.shaderProgram)&&this._copyDepthCommand.shaderProgram.destroy()),(0,o.Z)(this)};const d=c},52193:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(23114),r=n(90332),o=n(37791),s=n(59434);function a(){this._framebuffer=new o.Z({color:!1,depthStencil:!0,supportsDepthTexture:!0}),this._passState=void 0}Object.defineProperties(a.prototype,{framebuffer:{get:function(){return this._framebuffer.framebuffer}}}),a.prototype.update=function(e,t,n){const r=n.width,o=n.height;this._framebuffer.isDirty(r,o)&&function(e,t){const n=t.drawingBufferWidth,r=t.drawingBufferHeight;e._framebuffer.update(t,n,r);const o=new s.Z(t);o.blendingEnabled=!1,o.scissorTest={enabled:!0,rectangle:new i.Z},o.viewport=new i.Z,e._passState=o}(this,e);const a=this.framebuffer,c=this._passState;return c.framebuffer=a,c.viewport.width=r,c.viewport.height=o,c.scissorTest.rectangle.x=t.x,c.scissorTest.rectangle.y=o-t.y,c.scissorTest.rectangle.width=1,c.scissorTest.rectangle.height=1,c},a.prototype.isDestroyed=function(){return!1},a.prototype.destroy=function(){return this._framebuffer.destroy(),(0,r.Z)(this)};const c=a},87539:(e,t,n)=>{n.d(t,{Z:()=>h});var i=n(23114),r=n(6785),o=n(88779),s=n(54485),a=n(90332),c=n(37791),u=n(59434);function l(e){const t=new u.Z(e);t.blendingEnabled=!1,t.scissorTest={enabled:!0,rectangle:new i.Z},t.viewport=new i.Z,this._context=e,this._fb=new c.Z({depthStencil:!0}),this._passState=t,this._width=0,this._height=0}l.prototype.begin=function(e,t){const n=this._context,r=t.width,o=t.height;return i.Z.clone(e,this._passState.scissorTest.rectangle),this._width=r,this._height=o,this._fb.update(n,r,o),this._passState.framebuffer=this._fb.framebuffer,this._passState.viewport.width=r,this._passState.viewport.height=o,this._passState};const d=new r.Z;l.prototype.end=function(e){const t=(0,o.Z)(e.width,1),n=(0,o.Z)(e.height,1),i=this._context,a=i.readPixels({x:e.x,y:e.y,width:t,height:n,framebuffer:this._fb.framebuffer}),c=Math.max(t,n),u=c*c,l=Math.floor(.5*t),h=Math.floor(.5*n);let m=0,f=0,p=0,_=-1;for(let e=0;e<u;++e){if(-l<=m&&m<=l&&-h<=f&&f<=h){const e=4*((h-f)*t+m+l);d.red=r.Z.byteToFloat(a[e]),d.green=r.Z.byteToFloat(a[e+1]),d.blue=r.Z.byteToFloat(a[e+2]),d.alpha=r.Z.byteToFloat(a[e+3]);const n=i.getObjectByPickColor(d);if((0,s.Z)(n))return n}if(m===f||m<0&&-m===f||m>0&&m===1-f){const e=p;p=-_,_=e}m+=p,f+=_}},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._fb.destroy(),(0,a.Z)(this)};const h=l},60898:(e,t,n)=>{n.d(t,{Z:()=>xe});var i=n(93237),r=n(23114),o=n(59015),s=n(93517),a=n(66866),c=n(17497),u=n(6785),l=n(88779),d=n(58587),h=n(54485),m=n(20176),f=n(71118),p=n(74408),_=n(16587),g=n(84929),Z=n(87823),y=n(43262),x=n(9008),T=n(38268),S=n(96059),b=n(28176),C=n(71097),w=n(15519),E=n(87613),v=n(18061),A=n(53640),I=n(70230);const M=new C.Z({pass:b.Z.MOST_DETAILED_PRELOAD}),R=new C.Z({pass:b.Z.MOST_DETAILED_PICK}),P=new C.Z({pass:b.Z.PICK});function O(e){this._mostDetailedRayPicks=[],this.pickRenderStateCache={},this._pickPositionCache={},this._pickPositionCacheDirty=!1;const t=new r.Z(0,0,1,1),n=new T.Z(e);n.frustum=new p.Z({width:.1,aspectRatio:1,near:.1}),this._pickOffscreenView=new I.Z(e,n,t)}O.prototype.update=function(){this._pickPositionCacheDirty=!0},O.prototype.getPickDepth=function(e,t){const n=e.view.pickDepths;let i=n[t];return(0,h.Z)(i)||(i=new w.Z,n[t]=i),i};const L=new _.Z,D=new s.Z,B=new s.Z,N=new o.Z,F=new f.Z;const V=new Z.Z,U=new o.Z;function z(e,t,n,i,r){const o=e.camera.frustum;return o instanceof p.Z||o instanceof _.Z?function(e,t,n,i,r){const o=e.camera;let a=o.frustum;(0,h.Z)(a._offCenterFrustum)&&(a=a._offCenterFrustum);let c=2*(t.x-r.x)/r.width-1;c*=.5*(a.right-a.left);let u=2*(r.height-t.y-r.y)/r.height-1;u*=.5*(a.top-a.bottom);const l=f.Z.clone(o.transform,F);o._setTransform(f.Z.IDENTITY);const d=s.Z.clone(o.position,D);s.Z.multiplyByScalar(o.right,c,B),s.Z.add(B,d,d),s.Z.multiplyByScalar(o.up,u,B),s.Z.add(B,d,d),o._setTransform(l),e.mode===v.Z.SCENE2D&&s.Z.fromElements(d.z,d.x,d.y,d);const m=a.getPixelDimensions(r.width,r.height,1,1,N),p=L;return p.right=.5*m.x,p.left=-p.right,p.top=.5*m.y,p.bottom=-p.top,p.near=a.near,p.far=a.far,p.computeCullingVolume(d,o.directionWC,o.upWC)}(e,t,0,0,r):function(e,t,n,i,r){const o=e.camera,s=o.frustum,a=s.near,c=Math.tan(.5*s.fovy),u=s.aspectRatio*c,l=(2*(t.x-r.x)/r.width-1)*a*u,d=(2*(r.height-t.y-r.y)/r.height-1)*a*c,h=s.getPixelDimensions(r.width,r.height,1,1,U),m=h.x*n*.5,f=h.y*i*.5,p=V;return p.top=d+f,p.bottom=d-f,p.right=l+m,p.left=l-m,p.near=a,p.far=s.far,p.computeCullingVolume(o.positionWC,o.directionWC,o.upWC)}(e,t,n,i,r)}let k=3,q=3,H=new r.Z(0,0,k,q);const j=new o.Z,G=new u.Z(0,0,0,0);O.prototype.pick=function(e,t,n,i){if(!(0,h.Z)(t))throw new m.Z("windowPosition is undefined.");k=(0,l.Z)(n,3),q=(0,l.Z)(i,k);const o=e.context,s=o.uniformState,a=e.frameState,c=e.defaultView;e.view=c;const u=c.viewport;u.x=0,u.y=0,u.width=o.drawingBufferWidth,u.height=o.drawingBufferHeight;let d=c.passState;d.viewport=r.Z.clone(u,d.viewport);const f=A.Z.transformWindowToDrawingBuffer(e,t,j);e.jobScheduler.disableThisFrame(),e.updateFrameState(),a.cullingVolume=z(e,f,k,q,u),a.invertClassification=!1,a.passes.pick=!0,a.tilesetPassState=P,s.update(a),e.updateEnvironment(),H.x=f.x-.5*(k-1),H.y=e.drawingBufferHeight-f.y-.5*(q-1),H.width=k,H.height=q,d=c.pickFramebuffer.begin(H,c.viewport),e.updateAndExecuteCommands(d,G),e.resolveFramebuffers(d);const p=c.pickFramebuffer.end(H);return o.endFrame(),p};const W=new g.Z,$=new Z.Z,K=new p.Z,Y=new _.Z;O.prototype.pickPositionWorldCoordinates=function(e,t,n){if(!e.useDepthPicking)return;if(!(0,h.Z)(t))throw new m.Z("windowPosition is undefined.");if(!e.context.depthTexture)throw new m.Z("Picking from the depth buffer is not supported. Check pickPositionSupported.");const i=t.toString();if(this._pickPositionCacheDirty)this._pickPositionCache={},this._pickPositionCacheDirty=!1;else if(this._pickPositionCache.hasOwnProperty(i))return s.Z.clone(this._pickPositionCache[i],n);const o=e.frameState,a=e.context,c=a.uniformState,u=e.defaultView;e.view=u;const l=A.Z.transformWindowToDrawingBuffer(e,t,j);e.pickTranslucentDepth?function(e,t){const n=e.context,i=e.frameState,o=e.environmentState,s=e.defaultView;e.view=s;const a=s.viewport;a.x=0,a.y=0,a.width=n.drawingBufferWidth,a.height=n.drawingBufferHeight;let c=s.passState;c.viewport=r.Z.clone(a,c.viewport),e.clearPasses(i.passes),i.passes.pick=!0,i.passes.depth=!0,i.cullingVolume=z(e,t,1,1,a),i.tilesetPassState=P,e.updateEnvironment(),o.renderTranslucentDepthForPick=!0,c=s.pickDepthFramebuffer.update(n,t,a),e.updateAndExecuteCommands(c,G),e.resolveFramebuffers(c),n.endFrame()}(e,l):(e.updateFrameState(),c.update(o),e.updateEnvironment()),l.y=e.drawingBufferHeight-l.y;const d=e.camera;let f;f=(0,h.Z)(d.frustum.fov)?d.frustum.clone(W):(0,h.Z)(d.frustum.infiniteProjectionMatrix)?d.frustum.clone($):(0,h.Z)(d.frustum.width)?d.frustum.clone(K):d.frustum.clone(Y);const p=u.frustumCommandsList,_=p.length;for(let t=0;t<_;++t){const r=this.getPickDepth(e,t).getDepth(a,l.x,l.y);if((0,h.Z)(r)&&(r>0&&r<1)){const a=p[t];let u;return e.mode===v.Z.SCENE2D?(u=d.position.z,d.position.z=u-a.near+1,f.far=Math.max(1,a.far-a.near),f.near=1,c.update(o),c.updateFrustum(f)):(f.near=a.near*(0!==t?e.opaqueFrustumNearOffset:1),f.far=a.far,c.updateFrustum(f)),n=A.Z.drawingBufferToWgs84Coordinates(e,l,r,n),e.mode===v.Z.SCENE2D&&(d.position.z=u,c.update(o)),this._pickPositionCache[i]=s.Z.clone(n),n}}this._pickPositionCache[i]=void 0};const X=new a.Z;function J(e,t){let n,i;const r=[],o=[],s=[],a=[];(0,h.Z)(e)||(e=Number.MAX_VALUE);let c=t();for(;(0,h.Z)(c);){const n=c.object,u=c.position,l=c.exclude;if((0,h.Z)(u)&&!(0,h.Z)(n)){r.push(c);break}if(!(0,h.Z)(n)||!(0,h.Z)(n.primitive))break;if(!l&&(r.push(c),0>=--e))break;const d=n.primitive;let m=!1;"function"==typeof d.getGeometryInstanceAttributes&&(0,h.Z)(n.id)&&(i=d.getGeometryInstanceAttributes(n.id),(0,h.Z)(i)&&(0,h.Z)(i.show)&&(m=!0,i.show=x.Z.toValue(!1,i.show),s.push(i))),n instanceof S.Z&&(m=!0,n.show=!1,a.push(n)),m||(d.show=!1,o.push(d)),c=t()}for(n=0;n<o.length;++n)o[n].show=!0;for(n=0;n<s.length;++n)i=s[n],i.show=x.Z.toValue(!0,i.show);for(n=0;n<a.length;++n)a[n].show=!0;return r}O.prototype.pickPosition=function(e,t,n){if(n=this.pickPositionWorldCoordinates(e,t,n),(0,h.Z)(n)&&e.mode!==v.Z.SCENE3D){s.Z.fromElements(n.y,n.z,n.x,n);const t=e.mapProjection,i=t.ellipsoid,r=t.unproject(n,X);i.cartographicToCartesian(r,n)}return n},O.prototype.drillPick=function(e,t,n,i,r){const o=this;return J(n,(function(){const n=o.pick(e,t,i,r);if((0,h.Z)(n))return{object:n,position:void 0,exclude:!1}})).map((function(e){return e.object}))};const Q=new s.Z,ee=new s.Z;function te(e,t,n){this.ray=e,this.width=t,this.tilesets=n,this.ready=!1,this.deferred=(0,d.Z)(),this.promise=this.deferred.promise}function ne(e,t,n,i){const r=t.direction,o=s.Z.mostOrthogonalAxis(r,Q),a=s.Z.cross(r,o,Q),c=s.Z.cross(r,a,ee);return i.position=t.origin,i.direction=r,i.up=c,i.right=a,i.frustum.width=(0,l.Z)(n,.1),i.frustum.computeCullingVolume(i.positionWC,i.directionWC,i.upWC)}function ie(e,t,n){const i=t.frameState,r=n.ray,o=n.width,s=n.tilesets,a=e._pickOffscreenView.camera,c=ne(0,r,o,a),u=M;u.camera=a,u.cullingVolume=c;let l=!0;const d=s.length;for(let e=0;e<d;++e){const n=s[e];n.show&&t.primitives.contains(n)&&(n.updateForPass(i,u),l=l&&u.ready)}return l&&n.deferred.resolve(),l}function re(e,t,n){const i=e.length;for(let r=0;r<i;++r){const i=e.get(r);i.show&&((0,h.Z)(i.isCesium3DTileset)?(0,h.Z)(t)&&-1!==t.indexOf(i)||n.push(i):i instanceof E.Z&&re(i,t,n))}}function oe(e,t,n,i,r,o){const s=[];if(re(t.primitives,i,s),0===s.length)return Promise.resolve(o());const a=new te(n,r,s);return e._mostDetailedRayPicks.push(a),a.promise.then((function(){return o()}))}function se(e,t){return!(!(0,h.Z)(e)||!(0,h.Z)(t)||0===t.length)&&(t.indexOf(e)>-1||t.indexOf(e.primitive)>-1||t.indexOf(e.id)>-1)}function ae(e,t,n,i,o,s,a,c){return J(i,(function(){return function(e,t,n,i,o,s,a){const c=t.context,u=c.uniformState,l=t.frameState,d=e._pickOffscreenView;t.view=d,ne(0,n,o,d.camera),H=r.Z.clone(d.viewport,H);const m=d.pickFramebuffer.begin(H,d.viewport);let f;t.jobScheduler.disableThisFrame(),t.updateFrameState(),l.invertClassification=!1,l.passes.pick=!0,l.passes.offscreen=!0,l.tilesetPassState=a?R:P,u.update(l),t.updateEnvironment(),t.updateAndExecuteCommands(m,G),t.resolveFramebuffers(m);const p=d.pickFramebuffer.end(H);if(t.context.depthTexture){const i=d.frustumCommandsList.length;for(let r=0;r<i;++r){const i=e.getPickDepth(t,r).getDepth(c,0,0);if((0,h.Z)(i)&&i>0&&i<1){const e=d.frustumCommandsList[r],o=e.near*(0!==r?t.opaqueFrustumNearOffset:1),s=o+i*(e.far-o);f=y.Z.getPoint(n,s);break}}}if(t.view=t.defaultView,c.endFrame(),(0,h.Z)(p)||(0,h.Z)(f))return{object:p,position:f,exclude:!(0,h.Z)(f)&&s||se(p,i)}}(e,t,n,o,s,a,c)}))}function ce(e,t,n,i,r,o,s){const a=ae(e,t,n,1,i,r,o,s);if(a.length>0)return a[0]}function ue(e,t,n,i,r,o,s,a){return ae(e,t,n,i,r,o,s,a)}function le(e,t){const n=(0,d.Z)();return t.then((function(t){const i=e.postRender.addEventListener((function(){n.resolve(t),i()}));e.requestRender()})).catch((function(e){n.reject(e)})),n.promise}O.prototype.updateMostDetailedRayPicks=function(e){const t=this._mostDetailedRayPicks;for(let n=0;n<t.length;++n)ie(this,e,t[n])&&t.splice(n--,1)},O.prototype.pickFromRay=function(e,t,n,i){if(c.Z.defined("ray",t),e.mode!==v.Z.SCENE3D)throw new m.Z("Ray intersections are only supported in 3D mode.");return ce(this,e,t,n,i,!1,!1)},O.prototype.drillPickFromRay=function(e,t,n,i,r){if(c.Z.defined("ray",t),e.mode!==v.Z.SCENE3D)throw new m.Z("Ray intersections are only supported in 3D mode.");return ue(this,e,t,n,i,r,!1,!1)},O.prototype.pickFromRayMostDetailed=function(e,t,n,i){if(c.Z.defined("ray",t),e.mode!==v.Z.SCENE3D)throw new m.Z("Ray intersections are only supported in 3D mode.");const r=this;return t=y.Z.clone(t),n=(0,h.Z)(n)?n.slice():n,le(e,oe(r,e,t,n,i,(function(){return ce(r,e,t,n,i,!1,!0)})))},O.prototype.drillPickFromRayMostDetailed=function(e,t,n,i,r){if(c.Z.defined("ray",t),e.mode!==v.Z.SCENE3D)throw new m.Z("Ray intersections are only supported in 3D mode.");const o=this;return t=y.Z.clone(t),i=(0,h.Z)(i)?i.slice():i,le(e,oe(o,e,t,i,r,(function(){return ue(o,e,t,n,i,r,!1,!0)})))};const de=new s.Z,he=new s.Z,me=new y.Z,fe=new a.Z;function pe(e,t){const n=e.globe,r=(0,h.Z)(n)?n.ellipsoid:e.mapProjection.ellipsoid,o=i.Z._defaultMaxTerrainHeight,c=r.geodeticSurfaceNormalCartographic(t,he),u=a.Z.toCartesian(t,r,de),l=me;l.origin=u,l.direction=c;const d=new y.Z;return y.Z.getPoint(l,o,d.origin),s.Z.negate(c,d.direction),d}function _e(e,t){const n=e.globe,i=(0,h.Z)(n)?n.ellipsoid:e.mapProjection.ellipsoid;return pe(e,a.Z.fromCartesian(t,i,fe))}function ge(e,t){const n=e.globe,i=(0,h.Z)(n)?n.ellipsoid:e.mapProjection.ellipsoid;return a.Z.fromCartesian(t,i,fe).height}function Ze(e,t,n,i,r){const o=pe(t,n);return oe(e,t,o,i,r,(function(){const n=ce(e,t,o,i,r,!0,!0);if((0,h.Z)(n))return ge(t,n.position)}))}function ye(e,t,n,i,r,o){const a=_e(t,n);return oe(e,t,a,i,r,(function(){const n=ce(e,t,a,i,r,!0,!0);if((0,h.Z)(n))return s.Z.clone(n.position,o)}))}O.prototype.sampleHeight=function(e,t,n,i){if(c.Z.defined("position",t),e.mode!==v.Z.SCENE3D)throw new m.Z("sampleHeight is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new m.Z("sampleHeight requires depth texture support. Check sampleHeightSupported.");const r=ce(this,e,pe(e,t),n,i,!0,!1);if((0,h.Z)(r))return ge(e,r.position)},O.prototype.clampToHeight=function(e,t,n,i,r){if(c.Z.defined("cartesian",t),e.mode!==v.Z.SCENE3D)throw new m.Z("clampToHeight is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new m.Z("clampToHeight requires depth texture support. Check clampToHeightSupported.");const o=ce(this,e,_e(e,t),n,i,!0,!1);if((0,h.Z)(o))return s.Z.clone(o.position,r)},O.prototype.sampleHeightMostDetailed=function(e,t,n,i){if(c.Z.defined("positions",t),e.mode!==v.Z.SCENE3D)throw new m.Z("sampleHeightMostDetailed is only supported in 3D mode.");if(!e.sampleHeightSupported)throw new m.Z("sampleHeightMostDetailed requires depth texture support. Check sampleHeightSupported.");n=(0,h.Z)(n)?n.slice():n;const r=t.length,o=new Array(r);for(let s=0;s<r;++s)o[s]=Ze(this,e,t[s],n,i);return le(e,Promise.all(o).then((function(e){const n=e.length;for(let i=0;i<n;++i)t[i].height=e[i];return t})))},O.prototype.clampToHeightMostDetailed=function(e,t,n,i){if(c.Z.defined("cartesians",t),e.mode!==v.Z.SCENE3D)throw new m.Z("clampToHeightMostDetailed is only supported in 3D mode.");if(!e.clampToHeightSupported)throw new m.Z("clampToHeightMostDetailed requires depth texture support. Check clampToHeightSupported.");n=(0,h.Z)(n)?n.slice():n;const r=t.length,o=new Array(r);for(let s=0;s<r;++s)o[s]=ye(this,e,t[s],n,i,t[s]);return le(e,Promise.all(o).then((function(e){const n=e.length;for(let i=0;i<n;++i)t[i]=e[i];return t})))},O.prototype.destroy=function(){this._pickOffscreenView=this._pickOffscreenView&&this._pickOffscreenView.destroy()};const xe=O},17932:(e,t,n)=>{n.d(t,{Z:()=>Z});var i=n(35742),r=n(93517),o=n(17497),s=n(6785),a=n(51138),c=n(44990),u=n(88779),l=n(54485),d=n(7219),h=n(21514),m=n(91257),f=n(73673),p=n(34240);const _={},g=Uint32Array.BYTES_PER_ELEMENT;_.parse=function(e,t){t=(0,u.Z)(t,0),o.Z.defined("arrayBuffer",e);const n=new Uint8Array(e),_=new DataView(e);t+=g;const Z=_.getUint32(t,!0);if(1!==Z)throw new h.Z(`Only Point Cloud tile version 1 is supported.  Version ${Z} is not.`);t+=g,t+=g;const y=_.getUint32(t,!0);if(0===y)throw new h.Z("Feature table must have a byte length greater than zero");t+=g;const x=_.getUint32(t,!0);t+=g;const T=_.getUint32(t,!0);t+=g;const S=_.getUint32(t,!0);t+=g;const b=(0,d.Z)(n,t,y);t+=y;const C=new Uint8Array(e,t,x);let w,E;t+=x,T>0&&(w=(0,d.Z)(n,t,T),t+=T,S>0&&(E=new Uint8Array(e,t,S),t+=S));const v=new f.Z(b,C),A=v.getGlobalProperty("POINTS_LENGTH");if(v.featuresLength=A,!(0,l.Z)(A))throw new h.Z("Feature table global property: POINTS_LENGTH must be defined");let I=v.getGlobalProperty("RTC_CENTER",c.Z.FLOAT,3);(0,l.Z)(I)&&(I=r.Z.unpack(I));const M=function(e,t){const n=e.json;let r,o,s;const c=(0,l.Z)(n.extensions)?n.extensions["3DTILES_draco_point_compression"]:void 0,u=(0,l.Z)(t)&&(0,l.Z)(t.extensions)?t.extensions["3DTILES_draco_point_compression"]:void 0;(0,l.Z)(u)&&(s=u.properties);let d,m,f,p,_,g;if((0,l.Z)(c)){o=c.properties;const t=c.byteOffset,n=c.byteLength;if(!(0,l.Z)(o)||!(0,l.Z)(t)||!(0,l.Z)(n))throw new h.Z("Draco properties, byteOffset, and byteLength must be defined");r=(0,i.Z)(e.buffer,t,t+n),d=(0,l.Z)(o.POSITION),m=(0,l.Z)(o.RGB)||(0,l.Z)(o.RGBA),f=(0,l.Z)(o.NORMAL),p=(0,l.Z)(o.BATCH_ID),_=(0,l.Z)(o.RGBA)}(0,l.Z)(r)&&(g={buffer:r,featureTableProperties:o,batchTableProperties:s,properties:(0,a.Z)(o,s),dequantizeInShader:!0});return{draco:g,hasPositions:d,hasColors:m,isTranslucent:_,hasNormals:f,hasBatchIds:p}}(v,w);if(M.rtcCenter=I,M.pointsLength=A,!M.hasPositions){const e=function(e){const t=e.json;let n;if((0,l.Z)(t.POSITION))return n=e.getPropertyArray("POSITION",c.Z.FLOAT,3),{name:p.Z.POSITION,semantic:p.Z.POSITION,typedArray:n,isQuantized:!1,componentDatatype:c.Z.FLOAT,type:m.Z.VEC3};if((0,l.Z)(t.POSITION_QUANTIZED)){n=e.getPropertyArray("POSITION_QUANTIZED",c.Z.UNSIGNED_SHORT,3);const t=e.getGlobalProperty("QUANTIZED_VOLUME_SCALE",c.Z.FLOAT,3);if(!(0,l.Z)(t))throw new h.Z("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");const i=65535,o=e.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",c.Z.FLOAT,3);if(!(0,l.Z)(o))throw new h.Z("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");return{name:p.Z.POSITION,semantic:p.Z.POSITION,typedArray:n,isQuantized:!0,componentDatatype:c.Z.FLOAT,type:m.Z.VEC3,quantizedRange:i,quantizedVolumeOffset:r.Z.unpack(o),quantizedVolumeScale:r.Z.unpack(t),quantizedComponentDatatype:c.Z.UNSIGNED_SHORT,quantizedType:m.Z.VEC3}}}(v);M.positions=e,M.hasPositions=M.hasPositions||(0,l.Z)(e)}if(!M.hasPositions)throw new h.Z("Either POSITION or POSITION_QUANTIZED must be defined.");if(!M.hasNormals){const e=function(e){const t=e.json;let n;if((0,l.Z)(t.NORMAL))return n=e.getPropertyArray("NORMAL",c.Z.FLOAT,3),{name:p.Z.NORMAL,semantic:p.Z.NORMAL,typedArray:n,octEncoded:!1,octEncodedZXY:!1,componentDatatype:c.Z.FLOAT,type:m.Z.VEC3};if((0,l.Z)(t.NORMAL_OCT16P)){n=e.getPropertyArray("NORMAL_OCT16P",c.Z.UNSIGNED_BYTE,2);const t=8;return{name:p.Z.NORMAL,semantic:p.Z.NORMAL,typedArray:n,octEncoded:!0,octEncodedZXY:!1,quantizedRange:(1<<t)-1,quantizedType:m.Z.VEC2,quantizedComponentDatatype:c.Z.UNSIGNED_BYTE,componentDatatype:c.Z.FLOAT,type:m.Z.VEC3}}return}(v);M.normals=e,M.hasNormals=M.hasNormals||(0,l.Z)(e)}if(!M.hasColors){const e=function(e){const t=e.json;let n;if((0,l.Z)(t.RGBA))return n=e.getPropertyArray("RGBA",c.Z.UNSIGNED_BYTE,4),{name:p.Z.COLOR,semantic:p.Z.COLOR,setIndex:0,typedArray:n,componentDatatype:c.Z.UNSIGNED_BYTE,type:m.Z.VEC4,normalized:!0,isRGB565:!1,isTranslucent:!0};if((0,l.Z)(t.RGB))return n=e.getPropertyArray("RGB",c.Z.UNSIGNED_BYTE,3),{name:"COLOR",semantic:p.Z.COLOR,setIndex:0,typedArray:n,componentDatatype:c.Z.UNSIGNED_BYTE,type:m.Z.VEC3,normalized:!0,isRGB565:!1,isTranslucent:!1};if((0,l.Z)(t.RGB565))return n=e.getPropertyArray("RGB565",c.Z.UNSIGNED_SHORT,1),{name:"COLOR",semantic:p.Z.COLOR,setIndex:0,typedArray:n,componentDatatype:c.Z.FLOAT,type:m.Z.VEC3,normalized:!1,isRGB565:!0,isTranslucent:!1};if((0,l.Z)(t.CONSTANT_RGBA)){const t=e.getGlobalProperty("CONSTANT_RGBA",c.Z.UNSIGNED_BYTE,4),n=t[3],i=s.Z.fromBytes(t[0],t[1],t[2],n),r=n<255;return{name:p.Z.COLOR,semantic:p.Z.COLOR,setIndex:0,constantColor:i,componentDatatype:c.Z.FLOAT,type:m.Z.VEC4,isQuantized:!1,isTranslucent:r}}return}(v);M.colors=e,M.hasColors=M.hasColors||(0,l.Z)(e),M.hasConstantColor=(0,l.Z)(M.constantColor),M.isTranslucent=(0,l.Z)(e)&&e.isTranslucent}if(!M.hasBatchIds){const e=function(e){const t=e.json;if((0,l.Z)(t.BATCH_ID)){const t=e.getPropertyArray("BATCH_ID",c.Z.UNSIGNED_SHORT,1);return{name:p.Z.FEATURE_ID,semantic:p.Z.FEATURE_ID,setIndex:0,typedArray:t,componentDatatype:c.Z.fromTypedArray(t),type:m.Z.SCALAR}}return}(v);M.batchIds=e,M.hasBatchIds=M.hasBatchIds||(0,l.Z)(e)}if(M.hasBatchIds){const e=v.getGlobalProperty("BATCH_LENGTH");if(!(0,l.Z)(e))throw new h.Z("Global property: BATCH_LENGTH must be defined when BATCH_ID is defined.");M.batchLength=e}return(0,l.Z)(E)&&(E=new Uint8Array(E),M.batchTableJson=w,M.batchTableBinary=E),M};const Z=_}}]);