"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3714],{89425:(t,e,i)=>{i.d(e,{Z:()=>U});var o=i(28474),n=i(52351),s=i(17497),r=i(88779),a=i(54485),l=i(90332),c=i(92893),h=i(18091),d=i(98179),u=i(41656),p=i(73020),Z=i(49616),f=i(87546),g=i(74510),m=i(3334),y=i(99124),_=i(76567),v=i(48435),w=i(45943),C=i(22601),b=i(34063),O=i(87586),x=i(77533),T=i(40557),D=i(32808),P=i(9831),E=i(4052),S=i(58207),M=i(48762),k=i(73699),I=i(23803);const V=[],L=[g.Z,_.Z,y.Z,w.Z,C.Z,O.Z,x.Z,T.Z,D.Z,I.Z];function R(t,e){this.entity=t,this.scene=e;const i=new Array(L.length),o=new c.Z;function n(t){o.raiseEvent(t)}const s=new h.Z;for(let o=0;o<i.length;o++){const r=new L[o](t,e);s.add(r.geometryChanged,n),i[o]=r}this.updaters=i,this.geometryChanged=o,this.eventHelper=s,this._removeEntitySubscription=t.definitionChanged.addEventListener(R.prototype._onEntityPropertyChanged,this)}function N(t,e,i,n){s.Z.defined("scene",t),s.Z.defined("entityCollection",e),i=(0,r.Z)(i,t.primitives),n=(0,r.Z)(n,t.groundPrimitives),this._scene=t,this._primitives=i,this._groundPrimitives=n,this._entityCollection=void 0,this._addedObjects=new o.Z,this._removedObjects=new o.Z,this._changedObjects=new o.Z;const a=Z.Z.NUMBER_OF_SHADOW_MODES;this._outlineBatches=new Array(2*a),this._closedColorBatches=new Array(2*a),this._closedMaterialBatches=new Array(2*a),this._openColorBatches=new Array(2*a),this._openMaterialBatches=new Array(2*a);const l=b.Z.supportsMaterialsforEntitiesOnTerrain(t);let c;for(this._supportsMaterialsforEntitiesOnTerrain=l,c=0;c<a;++c)this._outlineBatches[c]=new k.Z(i,t,c,!1),this._outlineBatches[a+c]=new k.Z(i,t,c,!0),this._closedColorBatches[c]=new P.Z(i,p.Z,void 0,!0,c,!0),this._closedColorBatches[a+c]=new P.Z(i,p.Z,void 0,!0,c,!1),this._closedMaterialBatches[c]=new E.Z(i,u.Z,void 0,!0,c,!0),this._closedMaterialBatches[a+c]=new E.Z(i,u.Z,void 0,!0,c,!1),this._openColorBatches[c]=new P.Z(i,p.Z,void 0,!1,c,!0),this._openColorBatches[a+c]=new P.Z(i,p.Z,void 0,!1,c,!1),this._openMaterialBatches[c]=new E.Z(i,u.Z,void 0,!1,c,!0),this._openMaterialBatches[a+c]=new E.Z(i,u.Z,void 0,!1,c,!1);const h=d.Z.NUMBER_OF_CLASSIFICATION_TYPES,f=new Array(h),g=[];if(l)for(c=0;c<h;++c)g.push(new M.Z(n,c,u.Z)),f[c]=new S.Z(n,c);else for(c=0;c<h;++c)f[c]=new S.Z(n,c);this._groundColorBatches=f,this._groundMaterialBatches=g,this._dynamicBatch=new v.Z(i,n),this._batches=this._outlineBatches.concat(this._closedColorBatches,this._closedMaterialBatches,this._openColorBatches,this._openMaterialBatches,this._groundColorBatches,this._groundMaterialBatches,this._dynamicBatch),this._subscriptions=new o.Z,this._updaterSets=new o.Z,this._entityCollection=e,e.collectionChanged.addEventListener(N.prototype._onCollectionChanged,this),this._onCollectionChanged(e,e.values,V)}R.prototype._onEntityPropertyChanged=function(t,e,i,o){const n=this.updaters;for(let s=0;s<n.length;s++)n[s]._onEntityPropertyChanged(t,e,i,o)},R.prototype.forEach=function(t){const e=this.updaters;for(let i=0;i<e.length;i++)t(e[i])},R.prototype.destroy=function(){this.eventHelper.removeAll();const t=this.updaters;for(let e=0;e<t.length;e++)t[e].destroy();this._removeEntitySubscription(),(0,l.Z)(this)},N.prototype.update=function(t){s.Z.defined("time",t);const e=this._addedObjects,i=e.values,o=this._removedObjects,n=o.values,r=this._changedObjects,a=r.values;let l,c,h,d;const u=this;for(l=a.length-1;l>-1;l--)c=a[l],h=c.id,d=this._updaterSets.get(h),d.entity===c?d.forEach((function(e){u._removeUpdater(e),u._insertUpdaterIntoBatch(t,e)})):(n.push(c),i.push(c));for(l=n.length-1;l>-1;l--)c=n[l],h=c.id,d=this._updaterSets.get(h),d.forEach(this._removeUpdater.bind(this)),d.destroy(),this._updaterSets.remove(h),this._subscriptions.get(h)(),this._subscriptions.remove(h);for(l=i.length-1;l>-1;l--)c=i[l],h=c.id,d=new R(c,this._scene),this._updaterSets.set(h,d),d.forEach((function(e){u._insertUpdaterIntoBatch(t,e)})),this._subscriptions.set(h,d.geometryChanged.addEventListener(N._onGeometryChanged,this));e.removeAll(),o.removeAll(),r.removeAll();let p=!0;const Z=this._batches,f=Z.length;for(l=0;l<f;l++)p=Z[l].update(t)&&p;return p};const B=[],A=new n.Z;N.prototype.getBoundingSphere=function(t,e){s.Z.defined("entity",t),s.Z.defined("result",e);const i=B,o=A;let r=0,a=f.Z.DONE;const l=this._batches,c=l.length,h=t.id,d=this._updaterSets.get(h).updaters;for(let t=0;t<d.length;t++){const e=d[t];for(let t=0;t<c;t++){if(a=l[t].getBoundingSphere(e,o),a===f.Z.PENDING)return f.Z.PENDING;a===f.Z.DONE&&(i[r]=n.Z.clone(o,i[r]),r++)}}return 0===r?f.Z.FAILED:(i.length=r,n.Z.fromBoundingSpheres(i,e),f.Z.DONE)},N.prototype.isDestroyed=function(){return!1},N.prototype.destroy=function(){let t;this._entityCollection.collectionChanged.removeEventListener(N.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const e=this._batches;let i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();const o=this._subscriptions.values;for(i=o.length,t=0;t<i;t++)o[t]();this._subscriptions.removeAll();const n=this._updaterSets.values;for(i=n.length,t=0;t<i;t++)n[t].destroy();return this._updaterSets.removeAll(),(0,l.Z)(this)},N.prototype._removeUpdater=function(t){const e=this._batches,i=e.length;for(let o=0;o<i;o++)e[o].remove(t)},N.prototype._insertUpdaterIntoBatch=function(t,e){if(e.isDynamic)return void this._dynamicBatch.add(t,e);let i;(e.outlineEnabled||e.fillEnabled)&&(i=e.shadowsProperty.getValue(t));const o=Z.Z.NUMBER_OF_SHADOW_MODES;if(e.outlineEnabled&&((0,a.Z)(e.terrainOffsetProperty)?this._outlineBatches[o+i].add(t,e):this._outlineBatches[i].add(t,e)),e.fillEnabled)if(e.onTerrain){const i=e.classificationTypeProperty.getValue(t);e.fillMaterialProperty instanceof m.Z?this._groundColorBatches[i].add(t,e):this._groundMaterialBatches[i].add(t,e)}else e.isClosed?e.fillMaterialProperty instanceof m.Z?(0,a.Z)(e.terrainOffsetProperty)?this._closedColorBatches[o+i].add(t,e):this._closedColorBatches[i].add(t,e):(0,a.Z)(e.terrainOffsetProperty)?this._closedMaterialBatches[o+i].add(t,e):this._closedMaterialBatches[i].add(t,e):e.fillMaterialProperty instanceof m.Z?(0,a.Z)(e.terrainOffsetProperty)?this._openColorBatches[o+i].add(t,e):this._openColorBatches[i].add(t,e):(0,a.Z)(e.terrainOffsetProperty)?this._openMaterialBatches[o+i].add(t,e):this._openMaterialBatches[i].add(t,e)},N._onGeometryChanged=function(t){const e=this._removedObjects,i=this._changedObjects,o=t.entity,n=o.id;(0,a.Z)(e.get(n))||(0,a.Z)(i.get(n))||i.set(n,o)},N.prototype._onCollectionChanged=function(t,e,i){const o=this._addedObjects,n=this._removedObjects,s=this._changedObjects;let r,a,l;for(r=i.length-1;r>-1;r--)l=i[r],a=l.id,o.remove(a)||(n.set(a,l),s.remove(a));for(r=e.length-1;r>-1;r--)l=e[r],a=l.id,n.remove(a)?s.set(a,l):o.set(a,l)};const U=N},12031:(t,e,i)=>{i.d(e,{Z:()=>ut});var o=i(59015),n=i(93517),s=i(1249),r=i(14495),a=i(6785),l=i(93737),c=i(88779),h=i(58587),d=i(54485),u=i(20176),p=i(92893),Z=i(18926),f=i(97262),g=i(14633),m=i(90914),y=i(67197),_=i(21514),v=i(78368),w=i(99842),C=i(16272),b=i(72293),O=i(36164),x=i(49824),T=i(63804),D=i(53188),P=i(9234),E=i(27979),S=i(58740),M=i(61551),k=i(58585),I=i(13056),V=i(37e3),L=i(47955),R=i(21144);let N;"undefined"!=typeof DOMParser&&(N=new DOMParser);const B=new T.Z({stripPrefix:!1,email:!1,replaceFn:function(t,e){if(!e.protocolUrlMatch)return!1}}),A=2414016,U=16093e3,H={gpx:[null,void 0,"http://www.topografix.com/GPX/1/1"]};function F(t,e){let i=q(t,"id");i=(0,d.Z)(i)?i:(0,l.Z)();return e.getOrCreateEntity(i)}function W(t){const e=G(t,"lon"),i=G(t,"lat"),o=$(t,"ele",H.gpx);return n.Z.fromDegrees(e,i,o)}function G(t,e){if(!(0,d.Z)(t))return;const i=t.getAttribute(e);if(null!==i){const t=parseFloat(i);return isNaN(t)?void 0:t}}function q(t,e){if(!(0,d.Z)(t))return;const i=t.getAttribute(e);return null!==i?i:void 0}function z(t,e,i){if(!(0,d.Z)(t))return;const o=t.childNodes,n=o.length;for(let t=0;t<n;t++){const n=o[t];if(n.localName===e&&-1!==i.indexOf(n.namespaceURI))return n}}function j(t,e,i){if(!(0,d.Z)(t))return;const o=[],n=t.getElementsByTagName(e),s=n.length;for(let t=0;t<s;t++){const s=n[t];s.localName===e&&-1!==i.indexOf(s.namespaceURI)&&o.push(s)}return o}function $(t,e,i){const o=z(t,e,i);if((0,d.Z)(o)){const t=parseFloat(o.textContent);return isNaN(t)?void 0:t}}function K(t,e,i){const o=z(t,e,i);if((0,d.Z)(o))return o.textContent.trim()}function Y(t){const e=new D.Z;return e.width=32,e.height=32,e.scaleByDistance=new g.Z(A,1,U,.1),e.pixelOffsetScaleByDistance=new g.Z(A,1,U,.1),e.verticalOrigin=new P.Z(x.Z.BOTTOM),e.image=t,e}function X(t){const e=new V.Z;return e.width=4,e.material=new L.Z,e.material.color=(0,d.Z)(t)?t:a.Z.RED,e.material.outlineWidth=2,e.material.outlineColor=a.Z.BLACK,e}const J={time:{text:"Time",tag:"time"},comment:{text:"Comment",tag:"cmt"},description:{text:"Description",tag:"desc"},source:{text:"Source",tag:"src"},number:{text:"GPS track/route number",tag:"number"},type:{text:"Type",tag:"type"}};let Q;function tt(t,e){let i,o="";const n=Object.keys(J),s=n.length;for(i=0;i<s;i++){const e=n[i],s=J[e];s.value=(0,c.Z)(K(t,s.tag,H.gpx),""),(0,d.Z)(s.value)&&""!==s.value&&(o=`${o}<p>${s.text}: ${s.value}</p>`)}if(!(0,d.Z)(o)||""===o)return;o=B.link(o),Q.innerHTML=o;const r=Q.querySelectorAll("a");for(i=0;i<r.length;i++)r[i].setAttribute("target","_blank");const l=a.Z.WHITE,h=a.Z.BLACK;let u='<div class="cesium-infoBox-description-lighter" style="';return u+="overflow:auto;",u+="word-wrap:break-word;",u+=`background-color:${l.toCssColorString()};`,u+=`color:${h.toCssColorString()};`,u+='">',u+=`${Q.innerHTML}</div>`,Q.innerHTML="",u}function et(t,e,i,n){const s=W(e),r=F(e,i);r.position=s;const l=(0,d.Z)(n.waypointImage)?n.waypointImage:t._pinBuilder.fromMakiIconId("marker",a.Z.RED,32);r.billboard=Y(l);const c=K(e,"name",H.gpx);r.name=c,r.label=function(){const t=new I.Z;return t.translucencyByDistance=new g.Z(3e6,1,5e6,0),t.pixelOffset=new o.Z(17,0),t.horizontalOrigin=b.Z.LEFT,t.font="16px sans-serif",t.style=O.Z.FILL_AND_OUTLINE,t}(),r.label.text=c,r.description=tt(e),n.clampToGround&&(r.billboard.heightReference=C.Z.CLAMP_TO_GROUND,r.label.heightReference=C.Z.CLAMP_TO_GROUND)}function it(t){const e={positions:[],times:[]},i=j(t,"trkpt",H.gpx);let o;for(let t=0;t<i.length;t++){const n=W(i[t]);e.positions.push(n),o=K(i[t],"time",H.gpx),(0,d.Z)(o)&&e.times.push(f.Z.fromIso8601(o))}return e}function ot(t){const e=z(t,"author",H.gpx);if((0,d.Z)(e)){const t={name:K(e,"name",H.gpx),email:nt(e),link:st(e)};if((0,d.Z)(t.name)||(0,d.Z)(t.email)||(0,d.Z)(t.link))return t}}function nt(t){const e=z(t,"email",H.gpx);if((0,d.Z)(e)){return`${K(e,"id",H.gpx)}@${K(e,"domain",H.gpx)}`}}function st(t){const e=z(t,"link",H.gpx);if((0,d.Z)(e)){const t={href:q(e,"href"),text:K(e,"text",H.gpx),mimeType:K(e,"type",H.gpx)};if((0,d.Z)(t.href)||(0,d.Z)(t.text)||(0,d.Z)(t.mimeType))return t}}function rt(t){const e=z(t,"copyright",H.gpx);if((0,d.Z)(e)){const t={author:q(e,"author"),year:K(e,"year",H.gpx),license:K(e,"license",H.gpx)};if((0,d.Z)(t.author)||(0,d.Z)(t.year)||(0,d.Z)(t.license))return t}}function at(t){const e=z(t,"bounds",H.gpx);if((0,d.Z)(e)){const t={minLat:$(e,"minlat",H.gpx),maxLat:$(e,"maxlat",H.gpx),minLon:$(e,"minlon",H.gpx),maxLon:$(e,"maxlon",H.gpx)};if((0,d.Z)(t.minLat)||(0,d.Z)(t.maxLat)||(0,d.Z)(t.minLon)||(0,d.Z)(t.maxLon))return t}}"undefined"!=typeof document&&(Q=document.createElement("div"));const lt={wpt:et,rte:function(t,e,i,o){const n=F(e,i);n.description=tt(e);const s=j(e,"rtept",H.gpx),r=new Array(s.length);for(let e=0;e<s.length;e++)et(t,s[e],i,o),r[e]=W(s[e]);n.polyline=X(o.routeColor),o.clampToGround&&(n.polyline.clampToGround=!0),n.polyline.positions=r},trk:function(t,e,i,o){const n=F(e,i);n.description=tt(e);const s=j(e,"trkseg",H.gpx);let r,l=[],c=[],h=!0;const u=new R.Z;for(let t=0;t<s.length;t++)r=it(s[t]),l=l.concat(r.positions),r.times.length>0?(c=c.concat(r.times),u.addSamples(c,l),h=h&&!0):h=!1;if(h){const e=(0,d.Z)(o.waypointImage)?o.waypointImage:t._pinBuilder.fromMakiIconId("marker",a.Z.RED,32);n.billboard=Y(e),n.position=u,o.clampToGround&&(n.billboard.heightReference=C.Z.CLAMP_TO_GROUND),n.availability=new w.Z,n.availability.addInterval(new v.Z({start:c[0],stop:c[c.length-1]}))}n.polyline=X(o.trackColor),n.polyline.positions=l,o.clampToGround&&(n.polyline.clampToGround=!0)}};function ct(t,e,i){const o=t._entityCollection;o.removeAll();const n=e.documentElement,a=q(n,"version"),l=q(n,"creator");let c;const h=function(t){const e=z(t,"metadata",H.gpx);if((0,d.Z)(e)){const t={name:K(e,"name",H.gpx),desc:K(e,"desc",H.gpx),author:ot(e),copyright:rt(e),link:st(e),time:K(e,"time",H.gpx),keywords:K(e,"keywords",H.gpx),bounds:at(e)};if((0,d.Z)(t.name)||(0,d.Z)(t.desc)||(0,d.Z)(t.author)||(0,d.Z)(t.copyright)||(0,d.Z)(t.link)||(0,d.Z)(t.time)||(0,d.Z)(t.keywords)||(0,d.Z)(t.bounds))return t}}(n);let u;(0,d.Z)(h)&&(c=h.name),"gpx"===n.localName&&function(t,e,i,o){const n=Object.keys(lt),s=n.length;for(let r=0;r<s;r++){const s=n[r],a=lt[s],l=e.childNodes,c=l.length;for(let e=0;e<c;e++){const n=l[e];n.localName===s&&-1!==H.gpx.indexOf(n.namespaceURI)&&a(t,n,i,o)}}}(t,n,o,i);const p=o.computeAvailability();let g=p.start,m=p.stop;const y=f.Z.equals(g,Z.Z.MINIMUM_VALUE),_=f.Z.equals(m,Z.Z.MAXIMUM_VALUE);if(!y||!_){let t;y&&(t=new Date,t.setHours(0,0,0,0),g=f.Z.fromDate(t)),_&&(t=new Date,t.setHours(24,0,0,0),m=f.Z.fromDate(t)),u=new S.Z,u.startTime=g,u.stopTime=m,u.currentTime=f.Z.clone(g),u.clockRange=s.Z.LOOP_STOP,u.clockStep=r.Z.SYSTEM_CLOCK_MULTIPLIER,u.multiplier=Math.round(Math.min(Math.max(f.Z.secondsDifference(m,g)/60,1),31556900))}let v=!1;return t._name!==c&&(t._name=c,v=!0),t._creator!==l&&(t._creator=l,v=!0),function(t,e){if(!(0,d.Z)(t)&&!(0,d.Z)(e))return!1;if((0,d.Z)(t)&&(0,d.Z)(e))return t.name!==e.name||t.dec!==e.desc||t.src!==e.src||t.author!==e.author||t.copyright!==e.copyright||t.link!==e.link||t.time!==e.time||t.bounds!==e.bounds;return!0}(t._metadata,h)&&(t._metadata=h,v=!0),t._version!==a&&(t._version=a,v=!0),u!==t._clock&&(v=!0,t._clock=u),v&&t._changed.raiseEvent(t),E.Z.setLoading(t,!1),t}function ht(t,e,i,o){o=(0,c.Z)(o,c.Z.EMPTY_OBJECT);let n=i;if("string"==typeof i||i instanceof y.Z){n=(i=y.Z.createIfNeeded(i)).fetchBlob();const e=t._resourceCredits,o=i.credits;if((0,d.Z)(o)){const t=o.length;for(let i=0;i<t;i++)e.push(o[i])}}return Promise.resolve(n).then((function(e){return e instanceof Blob?function(t){const e=(0,h.Z)(),i=new FileReader;return i.addEventListener("load",(function(){e.resolve(i.result)})),i.addEventListener("error",(function(){e.reject(i.error)})),i.readAsText(t),e.promise}(e).then((function(e){let i,n;try{i=N.parseFromString(e,"application/xml")}catch(t){n=t.toString()}if((0,d.Z)(n)||i.body||"parsererror"===i.documentElement.tagName){let t=(0,d.Z)(n)?n:i.documentElement.firstChild.nodeValue;throw t||(t=i.body.innerText),new _.Z(t)}return ct(t,i,o)})):ct(t,e,o)})).catch((function(e){return t._error.raiseEvent(t,e),Promise.reject(e)}))}function dt(){this._changed=new p.Z,this._error=new p.Z,this._loading=new p.Z,this._clock=void 0,this._entityCollection=new k.Z,this._entityCluster=new M.Z,this._name=void 0,this._version=void 0,this._creator=void 0,this._metadata=void 0,this._isLoading=!1,this._pinBuilder=new m.Z}dt.load=function(t,e){return(new dt).load(t,e)},Object.defineProperties(dt.prototype,{name:{get:function(){return this._name}},version:{get:function(){return this._version}},creator:{get:function(){return this._creator}},metadata:{get:function(){return this._metadata}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(t){this._entityCollection.show=t}},clustering:{get:function(){return this._entityCluster},set:function(t){if(!(0,d.Z)(t))throw new u.Z("value must be defined.");this._entityCluster=t}}}),dt.prototype.update=function(t){return!0},dt.prototype.load=function(t,e){if(!(0,d.Z)(t))throw new u.Z("data is required.");e=(0,c.Z)(e,c.Z.EMPTY_OBJECT),E.Z.setLoading(this,!0);const i=this._name,o=this;return ht(this,this._entityCollection,t,e).then((function(){let t;const e=o._entityCollection.computeAvailability();let n=e.start,a=e.stop;const l=f.Z.equals(n,Z.Z.MINIMUM_VALUE),c=f.Z.equals(a,Z.Z.MAXIMUM_VALUE);if(!l||!c){let e;l&&(e=new Date,e.setHours(0,0,0,0),n=f.Z.fromDate(e)),c&&(e=new Date,e.setHours(24,0,0,0),a=f.Z.fromDate(e)),t=new S.Z,t.startTime=n,t.stopTime=a,t.currentTime=f.Z.clone(n),t.clockRange=s.Z.LOOP_STOP,t.clockStep=r.Z.SYSTEM_CLOCK_MULTIPLIER,t.multiplier=Math.round(Math.min(Math.max(f.Z.secondsDifference(a,n)/60,1),31556900))}let h=!1;return t!==o._clock&&(o._clock=t,h=!0),i!==o._name&&(h=!0),h&&o._changed.raiseEvent(o),E.Z.setLoading(o,!1),o})).catch((function(t){return E.Z.setLoading(o,!1),o._error.raiseEvent(o,t),Promise.reject(t)}))};const ut=dt},34855:(t,e,i)=>{i.d(e,{Z:()=>f});var o=i(59015),n=i(6785),s=i(88779),r=i(54485),a=i(92893),l=i(37105),c=i(19157);const h=n.Z.WHITE,d=new o.Z(8,8),u=new o.Z(0,0),p=new o.Z(1,1);function Z(t){t=(0,s.Z)(t,s.Z.EMPTY_OBJECT),this._definitionChanged=new a.Z,this._color=void 0,this._colorSubscription=void 0,this._cellAlpha=void 0,this._cellAlphaSubscription=void 0,this._lineCount=void 0,this._lineCountSubscription=void 0,this._lineThickness=void 0,this._lineThicknessSubscription=void 0,this._lineOffset=void 0,this._lineOffsetSubscription=void 0,this.color=t.color,this.cellAlpha=t.cellAlpha,this.lineCount=t.lineCount,this.lineThickness=t.lineThickness,this.lineOffset=t.lineOffset}Object.defineProperties(Z.prototype,{isConstant:{get:function(){return c.Z.isConstant(this._color)&&c.Z.isConstant(this._cellAlpha)&&c.Z.isConstant(this._lineCount)&&c.Z.isConstant(this._lineThickness)&&c.Z.isConstant(this._lineOffset)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,l.Z)("color"),cellAlpha:(0,l.Z)("cellAlpha"),lineCount:(0,l.Z)("lineCount"),lineThickness:(0,l.Z)("lineThickness"),lineOffset:(0,l.Z)("lineOffset")}),Z.prototype.getType=function(t){return"Grid"},Z.prototype.getValue=function(t,e){return(0,r.Z)(e)||(e={}),e.color=c.Z.getValueOrClonedDefault(this._color,t,h,e.color),e.cellAlpha=c.Z.getValueOrDefault(this._cellAlpha,t,.1),e.lineCount=c.Z.getValueOrClonedDefault(this._lineCount,t,d,e.lineCount),e.lineThickness=c.Z.getValueOrClonedDefault(this._lineThickness,t,p,e.lineThickness),e.lineOffset=c.Z.getValueOrClonedDefault(this._lineOffset,t,u,e.lineOffset),e},Z.prototype.equals=function(t){return this===t||t instanceof Z&&c.Z.equals(this._color,t._color)&&c.Z.equals(this._cellAlpha,t._cellAlpha)&&c.Z.equals(this._lineCount,t._lineCount)&&c.Z.equals(this._lineThickness,t._lineThickness)&&c.Z.equals(this._lineOffset,t._lineOffset)};const f=Z},47106:(t,e,i)=>{i.d(e,{Z:()=>m});var o=i(17497),n=i(88779),s=i(54485),r=i(20176),a=i(97029),l=i(53513),c=i(63333),h=i(16272),d=i(9088),u=i(9234),p=i(31969),Z=i(23824);const f=new u.Z(0);function g(t){p.Z.call(this,t),this._zIndex=0,this._terrainOffsetProperty=void 0}(0,s.Z)(Object.create)&&(g.prototype=Object.create(p.Z.prototype),g.prototype.constructor=g),Object.defineProperties(g.prototype,{zIndex:{get:function(){return this._zIndex}},terrainOffsetProperty:{get:function(){return this._terrainOffsetProperty}}}),g.prototype._isOnTerrain=function(t,e){return this._fillEnabled&&!(0,s.Z)(e.height)&&!(0,s.Z)(e.extrudedHeight)&&c.Z.isSupported(this._scene)},g.prototype._getIsClosed=function(t){const e=t.height,i=t.extrudedHeight;return 0===e||(0,s.Z)(i)&&i!==e},g.prototype._computeCenter=r.Z.throwInstantiationError,g.prototype._onEntityPropertyChanged=function(t,e,i,o){if(p.Z.prototype._onEntityPropertyChanged.call(this,t,e,i,o),-1===this._observedPropertyNames.indexOf(e))return;const r=this._entity[this._geometryPropertyName];if(!(0,s.Z)(r))return;(0,s.Z)(r.zIndex)&&((0,s.Z)(r.height)||(0,s.Z)(r.extrudedHeight))&&(0,l.Z)(l.Z.geometryZIndex),this._zIndex=(0,n.Z)(r.zIndex,f),(0,s.Z)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0);const a=r.heightReference,c=r.extrudedHeightReference;if((0,s.Z)(a)||(0,s.Z)(c)){const t=new d.Z(this._computeCenter.bind(this),!this._dynamic);this._terrainOffsetProperty=new Z.Z(this._scene,t,a,c)}},g.prototype.destroy=function(){(0,s.Z)(this._terrainOffsetProperty)&&(this._terrainOffsetProperty.destroy(),this._terrainOffsetProperty=void 0),p.Z.prototype.destroy.call(this)},g.getGeometryHeight=function(t,e){if(o.Z.defined("heightReference",e),(0,s.Z)(t))return e!==h.Z.CLAMP_TO_GROUND?t:0;e!==h.Z.NONE&&(0,l.Z)(l.Z.geometryHeightReference)},g.getGeometryExtrudedHeight=function(t,e){if(o.Z.defined("extrudedHeightReference",e),(0,s.Z)(t))return e!==h.Z.CLAMP_TO_GROUND?t:g.CLAMP_TO_GROUND;e!==h.Z.NONE&&(0,l.Z)(l.Z.geometryExtrudedHeightReference)},g.CLAMP_TO_GROUND="clamp",g.computeGeometryOffsetAttribute=function(t,e,i,o){(0,s.Z)(t)&&(0,s.Z)(e)||(e=h.Z.NONE),(0,s.Z)(i)&&(0,s.Z)(o)||(o=h.Z.NONE);let n=0;return e!==h.Z.NONE&&n++,o===h.Z.RELATIVE_TO_GROUND&&n++,2===n?a.Z.ALL:1===n?a.Z.TOP:void 0};const m=g},30607:(t,e,i)=>{i.d(e,{Z:()=>p});var o=i(59015),n=i(6785),s=i(88779),r=i(54485),a=i(92893),l=i(37105),c=i(19157);const h=new o.Z(1,1),d=n.Z.WHITE;function u(t){t=(0,s.Z)(t,s.Z.EMPTY_OBJECT),this._definitionChanged=new a.Z,this._image=void 0,this._imageSubscription=void 0,this._repeat=void 0,this._repeatSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._transparent=void 0,this._transparentSubscription=void 0,this.image=t.image,this.repeat=t.repeat,this.color=t.color,this.transparent=t.transparent}Object.defineProperties(u.prototype,{isConstant:{get:function(){return c.Z.isConstant(this._image)&&c.Z.isConstant(this._repeat)}},definitionChanged:{get:function(){return this._definitionChanged}},image:(0,l.Z)("image"),repeat:(0,l.Z)("repeat"),color:(0,l.Z)("color"),transparent:(0,l.Z)("transparent")}),u.prototype.getType=function(t){return"Image"},u.prototype.getValue=function(t,e){return(0,r.Z)(e)||(e={}),e.image=c.Z.getValueOrUndefined(this._image,t),e.repeat=c.Z.getValueOrClonedDefault(this._repeat,t,h,e.repeat),e.color=c.Z.getValueOrClonedDefault(this._color,t,d,e.color),c.Z.getValueOrDefault(this._transparent,t,false)&&(e.color.alpha=Math.min(.99,e.color.alpha)),e},u.prototype.equals=function(t){return this===t||t instanceof u&&c.Z.equals(this._image,t._image)&&c.Z.equals(this._repeat,t._repeat)&&c.Z.equals(this._color,t._color)&&c.Z.equals(this._transparent,t._transparent)};const p=u},90002:(t,e,i)=>{i.d(e,{Z:()=>o});const o=function(t,e){this.position=t,this.headingPitchRoll=e}},12025:(t,e,i)=>{i.d(e,{Z:()=>Re});var o=i(85162),n=i(28474),s=i(23114),r=i(25914),a=i(59015),l=i(93517),c=i(66866),h=i(1249),d=i(14495),u=i(55077),p=i(6785),Z=i(93737),f=i(78505),g=i(88779),m=i(58587),y=i(54485),_=i(20176),v=i(99996),w=i(92893),C=i(60262),b=i(79246),O=i(41780),x=i(66246),T=i(55264),D=i(18926),P=i(97262),E=i(22874),S=i(14633),M=i(69100),k=i(53513),I=i(90914),V=i(46807),L=i(67823),R=i(34152),N=i(67197),B=i(21514),A=i(78368),U=i(99842),H=i(16272),F=i(72293),W=i(36164),G=i(18061),q=i(63804),z=i(42113),j=i(93191),$=i(52460),K=i(53188),Y=i(36655),X=i(27979),J=i(58740),Q=i(34063),tt=i(61551),et=i(58585),it=i(90002),ot=i(29371),nt=i(8158),st=i(54262),rt=i(62840),at=i(13056),lt=i(83040),ct=i(56728),ht=i(37e3),dt=i(17198),ut=i(25163),pt=i(39351),Zt=i(21144),ft=i(20909),gt=i(79773),mt=i(29711);const yt={avi:"video/x-msvideo",bmp:"image/bmp",bz2:"application/x-bzip2",chm:"application/vnd.ms-htmlhelp",css:"text/css",csv:"text/csv",doc:"application/msword",dvi:"application/x-dvi",eps:"application/postscript",flv:"video/x-flv",gif:"image/gif",gz:"application/x-gzip",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",jnlp:"application/x-java-jnlp-file",jpeg:"image/jpeg",jpg:"image/jpeg",m3u:"audio/x-mpegurl",m4v:"video/mp4",mathml:"application/mathml+xml",mid:"audio/midi",midi:"audio/midi",mov:"video/quicktime",mp3:"audio/mpeg",mp4:"video/mp4",mp4v:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",ogg:"application/ogg",pdf:"application/pdf",png:"image/png",pps:"application/vnd.ms-powerpoint",ppt:"application/vnd.ms-powerpoint",ps:"application/postscript",qt:"video/quicktime",rdf:"application/rdf+xml",rss:"application/rss+xml",rtf:"application/rtf",svg:"image/svg+xml",swf:"application/x-shockwave-flash",text:"text/plain",tif:"image/tiff",tiff:"image/tiff",txt:"text/plain",wav:"audio/x-wav",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",xml:"application/xml",zip:"application/zip",detectFromFilename:function(t){let e=t.toLowerCase();return e=(0,C.Z)(e),yt[e]}};let _t;"undefined"!=typeof DOMParser&&(_t=new DOMParser);const vt=new q.Z({stripPrefix:!1,email:!1,replaceFn:function(t){if(!t.protocolUrlMatch)return!1}}),wt=32,Ct=2414016,bt=16093e3,Ot=[null,void 0,"http://www.opengis.net/kml/2.2","http://earth.google.com/kml/2.2","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.0"],xt=["http://www.google.com/kml/ext/2.2"],Tt={kml:Ot,gx:xt,atom:["http://www.w3.org/2005/Atom"],kmlgx:Ot.concat(xt)},Dt={Document:Ze,Folder:function(t,e,i,o){const n=pe(t,e,i),s=(0,u.Z)(i);s.parentEntity=n.entity,Ze(t,e,s,o)},Placemark:function(t,e,i,o){const n=pe(t,e,i),s=n.entity,r=n.styleEntity;let a=!1;const l=e.childNodes;for(let e=0,o=l.length;e<o&&!a;e++){const o=l.item(e),n=de[o.localName];(0,y.Z)(n)&&(n(t,i.entityCollection,o,s,r,s.id),a=!0)}a||(s.merge(r),ae(t,s,r))},NetworkLink:function(t,e,i,o){const n=pe(t,e,i).entity,s=i.sourceResource,r=i.uriResolver;let a=Ut(e,"Link",Tt.kml);(0,y.Z)(a)||(a=Ut(e,"Url",Tt.kml));if((0,y.Z)(a)){let e,l,c=Gt(a,"href",Tt.kml);if((0,y.Z)(c)){let h=c;if(c=zt(c,s,i.uriResolver),/^data:/.test(c.getUrlComponent()))/\.kmz/i.test(s.getUrlComponent())||(h=s.getDerivedResource({url:h}));else{h=c.clone(),e=Gt(a,"viewRefreshMode",Tt.kml),l=(0,g.Z)(Gt(a,"viewBoundScale",Tt.kml),1);const i="onStop"===e?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",o=(0,g.Z)(Gt(a,"viewFormat",Tt.kml),i),n=Gt(a,"httpQuery",Tt.kml);(0,y.Z)(o)&&c.setQueryParameters((0,L.Z)(be(o))),(0,y.Z)(n)&&c.setQueryParameters((0,L.Z)(be(n)));const s=t._ellipsoid;Pe(c,t.camera,t.canvas,l,t._lastCameraView.bbox,s)}const d={sourceUri:h,uriResolver:r,context:n.id,screenOverlayContainer:i.screenOverlayContainer},u=new et.Z,p=Me(t,u,c,d).then((function(i){const o=t._entityCollection,s=u.values;o.suspendEvents();for(let t=0;t<s.length;t++){const e=s[t];(0,y.Z)(e.parent)||(e.parent=n,Ie(e)),o.add(e)}o.resumeEvents();const r=Gt(a,"refreshMode",Tt.kml);let h=(0,g.Z)(Wt(a,"refreshInterval",Tt.kml),0);if("onInterval"===r&&h>0||"onExpire"===r||"onStop"===e){const e=Ut(i,"NetworkLinkControl",Tt.kml),o=(0,y.Z)(e),s=P.Z.now(),d={id:(0,Z.Z)(),href:c,cookie:{},lastUpdated:s,updating:!1,entity:n,viewBoundScale:l,needsUpdate:!1,cameraUpdateTime:s};let u=0;if(o&&(d.cookie=(0,L.Z)((0,g.Z)(Gt(e,"cookie",Tt.kml),"")),u=(0,g.Z)(Wt(e,"minRefreshPeriod",Tt.kml),0)),"onInterval"===r)o&&(h=Math.max(u,h)),d.refreshMode=ve,d.time=h;else if("onExpire"===r){let t;if(o&&(t=Gt(e,"expires",Tt.kml)),(0,y.Z)(t))try{const e=P.Z.fromIso8601(t),i=P.Z.secondsDifference(e,s);i>0&&i<u&&P.Z.addSeconds(s,u,e),d.refreshMode=we,d.time=e}catch(t){(0,k.Z)("kml-refreshMode-onInterval-onExpire","KML - NetworkLinkControl expires is not a valid date")}else(0,k.Z)("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element")}else(0,y.Z)(t.camera)?(d.refreshMode=Ce,d.time=(0,g.Z)(Wt(a,"viewRefreshTime",Tt.kml),0)):(0,k.Z)("kml-refrehMode-onStop-noCamera","A NetworkLink with viewRefreshMode=onStop requires the `camera` property to be defined.");(0,y.Z)(d.refreshMode)&&t._networkLinks.set(d.id,d)}else"onRegion"===e&&(0,k.Z)("kml-refrehMode-onRegion","KML - Unsupported viewRefreshMode: onRegion")})).catch((function(e){(0,k.Z)(`An error occured during loading ${c.url}`),t._error.raiseEvent(t,e)}));o.addPromise(p)}}},GroundOverlay:function(t,e,i,o){const n=pe(t,e,i).entity;let s,r=!1;const a=t._ellipsoid,l=Nt(Ut(e,"LatLonQuad",Tt.gx),a),c=Wt(e,"drawOrder",Tt.kml);if((0,y.Z)(l))s=Xt(),s.hierarchy=new V.Z(l),s.zIndex=c,n.polygon=s,r=!0;else{s=new ut.Z,s.zIndex=c,n.rectangle=s;const t=Ut(e,"LatLonBox",Tt.kml);if((0,y.Z)(t)){let e=Wt(t,"west",Tt.kml),i=Wt(t,"south",Tt.kml),o=Wt(t,"east",Tt.kml),n=Wt(t,"north",Tt.kml);(0,y.Z)(e)&&(e=E.Z.negativePiToPi(E.Z.toRadians(e))),(0,y.Z)(i)&&(i=E.Z.clampToLatitudeRange(E.Z.toRadians(i))),(0,y.Z)(o)&&(o=E.Z.negativePiToPi(E.Z.toRadians(o))),(0,y.Z)(n)&&(n=E.Z.clampToLatitudeRange(E.Z.toRadians(n))),s.coordinates=new R.Z(e,i,o,n);const r=Wt(t,"rotation",Tt.kml);if((0,y.Z)(r)){const t=E.Z.toRadians(r);s.rotation=t,s.stRotation=t}}}const h=Ut(e,"Icon",Tt.kml),d=Qt(h,t,i.sourceResource,i.uriResolver,!0);if((0,y.Z)(d)){r&&(0,k.Z)("kml-gx:LatLonQuad","KML - gx:LatLonQuad Icon does not support texture projection.");const t=Wt(h,"x",Tt.gx),i=Wt(h,"y",Tt.gx),o=Wt(h,"w",Tt.gx),n=Wt(h,"h",Tt.gx);((0,y.Z)(t)||(0,y.Z)(i)||(0,y.Z)(o)||(0,y.Z)(n))&&(0,k.Z)("kml-groundOverlay-xywh","KML - gx:x, gx:y, gx:w, gx:h aren't supported for GroundOverlays"),s.material=d,s.material.color=Kt(e,"color",Tt.kml),s.material.transparent=!0}else s.material=Kt(e,"color",Tt.kml);let u=Gt(e,"altitudeMode",Tt.kml);(0,y.Z)(u)?"absolute"===u?(s.height=Wt(e,"altitude",Tt.kml),s.zIndex=void 0):"clampToGround"!==u&&(0,k.Z)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${u}`):(u=Gt(e,"altitudeMode",Tt.gx),"relativeToSeaFloor"===u?((0,k.Z)("kml-altitudeMode-relativeToSeaFloor","KML - altitudeMode relativeToSeaFloor is currently not supported, treating as absolute."),s.height=Wt(e,"altitude",Tt.kml),s.zIndex=void 0):"clampToSeaFloor"===u?(0,k.Z)("kml-altitudeMode-clampToSeaFloor","KML - altitudeMode clampToSeaFloor is currently not supported, treating as clampToGround."):(0,y.Z)(u)&&(0,k.Z)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${u}`))},PhotoOverlay:_e,ScreenOverlay:function(t,e,i,o){const n=i.screenOverlayContainer;if(!(0,y.Z)(n))return;const s=i.sourceResource,r=i.uriResolver,a=Qt(Ut(e,"Icon",Tt.kml),t,s,r,!1);if(!(0,y.Z)(a))return;const l=document.createElement("img");t._screenOverlays.push(l),l.src=a.url,l.onload=function(){const t=["position: absolute"],i=Ut(e,"screenXY",Tt.kml),o=Ut(e,"overlayXY",Tt.kml),n=Ut(e,"size",Tt.kml);let s,r,a,c,h,d;(0,y.Z)(n)&&(s=Bt(n,"x"),r=Bt(n,"y"),a=At(n,"xunits"),c=At(n,"yunits"),(0,y.Z)(s)&&-1!==s&&0!==s&&("fraction"===a?h=`width: ${Math.floor(100*s)}%`:"pixels"===a&&(h=`width: ${s}px`),t.push(h)),(0,y.Z)(r)&&-1!==r&&0!==r&&("fraction"===c?d=`height: ${Math.floor(100*r)}%`:"pixels"===c&&(d=`height: ${r}px`),t.push(d))),l.style=t.join(";");let u=0,p=l.height;(0,y.Z)(o)&&(s=Bt(o,"x"),r=Bt(o,"y"),a=At(o,"xunits"),c=At(o,"yunits"),(0,y.Z)(s)&&("fraction"===a?u=s*l.width:("pixels"===a||"insetPixels"===a)&&(u=s)),(0,y.Z)(r)&&("fraction"===c?p=r*l.height:("pixels"===c||"insetPixels"===c)&&(p=r))),(0,y.Z)(i)&&(s=Bt(i,"x"),r=Bt(i,"y"),a=At(i,"xunits"),c=At(i,"yunits"),(0,y.Z)(s)&&("fraction"===a?h=`left: calc(${Math.floor(100*s)}% - ${u}px)`:"pixels"===a?h=`left: ${s-u}px`:"insetPixels"===a&&(h=`right: ${s-u}px`),t.push(h)),(0,y.Z)(r)&&("fraction"===c?d=`bottom: calc(${Math.floor(100*r)}% - ${p}px)`:"pixels"===c?d=`bottom: ${r-p}px`:"insetPixels"===c&&(d=`top: ${r-p}px`),t.push(d))),l.style=t.join(";")},n.appendChild(l)},Tour:function(t,e,i,o){const n=Gt(e,"name",Tt.kml),s=At(e,"id"),r=new nt.Z(n,s),a=Ut(e,"Playlist",Tt.gx);if(a){const e=t._ellipsoid,i=a.childNodes;for(let t=0;t<i.length;t++){const o=i[t];if(o.localName){const t=fe[o.localName];t&&t(r,o,e)}}}t._kmlTours.push(r)}};function Pt(t){this._dataSource=t,this._deferred=(0,m.Z)(),this._stack=[],this._promises=[],this._timeoutSet=!1,this._used=!1,this._started=0,this._timeThreshold=1e3}function Et(t){const e={xsi:"http://www.w3.org/2001/XMLSchema-instance"};let i,o,n,s;for(const r in e)e.hasOwnProperty(r)&&(n=RegExp(`[< ]${r}:`),s=`xmlns:${r}=`,n.test(t)&&-1===t.indexOf(s)&&((0,y.Z)(i)||(i=t.substr(0,t.indexOf("<kml")+4),o=t.substr(i.length)),i+=` ${s}"${e[r]}"`));return(0,y.Z)(i)&&(t=i+o),t}function St(t){let e=t.indexOf("xmlns:");const i=t.indexOf(">",e);let o,n,s;for(;-1!==e&&e<i;)o=t.slice(e,t.indexOf('"',e)),n=e,e=t.indexOf(o,e+1),-1!==e?(s=t.indexOf('"',t.indexOf('"',e)+1),e=(t=t.slice(0,e-1)+t.slice(s+1,t.length)).indexOf("xmlns:",n-1)):e=t.indexOf("xmlns:",n+1);return t}function Mt(t,e){const i=(0,g.Z)(yt.detectFromFilename(t.filename),"application/octet-stream");return Promise.resolve(t.getData(new j.Z.Data64URIWriter(i))).then((function(i){e[t.filename]=i}))}function kt(t,e,i,o){const n=o.keys,s=new z.Z("."),r=t.querySelectorAll(e);for(let t=0;t<r.length;t++){const a=r[t],l=a.getAttribute(i),c=new z.Z(l).absoluteTo(s).toString(),h=n.indexOf(c);if(-1!==h){const t=n[h];a.setAttribute(i,o[t]),"a"===e&&null===a.getAttribute("download")&&a.setAttribute("download",t)}}}function It(t,e,i,o){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++){const e=n[t],s=zt(e.getAttribute(i),o);e.setAttribute(i,s.url)}}function Vt(t,e,i){let o=At(t,"id");o=(0,y.Z)(o)&&0!==o.length?o:(0,Z.Z)(),(0,y.Z)(i)&&(o=i+o);let n=e.getById(o);return(0,y.Z)(n)&&(o=(0,Z.Z)(),(0,y.Z)(i)&&(o=i+o)),n=e.add(new Q.Z({id:o})),(0,y.Z)(n.kml)||(n.addProperty("kml"),n.kml=new Le),n}function Lt(t,e){return"absolute"===t||"relativeToGround"===t||"relativeToSeaFloor"===e}function Rt(t,e){if(!(0,y.Z)(t))return l.Z.fromDegrees(0,0,0,e);const i=t.match(/[^\s,\n]+/g);if(!(0,y.Z)(i))return l.Z.fromDegrees(0,0,0,e);let o=parseFloat(i[0]),n=parseFloat(i[1]),s=parseFloat(i[2]);return o=isNaN(o)?0:o,n=isNaN(n)?0:n,s=isNaN(s)?0:s,l.Z.fromDegrees(o,n,s,e)}function Nt(t,e){if(!(0,y.Z)(t))return;const i=t.textContent.match(/[^\s\n]+/g);if(!(0,y.Z)(i))return;const o=i.length,n=new Array(o);let s=0;for(let t=0;t<o;t++)n[s++]=Rt(i[t],e);return n}function Bt(t,e){if(!(0,y.Z)(t))return;const i=t.getAttribute(e);if(null!==i){const t=parseFloat(i);return isNaN(t)?void 0:t}}function At(t,e){if(!(0,y.Z)(t))return;const i=t.getAttribute(e);return null!==i?i:void 0}function Ut(t,e,i){if(!(0,y.Z)(t))return;const o=t.childNodes,n=o.length;for(let t=0;t<n;t++){const n=o[t];if(n.localName===e&&-1!==i.indexOf(n.namespaceURI))return n}}function Ht(t,e,i){if(!(0,y.Z)(t))return;const o=[],n=t.getElementsByTagNameNS("*",e),s=n.length;for(let t=0;t<s;t++){const s=n[t];s.localName===e&&-1!==i.indexOf(s.namespaceURI)&&o.push(s)}return o}function Ft(t,e,i){if(!(0,y.Z)(t))return[];const o=[],n=t.childNodes,s=n.length;for(let t=0;t<s;t++){const s=n[t];s.localName===e&&-1!==i.indexOf(s.namespaceURI)&&o.push(s)}return o}function Wt(t,e,i){const o=Ut(t,e,i);if((0,y.Z)(o)){const t=parseFloat(o.textContent);return isNaN(t)?void 0:t}}function Gt(t,e,i){const o=Ut(t,e,i);if((0,y.Z)(o))return o.textContent.trim()}function qt(t,e,i){const o=Ut(t,e,i);if((0,y.Z)(o)){const t=o.textContent.trim();return"1"===t||/^true$/i.test(t)}}function zt(t,e,i){if(!(0,y.Z)(t))return;let o;if((0,y.Z)(i)){let n=i[t=t.replace(/\\/g,"/")];if((0,y.Z)(n))o=new N.Z({url:n});else{const s=new z.Z(e.getUrlComponent());n=i[new z.Z(t).absoluteTo(s)],(0,y.Z)(n)&&(o=new N.Z({url:n}))}}return(0,y.Z)(o)||(o=e.getDerivedResource({url:t})),o}Object.defineProperties(Pt.prototype,{dataSource:{get:function(){return this._dataSource}}}),Pt.prototype.addNodes=function(t,e){this._stack.push({nodes:t,index:0,processingData:e}),this._used=!0},Pt.prototype.addPromise=function(t){this._promises.push(t)},Pt.prototype.wait=function(){const t=this._deferred;return this._used||t.resolve(),Promise.all([t.promise,Promise.all(this._promises)])},Pt.prototype.process=function(){const t=1===this._stack.length;return t&&(this._started=ke._getTimestamp()),this._process(t)},Pt.prototype._giveUpTime=function(){if(this._timeoutSet)return;this._timeoutSet=!0,this._timeThreshold=50;const t=this;setTimeout((function(){t._timeoutSet=!1,t._started=ke._getTimestamp(),t._process(!0)}),0)},Pt.prototype._nextNode=function(){const t=this._stack,e=t[t.length-1],i=e.index,o=e.nodes;if(i!==o.length)return++e.index,o[i]},Pt.prototype._pop=function(){const t=this._stack;return t.pop(),0!==t.length||(this._deferred.resolve(),!1)},Pt.prototype._process=function(t){const e=this.dataSource,i=this._stack[this._stack.length-1].processingData;let o=this._nextNode();for(;(0,y.Z)(o);){const t=Dt[o.localName];if((0,y.Z)(t)&&(-1!==Tt.kml.indexOf(o.namespaceURI)||-1!==Tt.gx.indexOf(o.namespaceURI))&&(t(e,o,i,this),this._timeoutSet||ke._getTimestamp()>this._started+this._timeThreshold))return void this._giveUpTime();o=this._nextNode()}this._pop()&&t&&this._process(!0)};const jt={maximumRed:void 0,red:void 0,maximumGreen:void 0,green:void 0,maximumBlue:void 0,blue:void 0};function $t(t,e){if(!(0,y.Z)(t)||/^\s*$/gm.test(t))return;"#"===t[0]&&(t=t.substring(1));const i=parseInt(t.substring(0,2),16)/255,o=parseInt(t.substring(2,4),16)/255,n=parseInt(t.substring(4,6),16)/255,s=parseInt(t.substring(6,8),16)/255;return e?(s>0?(jt.maximumRed=s,jt.red=void 0):(jt.maximumRed=void 0,jt.red=0),n>0?(jt.maximumGreen=n,jt.green=void 0):(jt.maximumGreen=void 0,jt.green=0),o>0?(jt.maximumBlue=o,jt.blue=void 0):(jt.maximumBlue=void 0,jt.blue=0),jt.alpha=i,p.Z.fromRandom(jt)):new p.Z(s,n,o,i)}function Kt(t,e,i){const o=Gt(t,e,i);if((0,y.Z)(o))return $t(o,"random"===Gt(t,"colorMode",i))}function Yt(){const t=new K.Z;return t.width=wt,t.height=wt,t.scaleByDistance=new S.Z(Ct,1,bt,.1),t.pixelOffsetScaleByDistance=new S.Z(Ct,1,bt,.1),t}function Xt(){const t=new ct.Z;return t.outline=!0,t.outlineColor=p.Z.WHITE,t}function Jt(){const t=new at.Z;return t.translucencyByDistance=new S.Z(3e6,1,5e6,0),t.pixelOffset=new a.Z(17,0),t.horizontalOrigin=F.Z.LEFT,t.font="16px sans-serif",t.style=W.Z.FILL_AND_OUTLINE,t}function Qt(t,e,i,o,n){let s=Gt(t,"href",Tt.kml);if(!(0,y.Z)(s)||0===s.length)return;if(0===s.indexOf("root://icons/palette-")){const e=s.charAt(21);let i=(0,g.Z)(Wt(t,"x",Tt.gx),0),o=(0,g.Z)(Wt(t,"y",Tt.gx),0);i=Math.min(i/32,7),o=7-Math.min(o/32,7);s=`https://maps.google.com/mapfiles/kml/pal${e}/icon${8*o+i}.png`}const r=zt(s,i,o);if(n){const i=Gt(t,"refreshMode",Tt.kml),o=Gt(t,"viewRefreshMode",Tt.kml);"onInterval"===i||"onExpire"===i?(0,k.Z)(`kml-refreshMode-${i}`,`KML - Unsupported Icon refreshMode: ${i}`):"onStop"!==o&&"onRegion"!==o||(0,k.Z)(`kml-refreshMode-${o}`,`KML - Unsupported Icon viewRefreshMode: ${o}`);const n=(0,g.Z)(Gt(t,"viewBoundScale",Tt.kml),1),s="onStop"===o?"BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]":"",a=(0,g.Z)(Gt(t,"viewFormat",Tt.kml),s),l=Gt(t,"httpQuery",Tt.kml);(0,y.Z)(a)&&r.setQueryParameters((0,L.Z)(be(a))),(0,y.Z)(l)&&r.setQueryParameters((0,L.Z)(be(l)));const c=e._ellipsoid;return Pe(r,e.camera,e.canvas,n,e._lastCameraView.bbox,c),r}return r}function te(t,e,i,o,n){let r=Wt(e,"scale",Tt.kml);const c=Wt(e,"heading",Tt.kml),h=Kt(e,"color",Tt.kml),d=Ut(e,"Icon",Tt.kml);let u=Qt(d,t,o,n,!1);(0,y.Z)(d)&&!(0,y.Z)(u)&&(u=!1);const p=Wt(d,"x",Tt.gx),Z=Wt(d,"y",Tt.gx),f=Wt(d,"w",Tt.gx),m=Wt(d,"h",Tt.gx),_=Ut(e,"hotSpot",Tt.kml),v=Bt(_,"x"),w=Bt(_,"y"),C=At(_,"xunits"),b=At(_,"yunits");let O,x,T=i.billboard;(0,y.Z)(T)||(T=Yt(),i.billboard=T),T.image=u,T.scale=r,T.color=h,((0,y.Z)(p)||(0,y.Z)(Z)||(0,y.Z)(f)||(0,y.Z)(m))&&(T.imageSubRegion=new s.Z(p,Z,f,m)),(0,y.Z)(c)&&0!==c&&(T.rotation=E.Z.toRadians(-c),T.alignedAxis=l.Z.UNIT_Z),r=(0,g.Z)(r,1),(0,y.Z)(v)&&("pixels"===C?O=-v*r:"insetPixels"===C?O=(v-wt)*r:"fraction"===C&&(O=-v*wt*r),O+=16*r),(0,y.Z)(w)&&("pixels"===b?x=w*r:"insetPixels"===b?x=(-w+wt)*r:"fraction"===b&&(x=w*wt*r),x-=16*r),((0,y.Z)(O)||(0,y.Z)(x))&&(T.pixelOffset=new a.Z(O,x))}function ee(t,e,i,o,n){for(let s=0,r=e.childNodes.length;s<r;s++){const r=e.childNodes.item(s);if("IconStyle"===r.localName)te(t,r,i,o,n);else if("LabelStyle"===r.localName){let t=i.label;(0,y.Z)(t)||(t=Jt(),i.label=t),t.scale=(0,g.Z)(Wt(r,"scale",Tt.kml),t.scale),t.fillColor=(0,g.Z)(Kt(r,"color",Tt.kml),t.fillColor),t.text=i.name}else if("LineStyle"===r.localName){let t=i.polyline;(0,y.Z)(t)||(t=new ht.Z,i.polyline=t),t.width=Wt(r,"width",Tt.kml),t.material=Kt(r,"color",Tt.kml),(0,y.Z)(Kt(r,"outerColor",Tt.gx))&&(0,k.Z)("kml-gx:outerColor","KML - gx:outerColor is not supported in a LineStyle"),(0,y.Z)(Wt(r,"outerWidth",Tt.gx))&&(0,k.Z)("kml-gx:outerWidth","KML - gx:outerWidth is not supported in a LineStyle"),(0,y.Z)(Wt(r,"physicalWidth",Tt.gx))&&(0,k.Z)("kml-gx:physicalWidth","KML - gx:physicalWidth is not supported in a LineStyle"),(0,y.Z)(qt(r,"labelVisibility",Tt.gx))&&(0,k.Z)("kml-gx:labelVisibility","KML - gx:labelVisibility is not supported in a LineStyle")}else if("PolyStyle"===r.localName){let t=i.polygon;(0,y.Z)(t)||(t=Xt(),i.polygon=t),t.material=(0,g.Z)(Kt(r,"color",Tt.kml),t.material),t.fill=(0,g.Z)(qt(r,"fill",Tt.kml),t.fill),t.outline=(0,g.Z)(qt(r,"outline",Tt.kml),t.outline)}else if("BalloonStyle"===r.localName){const t=(0,g.Z)($t(Gt(r,"bgColor",Tt.kml)),p.Z.WHITE),e=(0,g.Z)($t(Gt(r,"textColor",Tt.kml)),p.Z.BLACK),o=Gt(r,"text",Tt.kml);i.addProperty("balloonStyle"),i.balloonStyle={bgColor:t,textColor:e,text:o}}else if("ListStyle"===r.localName){const t=Gt(r,"listItemType",Tt.kml);"radioFolder"!==t&&"checkOffOnly"!==t||(0,k.Z)(`kml-listStyle-${t}`,`KML - Unsupported ListStyle with listItemType: ${t}`)}}}function ie(t,e,i){return e.fetchXML().then((function(o){return oe(t,o,i,e,!0)}))}function oe(t,e,i,o,n,s){let r,a,l,c;const h=Ht(e,"Style",Tt.kml);if((0,y.Z)(h)){const e=h.length;for(r=0;r<e;r++)c=h[r],a=At(c,"id"),(0,y.Z)(a)&&(a=`#${a}`,n&&(0,y.Z)(o)&&(a=o.getUrlComponent()+a),(0,y.Z)(i.getById(a))||(l=new Q.Z({id:a}),i.add(l),ee(t,c,l,o,s)))}const d=Ht(e,"StyleMap",Tt.kml);if((0,y.Z)(d)){const e=d.length;for(r=0;r<e;r++){const e=d[r];if(a=At(e,"id"),(0,y.Z)(a)){const r=Ft(e,"Pair",Tt.kml);for(let e=0;e<r.length;e++){const h=r[e],d=Gt(h,"key",Tt.kml);if("normal"===d){if(a=`#${a}`,n&&(0,y.Z)(o)&&(a=o.getUrlComponent()+a),!(0,y.Z)(i.getById(a))){l=i.getOrCreateEntity(a);let e=Gt(h,"styleUrl",Tt.kml);if((0,y.Z)(e)){"#"!==e[0]&&(e=`#${e}`),n&&(0,y.Z)(o)&&(e=o.getUrlComponent()+e);const t=i.getById(e);(0,y.Z)(t)&&l.merge(t)}else c=Ut(h,"Style",Tt.kml),ee(t,c,l,o,s)}}else(0,k.Z)(`kml-styleMap-${d}`,`KML - Unsupported StyleMap key: ${d}`)}}}}const u=[],p=e.getElementsByTagName("styleUrl"),Z=p.length;for(r=0;r<Z;r++){const e=p[r].textContent;if("#"!==e[0]){const n=e.split("#");if(2===n.length){const e=n[0],s=o.getDerivedResource({url:e});u.push(ie(t,s,i))}}}return u}function ne(t,e,i){const o=new pt.Z(t,e.id,["position"]),n=new ft.Z(e.position);e.polyline=(0,y.Z)(i.polyline)?i.polyline.clone():new ht.Z,e.polyline.positions=new dt.Z([o,n])}function se(t,e){return!(0,y.Z)(t)&&!(0,y.Z)(e)||"clampToGround"===t?H.Z.CLAMP_TO_GROUND:"relativeToGround"===t?H.Z.RELATIVE_TO_GROUND:"absolute"===t?H.Z.NONE:"clampToSeaFloor"===e?((0,k.Z)("kml-gx:altitudeMode-clampToSeaFloor","KML - <gx:altitudeMode>:clampToSeaFloor is currently not supported, using <kml:altitudeMode>:clampToGround."),H.Z.CLAMP_TO_GROUND):"relativeToSeaFloor"===e?((0,k.Z)("kml-gx:altitudeMode-relativeToSeaFloor","KML - <gx:altitudeMode>:relativeToSeaFloor is currently not supported, using <kml:altitudeMode>:relativeToGround."),H.Z.RELATIVE_TO_GROUND):((0,y.Z)(t)?(0,k.Z)("kml-altitudeMode-unknown",`KML - Unknown <kml:altitudeMode>:${t}, using <kml:altitudeMode>:CLAMP_TO_GROUND.`):(0,k.Z)("kml-gx:altitudeMode-unknown",`KML - Unknown <gx:altitudeMode>:${e}, using <kml:altitudeMode>:CLAMP_TO_GROUND.`),H.Z.CLAMP_TO_GROUND)}function re(t,e,i){return"relativeToSeaFloor"===i||"absolute"===e||"relativeToGround"===e?t:(((0,y.Z)(e)&&"clampToGround"!==e||(0,y.Z)(i)&&"clampToSeaFloor"!==i)&&(0,k.Z)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${(0,g.Z)(e,i)}`),new ft.Z(t))}function ae(t,e,i,o){let n=e.label;(0,y.Z)(n)||(n=(0,y.Z)(i.label)?i.label.clone():Jt(),e.label=n),n.text=e.name;let s=e.billboard;(0,y.Z)(s)||(s=(0,y.Z)(i.billboard)?i.billboard.clone():Yt(),e.billboard=s),(0,y.Z)(s.image)?s.image.getValue()||(s.image=void 0):s.image=t._pinBuilder.fromColor(p.Z.YELLOW,64);let r=1;(0,y.Z)(s.scale)&&(r=s.scale.getValue(),0!==r?n.pixelOffset=new a.Z(16*r+1,0):(n.pixelOffset=void 0,n.horizontalOrigin=void 0)),(0,y.Z)(o)&&t._clampToGround&&(s.heightReference=o,n.heightReference=o)}function le(t,e){let i=t.path;(0,y.Z)(i)||(i=new lt.Z,i.leadTime=0,t.path=i);const o=e.polyline;(0,y.Z)(o)&&(i.material=o.material,i.width=o.width)}function ce(t,e,i,n,s){const r=Ut(i,"coordinates",Tt.kml),a=Gt(i,"altitudeMode",Tt.kml),l=Gt(i,"altitudeMode",Tt.gx),c=qt(i,"extrude",Tt.kml),h=qt(i,"tessellate",Tt.kml),d=Lt(a,l),u=Wt(i,"drawOrder",Tt.gx),Z=t._ellipsoid,f=Nt(r,Z);let m=s.polyline;if(d&&c){const t=new mt.Z;n.wall=t,t.positions=f;const e=s.polygon;(0,y.Z)(e)&&(t.fill=e.fill,t.material=e.material),t.outline=!0,(0,y.Z)(m)?(t.outlineColor=(0,y.Z)(m.material)?m.material.color:p.Z.WHITE,t.outlineWidth=m.width):(0,y.Z)(e)&&(t.outlineColor=(0,y.Z)(e.material)?e.material.color:p.Z.WHITE)}else if(t._clampToGround&&!d&&h){const t=new ht.Z;t.clampToGround=!0,n.polyline=t,t.positions=f,(0,y.Z)(m)?(t.material=(0,y.Z)(m.material)?m.material.color.getValue(D.Z.MINIMUM_VALUE):p.Z.WHITE,t.width=(0,g.Z)(m.width,1)):(t.material=p.Z.WHITE,t.width=1),t.zIndex=u}else(0,y.Z)(u)&&(0,k.Z)("kml-gx:drawOrder","KML - gx:drawOrder is not supported in LineStrings when clampToGround is false"),t._clampToGround&&!h&&(0,k.Z)("kml-line-tesselate","Ignoring clampToGround for KML lines without the tessellate flag."),m=(0,y.Z)(m)?m.clone():new ht.Z,n.polyline=m,m.positions=function(t,e,i,o){if(!(0,y.Z)(t))return;if("relativeToSeaFloor"===i||"absolute"===e||"relativeToGround"===e)return t;((0,y.Z)(e)&&"clampToGround"!==e||(0,y.Z)(i)&&"clampToSeaFloor"!==i)&&(0,k.Z)("kml-altitudeMode-unknown",`KML - Unknown altitudeMode: ${(0,g.Z)(e,i)}`);const n=t.length;for(let e=0;e<n;e++){const i=t[e];o.scaleToGeodeticSurface(i,i)}return t}(f,a,l,Z),h&&!d||(m.arcType=o.Z.NONE);return!0}function he(t,e,i,o,n,s,r,a,l){const c=t[0],h=t[t.length-1],d=new Zt.Z;d.addSamples(t,e),i.intervals.addInterval(new A.Z({start:c,stop:h,isStartIncluded:l,isStopIncluded:l,data:re(d,r,a)})),o.addInterval(new A.Z({start:c,stop:h,isStartIncluded:l,isStopIncluded:l})),n.intervals.addInterval(new A.Z({start:c,stop:h,isStartIncluded:l,isStopIncluded:l,data:s}))}const de={Point:function(t,e,i,o,n){const s=Gt(i,"coordinates",Tt.kml),r=Gt(i,"altitudeMode",Tt.kml),a=Gt(i,"altitudeMode",Tt.gx),l=qt(i,"extrude",Tt.kml),c=Rt(s,t._ellipsoid);return o.position=c,ae(t,o,n,se(r,a)),l&&Lt(r,a)&&ne(e,o,n),!0},LineString:ce,LinearRing:ce,Polygon:function(t,e,i,o,n){const s=Ut(i,"outerBoundaryIs",Tt.kml);let r=Ut(s,"LinearRing",Tt.kml),a=Ut(r,"coordinates",Tt.kml);const l=t._ellipsoid;let c=Nt(a,l);const h=qt(i,"extrude",Tt.kml),d=Lt(Gt(i,"altitudeMode",Tt.kml),Gt(i,"altitudeMode",Tt.gx)),u=(0,y.Z)(n.polygon)?n.polygon.clone():Xt(),Z=n.polyline;if((0,y.Z)(Z)&&(u.outlineColor=(0,y.Z)(Z.material)?Z.material.color:p.Z.WHITE,u.outlineWidth=Z.width),o.polygon=u,d?(u.perPositionHeight=!0,u.extrudedHeight=h?0:void 0):t._clampToGround||(u.height=0),(0,y.Z)(c)){const t=new V.Z(c),e=Ft(i,"innerBoundaryIs",Tt.kml);for(let i=0;i<e.length;i++){r=Ft(e[i],"LinearRing",Tt.kml);for(let e=0;e<r.length;e++)a=Ut(r[e],"coordinates",Tt.kml),c=Nt(a,l),(0,y.Z)(c)&&t.holes.push(new V.Z(c))}u.hierarchy=t}return!0},Track:function(t,e,i,o,n){const s=Gt(i,"altitudeMode",Tt.kml),r=Gt(i,"altitudeMode",Tt.gx),a=Ft(i,"coord",Tt.gx),l=Ft(i,"angles",Tt.gx),c=Ft(i,"when",Tt.kml),h=qt(i,"extrude",Tt.kml),d=Lt(s,r),u=t._ellipsoid;l.length>0&&(0,k.Z)("kml-gx:angles","KML - gx:angles are not supported in gx:Tracks");const p=Math.min(a.length,c.length),Z=[],f=[];for(let t=0;t<p;t++){const e=Rt(a[t].textContent,u);Z.push(e),f.push(P.Z.fromIso8601(c[t].textContent))}const g=new Zt.Z;return g.addSamples(f,Z),o.position=g,ae(t,o,n,se(s,r)),le(o,n),o.availability=new U.Z,c.length>0&&o.availability.addInterval(new A.Z({start:f[0],stop:f[f.length-1]})),d&&h&&ne(e,o,n),!0},MultiTrack:function(t,e,i,o,n){const s=qt(i,"interpolate",Tt.gx),r=Ft(i,"Track",Tt.gx);let a,l,c,h=!1;const d=new gt.Z,u=new U.Z,p=new Y.Z,Z=t._ellipsoid;for(let t=0,e=r.length;t<e;t++){const e=r[t],i=Ft(e,"when",Tt.kml),o=Ft(e,"coord",Tt.gx),n=Gt(e,"altitudeMode",Tt.kml),f=Gt(e,"altitudeMode",Tt.gx),g=Lt(n,f),m=qt(e,"extrude",Tt.kml),_=Math.min(o.length,i.length),v=[];a=[];for(let t=0;t<_;t++){const e=Rt(o[t].textContent,Z);v.push(e),a.push(P.Z.fromIso8601(i[t].textContent))}s&&((0,y.Z)(l)&&he([l,a[0]],[c,v[0]],p,u,d,!1,"absolute",void 0,!1),l=a[_-1],c=v[v.length-1]),he(a,v,p,u,d,g&&m,n,f,!0),h=h||g&&m}return o.availability=u,o.position=p,ae(t,o,n),le(o,n),h&&(ne(e,o,n),o.polyline.show=d),!0},MultiGeometry:function(t,e,i,o,n,s){const r=i.childNodes;let a=!1;for(let i=0,l=r.length;i<l;i++){const l=r.item(i),c=de[l.localName];if((0,y.Z)(c)){const i=Vt(l,e,s);i.parent=o,i.name=o.name,i.availability=o.availability,i.description=o.description,i.kml=o.kml,c(t,e,l,i,n)&&(a=!0)}}return a},Model:function(t,e,i,o,n){return(0,k.Z)("kml-unsupportedGeometry",`KML - Unsupported geometry: ${i.localName}`),!1}};let ue;function pe(t,e,i){const o=i.entityCollection,n=i.parentEntity,s=i.sourceResource,r=i.uriResolver,a=Vt(e,o,i.context),l=a.kml,c=function(t,e,i,o,n){const s=new Q.Z;let r,a=-1;const l=e.childNodes,c=l.length;for(let t=0;t<c;t++){const e=l[t];"Style"!==e.localName&&"StyleMap"!==e.localName||(a=t)}if(-1!==a){const e=l[a];if("Style"===e.localName)ee(t,e,s,o,n);else{const a=Ft(e,"Pair",Tt.kml);for(let e=0;e<a.length;e++){const l=a[e],c=Gt(l,"key",Tt.kml);if("normal"===c){const e=Gt(l,"styleUrl",Tt.kml);(0,y.Z)(e)?(r=i.getById(e),(0,y.Z)(r)||(r=i.getById(`#${e}`)),(0,y.Z)(r)&&s.merge(r)):ee(t,Ut(l,"Style",Tt.kml),s,o,n)}else(0,k.Z)(`kml-styleMap-${c}`,`KML - Unsupported StyleMap key: ${c}`)}}}const h=Gt(e,"styleUrl",Tt.kml);if((0,y.Z)(h)){let t=h;if("#"!==h[0]&&-1!==h.indexOf("#")){const e=h.split("#"),i=e[0];t=`${o.getDerivedResource({url:i}).getUrlComponent()}#${e[1]}`}r=i.getById(t),(0,y.Z)(r)||(r=i.getById(`#${t}`)),(0,y.Z)(r)&&s.merge(r)}return s}(t,e,i.styleCollection,s,r),h=Gt(e,"name",Tt.kml);a.name=h,a.parent=n;let d=function(t){const e=Ut(t,"TimeSpan",Tt.kmlgx);if(!(0,y.Z)(e))return;let i;const o=Ut(e,"begin",Tt.kmlgx);let n=(0,y.Z)(o)?P.Z.fromIso8601(o.textContent):void 0;const s=Ut(e,"end",Tt.kmlgx);let r=(0,y.Z)(s)?P.Z.fromIso8601(s.textContent):void 0;if((0,y.Z)(n)&&(0,y.Z)(r)){if(P.Z.lessThan(r,n)){const t=n;n=r,r=t}i=new U.Z,i.addInterval(new A.Z({start:n,stop:r}))}else(0,y.Z)(n)?(i=new U.Z,i.addInterval(new A.Z({start:n,stop:D.Z.MAXIMUM_VALUE}))):(0,y.Z)(r)&&(i=new U.Z,i.addInterval(new A.Z({start:D.Z.MINIMUM_VALUE,stop:r})));return i}(e);(0,y.Z)(d)||(d=function(t){const e=Ut(t,"TimeStamp",Tt.kmlgx),i=Gt(e,"when",Tt.kmlgx);if(!(0,y.Z)(e)||!(0,y.Z)(i)||0===i.length)return;const o=P.Z.fromIso8601(i),n=new U.Z;return n.addInterval(new A.Z({start:o,stop:D.Z.MAXIMUM_VALUE})),n}(e)),a.availability=d,Ie(a);const u=qt(e,"visibility",Tt.kml);a.show=function t(e){return!e||e.show&&t(e.parent)}(n)&&(0,g.Z)(u,!0);const Z=Ut(e,"author",Tt.atom),f=l.author;f.name=Gt(Z,"name",Tt.atom),f.uri=Gt(Z,"uri",Tt.atom),f.email=Gt(Z,"email",Tt.atom);const m=Ut(e,"link",Tt.atom),_=l.link;_.href=At(m,"href"),_.hreflang=At(m,"hreflang"),_.rel=At(m,"rel"),_.type=At(m,"type"),_.title=At(m,"title"),_.length=At(m,"length"),l.address=Gt(e,"address",Tt.kml),l.phoneNumber=Gt(e,"phoneNumber",Tt.kml),l.snippet=Gt(e,"Snippet",Tt.kml),function(t,e){const i=Ut(t,"ExtendedData",Tt.kml);if(!(0,y.Z)(i))return;(0,y.Z)(Ut(i,"SchemaData",Tt.kml))&&(0,k.Z)("kml-schemaData","KML - SchemaData is unsupported"),(0,y.Z)(At(i,"xmlns:prefix"))&&(0,k.Z)("kml-extendedData","KML - ExtendedData with xmlns:prefix is unsupported");const o={},n=Ft(i,"Data",Tt.kml);if((0,y.Z)(n)){const t=n.length;for(let e=0;e<t;e++){const t=n[e],i=At(t,"name");(0,y.Z)(i)&&(o[i]={displayName:Gt(t,"displayName",Tt.kml),value:Gt(t,"value",Tt.kml)})}}e.kml.extendedData=o}(e,a),function(t,e,i,o,n){let s,r,a;const l=e.kml,c=l.extendedData,h=Gt(t,"description",Tt.kml),d=(0,g.Z)(e.balloonStyle,i.balloonStyle);let u,Z=p.Z.WHITE,f=p.Z.BLACK,m=h;if((0,y.Z)(d)&&(Z=(0,g.Z)(d.bgColor,p.Z.WHITE),f=(0,g.Z)(d.textColor,p.Z.BLACK),m=(0,g.Z)(d.text,h)),(0,y.Z)(m)){if(m=m.replace("$[name]",(0,g.Z)(e.name,"")),m=m.replace("$[description]",(0,g.Z)(h,"")),m=m.replace("$[address]",(0,g.Z)(l.address,"")),m=m.replace("$[Snippet]",(0,g.Z)(l.snippet,"")),m=m.replace("$[id]",e.id),m=m.replace("$[geDirections]",""),(0,y.Z)(c)){const t=m.match(/\$\[.+?\]/g);if(null!==t)for(s=0;s<t.length;s++){const e=t[s];let i=e.substr(2,e.length-3);const o=/\/displayName$/.test(i);i=i.replace(/\/displayName$/,""),u=c[i],(0,y.Z)(u)&&(u=o?u.displayName:u.value),(0,y.Z)(u)&&(m=m.replace(e,(0,g.Z)(u,"")))}}}else if((0,y.Z)(c)&&(a=Object.keys(c),a.length>0)){for(m='<table class="cesium-infoBox-defaultTable cesium-infoBox-defaultTable-lighter"><tbody>',s=0;s<a.length;s++)r=a[s],u=c[r],m+=`<tr><th>${(0,g.Z)(u.displayName,r)}</th><td>${(0,g.Z)(u.value,"")}</td></tr>`;m+="</tbody></table>"}if(!(0,y.Z)(m))return;m=vt.link(m),ue.innerHTML=m;const _=ue.querySelectorAll("a");for(s=0;s<_.length;s++)_[s].setAttribute("target","_blank");(0,y.Z)(o)&&o.keys.length>1&&(kt(ue,"a","href",o),kt(ue,"link","href",o),kt(ue,"area","href",o),kt(ue,"img","src",o),kt(ue,"iframe","src",o),kt(ue,"video","src",o),kt(ue,"audio","src",o),kt(ue,"source","src",o),kt(ue,"track","src",o),kt(ue,"input","src",o),kt(ue,"embed","src",o),kt(ue,"script","src",o),kt(ue,"video","poster",o)),It(ue,"a","href",n),It(ue,"link","href",n),It(ue,"area","href",n),It(ue,"img","src",n),It(ue,"iframe","src",n),It(ue,"video","src",n),It(ue,"audio","src",n),It(ue,"source","src",n),It(ue,"track","src",n),It(ue,"input","src",n),It(ue,"embed","src",n),It(ue,"script","src",n),It(ue,"video","poster",n);let v='<div class="cesium-infoBox-description-lighter" style="';v+="overflow:auto;",v+="word-wrap:break-word;",v+=`background-color:${Z.toCssColorString()};`,v+=`color:${f.toCssColorString()};`,v+='">',v+=`${ue.innerHTML}</div>`,ue.innerHTML="",e.description=v}(e,a,c,r,s);const v=t._ellipsoid;return ye(e,a,v),me(e,a,v),(0,y.Z)(Ut(e,"Region",Tt.kml))&&(0,k.Z)("kml-region","KML - Placemark Regions are unsupported"),{entity:a,styleEntity:c}}function Ze(t,e,i,o){o.addNodes(e.childNodes,i),o.process()}"undefined"!=typeof document&&(ue=document.createElement("div"));const fe={FlyTo:function(t,e,i){const o=Wt(e,"duration",Tt.gx),n=Gt(e,"flyToMode",Tt.gx),s={kml:{}};ye(e,s,i),me(e,s,i);const r=s.kml.lookAt||s.kml.camera,a=new st.Z(o,n,r);t.addPlaylistEntry(a)},Wait:function(t,e){const i=Wt(e,"duration",Tt.gx);t.addPlaylistEntry(new rt.Z(i))},SoundCue:ge,AnimatedUpdate:ge,TourControl:ge};function ge(t,e){(0,k.Z)(`KML Tour unsupported node ${e.localName}`)}function me(t,e,i){const o=Ut(t,"Camera",Tt.kml);if((0,y.Z)(o)){const t=(0,g.Z)(Wt(o,"longitude",Tt.kml),0),n=(0,g.Z)(Wt(o,"latitude",Tt.kml),0),s=(0,g.Z)(Wt(o,"altitude",Tt.kml),0),r=(0,g.Z)(Wt(o,"heading",Tt.kml),0),a=(0,g.Z)(Wt(o,"tilt",Tt.kml),0),c=(0,g.Z)(Wt(o,"roll",Tt.kml),0),h=l.Z.fromDegrees(t,n,s,i),d=T.Z.fromDegrees(r,a-90,c);e.kml.camera=new it.Z(h,d)}}function ye(t,e,i){const o=Ut(t,"LookAt",Tt.kml);if((0,y.Z)(o)){const t=(0,g.Z)(Wt(o,"longitude",Tt.kml),0),n=(0,g.Z)(Wt(o,"latitude",Tt.kml),0),s=(0,g.Z)(Wt(o,"altitude",Tt.kml),0);let r=Wt(o,"heading",Tt.kml),a=Wt(o,"tilt",Tt.kml);const c=(0,g.Z)(Wt(o,"range",Tt.kml),0);a=E.Z.toRadians((0,g.Z)(a,0)),r=E.Z.toRadians((0,g.Z)(r,0));const h=new x.Z(r,a-E.Z.PI_OVER_TWO,c),d=l.Z.fromDegrees(t,n,s,i);e.kml.lookAt=new ot.Z(d,h)}}function _e(t,e,i,o){t._unsupportedNode.raiseEvent(t,i.parentEntity,e,i.entityCollection,i.styleCollection,i.sourceResource,i.uriResolver),(0,k.Z)(`kml-unsupportedFeature-${e.nodeName}`,`KML - Unsupported feature: ${e.nodeName}`)}const ve=0,we=1,Ce=2;function be(t){if(!(0,y.Z)(t)||0===t.length)return"";const e=t[0];return"&"!==e&&"?"!==e||(t=t.substring(1)),t}const Oe=new R.Z,xe=new c.Z,Te=new a.Z,De=new l.Z;function Pe(t,e,i,o,n,s){function r(t){return t<-E.Z.PI_OVER_TWO?-E.Z.PI_OVER_TWO:t>E.Z.PI_OVER_TWO?E.Z.PI_OVER_TWO:t}function a(t){return t>E.Z.PI?t-E.Z.TWO_PI:t<-E.Z.PI?t+E.Z.TWO_PI:t}let c=(0,M.Z)(t.queryParameters);if(c=c.replace(/%5B/g,"[").replace(/%5D/g,"]"),(0,y.Z)(e)&&e._mode!==G.Z.MORPHING){let t,h;if(n=(0,g.Z)(n,Oe),(0,y.Z)(i)&&(Te.x=.5*i.clientWidth,Te.y=.5*i.clientHeight,t=e.pickEllipsoid(Te,s,De)),(0,y.Z)(t)?h=s.cartesianToCartographic(t,xe):(h=R.Z.center(n,xe),t=s.cartographicToCartesian(h)),(0,y.Z)(o)&&!E.Z.equalsEpsilon(o,1,E.Z.EPSILON9)){const t=n.width*o*.5,e=n.height*o*.5;n=new R.Z(a(h.longitude-t),r(h.latitude-e),a(h.longitude+t),r(h.latitude+e))}c=c.replace("[bboxWest]",E.Z.toDegrees(n.west).toString()),c=c.replace("[bboxSouth]",E.Z.toDegrees(n.south).toString()),c=c.replace("[bboxEast]",E.Z.toDegrees(n.east).toString()),c=c.replace("[bboxNorth]",E.Z.toDegrees(n.north).toString());const d=E.Z.toDegrees(h.longitude).toString(),u=E.Z.toDegrees(h.latitude).toString();c=c.replace("[lookatLon]",d),c=c.replace("[lookatLat]",u),c=c.replace("[lookatTilt]",E.Z.toDegrees(e.pitch).toString()),c=c.replace("[lookatHeading]",E.Z.toDegrees(e.heading).toString()),c=c.replace("[lookatRange]",l.Z.distance(e.positionWC,t)),c=c.replace("[lookatTerrainLon]",d),c=c.replace("[lookatTerrainLat]",u),c=c.replace("[lookatTerrainAlt]",h.height.toString()),s.cartesianToCartographic(e.positionWC,xe),c=c.replace("[cameraLon]",E.Z.toDegrees(xe.longitude).toString()),c=c.replace("[cameraLat]",E.Z.toDegrees(xe.latitude).toString()),c=c.replace("[cameraAlt]",E.Z.toDegrees(xe.height).toString());const p=e.frustum,Z=p.aspectRatio;let f="",m="";if((0,y.Z)(Z)){const t=E.Z.toDegrees(p.fov);Z>1?(f=t,m=t/Z):(m=t,f=t*Z)}c=c.replace("[horizFov]",f.toString()),c=c.replace("[vertFov]",m.toString())}else c=c.replace("[bboxWest]","-180"),c=c.replace("[bboxSouth]","-90"),c=c.replace("[bboxEast]","180"),c=c.replace("[bboxNorth]","90"),c=c.replace("[lookatLon]",""),c=c.replace("[lookatLat]",""),c=c.replace("[lookatRange]",""),c=c.replace("[lookatTilt]",""),c=c.replace("[lookatHeading]",""),c=c.replace("[lookatTerrainLon]",""),c=c.replace("[lookatTerrainLat]",""),c=c.replace("[lookatTerrainAlt]",""),c=c.replace("[cameraLon]",""),c=c.replace("[cameraLat]",""),c=c.replace("[cameraAlt]",""),c=c.replace("[horizFov]",""),c=c.replace("[vertFov]","");(0,y.Z)(i)?(c=c.replace("[horizPixels]",i.clientWidth),c=c.replace("[vertPixels]",i.clientHeight)):(c=c.replace("[horizPixels]",""),c=c.replace("[vertPixels]","")),c=c.replace("[terrainEnabled]","1"),c=c.replace("[clientVersion]","1"),c=c.replace("[kmlVersion]","2.2"),c=c.replace("[clientName]","Cesium"),c=c.replace("[language]","English"),t.setQueryParameters((0,L.Z)(c))}function Ee(t,e,i,o,n,s,r){e.removeAll();const a=i.documentElement;let l=Gt("Document"===a.localName?a:Ut(a,"Document",Tt.kml),"name",Tt.kml);(0,y.Z)(l)||(l=(0,b.Z)(o.getUrlComponent())),(0,y.Z)(t._name)||(t._name=l);const c=new ke._DeferredLoading(t),h=new et.Z(t);return Promise.all(oe(t,i,h,o,!1,n)).then((function(){let a=i.documentElement;if("kml"===a.localName){const t=a.childNodes;for(let e=0;e<t.length;e++){const i=t[e];if((0,y.Z)(Dt[i.localName])){a=i;break}}}const l={parentEntity:void 0,entityCollection:e,styleCollection:h,sourceResource:o,uriResolver:n,context:r,screenOverlayContainer:s};return e.suspendEvents(),function(t,e,i,o){const n=Dt[e.localName];(0,y.Z)(n)?n(t,e,i,o):_e(t,e,i)}(t,a,l,c),e.resumeEvents(),c.wait().then((function(){return i.documentElement}))}))}function Se(t,e,i,o,n){const s=(0,r.Z)("ThirdParty/Workers/z-worker-pako.js");j.Z.configure({workerScripts:{deflate:[s,"./pako_deflate.min.js"],inflate:[s,"./pako_inflate.min.js"]}});const a=new j.Z.ZipReader(new j.Z.BlobReader(i));return Promise.resolve(a.getEntries()).then((function(i){const s=[],r={};let l;for(let t=0;t<i.length;t++){const e=i[t];e.directory||(/\.kml$/i.test(e.filename)?(0,y.Z)(l)&&/\//i.test(e.filename)?s.push(Mt(e,r)):((0,y.Z)(l)&&s.push(Mt(l,r)),l=e):s.push(Mt(e,r)))}return(0,y.Z)(l)&&s.push(function(t,e){return Promise.resolve(t.getData(new j.Z.TextWriter)).then((function(t){t=St(t=Et(t)),e.kml=_t.parseFromString(t,"application/xml")}))}(l,r)),Promise.all(s).then((function(){if(a.close(),!(0,y.Z)(r.kml))throw new B.Z("KMZ file does not contain a KML document.");return r.keys=Object.keys(r),Ee(t,e,r.kml,o,r,n)}))}))}function Me(t,e,i,o){let n=(o=(0,g.Z)(o,g.Z.EMPTY_OBJECT)).sourceUri;const s=o.uriResolver,r=o.context;let a=o.screenOverlayContainer,l=i;if("string"==typeof i||i instanceof N.Z){l=(i=N.Z.createIfNeeded(i)).fetchBlob(),n=(0,g.Z)(n,i.clone());const e=t._resourceCredits,o=i.credits;if((0,y.Z)(o)){const t=o.length;for(let i=0;i<t;i++)e.push(o[i])}}else n=(0,g.Z)(n,N.Z.DEFAULT.clone());return n=N.Z.createIfNeeded(n),(0,y.Z)(a)&&(a=(0,$.Z)(a)),Promise.resolve(l).then((function(i){return i instanceof Blob?function(t){const e=t.slice(0,Math.min(4,t.size)),i=(0,m.Z)(),o=new FileReader;return o.addEventListener("load",(function(){i.resolve(1347093252===new DataView(o.result).getUint32(0,!1))})),o.addEventListener("error",(function(){i.reject(o.error)})),o.readAsArrayBuffer(e),i.promise}(i).then((function(o){return o?Se(t,e,i,n,a):function(t){const e=(0,m.Z)(),i=new FileReader;return i.addEventListener("load",(function(){e.resolve(i.result)})),i.addEventListener("error",(function(){e.reject(i.error)})),i.readAsText(t),e.promise}(i).then((function(i){let o,l;i=St(i=Et(i));try{o=_t.parseFromString(i,"application/xml")}catch(t){l=t.toString()}if((0,y.Z)(l)||o.body||"parsererror"===o.documentElement.tagName){let t=(0,y.Z)(l)?l:o.documentElement.firstChild.nodeValue;throw t||(t=o.body.innerText),new B.Z(t)}return Ee(t,e,o,n,s,a,r)}))})):Ee(t,e,i,n,s,a,r)})).catch((function(e){return t._error.raiseEvent(t,e),Promise.reject(e)}))}function ke(t){const e=(t=(0,g.Z)(t,g.Z.EMPTY_OBJECT)).camera,i=t.canvas;this._changed=new w.Z,this._error=new w.Z,this._loading=new w.Z,this._refresh=new w.Z,this._unsupportedNode=new w.Z,this._clock=void 0,this._entityCollection=new et.Z(this),this._name=void 0,this._isLoading=!1,this._pinBuilder=new I.Z,this._networkLinks=new n.Z,this._entityCluster=new tt.Z,this.canvas=i,this.camera=e,this._lastCameraView={position:(0,y.Z)(e)?l.Z.clone(e.positionWC):void 0,direction:(0,y.Z)(e)?l.Z.clone(e.directionWC):void 0,up:(0,y.Z)(e)?l.Z.clone(e.upWC):void 0,bbox:(0,y.Z)(e)?e.computeViewRectangle():R.Z.clone(R.Z.MAX_VALUE)},this._ellipsoid=(0,g.Z)(t.ellipsoid,v.Z.WGS84);let o=t.credit;"string"==typeof o&&(o=new f.Z(o)),this._credit=o,this._resourceCredits=[],this._kmlTours=[],this._screenOverlays=[]}function Ie(t){const e=t.parent;if((0,y.Z)(e)){const i=e.availability;if((0,y.Z)(i)){const e=t.availability;(0,y.Z)(e)?e.intersect(i):t.availability=i}}}ke.load=function(t,e){return new ke(e=(0,g.Z)(e,g.Z.EMPTY_OBJECT)).load(t,e)},Object.defineProperties(ke.prototype,{name:{get:function(){return this._name},set:function(t){this._name!==t&&(this._name=t,this._changed.raiseEvent(this))}},clock:{get:function(){return this._clock}},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},refreshEvent:{get:function(){return this._refresh}},unsupportedNodeEvent:{get:function(){return this._unsupportedNode}},show:{get:function(){return this._entityCollection.show},set:function(t){this._entityCollection.show=t}},clustering:{get:function(){return this._entityCluster},set:function(t){if(!(0,y.Z)(t))throw new _.Z("value must be defined.");this._entityCluster=t}},credit:{get:function(){return this._credit}},kmlTours:{get:function(){return this._kmlTours}}}),ke.prototype.load=function(t,e){if(!(0,y.Z)(t))throw new _.Z("data is required.");e=(0,g.Z)(e,g.Z.EMPTY_OBJECT),X.Z.setLoading(this,!0);const i=this._name;this._name=void 0,this._clampToGround=(0,g.Z)(e.clampToGround,!1);const o=this;return Me(this,this._entityCollection,t,e).then((function(){let t;const e=o._entityCollection.computeAvailability();let n=e.start,s=e.stop;const r=P.Z.equals(n,D.Z.MINIMUM_VALUE),a=P.Z.equals(s,D.Z.MAXIMUM_VALUE);if(!r||!a){let e;r&&(e=new Date,e.setHours(0,0,0,0),n=P.Z.fromDate(e)),a&&(e=new Date,e.setHours(24,0,0,0),s=P.Z.fromDate(e)),t=new J.Z,t.startTime=n,t.stopTime=s,t.currentTime=P.Z.clone(n),t.clockRange=h.Z.LOOP_STOP,t.clockStep=d.Z.SYSTEM_CLOCK_MULTIPLIER,t.multiplier=Math.round(Math.min(Math.max(P.Z.secondsDifference(s,n)/60,1),31556900))}let l=!1;return t!==o._clock&&(o._clock=t,l=!0),i!==o._name&&(l=!0),l&&o._changed.raiseEvent(o),X.Z.setLoading(o,!1),o})).catch((function(t){return X.Z.setLoading(o,!1),o._error.raiseEvent(o,t),Promise.reject(t)}))},ke.prototype.destroy=function(){for(;this._screenOverlays.length>0;){this._screenOverlays.pop().remove()}};const Ve=new n.Z;function Le(){this.author={name:void 0,uri:void 0,email:void 0},this.link={href:void 0,hreflang:void 0,rel:void 0,type:void 0,title:void 0,length:void 0},this.address=void 0,this.phoneNumber=void 0,this.snippet=void 0,this.extendedData=void 0}ke.prototype.update=function(t){const e=this._networkLinks;if(0===e.length)return!0;const i=P.Z.now(),o=this;function s(t){const e=t._children,i=e.length;for(let t=0;t<i;++t){const i=e[t];Ve.set(i.id,i),s(i)}}Ve.removeAll();let r=!1;const a=this._lastCameraView,c=this.camera;!(0,y.Z)(c)||c.positionWC.equalsEpsilon(a.position,E.Z.EPSILON7)&&c.directionWC.equalsEpsilon(a.direction,E.Z.EPSILON7)&&c.upWC.equalsEpsilon(a.up,E.Z.EPSILON7)||(a.position=l.Z.clone(c.positionWC),a.direction=l.Z.clone(c.directionWC),a.up=l.Z.clone(c.upWC),a.bbox=c.computeViewRectangle(),r=!0);const h=new n.Z;let d=!1;return e.values.forEach((function(t){const e=t.entity;if(!Ve.contains(e.id)){if(!t.updating){let n=!1;if(t.refreshMode===ve?P.Z.secondsDifference(i,t.lastUpdated)>t.time&&(n=!0):t.refreshMode===we?P.Z.greaterThan(i,t.time)&&(n=!0):t.refreshMode===Ce&&(r&&(t.needsUpdate=!0,t.cameraUpdateTime=i),t.needsUpdate&&P.Z.secondsDifference(i,t.cameraUpdateTime)>=t.time&&(n=!0)),n){s(e),t.updating=!0;const i=new et.Z,n=t.href.clone();n.setQueryParameters(t.cookie);const r=(0,g.Z)(o._ellipsoid,v.Z.WGS84);Pe(n,o.camera,o.canvas,t.viewBoundScale,a.bbox,r),Me(o,i,n,{context:e.id}).then(function(t,e,i,o,n){return function(s){if(!o.contains(e.id))return;let r=!1;const a=Ut(s,"NetworkLinkControl",Tt.kml);let l=0;if((0,y.Z)(a)){if((0,y.Z)(Ut(a,"Update",Tt.kml)))return(0,k.Z)("kml-networkLinkControl-update","KML - NetworkLinkControl updates aren't supported."),e.updating=!1,void o.remove(e.id);e.cookie=(0,L.Z)((0,g.Z)(Gt(a,"cookie",Tt.kml),"")),l=(0,g.Z)(Wt(a,"minRefreshPeriod",Tt.kml),0)}const c=P.Z.now(),h=e.refreshMode;if(h===ve)(0,y.Z)(a)&&(e.time=Math.max(l,e.time));else if(h===we){let t;if((0,y.Z)(a)&&(t=Gt(a,"expires",Tt.kml)),(0,y.Z)(t))try{const i=P.Z.fromIso8601(t),o=P.Z.secondsDifference(i,c);o>0&&o<l&&P.Z.addSeconds(c,l,i),e.time=i}catch(t){(0,k.Z)("kml-networkLinkControl-expires","KML - NetworkLinkControl expires is not a valid date"),r=!0}else(0,k.Z)("kml-refreshMode-onExpire","KML - refreshMode of onExpire requires the NetworkLinkControl to have an expires element"),r=!0}const d=e.entity,u=t._entityCollection,p=i.values;function Z(t){u.remove(t);const e=t._children,i=e.length;for(let t=0;t<i;++t)Z(e[t])}u.suspendEvents();const f=u.values.slice();let m;for(m=0;m<f.length;++m){const t=f[m];t.parent===d&&(t.parent=void 0,Z(t))}for(u.resumeEvents(),u.suspendEvents(),m=0;m<p.length;m++){const t=p[m];(0,y.Z)(t.parent)||(t.parent=d,Ie(t)),u.add(t)}u.resumeEvents(),r?o.remove(e.id):e.lastUpdated=c;const _=u.computeAvailability(),v=_.start,w=_.stop,C=P.Z.equals(v,D.Z.MINIMUM_VALUE),b=P.Z.equals(w,D.Z.MAXIMUM_VALUE);if(!C||!b){const e=t._clock;e.startTime===v&&e.stopTime===w||(e.startTime=v,e.stopTime=w,t._changed.raiseEvent(t))}e.updating=!1,e.needsUpdate=!1,t._refresh.raiseEvent(t,n.getUrlComponent(!0))}}(o,t,i,h,n)).catch((function(e){const i=`NetworkLink ${t.href} refresh failed: ${e}`;o._error.raiseEvent(o,i)})),d=!0}}h.set(t.id,t)}})),d&&(this._networkLinks=h,this._changed.raiseEvent(this)),!0},ke._DeferredLoading=Pt,ke._getTimestamp=O.Z;const Re=ke},29371:(t,e,i)=>{i.d(e,{Z:()=>o});const o=function(t,e){this.position=t,this.headingPitchRange=e}},8158:(t,e,i)=>{i.d(e,{Z:()=>c});var o=i(54485),n=i(92893);function s(t,e){this.id=e,this.name=t,this.playlistIndex=0,this.playlist=[],this.tourStart=new n.Z,this.tourEnd=new n.Z,this.entryStart=new n.Z,this.entryEnd=new n.Z,this._activeEntries=[]}function r(t){for(let e=t.pop();void 0!==e;e=t.pop())e.stop()}function a(t,e,i){const n=this.playlist[this.playlistIndex];if(n){const o=l.bind(this,t,e,i);if(this._activeEntries.push(n),this.entryStart.raiseEvent(n),n.blocking)n.play(o,t.scene.camera,e);else{const s=this;n.play((function(){s.entryEnd.raiseEvent(n);const t=s._activeEntries.indexOf(n);t>=0&&s._activeEntries.splice(t,1)})),o(t,e,i)}}else(0,o.Z)(i)&&i(!1)}function l(t,e,i,o){const n=this.playlist[this.playlistIndex];if(this.entryEnd.raiseEvent(n,o),o)i(o);else{const o=this._activeEntries.indexOf(n);o>=0&&this._activeEntries.splice(o,1),this.playlistIndex++,a.call(this,t,e,i)}}s.prototype.addPlaylistEntry=function(t){this.playlist.push(t)},s.prototype.play=function(t,e){this.tourStart.raiseEvent();const i=this;a.call(this,t,e,(function(t){i.playlistIndex=0,t||r(i._activeEntries),i.tourEnd.raiseEvent(t)}))},s.prototype.stop=function(){r(this._activeEntries)};const c=s},54262:(t,e,i)=>{i.d(e,{Z:()=>l});var o=i(52351),n=i(51138),s=i(54485),r=i(45971);function a(t,e,i){this.type="KmlTourFlyTo",this.blocking=!0,this.activeCamera=null,this.activeCallback=null,this.duration=t,this.view=i,this.flyToMode=e}a.prototype.play=function(t,e,i){if(this.activeCamera=e,(0,s.Z)(t)&&null!==t){const e=this;this.activeCallback=function(i){delete e.activeCallback,delete e.activeCamera,t(!(0,s.Z)(i)&&i)}}const n=this.getCameraOptions(i);if(this.view.headingPitchRoll)e.flyTo(n);else if(this.view.headingPitchRange){const t=new o.Z(this.view.position);e.flyToBoundingSphere(t,n)}},a.prototype.stop=function(){(0,s.Z)(this.activeCamera)&&this.activeCamera.cancelFlight(),(0,s.Z)(this.activeCallback)&&this.activeCallback(!0)},a.prototype.getCameraOptions=function(t){let e={duration:this.duration};return(0,s.Z)(this.activeCallback)&&(e.complete=this.activeCallback),"smooth"===this.flyToMode&&(e.easingFunction=r.Z.LINEAR_NONE),this.view.headingPitchRoll?(e.destination=this.view.position,e.orientation=this.view.headingPitchRoll):this.view.headingPitchRange&&(e.offset=this.view.headingPitchRange),(0,s.Z)(t)&&(e=(0,n.Z)(e,t)),e};const l=a},62840:(t,e,i)=>{i.d(e,{Z:()=>s});var o=i(54485);function n(t){this.type="KmlTourWait",this.blocking=!0,this.duration=t,this.timeout=null}n.prototype.play=function(t){const e=this;this.activeCallback=t,this.timeout=setTimeout((function(){delete e.activeCallback,t(!1)}),1e3*this.duration)},n.prototype.stop=function(){clearTimeout(this.timeout),(0,o.Z)(this.activeCallback)&&this.activeCallback(!0)};const s=n},13056:(t,e,i)=>{i.d(e,{Z:()=>c});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(37105);function l(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._text=void 0,this._textSubscription=void 0,this._font=void 0,this._fontSubscription=void 0,this._style=void 0,this._styleSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._showBackground=void 0,this._showBackgroundSubscription=void 0,this._backgroundColor=void 0,this._backgroundColorSubscription=void 0,this._backgroundPadding=void 0,this._backgroundPaddingSubscription=void 0,this._pixelOffset=void 0,this._pixelOffsetSubscription=void 0,this._eyeOffset=void 0,this._eyeOffsetSubscription=void 0,this._horizontalOrigin=void 0,this._horizontalOriginSubscription=void 0,this._verticalOrigin=void 0,this._verticalOriginSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._fillColor=void 0,this._fillColorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._pixelOffsetScaleByDistance=void 0,this._pixelOffsetScaleByDistanceSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,a.Z)("show"),text:(0,a.Z)("text"),font:(0,a.Z)("font"),style:(0,a.Z)("style"),scale:(0,a.Z)("scale"),showBackground:(0,a.Z)("showBackground"),backgroundColor:(0,a.Z)("backgroundColor"),backgroundPadding:(0,a.Z)("backgroundPadding"),pixelOffset:(0,a.Z)("pixelOffset"),eyeOffset:(0,a.Z)("eyeOffset"),horizontalOrigin:(0,a.Z)("horizontalOrigin"),verticalOrigin:(0,a.Z)("verticalOrigin"),heightReference:(0,a.Z)("heightReference"),fillColor:(0,a.Z)("fillColor"),outlineColor:(0,a.Z)("outlineColor"),outlineWidth:(0,a.Z)("outlineWidth"),translucencyByDistance:(0,a.Z)("translucencyByDistance"),pixelOffsetScaleByDistance:(0,a.Z)("pixelOffsetScaleByDistance"),scaleByDistance:(0,a.Z)("scaleByDistance"),distanceDisplayCondition:(0,a.Z)("distanceDisplayCondition"),disableDepthTestDistance:(0,a.Z)("disableDepthTestDistance")}),l.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.text=this.text,t.font=this.font,t.style=this.style,t.scale=this.scale,t.showBackground=this.showBackground,t.backgroundColor=this.backgroundColor,t.backgroundPadding=this.backgroundPadding,t.pixelOffset=this.pixelOffset,t.eyeOffset=this.eyeOffset,t.horizontalOrigin=this.horizontalOrigin,t.verticalOrigin=this.verticalOrigin,t.heightReference=this.heightReference,t.fillColor=this.fillColor,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.translucencyByDistance=this.translucencyByDistance,t.pixelOffsetScaleByDistance=this.pixelOffsetScaleByDistance,t.scaleByDistance=this.scaleByDistance,t.distanceDisplayCondition=this.distanceDisplayCondition,t.disableDepthTestDistance=this.disableDepthTestDistance,t):new l(this)},l.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.text=(0,o.Z)(this.text,t.text),this.font=(0,o.Z)(this.font,t.font),this.style=(0,o.Z)(this.style,t.style),this.scale=(0,o.Z)(this.scale,t.scale),this.showBackground=(0,o.Z)(this.showBackground,t.showBackground),this.backgroundColor=(0,o.Z)(this.backgroundColor,t.backgroundColor),this.backgroundPadding=(0,o.Z)(this.backgroundPadding,t.backgroundPadding),this.pixelOffset=(0,o.Z)(this.pixelOffset,t.pixelOffset),this.eyeOffset=(0,o.Z)(this.eyeOffset,t.eyeOffset),this.horizontalOrigin=(0,o.Z)(this.horizontalOrigin,t.horizontalOrigin),this.verticalOrigin=(0,o.Z)(this.verticalOrigin,t.verticalOrigin),this.heightReference=(0,o.Z)(this.heightReference,t.heightReference),this.fillColor=(0,o.Z)(this.fillColor,t.fillColor),this.outlineColor=(0,o.Z)(this.outlineColor,t.outlineColor),this.outlineWidth=(0,o.Z)(this.outlineWidth,t.outlineWidth),this.translucencyByDistance=(0,o.Z)(this.translucencyByDistance,t.translucencyByDistance),this.pixelOffsetScaleByDistance=(0,o.Z)(this.pixelOffsetScaleByDistance,t.pixelOffsetScaleByDistance),this.scaleByDistance=(0,o.Z)(this.scaleByDistance,t.scaleByDistance),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition),this.disableDepthTestDistance=(0,o.Z)(this.disableDepthTestDistance,t.disableDepthTestDistance)};const c=l},13822:(t,e,i)=>{i.d(e,{Z:()=>W});var o=i(28474),n=i(59015),s=i(93517),r=i(6785),a=i(88779),l=i(54485),c=i(90332),h=i(20176),d=i(51178),u=i(14633),p=i(16272),Z=i(72293),f=i(36164),g=i(49824),m=i(87546),y=i(19157);const _=f.Z.FILL,v=r.Z.WHITE,w=r.Z.BLACK,C=new r.Z(.165,.165,.165,.8),b=new n.Z(7,5),O=n.Z.ZERO,x=s.Z.ZERO,T=p.Z.NONE,D=Z.Z.CENTER,P=g.Z.CENTER,E=new s.Z,S=new r.Z,M=new r.Z,k=new r.Z,I=new n.Z,V=new s.Z,L=new n.Z,R=new u.Z,N=new u.Z,B=new u.Z,A=new d.Z;function U(t){this.entity=t,this.label=void 0,this.index=void 0}function H(t,e){if(!(0,l.Z)(t))throw new h.Z("entityCluster is required.");if(!(0,l.Z)(e))throw new h.Z("entityCollection is required.");e.collectionChanged.addEventListener(H.prototype._onCollectionChanged,this),this._cluster=t,this._entityCollection=e,this._items=new o.Z,this._onCollectionChanged(e,e.values,[],[])}function F(t,e,i){(0,l.Z)(t)&&(t.label=void 0,i.removeLabel(e))}H.prototype.update=function(t){if(!(0,l.Z)(t))throw new h.Z("time is required.");const e=this._items.values,i=this._cluster;for(let o=0,n=e.length;o<n;o++){const n=e[o],r=n.entity,a=r._label;let c,h,d=n.label,u=r.isShowing&&r.isAvailable(t)&&y.Z.getValueOrDefault(a._show,t,!0);if(u&&(h=y.Z.getValueOrUndefined(r._position,t,E),c=y.Z.getValueOrUndefined(a._text,t),u=(0,l.Z)(h)&&(0,l.Z)(c)),!u){F(n,r,i);continue}y.Z.isConstant(r._position)||(i._clusterDirty=!0);let p=!1;const Z=y.Z.getValueOrDefault(a._heightReference,t,T);(0,l.Z)(d)||(d=i.getLabel(r),d.id=r,n.label=d,p=s.Z.equals(d.position,h)&&d.heightReference===Z),d.show=!0,d.position=h,d.text=c,d.scale=y.Z.getValueOrDefault(a._scale,t,1),d.font=y.Z.getValueOrDefault(a._font,t,"30px sans-serif"),d.style=y.Z.getValueOrDefault(a._style,t,_),d.fillColor=y.Z.getValueOrDefault(a._fillColor,t,v,S),d.outlineColor=y.Z.getValueOrDefault(a._outlineColor,t,w,M),d.outlineWidth=y.Z.getValueOrDefault(a._outlineWidth,t,1),d.showBackground=y.Z.getValueOrDefault(a._showBackground,t,false),d.backgroundColor=y.Z.getValueOrDefault(a._backgroundColor,t,C,k),d.backgroundPadding=y.Z.getValueOrDefault(a._backgroundPadding,t,b,I),d.pixelOffset=y.Z.getValueOrDefault(a._pixelOffset,t,O,L),d.eyeOffset=y.Z.getValueOrDefault(a._eyeOffset,t,x,V),d.heightReference=Z,d.horizontalOrigin=y.Z.getValueOrDefault(a._horizontalOrigin,t,D),d.verticalOrigin=y.Z.getValueOrDefault(a._verticalOrigin,t,P),d.translucencyByDistance=y.Z.getValueOrUndefined(a._translucencyByDistance,t,R),d.pixelOffsetScaleByDistance=y.Z.getValueOrUndefined(a._pixelOffsetScaleByDistance,t,N),d.scaleByDistance=y.Z.getValueOrUndefined(a._scaleByDistance,t,B),d.distanceDisplayCondition=y.Z.getValueOrUndefined(a._distanceDisplayCondition,t,A),d.disableDepthTestDistance=y.Z.getValueOrUndefined(a._disableDepthTestDistance,t),p&&d._updateClamping()}return!0},H.prototype.getBoundingSphere=function(t,e){if(!(0,l.Z)(t))throw new h.Z("entity is required.");if(!(0,l.Z)(e))throw new h.Z("result is required.");const i=this._items.get(t.id);if(!(0,l.Z)(i)||!(0,l.Z)(i.label))return m.Z.FAILED;const o=i.label;return e.center=s.Z.clone((0,a.Z)(o._clampedPosition,o.position),e.center),e.radius=0,m.Z.DONE},H.prototype.isDestroyed=function(){return!1},H.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(H.prototype._onCollectionChanged,this);const t=this._entityCollection.values;for(let e=0;e<t.length;e++)this._cluster.removeLabel(t[e]);return(0,c.Z)(this)},H.prototype._onCollectionChanged=function(t,e,i,o){let n,s;const r=this._items,a=this._cluster;for(n=e.length-1;n>-1;n--)s=e[n],(0,l.Z)(s._label)&&(0,l.Z)(s._position)&&r.set(s.id,new U(s));for(n=o.length-1;n>-1;n--)s=o[n],(0,l.Z)(s._label)&&(0,l.Z)(s._position)?r.contains(s.id)||r.set(s.id,new U(s)):(F(r.get(s.id),s,a),r.remove(s.id));for(n=i.length-1;n>-1;n--)s=i[n],F(r.get(s.id),s,a),r.remove(s.id)};const W=H},39613:(t,e,i)=>{i.d(e,{Z:()=>l});var o=i(6785),n=i(54485),s=i(20176),r=i(7063);function a(){s.Z.throwInstantiationError()}Object.defineProperties(a.prototype,{isConstant:{get:s.Z.throwInstantiationError},definitionChanged:{get:s.Z.throwInstantiationError}}),a.prototype.getType=s.Z.throwInstantiationError,a.prototype.getValue=s.Z.throwInstantiationError,a.prototype.equals=s.Z.throwInstantiationError,a.getValue=function(t,e,i){let s;return(0,n.Z)(e)&&(s=e.getType(t),(0,n.Z)(s))?((0,n.Z)(i)&&i.type===s||(i=r.Z.fromType(s)),e.getValue(t,i.uniforms),i):((0,n.Z)(i)&&i.type===r.Z.ColorType||(i=r.Z.fromType(r.Z.ColorType)),o.Z.clone(o.Z.WHITE,i.uniforms.color),i)};const l=a},99520:(t,e,i)=>{i.d(e,{Z:()=>u});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(37105),l=i(14136),c=i(1561);function h(t){return new l.Z(t)}function d(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._uri=void 0,this._uriSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this._minimumPixelSize=void 0,this._minimumPixelSizeSubscription=void 0,this._maximumScale=void 0,this._maximumScaleSubscription=void 0,this._incrementallyLoadTextures=void 0,this._incrementallyLoadTexturesSubscription=void 0,this._runAnimations=void 0,this._runAnimationsSubscription=void 0,this._clampAnimations=void 0,this._clampAnimationsSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._silhouetteColor=void 0,this._silhouetteColorSubscription=void 0,this._silhouetteSize=void 0,this._silhouetteSizeSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._colorBlendMode=void 0,this._colorBlendModeSubscription=void 0,this._colorBlendAmount=void 0,this._colorBlendAmountSubscription=void 0,this._imageBasedLightingFactor=void 0,this._imageBasedLightingFactorSubscription=void 0,this._lightColor=void 0,this._lightColorSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._nodeTransformations=void 0,this._nodeTransformationsSubscription=void 0,this._articulations=void 0,this._articulationsSubscription=void 0,this._clippingPlanes=void 0,this._clippingPlanesSubscription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(d.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,a.Z)("show"),uri:(0,a.Z)("uri"),scale:(0,a.Z)("scale"),minimumPixelSize:(0,a.Z)("minimumPixelSize"),maximumScale:(0,a.Z)("maximumScale"),incrementallyLoadTextures:(0,a.Z)("incrementallyLoadTextures"),runAnimations:(0,a.Z)("runAnimations"),clampAnimations:(0,a.Z)("clampAnimations"),shadows:(0,a.Z)("shadows"),heightReference:(0,a.Z)("heightReference"),silhouetteColor:(0,a.Z)("silhouetteColor"),silhouetteSize:(0,a.Z)("silhouetteSize"),color:(0,a.Z)("color"),colorBlendMode:(0,a.Z)("colorBlendMode"),colorBlendAmount:(0,a.Z)("colorBlendAmount"),imageBasedLightingFactor:(0,a.Z)("imageBasedLightingFactor"),lightColor:(0,a.Z)("lightColor"),distanceDisplayCondition:(0,a.Z)("distanceDisplayCondition"),nodeTransformations:(0,a.Z)("nodeTransformations",void 0,(function(t){return new c.Z(t,h)})),articulations:(0,a.Z)("articulations",void 0,(function(t){return new c.Z(t)})),clippingPlanes:(0,a.Z)("clippingPlanes")}),d.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.uri=this.uri,t.scale=this.scale,t.minimumPixelSize=this.minimumPixelSize,t.maximumScale=this.maximumScale,t.incrementallyLoadTextures=this.incrementallyLoadTextures,t.runAnimations=this.runAnimations,t.clampAnimations=this.clampAnimations,t.heightReference=this._heightReference,t.silhouetteColor=this.silhouetteColor,t.silhouetteSize=this.silhouetteSize,t.color=this.color,t.colorBlendMode=this.colorBlendMode,t.colorBlendAmount=this.colorBlendAmount,t.imageBasedLightingFactor=this.imageBasedLightingFactor,t.lightColor=this.lightColor,t.distanceDisplayCondition=this.distanceDisplayCondition,t.nodeTransformations=this.nodeTransformations,t.articulations=this.articulations,t.clippingPlanes=this.clippingPlanes,t):new d(this)},d.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.uri=(0,o.Z)(this.uri,t.uri),this.scale=(0,o.Z)(this.scale,t.scale),this.minimumPixelSize=(0,o.Z)(this.minimumPixelSize,t.minimumPixelSize),this.maximumScale=(0,o.Z)(this.maximumScale,t.maximumScale),this.incrementallyLoadTextures=(0,o.Z)(this.incrementallyLoadTextures,t.incrementallyLoadTextures),this.runAnimations=(0,o.Z)(this.runAnimations,t.runAnimations),this.clampAnimations=(0,o.Z)(this.clampAnimations,t.clampAnimations),this.shadows=(0,o.Z)(this.shadows,t.shadows),this.heightReference=(0,o.Z)(this.heightReference,t.heightReference),this.silhouetteColor=(0,o.Z)(this.silhouetteColor,t.silhouetteColor),this.silhouetteSize=(0,o.Z)(this.silhouetteSize,t.silhouetteSize),this.color=(0,o.Z)(this.color,t.color),this.colorBlendMode=(0,o.Z)(this.colorBlendMode,t.colorBlendMode),this.colorBlendAmount=(0,o.Z)(this.colorBlendAmount,t.colorBlendAmount),this.imageBasedLightingFactor=(0,o.Z)(this.imageBasedLightingFactor,t.imageBasedLightingFactor),this.lightColor=(0,o.Z)(this.lightColor,t.lightColor),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition),this.clippingPlanes=(0,o.Z)(this.clippingPlanes,t.clippingPlanes);const e=t.nodeTransformations;if((0,n.Z)(e)){const t=this.nodeTransformations;(0,n.Z)(t)?t.merge(e):this.nodeTransformations=new c.Z(e,h)}const i=t.articulations;if((0,n.Z)(i)){const t=this.articulations;(0,n.Z)(t)?t.merge(i):this.articulations=new c.Z(i)}};const u=d},73112:(t,e,i)=>{i.d(e,{Z:()=>M});var o=i(28474),n=i(52351),s=i(59015),r=i(6785),a=i(54485),l=i(90332),c=i(20176),h=i(71118),d=i(67197),u=i(30562),p=i(16272),Z=i(53273),f=i(13715),g=i(49616),m=i(87546),y=i(19157);const _=g.Z.ENABLED,v=p.Z.NONE,w=r.Z.RED,C=r.Z.WHITE,b=u.Z.HIGHLIGHT,O=new s.Z(1,1),x=new h.Z,T=new h.Z;function D(t,e){if(!(0,a.Z)(t))throw new c.Z("scene is required.");if(!(0,a.Z)(e))throw new c.Z("entityCollection is required.");e.collectionChanged.addEventListener(D.prototype._onCollectionChanged,this),this._scene=t,this._primitives=t.primitives,this._entityCollection=e,this._modelHash={},this._entitiesToVisualize=new o.Z,this._onCollectionChanged(e,e.values,[],[])}function P(t,e,i,o){const n=i[e.id];(0,a.Z)(n)&&(o.removeAndDestroy(n.modelPrimitive),delete i[e.id])}function E(t,e){const i=e[t.id];(0,a.Z)(i)&&(i.nodeTransformationsScratch={},i.articulationsScratch={})}function S(t,e,i){t.readyPromise.catch((function(t){i[e.id].loadFail=!0}))}D.prototype.update=function(t){if(!(0,a.Z)(t))throw new c.Z("time is required.");const e=this._entitiesToVisualize.values,i=this._modelHash,o=this._primitives;for(let n=0,s=e.length;n<s;n++){const s=e[n],r=s._model;let l,c,u=i[s.id],p=s.isShowing&&s.isAvailable(t)&&y.Z.getValueOrDefault(r._show,t,!0);if(p&&(c=s.computeModelMatrix(t,x),l=d.Z.createIfNeeded(y.Z.getValueOrUndefined(r._uri,t)),p=(0,a.Z)(c)&&(0,a.Z)(l)),!p){(0,a.Z)(u)&&(u.modelPrimitive.show=!1);continue}let g=(0,a.Z)(u)?u.modelPrimitive:void 0;if((0,a.Z)(g)&&l.url===u.url||((0,a.Z)(g)&&(o.removeAndDestroy(g),delete i[s.id]),g=Z.Z.fromGltf({url:l,incrementallyLoadTextures:y.Z.getValueOrDefault(r._incrementallyLoadTextures,t,true),scene:this._scene}),g.id=s,o.add(g),u={modelPrimitive:g,url:l.url,animationsRunning:!1,nodeTransformationsScratch:{},articulationsScratch:{},loadFail:!1},i[s.id]=u,S(g,s,i)),g.show=!0,g.scale=y.Z.getValueOrDefault(r._scale,t,1),g.minimumPixelSize=y.Z.getValueOrDefault(r._minimumPixelSize,t,0),g.maximumScale=y.Z.getValueOrUndefined(r._maximumScale,t),g.modelMatrix=h.Z.clone(c,g.modelMatrix),g.shadows=y.Z.getValueOrDefault(r._shadows,t,_),g.heightReference=y.Z.getValueOrDefault(r._heightReference,t,v),g.distanceDisplayCondition=y.Z.getValueOrUndefined(r._distanceDisplayCondition,t),g.silhouetteColor=y.Z.getValueOrDefault(r._silhouetteColor,t,w,g._silhouetteColor),g.silhouetteSize=y.Z.getValueOrDefault(r._silhouetteSize,t,0),g.color=y.Z.getValueOrDefault(r._color,t,C,g._color),g.colorBlendMode=y.Z.getValueOrDefault(r._colorBlendMode,t,b),g.colorBlendAmount=y.Z.getValueOrDefault(r._colorBlendAmount,t,.5),g.clippingPlanes=y.Z.getValueOrUndefined(r._clippingPlanes,t),g.clampAnimations=y.Z.getValueOrDefault(r._clampAnimations,t,true),g.imageBasedLighting.imageBasedLightingFactor=y.Z.getValueOrDefault(r._imageBasedLightingFactor,t,O),g.lightColor=y.Z.getValueOrUndefined(r._lightColor,t),g.ready){const e=y.Z.getValueOrDefault(r._runAnimations,t,!0);u.animationsRunning!==e&&(e?g.activeAnimations.addAll({loop:f.Z.REPEAT}):g.activeAnimations.removeAll(),u.animationsRunning=e);const i=y.Z.getValueOrUndefined(r._nodeTransformations,t,u.nodeTransformationsScratch);if((0,a.Z)(i)){const t=Object.keys(i);for(let e=0,o=t.length;e<o;++e){const o=t[e],n=i[o];if(!(0,a.Z)(n))continue;const s=g.getNode(o);if(!(0,a.Z)(s))continue;const r=h.Z.fromTranslationRotationScale(n,T);s.matrix=h.Z.multiply(s.originalMatrix,r,r)}}let o=!1;const n=y.Z.getValueOrUndefined(r._articulations,t,u.articulationsScratch);if((0,a.Z)(n)){const t=Object.keys(n);for(let e=0,i=t.length;e<i;++e){const i=t[e],s=n[i];(0,a.Z)(s)&&(o=!0,g.setArticulationStage(i,s))}}o&&g.applyArticulations()}}return!0},D.prototype.isDestroyed=function(){return!1},D.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(D.prototype._onCollectionChanged,this);const t=this._entitiesToVisualize.values,e=this._modelHash,i=this._primitives;for(let o=t.length-1;o>-1;o--)P(this,t[o],e,i);return(0,l.Z)(this)},D.prototype.getBoundingSphere=function(t,e){if(!(0,a.Z)(t))throw new c.Z("entity is required.");if(!(0,a.Z)(e))throw new c.Z("result is required.");const i=this._modelHash[t.id];if(!(0,a.Z)(i)||i.loadFail)return m.Z.FAILED;const o=i.modelPrimitive;if(!(0,a.Z)(o)||!o.show)return m.Z.FAILED;if(!o.ready)return m.Z.PENDING;if(o.heightReference===p.Z.NONE)n.Z.transform(o.boundingSphereInternal,o.modelMatrix,e);else{if(!(0,a.Z)(o._clampedModelMatrix))return m.Z.PENDING;n.Z.transform(o.boundingSphereInternal,o._clampedModelMatrix,e)}return m.Z.DONE},D.prototype._onCollectionChanged=function(t,e,i,o){let n,s;const r=this._entitiesToVisualize,l=this._modelHash,c=this._primitives;for(n=e.length-1;n>-1;n--)s=e[n],(0,a.Z)(s._model)&&(0,a.Z)(s._position)&&r.set(s.id,s);for(n=o.length-1;n>-1;n--)s=o[n],(0,a.Z)(s._model)&&(0,a.Z)(s._position)?(E(s,l),r.set(s.id,s)):(P(this,s,l,c),r.remove(s.id));for(n=i.length-1;n>-1;n--)s=i[n],P(this,s,l,c),r.remove(s.id)};const M=D},14136:(t,e,i)=>{i.d(e,{Z:()=>d});var o=i(88779),n=i(54485),s=i(92893),r=i(4135),a=i(37105),l=i(19157);const c=new r.Z;function h(t){t=(0,o.Z)(t,o.Z.EMPTY_OBJECT),this._definitionChanged=new s.Z,this._translation=void 0,this._translationSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._scale=void 0,this._scaleSubscription=void 0,this.translation=t.translation,this.rotation=t.rotation,this.scale=t.scale}Object.defineProperties(h.prototype,{isConstant:{get:function(){return l.Z.isConstant(this._translation)&&l.Z.isConstant(this._rotation)&&l.Z.isConstant(this._scale)}},definitionChanged:{get:function(){return this._definitionChanged}},translation:(0,a.Z)("translation"),rotation:(0,a.Z)("rotation"),scale:(0,a.Z)("scale")}),h.prototype.getValue=function(t,e){return(0,n.Z)(e)||(e=new r.Z),e.translation=l.Z.getValueOrClonedDefault(this._translation,t,c.translation,e.translation),e.rotation=l.Z.getValueOrClonedDefault(this._rotation,t,c.rotation,e.rotation),e.scale=l.Z.getValueOrClonedDefault(this._scale,t,c.scale,e.scale),e},h.prototype.equals=function(t){return this===t||t instanceof h&&l.Z.equals(this._translation,t._translation)&&l.Z.equals(this._rotation,t._rotation)&&l.Z.equals(this._scale,t._scale)};const d=h},83040:(t,e,i)=>{i.d(e,{Z:()=>h});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(78731),l=i(37105);function c(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._leadTime=void 0,this._leadTimeSubscription=void 0,this._trailTime=void 0,this._trailTimeSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._resolution=void 0,this._resolutionSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(c.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.Z)("show"),leadTime:(0,l.Z)("leadTime"),trailTime:(0,l.Z)("trailTime"),width:(0,l.Z)("width"),resolution:(0,l.Z)("resolution"),material:(0,a.Z)("material"),distanceDisplayCondition:(0,l.Z)("distanceDisplayCondition")}),c.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.leadTime=this.leadTime,t.trailTime=this.trailTime,t.width=this.width,t.resolution=this.resolution,t.material=this.material,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new c(this)},c.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.leadTime=(0,o.Z)(this.leadTime,t.leadTime),this.trailTime=(0,o.Z)(this.trailTime,t.trailTime),this.width=(0,o.Z)(this.width,t.width),this.resolution=(0,o.Z)(this.resolution,t.resolution),this.material=(0,o.Z)(this.material,t.material),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition)};const h=c},76015:(t,e,i)=>{i.d(e,{Z:()=>I});var o=i(28474),n=i(93517),s=i(54485),r=i(90332),a=i(20176),l=i(97262),c=i(39109),h=i(71118),d=i(31163),u=i(78368),p=i(7004),Z=i(13830),f=i(18061),g=i(36655),m=i(30032),y=i(39613),_=i(19157),v=i(39351),w=i(21144),C=i(20909),b=i(78490);const O=new u.Z,x=new u.Z,T=new u.Z;function D(t){this.entity=t,this.polyline=void 0,this.index=void 0,this.updater=void 0}function P(t,e,i,o,n,r,a,c){for(;t instanceof v.Z;)t=t.resolvedProperty;if(t instanceof w.Z){a=function(t,e,i,o,n,r,a,c,h){let d,u=c;d=t.getValueInReferenceFrame(e,r,h[u]),(0,s.Z)(d)&&(h[u++]=d);let p=!(0,s.Z)(n)||l.Z.lessThanOrEquals(n,e)||l.Z.greaterThanOrEquals(n,i),Z=0;const f=o.length;let g=o[Z];const m=i;let y,_,v,w=!1;for(;Z<f;){if(!p&&l.Z.greaterThanOrEquals(g,n)&&(d=t.getValueInReferenceFrame(n,r,h[u]),(0,s.Z)(d)&&(h[u++]=d),p=!0),l.Z.greaterThan(g,e)&&l.Z.lessThan(g,m)&&!g.equals(n)&&(d=t.getValueInReferenceFrame(g,r,h[u]),(0,s.Z)(d)&&(h[u++]=d)),Z<f-1){if(a>0&&!w){const t=o[Z+1],e=l.Z.secondsDifference(t,g);w=e>a,w&&(y=Math.ceil(e/a),_=0,v=e/Math.max(y,2),y=Math.max(y-1,1))}if(w&&_<y){g=l.Z.addSeconds(g,v,new l.Z),_++;continue}}w=!1,Z++,g=o[Z]}return d=t.getValueInReferenceFrame(i,r,h[u]),(0,s.Z)(d)&&(h[u++]=d),u}(t,e,i,t._property._times,o,n,r,a,c)}else a=t instanceof g.Z?function(t,e,i,o,n,s,r,a){x.start=e,x.stop=i;let c=r;const h=t.intervals;for(let t=0;t<h.length;t++){const r=h.get(t);if(!u.Z.intersect(r,x,O).isEmpty){const t=r.start,h=r.stop;let d=e;l.Z.greaterThan(t,d)&&(d=t);let u=i;l.Z.lessThan(h,u)&&(u=h),c=P(r.data,d,u,o,n,s,c,a)}}return c}(t,e,i,o,n,r,a,c):t instanceof b.Z?function(t,e,i,o,n,r,a,c){T.start=e,T.stop=i;let h=a;const d=t.intervals;for(let e=0;e<d.length;e++){const i=d.get(e);if(!u.Z.intersect(i,T,O).isEmpty){let e=i.start;i.isStartIncluded||(e=i.isStopIncluded?i.stop:l.Z.addSeconds(i.start,l.Z.secondsDifference(i.stop,i.start)/2,new l.Z));const o=t.getValueInReferenceFrame(e,n,c[h]);(0,s.Z)(o)&&(c[h]=o,h++)}}return h}(t,e,i,0,n,0,a,c):t instanceof m.Z||t instanceof C.Z&&_.Z.isConstant(t)?function(t,e,i,o,n,r,a,l){const c=t.getValueInReferenceFrame(e,n,l[a]);return(0,s.Z)(c)&&(l[a++]=c),a}(t,e,0,0,n,0,a,c):function(t,e,i,o,n,r,a,c){let h,d=0,u=a,p=e;const Z=Math.max(r,60);let f=!(0,s.Z)(o)||l.Z.lessThanOrEquals(o,e)||l.Z.greaterThanOrEquals(o,i);for(;l.Z.lessThan(p,i);)!f&&l.Z.greaterThanOrEquals(p,o)&&(f=!0,h=t.getValueInReferenceFrame(o,n,c[u]),(0,s.Z)(h)&&(c[u]=h,u++)),h=t.getValueInReferenceFrame(p,n,c[u]),(0,s.Z)(h)&&(c[u]=h,u++),d++,p=l.Z.addSeconds(e,Z*d,new l.Z);return h=t.getValueInReferenceFrame(i,n,c[u]),(0,s.Z)(h)&&(c[u]=h,u++),u}(t,e,i,o,n,r,a,c);return a}function E(t,e,i,o,n,r,a){(0,s.Z)(a)||(a=[]);const l=P(t,e,i,o,n,r,0,a);return a.length=l,a}const S=new c.Z;function M(t,e){this._unusedIndexes=[],this._polylineCollection=new Z.Z,this._scene=t,this._referenceFrame=e,t.primitives.add(this._polylineCollection)}function k(t,e){if(!(0,s.Z)(t))throw new a.Z("scene is required.");if(!(0,s.Z)(e))throw new a.Z("entityCollection is required.");e.collectionChanged.addEventListener(k.prototype._onCollectionChanged,this),this._scene=t,this._updaters={},this._entityCollection=e,this._items=new o.Z,this._onCollectionChanged(e,e.values,[],[])}M.prototype.update=function(t){if(this._referenceFrame===d.Z.INERTIAL){let e=p.Z.computeIcrfToFixedMatrix(t,S);(0,s.Z)(e)||(e=p.Z.computeTemeToPseudoFixedMatrix(t,S)),h.Z.fromRotationTranslation(e,n.Z.ZERO,this._polylineCollection.modelMatrix)}},M.prototype.updateObject=function(t,e){const i=e.entity,o=i._path,n=i._position;let r,a;const c=o._show;let h=e.polyline,d=i.isShowing&&i.isAvailable(t)&&(!(0,s.Z)(c)||c.getValue(t));if(d){const e=_.Z.getValueOrUndefined(o._leadTime,t),n=_.Z.getValueOrUndefined(o._trailTime,t),c=i._availability,h=(0,s.Z)(c),u=(0,s.Z)(e),p=(0,s.Z)(n);if(d=h||u&&p,d){if(p&&(r=l.Z.addSeconds(t,-n,new l.Z)),u&&(a=l.Z.addSeconds(t,e,new l.Z)),h){const t=c.start,e=c.stop;p&&!l.Z.greaterThan(t,r)||(r=t),u&&!l.Z.lessThan(e,a)||(a=e)}d=l.Z.lessThan(r,a)}}if(!d)return void((0,s.Z)(h)&&(this._unusedIndexes.push(e.index),e.polyline=void 0,h.show=!1,e.index=void 0));if(!(0,s.Z)(h)){const t=this._unusedIndexes;if(t.length>0){const i=t.pop();h=this._polylineCollection.get(i),e.index=i}else e.index=this._polylineCollection.length,h=this._polylineCollection.add();h.id=i,e.polyline=h}const u=_.Z.getValueOrDefault(o._resolution,t,60);h.show=!0,h.positions=E(n,r,a,t,this._referenceFrame,u,h.positions.slice()),h.material=y.Z.getValue(t,o._material,h.material),h.width=_.Z.getValueOrDefault(o._width,t,1),h.distanceDisplayCondition=_.Z.getValueOrUndefined(o._distanceDisplayCondition,t,h.distanceDisplayCondition)},M.prototype.removeObject=function(t){const e=t.polyline;(0,s.Z)(e)&&(this._unusedIndexes.push(t.index),t.polyline=void 0,e.show=!1,e.id=void 0,t.index=void 0)},M.prototype.destroy=function(){return this._scene.primitives.remove(this._polylineCollection),(0,r.Z)(this)},k.prototype.update=function(t){if(!(0,s.Z)(t))throw new a.Z("time is required.");const e=this._updaters;for(const i in e)e.hasOwnProperty(i)&&e[i].update(t);const i=this._items.values;if(0===i.length&&(0,s.Z)(this._updaters)&&Object.keys(this._updaters).length>0){for(const t in e)e.hasOwnProperty(t)&&e[t].destroy();this._updaters={}}for(let e=0,o=i.length;e<o;e++){const o=i[e],n=o.entity._position,r=o.updater;let a=d.Z.FIXED;this._scene.mode===f.Z.SCENE3D&&(a=n.referenceFrame);let l=this._updaters[a];r===l&&(0,s.Z)(l)?l.updateObject(t,o):((0,s.Z)(r)&&r.removeObject(o),(0,s.Z)(l)||(l=new M(this._scene,a),l.update(t),this._updaters[a]=l),o.updater=l,(0,s.Z)(l)&&l.updateObject(t,o))}return!0},k.prototype.isDestroyed=function(){return!1},k.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(k.prototype._onCollectionChanged,this);const t=this._updaters;for(const e in t)t.hasOwnProperty(e)&&t[e].destroy();return(0,r.Z)(this)},k.prototype._onCollectionChanged=function(t,e,i,o){let n,r,a;const l=this._items;for(n=e.length-1;n>-1;n--)r=e[n],(0,s.Z)(r._path)&&(0,s.Z)(r._position)&&l.set(r.id,new D(r));for(n=o.length-1;n>-1;n--)r=o[n],(0,s.Z)(r._path)&&(0,s.Z)(r._position)?l.contains(r.id)||l.set(r.id,new D(r)):(a=l.get(r.id),(0,s.Z)(a)&&((0,s.Z)(a.updater)&&a.updater.removeObject(a),l.remove(r.id)));for(n=i.length-1;n>-1;n--)r=i[n],a=l.get(r.id),(0,s.Z)(a)&&((0,s.Z)(a.updater)&&a.updater.removeObject(a),l.remove(r.id))},k._subSample=E;const I=k},87586:(t,e,i)=>{i.d(e,{Z:()=>N});var o=i(93517),n=i(17497),s=i(6785),r=i(41631),a=i(54485),l=i(20176),c=i(64493),h=i(78224),d=i(18926),u=i(22874),p=i(39109),Z=i(71118),f=i(84503),g=i(14206),m=i(9008),y=i(41656),_=i(73020),v=i(3334),w=i(58034),C=i(31969),b=i(19157);const O=new o.Z,x=new s.Z;function T(t){this.id=t,this.vertexFormat=void 0,this.plane=void 0,this.dimensions=void 0}function D(t,e){C.Z.call(this,{entity:t,scene:e,geometryOptions:new T(t),geometryPropertyName:"plane",observedPropertyNames:["availability","position","orientation","plane"]}),this._onEntityPropertyChanged(t,"plane",t.plane,void 0)}function P(t,e,i){w.Z.call(this,t,e,i)}(0,a.Z)(Object.create)&&(D.prototype=Object.create(C.Z.prototype),D.prototype.constructor=D),D.prototype.createFillGeometryInstance=function(t){if(n.Z.defined("time",t),!this._fillEnabled)throw new l.Z("This instance does not represent a filled geometry.");const e=this._entity,i=e.isAvailable(t);let o,d;const u=new m.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),p=this._distanceDisplayConditionProperty.getValue(t),Z=c.Z.fromDistanceDisplayCondition(p);if(this._materialProperty instanceof v.Z){let e;(0,a.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||i)&&(e=this._materialProperty.color.getValue(t,x)),(0,a.Z)(e)||(e=s.Z.WHITE),d=r.Z.fromColor(e),o={show:u,distanceDisplayCondition:Z,color:d}}else o={show:u,distanceDisplayCondition:Z};const g=e.plane,y=this._options;let _=e.computeModelMatrix(t);const w=b.Z.getValueOrDefault(g.plane,t,y.plane),C=b.Z.getValueOrUndefined(g.dimensions,t,y.dimensions);return y.plane=w,y.dimensions=C,_=R(w,C,_,_),new h.Z({id:e,geometry:new f.Z(this._options),modelMatrix:_,attributes:o})},D.prototype.createOutlineGeometryInstance=function(t){if(n.Z.defined("time",t),!this._outlineEnabled)throw new l.Z("This instance does not represent an outlined geometry.");const e=this._entity,i=e.isAvailable(t),o=b.Z.getValueOrDefault(this._outlineColorProperty,t,s.Z.BLACK,x),a=this._distanceDisplayConditionProperty.getValue(t),d=e.plane,u=this._options;let p=e.computeModelMatrix(t);const Z=b.Z.getValueOrDefault(d.plane,t,u.plane),f=b.Z.getValueOrUndefined(d.dimensions,t,u.dimensions);return u.plane=Z,u.dimensions=f,p=R(Z,f,p,p),new h.Z({id:e,geometry:new g.Z,modelMatrix:p,attributes:{show:new m.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:r.Z.fromColor(o),distanceDisplayCondition:c.Z.fromDistanceDisplayCondition(a)}})},D.prototype._isHidden=function(t,e){return!(0,a.Z)(e.plane)||!(0,a.Z)(e.dimensions)||!(0,a.Z)(t.position)||C.Z.prototype._isHidden.call(this,t,e)},D.prototype._getIsClosed=function(t){return!1},D.prototype._isDynamic=function(t,e){return!(t.position.isConstant&&b.Z.isConstant(t.orientation)&&e.plane.isConstant&&e.dimensions.isConstant&&b.Z.isConstant(e.outlineWidth))},D.prototype._setStaticOptions=function(t,e){const i=this._materialProperty instanceof v.Z,o=this._options;o.vertexFormat=i?_.Z.VERTEX_FORMAT:y.Z.MaterialSupport.TEXTURED.vertexFormat,o.plane=e.plane.getValue(d.Z.MINIMUM_VALUE,o.plane),o.dimensions=e.dimensions.getValue(d.Z.MINIMUM_VALUE,o.dimensions)},D.DynamicGeometryUpdater=P,(0,a.Z)(Object.create)&&(P.prototype=Object.create(w.Z.prototype),P.prototype.constructor=P),P.prototype._isHidden=function(t,e,i){const o=this._options,n=b.Z.getValueOrUndefined(t.position,i,O);return!(0,a.Z)(n)||!(0,a.Z)(o.plane)||!(0,a.Z)(o.dimensions)||w.Z.prototype._isHidden.call(this,t,e,i)},P.prototype._setOptions=function(t,e,i){const o=this._options;o.plane=b.Z.getValueOrDefault(e.plane,i,o.plane),o.dimensions=b.Z.getValueOrUndefined(e.dimensions,i,o.dimensions)};const E=new o.Z,S=new o.Z,M=new o.Z,k=new o.Z,I=new p.Z,V=new p.Z,L=new Z.Z;function R(t,e,i,n){const s=t.normal,r=t.distance,a=o.Z.multiplyByScalar(s,-r,M);let l=o.Z.clone(o.Z.UNIT_Z,S);u.Z.equalsEpsilon(Math.abs(o.Z.dot(l,s)),1,u.Z.EPSILON8)&&(l=o.Z.clone(o.Z.UNIT_Y,l));const c=o.Z.cross(l,s,E);l=o.Z.cross(s,c,l),o.Z.normalize(c,c),o.Z.normalize(l,l);const h=I;p.Z.setColumn(h,0,c,h),p.Z.setColumn(h,1,l,h),p.Z.setColumn(h,2,s,h);const d=o.Z.fromElements(e.x,e.y,1,k),f=p.Z.multiplyByScale(h,d,V),g=Z.Z.fromRotationTranslation(f,a,L);return Z.Z.multiplyTransformation(i,g,n)}D.createPrimitiveMatrix=R;const N=D},59564:(t,e,i)=>{i.d(e,{Z:()=>h});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(78731),l=i(37105);function c(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._plane=void 0,this._planeSubscription=void 0,this._dimensions=void 0,this._dimensionsSubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(c.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.Z)("show"),plane:(0,l.Z)("plane"),dimensions:(0,l.Z)("dimensions"),fill:(0,l.Z)("fill"),material:(0,a.Z)("material"),outline:(0,l.Z)("outline"),outlineColor:(0,l.Z)("outlineColor"),outlineWidth:(0,l.Z)("outlineWidth"),shadows:(0,l.Z)("shadows"),distanceDisplayCondition:(0,l.Z)("distanceDisplayCondition")}),c.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.plane=this.plane,t.dimensions=this.dimensions,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new c(this)},c.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.plane=(0,o.Z)(this.plane,t.plane),this.dimensions=(0,o.Z)(this.dimensions,t.dimensions),this.fill=(0,o.Z)(this.fill,t.fill),this.material=(0,o.Z)(this.material,t.material),this.outline=(0,o.Z)(this.outline,t.outline),this.outlineColor=(0,o.Z)(this.outlineColor,t.outlineColor),this.outlineWidth=(0,o.Z)(this.outlineWidth,t.outlineWidth),this.shadows=(0,o.Z)(this.shadows,t.shadows),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition)};const h=c},72054:(t,e,i)=>{i.d(e,{Z:()=>c});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(37105);function l(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._pixelSize=void 0,this._pixelSizeSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._scaleByDistance=void 0,this._scaleByDistanceSubscription=void 0,this._translucencyByDistance=void 0,this._translucencyByDistanceSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._disableDepthTestDistance=void 0,this._disableDepthTestDistanceSubscription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(l.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,a.Z)("show"),pixelSize:(0,a.Z)("pixelSize"),heightReference:(0,a.Z)("heightReference"),color:(0,a.Z)("color"),outlineColor:(0,a.Z)("outlineColor"),outlineWidth:(0,a.Z)("outlineWidth"),scaleByDistance:(0,a.Z)("scaleByDistance"),translucencyByDistance:(0,a.Z)("translucencyByDistance"),distanceDisplayCondition:(0,a.Z)("distanceDisplayCondition"),disableDepthTestDistance:(0,a.Z)("disableDepthTestDistance")}),l.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.pixelSize=this.pixelSize,t.heightReference=this.heightReference,t.color=this.color,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.scaleByDistance=this.scaleByDistance,t.translucencyByDistance=this._translucencyByDistance,t.distanceDisplayCondition=this.distanceDisplayCondition,t.disableDepthTestDistance=this.disableDepthTestDistance,t):new l(this)},l.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.pixelSize=(0,o.Z)(this.pixelSize,t.pixelSize),this.heightReference=(0,o.Z)(this.heightReference,t.heightReference),this.color=(0,o.Z)(this.color,t.color),this.outlineColor=(0,o.Z)(this.outlineColor,t.outlineColor),this.outlineWidth=(0,o.Z)(this.outlineWidth,t.outlineWidth),this.scaleByDistance=(0,o.Z)(this.scaleByDistance,t.scaleByDistance),this.translucencyByDistance=(0,o.Z)(this._translucencyByDistance,t.translucencyByDistance),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition),this.disableDepthTestDistance=(0,o.Z)(this.disableDepthTestDistance,t.disableDepthTestDistance)};const c=l},9686:(t,e,i)=>{i.d(e,{Z:()=>T});var o=i(28474),n=i(93517),s=i(6785),r=i(54485),a=i(90332),l=i(20176),c=i(51178),h=i(14633),d=i(24158),u=i(16272),p=i(87546),Z=i(19157);const f=s.Z.WHITE,g=s.Z.BLACK,m=new s.Z,y=new n.Z,_=new s.Z,v=new h.Z,w=new h.Z,C=new c.Z;function b(t){this.entity=t,this.pointPrimitive=void 0,this.billboard=void 0,this.color=void 0,this.outlineColor=void 0,this.pixelSize=void 0,this.outlineWidth=void 0}function O(t,e){if(!(0,r.Z)(t))throw new l.Z("entityCluster is required.");if(!(0,r.Z)(e))throw new l.Z("entityCollection is required.");e.collectionChanged.addEventListener(O.prototype._onCollectionChanged,this),this._cluster=t,this._entityCollection=e,this._items=new o.Z,this._onCollectionChanged(e,e.values,[],[])}function x(t,e,i){if((0,r.Z)(t)){const o=t.pointPrimitive;if((0,r.Z)(o))return t.pointPrimitive=void 0,void i.removePoint(e);const n=t.billboard;(0,r.Z)(n)&&(t.billboard=void 0,i.removeBillboard(e))}}O.prototype.update=function(t){if(!(0,r.Z)(t))throw new l.Z("time is required.");const e=this._items.values,i=this._cluster;for(let o=0,a=e.length;o<a;o++){const a=e[o],l=a.entity,c=l._point;let h=a.pointPrimitive,p=a.billboard;const b=Z.Z.getValueOrDefault(c._heightReference,t,u.Z.NONE);let O,T=l.isShowing&&l.isAvailable(t)&&Z.Z.getValueOrDefault(c._show,t,!0);if(T&&(O=Z.Z.getValueOrUndefined(l._position,t,y),T=(0,r.Z)(O)),!T){x(a,l,i);continue}Z.Z.isConstant(l._position)||(i._clusterDirty=!0);let D=!1,P=!1;if(b===u.Z.NONE||(0,r.Z)(p)?b!==u.Z.NONE||(0,r.Z)(h)||((0,r.Z)(p)&&(x(a,l,i),p=void 0),h=i.getPoint(l),h.id=l,a.pointPrimitive=h):((0,r.Z)(h)&&(x(a,l,i),h=void 0),p=i.getBillboard(l),p.id=l,p.image=void 0,a.billboard=p,D=!0,P=n.Z.equals(p.position,O)&&p.heightReference===b),(0,r.Z)(h))h.show=!0,h.position=O,h.scaleByDistance=Z.Z.getValueOrUndefined(c._scaleByDistance,t,v),h.translucencyByDistance=Z.Z.getValueOrUndefined(c._translucencyByDistance,t,w),h.color=Z.Z.getValueOrDefault(c._color,t,f,m),h.outlineColor=Z.Z.getValueOrDefault(c._outlineColor,t,g,_),h.outlineWidth=Z.Z.getValueOrDefault(c._outlineWidth,t,0),h.pixelSize=Z.Z.getValueOrDefault(c._pixelSize,t,1),h.distanceDisplayCondition=Z.Z.getValueOrUndefined(c._distanceDisplayCondition,t,C),h.disableDepthTestDistance=Z.Z.getValueOrDefault(c._disableDepthTestDistance,t,0);else if((0,r.Z)(p)){p.show=!0,p.position=O,p.scaleByDistance=Z.Z.getValueOrUndefined(c._scaleByDistance,t,v),p.translucencyByDistance=Z.Z.getValueOrUndefined(c._translucencyByDistance,t,w),p.distanceDisplayCondition=Z.Z.getValueOrUndefined(c._distanceDisplayCondition,t,C),p.disableDepthTestDistance=Z.Z.getValueOrDefault(c._disableDepthTestDistance,t,0),p.heightReference=b;const e=Z.Z.getValueOrDefault(c._color,t,f,m),i=Z.Z.getValueOrDefault(c._outlineColor,t,g,_),o=Math.round(Z.Z.getValueOrDefault(c._outlineWidth,t,0));let n=Math.max(1,Math.round(Z.Z.getValueOrDefault(c._pixelSize,t,1)));if(o>0?(p.scale=1,D=D||o!==a.outlineWidth||n!==a.pixelSize||!s.Z.equals(e,a.color)||!s.Z.equals(i,a.outlineColor)):(p.scale=n/50,n=50,D=D||o!==a.outlineWidth||!s.Z.equals(e,a.color)||!s.Z.equals(i,a.outlineColor)),D){a.color=s.Z.clone(e,a.color),a.outlineColor=s.Z.clone(i,a.outlineColor),a.pixelSize=n,a.outlineWidth=o;const t=e.alpha,r=e.toCssColorString(),l=i.toCssColorString(),c=JSON.stringify([r,n,l,o]);p.setImage(c,(0,d.Z)(t,r,l,o,n))}P&&p._updateClamping()}}return!0},O.prototype.getBoundingSphere=function(t,e){if(!(0,r.Z)(t))throw new l.Z("entity is required.");if(!(0,r.Z)(e))throw new l.Z("result is required.");const i=this._items.get(t.id);if(!(0,r.Z)(i)||!(0,r.Z)(i.pointPrimitive)&&!(0,r.Z)(i.billboard))return p.Z.FAILED;if((0,r.Z)(i.pointPrimitive))e.center=n.Z.clone(i.pointPrimitive.position,e.center);else{const t=i.billboard;if(!(0,r.Z)(t._clampedPosition))return p.Z.PENDING;e.center=n.Z.clone(t._clampedPosition,e.center)}return e.radius=0,p.Z.DONE},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){this._entityCollection.collectionChanged.removeEventListener(O.prototype._onCollectionChanged,this);const t=this._entityCollection.values;for(let e=0;e<t.length;e++)this._cluster.removePoint(t[e]);return(0,a.Z)(this)},O.prototype._onCollectionChanged=function(t,e,i,o){let n,s;const a=this._items,l=this._cluster;for(n=e.length-1;n>-1;n--)s=e[n],(0,r.Z)(s._point)&&(0,r.Z)(s._position)&&a.set(s.id,new b(s));for(n=o.length-1;n>-1;n--)s=o[n],(0,r.Z)(s._point)&&(0,r.Z)(s._position)?a.contains(s.id)||a.set(s.id,new b(s)):(x(a.get(s.id),s,l),a.remove(s.id));for(n=i.length-1;n>-1;n--)s=i[n],x(a.get(s.id),s,l),a.remove(s.id)};const T=O},77533:(t,e,i)=>{i.d(e,{Z:()=>W});var o=i(93237),n=i(85162),s=i(59015),r=i(93517),a=i(17497),l=i(6785),c=i(41631),h=i(26610),d=i(8206),u=i(54485),p=i(20176),Z=i(64493),f=i(60794),g=i(78224),m=i(18926),y=i(6206),_=i(53513),v=i(66554),w=i(99958),C=i(34152),b=i(9008),O=i(16272),x=i(41656),T=i(73020),D=i(3334),P=i(58034),E=i(31969),S=i(47106),M=i(19157);const k="Entity polygons cannot have both height and perPositionHeight.  height will be ignored",I="heightReference is not supported for entity polygons with perPositionHeight. heightReference will be ignored",V=new l.Z,L=r.Z.ZERO,R=new r.Z,N=new C.Z,B=[],A=new s.Z;function U(t){this.id=t,this.vertexFormat=void 0,this.polygonHierarchy=void 0,this.perPositionHeight=void 0,this.closeTop=void 0,this.closeBottom=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.offsetAttribute=void 0,this.arcType=void 0,this.textureCoordinates=void 0}function H(t,e){S.Z.call(this,{entity:t,scene:e,geometryOptions:new U(t),geometryPropertyName:"polygon",observedPropertyNames:["availability","polygon"]}),this._onEntityPropertyChanged(t,"polygon",t.polygon,void 0)}function F(t,e,i){P.Z.call(this,t,e,i)}(0,u.Z)(Object.create)&&(H.prototype=Object.create(S.Z.prototype),H.prototype.constructor=H),H.prototype.createFillGeometryInstance=function(t){if(a.Z.defined("time",t),!this._fillEnabled)throw new p.Z("This instance does not represent a filled geometry.");const e=this._entity,i=e.isAvailable(t),o=this._options,n={show:new b.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:Z.Z.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};if(this._materialProperty instanceof D.Z){let e;(0,u.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||i)&&(e=this._materialProperty.color.getValue(t,V)),(0,u.Z)(e)||(e=l.Z.WHITE),n.color=c.Z.fromColor(e)}let s;return(0,u.Z)(o.offsetAttribute)&&(n.offset=y.Z.fromCartesian3(M.Z.getValueOrDefault(this._terrainOffsetProperty,t,L,R))),s=o.perPositionHeight&&!(0,u.Z)(o.extrudedHeight)?new h.Z(o):new v.Z(o),new g.Z({id:e,geometry:s,attributes:n})},H.prototype.createOutlineGeometryInstance=function(t){if(a.Z.defined("time",t),!this._outlineEnabled)throw new p.Z("This instance does not represent an outlined geometry.");const e=this._entity,i=e.isAvailable(t),o=this._options,n=M.Z.getValueOrDefault(this._outlineColorProperty,t,l.Z.BLACK,V),s=this._distanceDisplayConditionProperty.getValue(t),r={show:new b.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:c.Z.fromColor(n),distanceDisplayCondition:Z.Z.fromDistanceDisplayCondition(s),offset:void 0};let h;return(0,u.Z)(o.offsetAttribute)&&(r.offset=y.Z.fromCartesian3(M.Z.getValueOrDefault(this._terrainOffsetProperty,t,L,R))),h=o.perPositionHeight&&!(0,u.Z)(o.extrudedHeight)?new d.Z(o):new w.Z(o),new g.Z({id:e,geometry:h,attributes:r})},H.prototype._computeCenter=function(t,e){const i=M.Z.getValueOrUndefined(this._entity.polygon.hierarchy,t);if(!(0,u.Z)(i))return;const o=i.positions;if(0===o.length)return;const n=this._scene.mapProjection.ellipsoid,r=f.Z.fromPoints(o,n),a=r.projectPointsOntoPlane(o,B),l=a.length;let c=0,h=l-1,d=new s.Z;for(let t=0;t<l;h=t++){const e=a[t],i=a[h],o=e.x*i.y-i.x*e.y;let n=s.Z.add(e,i,A);n=s.Z.multiplyByScalar(n,o,n),d=s.Z.add(d,n,d),c+=o}const p=1/(3*c);return d=s.Z.multiplyByScalar(d,p,d),r.projectPointOntoEllipsoid(d,e)},H.prototype._isHidden=function(t,e){return!(0,u.Z)(e.hierarchy)||E.Z.prototype._isHidden.call(this,t,e)},H.prototype._isOnTerrain=function(t,e){const i=S.Z.prototype._isOnTerrain.call(this,t,e),o=e.perPositionHeight,n=(0,u.Z)(o)&&(!o.isConstant||o.getValue(m.Z.MINIMUM_VALUE));return i&&!n},H.prototype._isDynamic=function(t,e){return!e.hierarchy.isConstant||!M.Z.isConstant(e.height)||!M.Z.isConstant(e.extrudedHeight)||!M.Z.isConstant(e.granularity)||!M.Z.isConstant(e.stRotation)||!M.Z.isConstant(e.textureCoordinates)||!M.Z.isConstant(e.outlineWidth)||!M.Z.isConstant(e.perPositionHeight)||!M.Z.isConstant(e.closeTop)||!M.Z.isConstant(e.closeBottom)||!M.Z.isConstant(e.zIndex)||!M.Z.isConstant(e.arcType)||this._onTerrain&&!M.Z.isConstant(this._materialProperty)&&!(this._materialProperty instanceof D.Z)},H.prototype._setStaticOptions=function(t,e){const i=this._materialProperty instanceof D.Z,s=this._options;s.vertexFormat=i?T.Z.VERTEX_FORMAT:x.Z.MaterialSupport.TEXTURED.vertexFormat;const r=e.hierarchy.getValue(m.Z.MINIMUM_VALUE);let a=M.Z.getValueOrUndefined(e.height,m.Z.MINIMUM_VALUE);const l=M.Z.getValueOrDefault(e.heightReference,m.Z.MINIMUM_VALUE,O.Z.NONE);let c=M.Z.getValueOrUndefined(e.extrudedHeight,m.Z.MINIMUM_VALUE);const h=M.Z.getValueOrDefault(e.extrudedHeightReference,m.Z.MINIMUM_VALUE,O.Z.NONE),d=M.Z.getValueOrDefault(e.perPositionHeight,m.Z.MINIMUM_VALUE,!1);let p;a=S.Z.getGeometryHeight(a,l),d?((0,u.Z)(a)&&(a=void 0,(0,_.Z)(k)),l!==O.Z.NONE&&d&&(a=void 0,(0,_.Z)(I))):((0,u.Z)(c)&&!(0,u.Z)(a)&&(a=0),p=S.Z.computeGeometryOffsetAttribute(a,l,c,h)),s.polygonHierarchy=r,s.granularity=M.Z.getValueOrUndefined(e.granularity,m.Z.MINIMUM_VALUE),s.stRotation=M.Z.getValueOrUndefined(e.stRotation,m.Z.MINIMUM_VALUE),s.perPositionHeight=d,s.closeTop=M.Z.getValueOrDefault(e.closeTop,m.Z.MINIMUM_VALUE,!0),s.closeBottom=M.Z.getValueOrDefault(e.closeBottom,m.Z.MINIMUM_VALUE,!0),s.offsetAttribute=p,s.height=a,s.arcType=M.Z.getValueOrDefault(e.arcType,m.Z.MINIMUM_VALUE,n.Z.GEODESIC),s.textureCoordinates=M.Z.getValueOrUndefined(e.textureCoordinates,m.Z.MINIMUM_VALUE),c=S.Z.getGeometryExtrudedHeight(c,h),c===S.Z.CLAMP_TO_GROUND&&(c=o.Z.getMinimumMaximumHeights(v.Z.computeRectangle(s,N)).minimumTerrainHeight),s.extrudedHeight=c},H.prototype._getIsClosed=function(t){const e=t.height,i=t.extrudedHeight,o=(0,u.Z)(i)&&i!==e;return!t.perPositionHeight&&(!o&&0===e||o&&t.closeTop&&t.closeBottom)},H.DynamicGeometryUpdater=F,(0,u.Z)(Object.create)&&(F.prototype=Object.create(P.Z.prototype),F.prototype.constructor=F),F.prototype._isHidden=function(t,e,i){return!(0,u.Z)(this._options.polygonHierarchy)||P.Z.prototype._isHidden.call(this,t,e,i)},F.prototype._setOptions=function(t,e,i){const s=this._options;s.polygonHierarchy=M.Z.getValueOrUndefined(e.hierarchy,i);let r=M.Z.getValueOrUndefined(e.height,i);const a=M.Z.getValueOrDefault(e.heightReference,i,O.Z.NONE),l=M.Z.getValueOrDefault(e.extrudedHeightReference,i,O.Z.NONE);let c=M.Z.getValueOrUndefined(e.extrudedHeight,i);const h=M.Z.getValueOrUndefined(e.perPositionHeight,i);let d;r=S.Z.getGeometryHeight(r,l),h?((0,u.Z)(r)&&(r=void 0,(0,_.Z)(k)),a!==O.Z.NONE&&h&&(r=void 0,(0,_.Z)(I))):((0,u.Z)(c)&&!(0,u.Z)(r)&&(r=0),d=S.Z.computeGeometryOffsetAttribute(r,a,c,l)),s.granularity=M.Z.getValueOrUndefined(e.granularity,i),s.stRotation=M.Z.getValueOrUndefined(e.stRotation,i),s.textureCoordinates=M.Z.getValueOrUndefined(e.textureCoordinates,i),s.perPositionHeight=M.Z.getValueOrUndefined(e.perPositionHeight,i),s.closeTop=M.Z.getValueOrDefault(e.closeTop,i,!0),s.closeBottom=M.Z.getValueOrDefault(e.closeBottom,i,!0),s.offsetAttribute=d,s.height=r,s.arcType=M.Z.getValueOrDefault(e.arcType,i,n.Z.GEODESIC),c=S.Z.getGeometryExtrudedHeight(c,l),c===S.Z.CLAMP_TO_GROUND&&(c=o.Z.getMinimumMaximumHeights(v.Z.computeRectangle(s,N)).minimumTerrainHeight),s.extrudedHeight=c};const W=H},56728:(t,e,i)=>{i.d(e,{Z:()=>u});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(46807),l=i(9234),c=i(78731),h=i(37105);function d(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._hierarchy=void 0,this._hierarchySubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._perPositionHeight=void 0,this._perPositionHeightSubscription=void 0,this._closeTop=void 0,this._closeTopSubscription=void 0,this._closeBottom=void 0,this._closeBottomSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this._textureCoordinates=void 0,this._textureCoordinatesSubscription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(d.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,h.Z)("show"),hierarchy:(0,h.Z)("hierarchy",void 0,(function(t){return Array.isArray(t)&&(t=new a.Z(t)),new l.Z(t)})),height:(0,h.Z)("height"),heightReference:(0,h.Z)("heightReference"),extrudedHeight:(0,h.Z)("extrudedHeight"),extrudedHeightReference:(0,h.Z)("extrudedHeightReference"),stRotation:(0,h.Z)("stRotation"),granularity:(0,h.Z)("granularity"),fill:(0,h.Z)("fill"),material:(0,c.Z)("material"),outline:(0,h.Z)("outline"),outlineColor:(0,h.Z)("outlineColor"),outlineWidth:(0,h.Z)("outlineWidth"),perPositionHeight:(0,h.Z)("perPositionHeight"),closeTop:(0,h.Z)("closeTop"),closeBottom:(0,h.Z)("closeBottom"),arcType:(0,h.Z)("arcType"),shadows:(0,h.Z)("shadows"),distanceDisplayCondition:(0,h.Z)("distanceDisplayCondition"),classificationType:(0,h.Z)("classificationType"),zIndex:(0,h.Z)("zIndex"),textureCoordinates:(0,h.Z)("textureCoordinates")}),d.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.hierarchy=this.hierarchy,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.stRotation=this.stRotation,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.perPositionHeight=this.perPositionHeight,t.closeTop=this.closeTop,t.closeBottom=this.closeBottom,t.arcType=this.arcType,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t.textureCoordinates=this.textureCoordinates,t):new d(this)},d.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.hierarchy=(0,o.Z)(this.hierarchy,t.hierarchy),this.height=(0,o.Z)(this.height,t.height),this.heightReference=(0,o.Z)(this.heightReference,t.heightReference),this.extrudedHeight=(0,o.Z)(this.extrudedHeight,t.extrudedHeight),this.extrudedHeightReference=(0,o.Z)(this.extrudedHeightReference,t.extrudedHeightReference),this.stRotation=(0,o.Z)(this.stRotation,t.stRotation),this.granularity=(0,o.Z)(this.granularity,t.granularity),this.fill=(0,o.Z)(this.fill,t.fill),this.material=(0,o.Z)(this.material,t.material),this.outline=(0,o.Z)(this.outline,t.outline),this.outlineColor=(0,o.Z)(this.outlineColor,t.outlineColor),this.outlineWidth=(0,o.Z)(this.outlineWidth,t.outlineWidth),this.perPositionHeight=(0,o.Z)(this.perPositionHeight,t.perPositionHeight),this.closeTop=(0,o.Z)(this.closeTop,t.closeTop),this.closeBottom=(0,o.Z)(this.closeBottom,t.closeBottom),this.arcType=(0,o.Z)(this.arcType,t.arcType),this.shadows=(0,o.Z)(this.shadows,t.shadows),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition),this.classificationType=(0,o.Z)(this.classificationType,t.classificationType),this.zIndex=(0,o.Z)(this.zIndex,t.zIndex),this.textureCoordinates=(0,o.Z)(this.textureCoordinates,t.textureCoordinates)};const u=d},8119:(t,e,i)=>{i.d(e,{Z:()=>c});var o=i(6785),n=i(54485),s=i(92893),r=i(37105),a=i(19157);function l(t){this._definitionChanged=new s.Z,this._color=void 0,this._colorSubscription=void 0,this.color=t}Object.defineProperties(l.prototype,{isConstant:{get:function(){return a.Z.isConstant(this._color)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,r.Z)("color")}),l.prototype.getType=function(t){return"PolylineArrow"},l.prototype.getValue=function(t,e){return(0,n.Z)(e)||(e={}),e.color=a.Z.getValueOrClonedDefault(this._color,t,o.Z.WHITE,e.color),e},l.prototype.equals=function(t){return this===t||t instanceof l&&a.Z.equals(this._color,t._color)};const c=l},32683:(t,e,i)=>{i.d(e,{Z:()=>u});var o=i(6785),n=i(88779),s=i(54485),r=i(92893),a=i(37105),l=i(19157);const c=o.Z.WHITE,h=o.Z.TRANSPARENT;function d(t){t=(0,n.Z)(t,n.Z.EMPTY_OBJECT),this._definitionChanged=new r.Z,this._color=void 0,this._colorSubscription=void 0,this._gapColor=void 0,this._gapColorSubscription=void 0,this._dashLength=void 0,this._dashLengthSubscription=void 0,this._dashPattern=void 0,this._dashPatternSubscription=void 0,this.color=t.color,this.gapColor=t.gapColor,this.dashLength=t.dashLength,this.dashPattern=t.dashPattern}Object.defineProperties(d.prototype,{isConstant:{get:function(){return l.Z.isConstant(this._color)&&l.Z.isConstant(this._gapColor)&&l.Z.isConstant(this._dashLength)&&l.Z.isConstant(this._dashPattern)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,a.Z)("color"),gapColor:(0,a.Z)("gapColor"),dashLength:(0,a.Z)("dashLength"),dashPattern:(0,a.Z)("dashPattern")}),d.prototype.getType=function(t){return"PolylineDash"},d.prototype.getValue=function(t,e){return(0,s.Z)(e)||(e={}),e.color=l.Z.getValueOrClonedDefault(this._color,t,c,e.color),e.gapColor=l.Z.getValueOrClonedDefault(this._gapColor,t,h,e.gapColor),e.dashLength=l.Z.getValueOrDefault(this._dashLength,t,16,e.dashLength),e.dashPattern=l.Z.getValueOrDefault(this._dashPattern,t,255,e.dashPattern),e},d.prototype.equals=function(t){return this===t||t instanceof d&&l.Z.equals(this._color,t._color)&&l.Z.equals(this._gapColor,t._gapColor)&&l.Z.equals(this._dashLength,t._dashLength)&&l.Z.equals(this._dashPattern,t._dashPattern)};const u=d},1287:(t,e,i)=>{i.d(e,{Z:()=>$});var o=i(85162),n=i(52351),s=i(17497),r=i(6785),a=i(41631),l=i(88779),c=i(54485),h=i(90332),d=i(20176),u=i(51178),p=i(64493),Z=i(92893),f=i(78224),g=i(22823),m=i(18926),y=i(53513),_=i(47328),v=i(5316),w=i(9008),C=i(34063),b=i(98179),O=i(94193),x=i(13830),T=i(69154),D=i(11922),P=i(49616),E=i(87546),S=i(3334),M=i(9234),k=i(39613),I=i(19157);const V=new M.Z(0),L={},R=new r.Z,N=new S.Z(r.Z.WHITE),B=new M.Z(!0),A=new M.Z(P.Z.DISABLED),U=new M.Z(new u.Z),H=new M.Z(b.Z.BOTH);function F(){this.vertexFormat=void 0,this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function W(){this.positions=void 0,this.width=void 0,this.arcType=void 0,this.granularity=void 0}function G(t,e){if(!(0,c.Z)(t))throw new d.Z("entity is required");if(!(0,c.Z)(e))throw new d.Z("scene is required");this._entity=t,this._scene=e,this._entitySubscription=t.definitionChanged.addEventListener(G.prototype._onEntityPropertyChanged,this),this._fillEnabled=!1,this._dynamic=!1,this._geometryChanged=new Z.Z,this._showProperty=void 0,this._materialProperty=void 0,this._shadowsProperty=void 0,this._distanceDisplayConditionProperty=void 0,this._classificationTypeProperty=void 0,this._depthFailMaterialProperty=void 0,this._geometryOptions=new F,this._groundGeometryOptions=new W,this._id=`polyline-${t.id}`,this._clampToGround=!1,this._supportsPolylinesOnTerrain=C.Z.supportsPolylinesOnTerrain(e),this._zIndex=0,this._onEntityPropertyChanged(t,"polyline",t.polyline,void 0)}Object.defineProperties(G.prototype,{id:{get:function(){return this._id}},entity:{get:function(){return this._entity}},fillEnabled:{get:function(){return this._fillEnabled}},hasConstantFill:{get:function(){return!this._fillEnabled||!(0,c.Z)(this._entity.availability)&&I.Z.isConstant(this._showProperty)}},fillMaterialProperty:{get:function(){return this._materialProperty}},depthFailMaterialProperty:{get:function(){return this._depthFailMaterialProperty}},outlineEnabled:{value:!1},hasConstantOutline:{value:!0},outlineColorProperty:{value:void 0},shadowsProperty:{get:function(){return this._shadowsProperty}},distanceDisplayConditionProperty:{get:function(){return this._distanceDisplayConditionProperty}},classificationTypeProperty:{get:function(){return this._classificationTypeProperty}},isDynamic:{get:function(){return this._dynamic}},isClosed:{value:!1},geometryChanged:{get:function(){return this._geometryChanged}},arcType:{get:function(){return this._arcType}},clampToGround:{get:function(){return this._clampToGround&&this._supportsPolylinesOnTerrain}},zIndex:{get:function(){return this._zIndex}}}),G.prototype.isOutlineVisible=function(t){return!1},G.prototype.isFilled=function(t){const e=this._entity,i=this._fillEnabled&&e.isAvailable(t)&&this._showProperty.getValue(t);return(0,l.Z)(i,!1)},G.prototype.createFillGeometryInstance=function(t){if(!(0,c.Z)(t))throw new d.Z("time is required.");if(!this._fillEnabled)throw new d.Z("This instance does not represent a filled geometry.");const e=this._entity,i=e.isAvailable(t),o=new w.Z(i&&e.isShowing&&this._showProperty.getValue(t)),n=this._distanceDisplayConditionProperty.getValue(t),s={show:o,distanceDisplayCondition:p.Z.fromDistanceDisplayCondition(n)};let l;return this._materialProperty instanceof S.Z&&((0,c.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||i)&&(l=this._materialProperty.color.getValue(t,R)),(0,c.Z)(l)||(l=r.Z.WHITE),s.color=a.Z.fromColor(l)),this.clampToGround?new f.Z({id:e,geometry:new g.Z(this._groundGeometryOptions),attributes:s}):((0,c.Z)(this._depthFailMaterialProperty)&&this._depthFailMaterialProperty instanceof S.Z&&((0,c.Z)(this._depthFailMaterialProperty.color)&&(this._depthFailMaterialProperty.color.isConstant||i)&&(l=this._depthFailMaterialProperty.color.getValue(t,R)),(0,c.Z)(l)||(l=r.Z.WHITE),s.depthFailColor=a.Z.fromColor(l)),new f.Z({id:e,geometry:new _.Z(this._geometryOptions),attributes:s}))},G.prototype.createOutlineGeometryInstance=function(t){throw new d.Z("This instance does not represent an outlined geometry.")},G.prototype.isDestroyed=function(){return!1},G.prototype.destroy=function(){this._entitySubscription(),(0,h.Z)(this)},G.prototype._onEntityPropertyChanged=function(t,e,i,o){if("availability"!==e&&"polyline"!==e)return;const n=this._entity.polyline;if(!(0,c.Z)(n))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const s=n.positions,r=n.show;if((0,c.Z)(r)&&r.isConstant&&!r.getValue(m.Z.MINIMUM_VALUE)||!(0,c.Z)(s))return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));const a=n.zIndex,h=(0,l.Z)(n.material,N),d=h instanceof S.Z;this._materialProperty=h,this._depthFailMaterialProperty=n.depthFailMaterial,this._showProperty=(0,l.Z)(r,B),this._shadowsProperty=(0,l.Z)(n.shadows,A),this._distanceDisplayConditionProperty=(0,l.Z)(n.distanceDisplayCondition,U),this._classificationTypeProperty=(0,l.Z)(n.classificationType,H),this._fillEnabled=!0,this._zIndex=(0,l.Z)(a,V);const u=n.width,p=n.arcType,Z=n.clampToGround,f=n.granularity;if(s.isConstant&&I.Z.isConstant(u)&&I.Z.isConstant(p)&&I.Z.isConstant(f)&&I.Z.isConstant(Z)&&I.Z.isConstant(a)){const t=this._geometryOptions,e=s.getValue(m.Z.MINIMUM_VALUE,t.positions);if(!(0,c.Z)(e)||e.length<2)return void(this._fillEnabled&&(this._fillEnabled=!1,this._geometryChanged.raiseEvent(this)));let i;i=d&&(!(0,c.Z)(this._depthFailMaterialProperty)||this._depthFailMaterialProperty instanceof S.Z)?T.Z.VERTEX_FORMAT:D.Z.VERTEX_FORMAT,t.vertexFormat=i,t.positions=e,t.width=(0,c.Z)(u)?u.getValue(m.Z.MINIMUM_VALUE):void 0,t.arcType=(0,c.Z)(p)?p.getValue(m.Z.MINIMUM_VALUE):void 0,t.granularity=(0,c.Z)(f)?f.getValue(m.Z.MINIMUM_VALUE):void 0;const o=this._groundGeometryOptions;o.positions=e,o.width=t.width,o.arcType=t.arcType,o.granularity=t.granularity,this._clampToGround=!!(0,c.Z)(Z)&&Z.getValue(m.Z.MINIMUM_VALUE),!this._clampToGround&&(0,c.Z)(a)&&(0,y.Z)("Entity polylines must have clampToGround: true when using zIndex.  zIndex will be ignored."),this._dynamic=!1,this._geometryChanged.raiseEvent(this)}else this._dynamic||(this._dynamic=!0,this._geometryChanged.raiseEvent(this))},G.prototype.createDynamicUpdater=function(t,e){if(s.Z.defined("primitives",t),s.Z.defined("groundPrimitives",e),!this._dynamic)throw new d.Z("This instance does not represent dynamic geometry.");return new z(t,e,this)};const q={positions:void 0,granularity:void 0,height:void 0,ellipsoid:void 0};function z(t,e,i){this._line=void 0,this._primitives=t,this._groundPrimitives=e,this._groundPolylinePrimitive=void 0,this._material=void 0,this._geometryUpdater=i,this._positions=[]}function j(t){if((0,c.Z)(t._line))return t._line;const e=t._geometryUpdater._scene.id;let i=L[e];const o=t._primitives;!(0,c.Z)(i)||i.isDestroyed()?(i=new x.Z,L[e]=i,o.add(i)):o.contains(i)||o.add(i);const n=i.add();return n.id=t._geometryUpdater._entity,t._line=n,n}z.prototype.update=function(t){const e=this._geometryUpdater,i=e._entity,n=i.polyline,s=n.positions;let r=I.Z.getValueOrUndefined(s,t,this._positions);e._clampToGround=I.Z.getValueOrDefault(n._clampToGround,t,!1),e._groundGeometryOptions.positions=r,e._groundGeometryOptions.width=I.Z.getValueOrDefault(n._width,t,1),e._groundGeometryOptions.arcType=I.Z.getValueOrDefault(n._arcType,t,o.Z.GEODESIC),e._groundGeometryOptions.granularity=I.Z.getValueOrDefault(n._granularity,t,9999);const a=this._groundPrimitives;if((0,c.Z)(this._groundPolylinePrimitive)&&(a.remove(this._groundPolylinePrimitive),this._groundPolylinePrimitive=void 0),e.clampToGround){if(!i.isShowing||!i.isAvailable(t)||!I.Z.getValueOrDefault(n._show,t,!0))return;if(!(0,c.Z)(r)||r.length<2)return;const o=e.fillMaterialProperty;let s;if(o instanceof S.Z)s=new T.Z;else{const e=k.Z.getValue(t,o,this._material);s=new D.Z({material:e,translucent:e.isTranslucent()}),this._material=e}return this._groundPolylinePrimitive=a.add(new O.Z({geometryInstances:e.createFillGeometryInstance(t),appearance:s,classificationType:e.classificationTypeProperty.getValue(t),asynchronous:!1}),I.Z.getValueOrUndefined(e.zIndex,t)),void((0,c.Z)(this._line)&&(this._line.show=!1))}const l=j(this);if(!i.isShowing||!i.isAvailable(t)||!I.Z.getValueOrDefault(n._show,t,!0))return void(l.show=!1);if(!(0,c.Z)(r)||r.length<2)return void(l.show=!1);let h=o.Z.GEODESIC;h=I.Z.getValueOrDefault(n._arcType,t,h);const d=e._scene.globe;h!==o.Z.NONE&&(0,c.Z)(d)&&(q.ellipsoid=d.ellipsoid,q.positions=r,q.granularity=I.Z.getValueOrUndefined(n._granularity,t),q.height=v.Z.extractHeights(r,d.ellipsoid),r=h===o.Z.GEODESIC?v.Z.generateCartesianArc(q):v.Z.generateCartesianRhumbArc(q)),l.show=!0,l.positions=r.slice(),l.material=k.Z.getValue(t,e.fillMaterialProperty,l.material),l.width=I.Z.getValueOrDefault(n._width,t,1),l.distanceDisplayCondition=I.Z.getValueOrUndefined(n._distanceDisplayCondition,t,l.distanceDisplayCondition)},z.prototype.getBoundingSphere=function(t){if(s.Z.defined("result",t),this._geometryUpdater.clampToGround){const e=this._groundPolylinePrimitive;if((0,c.Z)(e)&&e.show&&e.ready){const i=e.getGeometryInstanceAttributes(this._geometryUpdater._entity);if((0,c.Z)(i)&&(0,c.Z)(i.boundingSphere))return n.Z.clone(i.boundingSphere,t),E.Z.DONE}return(0,c.Z)(e)&&!e.ready?E.Z.PENDING:E.Z.DONE}{const e=j(this);if(e.show&&e.positions.length>0)return n.Z.fromPoints(e.positions,t),E.Z.DONE}return E.Z.FAILED},z.prototype.isDestroyed=function(){return!1},z.prototype.destroy=function(){const t=this._geometryUpdater._scene.id,e=L[t];(0,c.Z)(e)&&(e.remove(this._line),0===e.length&&(this._primitives.removeAndDestroy(e),delete L[t])),(0,c.Z)(this._groundPolylinePrimitive)&&this._groundPrimitives.remove(this._groundPolylinePrimitive),(0,h.Z)(this)};const $=G},36373:(t,e,i)=>{i.d(e,{Z:()=>d});var o=i(6785),n=i(88779),s=i(54485),r=i(92893),a=i(37105),l=i(19157);const c=o.Z.WHITE;function h(t){t=(0,n.Z)(t,n.Z.EMPTY_OBJECT),this._definitionChanged=new r.Z,this._color=void 0,this._colorSubscription=void 0,this._glowPower=void 0,this._glowPowerSubscription=void 0,this._taperPower=void 0,this._taperPowerSubscription=void 0,this.color=t.color,this.glowPower=t.glowPower,this.taperPower=t.taperPower}Object.defineProperties(h.prototype,{isConstant:{get:function(){return l.Z.isConstant(this._color)&&l.Z.isConstant(this._glow)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,a.Z)("color"),glowPower:(0,a.Z)("glowPower"),taperPower:(0,a.Z)("taperPower")}),h.prototype.getType=function(t){return"PolylineGlow"},h.prototype.getValue=function(t,e){return(0,s.Z)(e)||(e={}),e.color=l.Z.getValueOrClonedDefault(this._color,t,c,e.color),e.glowPower=l.Z.getValueOrDefault(this._glowPower,t,.25,e.glowPower),e.taperPower=l.Z.getValueOrDefault(this._taperPower,t,1,e.taperPower),e},h.prototype.equals=function(t){return this===t||t instanceof h&&l.Z.equals(this._color,t._color)&&l.Z.equals(this._glowPower,t._glowPower)&&l.Z.equals(this._taperPower,t._taperPower)};const d=h},37e3:(t,e,i)=>{i.d(e,{Z:()=>h});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(78731),l=i(37105);function c(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._width=void 0,this._widthSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._depthFailMaterial=void 0,this._depthFailMaterialSubscription=void 0,this._arcType=void 0,this._arcTypeSubscription=void 0,this._clampToGround=void 0,this._clampToGroundSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(c.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.Z)("show"),positions:(0,l.Z)("positions"),width:(0,l.Z)("width"),granularity:(0,l.Z)("granularity"),material:(0,a.Z)("material"),depthFailMaterial:(0,a.Z)("depthFailMaterial"),arcType:(0,l.Z)("arcType"),clampToGround:(0,l.Z)("clampToGround"),shadows:(0,l.Z)("shadows"),distanceDisplayCondition:(0,l.Z)("distanceDisplayCondition"),classificationType:(0,l.Z)("classificationType"),zIndex:(0,l.Z)("zIndex")}),c.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.positions=this.positions,t.width=this.width,t.granularity=this.granularity,t.material=this.material,t.depthFailMaterial=this.depthFailMaterial,t.arcType=this.arcType,t.clampToGround=this.clampToGround,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new c(this)},c.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.positions=(0,o.Z)(this.positions,t.positions),this.width=(0,o.Z)(this.width,t.width),this.granularity=(0,o.Z)(this.granularity,t.granularity),this.material=(0,o.Z)(this.material,t.material),this.depthFailMaterial=(0,o.Z)(this.depthFailMaterial,t.depthFailMaterial),this.arcType=(0,o.Z)(this.arcType,t.arcType),this.clampToGround=(0,o.Z)(this.clampToGround,t.clampToGround),this.shadows=(0,o.Z)(this.shadows,t.shadows),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition),this.classificationType=(0,o.Z)(this.classificationType,t.classificationType),this.zIndex=(0,o.Z)(this.zIndex,t.zIndex)};const h=c},47955:(t,e,i)=>{i.d(e,{Z:()=>u});var o=i(6785),n=i(88779),s=i(54485),r=i(92893),a=i(37105),l=i(19157);const c=o.Z.WHITE,h=o.Z.BLACK;function d(t){t=(0,n.Z)(t,n.Z.EMPTY_OBJECT),this._definitionChanged=new r.Z,this._color=void 0,this._colorSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this.color=t.color,this.outlineColor=t.outlineColor,this.outlineWidth=t.outlineWidth}Object.defineProperties(d.prototype,{isConstant:{get:function(){return l.Z.isConstant(this._color)&&l.Z.isConstant(this._outlineColor)&&l.Z.isConstant(this._outlineWidth)}},definitionChanged:{get:function(){return this._definitionChanged}},color:(0,a.Z)("color"),outlineColor:(0,a.Z)("outlineColor"),outlineWidth:(0,a.Z)("outlineWidth")}),d.prototype.getType=function(t){return"PolylineOutline"},d.prototype.getValue=function(t,e){return(0,s.Z)(e)||(e={}),e.color=l.Z.getValueOrClonedDefault(this._color,t,c,e.color),e.outlineColor=l.Z.getValueOrClonedDefault(this._outlineColor,t,h,e.outlineColor),e.outlineWidth=l.Z.getValueOrDefault(this._outlineWidth,t,1),e},d.prototype.equals=function(t){return this===t||t instanceof d&&l.Z.equals(this._color,t._color)&&l.Z.equals(this._outlineColor,t._outlineColor)&&l.Z.equals(this._outlineWidth,t._outlineWidth)};const u=d},70184:(t,e,i)=>{i.d(e,{Z:()=>T});var o=i(28474),n=i(52351),s=i(17497),r=i(88779),a=i(54485),l=i(90332),c=i(98179),h=i(69154),d=i(11922),u=i(49616),p=i(87546),Z=i(3334),f=i(48435),g=i(1287),m=i(9831),y=i(4052),_=i(38660);const v=[];function w(t,e){const i=t._batches,o=i.length;for(let t=0;t<o;t++)i[t].remove(e)}function C(t,e,i){if(i.isDynamic)return void t._dynamicBatch.add(e,i);if(i.clampToGround&&i.fillEnabled){const o=i.classificationTypeProperty.getValue(e);return void t._groundBatches[o].add(e,i)}let o;i.fillEnabled&&(o=i.shadowsProperty.getValue(e));let n,s=0;(0,a.Z)(i.depthFailMaterialProperty)&&(s=i.depthFailMaterialProperty instanceof Z.Z?1:2),(0,a.Z)(o)&&(n=o+s*u.Z.NUMBER_OF_SHADOW_MODES),i.fillEnabled&&(i.fillMaterialProperty instanceof Z.Z?t._colorBatches[n].add(e,i):t._materialBatches[n].add(e,i))}function b(t,e,i,n){let a;s.Z.defined("scene",t),s.Z.defined("entityCollection",e),n=(0,r.Z)(n,t.groundPrimitives),i=(0,r.Z)(i,t.primitives),this._scene=t,this._primitives=i,this._entityCollection=void 0,this._addedObjects=new o.Z,this._removedObjects=new o.Z,this._changedObjects=new o.Z;const l=u.Z.NUMBER_OF_SHADOW_MODES;for(this._colorBatches=new Array(3*l),this._materialBatches=new Array(3*l),a=0;a<l;++a)this._colorBatches[a]=new m.Z(i,h.Z,void 0,!1,a),this._materialBatches[a]=new y.Z(i,d.Z,void 0,!1,a),this._colorBatches[a+l]=new m.Z(i,h.Z,h.Z,!1,a),this._materialBatches[a+l]=new y.Z(i,d.Z,h.Z,!1,a),this._colorBatches[a+2*l]=new m.Z(i,h.Z,d.Z,!1,a),this._materialBatches[a+2*l]=new y.Z(i,d.Z,d.Z,!1,a);this._dynamicBatch=new f.Z(i,n);const p=c.Z.NUMBER_OF_CLASSIFICATION_TYPES;for(this._groundBatches=new Array(p),a=0;a<p;++a)this._groundBatches[a]=new _.Z(n,a);this._batches=this._colorBatches.concat(this._materialBatches,this._dynamicBatch,this._groundBatches),this._subscriptions=new o.Z,this._updaters=new o.Z,this._entityCollection=e,e.collectionChanged.addEventListener(b.prototype._onCollectionChanged,this),this._onCollectionChanged(e,e.values,v)}b.prototype.update=function(t){s.Z.defined("time",t);const e=this._addedObjects,i=e.values,o=this._removedObjects,n=o.values,r=this._changedObjects,a=r.values;let l,c,h,d;for(l=a.length-1;l>-1;l--)c=a[l],h=c.id,d=this._updaters.get(h),d.entity===c?(w(this,d),C(this,t,d)):(n.push(c),i.push(c));for(l=n.length-1;l>-1;l--)c=n[l],h=c.id,d=this._updaters.get(h),w(this,d),d.destroy(),this._updaters.remove(h),this._subscriptions.get(h)(),this._subscriptions.remove(h);for(l=i.length-1;l>-1;l--)c=i[l],h=c.id,d=new g.Z(c,this._scene),this._updaters.set(h,d),C(this,t,d),this._subscriptions.set(h,d.geometryChanged.addEventListener(b._onGeometryChanged,this));e.removeAll(),o.removeAll(),r.removeAll();let u=!0;const p=this._batches,Z=p.length;for(l=0;l<Z;l++)u=p[l].update(t)&&u;return u};const O=[],x=new n.Z;b.prototype.getBoundingSphere=function(t,e){s.Z.defined("entity",t),s.Z.defined("result",e);const i=O,o=x;let r=0,a=p.Z.DONE;const l=this._batches,c=l.length,h=this._updaters.get(t.id);for(let t=0;t<c;t++){if(a=l[t].getBoundingSphere(h,o),a===p.Z.PENDING)return p.Z.PENDING;a===p.Z.DONE&&(i[r]=n.Z.clone(o,i[r]),r++)}return 0===r?p.Z.FAILED:(i.length=r,n.Z.fromBoundingSpheres(i,e),p.Z.DONE)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){let t;this._entityCollection.collectionChanged.removeEventListener(b.prototype._onCollectionChanged,this),this._addedObjects.removeAll(),this._removedObjects.removeAll();const e=this._batches;let i=e.length;for(t=0;t<i;t++)e[t].removeAllPrimitives();const o=this._subscriptions.values;for(i=o.length,t=0;t<i;t++)o[t]();return this._subscriptions.removeAll(),(0,l.Z)(this)},b._onGeometryChanged=function(t){const e=this._removedObjects,i=this._changedObjects,o=t.entity,n=o.id;(0,a.Z)(e.get(n))||(0,a.Z)(i.get(n))||i.set(n,o)},b.prototype._onCollectionChanged=function(t,e,i){const o=this._addedObjects,n=this._removedObjects,s=this._changedObjects;let r,a,l;for(r=i.length-1;r>-1;r--)l=i[r],a=l.id,o.remove(a)||(n.set(a,l),s.remove(a));for(r=e.length-1;r>-1;r--)l=e[r],a=l.id,n.remove(a)?s.set(a,l):o.set(a,l)};const T=b},40557:(t,e,i)=>{i.d(e,{Z:()=>O});var o=i(17497),n=i(6785),s=i(41631),r=i(54485),a=i(20176),l=i(64493),c=i(78224),h=i(18926),d=i(1097),u=i(8686),p=i(9008),Z=i(41656),f=i(73020),g=i(3334),m=i(58034),y=i(31969),_=i(19157);const v=new n.Z;function w(t){this.id=t,this.vertexFormat=void 0,this.polylinePositions=void 0,this.shapePositions=void 0,this.cornerType=void 0,this.granularity=void 0}function C(t,e){y.Z.call(this,{entity:t,scene:e,geometryOptions:new w(t),geometryPropertyName:"polylineVolume",observedPropertyNames:["availability","polylineVolume"]}),this._onEntityPropertyChanged(t,"polylineVolume",t.polylineVolume,void 0)}function b(t,e,i){m.Z.call(this,t,e,i)}(0,r.Z)(Object.create)&&(C.prototype=Object.create(y.Z.prototype),C.prototype.constructor=C),C.prototype.createFillGeometryInstance=function(t){if(o.Z.defined("time",t),!this._fillEnabled)throw new a.Z("This instance does not represent a filled geometry.");const e=this._entity,i=e.isAvailable(t);let h,u;const Z=new p.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),f=this._distanceDisplayConditionProperty.getValue(t),m=l.Z.fromDistanceDisplayCondition(f);if(this._materialProperty instanceof g.Z){let e;(0,r.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||i)&&(e=this._materialProperty.color.getValue(t,v)),(0,r.Z)(e)||(e=n.Z.WHITE),u=s.Z.fromColor(e),h={show:Z,distanceDisplayCondition:m,color:u}}else h={show:Z,distanceDisplayCondition:m};return new c.Z({id:e,geometry:new d.Z(this._options),attributes:h})},C.prototype.createOutlineGeometryInstance=function(t){if(o.Z.defined("time",t),!this._outlineEnabled)throw new a.Z("This instance does not represent an outlined geometry.");const e=this._entity,i=e.isAvailable(t),r=_.Z.getValueOrDefault(this._outlineColorProperty,t,n.Z.BLACK,v),h=this._distanceDisplayConditionProperty.getValue(t);return new c.Z({id:e,geometry:new u.Z(this._options),attributes:{show:new p.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:s.Z.fromColor(r),distanceDisplayCondition:l.Z.fromDistanceDisplayCondition(h)}})},C.prototype._isHidden=function(t,e){return!(0,r.Z)(e.positions)||!(0,r.Z)(e.shape)||y.Z.prototype._isHidden.call(this,t,e)},C.prototype._isDynamic=function(t,e){return!(e.positions.isConstant&&e.shape.isConstant&&_.Z.isConstant(e.granularity)&&_.Z.isConstant(e.outlineWidth)&&_.Z.isConstant(e.cornerType))},C.prototype._setStaticOptions=function(t,e){const i=e.granularity,o=e.cornerType,n=this._options,s=this._materialProperty instanceof g.Z;n.vertexFormat=s?f.Z.VERTEX_FORMAT:Z.Z.MaterialSupport.TEXTURED.vertexFormat,n.polylinePositions=e.positions.getValue(h.Z.MINIMUM_VALUE,n.polylinePositions),n.shapePositions=e.shape.getValue(h.Z.MINIMUM_VALUE,n.shape),n.granularity=(0,r.Z)(i)?i.getValue(h.Z.MINIMUM_VALUE):void 0,n.cornerType=(0,r.Z)(o)?o.getValue(h.Z.MINIMUM_VALUE):void 0},C.DynamicGeometryUpdater=b,(0,r.Z)(Object.create)&&(b.prototype=Object.create(m.Z.prototype),b.prototype.constructor=b),b.prototype._isHidden=function(t,e,i){const o=this._options;return!(0,r.Z)(o.polylinePositions)||!(0,r.Z)(o.shapePositions)||m.Z.prototype._isHidden.call(this,t,e,i)},b.prototype._setOptions=function(t,e,i){const o=this._options;o.polylinePositions=_.Z.getValueOrUndefined(e.positions,i,o.polylinePositions),o.shapePositions=_.Z.getValueOrUndefined(e.shape,i),o.granularity=_.Z.getValueOrUndefined(e.granularity,i),o.cornerType=_.Z.getValueOrUndefined(e.cornerType,i)};const O=C},5559:(t,e,i)=>{i.d(e,{Z:()=>h});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(78731),l=i(37105);function c(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._positions=void 0,this._positionsSubscription=void 0,this._shape=void 0,this._shapeSubscription=void 0,this._cornerType=void 0,this._cornerTypeSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distanceDisplayConditionSubsription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(c.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.Z)("show"),positions:(0,l.Z)("positions"),shape:(0,l.Z)("shape"),cornerType:(0,l.Z)("cornerType"),granularity:(0,l.Z)("granularity"),fill:(0,l.Z)("fill"),material:(0,a.Z)("material"),outline:(0,l.Z)("outline"),outlineColor:(0,l.Z)("outlineColor"),outlineWidth:(0,l.Z)("outlineWidth"),shadows:(0,l.Z)("shadows"),distanceDisplayCondition:(0,l.Z)("distanceDisplayCondition")}),c.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.positions=this.positions,t.shape=this.shape,t.cornerType=this.cornerType,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t):new c(this)},c.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.positions=(0,o.Z)(this.positions,t.positions),this.shape=(0,o.Z)(this.shape,t.shape),this.cornerType=(0,o.Z)(this.cornerType,t.cornerType),this.granularity=(0,o.Z)(this.granularity,t.granularity),this.fill=(0,o.Z)(this.fill,t.fill),this.material=(0,o.Z)(this.material,t.material),this.outline=(0,o.Z)(this.outline,t.outline),this.outlineColor=(0,o.Z)(this.outlineColor,t.outlineColor),this.outlineWidth=(0,o.Z)(this.outlineWidth,t.outlineWidth),this.shadows=(0,o.Z)(this.shadows,t.shadows),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition)};const h=c},79285:(t,e,i)=>{i.d(e,{Z:()=>d});var o=i(93517),n=i(54485),s=i(20176),r=i(39109),a=i(31163),l=i(7004);function c(){s.Z.throwInstantiationError()}Object.defineProperties(c.prototype,{isConstant:{get:s.Z.throwInstantiationError},definitionChanged:{get:s.Z.throwInstantiationError},referenceFrame:{get:s.Z.throwInstantiationError}}),c.prototype.getValue=s.Z.throwInstantiationError,c.prototype.getValueInReferenceFrame=s.Z.throwInstantiationError,c.prototype.equals=s.Z.throwInstantiationError;const h=new r.Z;c.convertToReferenceFrame=function(t,e,i,s,c){if(!(0,n.Z)(e))return e;if((0,n.Z)(c)||(c=new o.Z),i===s)return o.Z.clone(e,c);let d=l.Z.computeIcrfToFixedMatrix(t,h);return(0,n.Z)(d)||(d=l.Z.computeTemeToPseudoFixedMatrix(t,h)),i===a.Z.INERTIAL?r.Z.multiplyByVector(d,e,c):i===a.Z.FIXED?r.Z.multiplyByVector(r.Z.transpose(d,h),e,c):void 0};const d=c},17198:(t,e,i)=>{i.d(e,{Z:()=>d});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(18091),l=i(31163),c=i(19157);function h(t,e){this._value=void 0,this._definitionChanged=new r.Z,this._eventHelper=new a.Z,this._referenceFrame=(0,o.Z)(e,l.Z.FIXED),this.setValue(t)}Object.defineProperties(h.prototype,{isConstant:{get:function(){const t=this._value;if(!(0,n.Z)(t))return!0;const e=t.length;for(let i=0;i<e;i++)if(!c.Z.isConstant(t[i]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){return this._referenceFrame}}}),h.prototype.getValue=function(t,e){return this.getValueInReferenceFrame(t,l.Z.FIXED,e)},h.prototype.getValueInReferenceFrame=function(t,e,i){if(!(0,n.Z)(t))throw new s.Z("time is required.");if(!(0,n.Z)(e))throw new s.Z("referenceFrame is required.");const o=this._value;if(!(0,n.Z)(o))return;const r=o.length;(0,n.Z)(i)||(i=new Array(r));let a=0,l=0;for(;a<r;){const s=o[a].getValueInReferenceFrame(t,e,i[a]);(0,n.Z)(s)&&(i[l]=s,l++),a++}return i.length=l,i},h.prototype.setValue=function(t){const e=this._eventHelper;if(e.removeAll(),(0,n.Z)(t)){this._value=t.slice();const i=t.length;for(let o=0;o<i;o++){const i=t[o];(0,n.Z)(i)&&e.add(i.definitionChanged,h.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},h.prototype.equals=function(t){return this===t||t instanceof h&&this._referenceFrame===t._referenceFrame&&c.Z.arrayEquals(this._value,t._value)},h.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const d=h},19157:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(88779),n=i(54485),s=i(20176);function r(){s.Z.throwInstantiationError()}Object.defineProperties(r.prototype,{isConstant:{get:s.Z.throwInstantiationError},definitionChanged:{get:s.Z.throwInstantiationError}}),r.prototype.getValue=s.Z.throwInstantiationError,r.prototype.equals=s.Z.throwInstantiationError,r.equals=function(t,e){return t===e||(0,n.Z)(t)&&t.equals(e)},r.arrayEquals=function(t,e){if(t===e)return!0;if(!(0,n.Z)(t)||!(0,n.Z)(e)||t.length!==e.length)return!1;const i=t.length;for(let o=0;o<i;o++)if(!r.equals(t[o],e[o]))return!1;return!0},r.isConstant=function(t){return!(0,n.Z)(t)||t.isConstant},r.getValueOrUndefined=function(t,e,i){return(0,n.Z)(t)?t.getValue(e,i):void 0},r.getValueOrDefault=function(t,e,i,s){return(0,n.Z)(t)?(0,o.Z)(t.getValue(e,s),i):i},r.getValueOrClonedDefault=function(t,e,i,o){let s;return(0,n.Z)(t)&&(s=t.getValue(e,o)),(0,n.Z)(s)||(s=i.clone(s)),s};const a=r},62891:(t,e,i)=>{i.d(e,{Z:()=>c});var o=i(54485),n=i(20176),s=i(92893),r=i(18091),a=i(19157);function l(t){this._value=void 0,this._definitionChanged=new s.Z,this._eventHelper=new r.Z,this.setValue(t)}Object.defineProperties(l.prototype,{isConstant:{get:function(){const t=this._value;if(!(0,o.Z)(t))return!0;const e=t.length;for(let i=0;i<e;i++)if(!a.Z.isConstant(t[i]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),l.prototype.getValue=function(t,e){if(!(0,o.Z)(t))throw new n.Z("time is required.");const i=this._value;if(!(0,o.Z)(i))return;const s=i.length;(0,o.Z)(e)||(e=new Array(s));let r=0,a=0;for(;r<s;){const i=this._value[r].getValue(t,e[r]);(0,o.Z)(i)&&(e[a]=i,a++),r++}return e.length=a,e},l.prototype.setValue=function(t){const e=this._eventHelper;if(e.removeAll(),(0,o.Z)(t)){this._value=t.slice();const i=t.length;for(let n=0;n<i;n++){const i=t[n];(0,o.Z)(i)&&e.add(i.definitionChanged,l.prototype._raiseDefinitionChanged,this)}}else this._value=void 0;this._definitionChanged.raiseEvent(this)},l.prototype.equals=function(t){return this===t||t instanceof l&&a.Z.arrayEquals(this._value,t._value)},l.prototype._raiseDefinitionChanged=function(){this._definitionChanged.raiseEvent(this)};const c=l},1561:(t,e,i)=>{i.d(e,{Z:()=>u});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(9234),l=i(37105),c=i(19157);function h(t,e){this._propertyNames=[],this._definitionChanged=new r.Z,(0,n.Z)(t)&&this.merge(t,e)}function d(t){return new a.Z(t)}Object.defineProperties(h.prototype,{propertyNames:{get:function(){return this._propertyNames}},isConstant:{get:function(){const t=this._propertyNames;for(let e=0,i=t.length;e<i;e++)if(!c.Z.isConstant(this[t[e]]))return!1;return!0}},definitionChanged:{get:function(){return this._definitionChanged}}}),h.prototype.hasProperty=function(t){return-1!==this._propertyNames.indexOf(t)},h.prototype.addProperty=function(t,e,i){const r=this._propertyNames;if(!(0,n.Z)(t))throw new s.Z("propertyName is required.");if(-1!==r.indexOf(t))throw new s.Z(`${t} is already a registered property.`);r.push(t),Object.defineProperty(this,t,(0,l.Z)(t,!0,(0,o.Z)(i,d))),(0,n.Z)(e)&&(this[t]=e),this._definitionChanged.raiseEvent(this)},h.prototype.removeProperty=function(t){const e=this._propertyNames.indexOf(t);if(!(0,n.Z)(t))throw new s.Z("propertyName is required.");if(-1===e)throw new s.Z(`${t} is not a registered property.`);this._propertyNames.splice(e,1),delete this[t],this._definitionChanged.raiseEvent(this)},h.prototype.getValue=function(t,e){if(!(0,n.Z)(t))throw new s.Z("time is required.");(0,n.Z)(e)||(e={});const i=this._propertyNames;for(let o=0,n=i.length;o<n;o++){const n=i[o];e[n]=c.Z.getValueOrUndefined(this[n],t,e[n])}return e},h.prototype.merge=function(t,e){if(!(0,n.Z)(t))throw new s.Z("source is required.");const i=this._propertyNames,o=(0,n.Z)(t._propertyNames)?t._propertyNames:Object.keys(t);for(let s=0,r=o.length;s<r;s++){const r=o[s],a=this[r],l=t[r];void 0===a&&-1===i.indexOf(r)&&this.addProperty(r,void 0,e),void 0!==l&&(void 0!==a?(0,n.Z)(a)&&(0,n.Z)(a.merge)&&a.merge(l):(0,n.Z)(l)&&(0,n.Z)(l.merge)&&(0,n.Z)(l.clone)?this[r]=l.clone():this[r]=l)}},h.prototype.equals=function(t){return this===t||t instanceof h&&function(t,e){const i=t._propertyNames,o=e._propertyNames,n=i.length;if(n!==o.length)return!1;for(let s=0;s<n;++s){const n=i[s];if(-1===o.indexOf(n))return!1;if(!c.Z.equals(t[n],e[n]))return!1}return!0}(this,t)};const u=h},32808:(t,e,i)=>{i.d(e,{Z:()=>N});var o=i(93237),n=i(93517),s=i(66866),r=i(17497),a=i(6785),l=i(41631),c=i(54485),h=i(20176),d=i(64493),u=i(99996),p=i(78224),Z=i(18926),f=i(6206),g=i(34152),m=i(91201),y=i(8972),_=i(9008),v=i(16272),w=i(41656),C=i(73020),b=i(3334),O=i(58034),x=i(31969),T=i(47106),D=i(19157);const P=new a.Z,E=n.Z.ZERO,S=new n.Z,M=new g.Z,k=new g.Z,I=new s.Z;function V(t){this.id=t,this.vertexFormat=void 0,this.rectangle=void 0,this.height=void 0,this.extrudedHeight=void 0,this.granularity=void 0,this.stRotation=void 0,this.rotation=void 0,this.offsetAttribute=void 0}function L(t,e){T.Z.call(this,{entity:t,scene:e,geometryOptions:new V(t),geometryPropertyName:"rectangle",observedPropertyNames:["availability","rectangle"]}),this._onEntityPropertyChanged(t,"rectangle",t.rectangle,void 0)}function R(t,e,i){O.Z.call(this,t,e,i)}(0,c.Z)(Object.create)&&(L.prototype=Object.create(T.Z.prototype),L.prototype.constructor=L),L.prototype.createFillGeometryInstance=function(t){if(r.Z.defined("time",t),!this._fillEnabled)throw new h.Z("This instance does not represent a filled geometry.");const e=this._entity,i=e.isAvailable(t),o={show:new _.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._fillProperty.getValue(t)),distanceDisplayCondition:d.Z.fromDistanceDisplayCondition(this._distanceDisplayConditionProperty.getValue(t)),offset:void 0,color:void 0};if(this._materialProperty instanceof b.Z){let e;(0,c.Z)(this._materialProperty.color)&&(this._materialProperty.color.isConstant||i)&&(e=this._materialProperty.color.getValue(t,P)),(0,c.Z)(e)||(e=a.Z.WHITE),o.color=l.Z.fromColor(e)}return(0,c.Z)(this._options.offsetAttribute)&&(o.offset=f.Z.fromCartesian3(D.Z.getValueOrDefault(this._terrainOffsetProperty,t,E,S))),new p.Z({id:e,geometry:new m.Z(this._options),attributes:o})},L.prototype.createOutlineGeometryInstance=function(t){if(r.Z.defined("time",t),!this._outlineEnabled)throw new h.Z("This instance does not represent an outlined geometry.");const e=this._entity,i=e.isAvailable(t),o=D.Z.getValueOrDefault(this._outlineColorProperty,t,a.Z.BLACK,P),n=this._distanceDisplayConditionProperty.getValue(t),s={show:new _.Z(i&&e.isShowing&&this._showProperty.getValue(t)&&this._showOutlineProperty.getValue(t)),color:l.Z.fromColor(o),distanceDisplayCondition:d.Z.fromDistanceDisplayCondition(n),offset:void 0};return(0,c.Z)(this._options.offsetAttribute)&&(s.offset=f.Z.fromCartesian3(D.Z.getValueOrDefault(this._terrainOffsetProperty,t,E,S))),new p.Z({id:e,geometry:new y.Z(this._options),attributes:s})},L.prototype._computeCenter=function(t,e){const i=D.Z.getValueOrUndefined(this._entity.rectangle.coordinates,t,k);if(!(0,c.Z)(i))return;const o=g.Z.center(i,I);return s.Z.toCartesian(o,u.Z.WGS84,e)},L.prototype._isHidden=function(t,e){return!(0,c.Z)(e.coordinates)||x.Z.prototype._isHidden.call(this,t,e)},L.prototype._isDynamic=function(t,e){return!e.coordinates.isConstant||!D.Z.isConstant(e.height)||!D.Z.isConstant(e.extrudedHeight)||!D.Z.isConstant(e.granularity)||!D.Z.isConstant(e.stRotation)||!D.Z.isConstant(e.rotation)||!D.Z.isConstant(e.outlineWidth)||!D.Z.isConstant(e.zIndex)||this._onTerrain&&!D.Z.isConstant(this._materialProperty)&&!(this._materialProperty instanceof b.Z)},L.prototype._setStaticOptions=function(t,e){const i=this._materialProperty instanceof b.Z;let n=D.Z.getValueOrUndefined(e.height,Z.Z.MINIMUM_VALUE);const s=D.Z.getValueOrDefault(e.heightReference,Z.Z.MINIMUM_VALUE,v.Z.NONE);let r=D.Z.getValueOrUndefined(e.extrudedHeight,Z.Z.MINIMUM_VALUE);const a=D.Z.getValueOrDefault(e.extrudedHeightReference,Z.Z.MINIMUM_VALUE,v.Z.NONE);(0,c.Z)(r)&&!(0,c.Z)(n)&&(n=0);const l=this._options;l.vertexFormat=i?C.Z.VERTEX_FORMAT:w.Z.MaterialSupport.TEXTURED.vertexFormat,l.rectangle=e.coordinates.getValue(Z.Z.MINIMUM_VALUE,l.rectangle),l.granularity=D.Z.getValueOrUndefined(e.granularity,Z.Z.MINIMUM_VALUE),l.stRotation=D.Z.getValueOrUndefined(e.stRotation,Z.Z.MINIMUM_VALUE),l.rotation=D.Z.getValueOrUndefined(e.rotation,Z.Z.MINIMUM_VALUE),l.offsetAttribute=T.Z.computeGeometryOffsetAttribute(n,s,r,a),l.height=T.Z.getGeometryHeight(n,s),r=T.Z.getGeometryExtrudedHeight(r,a),r===T.Z.CLAMP_TO_GROUND&&(r=o.Z.getMinimumMaximumHeights(m.Z.computeRectangle(l,M)).minimumTerrainHeight),l.extrudedHeight=r},L.DynamicGeometryUpdater=R,(0,c.Z)(Object.create)&&(R.prototype=Object.create(O.Z.prototype),R.prototype.constructor=R),R.prototype._isHidden=function(t,e,i){return!(0,c.Z)(this._options.rectangle)||O.Z.prototype._isHidden.call(this,t,e,i)},R.prototype._setOptions=function(t,e,i){const n=this._options;let s=D.Z.getValueOrUndefined(e.height,i);const r=D.Z.getValueOrDefault(e.heightReference,i,v.Z.NONE);let a=D.Z.getValueOrUndefined(e.extrudedHeight,i);const l=D.Z.getValueOrDefault(e.extrudedHeightReference,i,v.Z.NONE);(0,c.Z)(a)&&!(0,c.Z)(s)&&(s=0),n.rectangle=D.Z.getValueOrUndefined(e.coordinates,i,n.rectangle),n.granularity=D.Z.getValueOrUndefined(e.granularity,i),n.stRotation=D.Z.getValueOrUndefined(e.stRotation,i),n.rotation=D.Z.getValueOrUndefined(e.rotation,i),n.offsetAttribute=T.Z.computeGeometryOffsetAttribute(s,r,a,l),n.height=T.Z.getGeometryHeight(s,r),a=T.Z.getGeometryExtrudedHeight(a,l),a===T.Z.CLAMP_TO_GROUND&&(a=o.Z.getMinimumMaximumHeights(m.Z.computeRectangle(n,M)).minimumTerrainHeight),n.extrudedHeight=a};const N=L},25163:(t,e,i)=>{i.d(e,{Z:()=>h});var o=i(88779),n=i(54485),s=i(20176),r=i(92893),a=i(78731),l=i(37105);function c(t){this._definitionChanged=new r.Z,this._show=void 0,this._showSubscription=void 0,this._coordinates=void 0,this._coordinatesSubscription=void 0,this._height=void 0,this._heightSubscription=void 0,this._heightReference=void 0,this._heightReferenceSubscription=void 0,this._extrudedHeight=void 0,this._extrudedHeightSubscription=void 0,this._extrudedHeightReference=void 0,this._extrudedHeightReferenceSubscription=void 0,this._rotation=void 0,this._rotationSubscription=void 0,this._stRotation=void 0,this._stRotationSubscription=void 0,this._granularity=void 0,this._granularitySubscription=void 0,this._fill=void 0,this._fillSubscription=void 0,this._material=void 0,this._materialSubscription=void 0,this._outline=void 0,this._outlineSubscription=void 0,this._outlineColor=void 0,this._outlineColorSubscription=void 0,this._outlineWidth=void 0,this._outlineWidthSubscription=void 0,this._shadows=void 0,this._shadowsSubscription=void 0,this._distanceDisplayCondition=void 0,this._distancedisplayConditionSubscription=void 0,this._classificationType=void 0,this._classificationTypeSubscription=void 0,this._zIndex=void 0,this._zIndexSubscription=void 0,this.merge((0,o.Z)(t,o.Z.EMPTY_OBJECT))}Object.defineProperties(c.prototype,{definitionChanged:{get:function(){return this._definitionChanged}},show:(0,l.Z)("show"),coordinates:(0,l.Z)("coordinates"),height:(0,l.Z)("height"),heightReference:(0,l.Z)("heightReference"),extrudedHeight:(0,l.Z)("extrudedHeight"),extrudedHeightReference:(0,l.Z)("extrudedHeightReference"),rotation:(0,l.Z)("rotation"),stRotation:(0,l.Z)("stRotation"),granularity:(0,l.Z)("granularity"),fill:(0,l.Z)("fill"),material:(0,a.Z)("material"),outline:(0,l.Z)("outline"),outlineColor:(0,l.Z)("outlineColor"),outlineWidth:(0,l.Z)("outlineWidth"),shadows:(0,l.Z)("shadows"),distanceDisplayCondition:(0,l.Z)("distanceDisplayCondition"),classificationType:(0,l.Z)("classificationType"),zIndex:(0,l.Z)("zIndex")}),c.prototype.clone=function(t){return(0,n.Z)(t)?(t.show=this.show,t.coordinates=this.coordinates,t.height=this.height,t.heightReference=this.heightReference,t.extrudedHeight=this.extrudedHeight,t.extrudedHeightReference=this.extrudedHeightReference,t.rotation=this.rotation,t.stRotation=this.stRotation,t.granularity=this.granularity,t.fill=this.fill,t.material=this.material,t.outline=this.outline,t.outlineColor=this.outlineColor,t.outlineWidth=this.outlineWidth,t.shadows=this.shadows,t.distanceDisplayCondition=this.distanceDisplayCondition,t.classificationType=this.classificationType,t.zIndex=this.zIndex,t):new c(this)},c.prototype.merge=function(t){if(!(0,n.Z)(t))throw new s.Z("source is required.");this.show=(0,o.Z)(this.show,t.show),this.coordinates=(0,o.Z)(this.coordinates,t.coordinates),this.height=(0,o.Z)(this.height,t.height),this.heightReference=(0,o.Z)(this.heightReference,t.heightReference),this.extrudedHeight=(0,o.Z)(this.extrudedHeight,t.extrudedHeight),this.extrudedHeightReference=(0,o.Z)(this.extrudedHeightReference,t.extrudedHeightReference),this.rotation=(0,o.Z)(this.rotation,t.rotation),this.stRotation=(0,o.Z)(this.stRotation,t.stRotation),this.granularity=(0,o.Z)(this.granularity,t.granularity),this.fill=(0,o.Z)(this.fill,t.fill),this.material=(0,o.Z)(this.material,t.material),this.outline=(0,o.Z)(this.outline,t.outline),this.outlineColor=(0,o.Z)(this.outlineColor,t.outlineColor),this.outlineWidth=(0,o.Z)(this.outlineWidth,t.outlineWidth),this.shadows=(0,o.Z)(this.shadows,t.shadows),this.distanceDisplayCondition=(0,o.Z)(this.distanceDisplayCondition,t.distanceDisplayCondition),this.classificationType=(0,o.Z)(this.classificationType,t.classificationType),this.zIndex=(0,o.Z)(this.zIndex,t.zIndex)};const h=c},39351:(t,e,i)=>{i.d(e,{Z:()=>c});var o=i(54485),n=i(20176),s=i(92893),r=i(19157);function a(t){let e=t._targetProperty;if(!(0,o.Z)(e)){let i=t._targetEntity;if(!(0,o.Z)(i)){if(i=t._targetCollection.getById(t._targetId),!(0,o.Z)(i))return void(t._targetEntity=t._targetProperty=void 0);i.definitionChanged.addEventListener(l.prototype._onTargetEntityDefinitionChanged,t),t._targetEntity=i}const n=t._targetPropertyNames;e=t._targetEntity;for(let t=0,i=n.length;t<i&&(0,o.Z)(e);++t)e=e[n[t]];t._targetProperty=e}return e}function l(t,e,i){if(!(0,o.Z)(t))throw new n.Z("targetCollection is required.");if(!(0,o.Z)(e)||""===e)throw new n.Z("targetId is required.");if(!(0,o.Z)(i)||0===i.length)throw new n.Z("targetPropertyNames is required.");for(let t=0;t<i.length;t++){const e=i[t];if(!(0,o.Z)(e)||""===e)throw new n.Z("reference contains invalid properties.")}this._targetCollection=t,this._targetId=e,this._targetPropertyNames=i,this._targetProperty=void 0,this._targetEntity=void 0,this._definitionChanged=new s.Z,t.collectionChanged.addEventListener(l.prototype._onCollectionChanged,this)}Object.defineProperties(l.prototype,{isConstant:{get:function(){return r.Z.isConstant(a(this))}},definitionChanged:{get:function(){return this._definitionChanged}},referenceFrame:{get:function(){const t=a(this);return(0,o.Z)(t)?t.referenceFrame:void 0}},targetId:{get:function(){return this._targetId}},targetCollection:{get:function(){return this._targetCollection}},targetPropertyNames:{get:function(){return this._targetPropertyNames}},resolvedProperty:{get:function(){return a(this)}}}),l.fromString=function(t,e){if(!(0,o.Z)(t))throw new n.Z("targetCollection is required.");if(!(0,o.Z)(e))throw new n.Z("referenceString is required.");let i;const s=[];let r=!0,a=!1,c="";for(let t=0;t<e.length;++t){const o=e.charAt(t);a?(c+=o,a=!1):"\\"===o?a=!0:r&&"#"===o?(i=c,r=!1,c=""):r||"."!==o?c+=o:(s.push(c),c="")}return s.push(c),new l(t,i,s)},l.prototype.getValue=function(t,e){const i=a(this);return(0,o.Z)(i)?i.getValue(t,e):void 0},l.prototype.getValueInReferenceFrame=function(t,e,i){const n=a(this);return(0,o.Z)(n)?n.getValueInReferenceFrame(t,e,i):void 0},l.prototype.getType=function(t){const e=a(this);return(0,o.Z)(e)?e.getType(t):void 0},l.prototype.equals=function(t){if(this===t)return!0;const e=this._targetPropertyNames,i=t._targetPropertyNames;if(this._targetCollection!==t._targetCollection||this._targetId!==t._targetId||e.length!==i.length)return!1;const o=this._targetPropertyNames.length;for(let t=0;t<o;t++)if(e[t]!==i[t])return!1;return!0},l.prototype._onTargetEntityDefinitionChanged=function(t,e,i,n){(0,o.Z)(this._targetProperty)&&this._targetPropertyNames[0]===e&&(this._targetProperty=void 0,this._definitionChanged.raiseEvent(this))},l.prototype._onCollectionChanged=function(t,e,i){let n=this._targetEntity;(0,o.Z)(n)&&-1!==i.indexOf(n)?(n.definitionChanged.removeEventListener(l.prototype._onTargetEntityDefinitionChanged,this),this._targetEntity=this._targetProperty=void 0):(0,o.Z)(n)||(n=a(this),(0,o.Z)(n)&&this._definitionChanged.raiseEvent(this))};const c=l},69106:(t,e,i)=>{i.d(e,{Z:()=>a});var o=i(88779),n=i(54485),s=i(20176),r=i(22874);const a={packedLength:1,pack:function(t,e,i){if(!(0,n.Z)(t))throw new s.Z("value is required");if(!(0,n.Z)(e))throw new s.Z("array is required");return e[i=(0,o.Z)(i,0)]=t,e},unpack:function(t,e,i){if(!(0,n.Z)(t))throw new s.Z("array is required");return t[e=(0,o.Z)(e,0)]},convertPackedArrayForInterpolation:function(t,e,i,a){if(!(0,n.Z)(t))throw new s.Z("packedArray is required");let l;(0,n.Z)(a)||(a=[]),e=(0,o.Z)(e,0);for(let n=0,s=(i=(0,o.Z)(i,t.length))-e+1;n<s;n++){const i=t[e+n];0===n||Math.abs(l-i)<Math.PI?a[n]=i:a[n]=i-r.Z.TWO_PI,l=i}},unpackInterpolationResult:function(t,e,i,o,a){if(!(0,n.Z)(t))throw new s.Z("array is required");if(!(0,n.Z)(e))throw new s.Z("sourceArray is required");return(a=t[0])<0?a+r.Z.TWO_PI:a}}}}]);