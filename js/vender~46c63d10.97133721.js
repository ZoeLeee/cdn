"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2338],{34479:(t,e,r)=>{r.d(e,{$B:()=>o.$B,$S:()=>o.$S,$u:()=>o.$u,FM:()=>o.FM,HE:()=>o.HE,JO:()=>o.JO,Lt:()=>o.Lt,Nn:()=>o.Nn,P:()=>o.P,Q:()=>o.Q,Q_:()=>o.Q_,RD:()=>o.RD,RZ:()=>o.RZ,Ru:()=>n.R,T:()=>o.T,Wo:()=>o.Wo,ZZ:()=>o.ZZ,_c:()=>a._,_f:()=>o._f,c7:()=>o.c7,eN:()=>o.eN,hr:()=>o.hr,i5:()=>o.i5,iW:()=>o.iW,iv:()=>a.i,j_:()=>o.j_,jp:()=>o.jp,kD:()=>i.k,kn:()=>o.kn,l_:()=>o.l_,y3:()=>o.y3,y4:()=>i.y,zZ:()=>o.zZ,zp:()=>o.zp});var n=r(72739),i=r(93701),o=r(6307),a=r(69314)},43048:(t,e,r)=>{r.d(e,{RD:()=>a,T:()=>n,c7:()=>o});var n,i=r(58095);!function(t){t[t.LOCAL=0]="LOCAL",t[t.WORLD=1]="WORLD",t[t.BONE=2]="BONE"}(n||(n={}));var o,a=function(){function t(){}return t.X=new i.P(1,0,0),t.Y=new i.P(0,1,0),t.Z=new i.P(0,0,1),t}();!function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.Z=2]="Z"}(o||(o={}))},15631:(t,e,r)=>{r.d(e,{HE:()=>u,Wo:()=>s,zZ:()=>h});var n=r(72739),i=r(48154),o=r(48939),a=r(48620),s=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.r=t,this.g=e,this.b=r}return t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},t.prototype.getClassName=function(){return"Color3"},t.prototype.getHashCode=function(){var t=255*this.r|0;return t=397*(t=397*t^(255*this.g|0))^(255*this.b|0)},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,this},t.prototype.fromArray=function(e,r){return void 0===r&&(r=0),t.FromArrayToRef(e,r,this),this},t.prototype.toColor4=function(t){return void 0===t&&(t=1),new u(this.r,this.g,this.b,t)},t.prototype.asArray=function(){return[this.r,this.g,this.b]},t.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},t.prototype.multiply=function(e){return new t(this.r*e.r,this.g*e.g,this.b*e.b)},t.prototype.multiplyToRef=function(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,this},t.prototype.equals=function(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b},t.prototype.equalsFloats=function(t,e,r){return this.r===t&&this.g===e&&this.b===r},t.prototype.scale=function(e){return new t(this.r*e,this.g*e,this.b*e)},t.prototype.scaleToRef=function(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,this},t.prototype.clampToRef=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=1),r.r=n.R.Clamp(this.r,t,e),r.g=n.R.Clamp(this.g,t,e),r.b=n.R.Clamp(this.b,t,e),this},t.prototype.add=function(e){return new t(this.r+e.r,this.g+e.g,this.b+e.b)},t.prototype.addToRef=function(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,this},t.prototype.subtract=function(e){return new t(this.r-e.r,this.g-e.g,this.b-e.b)},t.prototype.subtractToRef=function(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b)},t.prototype.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},t.prototype.copyFromFloats=function(t,e,r){return this.r=t,this.g=e,this.b=r,this},t.prototype.set=function(t,e,r){return this.copyFromFloats(t,e,r)},t.prototype.toHexString=function(){var t=Math.round(255*this.r),e=Math.round(255*this.g),r=Math.round(255*this.b);return"#"+n.R.ToHex(t)+n.R.ToHex(e)+n.R.ToHex(r)},t.prototype.toLinearSpace=function(){var e=new t;return this.toLinearSpaceToRef(e),e},t.prototype.toHSV=function(){var e=new t;return this.toHSVToRef(e),e},t.prototype.toHSVToRef=function(t){var e=this.r,r=this.g,n=this.b,i=Math.max(e,r,n),o=Math.min(e,r,n),a=0,s=0,u=i,h=i-o;0!==i&&(s=h/i),i!=o&&(i==e?(a=(r-n)/h,r<n&&(a+=6)):i==r?a=(n-e)/h+2:i==n&&(a=(e-r)/h+4),a*=60),t.r=a,t.g=s,t.b=u},t.prototype.toLinearSpaceToRef=function(t){return t.r=Math.pow(this.r,i.Nn),t.g=Math.pow(this.g,i.Nn),t.b=Math.pow(this.b,i.Nn),this},t.prototype.toGammaSpace=function(){var e=new t;return this.toGammaSpaceToRef(e),e},t.prototype.toGammaSpaceToRef=function(t){return t.r=Math.pow(this.r,i.zp),t.g=Math.pow(this.g,i.zp),t.b=Math.pow(this.b,i.zp),this},t.HSVtoRGBToRef=function(t,e,r,n){var i=r*e,o=t/60,a=i*(1-Math.abs(o%2-1)),s=0,u=0,h=0;o>=0&&o<=1?(s=i,u=a):o>=1&&o<=2?(s=a,u=i):o>=2&&o<=3?(u=i,h=a):o>=3&&o<=4?(u=a,h=i):o>=4&&o<=5?(s=a,h=i):o>=5&&o<=6&&(s=i,h=a);var c=r-i;n.set(s+c,u+c,h+c)},t.FromHexString=function(e){if("#"!==e.substring(0,1)||7!==e.length)return new t(0,0,0);var r=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return t.FromInts(r,n,i)},t.FromArray=function(e,r){return void 0===r&&(r=0),new t(e[r],e[r+1],e[r+2])},t.FromArrayToRef=function(t,e,r){void 0===e&&(e=0),r.r=t[e],r.g=t[e+1],r.b=t[e+2]},t.FromInts=function(e,r,n){return new t(e/255,r/255,n/255)},t.Lerp=function(e,r,n){var i=new t(0,0,0);return t.LerpToRef(e,r,n,i),i},t.LerpToRef=function(t,e,r,n){n.r=t.r+(e.r-t.r)*r,n.g=t.g+(e.g-t.g)*r,n.b=t.b+(e.b-t.b)*r},t.Hermite=function(e,r,n,i,o){var a=o*o,s=o*a,u=2*s-3*a+1,h=-2*s+3*a,c=s-2*a+o,l=s-a;return new t(e.r*u+n.r*h+r.r*c+i.r*l,e.g*u+n.g*h+r.g*c+i.g*l,e.b*u+n.b*h+r.b*c+i.b*l)},t.Hermite1stDerivative=function(e,r,n,i,o){var a=t.Black();return this.Hermite1stDerivativeToRef(e,r,n,i,o,a),a},t.Hermite1stDerivativeToRef=function(t,e,r,n,i,o){var a=i*i;o.r=6*(a-i)*t.r+(3*a-4*i+1)*e.r+6*(-a+i)*r.r+(3*a-2*i)*n.r,o.g=6*(a-i)*t.g+(3*a-4*i+1)*e.g+6*(-a+i)*r.g+(3*a-2*i)*n.g,o.b=6*(a-i)*t.b+(3*a-4*i+1)*e.b+6*(-a+i)*r.b+(3*a-2*i)*n.b},t.Red=function(){return new t(1,0,0)},t.Green=function(){return new t(0,1,0)},t.Blue=function(){return new t(0,0,1)},t.Black=function(){return new t(0,0,0)},Object.defineProperty(t,"BlackReadOnly",{get:function(){return t._BlackReadOnly},enumerable:!1,configurable:!0}),t.White=function(){return new t(1,1,1)},t.Purple=function(){return new t(.5,0,.5)},t.Magenta=function(){return new t(1,0,1)},t.Yellow=function(){return new t(1,1,0)},t.Gray=function(){return new t(.5,.5,.5)},t.Teal=function(){return new t(0,1,1)},t.Random=function(){return new t(Math.random(),Math.random(),Math.random())},t._BlackReadOnly=t.Black(),t}(),u=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=1),this.r=t,this.g=e,this.b=r,this.a=n}return t.prototype.addInPlace=function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this},t.prototype.asArray=function(){return[this.r,this.g,this.b,this.a]},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t[e+3]=this.a,this},t.prototype.fromArray=function(e,r){return void 0===r&&(r=0),t.FromArrayToRef(e,r,this),this},t.prototype.equals=function(t){return t&&this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},t.prototype.add=function(e){return new t(this.r+e.r,this.g+e.g,this.b+e.b,this.a+e.a)},t.prototype.subtract=function(e){return new t(this.r-e.r,this.g-e.g,this.b-e.b,this.a-e.a)},t.prototype.subtractToRef=function(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,this},t.prototype.scale=function(e){return new t(this.r*e,this.g*e,this.b*e,this.a*e)},t.prototype.scaleToRef=function(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.r+=this.r*t,e.g+=this.g*t,e.b+=this.b*t,e.a+=this.a*t,this},t.prototype.clampToRef=function(t,e,r){return void 0===t&&(t=0),void 0===e&&(e=1),r.r=n.R.Clamp(this.r,t,e),r.g=n.R.Clamp(this.g,t,e),r.b=n.R.Clamp(this.b,t,e),r.a=n.R.Clamp(this.a,t,e),this},t.prototype.multiply=function(e){return new t(this.r*e.r,this.g*e.g,this.b*e.b,this.a*e.a)},t.prototype.multiplyToRef=function(t,e){return e.r=this.r*t.r,e.g=this.g*t.g,e.b=this.b*t.b,e.a=this.a*t.a,e},t.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},t.prototype.getClassName=function(){return"Color4"},t.prototype.getHashCode=function(){var t=255*this.r|0;return t=397*(t=397*(t=397*t^(255*this.g|0))^(255*this.b|0))^(255*this.a|0)},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.prototype.copyFrom=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.copyFromFloats=function(t,e,r,n){return this.r=t,this.g=e,this.b=r,this.a=n,this},t.prototype.set=function(t,e,r,n){return this.copyFromFloats(t,e,r,n)},t.prototype.toHexString=function(t){void 0===t&&(t=!1);var e=Math.round(255*this.r),r=Math.round(255*this.g),i=Math.round(255*this.b);if(t)return"#"+n.R.ToHex(e)+n.R.ToHex(r)+n.R.ToHex(i);var o=Math.round(255*this.a);return"#"+n.R.ToHex(e)+n.R.ToHex(r)+n.R.ToHex(i)+n.R.ToHex(o)},t.prototype.toLinearSpace=function(){var e=new t;return this.toLinearSpaceToRef(e),e},t.prototype.toLinearSpaceToRef=function(t){return t.r=Math.pow(this.r,i.Nn),t.g=Math.pow(this.g,i.Nn),t.b=Math.pow(this.b,i.Nn),t.a=this.a,this},t.prototype.toGammaSpace=function(){var e=new t;return this.toGammaSpaceToRef(e),e},t.prototype.toGammaSpaceToRef=function(t){return t.r=Math.pow(this.r,i.zp),t.g=Math.pow(this.g,i.zp),t.b=Math.pow(this.b,i.zp),t.a=this.a,this},t.FromHexString=function(e){if("#"!==e.substring(0,1)||9!==e.length&&7!==e.length)return new t(0,0,0,0);var r=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16),o=9===e.length?parseInt(e.substring(7,9),16):255;return t.FromInts(r,n,i,o)},t.Lerp=function(e,r,n){var i=new t(0,0,0,0);return t.LerpToRef(e,r,n,i),i},t.LerpToRef=function(t,e,r,n){n.r=t.r+(e.r-t.r)*r,n.g=t.g+(e.g-t.g)*r,n.b=t.b+(e.b-t.b)*r,n.a=t.a+(e.a-t.a)*r},t.Hermite=function(e,r,n,i,o){var a=o*o,s=o*a,u=2*s-3*a+1,h=-2*s+3*a,c=s-2*a+o,l=s-a;return new t(e.r*u+n.r*h+r.r*c+i.r*l,e.g*u+n.g*h+r.g*c+i.g*l,e.b*u+n.b*h+r.b*c+i.b*l,e.a*u+n.a*h+r.a*c+i.a*l)},t.Hermite1stDerivative=function(e,r,n,i,o){var a=new t;return this.Hermite1stDerivativeToRef(e,r,n,i,o,a),a},t.Hermite1stDerivativeToRef=function(t,e,r,n,i,o){var a=i*i;o.r=6*(a-i)*t.r+(3*a-4*i+1)*e.r+6*(-a+i)*r.r+(3*a-2*i)*n.r,o.g=6*(a-i)*t.g+(3*a-4*i+1)*e.g+6*(-a+i)*r.g+(3*a-2*i)*n.g,o.b=6*(a-i)*t.b+(3*a-4*i+1)*e.b+6*(-a+i)*r.b+(3*a-2*i)*n.b,o.a=6*(a-i)*t.a+(3*a-4*i+1)*e.a+6*(-a+i)*r.a+(3*a-2*i)*n.a},t.FromColor3=function(e,r){return void 0===r&&(r=1),new t(e.r,e.g,e.b,r)},t.FromArray=function(e,r){return void 0===r&&(r=0),new t(e[r],e[r+1],e[r+2],e[r+3])},t.FromArrayToRef=function(t,e,r){void 0===e&&(e=0),r.r=t[e],r.g=t[e+1],r.b=t[e+2],r.a=t[e+3]},t.FromInts=function(e,r,n,i){return new t(e/255,r/255,n/255,i/255)},t.CheckColors4=function(t,e){if(t.length===3*e){for(var r=[],n=0;n<t.length;n+=3){var i=n/3*4;r[i]=t[n],r[i+1]=t[n+1],r[i+2]=t[n+2],r[i+3]=1}return r}return t},t}(),h=function(){function t(){}return t.Color3=o.B.BuildArray(3,s.Black),t.Color4=o.B.BuildArray(3,(function(){return new u(0,0,0,0)})),t}();(0,a.H)("BABYLON.Color3",s),(0,a.H)("BABYLON.Color4",u)},48154:(t,e,r)=>{r.d(e,{Nn:()=>i,Q_:()=>o,kn:()=>a,zp:()=>n});var n=1/2.2,i=2.2,o=(1+Math.sqrt(5))/2,a=.001},84319:(t,e,r)=>{r.d(e,{i:()=>i});var n=r(62464),i=function(){function t(){}return t.GetPlanes=function(e){for(var r=[],i=0;i<6;i++)r.push(new n.J(0,0,0,0));return t.GetPlanesToRef(e,r),r},t.GetNearPlaneToRef=function(t,e){var r=t.m;e.normal.x=r[3]+r[2],e.normal.y=r[7]+r[6],e.normal.z=r[11]+r[10],e.d=r[15]+r[14],e.normalize()},t.GetFarPlaneToRef=function(t,e){var r=t.m;e.normal.x=r[3]-r[2],e.normal.y=r[7]-r[6],e.normal.z=r[11]-r[10],e.d=r[15]-r[14],e.normalize()},t.GetLeftPlaneToRef=function(t,e){var r=t.m;e.normal.x=r[3]+r[0],e.normal.y=r[7]+r[4],e.normal.z=r[11]+r[8],e.d=r[15]+r[12],e.normalize()},t.GetRightPlaneToRef=function(t,e){var r=t.m;e.normal.x=r[3]-r[0],e.normal.y=r[7]-r[4],e.normal.z=r[11]-r[8],e.d=r[15]-r[12],e.normalize()},t.GetTopPlaneToRef=function(t,e){var r=t.m;e.normal.x=r[3]-r[1],e.normal.y=r[7]-r[5],e.normal.z=r[11]-r[9],e.d=r[15]-r[13],e.normalize()},t.GetBottomPlaneToRef=function(t,e){var r=t.m;e.normal.x=r[3]+r[1],e.normal.y=r[7]+r[5],e.normal.z=r[11]+r[9],e.d=r[15]+r[13],e.normalize()},t.GetPlanesToRef=function(e,r){t.GetNearPlaneToRef(e,r[0]),t.GetFarPlaneToRef(e,r[1]),t.GetLeftPlaneToRef(e,r[2]),t.GetRightPlaneToRef(e,r[3]),t.GetTopPlaneToRef(e,r[4]),t.GetBottomPlaneToRef(e,r[5])},t}()},93701:(t,e,r)=>{r.d(e,{k:()=>u,y:()=>s});var n=r(31191),i=r(58095),o=r(96969),a=function(){function t(){}return t.extractMinAndMaxIndexed=function(t,e,r,n,i,o){for(var a=r;a<r+n;a++){var s=3*e[a],u=t[s],h=t[s+1],c=t[s+2];i.minimizeInPlaceFromFloats(u,h,c),o.maximizeInPlaceFromFloats(u,h,c)}},t.extractMinAndMax=function(t,e,r,n,i,o){for(var a=e,s=e*n;a<e+r;a++,s+=n){var u=t[s],h=t[s+1],c=t[s+2];i.minimizeInPlaceFromFloats(u,h,c),o.maximizeInPlaceFromFloats(u,h,c)}},(0,n.gn)([o.G6.filter((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],n=t[1];return!Array.isArray(r)&&!Array.isArray(n)}))],t,"extractMinAndMaxIndexed",null),(0,n.gn)([o.G6.filter((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0];return!Array.isArray(r)}))],t,"extractMinAndMax",null),t}();function s(t,e,r,n,o){void 0===o&&(o=null);var s=new i.P(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),u=new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return a.extractMinAndMaxIndexed(t,e,r,n,s,u),o&&(s.x-=s.x*o.x+o.y,s.y-=s.y*o.x+o.y,s.z-=s.z*o.x+o.y,u.x+=u.x*o.x+o.y,u.y+=u.y*o.x+o.y,u.z+=u.z*o.x+o.y),{minimum:s,maximum:u}}function u(t,e,r,n,o){void 0===n&&(n=null);var s=new i.P(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),u=new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return o||(o=3),a.extractMinAndMax(t,e,r,o,s,u),n&&(s.x-=s.x*n.x+n.y,s.y-=s.y*n.x+n.y,s.z-=s.z*n.x+n.y,u.x+=u.x*n.x+n.y,u.y+=u.y*n.x+n.y,u.z+=u.z*n.x+n.y),{minimum:s,maximum:u}}},89223:(t,e,r)=>{r.d(e,{a:()=>o});var n=r(84318),i=r(58095),o=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e,t!==Math.floor(t)&&(Math.floor(t),n.Y.Warn("x is not an integer, floor(x) used")),e!==Math.floor(e)&&(Math.floor(e),n.Y.Warn("y is not an integer, floor(y) used"))}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.rotate60About=function(t){var e=this.x;return this.x=t.x+t.y-this.y,this.y=e+this.y-t.x,this},t.prototype.rotateNeg60About=function(t){var e=this.x;return this.x=e+this.y-t.y,this.y=t.x+t.y-e,this},t.prototype.rotate120=function(t,e){t!==Math.floor(t)&&(Math.floor(t),n.Y.Warn("m not an integer only floor(m) used")),e!==Math.floor(e)&&(Math.floor(e),n.Y.Warn("n not an integer only floor(n) used"));var r=this.x;return this.x=t-r-this.y,this.y=e+r,this},t.prototype.rotateNeg120=function(t,e){t!==Math.floor(t)&&(Math.floor(t),n.Y.Warn("m is not an integer, floor(m) used")),e!==Math.floor(e)&&(Math.floor(e),n.Y.Warn("n is not an integer,   floor(n) used"));var r=this.x;return this.x=this.y-e,this.y=t+e-r-this.y,this},t.prototype.toCartesianOrigin=function(t,e){var r=i.P.Zero();return r.x=t.x+2*this.x*e+this.y*e,r.y=t.y+Math.sqrt(3)*this.y*e,r},t.Zero=function(){return new t(0,0)},t}()},6307:(t,e,r)=>{r.d(e,{$B:()=>s.$B,$S:()=>l.$,$u:()=>h.$,FM:()=>c.FM,HE:()=>i.HE,JO:()=>u.J,Lt:()=>c.Lt,Nn:()=>o.Nn,P:()=>c.P,Q:()=>s.Q,Q_:()=>o.Q_,RD:()=>n.RD,RZ:()=>s.RZ,T:()=>n.T,Wo:()=>i.Wo,ZZ:()=>s.ZZ,_f:()=>c._f,c7:()=>n.c7,eN:()=>l.e,hr:()=>s.hr,i5:()=>s.i5,iW:()=>a.i,j_:()=>s.j_,jp:()=>c.jp,kn:()=>o.kn,l_:()=>f.l,y3:()=>c.y3,zZ:()=>i.zZ,zp:()=>o.zp});var n=r(43048),i=r(15631),o=r(48154),a=r(84319),s=r(74742),u=r(62464),h=r(76144),c=r(58095),l=r(84028),f=r(66513)},74742:(t,e,r)=>{r.d(e,{$B:()=>l,Q:()=>h,RZ:()=>u,ZZ:()=>c,hr:()=>s,i5:()=>n,j_:()=>f});var n,i=r(72739),o=r(58095),a=r(48154);!function(t){t[t.CW=0]="CW",t[t.CCW=1]="CCW"}(n||(n={}));var s=function(){function t(){}return t.Interpolate=function(t,e,r,n,i){for(var o=1-3*n+3*e,a=3*n-6*e,s=3*e,u=t,h=0;h<5;h++){var c=u*u;u-=(o*(c*u)+a*c+s*u-t)*(1/(3*o*c+2*a*u+s)),u=Math.min(1,Math.max(0,u))}return 3*Math.pow(1-u,2)*u*r+3*(1-u)*Math.pow(u,2)*i+Math.pow(u,3)},t}(),u=function(){function t(t){this._radians=t,this._radians<0&&(this._radians+=2*Math.PI)}return t.prototype.degrees=function(){return 180*this._radians/Math.PI},t.prototype.radians=function(){return this._radians},t.BetweenTwoPoints=function(e,r){var n=r.subtract(e);return new t(Math.atan2(n.y,n.x))},t.FromRadians=function(e){return new t(e)},t.FromDegrees=function(e){return new t(e*Math.PI/180)},t}(),h=function(t,e,r){this.startPoint=t,this.midPoint=e,this.endPoint=r;var i=Math.pow(e.x,2)+Math.pow(e.y,2),a=(Math.pow(t.x,2)+Math.pow(t.y,2)-i)/2,s=(i-Math.pow(r.x,2)-Math.pow(r.y,2))/2,h=(t.x-e.x)*(e.y-r.y)-(e.x-r.x)*(t.y-e.y);this.centerPoint=new o.FM((a*(e.y-r.y)-s*(t.y-e.y))/h,((t.x-e.x)*s-(e.x-r.x)*a)/h),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=u.BetweenTwoPoints(this.centerPoint,this.startPoint);var c=this.startAngle.degrees(),l=u.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),f=u.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();l-c>180&&(l-=360),l-c<-180&&(l+=360),f-l>180&&(f-=360),f-l<-180&&(f+=360),this.orientation=l-c<0?n.CW:n.CCW,this.angle=u.FromDegrees(this.orientation===n.CW?c-f:f-c)},c=function(){function t(t,e){this._points=new Array,this._length=0,this.closed=!1,this._points.push(new o.FM(t,e))}return t.prototype.addLineTo=function(t,e){if(this.closed)return this;var r=new o.FM(t,e),n=this._points[this._points.length-1];return this._points.push(r),this._length+=r.subtract(n).length(),this},t.prototype.addArcTo=function(t,e,r,i,a){if(void 0===a&&(a=36),this.closed)return this;var s=this._points[this._points.length-1],u=new o.FM(t,e),c=new o.FM(r,i),l=new h(s,u,c),f=l.angle.radians()/a;l.orientation===n.CW&&(f*=-1);for(var p=l.startAngle.radians()+f,d=0;d<a;d++){var y=Math.cos(p)*l.radius+l.centerPoint.x,_=Math.sin(p)*l.radius+l.centerPoint.y;this.addLineTo(y,_),p+=f}return this},t.prototype.close=function(){return this.closed=!0,this},t.prototype.length=function(){var t=this._length;if(this.closed){var e=this._points[this._points.length-1];t+=this._points[0].subtract(e).length()}return t},t.prototype.getPoints=function(){return this._points},t.prototype.getPointAtLengthPosition=function(t){if(t<0||t>1)return o.FM.Zero();for(var e=t*this.length(),r=0,n=0;n<this._points.length;n++){var i=(n+1)%this._points.length,a=this._points[n],s=this._points[i].subtract(a),u=s.length()+r;if(e>=r&&e<=u){var h=s.normalize(),c=e-r;return new o.FM(a.x+h.x*c,a.y+h.y*c)}r=u}return o.FM.Zero()},t.StartingAt=function(e,r){return new t(e,r)},t}(),l=function(){function t(t,e,r,n){void 0===e&&(e=null),void 0===n&&(n=!1),this.path=t,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array,this._pointAtData={id:0,point:o.P.Zero(),previousPointArrayIndex:0,position:0,subPosition:0,interpolateReady:!1,interpolationMatrix:o.y3.Identity()};for(var i=0;i<t.length;i++)this._curve[i]=t[i].clone();this._raw=r||!1,this._alignTangentsWithPath=n,this._compute(e,n)}return t.prototype.getCurve=function(){return this._curve},t.prototype.getPoints=function(){return this._curve},t.prototype.length=function(){return this._distances[this._distances.length-1]},t.prototype.getTangents=function(){return this._tangents},t.prototype.getNormals=function(){return this._normals},t.prototype.getBinormals=function(){return this._binormals},t.prototype.getDistances=function(){return this._distances},t.prototype.getPointAt=function(t){return this._updatePointAtData(t).point},t.prototype.getTangentAt=function(t,e){return void 0===e&&(e=!1),this._updatePointAtData(t,e),e?o.P.TransformCoordinates(o.P.Forward(),this._pointAtData.interpolationMatrix):this._tangents[this._pointAtData.previousPointArrayIndex]},t.prototype.getNormalAt=function(t,e){return void 0===e&&(e=!1),this._updatePointAtData(t,e),e?o.P.TransformCoordinates(o.P.Right(),this._pointAtData.interpolationMatrix):this._normals[this._pointAtData.previousPointArrayIndex]},t.prototype.getBinormalAt=function(t,e){return void 0===e&&(e=!1),this._updatePointAtData(t,e),e?o.P.TransformCoordinates(o.P.UpReadOnly,this._pointAtData.interpolationMatrix):this._binormals[this._pointAtData.previousPointArrayIndex]},t.prototype.getDistanceAt=function(t){return this.length()*t},t.prototype.getPreviousPointIndexAt=function(t){return this._updatePointAtData(t),this._pointAtData.previousPointArrayIndex},t.prototype.getSubPositionAt=function(t){return this._updatePointAtData(t),this._pointAtData.subPosition},t.prototype.getClosestPositionTo=function(t){for(var e=Number.MAX_VALUE,r=0,n=0;n<this._curve.length-1;n++){var i=this._curve[n+0],a=this._curve[n+1].subtract(i).normalize(),s=this._distances[n+1]-this._distances[n+0],u=Math.min(Math.max(o.P.Dot(a,t.subtract(i).normalize()),0)*o.P.Distance(i,t)/s,1),h=o.P.Distance(i.add(a.scale(u*s)),t);h<e&&(e=h,r=(this._distances[n+0]+s*u)/this.length())}return r},t.prototype.slice=function(e,r){if(void 0===e&&(e=0),void 0===r&&(r=1),e<0&&(e=1- -1*e%1),r<0&&(r=1- -1*r%1),e>r){var n=e;e=r,r=n}var i=this.getCurve(),o=this.getPointAt(e),a=this.getPreviousPointIndexAt(e),s=this.getPointAt(r),u=this.getPreviousPointIndexAt(r)+1,h=[];return 0!==e&&(a++,h.push(o)),h.push.apply(h,i.slice(a,u)),1===r&&1!==e||h.push(s),new t(h,this.getNormalAt(e),this._raw,this._alignTangentsWithPath)},t.prototype.update=function(t,e,r){void 0===e&&(e=null),void 0===r&&(r=!1);for(var n=0;n<t.length;n++)this._curve[n].x=t[n].x,this._curve[n].y=t[n].y,this._curve[n].z=t[n].z;return this._compute(e,r),this},t.prototype._compute=function(t,e){void 0===e&&(e=!1);var r=this._curve.length;if(!(r<2)){this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[r-1]=this._curve[r-1].subtract(this._curve[r-2]),this._raw||this._tangents[r-1].normalize();var n,i,a,s,u,h=this._tangents[0],c=this._normalVector(h,t);this._normals[0]=c,this._raw||this._normals[0].normalize(),this._binormals[0]=o.P.Cross(h,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var l=1;l<r;l++)n=this._getLastNonNullVector(l),l<r-1&&(i=this._getFirstNonNullVector(l),this._tangents[l]=e?i:n.add(i),this._tangents[l].normalize()),this._distances[l]=this._distances[l-1]+this._curve[l].subtract(this._curve[l-1]).length(),a=this._tangents[l],u=this._binormals[l-1],this._normals[l]=o.P.Cross(u,a),this._raw||(0===this._normals[l].length()?(s=this._normals[l-1],this._normals[l]=s.clone()):this._normals[l].normalize()),this._binormals[l]=o.P.Cross(a,this._normals[l]),this._raw||this._binormals[l].normalize();this._pointAtData.id=NaN}},t.prototype._getFirstNonNullVector=function(t){for(var e=1,r=this._curve[t+e].subtract(this._curve[t]);0===r.length()&&t+e+1<this._curve.length;)e++,r=this._curve[t+e].subtract(this._curve[t]);return r},t.prototype._getLastNonNullVector=function(t){for(var e=1,r=this._curve[t].subtract(this._curve[t-e]);0===r.length()&&t>e+1;)e++,r=this._curve[t].subtract(this._curve[t-e]);return r},t.prototype._normalVector=function(t,e){var r,n=t.length();if(0===n&&(n=1),null==e){var s=void 0;s=i.R.WithinEpsilon(Math.abs(t.y)/n,1,a.kn)?i.R.WithinEpsilon(Math.abs(t.x)/n,1,a.kn)?i.R.WithinEpsilon(Math.abs(t.z)/n,1,a.kn)?o.P.Zero():new o.P(0,0,1):new o.P(1,0,0):new o.P(0,-1,0),r=o.P.Cross(t,s)}else r=o.P.Cross(t,e),o.P.CrossToRef(r,t,r);return r.normalize(),r},t.prototype._updatePointAtData=function(t,e){if(void 0===e&&(e=!1),this._pointAtData.id===t)return this._pointAtData.interpolateReady||this._updateInterpolationMatrix(),this._pointAtData;this._pointAtData.id=t;var r=this.getPoints();if(t<=0)return this._setPointAtData(0,0,r[0],0,e);if(t>=1)return this._setPointAtData(1,1,r[r.length-1],r.length-1,e);for(var n,i=r[0],a=0,s=t*this.length(),u=1;u<r.length;u++){n=r[u];var h=o.P.Distance(i,n);if((a+=h)===s)return this._setPointAtData(t,1,n,u,e);if(a>s){var c=(a-s)/h,l=i.subtract(n),f=n.add(l.scaleInPlace(c));return this._setPointAtData(t,1-c,f,u-1,e)}i=n}return this._pointAtData},t.prototype._setPointAtData=function(t,e,r,n,i){return this._pointAtData.point=r,this._pointAtData.position=t,this._pointAtData.subPosition=e,this._pointAtData.previousPointArrayIndex=n,this._pointAtData.interpolateReady=i,i&&this._updateInterpolationMatrix(),this._pointAtData},t.prototype._updateInterpolationMatrix=function(){this._pointAtData.interpolationMatrix=o.y3.Identity();var t=this._pointAtData.previousPointArrayIndex;if(t!==this._tangents.length-1){var e=t+1,r=this._tangents[t].clone(),n=this._normals[t].clone(),i=this._binormals[t].clone(),a=this._tangents[e].clone(),s=this._normals[e].clone(),u=this._binormals[e].clone(),h=o._f.RotationQuaternionFromAxis(n,i,r),c=o._f.RotationQuaternionFromAxis(s,u,a);o._f.Slerp(h,c,this._pointAtData.subPosition).toRotationMatrix(this._pointAtData.interpolationMatrix)}},t}(),f=function(){function t(t){this._length=0,this._points=t,this._length=this._computeLength(t)}return t.CreateQuadraticBezier=function(e,r,n,i){i=i>2?i:3;for(var a=new Array,s=function(t,e,r,n){return(1-t)*(1-t)*e+2*t*(1-t)*r+t*t*n},u=0;u<=i;u++)a.push(new o.P(s(u/i,e.x,r.x,n.x),s(u/i,e.y,r.y,n.y),s(u/i,e.z,r.z,n.z)));return new t(a)},t.CreateCubicBezier=function(e,r,n,i,a){a=a>3?a:4;for(var s=new Array,u=function(t,e,r,n,i){return(1-t)*(1-t)*(1-t)*e+3*t*(1-t)*(1-t)*r+3*t*t*(1-t)*n+t*t*t*i},h=0;h<=a;h++)s.push(new o.P(u(h/a,e.x,r.x,n.x,i.x),u(h/a,e.y,r.y,n.y,i.y),u(h/a,e.z,r.z,n.z,i.z)));return new t(s)},t.CreateHermiteSpline=function(e,r,n,i,a){for(var s=new Array,u=1/a,h=0;h<=a;h++)s.push(o.P.Hermite(e,r,n,i,h*u));return new t(s)},t.CreateCatmullRomSpline=function(e,r,n){var i=new Array,a=1/r,s=0;if(n){for(var u=e.length,h=0;h<u;h++){s=0;for(var c=0;c<r;c++)i.push(o.P.CatmullRom(e[h%u],e[(h+1)%u],e[(h+2)%u],e[(h+3)%u],s)),s+=a}i.push(i[0])}else{var l=new Array;l.push(e[0].clone()),Array.prototype.push.apply(l,e),l.push(e[e.length-1].clone());for(h=0;h<l.length-3;h++){s=0;for(c=0;c<r;c++)i.push(o.P.CatmullRom(l[h],l[h+1],l[h+2],l[h+3],s)),s+=a}h--,i.push(o.P.CatmullRom(l[h],l[h+1],l[h+2],l[h+3],s))}return new t(i)},t.ArcThru3Points=function(e,r,n,i,a,s){void 0===i&&(i=32),void 0===a&&(a=!1),void 0===s&&(s=!1);var u=new Array,h=r.subtract(e),c=n.subtract(r),l=e.subtract(n),f=o.P.Cross(h,c),p=f.length();if(p<Math.pow(10,-8))return new t(u);var d=h.lengthSquared(),y=c.lengthSquared(),_=l.lengthSquared(),m=f.lengthSquared(),v=.5*h.length()*c.length()*l.length()/p,g=-.5*y*o.P.Dot(h,l)/m,x=-.5*_*o.P.Dot(h,c)/m,b=-.5*d*o.P.Dot(c,l)/m,P=e.scale(g).add(r.scale(x)).add(n.scale(b)),T=e.subtract(P).normalize(),R=o.P.Cross(f,T).normalize();if(s){for(var M=2*Math.PI/i,w=0;w<=2*Math.PI;w+=M)u.push(P.add(T.scale(v*Math.cos(w)).add(R.scale(v*Math.sin(w)))));u.push(e)}else{M=1/i,w=0;var A=o.P.Zero();do{A=P.add(T.scale(v*Math.cos(w)).add(R.scale(v*Math.sin(w)))),u.push(A),w+=M}while(!A.equalsWithEpsilon(n,v*M*1.1));u.push(n),a&&u.push(e)}return new t(u)},t.prototype.getPoints=function(){return this._points},t.prototype.length=function(){return this._length},t.prototype.continue=function(e){for(var r=this._points[this._points.length-1],n=this._points.slice(),i=e.getPoints(),o=1;o<i.length;o++)n.push(i[o].subtract(i[0]).add(r));return new t(n)},t.prototype._computeLength=function(t){for(var e=0,r=1;r<t.length;r++)e+=t[r].subtract(t[r-1]).length();return e},t}()},62464:(t,e,r)=>{r.d(e,{J:()=>i});var n=r(58095),i=function(){function t(t,e,r,i){this.normal=new n.P(t,e,r),this.d=i}return t.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},t.prototype.clone=function(){return new t(this.normal.x,this.normal.y,this.normal.z,this.d)},t.prototype.getClassName=function(){return"Plane"},t.prototype.getHashCode=function(){var t=this.normal.getHashCode();return t=397*t^(0|this.d)},t.prototype.normalize=function(){var t=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),e=0;return 0!==t&&(e=1/t),this.normal.x*=e,this.normal.y*=e,this.normal.z*=e,this.d*=e,this},t.prototype.transform=function(e){var r=t._TmpMatrix;e.invertToRef(r);var n=r.m,i=this.normal.x,o=this.normal.y,a=this.normal.z,s=this.d;return new t(i*n[0]+o*n[1]+a*n[2]+s*n[3],i*n[4]+o*n[5]+a*n[6]+s*n[7],i*n[8]+o*n[9]+a*n[10]+s*n[11],i*n[12]+o*n[13]+a*n[14]+s*n[15])},t.prototype.dotCoordinate=function(t){return this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z+this.d},t.prototype.copyFromPoints=function(t,e,r){var n,i=e.x-t.x,o=e.y-t.y,a=e.z-t.z,s=r.x-t.x,u=r.y-t.y,h=r.z-t.z,c=o*h-a*u,l=a*s-i*h,f=i*u-o*s,p=Math.sqrt(c*c+l*l+f*f);return n=0!==p?1/p:0,this.normal.x=c*n,this.normal.y=l*n,this.normal.z=f*n,this.d=-(this.normal.x*t.x+this.normal.y*t.y+this.normal.z*t.z),this},t.prototype.isFrontFacingTo=function(t,e){return n.P.Dot(this.normal,t)<=e},t.prototype.signedDistanceTo=function(t){return n.P.Dot(t,this.normal)+this.d},t.FromArray=function(e){return new t(e[0],e[1],e[2],e[3])},t.FromPoints=function(e,r,n){var i=new t(0,0,0,0);return i.copyFromPoints(e,r,n),i},t.FromPositionAndNormal=function(e,r){var n=new t(0,0,0,0);return r.normalize(),n.normal=r,n.d=-(r.x*e.x+r.y*e.y+r.z*e.z),n},t.SignedDistanceToPlaneFromPositionAndNormal=function(t,e,r){var i=-(e.x*t.x+e.y*t.y+e.z*t.z);return n.P.Dot(r,e)+i},t._TmpMatrix=n.y3.Identity(),t}()},72739:(t,e,r)=>{r.d(e,{R:()=>n});var n=function(){function t(){}return t.WithinEpsilon=function(t,e,r){return void 0===r&&(r=1401298e-51),Math.abs(t-e)<=r},t.ToHex=function(t){var e=t.toString(16);return t<=15?("0"+e).toUpperCase():e.toUpperCase()},t.Sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1},t.Clamp=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=1),Math.min(r,Math.max(e,t))},t.Log2=function(t){return Math.log(t)*Math.LOG2E},t.ILog2=function(t){if(Math.log2)return Math.floor(Math.log2(t));if(t<0)return NaN;if(0===t)return-1/0;var e=0;if(t<1){for(;t<1;)e++,t*=2;e=-e}else if(t>1)for(;t>1;)e++,t=Math.floor(t/2);return e},t.Repeat=function(t,e){return t-Math.floor(t/e)*e},t.Normalize=function(t,e,r){return(t-e)/(r-e)},t.Denormalize=function(t,e,r){return t*(r-e)+e},t.DeltaAngle=function(e,r){var n=t.Repeat(r-e,360);return n>180&&(n-=360),n},t.PingPong=function(e,r){var n=t.Repeat(e,2*r);return r-Math.abs(n-r)},t.SmoothStep=function(e,r,n){var i=t.Clamp(n);return r*(i=-2*i*i*i+3*i*i)+e*(1-i)},t.MoveTowards=function(e,r,n){return Math.abs(r-e)<=n?r:e+t.Sign(r-e)*n},t.MoveTowardsAngle=function(e,r,n){var i=t.DeltaAngle(e,r),o=0;return-n<i&&i<n?o=r:(r=e+i,o=t.MoveTowards(e,r,n)),o},t.Lerp=function(t,e,r){return t+(e-t)*r},t.LerpAngle=function(e,r,n){var i=t.Repeat(r-e,360);return i>180&&(i-=360),e+i*t.Clamp(n)},t.InverseLerp=function(e,r,n){return e!=r?t.Clamp((n-e)/(r-e)):0},t.Hermite=function(t,e,r,n,i){var o=i*i,a=i*o;return t*(2*a-3*o+1)+r*(-2*a+3*o)+e*(a-2*o+i)+n*(a-o)},t.Hermite1stDerivative=function(t,e,r,n,i){var o=i*i;return 6*(o-i)*t+(3*o-4*i+1)*e+6*(-o+i)*r+(3*o-2*i)*n},t.RandomRange=function(t,e){return t===e?t:Math.random()*(e-t)+t},t.RangeToPercent=function(t,e,r){return(t-e)/(r-e)},t.PercentToRange=function(t,e,r){return(r-e)*t+e},t.NormalizeRadians=function(e){return e-=t.TwoPi*Math.floor((e+Math.PI)/t.TwoPi)},t.HCF=function(e,r){var n=e%r;return 0===n?r:t.HCF(r,n)},t.TwoPi=2*Math.PI,t}()},76144:(t,e,r)=>{r.d(e,{$:()=>n});var n=function(){function t(t,e){this.width=t,this.height=e}return t.prototype.toString=function(){return"{W: ".concat(this.width,", H: ").concat(this.height,"}")},t.prototype.getClassName=function(){return"Size"},t.prototype.getHashCode=function(){var t=0|this.width;return t=397*t^(0|this.height)},t.prototype.copyFrom=function(t){this.width=t.width,this.height=t.height},t.prototype.copyFromFloats=function(t,e){return this.width=t,this.height=e,this},t.prototype.set=function(t,e){return this.copyFromFloats(t,e)},t.prototype.multiplyByFloats=function(e,r){return new t(this.width*e,this.height*r)},t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(t){return!!t&&(this.width===t.width&&this.height===t.height)},Object.defineProperty(t.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!1,configurable:!0}),t.Zero=function(){return new t(0,0)},t.prototype.add=function(e){return new t(this.width+e.width,this.height+e.height)},t.prototype.subtract=function(e){return new t(this.width-e.width,this.height-e.height)},t.Lerp=function(e,r,n){return new t(e.width+(r.width-e.width)*n,e.height+(r.height-e.height)*n)},t}()},58095:(t,e,r)=>{r.d(e,{FM:()=>c,Lt:()=>f,P:()=>l,_f:()=>p,jp:()=>_,y3:()=>d});var n=r(72739),i=r(48154),o=r(48939),a=r(48620),s=r(20298),u=r(15210),h=function(t){return parseInt(t.toString().replace(/\W/g,""))},c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.toString=function(){return"{X: ".concat(this.x," Y: ").concat(this.y,"}")},t.prototype.getClassName=function(){return"Vector2"},t.prototype.getHashCode=function(){var t=h(this.x);return t=397*t^h(this.y)},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,this},t.prototype.fromArray=function(e,r){return void 0===r&&(r=0),t.FromArrayToRef(e,r,this),this},t.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.copyFromFloats=function(t,e){return this.x=t,this.y=e,this},t.prototype.set=function(t,e){return this.copyFromFloats(t,e)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,this},t.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.addVector3=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,this},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.multiply=function(e){return new t(this.x*e.x,this.y*e.y)},t.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,this},t.prototype.multiplyByFloats=function(e,r){return new t(this.x*e,this.y*r)},t.prototype.divide=function(e){return new t(this.x/e.x,this.y/e.y)},t.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,this},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this},t.prototype.negateToRef=function(t){return t.copyFromFloats(-1*this.x,-1*this.y)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this},t.prototype.scale=function(e){var r=new t(0,0);return this.scaleToRef(e,r),r},t.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.x+=this.x*t,e.y+=this.y*t,this},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},t.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=i.kn),t&&n.R.WithinEpsilon(this.x,t.x,e)&&n.R.WithinEpsilon(this.y,t.y,e)},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},t.prototype.rotateToRef=function(t,e){var r=Math.cos(t),n=Math.sin(t);return e.x=r*this.x-n*this.y,e.y=n*this.x+r*this.y,this},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){return t.NormalizeToRef(this,this),this},t.prototype.clone=function(){return new t(this.x,this.y)},t.Zero=function(){return new t(0,0)},t.One=function(){return new t(1,1)},t.FromArray=function(e,r){return void 0===r&&(r=0),new t(e[r],e[r+1])},t.FromArrayToRef=function(t,e,r){r.x=t[e],r.y=t[e+1]},t.CatmullRom=function(e,r,n,i,o){var a=o*o,s=o*a;return new t(.5*(2*r.x+(-e.x+n.x)*o+(2*e.x-5*r.x+4*n.x-i.x)*a+(-e.x+3*r.x-3*n.x+i.x)*s),.5*(2*r.y+(-e.y+n.y)*o+(2*e.y-5*r.y+4*n.y-i.y)*a+(-e.y+3*r.y-3*n.y+i.y)*s))},t.Clamp=function(e,r,n){var i=e.x;i=(i=i>n.x?n.x:i)<r.x?r.x:i;var o=e.y;return new t(i,o=(o=o>n.y?n.y:o)<r.y?r.y:o)},t.Hermite=function(e,r,n,i,o){var a=o*o,s=o*a,u=2*s-3*a+1,h=-2*s+3*a,c=s-2*a+o,l=s-a;return new t(e.x*u+n.x*h+r.x*c+i.x*l,e.y*u+n.y*h+r.y*c+i.y*l)},t.Hermite1stDerivative=function(e,r,n,i,o){var a=t.Zero();return this.Hermite1stDerivativeToRef(e,r,n,i,o,a),a},t.Hermite1stDerivativeToRef=function(t,e,r,n,i,o){var a=i*i;o.x=6*(a-i)*t.x+(3*a-4*i+1)*e.x+6*(-a+i)*r.x+(3*a-2*i)*n.x,o.y=6*(a-i)*t.y+(3*a-4*i+1)*e.y+6*(-a+i)*r.y+(3*a-2*i)*n.y},t.Lerp=function(e,r,n){return new t(e.x+(r.x-e.x)*n,e.y+(r.y-e.y)*n)},t.Dot=function(t,e){return t.x*e.x+t.y*e.y},t.Normalize=function(e){var r=t.Zero();return this.NormalizeToRef(e,r),r},t.NormalizeToRef=function(t,e){var r=t.length();0!==r&&(e.x=t.x/r,e.y=t.y/r)},t.Minimize=function(e,r){return new t(e.x<r.x?e.x:r.x,e.y<r.y?e.y:r.y)},t.Maximize=function(e,r){return new t(e.x>r.x?e.x:r.x,e.y>r.y?e.y:r.y)},t.Transform=function(e,r){var n=t.Zero();return t.TransformToRef(e,r,n),n},t.TransformToRef=function(t,e,r){var n=e.m,i=t.x*n[0]+t.y*n[4]+n[12],o=t.x*n[1]+t.y*n[5]+n[13];r.x=i,r.y=o},t.PointInTriangle=function(t,e,r,n){var i=.5*(-r.y*n.x+e.y*(-r.x+n.x)+e.x*(r.y-n.y)+r.x*n.y),o=i<0?-1:1,a=(e.y*n.x-e.x*n.y+(n.y-e.y)*t.x+(e.x-n.x)*t.y)*o,s=(e.x*r.y-e.y*r.x+(e.y-r.y)*t.x+(r.x-e.x)*t.y)*o;return a>0&&s>0&&a+s<2*i*o},t.Distance=function(e,r){return Math.sqrt(t.DistanceSquared(e,r))},t.DistanceSquared=function(t,e){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n},t.Center=function(e,r){return t.CenterToRef(e,r,t.Zero())},t.CenterToRef=function(t,e,r){return r.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2)},t.DistanceOfPointFromSegment=function(e,r,n){var i=t.DistanceSquared(r,n);if(0===i)return t.Distance(e,r);var o=n.subtract(r),a=Math.max(0,Math.min(1,t.Dot(e.subtract(r),o)/i)),s=r.add(o.multiplyByFloats(a,a));return t.Distance(e,s)},t}(),l=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this._isDirty=!0,this._x=t,this._y=e,this._z=r}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z,"}")},t.prototype.getClassName=function(){return"Vector3"},t.prototype.getHashCode=function(){var t=h(this._x);return t=397*(t=397*t^h(this._y))^h(this._z)},t.prototype.asArray=function(){var t=[];return this.toArray(t,0),t},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,this},t.prototype.fromArray=function(e,r){return void 0===r&&(r=0),t.FromArrayToRef(e,r,this),this},t.prototype.toQuaternion=function(){return p.RotationYawPitchRoll(this._y,this._x,this._z)},t.prototype.addInPlace=function(t){return this.addInPlaceFromFloats(t._x,t._y,t._z)},t.prototype.addInPlaceFromFloats=function(t,e,r){return this.x+=t,this.y+=e,this.z+=r,this},t.prototype.add=function(e){return new t(this._x+e._x,this._y+e._y,this._z+e._z)},t.prototype.addToRef=function(t,e){return e.copyFromFloats(this._x+t._x,this._y+t._y,this._z+t._z)},t.prototype.subtractInPlace=function(t){return this.x-=t._x,this.y-=t._y,this.z-=t._z,this},t.prototype.subtract=function(e){return new t(this._x-e._x,this._y-e._y,this._z-e._z)},t.prototype.subtractToRef=function(t,e){return this.subtractFromFloatsToRef(t._x,t._y,t._z,e)},t.prototype.subtractFromFloats=function(e,r,n){return new t(this._x-e,this._y-r,this._z-n)},t.prototype.subtractFromFloatsToRef=function(t,e,r,n){return n.copyFromFloats(this._x-t,this._y-e,this._z-r)},t.prototype.negate=function(){return new t(-this._x,-this._y,-this._z)},t.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.negateToRef=function(t){return t.copyFromFloats(-1*this._x,-1*this._y,-1*this._z)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this},t.prototype.scale=function(e){return new t(this._x*e,this._y*e,this._z*e)},t.prototype.scaleToRef=function(t,e){return e.copyFromFloats(this._x*t,this._y*t,this._z*t)},t.prototype.applyRotationQuaternionToRef=function(t,e){var r=t.w*this.x+t.y*this.z-t.z*this.y,n=t.w*this.y+t.z*this.x-t.x*this.z,i=t.w*this.z+t.x*this.y-t.y*this.x,o=-t.x*this.x-t.y*this.y-t.z*this.z;return e.x=r*t.w+o*-t.x+n*-t.z-i*-t.y,e.y=n*t.w+o*-t.y+i*-t.x-r*-t.z,e.z=i*t.w+o*-t.z+r*-t.y-n*-t.x,e},t.prototype.applyRotationQuaternionInPlace=function(t){return this.applyRotationQuaternionToRef(t,this)},t.prototype.applyRotationQuaternion=function(e){return this.applyRotationQuaternionToRef(e,t.Zero())},t.prototype.scaleAndAddToRef=function(t,e){return e.addInPlaceFromFloats(this._x*t,this._y*t,this._z*t)},t.prototype.projectOnPlane=function(e,r){var n=t.Zero();return this.projectOnPlaneToRef(e,r,n),n},t.prototype.projectOnPlaneToRef=function(e,r,n){var i=e.normal,o=e.d,a=y.Vector3[0];this.subtractToRef(r,a),a.normalize();var s=t.Dot(a,i),u=-(t.Dot(r,i)+o)/s,h=a.scaleInPlace(u);r.addToRef(h,n)},t.prototype.equals=function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z},t.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=i.kn),t&&n.R.WithinEpsilon(this._x,t._x,e)&&n.R.WithinEpsilon(this._y,t._y,e)&&n.R.WithinEpsilon(this._z,t._z,e)},t.prototype.equalsToFloats=function(t,e,r){return this._x===t&&this._y===e&&this._z===r},t.prototype.multiplyInPlace=function(t){return this.x*=t._x,this.y*=t._y,this.z*=t._z,this},t.prototype.multiply=function(t){return this.multiplyByFloats(t._x,t._y,t._z)},t.prototype.multiplyToRef=function(t,e){return e.copyFromFloats(this._x*t._x,this._y*t._y,this._z*t._z)},t.prototype.multiplyByFloats=function(e,r,n){return new t(this._x*e,this._y*r,this._z*n)},t.prototype.divide=function(e){return new t(this._x/e._x,this._y/e._y,this._z/e._z)},t.prototype.divideToRef=function(t,e){return e.copyFromFloats(this._x/t._x,this._y/t._y,this._z/t._z)},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.minimizeInPlace=function(t){return this.minimizeInPlaceFromFloats(t._x,t._y,t._z)},t.prototype.maximizeInPlace=function(t){return this.maximizeInPlaceFromFloats(t._x,t._y,t._z)},t.prototype.minimizeInPlaceFromFloats=function(t,e,r){return t<this._x&&(this.x=t),e<this._y&&(this.y=e),r<this._z&&(this.z=r),this},t.prototype.maximizeInPlaceFromFloats=function(t,e,r){return t>this._x&&(this.x=t),e>this._y&&(this.y=e),r>this._z&&(this.z=r),this},t.prototype.isNonUniformWithinEpsilon=function(t){var e=Math.abs(this._x),r=Math.abs(this._y);if(!n.R.WithinEpsilon(e,r,t))return!0;var i=Math.abs(this._z);return!n.R.WithinEpsilon(e,i,t)||!n.R.WithinEpsilon(r,i,t)},Object.defineProperty(t.prototype,"isNonUniform",{get:function(){var t=Math.abs(this._x);return t!==Math.abs(this._y)||t!==Math.abs(this._z)},enumerable:!1,configurable:!0}),t.prototype.floor=function(){return new t(Math.floor(this._x),Math.floor(this._y),Math.floor(this._z))},t.prototype.fract=function(){return new t(this._x-Math.floor(this._x),this._y-Math.floor(this._y),this._z-Math.floor(this._z))},t.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)},t.prototype.lengthSquared=function(){return this._x*this._x+this._y*this._y+this._z*this._z},Object.defineProperty(t.prototype,"hasAZeroComponent",{get:function(){return this._x*this._y*this._z==0},enumerable:!1,configurable:!0}),t.prototype.normalize=function(){return this.normalizeFromLength(this.length())},t.prototype.reorderInPlace=function(t){var e=this;return"xyz"===(t=t.toLowerCase())||(y.Vector3[0].copyFrom(this),["x","y","z"].forEach((function(r,n){e[r]=y.Vector3[0][t[n]]}))),this},t.prototype.rotateByQuaternionToRef=function(e,r){return e.toRotationMatrix(y.Matrix[0]),t.TransformCoordinatesToRef(this,y.Matrix[0],r),r},t.prototype.rotateByQuaternionAroundPointToRef=function(t,e,r){return this.subtractToRef(e,y.Vector3[0]),y.Vector3[0].rotateByQuaternionToRef(t,y.Vector3[0]),e.addToRef(y.Vector3[0],r),r},t.prototype.cross=function(e){return t.Cross(this,e)},t.prototype.normalizeFromLength=function(t){return 0===t||1===t?this:this.scaleInPlace(1/t)},t.prototype.normalizeToNew=function(){var e=new t(0,0,0);return this.normalizeToRef(e),e},t.prototype.normalizeToRef=function(t){var e=this.length();return 0===e||1===e?t.copyFromFloats(this._x,this._y,this._z):this.scaleToRef(1/e,t)},t.prototype.clone=function(){return new t(this._x,this._y,this._z)},t.prototype.copyFrom=function(t){return this.copyFromFloats(t._x,t._y,t._z)},t.prototype.copyFromFloats=function(t,e,r){return this.x=t,this.y=e,this.z=r,this},t.prototype.set=function(t,e,r){return this.copyFromFloats(t,e,r)},t.prototype.setAll=function(t){return this.x=this.y=this.z=t,this},t.GetClipFactor=function(e,r,n,i){var o=t.Dot(e,n)-i;return o/(o-(t.Dot(r,n)-i))},t.GetAngleBetweenVectors=function(e,r,i){var o=e.normalizeToRef(y.Vector3[1]),a=r.normalizeToRef(y.Vector3[2]),s=t.Dot(o,a);s=n.R.Clamp(s,-1,1);var u=Math.acos(s),h=y.Vector3[3];return t.CrossToRef(o,a,h),t.Dot(h,i)>0?isNaN(u)?0:u:isNaN(u)?-Math.PI:-Math.acos(s)},t.GetAngleBetweenVectorsOnPlane=function(e,r,i){y.Vector3[0].copyFrom(e);var o=y.Vector3[0];y.Vector3[1].copyFrom(r);var a=y.Vector3[1];y.Vector3[2].copyFrom(i);var s=y.Vector3[2],u=y.Vector3[3],h=y.Vector3[4];o.normalize(),a.normalize(),s.normalize(),t.CrossToRef(s,o,u),t.CrossToRef(u,s,h);var c=Math.atan2(t.Dot(a,u),t.Dot(a,h));return n.R.NormalizeRadians(c)},t.SlerpToRef=function(e,r,o,a){o=n.R.Clamp(o,0,1);var s=y.Vector3[0],u=y.Vector3[1];s.copyFrom(e);var h=s.length();s.normalizeFromLength(h),u.copyFrom(r);var c=u.length();u.normalizeFromLength(c);var l,f,p=t.Dot(s,u);if(p<1-i.kn){var d=Math.acos(p),_=1/Math.sin(d);l=Math.sin((1-o)*d)*_,f=Math.sin(o*d)*_}else l=1-o,f=o;s.scaleInPlace(l),u.scaleInPlace(f),a.copyFrom(s).addInPlace(u),a.scaleInPlace(n.R.Lerp(h,c,o))},t.SmoothToRef=function(e,r,n,i,o){t.SlerpToRef(e,r,0===i?1:n/i,o)},t.FromArray=function(e,r){return void 0===r&&(r=0),new t(e[r],e[r+1],e[r+2])},t.FromFloatArray=function(e,r){return t.FromArray(e,r)},t.FromArrayToRef=function(t,e,r){r.x=t[e],r.y=t[e+1],r.z=t[e+2]},t.FromFloatArrayToRef=function(e,r,n){return t.FromArrayToRef(e,r,n)},t.FromFloatsToRef=function(t,e,r,n){n.copyFromFloats(t,e,r)},t.Zero=function(){return new t(0,0,0)},t.One=function(){return new t(1,1,1)},t.Up=function(){return new t(0,1,0)},Object.defineProperty(t,"UpReadOnly",{get:function(){return t._UpReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"RightReadOnly",{get:function(){return t._RightReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LeftReadOnly",{get:function(){return t._LeftReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"LeftHandedForwardReadOnly",{get:function(){return t._LeftHandedForwardReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"RightHandedForwardReadOnly",{get:function(){return t._RightHandedForwardReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t,"ZeroReadOnly",{get:function(){return t._ZeroReadOnly},enumerable:!1,configurable:!0}),t.Down=function(){return new t(0,-1,0)},t.Forward=function(e){return void 0===e&&(e=!1),new t(0,0,e?-1:1)},t.Backward=function(e){return void 0===e&&(e=!1),new t(0,0,e?1:-1)},t.Right=function(){return new t(1,0,0)},t.Left=function(){return new t(-1,0,0)},t.TransformCoordinates=function(e,r){var n=t.Zero();return t.TransformCoordinatesToRef(e,r,n),n},t.TransformCoordinatesToRef=function(e,r,n){t.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,r,n)},t.TransformCoordinatesFromFloatsToRef=function(t,e,r,n,i){var o=n.m,a=t*o[0]+e*o[4]+r*o[8]+o[12],s=t*o[1]+e*o[5]+r*o[9]+o[13],u=t*o[2]+e*o[6]+r*o[10]+o[14],h=1/(t*o[3]+e*o[7]+r*o[11]+o[15]);i.x=a*h,i.y=s*h,i.z=u*h},t.TransformNormal=function(e,r){var n=t.Zero();return t.TransformNormalToRef(e,r,n),n},t.TransformNormalToRef=function(t,e,r){this.TransformNormalFromFloatsToRef(t._x,t._y,t._z,e,r)},t.TransformNormalFromFloatsToRef=function(t,e,r,n,i){var o=n.m;i.x=t*o[0]+e*o[4]+r*o[8],i.y=t*o[1]+e*o[5]+r*o[9],i.z=t*o[2]+e*o[6]+r*o[10]},t.CatmullRom=function(e,r,n,i,o){var a=o*o,s=o*a;return new t(.5*(2*r._x+(-e._x+n._x)*o+(2*e._x-5*r._x+4*n._x-i._x)*a+(-e._x+3*r._x-3*n._x+i._x)*s),.5*(2*r._y+(-e._y+n._y)*o+(2*e._y-5*r._y+4*n._y-i._y)*a+(-e._y+3*r._y-3*n._y+i._y)*s),.5*(2*r._z+(-e._z+n._z)*o+(2*e._z-5*r._z+4*n._z-i._z)*a+(-e._z+3*r._z-3*n._z+i._z)*s))},t.Clamp=function(e,r,n){var i=new t;return t.ClampToRef(e,r,n,i),i},t.ClampToRef=function(t,e,r,n){var i=t._x;i=(i=i>r._x?r._x:i)<e._x?e._x:i;var o=t._y;o=(o=o>r._y?r._y:o)<e._y?e._y:o;var a=t._z;a=(a=a>r._z?r._z:a)<e._z?e._z:a,n.copyFromFloats(i,o,a)},t.CheckExtends=function(t,e,r){e.minimizeInPlace(t),r.maximizeInPlace(t)},t.Hermite=function(e,r,n,i,o){var a=o*o,s=o*a,u=2*s-3*a+1,h=-2*s+3*a,c=s-2*a+o,l=s-a;return new t(e._x*u+n._x*h+r._x*c+i._x*l,e._y*u+n._y*h+r._y*c+i._y*l,e._z*u+n._z*h+r._z*c+i._z*l)},t.Hermite1stDerivative=function(e,r,n,i,o){var a=t.Zero();return this.Hermite1stDerivativeToRef(e,r,n,i,o,a),a},t.Hermite1stDerivativeToRef=function(t,e,r,n,i,o){var a=i*i;o.x=6*(a-i)*t.x+(3*a-4*i+1)*e.x+6*(-a+i)*r.x+(3*a-2*i)*n.x,o.y=6*(a-i)*t.y+(3*a-4*i+1)*e.y+6*(-a+i)*r.y+(3*a-2*i)*n.y,o.z=6*(a-i)*t.z+(3*a-4*i+1)*e.z+6*(-a+i)*r.z+(3*a-2*i)*n.z},t.Lerp=function(e,r,n){var i=new t(0,0,0);return t.LerpToRef(e,r,n,i),i},t.LerpToRef=function(t,e,r,n){n.x=t._x+(e._x-t._x)*r,n.y=t._y+(e._y-t._y)*r,n.z=t._z+(e._z-t._z)*r},t.Dot=function(t,e){return t._x*e._x+t._y*e._y+t._z*e._z},t.Cross=function(e,r){var n=t.Zero();return t.CrossToRef(e,r,n),n},t.CrossToRef=function(t,e,r){var n=t._y*e._z-t._z*e._y,i=t._z*e._x-t._x*e._z,o=t._x*e._y-t._y*e._x;r.copyFromFloats(n,i,o)},t.Normalize=function(e){var r=t.Zero();return t.NormalizeToRef(e,r),r},t.NormalizeToRef=function(t,e){t.normalizeToRef(e)},t.Project=function(e,r,n,i){var o=new t;return t.ProjectToRef(e,r,n,i,o),o},t.ProjectToRef=function(e,r,n,i,o){var a=i.width,s=i.height,u=i.x,h=i.y,c=y.Matrix[1];d.FromValuesToRef(a/2,0,0,0,0,-s/2,0,0,0,0,.5,0,u+a/2,s/2+h,.5,1,c);var l=y.Matrix[0];return r.multiplyToRef(n,l),l.multiplyToRef(c,l),t.TransformCoordinatesToRef(e,l,o),o},t._UnprojectFromInvertedMatrixToRef=function(e,r,i){t.TransformCoordinatesToRef(e,r,i);var o=r.m,a=e._x*o[3]+e._y*o[7]+e._z*o[11]+o[15];n.R.WithinEpsilon(a,1)&&i.scaleInPlace(1/a)},t.UnprojectFromTransform=function(t,e,r,n,i){return this.Unproject(t,e,r,n,i,d.IdentityReadOnly)},t.Unproject=function(e,r,n,i,o,a){var s=t.Zero();return t.UnprojectToRef(e,r,n,i,o,a,s),s},t.UnprojectToRef=function(e,r,n,i,o,a,s){t.UnprojectFloatsToRef(e._x,e._y,e._z,r,n,i,o,a,s)},t.UnprojectFloatsToRef=function(e,r,n,i,o,a,s,h,c){var l,f=y.Matrix[0];a.multiplyToRef(s,f),f.multiplyToRef(h,f),f.invert();var p=y.Vector3[0];p.x=e/i*2-1,p.y=-(r/o*2-1),(null===(l=u.l.LastCreatedEngine)||void 0===l?void 0:l.isNDCHalfZRange)?p.z=n:p.z=2*n-1,t._UnprojectFromInvertedMatrixToRef(p,f,c)},t.Minimize=function(t,e){var r=t.clone();return r.minimizeInPlace(e),r},t.Maximize=function(t,e){var r=t.clone();return r.maximizeInPlace(e),r},t.Distance=function(e,r){return Math.sqrt(t.DistanceSquared(e,r))},t.DistanceSquared=function(t,e){var r=t._x-e._x,n=t._y-e._y,i=t._z-e._z;return r*r+n*n+i*i},t.ProjectOnTriangleToRef=function(e,r,o,a,s){var u=y.Vector3[0],h=y.Vector3[1],c=y.Vector3[2],l=y.Vector3[3],f=y.Vector3[4];o.subtractToRef(r,u),a.subtractToRef(r,h),a.subtractToRef(o,c);var p=u.length(),d=h.length(),_=c.length();if(p<i.kn||d<i.kn||_<i.kn)return s.copyFrom(r),t.Distance(e,r);e.subtractToRef(r,f),t.CrossToRef(u,h,l);var m=l.length();if(m<i.kn)return s.copyFrom(r),t.Distance(e,r);l.normalizeFromLength(m);var v=f.length();if(v<i.kn)return s.copyFrom(r),0;f.normalizeFromLength(v);var g=t.Dot(l,f),x=y.Vector3[5],b=y.Vector3[6];x.copyFrom(l).scaleInPlace(-v*g),b.copyFrom(e).addInPlace(x);var P=y.Vector3[4],T=y.Vector3[5],R=y.Vector3[7],M=y.Vector3[8];P.copyFrom(u).scaleInPlace(1/p),M.copyFrom(h).scaleInPlace(1/d),P.addInPlace(M).scaleInPlace(-1),T.copyFrom(u).scaleInPlace(-1/p),M.copyFrom(c).scaleInPlace(1/_),T.addInPlace(M).scaleInPlace(-1),R.copyFrom(c).scaleInPlace(-1/_),M.copyFrom(h).scaleInPlace(-1/d),R.addInPlace(M).scaleInPlace(-1);var w=y.Vector3[9];w.copyFrom(b).subtractInPlace(r),t.CrossToRef(P,w,M);var A=t.Dot(M,l);w.copyFrom(b).subtractInPlace(o),t.CrossToRef(T,w,M);var I=t.Dot(M,l);w.copyFrom(b).subtractInPlace(a),t.CrossToRef(R,w,M);var z,F,D=t.Dot(M,l),O=y.Vector3[10];A>0&&I<0?(O.copyFrom(u),z=r,F=o):I>0&&D<0?(O.copyFrom(c),z=o,F=a):(O.copyFrom(h).scaleInPlace(-1),z=a,F=r);var C=y.Vector3[9],S=y.Vector3[4];if(z.subtractToRef(b,M),F.subtractToRef(b,C),t.CrossToRef(M,C,S),!(t.Dot(S,l)<0))return s.copyFrom(b),Math.abs(v*g);var L=y.Vector3[5];t.CrossToRef(O,S,L),L.normalize();var V=y.Vector3[9];V.copyFrom(z).subtractInPlace(b);var j=V.length();if(j<i.kn)return s.copyFrom(z),t.Distance(e,z);V.normalizeFromLength(j);var E=t.Dot(L,V),U=y.Vector3[7];U.copyFrom(b).addInPlace(L.scaleInPlace(j*E)),M.copyFrom(U).subtractInPlace(z),v=O.length(),O.normalizeFromLength(v);var N=t.Dot(M,O)/Math.max(v,i.kn);return N=n.R.Clamp(N,0,1),U.copyFrom(z).addInPlace(O.scaleInPlace(N*v)),s.copyFrom(U),t.Distance(e,U)},t.Center=function(e,r){return t.CenterToRef(e,r,t.Zero())},t.CenterToRef=function(t,e,r){return r.copyFromFloats((t._x+e._x)/2,(t._y+e._y)/2,(t._z+e._z)/2)},t.RotationFromAxis=function(e,r,n){var i=t.Zero();return t.RotationFromAxisToRef(e,r,n,i),i},t.RotationFromAxisToRef=function(t,e,r,n){var i=y.Quaternion[0];p.RotationQuaternionFromAxisToRef(t,e,r,i),i.toEulerAnglesToRef(n)},t._UpReadOnly=t.Up(),t._LeftHandedForwardReadOnly=t.Forward(!1),t._RightHandedForwardReadOnly=t.Forward(!0),t._RightReadOnly=t.Right(),t._LeftReadOnly=t.Left(),t._ZeroReadOnly=t.Zero(),t}(),f=function(){function t(t,e,r,n){this.x=t,this.y=e,this.z=r,this.w=n}return t.prototype.toString=function(){return"{X: ".concat(this.x," Y: ").concat(this.y," Z: ").concat(this.z," W: ").concat(this.w,"}")},t.prototype.getClassName=function(){return"Vector4"},t.prototype.getHashCode=function(){var t=h(this.x);return t=397*(t=397*(t=397*t^h(this.y))^h(this.z))^h(this.w)},t.prototype.asArray=function(){var t=new Array;return this.toArray(t,0),t},t.prototype.toArray=function(t,e){return void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,this},t.prototype.fromArray=function(e,r){return void 0===r&&(r=0),t.FromArrayToRef(e,r,this),this},t.prototype.addInPlace=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)},t.prototype.addToRef=function(t,e){return e.x=this.x+t.x,e.y=this.y+t.y,e.z=this.z+t.z,e.w=this.w+t.w,this},t.prototype.subtractInPlace=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},t.prototype.subtract=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)},t.prototype.subtractToRef=function(t,e){return e.x=this.x-t.x,e.y=this.y-t.y,e.z=this.z-t.z,e.w=this.w-t.w,this},t.prototype.subtractFromFloats=function(e,r,n,i){return new t(this.x-e,this.y-r,this.z-n,this.w-i)},t.prototype.subtractFromFloatsToRef=function(t,e,r,n,i){return i.x=this.x-t,i.y=this.y-e,i.z=this.z-r,i.w=this.w-n,this},t.prototype.negate=function(){return new t(-this.x,-this.y,-this.z,-this.w)},t.prototype.negateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.w*=-1,this},t.prototype.negateToRef=function(t){return t.copyFromFloats(-1*this.x,-1*this.y,-1*this.z,-1*this.w)},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.scale=function(e){return new t(this.x*e,this.y*e,this.z*e,this.w*e)},t.prototype.scaleToRef=function(t,e){return e.x=this.x*t,e.y=this.y*t,e.z=this.z*t,e.w=this.w*t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.x+=this.x*t,e.y+=this.y*t,e.z+=this.z*t,e.w+=this.w*t,this},t.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},t.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=i.kn),t&&n.R.WithinEpsilon(this.x,t.x,e)&&n.R.WithinEpsilon(this.y,t.y,e)&&n.R.WithinEpsilon(this.z,t.z,e)&&n.R.WithinEpsilon(this.w,t.w,e)},t.prototype.equalsToFloats=function(t,e,r,n){return this.x===t&&this.y===e&&this.z===r&&this.w===n},t.prototype.multiplyInPlace=function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this},t.prototype.multiply=function(e){return new t(this.x*e.x,this.y*e.y,this.z*e.z,this.w*e.w)},t.prototype.multiplyToRef=function(t,e){return e.x=this.x*t.x,e.y=this.y*t.y,e.z=this.z*t.z,e.w=this.w*t.w,this},t.prototype.multiplyByFloats=function(e,r,n,i){return new t(this.x*e,this.y*r,this.z*n,this.w*i)},t.prototype.divide=function(e){return new t(this.x/e.x,this.y/e.y,this.z/e.z,this.w/e.w)},t.prototype.divideToRef=function(t,e){return e.x=this.x/t.x,e.y=this.y/t.y,e.z=this.z/t.z,e.w=this.w/t.w,this},t.prototype.divideInPlace=function(t){return this.divideToRef(t,this)},t.prototype.minimizeInPlace=function(t){return t.x<this.x&&(this.x=t.x),t.y<this.y&&(this.y=t.y),t.z<this.z&&(this.z=t.z),t.w<this.w&&(this.w=t.w),this},t.prototype.maximizeInPlace=function(t){return t.x>this.x&&(this.x=t.x),t.y>this.y&&(this.y=t.y),t.z>this.z&&(this.z=t.z),t.w>this.w&&(this.w=t.w),this},t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},t.prototype.fract=function(){return new t(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},t.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},t.prototype.normalize=function(){var t=this.length();return 0===t?this:this.scaleInPlace(1/t)},t.prototype.toVector3=function(){return new l(this.x,this.y,this.z)},t.prototype.clone=function(){return new t(this.x,this.y,this.z,this.w)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},t.prototype.copyFromFloats=function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},t.prototype.set=function(t,e,r,n){return this.copyFromFloats(t,e,r,n)},t.prototype.setAll=function(t){return this.x=this.y=this.z=this.w=t,this},t.FromArray=function(e,r){return r||(r=0),new t(e[r],e[r+1],e[r+2],e[r+3])},t.FromArrayToRef=function(t,e,r){r.x=t[e],r.y=t[e+1],r.z=t[e+2],r.w=t[e+3]},t.FromFloatArrayToRef=function(e,r,n){t.FromArrayToRef(e,r,n)},t.FromFloatsToRef=function(t,e,r,n,i){i.x=t,i.y=e,i.z=r,i.w=n},t.Zero=function(){return new t(0,0,0,0)},t.One=function(){return new t(1,1,1,1)},t.Normalize=function(e){var r=t.Zero();return t.NormalizeToRef(e,r),r},t.NormalizeToRef=function(t,e){e.copyFrom(t),e.normalize()},t.Minimize=function(t,e){var r=t.clone();return r.minimizeInPlace(e),r},t.Maximize=function(t,e){var r=t.clone();return r.maximizeInPlace(e),r},t.Distance=function(e,r){return Math.sqrt(t.DistanceSquared(e,r))},t.DistanceSquared=function(t,e){var r=t.x-e.x,n=t.y-e.y,i=t.z-e.z,o=t.w-e.w;return r*r+n*n+i*i+o*o},t.Center=function(e,r){return t.CenterToRef(e,r,t.Zero())},t.CenterToRef=function(t,e,r){return r.copyFromFloats((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2,(t.w+e.w)/2)},t.TransformCoordinates=function(e,r){var n=t.Zero();return t.TransformCoordinatesToRef(e,r,n),n},t.TransformCoordinatesToRef=function(e,r,n){t.TransformCoordinatesFromFloatsToRef(e._x,e._y,e._z,r,n)},t.TransformCoordinatesFromFloatsToRef=function(t,e,r,n,i){var o=n.m,a=t*o[0]+e*o[4]+r*o[8]+o[12],s=t*o[1]+e*o[5]+r*o[9]+o[13],u=t*o[2]+e*o[6]+r*o[10]+o[14],h=t*o[3]+e*o[7]+r*o[11]+o[15];i.x=a,i.y=s,i.z=u,i.w=h},t.TransformNormal=function(e,r){var n=t.Zero();return t.TransformNormalToRef(e,r,n),n},t.TransformNormalToRef=function(t,e,r){var n=e.m,i=t.x*n[0]+t.y*n[4]+t.z*n[8],o=t.x*n[1]+t.y*n[5]+t.z*n[9],a=t.x*n[2]+t.y*n[6]+t.z*n[10];r.x=i,r.y=o,r.z=a,r.w=t.w},t.TransformNormalFromFloatsToRef=function(t,e,r,n,i,o){var a=i.m;o.x=t*a[0]+e*a[4]+r*a[8],o.y=t*a[1]+e*a[5]+r*a[9],o.z=t*a[2]+e*a[6]+r*a[10],o.w=n},t.FromVector3=function(e,r){return void 0===r&&(r=0),new t(e._x,e._y,e._z,r)},t}(),p=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=1),this._isDirty=!0,this._x=t,this._y=e,this._z=r,this._w=n}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z=t,this._isDirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"w",{get:function(){return this._w},set:function(t){this._w=t,this._isDirty=!0},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"{X: ".concat(this._x," Y: ").concat(this._y," Z: ").concat(this._z," W: ").concat(this._w,"}")},t.prototype.getClassName=function(){return"Quaternion"},t.prototype.getHashCode=function(){var t=h(this._x);return t=397*(t=397*(t=397*t^h(this._y))^h(this._z))^h(this._w)},t.prototype.asArray=function(){return[this._x,this._y,this._z,this._w]},t.prototype.equals=function(t){return t&&this._x===t._x&&this._y===t._y&&this._z===t._z&&this._w===t._w},t.prototype.equalsWithEpsilon=function(t,e){return void 0===e&&(e=i.kn),t&&n.R.WithinEpsilon(this._x,t._x,e)&&n.R.WithinEpsilon(this._y,t._y,e)&&n.R.WithinEpsilon(this._z,t._z,e)&&n.R.WithinEpsilon(this._w,t._w,e)},t.prototype.clone=function(){return new t(this._x,this._y,this._z,this._w)},t.prototype.copyFrom=function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this.w=t._w,this},t.prototype.copyFromFloats=function(t,e,r,n){return this.x=t,this.y=e,this.z=r,this.w=n,this},t.prototype.set=function(t,e,r,n){return this.copyFromFloats(t,e,r,n)},t.prototype.add=function(e){return new t(this._x+e._x,this._y+e._y,this._z+e._z,this._w+e._w)},t.prototype.addInPlace=function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this._w+=t._w,this},t.prototype.subtract=function(e){return new t(this._x-e._x,this._y-e._y,this._z-e._z,this._w-e._w)},t.prototype.subtractInPlace=function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this._w-=t._w,this},t.prototype.scale=function(e){return new t(this._x*e,this._y*e,this._z*e,this._w*e)},t.prototype.scaleToRef=function(t,e){return e.x=this._x*t,e.y=this._y*t,e.z=this._z*t,e.w=this._w*t,this},t.prototype.scaleInPlace=function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},t.prototype.scaleAndAddToRef=function(t,e){return e.x+=this._x*t,e.y+=this._y*t,e.z+=this._z*t,e.w+=this._w*t,this},t.prototype.multiply=function(e){var r=new t(0,0,0,1);return this.multiplyToRef(e,r),r},t.prototype.multiplyToRef=function(t,e){var r=this._x*t._w+this._y*t._z-this._z*t._y+this._w*t._x,n=-this._x*t._z+this._y*t._w+this._z*t._x+this._w*t._y,i=this._x*t._y-this._y*t._x+this._z*t._w+this._w*t._z,o=-this._x*t._x-this._y*t._y-this._z*t._z+this._w*t._w;return e.copyFromFloats(r,n,i,o),this},t.prototype.multiplyInPlace=function(t){return this.multiplyToRef(t,this),this},t.prototype.conjugateToRef=function(t){return t.copyFromFloats(-this._x,-this._y,-this._z,this._w),this},t.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},t.prototype.conjugate=function(){return new t(-this._x,-this._y,-this._z,this._w)},t.prototype.invert=function(){var t=this.conjugate(),e=this.lengthSquared();return 0==e||1==e||t.scaleInPlace(1/e),t},t.prototype.invertInPlace=function(){this.conjugateInPlace();var t=this.lengthSquared();return 0==t||1==t||this.scaleInPlace(1/t),this},t.prototype.lengthSquared=function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},t.prototype.length=function(){return Math.sqrt(this.lengthSquared())},t.prototype.normalize=function(){var t=this.length();if(0===t)return this;var e=1/t;return this.scaleInPlace(e),this},t.prototype.normalizeToNew=function(){var t=this.length();if(0===t)return this.clone();var e=1/t;return this.scale(e)},t.prototype.toEulerAngles=function(){var t=l.Zero();return this.toEulerAnglesToRef(t),t},t.prototype.toEulerAnglesToRef=function(t){var e=this._z,r=this._x,n=this._y,i=this._w,o=n*e-r*i,a=.4999999;if(o<-a)t.y=2*Math.atan2(n,i),t.x=Math.PI/2,t.z=0;else if(o>a)t.y=2*Math.atan2(n,i),t.x=-Math.PI/2,t.z=0;else{var s=i*i,u=e*e,h=r*r,c=n*n;t.z=Math.atan2(2*(r*n+e*i),-u-h+c+s),t.x=Math.asin(-2*o),t.y=Math.atan2(2*(e*r+n*i),u-h-c+s)}return this},t.prototype.toRotationMatrix=function(t){return d.FromQuaternionToRef(this,t),this},t.prototype.fromRotationMatrix=function(e){return t.FromRotationMatrixToRef(e,this),this},t.FromRotationMatrix=function(e){var r=new t;return t.FromRotationMatrixToRef(e,r),r},t.FromRotationMatrixToRef=function(t,e){var r,n=t.m,i=n[0],o=n[4],a=n[8],s=n[1],u=n[5],h=n[9],c=n[2],l=n[6],f=n[10],p=i+u+f;p>0?(r=.5/Math.sqrt(p+1),e.w=.25/r,e.x=(l-h)*r,e.y=(a-c)*r,e.z=(s-o)*r):i>u&&i>f?(r=2*Math.sqrt(1+i-u-f),e.w=(l-h)/r,e.x=.25*r,e.y=(o+s)/r,e.z=(a+c)/r):u>f?(r=2*Math.sqrt(1+u-i-f),e.w=(a-c)/r,e.x=(o+s)/r,e.y=.25*r,e.z=(h+l)/r):(r=2*Math.sqrt(1+f-i-u),e.w=(s-o)/r,e.x=(a+c)/r,e.y=(h+l)/r,e.z=.25*r)},t.Dot=function(t,e){return t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w},t.AreClose=function(e,r){return t.Dot(e,r)>=0},t.SmoothToRef=function(e,r,i,o,a){var s=0===o?1:i/o;s=n.R.Clamp(s,0,1),t.SlerpToRef(e,r,s,a)},t.Zero=function(){return new t(0,0,0,0)},t.Inverse=function(e){return new t(-e._x,-e._y,-e._z,e._w)},t.InverseToRef=function(t,e){return e.set(-t._x,-t._y,-t._z,t._w),e},t.Identity=function(){return new t(0,0,0,1)},t.IsIdentity=function(t){return t&&0===t._x&&0===t._y&&0===t._z&&1===t._w},t.RotationAxis=function(e,r){return t.RotationAxisToRef(e,r,new t)},t.RotationAxisToRef=function(t,e,r){var n=Math.sin(e/2);return t.normalize(),r.w=Math.cos(e/2),r.x=t._x*n,r.y=t._y*n,r.z=t._z*n,r},t.FromArray=function(e,r){return r||(r=0),new t(e[r],e[r+1],e[r+2],e[r+3])},t.FromArrayToRef=function(t,e,r){r.x=t[e],r.y=t[e+1],r.z=t[e+2],r.w=t[e+3]},t.FromEulerAngles=function(e,r,n){var i=new t;return t.RotationYawPitchRollToRef(r,e,n,i),i},t.FromEulerAnglesToRef=function(e,r,n,i){return t.RotationYawPitchRollToRef(r,e,n,i),i},t.FromEulerVector=function(e){var r=new t;return t.RotationYawPitchRollToRef(e._y,e._x,e._z,r),r},t.FromEulerVectorToRef=function(e,r){return t.RotationYawPitchRollToRef(e._y,e._x,e._z,r),r},t.FromUnitVectorsToRef=function(t,e,r){var n=l.Dot(t,e)+1;return n<i.kn?Math.abs(t.x)>Math.abs(t.z)?r.set(-t.y,t.x,0,0):r.set(0,-t.z,t.y,0):(l.CrossToRef(t,e,_.Vector3[0]),r.set(_.Vector3[0].x,_.Vector3[0].y,_.Vector3[0].z,n)),r.normalize()},t.RotationYawPitchRoll=function(e,r,n){var i=new t;return t.RotationYawPitchRollToRef(e,r,n,i),i},t.RotationYawPitchRollToRef=function(t,e,r,n){var i=.5*r,o=.5*e,a=.5*t,s=Math.sin(i),u=Math.cos(i),h=Math.sin(o),c=Math.cos(o),l=Math.sin(a),f=Math.cos(a);n.x=f*h*u+l*c*s,n.y=l*c*u-f*h*s,n.z=f*c*s-l*h*u,n.w=f*c*u+l*h*s},t.RotationAlphaBetaGamma=function(e,r,n){var i=new t;return t.RotationAlphaBetaGammaToRef(e,r,n,i),i},t.RotationAlphaBetaGammaToRef=function(t,e,r,n){var i=.5*(r+t),o=.5*(r-t),a=.5*e;n.x=Math.cos(o)*Math.sin(a),n.y=Math.sin(o)*Math.sin(a),n.z=Math.sin(i)*Math.cos(a),n.w=Math.cos(i)*Math.cos(a)},t.RotationQuaternionFromAxis=function(e,r,n){var i=new t(0,0,0,0);return t.RotationQuaternionFromAxisToRef(e,r,n,i),i},t.RotationQuaternionFromAxisToRef=function(e,r,n,i){var o=y.Matrix[0];d.FromXYZAxesToRef(e.normalize(),r.normalize(),n.normalize(),o),t.FromRotationMatrixToRef(o,i)},t.FromLookDirectionLH=function(e,r){var n=new t;return t.FromLookDirectionLHToRef(e,r,n),n},t.FromLookDirectionLHToRef=function(e,r,n){var i=y.Matrix[0];d.LookDirectionLHToRef(e,r,i),t.FromRotationMatrixToRef(i,n)},t.FromLookDirectionRH=function(e,r){var n=new t;return t.FromLookDirectionRHToRef(e,r,n),n},t.FromLookDirectionRHToRef=function(e,r,n){var i=y.Matrix[0];return d.LookDirectionRHToRef(e,r,i),t.FromRotationMatrixToRef(i,n)},t.Slerp=function(e,r,n){var i=t.Identity();return t.SlerpToRef(e,r,n,i),i},t.SlerpToRef=function(t,e,r,n){var i,o,a=t._x*e._x+t._y*e._y+t._z*e._z+t._w*e._w,s=!1;if(a<0&&(s=!0,a=-a),a>.999999)o=1-r,i=s?-r:r;else{var u=Math.acos(a),h=1/Math.sin(u);o=Math.sin((1-r)*u)*h,i=s?-Math.sin(r*u)*h:Math.sin(r*u)*h}n.x=o*t._x+i*e._x,n.y=o*t._y+i*e._y,n.z=o*t._z+i*e._z,n.w=o*t._w+i*e._w},t.Hermite=function(e,r,n,i,o){var a=o*o,s=o*a,u=2*s-3*a+1,h=-2*s+3*a,c=s-2*a+o,l=s-a;return new t(e._x*u+n._x*h+r._x*c+i._x*l,e._y*u+n._y*h+r._y*c+i._y*l,e._z*u+n._z*h+r._z*c+i._z*l,e._w*u+n._w*h+r._w*c+i._w*l)},t.Hermite1stDerivative=function(e,r,n,i,o){var a=t.Zero();return this.Hermite1stDerivativeToRef(e,r,n,i,o,a),a},t.Hermite1stDerivativeToRef=function(t,e,r,n,i,o){var a=i*i;o.x=6*(a-i)*t.x+(3*a-4*i+1)*e.x+6*(-a+i)*r.x+(3*a-2*i)*n.x,o.y=6*(a-i)*t.y+(3*a-4*i+1)*e.y+6*(-a+i)*r.y+(3*a-2*i)*n.y,o.z=6*(a-i)*t.z+(3*a-4*i+1)*e.z+6*(-a+i)*r.z+(3*a-2*i)*n.z,o.w=6*(a-i)*t.w+(3*a-4*i+1)*e.w+6*(-a+i)*r.w+(3*a-2*i)*n.w},t}(),d=function(){function t(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,s.Z.MatrixTrackPrecisionChange&&s.Z.MatrixTrackedMatrices.push(this),this._m=new s.Z.MatrixCurrentType(16),this.markAsUpdated()}return Object.defineProperty(t,"Use64Bits",{get:function(){return s.Z.MatrixUse64Bits},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"m",{get:function(){return this._m},enumerable:!1,configurable:!0}),t.prototype.markAsUpdated=function(){this.updateFlag=t._UpdateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},t.prototype._updateIdentityStatus=function(t,e,r,n){void 0===e&&(e=!1),void 0===r&&(r=!1),void 0===n&&(n=!0),this._isIdentity=t,this._isIdentity3x2=t||r,this._isIdentityDirty=!this._isIdentity&&e,this._isIdentity3x2Dirty=!this._isIdentity3x2&&n},t.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var t=this._m;this._isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return this._isIdentity},t.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,1!==this._m[0]||1!==this._m[5]||1!==this._m[15]||0!==this._m[1]||0!==this._m[2]||0!==this._m[3]||0!==this._m[4]||0!==this._m[6]||0!==this._m[7]||0!==this._m[8]||0!==this._m[9]||0!==this._m[10]||0!==this._m[11]||0!==this._m[12]||0!==this._m[13]||0!==this._m[14]?this._isIdentity3x2=!1:this._isIdentity3x2=!0),this._isIdentity3x2},t.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var t=this._m,e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],h=t[8],c=t[9],l=t[10],f=t[11],p=t[12],d=t[13],y=t[14],_=t[15],m=l*_-y*f,v=c*_-d*f,g=c*y-d*l,x=h*_-p*f,b=h*y-l*p,P=h*d-p*c;return e*+(a*m-s*v+u*g)+r*-(o*m-s*x+u*b)+n*+(o*v-a*x+u*P)+i*-(o*g-a*b+s*P)},t.prototype.toArray=function(){return this._m},t.prototype.asArray=function(){return this._m},t.prototype.invert=function(){return this.invertToRef(this),this},t.prototype.reset=function(){return t.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},t.prototype.add=function(e){var r=new t;return this.addToRef(e,r),r},t.prototype.addToRef=function(t,e){for(var r=this._m,n=e._m,i=t.m,o=0;o<16;o++)n[o]=r[o]+i[o];return e.markAsUpdated(),this},t.prototype.addToSelf=function(t){for(var e=this._m,r=t.m,n=0;n<16;n++)e[n]+=r[n];return this.markAsUpdated(),this},t.prototype.invertToRef=function(e){if(!0===this._isIdentity)return t.IdentityToRef(e),this;var r=this._m,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],h=r[6],c=r[7],l=r[8],f=r[9],p=r[10],d=r[11],y=r[12],_=r[13],m=r[14],v=r[15],g=p*v-m*d,x=f*v-_*d,b=f*m-_*p,P=l*v-y*d,T=l*m-p*y,R=l*_-y*f,M=+(u*g-h*x+c*b),w=-(s*g-h*P+c*T),A=+(s*x-u*P+c*R),I=-(s*b-u*T+h*R),z=n*M+i*w+o*A+a*I;if(0===z)return e.copyFrom(this),this;var F=1/z,D=h*v-m*c,O=u*v-_*c,C=u*m-_*h,S=s*v-y*c,L=s*m-y*h,V=s*_-y*u,j=h*d-p*c,E=u*d-f*c,U=u*p-f*h,N=s*d-l*c,B=s*p-l*h,k=s*f-l*u,K=-(i*g-o*x+a*b),H=+(n*g-o*P+a*T),W=-(n*x-i*P+a*R),G=+(n*b-i*T+o*R),Z=+(i*D-o*O+a*C),Y=-(n*D-o*S+a*L),q=+(n*O-i*S+a*V),Q=-(n*C-i*L+o*V),X=-(i*j-o*E+a*U),$=+(n*j-o*N+a*B),J=-(n*E-i*N+a*k),tt=+(n*U-i*B+o*k);return t.FromValuesToRef(M*F,K*F,Z*F,X*F,w*F,H*F,Y*F,$*F,A*F,W*F,q*F,J*F,I*F,G*F,Q*F,tt*F,e),this},t.prototype.addAtIndex=function(t,e){return this._m[t]+=e,this.markAsUpdated(),this},t.prototype.multiplyAtIndex=function(t,e){return this._m[t]*=e,this.markAsUpdated(),this},t.prototype.setTranslationFromFloats=function(t,e,r){return this._m[12]=t,this._m[13]=e,this._m[14]=r,this.markAsUpdated(),this},t.prototype.addTranslationFromFloats=function(t,e,r){return this._m[12]+=t,this._m[13]+=e,this._m[14]+=r,this.markAsUpdated(),this},t.prototype.setTranslation=function(t){return this.setTranslationFromFloats(t._x,t._y,t._z)},t.prototype.getTranslation=function(){return new l(this._m[12],this._m[13],this._m[14])},t.prototype.getTranslationToRef=function(t){return t.x=this._m[12],t.y=this._m[13],t.z=this._m[14],this},t.prototype.removeRotationAndScaling=function(){var e=this.m;return t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],e[15],this),this._updateIdentityStatus(0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]),this},t.prototype.multiply=function(e){var r=new t;return this.multiplyToRef(e,r),r},t.prototype.copyFrom=function(t){t.copyToArray(this._m);var e=t;return this.updateFlag=e.updateFlag,this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this},t.prototype.copyToArray=function(t,e){void 0===e&&(e=0);var r=this._m;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],this},t.prototype.multiplyToRef=function(t,e){return this._isIdentity?(e.copyFrom(t),this):t._isIdentity?(e.copyFrom(this),this):(this.multiplyToArray(t,e._m,0),e.markAsUpdated(),this)},t.prototype.multiplyToArray=function(t,e,r){var n=this._m,i=t.m,o=n[0],a=n[1],s=n[2],u=n[3],h=n[4],c=n[5],l=n[6],f=n[7],p=n[8],d=n[9],y=n[10],_=n[11],m=n[12],v=n[13],g=n[14],x=n[15],b=i[0],P=i[1],T=i[2],R=i[3],M=i[4],w=i[5],A=i[6],I=i[7],z=i[8],F=i[9],D=i[10],O=i[11],C=i[12],S=i[13],L=i[14],V=i[15];return e[r]=o*b+a*M+s*z+u*C,e[r+1]=o*P+a*w+s*F+u*S,e[r+2]=o*T+a*A+s*D+u*L,e[r+3]=o*R+a*I+s*O+u*V,e[r+4]=h*b+c*M+l*z+f*C,e[r+5]=h*P+c*w+l*F+f*S,e[r+6]=h*T+c*A+l*D+f*L,e[r+7]=h*R+c*I+l*O+f*V,e[r+8]=p*b+d*M+y*z+_*C,e[r+9]=p*P+d*w+y*F+_*S,e[r+10]=p*T+d*A+y*D+_*L,e[r+11]=p*R+d*I+y*O+_*V,e[r+12]=m*b+v*M+g*z+x*C,e[r+13]=m*P+v*w+g*F+x*S,e[r+14]=m*T+v*A+g*D+x*L,e[r+15]=m*R+v*I+g*O+x*V,this},t.prototype.equals=function(t){var e=t;if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;var r=this.m,n=e.m;return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]&&r[3]===n[3]&&r[4]===n[4]&&r[5]===n[5]&&r[6]===n[6]&&r[7]===n[7]&&r[8]===n[8]&&r[9]===n[9]&&r[10]===n[10]&&r[11]===n[11]&&r[12]===n[12]&&r[13]===n[13]&&r[14]===n[14]&&r[15]===n[15]},t.prototype.clone=function(){var e=new t;return e.copyFrom(this),e},t.prototype.getClassName=function(){return"Matrix"},t.prototype.getHashCode=function(){for(var t=h(this._m[0]),e=1;e<16;e++)t=397*t^h(this._m[e]);return t},t.prototype.decomposeToTransformNode=function(t){return t.rotationQuaternion=t.rotationQuaternion||new p,this.decompose(t.scaling,t.rotationQuaternion,t.position)},t.prototype.decompose=function(e,r,n,i){if(this._isIdentity)return n&&n.setAll(0),e&&e.setAll(1),r&&r.copyFromFloats(0,0,0,1),!0;var o=this._m;if(n&&n.copyFromFloats(o[12],o[13],o[14]),(e=e||y.Vector3[0]).x=Math.sqrt(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]),e.y=Math.sqrt(o[4]*o[4]+o[5]*o[5]+o[6]*o[6]),e.z=Math.sqrt(o[8]*o[8]+o[9]*o[9]+o[10]*o[10]),i){var a=i.scaling.x<0?-1:1,s=i.scaling.y<0?-1:1,u=i.scaling.z<0?-1:1;e.x*=a,e.y*=s,e.z*=u}else this.determinant()<=0&&(e.y*=-1);if(0===e._x||0===e._y||0===e._z)return r&&r.copyFromFloats(0,0,0,1),!1;if(r){var h=1/e._x,c=1/e._y,l=1/e._z;t.FromValuesToRef(o[0]*h,o[1]*h,o[2]*h,0,o[4]*c,o[5]*c,o[6]*c,0,o[8]*l,o[9]*l,o[10]*l,0,0,0,0,1,y.Matrix[0]),p.FromRotationMatrixToRef(y.Matrix[0],r)}return!0},t.prototype.getRow=function(t){if(t<0||t>3)return null;var e=4*t;return new f(this._m[e+0],this._m[e+1],this._m[e+2],this._m[e+3])},t.prototype.setRow=function(t,e){return this.setRowFromFloats(t,e.x,e.y,e.z,e.w)},t.prototype.transpose=function(){return t.Transpose(this)},t.prototype.transposeToRef=function(e){return t.TransposeToRef(this,e),this},t.prototype.setRowFromFloats=function(t,e,r,n,i){if(t<0||t>3)return this;var o=4*t;return this._m[o+0]=e,this._m[o+1]=r,this._m[o+2]=n,this._m[o+3]=i,this.markAsUpdated(),this},t.prototype.scale=function(e){var r=new t;return this.scaleToRef(e,r),r},t.prototype.scaleToRef=function(t,e){for(var r=0;r<16;r++)e._m[r]=this._m[r]*t;return e.markAsUpdated(),this},t.prototype.scaleAndAddToRef=function(t,e){for(var r=0;r<16;r++)e._m[r]+=this._m[r]*t;return e.markAsUpdated(),this},t.prototype.toNormalMatrix=function(e){var r=y.Matrix[0];this.invertToRef(r),r.transposeToRef(e);var n=e._m;t.FromValuesToRef(n[0],n[1],n[2],0,n[4],n[5],n[6],0,n[8],n[9],n[10],0,0,0,0,1,e)},t.prototype.getRotationMatrix=function(){var e=new t;return this.getRotationMatrixToRef(e),e},t.prototype.getRotationMatrixToRef=function(e){var r=y.Vector3[0];if(!this.decompose(r))return t.IdentityToRef(e),this;var n=this._m,i=1/r._x,o=1/r._y,a=1/r._z;return t.FromValuesToRef(n[0]*i,n[1]*i,n[2]*i,0,n[4]*o,n[5]*o,n[6]*o,0,n[8]*a,n[9]*a,n[10]*a,0,0,0,0,1,e),this},t.prototype.toggleModelMatrixHandInPlace=function(){var t=this._m;t[2]*=-1,t[6]*=-1,t[8]*=-1,t[9]*=-1,t[14]*=-1,this.markAsUpdated()},t.prototype.toggleProjectionMatrixHandInPlace=function(){var t=this._m;t[8]*=-1,t[9]*=-1,t[10]*=-1,t[11]*=-1,this.markAsUpdated()},t.FromArray=function(e,r){void 0===r&&(r=0);var n=new t;return t.FromArrayToRef(e,r,n),n},t.FromArrayToRef=function(t,e,r){for(var n=0;n<16;n++)r._m[n]=t[n+e];r.markAsUpdated()},t.FromFloat32ArrayToRefScaled=function(t,e,r,n){for(var i=0;i<16;i++)n._m[i]=t[i+e]*r;n.markAsUpdated()},Object.defineProperty(t,"IdentityReadOnly",{get:function(){return t._IdentityReadOnly},enumerable:!1,configurable:!0}),t.FromValuesToRef=function(t,e,r,n,i,o,a,s,u,h,c,l,f,p,d,y,_){var m=_._m;m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=i,m[5]=o,m[6]=a,m[7]=s,m[8]=u,m[9]=h,m[10]=c,m[11]=l,m[12]=f,m[13]=p,m[14]=d,m[15]=y,_.markAsUpdated()},t.FromValues=function(e,r,n,i,o,a,s,u,h,c,l,f,p,d,y,_){var m=new t,v=m._m;return v[0]=e,v[1]=r,v[2]=n,v[3]=i,v[4]=o,v[5]=a,v[6]=s,v[7]=u,v[8]=h,v[9]=c,v[10]=l,v[11]=f,v[12]=p,v[13]=d,v[14]=y,v[15]=_,m.markAsUpdated(),m},t.Compose=function(e,r,n){var i=new t;return t.ComposeToRef(e,r,n,i),i},t.ComposeToRef=function(t,e,r,n){var i=n._m,o=e._x,a=e._y,s=e._z,u=e._w,h=o+o,c=a+a,l=s+s,f=o*h,p=o*c,d=o*l,y=a*c,_=a*l,m=s*l,v=u*h,g=u*c,x=u*l,b=t._x,P=t._y,T=t._z;i[0]=(1-(y+m))*b,i[1]=(p+x)*b,i[2]=(d-g)*b,i[3]=0,i[4]=(p-x)*P,i[5]=(1-(f+m))*P,i[6]=(_+v)*P,i[7]=0,i[8]=(d+g)*T,i[9]=(_-v)*T,i[10]=(1-(f+y))*T,i[11]=0,i[12]=r._x,i[13]=r._y,i[14]=r._z,i[15]=1,n.markAsUpdated()},t.Identity=function(){var e=t.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return e._updateIdentityStatus(!0),e},t.IdentityToRef=function(e){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e),e._updateIdentityStatus(!0)},t.Zero=function(){var e=t.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return e._updateIdentityStatus(!1),e},t.RotationX=function(e){var r=new t;return t.RotationXToRef(e,r),r},t.Invert=function(e){var r=new t;return e.invertToRef(r),r},t.RotationXToRef=function(e,r){var n=Math.sin(e),i=Math.cos(e);t.FromValuesToRef(1,0,0,0,0,i,n,0,0,-n,i,0,0,0,0,1,r),r._updateIdentityStatus(1===i&&0===n)},t.RotationY=function(e){var r=new t;return t.RotationYToRef(e,r),r},t.RotationYToRef=function(e,r){var n=Math.sin(e),i=Math.cos(e);t.FromValuesToRef(i,0,-n,0,0,1,0,0,n,0,i,0,0,0,0,1,r),r._updateIdentityStatus(1===i&&0===n)},t.RotationZ=function(e){var r=new t;return t.RotationZToRef(e,r),r},t.RotationZToRef=function(e,r){var n=Math.sin(e),i=Math.cos(e);t.FromValuesToRef(i,n,0,0,-n,i,0,0,0,0,1,0,0,0,0,1,r),r._updateIdentityStatus(1===i&&0===n)},t.RotationAxis=function(e,r){var n=new t;return t.RotationAxisToRef(e,r,n),n},t.RotationAxisToRef=function(t,e,r){var n=Math.sin(-e),i=Math.cos(-e),o=1-i;t.normalize();var a=r._m;a[0]=t._x*t._x*o+i,a[1]=t._x*t._y*o-t._z*n,a[2]=t._x*t._z*o+t._y*n,a[3]=0,a[4]=t._y*t._x*o+t._z*n,a[5]=t._y*t._y*o+i,a[6]=t._y*t._z*o-t._x*n,a[7]=0,a[8]=t._z*t._x*o-t._y*n,a[9]=t._z*t._y*o+t._x*n,a[10]=t._z*t._z*o+i,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,r.markAsUpdated()},t.RotationAlignToRef=function(t,e,r){var n=l.Dot(e,t),o=r._m;if(n<-1+i.kn)o[0]=-1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0;else{var a=l.Cross(e,t),s=1/(1+n);o[0]=a._x*a._x*s+n,o[1]=a._y*a._x*s-a._z,o[2]=a._z*a._x*s+a._y,o[3]=0,o[4]=a._x*a._y*s+a._z,o[5]=a._y*a._y*s+n,o[6]=a._z*a._y*s-a._x,o[7]=0,o[8]=a._x*a._z*s-a._y,o[9]=a._y*a._z*s+a._x,o[10]=a._z*a._z*s+n,o[11]=0}o[12]=0,o[13]=0,o[14]=0,o[15]=1,r.markAsUpdated()},t.RotationYawPitchRoll=function(e,r,n){var i=new t;return t.RotationYawPitchRollToRef(e,r,n,i),i},t.RotationYawPitchRollToRef=function(t,e,r,n){p.RotationYawPitchRollToRef(t,e,r,y.Quaternion[0]),y.Quaternion[0].toRotationMatrix(n)},t.Scaling=function(e,r,n){var i=new t;return t.ScalingToRef(e,r,n,i),i},t.ScalingToRef=function(e,r,n,i){t.FromValuesToRef(e,0,0,0,0,r,0,0,0,0,n,0,0,0,0,1,i),i._updateIdentityStatus(1===e&&1===r&&1===n)},t.Translation=function(e,r,n){var i=new t;return t.TranslationToRef(e,r,n,i),i},t.TranslationToRef=function(e,r,n,i){t.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,e,r,n,1,i),i._updateIdentityStatus(0===e&&0===r&&0===n)},t.Lerp=function(e,r,n){var i=new t;return t.LerpToRef(e,r,n,i),i},t.LerpToRef=function(t,e,r,n){for(var i=n._m,o=t.m,a=e.m,s=0;s<16;s++)i[s]=o[s]*(1-r)+a[s]*r;n.markAsUpdated()},t.DecomposeLerp=function(e,r,n){var i=new t;return t.DecomposeLerpToRef(e,r,n,i),i},t.DecomposeLerpToRef=function(e,r,n,i){var o=y.Vector3[0],a=y.Quaternion[0],s=y.Vector3[1];e.decompose(o,a,s);var u=y.Vector3[2],h=y.Quaternion[1],c=y.Vector3[3];r.decompose(u,h,c);var f=y.Vector3[4];l.LerpToRef(o,u,n,f);var d=y.Quaternion[2];p.SlerpToRef(a,h,n,d);var _=y.Vector3[5];l.LerpToRef(s,c,n,_),t.ComposeToRef(f,d,_,i)},t.LookAtLH=function(e,r,n){var i=new t;return t.LookAtLHToRef(e,r,n,i),i},t.LookAtLHToRef=function(e,r,n,i){var o=y.Vector3[0],a=y.Vector3[1],s=y.Vector3[2];r.subtractToRef(e,s),s.normalize(),l.CrossToRef(n,s,o);var u=o.lengthSquared();0===u?o.x=1:o.normalizeFromLength(Math.sqrt(u)),l.CrossToRef(s,o,a),a.normalize();var h=-l.Dot(o,e),c=-l.Dot(a,e),f=-l.Dot(s,e);t.FromValuesToRef(o._x,a._x,s._x,0,o._y,a._y,s._y,0,o._z,a._z,s._z,0,h,c,f,1,i)},t.LookAtRH=function(e,r,n){var i=new t;return t.LookAtRHToRef(e,r,n,i),i},t.LookAtRHToRef=function(e,r,n,i){var o=y.Vector3[0],a=y.Vector3[1],s=y.Vector3[2];e.subtractToRef(r,s),s.normalize(),l.CrossToRef(n,s,o);var u=o.lengthSquared();0===u?o.x=1:o.normalizeFromLength(Math.sqrt(u)),l.CrossToRef(s,o,a),a.normalize();var h=-l.Dot(o,e),c=-l.Dot(a,e),f=-l.Dot(s,e);t.FromValuesToRef(o._x,a._x,s._x,0,o._y,a._y,s._y,0,o._z,a._z,s._z,0,h,c,f,1,i)},t.LookDirectionLH=function(e,r){var n=new t;return t.LookDirectionLHToRef(e,r,n),n},t.LookDirectionLHToRef=function(e,r,n){var i=y.Vector3[0];i.copyFrom(e),i.scaleInPlace(-1);var o=y.Vector3[1];l.CrossToRef(r,i,o),t.FromValuesToRef(o._x,o._y,o._z,0,r._x,r._y,r._z,0,i._x,i._y,i._z,0,0,0,0,1,n)},t.LookDirectionRH=function(e,r){var n=new t;return t.LookDirectionRHToRef(e,r,n),n},t.LookDirectionRHToRef=function(e,r,n){var i=y.Vector3[2];l.CrossToRef(r,e,i),t.FromValuesToRef(i._x,i._y,i._z,0,r._x,r._y,r._z,0,e._x,e._y,e._z,0,0,0,0,1,n)},t.OrthoLH=function(e,r,n,i,o){var a=new t;return t.OrthoLHToRef(e,r,n,i,a,o),a},t.OrthoLHToRef=function(e,r,n,i,o,a){var s=2/e,u=2/r,h=2/(i-n),c=-(i+n)/(i-n);t.FromValuesToRef(s,0,0,0,0,u,0,0,0,0,h,0,0,0,c,1,o),a&&o.multiplyToRef(m,o),o._updateIdentityStatus(1===s&&1===u&&1===h&&0===c)},t.OrthoOffCenterLH=function(e,r,n,i,o,a,s){var u=new t;return t.OrthoOffCenterLHToRef(e,r,n,i,o,a,u,s),u},t.OrthoOffCenterLHToRef=function(e,r,n,i,o,a,s,u){var h=2/(r-e),c=2/(i-n),l=2/(a-o),f=-(a+o)/(a-o),p=(e+r)/(e-r),d=(i+n)/(n-i);t.FromValuesToRef(h,0,0,0,0,c,0,0,0,0,l,0,p,d,f,1,s),u&&s.multiplyToRef(m,s),s.markAsUpdated()},t.OrthoOffCenterRH=function(e,r,n,i,o,a,s){var u=new t;return t.OrthoOffCenterRHToRef(e,r,n,i,o,a,u,s),u},t.OrthoOffCenterRHToRef=function(e,r,n,i,o,a,s,u){t.OrthoOffCenterLHToRef(e,r,n,i,o,a,s,u),s._m[10]*=-1},t.PerspectiveLH=function(e,r,n,i,o,a){void 0===a&&(a=0);var s=new t,u=2*n/e,h=2*n/r,c=(i+n)/(i-n),l=-2*i*n/(i-n),f=Math.tan(a);return t.FromValuesToRef(u,0,0,0,0,h,0,f,0,0,c,1,0,0,l,0,s),o&&s.multiplyToRef(m,s),s._updateIdentityStatus(!1),s},t.PerspectiveFovLH=function(e,r,n,i,o,a,s){void 0===a&&(a=0),void 0===s&&(s=!1);var u=new t;return t.PerspectiveFovLHToRef(e,r,n,i,u,!0,o,a,s),u},t.PerspectiveFovLHToRef=function(e,r,n,i,o,a,s,u,h){void 0===a&&(a=!0),void 0===u&&(u=0),void 0===h&&(h=!1);var c=n,l=i,f=1/Math.tan(.5*e),p=a?f/r:f,d=a?f:f*r,y=h&&0===c?-1:0!==l?(l+c)/(l-c):1,_=h&&0===c?2*l:0!==l?-2*l*c/(l-c):-2*c,v=Math.tan(u);t.FromValuesToRef(p,0,0,0,0,d,0,v,0,0,y,1,0,0,_,0,o),s&&o.multiplyToRef(m,o),o._updateIdentityStatus(!1)},t.PerspectiveFovReverseLHToRef=function(e,r,n,i,o,a,s,u){void 0===a&&(a=!0),void 0===u&&(u=0);var h=1/Math.tan(.5*e),c=a?h/r:h,l=a?h:h*r,f=Math.tan(u);t.FromValuesToRef(c,0,0,0,0,l,0,f,0,0,-n,1,0,0,1,0,o),s&&o.multiplyToRef(m,o),o._updateIdentityStatus(!1)},t.PerspectiveFovRH=function(e,r,n,i,o,a,s){void 0===a&&(a=0),void 0===s&&(s=!1);var u=new t;return t.PerspectiveFovRHToRef(e,r,n,i,u,!0,o,a,s),u},t.PerspectiveFovRHToRef=function(e,r,n,i,o,a,s,u,h){void 0===a&&(a=!0),void 0===u&&(u=0),void 0===h&&(h=!1);var c=n,l=i,f=1/Math.tan(.5*e),p=a?f/r:f,d=a?f:f*r,y=h&&0===c?1:0!==l?-(l+c)/(l-c):-1,_=h&&0===c?2*l:0!==l?-2*l*c/(l-c):-2*c,v=Math.tan(u);t.FromValuesToRef(p,0,0,0,0,d,0,v,0,0,y,-1,0,0,_,0,o),s&&o.multiplyToRef(m,o),o._updateIdentityStatus(!1)},t.PerspectiveFovReverseRHToRef=function(e,r,n,i,o,a,s,u){void 0===a&&(a=!0),void 0===u&&(u=0);var h=1/Math.tan(.5*e),c=a?h/r:h,l=a?h:h*r,f=Math.tan(u);t.FromValuesToRef(c,0,0,0,0,l,0,f,0,0,-n,-1,0,0,-1,0,o),s&&o.multiplyToRef(m,o),o._updateIdentityStatus(!1)},t.PerspectiveFovWebVRToRef=function(t,e,r,n,i,o,a){void 0===i&&(i=!1),void 0===a&&(a=0);var s=i?-1:1,u=Math.tan(t.upDegrees*Math.PI/180),h=Math.tan(t.downDegrees*Math.PI/180),c=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),f=2/(c+l),p=2/(u+h),d=Math.tan(a),y=n._m;y[0]=f,y[1]=y[2]=y[3]=y[4]=0,y[5]=p,y[6]=0,y[7]=d,y[8]=(c-l)*f*.5,y[9]=-(u-h)*p*.5,y[10]=-r/(e-r),y[11]=1*s,y[12]=y[13]=y[15]=0,y[14]=-2*r*e/(r-e),o&&n.multiplyToRef(m,n),n.markAsUpdated()},t.GetFinalMatrix=function(e,r,n,i,o,a){var s=e.width,u=e.height,h=e.x,c=e.y,l=t.FromValues(s/2,0,0,0,0,-u/2,0,0,0,0,a-o,0,h+s/2,u/2+c,o,1),f=y.Matrix[0];return r.multiplyToRef(n,f),f.multiplyToRef(i,f),f.multiply(l)},t.GetAsMatrix2x2=function(t){var e=t.m,r=[e[0],e[1],e[4],e[5]];return s.Z.MatrixUse64Bits?r:new Float32Array(r)},t.GetAsMatrix3x3=function(t){var e=t.m,r=[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];return s.Z.MatrixUse64Bits?r:new Float32Array(r)},t.Transpose=function(e){var r=new t;return t.TransposeToRef(e,r),r},t.TransposeToRef=function(t,e){var r=e._m,n=t.m;r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15],e.markAsUpdated(),e._updateIdentityStatus(t._isIdentity,t._isIdentityDirty)},t.Reflection=function(e){var r=new t;return t.ReflectionToRef(e,r),r},t.ReflectionToRef=function(e,r){e.normalize();var n=e.normal.x,i=e.normal.y,o=e.normal.z,a=-2*n,s=-2*i,u=-2*o;t.FromValuesToRef(a*n+1,s*n,u*n,0,a*i,s*i+1,u*i,0,a*o,s*o,u*o+1,0,a*e.d,s*e.d,u*e.d,1,r)},t.FromXYZAxesToRef=function(e,r,n,i){t.FromValuesToRef(e._x,e._y,e._z,0,r._x,r._y,r._z,0,n._x,n._y,n._z,0,0,0,0,1,i)},t.FromQuaternionToRef=function(t,e){var r=t._x*t._x,n=t._y*t._y,i=t._z*t._z,o=t._x*t._y,a=t._z*t._w,s=t._z*t._x,u=t._y*t._w,h=t._y*t._z,c=t._x*t._w;e._m[0]=1-2*(n+i),e._m[1]=2*(o+a),e._m[2]=2*(s-u),e._m[3]=0,e._m[4]=2*(o-a),e._m[5]=1-2*(i+r),e._m[6]=2*(h+c),e._m[7]=0,e._m[8]=2*(s+u),e._m[9]=2*(h-c),e._m[10]=1-2*(n+r),e._m[11]=0,e._m[12]=0,e._m[13]=0,e._m[14]=0,e._m[15]=1,e.markAsUpdated()},t._UpdateFlagSeed=0,t._IdentityReadOnly=t.Identity(),t}(),y=function(){function t(){}return t.Vector3=o.B.BuildTuple(11,l.Zero),t.Matrix=o.B.BuildTuple(2,d.Identity),t.Quaternion=o.B.BuildTuple(3,p.Zero),t}(),_=function(){function t(){}return t.Vector2=o.B.BuildTuple(3,c.Zero),t.Vector3=o.B.BuildTuple(13,l.Zero),t.Vector4=o.B.BuildTuple(3,f.Zero),t.Quaternion=o.B.BuildTuple(2,p.Zero),t.Matrix=o.B.BuildTuple(8,d.Identity),t}();(0,a.H)("BABYLON.Vector2",c),(0,a.H)("BABYLON.Vector3",l),(0,a.H)("BABYLON.Vector4",f),(0,a.H)("BABYLON.Matrix",d);var m=d.FromValues(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1)},84028:(t,e,r)=>{r.d(e,{$:()=>i,e:()=>o});var n=r(58095),i=function(){function t(t,e){void 0===t&&(t=n.P.Zero()),void 0===e&&(e=n.P.Up()),this.position=t,this.normal=e}return t.prototype.clone=function(){return new t(this.position.clone(),this.normal.clone())},t}(),o=function(){function t(t,e,r){void 0===t&&(t=n.P.Zero()),void 0===e&&(e=n.P.Up()),void 0===r&&(r=n.FM.Zero()),this.position=t,this.normal=e,this.uv=r}return t.prototype.clone=function(){return new t(this.position.clone(),this.normal.clone(),this.uv.clone())},t}()},66513:(t,e,r)=>{r.d(e,{l:()=>n});var n=function(){function t(t,e,r,n){this.x=t,this.y=e,this.width=r,this.height=n}return t.prototype.toGlobal=function(e,r){return new t(this.x*e,this.y*r,this.width*e,this.height*r)},t.prototype.toGlobalToRef=function(t,e,r){return r.x=this.x*t,r.y=this.y*e,r.width=this.width*t,r.height=this.height*e,this},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t}()},69314:(t,e,r)=>{r.d(e,{_:()=>h,i:()=>c});var n=r(58095),i=r(6307),o=[Math.sqrt(1/(4*Math.PI)),-Math.sqrt(3/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),-Math.sqrt(3/(4*Math.PI)),Math.sqrt(15/(4*Math.PI)),-Math.sqrt(15/(4*Math.PI)),Math.sqrt(5/(16*Math.PI)),-Math.sqrt(15/(4*Math.PI)),Math.sqrt(15/(16*Math.PI))],a=[function(){return 1},function(t){return t.y},function(t){return t.z},function(t){return t.x},function(t){return t.x*t.y},function(t){return t.y*t.z},function(t){return 3*t.z*t.z-1},function(t){return t.x*t.z},function(t){return t.x*t.x-t.y*t.y}],s=function(t,e){return o[t]*a[t](e)},u=[Math.PI,2*Math.PI/3,2*Math.PI/3,2*Math.PI/3,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4],h=function(){function t(){this.preScaled=!1,this.l00=n.P.Zero(),this.l1_1=n.P.Zero(),this.l10=n.P.Zero(),this.l11=n.P.Zero(),this.l2_2=n.P.Zero(),this.l2_1=n.P.Zero(),this.l20=n.P.Zero(),this.l21=n.P.Zero(),this.l22=n.P.Zero()}return t.prototype.addLight=function(t,e,r){i.jp.Vector3[0].set(e.r,e.g,e.b);var n=i.jp.Vector3[0],o=i.jp.Vector3[1];n.scaleToRef(r,o),o.scaleToRef(s(0,t),i.jp.Vector3[2]),this.l00.addInPlace(i.jp.Vector3[2]),o.scaleToRef(s(1,t),i.jp.Vector3[2]),this.l1_1.addInPlace(i.jp.Vector3[2]),o.scaleToRef(s(2,t),i.jp.Vector3[2]),this.l10.addInPlace(i.jp.Vector3[2]),o.scaleToRef(s(3,t),i.jp.Vector3[2]),this.l11.addInPlace(i.jp.Vector3[2]),o.scaleToRef(s(4,t),i.jp.Vector3[2]),this.l2_2.addInPlace(i.jp.Vector3[2]),o.scaleToRef(s(5,t),i.jp.Vector3[2]),this.l2_1.addInPlace(i.jp.Vector3[2]),o.scaleToRef(s(6,t),i.jp.Vector3[2]),this.l20.addInPlace(i.jp.Vector3[2]),o.scaleToRef(s(7,t),i.jp.Vector3[2]),this.l21.addInPlace(i.jp.Vector3[2]),o.scaleToRef(s(8,t),i.jp.Vector3[2]),this.l22.addInPlace(i.jp.Vector3[2])},t.prototype.scaleInPlace=function(t){this.l00.scaleInPlace(t),this.l1_1.scaleInPlace(t),this.l10.scaleInPlace(t),this.l11.scaleInPlace(t),this.l2_2.scaleInPlace(t),this.l2_1.scaleInPlace(t),this.l20.scaleInPlace(t),this.l21.scaleInPlace(t),this.l22.scaleInPlace(t)},t.prototype.convertIncidentRadianceToIrradiance=function(){this.l00.scaleInPlace(u[0]),this.l1_1.scaleInPlace(u[1]),this.l10.scaleInPlace(u[2]),this.l11.scaleInPlace(u[3]),this.l2_2.scaleInPlace(u[4]),this.l2_1.scaleInPlace(u[5]),this.l20.scaleInPlace(u[6]),this.l21.scaleInPlace(u[7]),this.l22.scaleInPlace(u[8])},t.prototype.convertIrradianceToLambertianRadiance=function(){this.scaleInPlace(1/Math.PI)},t.prototype.preScaleForRendering=function(){this.preScaled=!0,this.l00.scaleInPlace(o[0]),this.l1_1.scaleInPlace(o[1]),this.l10.scaleInPlace(o[2]),this.l11.scaleInPlace(o[3]),this.l2_2.scaleInPlace(o[4]),this.l2_1.scaleInPlace(o[5]),this.l20.scaleInPlace(o[6]),this.l21.scaleInPlace(o[7]),this.l22.scaleInPlace(o[8])},t.prototype.updateFromArray=function(t){return n.P.FromArrayToRef(t[0],0,this.l00),n.P.FromArrayToRef(t[1],0,this.l1_1),n.P.FromArrayToRef(t[2],0,this.l10),n.P.FromArrayToRef(t[3],0,this.l11),n.P.FromArrayToRef(t[4],0,this.l2_2),n.P.FromArrayToRef(t[5],0,this.l2_1),n.P.FromArrayToRef(t[6],0,this.l20),n.P.FromArrayToRef(t[7],0,this.l21),n.P.FromArrayToRef(t[8],0,this.l22),this},t.prototype.updateFromFloatsArray=function(t){return n.P.FromFloatsToRef(t[0],t[1],t[2],this.l00),n.P.FromFloatsToRef(t[3],t[4],t[5],this.l1_1),n.P.FromFloatsToRef(t[6],t[7],t[8],this.l10),n.P.FromFloatsToRef(t[9],t[10],t[11],this.l11),n.P.FromFloatsToRef(t[12],t[13],t[14],this.l2_2),n.P.FromFloatsToRef(t[15],t[16],t[17],this.l2_1),n.P.FromFloatsToRef(t[18],t[19],t[20],this.l20),n.P.FromFloatsToRef(t[21],t[22],t[23],this.l21),n.P.FromFloatsToRef(t[24],t[25],t[26],this.l22),this},t.FromArray=function(e){return(new t).updateFromArray(e)},t.FromPolynomial=function(e){var r=new t;return r.l00=e.xx.scale(.376127).add(e.yy.scale(.376127)).add(e.zz.scale(.376126)),r.l1_1=e.y.scale(.977204),r.l10=e.z.scale(.977204),r.l11=e.x.scale(.977204),r.l2_2=e.xy.scale(1.16538),r.l2_1=e.yz.scale(1.16538),r.l20=e.zz.scale(1.34567).subtract(e.xx.scale(.672834)).subtract(e.yy.scale(.672834)),r.l21=e.zx.scale(1.16538),r.l22=e.xx.scale(1.16538).subtract(e.yy.scale(1.16538)),r.l1_1.scaleInPlace(-1),r.l11.scaleInPlace(-1),r.l2_1.scaleInPlace(-1),r.l21.scaleInPlace(-1),r.scaleInPlace(Math.PI),r},t}(),c=function(){function t(){this.x=n.P.Zero(),this.y=n.P.Zero(),this.z=n.P.Zero(),this.xx=n.P.Zero(),this.yy=n.P.Zero(),this.zz=n.P.Zero(),this.xy=n.P.Zero(),this.yz=n.P.Zero(),this.zx=n.P.Zero()}return Object.defineProperty(t.prototype,"preScaledHarmonics",{get:function(){return this._harmonics||(this._harmonics=h.FromPolynomial(this)),this._harmonics.preScaled||this._harmonics.preScaleForRendering(),this._harmonics},enumerable:!1,configurable:!0}),t.prototype.addAmbient=function(t){i.jp.Vector3[0].copyFromFloats(t.r,t.g,t.b);var e=i.jp.Vector3[0];this.xx.addInPlace(e),this.yy.addInPlace(e),this.zz.addInPlace(e)},t.prototype.scaleInPlace=function(t){this.x.scaleInPlace(t),this.y.scaleInPlace(t),this.z.scaleInPlace(t),this.xx.scaleInPlace(t),this.yy.scaleInPlace(t),this.zz.scaleInPlace(t),this.yz.scaleInPlace(t),this.zx.scaleInPlace(t),this.xy.scaleInPlace(t)},t.prototype.updateFromHarmonics=function(t){return this._harmonics=t,this.x.copyFrom(t.l11),this.x.scaleInPlace(1.02333).scaleInPlace(-1),this.y.copyFrom(t.l1_1),this.y.scaleInPlace(1.02333).scaleInPlace(-1),this.z.copyFrom(t.l10),this.z.scaleInPlace(1.02333),this.xx.copyFrom(t.l00),i.jp.Vector3[0].copyFrom(t.l20).scaleInPlace(.247708),i.jp.Vector3[1].copyFrom(t.l22).scaleInPlace(.429043),this.xx.scaleInPlace(.886277).subtractInPlace(i.jp.Vector3[0]).addInPlace(i.jp.Vector3[1]),this.yy.copyFrom(t.l00),this.yy.scaleInPlace(.886277).subtractInPlace(i.jp.Vector3[0]).subtractInPlace(i.jp.Vector3[1]),this.zz.copyFrom(t.l00),i.jp.Vector3[0].copyFrom(t.l20).scaleInPlace(.495417),this.zz.scaleInPlace(.886277).addInPlace(i.jp.Vector3[0]),this.yz.copyFrom(t.l2_1),this.yz.scaleInPlace(.858086).scaleInPlace(-1),this.zx.copyFrom(t.l21),this.zx.scaleInPlace(.858086).scaleInPlace(-1),this.xy.copyFrom(t.l2_2),this.xy.scaleInPlace(.858086),this.scaleInPlace(1/Math.PI),this},t.FromHarmonics=function(e){return(new t).updateFromHarmonics(e)},t.FromArray=function(e){var r=new t;return n.P.FromArrayToRef(e[0],0,r.x),n.P.FromArrayToRef(e[1],0,r.y),n.P.FromArrayToRef(e[2],0,r.z),n.P.FromArrayToRef(e[3],0,r.xx),n.P.FromArrayToRef(e[4],0,r.yy),n.P.FromArrayToRef(e[5],0,r.zz),n.P.FromArrayToRef(e[6],0,r.yz),n.P.FromArrayToRef(e[7],0,r.zx),n.P.FromArrayToRef(e[8],0,r.xy),r},t}()},8451:(t,e,r)=>{r.d(e,{NR:()=>h,aR:()=>u,kg:()=>c});var n=r(58095),i=r(15631),o=r(91243),a=r(89209),s=r(47884);function u(t){var e,r=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],o=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],u=[],h=t.width||t.size||1,c=t.height||t.size||1,l=t.depth||t.size||1,f=t.wrap||!1,p=void 0===t.topBaseAt?1:t.topBaseAt,d=void 0===t.bottomBaseAt?0:t.bottomBaseAt,y=[2,0,3,1][p=(p+4)%4],_=[2,0,1,3][d=(d+4)%4],m=[1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1];if(f){r=[2,3,0,2,0,1,4,5,6,4,6,7,9,10,11,9,11,8,12,14,15,12,13,14],m=[-1,1,1,1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1];for(var v=[[1,1,1],[-1,1,1],[-1,1,-1],[1,1,-1]],g=[[-1,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1]],x=[17,18,19,16],b=[22,23,20,21];y>0;)v.unshift(v.pop()),x.unshift(x.pop()),y--;for(;_>0;)g.unshift(g.pop()),b.unshift(b.pop()),_--;v=v.flat(),g=g.flat(),m=m.concat(v).concat(g),r.push(x[0],x[2],x[3],x[0],x[1],x[2]),r.push(b[0],b[2],b[3],b[0],b[1],b[2])}var P=[h/2,c/2,l/2];e=m.reduce((function(t,e,r){return t.concat(e*P[r%3])}),[]);for(var T=0===t.sideOrientation?0:t.sideOrientation||a.x.DEFAULTSIDE,R=t.faceUV||new Array(6),M=t.faceColors,w=[],A=0;A<6;A++)void 0===R[A]&&(R[A]=new n.Lt(0,0,1,1)),M&&void 0===M[A]&&(M[A]=new i.HE(1,1,1,1));for(var I=0;I<6;I++)if(u.push(R[I].z,s.e.UseOpenGLOrientationForUV?1-R[I].w:R[I].w),u.push(R[I].x,s.e.UseOpenGLOrientationForUV?1-R[I].w:R[I].w),u.push(R[I].x,s.e.UseOpenGLOrientationForUV?1-R[I].y:R[I].y),u.push(R[I].z,s.e.UseOpenGLOrientationForUV?1-R[I].y:R[I].y),M)for(var z=0;z<4;z++)w.push(M[I].r,M[I].g,M[I].b,M[I].a);a.x._ComputeSides(T,e,r,o,u,t.frontUVs,t.backUVs);var F=new a.x;if(F.indices=r,F.positions=e,F.normals=o,F.uvs=u,M){var D=T===a.x.DOUBLESIDE?w.concat(w):w;F.colors=D}return F}function h(t,e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=new o.Kj(t,r);return e.sideOrientation=o.Kj._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,u(e).applyToMesh(n,e.updatable),n}var c={CreateBox:h};a.x.CreateBox=u,o.Kj.CreateBox=function(t,e,r,n,i){return void 0===r&&(r=null),h(t,{size:e,sideOrientation:i,updatable:n},r)}},6588:(t,e,r)=>{r.d(e,{KY:()=>h,VF:()=>s,iz:()=>u});var n=r(89209),i=r(58095),o=r(91243),a=r(47884);function s(t){void 0===t&&(t={subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6});var e,r,o=Math.max(t.subdivisions?t.subdivisions:2,1),s=Math.max(t.tessellation?t.tessellation:16,3),u=Math.max(t.height?t.height:1,0),h=Math.max(t.radius?t.radius:.25,0),c=Math.max(t.capSubdivisions?t.capSubdivisions:6,1),l=s,f=o,p=Math.max(t.radiusTop?t.radiusTop:h,0),d=Math.max(t.radiusBottom?t.radiusBottom:h,0),y=u-(p+d),_=2*Math.PI,m=Math.max(t.topCapSubdivisions?t.topCapSubdivisions:c,1),v=Math.max(t.bottomCapSubdivisions?t.bottomCapSubdivisions:c,1),g=Math.acos((d-p)/u),x=[],b=[],P=[],T=[],R=0,M=[],w=.5*y,A=.5*Math.PI,I=i.P.Zero(),z=i.P.Zero(),F=Math.cos(g),D=Math.sin(g),O=new i.FM(p*D,w+p*F).subtract(new i.FM(d*D,d*F-w)).length(),C=p*g+O+d*(A-g),S=0;for(r=0;r<=m;r++){var L=[],V=A-g*(r/m);S+=p*g/m;var j=Math.cos(V),E=Math.sin(V),U=j*p;for(e=0;e<=l;e++){var N=(W=e/l)*_+0,B=Math.sin(N),k=Math.cos(N);z.x=U*B,z.y=w+E*p,z.z=U*k,b.push(z.x,z.y,z.z),I.set(j*B,E,j*k),P.push(I.x,I.y,I.z),T.push(W,a.e.UseOpenGLOrientationForUV?S/C:1-S/C),L.push(R),R++}M.push(L)}var K=u-p-d+F*p-F*d,H=D*(d-p)/K;for(r=1;r<=f;r++){L=[];S+=O/f;U=D*(r*(d-p)/f+p);for(e=0;e<=l;e++){N=(W=e/l)*_+0,B=Math.sin(N),k=Math.cos(N);z.x=U*B,z.y=w+F*p-r*K/f,z.z=U*k,b.push(z.x,z.y,z.z),I.set(B,H,k).normalize(),P.push(I.x,I.y,I.z),T.push(W,a.e.UseOpenGLOrientationForUV?S/C:1-S/C),L.push(R),R++}M.push(L)}for(r=1;r<=v;r++){L=[],V=A-g-(Math.PI-g)*(r/v);S+=d*g/v;j=Math.cos(V),E=Math.sin(V),U=j*d;for(e=0;e<=l;e++){var W;N=(W=e/l)*_+0,B=Math.sin(N),k=Math.cos(N);z.x=U*B,z.y=E*d-w,z.z=U*k,b.push(z.x,z.y,z.z),I.set(j*B,E,j*k),P.push(I.x,I.y,I.z),T.push(W,a.e.UseOpenGLOrientationForUV?S/C:1-S/C),L.push(R),R++}M.push(L)}for(e=0;e<l;e++)for(r=0;r<m+f+v;r++){var G=M[r][e],Z=M[r+1][e],Y=M[r+1][e+1],q=M[r][e+1];x.push(G),x.push(Z),x.push(q),x.push(Z),x.push(Y),x.push(q)}if(x=x.reverse(),t.orientation&&!t.orientation.equals(i.P.Up())){var Q=new i.y3;t.orientation.clone().scale(.5*Math.PI).cross(i.P.Up()).toQuaternion().toRotationMatrix(Q);for(var X=i.P.Zero(),$=0;$<b.length;$+=3)X.set(b[$],b[$+1],b[$+2]),i.P.TransformCoordinatesToRef(X.clone(),Q,X),b[$]=X.x,b[$+1]=X.y,b[$+2]=X.z}var J=new n.x;return J.positions=b,J.normals=P,J.uvs=T,J.indices=x,J}function u(t,e,r){void 0===e&&(e={orientation:i.P.Up(),subdivisions:2,tessellation:16,height:1,radius:.25,capSubdivisions:6,updatable:!1}),void 0===r&&(r=null);var n=new o.Kj(t,r);return s(e).applyToMesh(n,e.updatable),n}var h={CreateCapsule:u};o.Kj.CreateCapsule=function(t,e,r){return u(t,e,r)},n.x.CreateCapsule=s},62845:(t,e,r)=>{r.d(e,{H6:()=>f,wf:()=>l,zD:()=>c});var n=r(58095),i=r(15631),o=r(91243),a=r(89209),s=r(65273),u=r(43048),h=r(47884);function c(t){var e=t.height||2,r=0===t.diameterTop?0:t.diameterTop||t.diameter||1,s=0===t.diameterBottom?0:t.diameterBottom||t.diameter||1;r=r||1e-5,s=s||1e-5;var c,l=t.tessellation||24,f=t.subdivisions||1,p=!!t.hasRings,d=!!t.enclose,y=0===t.cap?0:t.cap||o.Kj.CAP_ALL,_=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1,m=0===t.sideOrientation?0:t.sideOrientation||a.x.DEFAULTSIDE,v=t.faceUV||new Array(3),g=t.faceColors,x=2+(1+(1!==_&&d?2:0))*(p?f:1);for(c=0;c<x;c++)g&&void 0===g[c]&&(g[c]=new i.HE(1,1,1,1));for(c=0;c<x;c++)v&&void 0===v[c]&&(v[c]=new n.Lt(0,0,1,1));var b,P,T,R,M,w,A=new Array,I=new Array,z=new Array,F=new Array,D=new Array,O=2*Math.PI*_/l,C=(s-r)/2/e,S=n.P.Zero(),L=n.P.Zero(),V=n.P.Zero(),j=n.P.Zero(),E=n.P.Zero(),U=u.RD.Y,N=1,B=1,k=0,K=0;for(R=0;R<=f;R++)for(T=((P=R/f)*(r-s)+s)/2,N=p&&0!==R&&R!==f?2:1,w=0;w<N;w++){for(p&&(B+=w),d&&(B+=2*w),M=0;M<=l;M++)b=M*O,S.x=Math.cos(-b)*T,S.y=-e/2+P*e,S.z=Math.sin(-b)*T,0===r&&R===f?(L.x=z[z.length-3*(l+1)],L.y=z[z.length-3*(l+1)+1],L.z=z[z.length-3*(l+1)+2]):(L.x=S.x,L.z=S.z,L.y=Math.sqrt(L.x*L.x+L.z*L.z)*C,L.normalize()),0===M&&(V.copyFrom(S),j.copyFrom(L)),I.push(S.x,S.y,S.z),z.push(L.x,L.y,L.z),K=p?k!==B?v[B].y:v[B].w:v[B].y+(v[B].w-v[B].y)*P,F.push(v[B].x+(v[B].z-v[B].x)*M/l,h.e.UseOpenGLOrientationForUV?1-K:K),g&&D.push(g[B].r,g[B].g,g[B].b,g[B].a);1!==_&&d&&(I.push(S.x,S.y,S.z),I.push(0,S.y,0),I.push(0,S.y,0),I.push(V.x,V.y,V.z),n.P.CrossToRef(U,L,E),E.normalize(),z.push(E.x,E.y,E.z,E.x,E.y,E.z),n.P.CrossToRef(j,U,E),E.normalize(),z.push(E.x,E.y,E.z,E.x,E.y,E.z),K=p?k!==B?v[B+1].y:v[B+1].w:v[B+1].y+(v[B+1].w-v[B+1].y)*P,F.push(v[B+1].x,h.e.UseOpenGLOrientationForUV?1-K:K),F.push(v[B+1].z,h.e.UseOpenGLOrientationForUV?1-K:K),K=p?k!==B?v[B+2].y:v[B+2].w:v[B+2].y+(v[B+2].w-v[B+2].y)*P,F.push(v[B+2].x,h.e.UseOpenGLOrientationForUV?1-K:K),F.push(v[B+2].z,h.e.UseOpenGLOrientationForUV?1-K:K),g&&(D.push(g[B+1].r,g[B+1].g,g[B+1].b,g[B+1].a),D.push(g[B+1].r,g[B+1].g,g[B+1].b,g[B+1].a),D.push(g[B+2].r,g[B+2].g,g[B+2].b,g[B+2].a),D.push(g[B+2].r,g[B+2].g,g[B+2].b,g[B+2].a))),k!==B&&(k=B)}var H=1!==_&&d?l+4:l;for(R=0,B=0;B<f;B++){var W=0,G=0,Z=0,Y=0;for(M=0;M<l;M++)W=R*(H+1)+M,G=(R+1)*(H+1)+M,Z=R*(H+1)+(M+1),Y=(R+1)*(H+1)+(M+1),A.push(W,G,Z),A.push(Y,Z,G);1!==_&&d&&(A.push(W+2,G+2,Z+2),A.push(Y+2,Z+2,G+2),A.push(W+4,G+4,Z+4),A.push(Y+4,Z+4,G+4)),R=p?R+2:R+1}var q=function(t){var i=t?r/2:s/2;if(0!==i){var o,a,u,c=t?v[x-1]:v[0],f=null;g&&(f=t?g[x-1]:g[0]);var p=I.length/3,d=t?e/2:-e/2,y=new n.P(0,d,0);I.push(y.x,y.y,y.z),z.push(0,t?1:-1,0);var m=c.y+.5*(c.w-c.y);F.push(c.x+.5*(c.z-c.x),h.e.UseOpenGLOrientationForUV?1-m:m),f&&D.push(f.r,f.g,f.b,f.a);var b=new n.FM(.5,.5);for(u=0;u<=l;u++){o=2*Math.PI*u*_/l;var P=Math.cos(-o),T=Math.sin(-o);a=new n.P(P*i,d,T*i);var R=new n.FM(P*b.x+.5,T*b.y+.5);I.push(a.x,a.y,a.z),z.push(0,t?1:-1,0);var M=c.y+(c.w-c.y)*R.y;F.push(c.x+(c.z-c.x)*R.x,h.e.UseOpenGLOrientationForUV?1-M:M),f&&D.push(f.r,f.g,f.b,f.a)}for(u=0;u<l;u++)t?(A.push(p),A.push(p+(u+2)),A.push(p+(u+1))):(A.push(p),A.push(p+(u+1)),A.push(p+(u+2)))}};y!==o.Kj.CAP_START&&y!==o.Kj.CAP_ALL||q(!1),y!==o.Kj.CAP_END&&y!==o.Kj.CAP_ALL||q(!0),a.x._ComputeSides(m,I,A,z,F,t.frontUVs,t.backUVs);var Q=new a.x;return Q.indices=A,Q.positions=I,Q.normals=z,Q.uvs=F,g&&(Q.colors=D),Q}function l(t,e,r){void 0===e&&(e={});var n=new o.Kj(t,r);return e.sideOrientation=o.Kj._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,c(e).applyToMesh(n,e.updatable),n}var f={CreateCylinder:l};a.x.CreateCylinder=c,o.Kj.CreateCylinder=function(t,e,r,n,i,a,u,h,c){return void 0!==u&&u instanceof s.x||(void 0!==u&&(c=h||o.Kj.DEFAULTSIDE,h=u),u=a,a=1),l(t,{height:e,diameterTop:r,diameterBottom:n,tessellation:i,subdivisions:a,sideOrientation:c,updatable:h},u)}},96907:(t,e,r)=>{r.d(e,{l:()=>c,t:()=>h});var n=r(58095),i=r(91243),o=r(72208),a=r(89209),s=r(84028),u=r(47884);function h(t,e,r){var h=e.getIndices(),c=e.getVerticesData(o.o.PositionKind),l=e.getVerticesData(o.o.NormalKind),f=e.getVerticesData(o.o.UVKind),p=r.position||n.P.Zero(),d=r.normal||n.P.Up(),y=r.size||n.P.One(),_=r.angle||0;if(!d){var m=new n.P(0,0,1),v=e.getScene().activeCamera,g=n.P.TransformCoordinates(m,v.getWorldMatrix());d=v.globalPosition.subtract(g)}var x=-Math.atan2(d.z,d.x)-Math.PI/2,b=Math.sqrt(d.x*d.x+d.z*d.z),P=Math.atan2(d.y,b),T=n.y3.RotationYawPitchRoll(x,P,_).multiply(n.y3.Translation(p.x,p.y,p.z)),R=n.y3.Invert(T),M=e.getWorldMatrix().multiply(R),w=new a.x;w.indices=[],w.positions=[],w.normals=[],w.uvs=[];for(var A=0,I=function(t){var e=new s.e;if(!h||!c||!l)return e;var i=h[t];if(e.position=new n.P(c[3*i],c[3*i+1],c[3*i+2]),e.position=n.P.TransformCoordinates(e.position,M),e.normal=new n.P(l[3*i],l[3*i+1],l[3*i+2]),e.normal=n.P.TransformNormal(e.normal,M),r.captureUVS&&f){var o=f[2*i+1];e.uv=new n.FM(f[2*i],u.e.UseOpenGLOrientationForUV?1-o:o)}return e},z=function(t,e){if(0===t.length)return t;for(var r=.5*Math.abs(n.P.Dot(y,e)),i=function(t,i){var o=n.P.GetClipFactor(t.position,i.position,e,r);return new s.e(n.P.Lerp(t.position,i.position,o),n.P.Lerp(t.normal,i.normal,o))},o=new Array,a=0;a<t.length;a+=3){var u=null,h=null,c=null,l=null,f=n.P.Dot(t[a].position,e)-r>0,p=n.P.Dot(t[a+1].position,e)-r>0,d=n.P.Dot(t[a+2].position,e)-r>0;switch((f?1:0)+(p?1:0)+(d?1:0)){case 0:o.push(t[a]),o.push(t[a+1]),o.push(t[a+2]);break;case 1:if(f&&(u=t[a+1],h=t[a+2],c=i(t[a],u),l=i(t[a],h)),p){u=t[a],h=t[a+2],c=i(t[a+1],u),l=i(t[a+1],h),o.push(c),o.push(h.clone()),o.push(u.clone()),o.push(h.clone()),o.push(c.clone()),o.push(l);break}d&&(u=t[a],h=t[a+1],c=i(t[a+2],u),l=i(t[a+2],h)),u&&h&&c&&l&&(o.push(u.clone()),o.push(h.clone()),o.push(c),o.push(l),o.push(c.clone()),o.push(h.clone()));break;case 2:f||(h=i(u=t[a].clone(),t[a+1]),c=i(u,t[a+2]),o.push(u),o.push(h),o.push(c)),p||(h=i(u=t[a+1].clone(),t[a+2]),c=i(u,t[a]),o.push(u),o.push(h),o.push(c)),d||(h=i(u=t[a+2].clone(),t[a]),c=i(u,t[a+1]),o.push(u),o.push(h),o.push(c))}}return o},F=0;F<h.length;F+=3){var D=new Array;if(D.push(I(F)),D.push(I(F+1)),D.push(I(F+2)),D=z(D,new n.P(1,0,0)),D=z(D,new n.P(-1,0,0)),D=z(D,new n.P(0,1,0)),D=z(D,new n.P(0,-1,0)),D=z(D,new n.P(0,0,1)),0!==(D=z(D,new n.P(0,0,-1))).length)for(var O=0;O<D.length;O++){var C=D[O];if(w.indices.push(A),C.position.toArray(w.positions,3*A),C.normal.toArray(w.normals,3*A),r.captureUVS)C.uv.toArray(w.uvs,2*A);else{w.uvs.push(.5+C.position.x/y.x);var S=.5+C.position.y/y.y;w.uvs.push(u.e.UseOpenGLOrientationForUV?1-S:S)}A++}}var L=new i.Kj(t,e.getScene());return w.applyToMesh(L),L.position=p.clone(),L.rotation=new n.P(P,x,_),L}var c={CreateDecal:h};i.Kj.CreateDecal=function(t,e,r,n,i,o){return h(t,e,{position:r,normal:n,size:i,angle:o})}},42620:(t,e,r)=>{r.d(e,{t:()=>u,u:()=>s});var n=r(91243),i=r(89209),o=r(47884);function a(t){var e=new Array,r=new Array,n=new Array,a=new Array,s=t.radius||.5,u=t.tessellation||64,h=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1,c=0===t.sideOrientation?0:t.sideOrientation||i.x.DEFAULTSIDE;e.push(0,0,0),a.push(.5,.5);for(var l=2*Math.PI*h,f=1===h?l/u:l/(u-1),p=0,d=0;d<u;d++){var y=Math.cos(p),_=Math.sin(p),m=(y+1)/2,v=(1-_)/2;e.push(s*y,s*_,0),a.push(m,o.e.UseOpenGLOrientationForUV?1-v:v),p+=f}1===h&&(e.push(e[3],e[4],e[5]),a.push(a[2],o.e.UseOpenGLOrientationForUV?1-a[3]:a[3]));for(var g=e.length/3,x=1;x<g-1;x++)r.push(x+1,0,x);i.x.ComputeNormals(e,r,n),i.x._ComputeSides(c,e,r,n,a,t.frontUVs,t.backUVs);var b=new i.x;return b.indices=r,b.positions=e,b.normals=n,b.uvs=a,b}function s(t,e,r){void 0===e&&(e={}),void 0===r&&(r=null);var i=new n.Kj(t,r);return e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation),i._originalBuilderSideOrientation=e.sideOrientation,a(e).applyToMesh(i,e.updatable),i}var u={CreateDisc:s};i.x.CreateDisc=a,n.Kj.CreateDisc=function(t,e,r,n,i,o){return void 0===n&&(n=null),s(t,{radius:e,tessellation:r,sideOrientation:o,updatable:i},n)}},76926:(t,e,r)=>{r.d(e,{M:()=>a});var n=r(57891),i=r(84318),o=r(28674);function a(t,e,r){void 0===r&&(r=null);var a=e.m||1;a!==Math.floor(a)&&(Math.floor(a),i.Y.Warn("m not an integer only floor(m) used"));var s=e.n||0;if(s!==Math.floor(s)&&(Math.floor(s),i.Y.Warn("n not an integer only floor(n) used")),s>a){var u=s;s=a,a=u,i.Y.Warn("n > m therefore m and n swapped")}var h=new o.Bn;h.build(a,s);var c={custom:o.zz.BuildGeodesicData(h),size:e.size,sizeX:e.sizeX,sizeY:e.sizeY,sizeZ:e.sizeZ,faceUV:e.faceUV,faceColors:e.faceColors,flat:e.flat,updatable:e.updatable,sideOrientation:e.sideOrientation,frontUVs:e.frontUVs,backUVs:e.backUVs};return(0,n.sh)(t,c,r)}},21784:(t,e,r)=>{r.d(e,{_:()=>f,w:()=>l});var n=r(58095),i=r(15631),o=r(91243),a=r(89209),s=r(84318),u=r(28674),h=r(41234),c=r(47884);function l(t,e){for(var r=t.size,i=t.sizeX||r||1,o=t.sizeY||r||1,s=t.sizeZ||r||1,u=0===t.sideOrientation?0:t.sideOrientation||a.x.DEFAULTSIDE,h=new Array,l=new Array,f=new Array,p=new Array,d=1/0,y=-1/0,_=1/0,m=-1/0,v=0;v<e.vertex.length;v++)d=Math.min(d,e.vertex[v][0]*i),y=Math.max(y,e.vertex[v][0]*i),_=Math.min(_,e.vertex[v][1]*o),m=Math.max(m,e.vertex[v][1]*o);for(var g=0,x=0;x<e.face.length;x++){var b=e.face[x],P=n.P.FromArray(e.vertex[b[0]]),T=n.P.FromArray(e.vertex[b[2]]),R=n.P.FromArray(e.vertex[b[1]]),M=T.subtract(P),w=R.subtract(P),A=n.P.Cross(w,M).normalize();for(v=0;v<b.length;v++){f.push(A.x,A.y,A.z);var I=e.vertex[b[v]];h.push(I[0]*i,I[1]*o,I[2]*s);var z=(I[1]*o-_)/(m-_);p.push((I[0]*i-d)/(y-d),c.e.UseOpenGLOrientationForUV?1-z:z)}for(v=0;v<b.length-2;v++)l.push(g,g+v+2,g+v+1);g+=b.length}a.x._ComputeSides(u,h,l,f,p);var F=new a.x;return F.positions=h,F.indices=l,F.normals=f,F.uvs=p,F}function f(t,e,r){void 0===r&&(r=null);var a=e.size,c=e.sizeX||a||1,f=e.sizeY||a||1,p=e.sizeZ||a||1,d=e.m||1;d!==Math.floor(d)&&(Math.floor(d),s.Y.Warn("m not an integer only floor(m) used"));var y=e.n||0;if(y!==Math.floor(y)&&(Math.floor(y),s.Y.Warn("n not an integer only floor(n) used")),y>d){var _=y;y=d,d=_,s.Y.Warn("n > m therefore m and n swapped")}var m=new u.Bn;m.build(d,y);var v=u.zz.BuildGeodesicData(m),g=v.toGoldbergPolyhedronData(),x=new h.R(t,r);e.sideOrientation=o.Kj._GetDefaultSideOrientation(e.sideOrientation),x._originalBuilderSideOrientation=e.sideOrientation,l(e,g).applyToMesh(x,e.updatable),x.goldbergData.nbSharedFaces=v.sharedNodes,x.goldbergData.nbUnsharedFaces=v.poleNodes,x.goldbergData.adjacentFaces=v.adjacentFaces,x.goldbergData.nbFaces=x.goldbergData.nbSharedFaces+x.goldbergData.nbUnsharedFaces,x.goldbergData.nbFacesAtPole=(x.goldbergData.nbUnsharedFaces-12)/12;for(var b=0;b<v.vertex.length;b++)x.goldbergData.faceCenters.push(n.P.FromArray(v.vertex[b])),x.goldbergData.faceCenters[b].x*=c,x.goldbergData.faceCenters[b].y*=f,x.goldbergData.faceCenters[b].z*=p,x.goldbergData.faceColors.push(new i.HE(1,1,1,1));for(b=0;b<g.face.length;b++){var P=g.face[b],T=n.P.FromArray(g.vertex[P[0]]),R=n.P.FromArray(g.vertex[P[2]]),M=n.P.FromArray(g.vertex[P[1]]),w=R.subtract(T),A=M.subtract(T),I=n.P.Cross(A,w).normalize(),z=n.P.Cross(A,I).normalize();x.goldbergData.faceXaxis.push(A.normalize()),x.goldbergData.faceYaxis.push(I),x.goldbergData.faceZaxis.push(z)}return x}o.Kj.CreateGoldberg=f},41525:(t,e,r)=>{r.d(e,{$6:()=>y,DG:()=>_,Es:()=>p,Qq:()=>d,W:()=>m,kt:()=>f,vU:()=>v});var n=r(58095),i=r(15631),o=r(91243),a=r(89209),s=r(66378),u=r(13514),h=r(15210),c=r(48154),l=r(47884);function f(t){var e,r,i=[],o=[],s=[],u=[],h=t.width||1,c=t.height||1,f=t.subdivisionsX||t.subdivisions||1,p=t.subdivisionsY||t.subdivisions||1;for(e=0;e<=p;e++)for(r=0;r<=f;r++){var d=new n.P(r*h/f-h/2,0,(p-e)*c/p-c/2),y=new n.P(0,1,0);o.push(d.x,d.y,d.z),s.push(y.x,y.y,y.z),u.push(r/f,l.e.UseOpenGLOrientationForUV?e/p:1-e/p)}for(e=0;e<p;e++)for(r=0;r<f;r++)i.push(r+1+(e+1)*(f+1)),i.push(r+1+e*(f+1)),i.push(r+e*(f+1)),i.push(r+(e+1)*(f+1)),i.push(r+1+(e+1)*(f+1)),i.push(r+e*(f+1));var _=new a.x;return _.indices=i,_.positions=o,_.normals=s,_.uvs=u,_}function p(t){var e,r,i,o,s=void 0!==t.xmin&&null!==t.xmin?t.xmin:-1,u=void 0!==t.zmin&&null!==t.zmin?t.zmin:-1,h=void 0!==t.xmax&&null!==t.xmax?t.xmax:1,c=void 0!==t.zmax&&null!==t.zmax?t.zmax:1,l=t.subdivisions||{w:1,h:1},f=t.precision||{w:1,h:1},p=new Array,d=new Array,y=new Array,_=new Array;l.h=l.h<1?1:l.h,l.w=l.w<1?1:l.w,f.w=f.w<1?1:f.w,f.h=f.h<1?1:f.h;var m=(h-s)/l.w,v=(c-u)/l.h;function g(t,i,o,a){var s=d.length/3,u=f.w+1;for(e=0;e<f.h;e++)for(r=0;r<f.w;r++){var h=[s+r+e*u,s+(r+1)+e*u,s+(r+1)+(e+1)*u,s+r+(e+1)*u];p.push(h[1]),p.push(h[2]),p.push(h[3]),p.push(h[0]),p.push(h[1]),p.push(h[3])}var c=n.P.Zero(),l=new n.P(0,1,0);for(e=0;e<=f.h;e++)for(c.z=e*(a-i)/f.h+i,r=0;r<=f.w;r++)c.x=r*(o-t)/f.w+t,c.y=0,d.push(c.x,c.y,c.z),y.push(l.x,l.y,l.z),_.push(r/f.w,e/f.h)}for(i=0;i<l.h;i++)for(o=0;o<l.w;o++)g(s+o*m,u+i*v,s+(o+1)*m,u+(i+1)*v);var x=new a.x;return x.indices=p,x.positions=d,x.normals=y,x.uvs=_,x}function d(t){var e,r,o=[],s=[],u=[],h=[],l=t.colorFilter||new i.Wo(.3,.59,.11),f=t.alphaFilter||0,p=!1;if(t.minHeight>t.maxHeight){p=!0;var d=t.maxHeight;t.maxHeight=t.minHeight,t.minHeight=d}for(e=0;e<=t.subdivisions;e++)for(r=0;r<=t.subdivisions;r++){var y=new n.P(r*t.width/t.subdivisions-t.width/2,0,(t.subdivisions-e)*t.height/t.subdivisions-t.height/2),_=4*(((y.x+t.width/2)/t.width*(t.bufferWidth-1)|0)+((1-(y.z+t.height/2)/t.height)*(t.bufferHeight-1)|0)*t.bufferWidth),m=t.buffer[_]/255,v=t.buffer[_+1]/255,g=t.buffer[_+2]/255,x=t.buffer[_+3]/255;p&&(m=1-m,v=1-v,g=1-g);var b=m*l.r+v*l.g+g*l.b;y.y=x>=f?t.minHeight+(t.maxHeight-t.minHeight)*b:t.minHeight-c.kn,s.push(y.x,y.y,y.z),u.push(0,0,0),h.push(r/t.subdivisions,1-e/t.subdivisions)}for(e=0;e<t.subdivisions;e++)for(r=0;r<t.subdivisions;r++){var P=r+1+(e+1)*(t.subdivisions+1),T=r+1+e*(t.subdivisions+1),R=r+e*(t.subdivisions+1),M=r+(e+1)*(t.subdivisions+1),w=s[3*P+1]>=t.minHeight,A=s[3*T+1]>=t.minHeight,I=s[3*R+1]>=t.minHeight;w&&A&&I&&(o.push(P),o.push(T),o.push(R)),s[3*M+1]>=t.minHeight&&w&&I&&(o.push(M),o.push(P),o.push(R))}a.x.ComputeNormals(s,o,u);var z=new a.x;return z.indices=o,z.positions=s,z.normals=u,z.uvs=h,z}function y(t,e,r){void 0===e&&(e={});var n=new s.E(t,r);return n._setReady(!1),n._subdivisionsX=e.subdivisionsX||e.subdivisions||1,n._subdivisionsY=e.subdivisionsY||e.subdivisions||1,n._width=e.width||1,n._height=e.height||1,n._maxX=n._width/2,n._maxZ=n._height/2,n._minX=-n._maxX,n._minZ=-n._maxZ,f(e).applyToMesh(n,e.updatable),n._setReady(!0),n}function _(t,e,r){void 0===r&&(r=null);var n=new o.Kj(t,r);return p(e).applyToMesh(n,e.updatable),n}function m(t,e,r,n){void 0===r&&(r={}),void 0===n&&(n=null);var o=r.width||10,a=r.height||10,c=r.subdivisions||1,l=r.minHeight||0,f=r.maxHeight||1,p=r.colorFilter||new i.Wo(.3,.59,.11),y=r.alphaFilter||0,_=r.updatable,m=r.onReady;n=n||h.l.LastCreatedScene;var v=new s.E(t,n);v._subdivisionsX=c,v._subdivisionsY=c,v._width=o,v._height=a,v._maxX=v._width/2,v._maxZ=v._height/2,v._minX=-v._maxX,v._minZ=-v._maxZ,v._setReady(!1);return u.w1.LoadImage(e,(function(t){var e=t.width,r=t.height;if(!n.isDisposed){var i=null==n?void 0:n.getEngine().resizeImageBitmap(t,e,r);d({width:o,height:a,subdivisions:c,minHeight:l,maxHeight:f,colorFilter:p,buffer:i,bufferWidth:e,bufferHeight:r,alphaFilter:y}).applyToMesh(v,_),m&&m(v),v._setReady(!0)}}),(function(){}),n.offlineProvider),v}var v={CreateGround:y,CreateGroundFromHeightMap:m,CreateTiledGround:_};a.x.CreateGround=f,a.x.CreateTiledGround=p,a.x.CreateGroundFromHeightMap=d,o.Kj.CreateGround=function(t,e,r,n,i,o){return y(t,{width:e,height:r,subdivisions:n,updatable:o},i)},o.Kj.CreateTiledGround=function(t,e,r,n,i,o,a,s,u){return _(t,{xmin:e,zmin:r,xmax:n,zmax:i,subdivisions:o,precision:a,updatable:u},s)},o.Kj.CreateGroundFromHeightMap=function(t,e,r,n,i,o,a,s,u,h,c){return m(t,e,{width:r,height:n,subdivisions:i,minHeight:o,maxHeight:a,updatable:u,onReady:h,alphaFilter:c},s)}},54557:(t,e,r)=>{r.d(e,{R:()=>s,q:()=>a});var n=r(91243),i=r(48087),o=r(42620);function a(t,e,r){void 0===e&&(e={}),e.diameter||(e.diameter=1),e.segments||(e.segments=16);var a=(0,i.Qk)("",{slice:.5,diameter:e.diameter,segments:e.segments},r),s=(0,o.u)("",{radius:e.diameter/2,tessellation:3*e.segments+(4-e.segments)},r);s.rotation.x=-Math.PI/2,s.parent=a;var u=n.Kj.MergeMeshes([s,a],!0);return u.name=t,u}var s={CreateHemisphere:a};n.Kj.CreateHemisphere=function(t,e,r,n){return a(t,{segments:e,diameter:r},n)}},75298:(t,e,r)=>{r.d(e,{Au:()=>u,GM:()=>h,GQ:()=>s});var n=r(58095),i=r(91243),o=r(89209),a=r(47884);function s(t){var e,r=t.sideOrientation||o.x.DEFAULTSIDE,i=t.radius||1,s=void 0===t.flat||t.flat,u=t.subdivisions||4,h=t.radiusX||i,c=t.radiusY||i,l=t.radiusZ||i,f=(1+Math.sqrt(5))/2,p=[-1,f,-0,1,f,0,-1,-f,0,1,-f,0,0,-1,-f,0,1,-f,0,-1,f,0,1,f,f,0,1,f,0,-1,-f,0,1,-f,0,-1],d=[0,11,5,0,5,1,0,1,7,0,7,10,12,22,23,1,5,20,5,11,4,23,22,13,22,18,6,7,1,8,14,21,4,14,4,2,16,13,6,15,6,19,3,8,9,4,21,5,13,17,23,6,13,22,19,6,18,9,8,1],y=[0,1,2,3,4,5,6,7,8,9,10,11,0,2,3,3,3,4,7,8,9,9,10,11],_=[5,1,3,1,6,4,0,0,5,3,4,2,2,2,4,0,2,0,1,1,6,0,6,2,0,4,3,3,4,4,3,1,4,2,4,4,0,2,1,1,2,2,3,3,1,3,2,4],m=[0,0,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0],v=new Array,g=new Array,x=new Array,b=new Array,P=0,T=new Array(3),R=new Array(3);for(e=0;e<3;e++)T[e]=n.P.Zero(),R[e]=n.FM.Zero();for(var M=0;M<20;M++){for(e=0;e<3;e++){var w=d[3*M+e];T[e].copyFromFloats(p[3*y[w]],p[3*y[w]+1],p[3*y[w]+2]),T[e].normalize().scaleInPlace(i),R[e].copyFromFloats(.134765625*_[2*w]+.05859375+-.0390625*m[M],.2333984375*_[2*w+1]+.025390625+.01953125*m[M])}for(var A=function(t,e,r,i){var o,f=n.P.Lerp(T[0],T[2],e/u),p=n.P.Lerp(T[1],T[2],e/u),d=u===e?T[2]:n.P.Lerp(f,p,t/(u-e));if(d.normalize(),s){var y=n.P.Lerp(T[0],T[2],i/u),_=n.P.Lerp(T[1],T[2],i/u);o=n.P.Lerp(y,_,r/(u-i))}else o=new n.P(d.x,d.y,d.z);o.x/=h,o.y/=c,o.z/=l,o.normalize();var m=n.FM.Lerp(R[0],R[2],e/u),M=n.FM.Lerp(R[1],R[2],e/u),w=u===e?R[2]:n.FM.Lerp(m,M,t/(u-e));g.push(d.x*h,d.y*c,d.z*l),x.push(o.x,o.y,o.z),b.push(w.x,a.e.UseOpenGLOrientationForUV?1-w.y:w.y),v.push(P),P++},I=0;I<u;I++)for(var z=0;z+I<u;z++)A(z,I,z+1/3,I+1/3),A(z+1,I,z+1/3,I+1/3),A(z,I+1,z+1/3,I+1/3),z+I+1<u&&(A(z+1,I,z+2/3,I+2/3),A(z+1,I+1,z+2/3,I+2/3),A(z,I+1,z+2/3,I+2/3))}o.x._ComputeSides(r,g,v,x,b,t.frontUVs,t.backUVs);var F=new o.x;return F.indices=v,F.positions=g,F.normals=x,F.uvs=b,F}function u(t,e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=new i.Kj(t,r);return e.sideOrientation=i.Kj._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,s(e).applyToMesh(n,e.updatable),n}var h={CreateIcoSphere:u};o.x.CreateIcoSphere=s,i.Kj.CreateIcoSphere=function(t,e,r){return u(t,e,r)}},42080:(t,e,r)=>{r.d(e,{$6:()=>v.$6,A1:()=>s.A1,Au:()=>R.Au,BH:()=>f.BH,DG:()=>v.DG,Es:()=>v.Es,Fc:()=>g.F,GM:()=>R.GM,GQ:()=>R.GQ,Gc:()=>d.Gc,Gz:()=>f.Gz,H6:()=>h.H6,Hq:()=>_.Hq,KA:()=>m.KA,KY:()=>M.KY,LY:()=>a.LY,MP:()=>b.M,NR:()=>n.NR,OV:()=>y.O,Oy:()=>d.Oy,P8:()=>m.P8,Pk:()=>p.Pk,Qk:()=>s.Qk,Qq:()=>v.Qq,Qy:()=>x.Qy,RN:()=>f.RN,RO:()=>u.R,SN:()=>l.SN,Sc:()=>i.Sc,Ub:()=>a.Ub,VF:()=>M.VF,W:()=>v.W,Yo:()=>p.Yo,_l:()=>P._,_u:()=>g._,a4:()=>p.a4,aO:()=>y.a,aR:()=>n.aR,bC:()=>d.bC,cQ:()=>i.cQ,eB:()=>l.eB,eW:()=>f.eW,eu:()=>c.eu,gl:()=>p.gl,h5:()=>c.h5,i9:()=>l.i9,iz:()=>M.iz,jM:()=>a.jM,jY:()=>s.jY,kg:()=>n.kg,kt:()=>v.kt,l4:()=>T.l,mm:()=>m.mm,mx:()=>_.mx,nL:()=>f.nL,ox:()=>x.ox,pT:()=>_.pT,qL:()=>u.q,qS:()=>i.qS,sh:()=>x.sh,t3:()=>c.t3,tX:()=>o.t,tY:()=>T.t,uH:()=>o.u,vU:()=>v.vU,wf:()=>h.wf,wl:()=>P.w,xW:()=>f.xW,zD:()=>h.zD});var n=r(8451),i=r(10149),o=r(42620),a=r(48236),s=r(48087),u=r(54557),h=r(62845),c=r(49353),l=r(93471),f=r(9866),p=r(52590),d=r(75159),y=r(89202),_=r(46719),m=r(89234),v=r(41525),g=r(42387),x=r(57891),b=r(76926),P=r(21784),T=r(96907),R=r(75298),M=r(6588)},89202:(t,e,r)=>{r.d(e,{O:()=>a,a:()=>s});var n=r(58095),i=r(91243),o=r(48236);function a(t,e,r){void 0===r&&(r=null);var a,s,u=e.arc?e.arc<=0||e.arc>1?1:e.arc:1,h=void 0===e.closed||e.closed,c=e.shape,l=e.radius||1,f=e.tessellation||64,p=e.clip||0,d=e.updatable,y=i.Kj._GetDefaultSideOrientation(e.sideOrientation),_=e.cap||i.Kj.NO_CAP,m=2*Math.PI,v=new Array,g=e.invertUV||!1,x=0,b=0,P=m/f*u;for(x=0;x<=f-p;x++){for(s=[],_!=i.Kj.CAP_START&&_!=i.Kj.CAP_ALL||(s.push(new n.P(0,c[0].y,0)),s.push(new n.P(Math.cos(x*P)*c[0].x*l,c[0].y,Math.sin(x*P)*c[0].x*l))),b=0;b<c.length;b++)a=new n.P(Math.cos(x*P)*c[b].x*l,c[b].y,Math.sin(x*P)*c[b].x*l),s.push(a);_!=i.Kj.CAP_END&&_!=i.Kj.CAP_ALL||(s.push(new n.P(Math.cos(x*P)*c[c.length-1].x*l,c[c.length-1].y,Math.sin(x*P)*c[c.length-1].x*l)),s.push(new n.P(0,c[c.length-1].y,0))),v.push(s)}return(0,o.LY)(t,{pathArray:v,closeArray:h,sideOrientation:y,updatable:d,invertUV:g,frontUVs:e.frontUVs,backUVs:e.backUVs},r)}var s={CreateLathe:a};i.Kj.CreateLathe=function(t,e,r,n,i,o,s){return a(t,{shape:e,radius:r,tessellation:n,sideOrientation:s,updatable:o},i)}},9866:(t,e,r)=>{r.d(e,{BH:()=>c,Gz:()=>p,RN:()=>d,eW:()=>h,nL:()=>f,xW:()=>l});var n=r(58095),i=r(91243),o=r(89209),a=r(37852),s=r(72208),u=r(84318);function h(t){for(var e=[],r=[],n=t.lines,i=t.colors,a=[],s=0,u=0;u<n.length;u++)for(var h=n[u],c=0;c<h.length;c++){if(r.push(h[c].x,h[c].y,h[c].z),i){var l=i[u];a.push(l[c].r,l[c].g,l[c].b,l[c].a)}c>0&&(e.push(s-1),e.push(s)),s++}var f=new o.x;return f.indices=e,f.positions=r,i&&(f.colors=a),f}function c(t){var e,r,i=t.dashSize||3,a=t.gapSize||1,s=t.dashNb||200,u=t.points,h=new Array,c=new Array,l=n.P.Zero(),f=0,p=0,d=0,y=0,_=0;for(_=0;_<u.length-1;_++)u[_+1].subtractToRef(u[_],l),f+=l.length();for(r=i*(e=f/s)/(i+a),_=0;_<u.length-1;_++){u[_+1].subtractToRef(u[_],l),p=Math.floor(l.length()/e),l.normalize();for(var m=0;m<p;m++)d=e*m,h.push(u[_].x+d*l.x,u[_].y+d*l.y,u[_].z+d*l.z),h.push(u[_].x+(d+r)*l.x,u[_].y+(d+r)*l.y,u[_].z+(d+r)*l.z),c.push(y,y+1),y+=2}var v=new o.x;return v.positions=h,v.indices=c,v}function l(t,e,r){var n=e.instance,i=e.lines,o=e.colors;if(n){var u=n.getVerticesData(s.o.PositionKind),c=void 0,l=void 0;o&&(c=n.getVerticesData(s.o.ColorKind));for(var f=0,p=0,d=0;d<i.length;d++)for(var y=i[d],_=0;_<y.length;_++)u[f]=y[_].x,u[f+1]=y[_].y,u[f+2]=y[_].z,o&&c&&(l=o[d],c[p]=l[_].r,c[p+1]=l[_].g,c[p+2]=l[_].b,c[p+3]=l[_].a,p+=4),f+=3;return n.updateVerticesData(s.o.PositionKind,u,!1,!1),o&&c&&n.updateVerticesData(s.o.ColorKind,c,!1,!1),n}var m=!!o,v=new a._(t,r,null,void 0,void 0,m,e.useVertexAlpha,e.material);return h(e).applyToMesh(v,e.updatable),v}function f(t,e,r){void 0===r&&(r=null);var n=e.colors?[e.colors]:null;return l(t,{lines:[e.points],updatable:e.updatable,instance:e.instance,colors:n,useVertexAlpha:e.useVertexAlpha,material:e.material},r)}function p(t,e,r){void 0===r&&(r=null);var o=e.points,s=e.instance,h=e.gapSize||1,l=e.dashSize||3;if(s){return(e.dashNb||e.dashSize||e.gapSize||e.useVertexAlpha||e.material)&&u.Y.Warn("You have used an option other than points with the instance option. Please be aware that these other options will be ignored."),s.updateMeshPositions((function(t){var e,r,i=n.P.Zero(),a=t.length/6,u=0,h=0,c=0,l=0,f=0,p=0;for(f=0;f<o.length-1;f++)o[f+1].subtractToRef(o[f],i),u+=i.length();e=u/a;var d=s._creationDataStorage.dashSize;for(r=d*e/(d+s._creationDataStorage.gapSize),f=0;f<o.length-1;f++)for(o[f+1].subtractToRef(o[f],i),h=Math.floor(i.length()/e),i.normalize(),p=0;p<h&&l<t.length;)c=e*p,t[l]=o[f].x+c*i.x,t[l+1]=o[f].y+c*i.y,t[l+2]=o[f].z+c*i.z,t[l+3]=o[f].x+(c+r)*i.x,t[l+4]=o[f].y+(c+r)*i.y,t[l+5]=o[f].z+(c+r)*i.z,l+=6,p++;for(;l<t.length;)t[l]=o[f].x,t[l+1]=o[f].y,t[l+2]=o[f].z,l+=3}),!1),s}var f=new a._(t,r,null,void 0,void 0,void 0,e.useVertexAlpha,e.material);return c(e).applyToMesh(f,e.updatable),f._creationDataStorage=new i.gW,f._creationDataStorage.dashSize=l,f._creationDataStorage.gapSize=h,f}var d={CreateDashedLines:p,CreateLineSystem:l,CreateLines:f};o.x.CreateLineSystem=h,o.x.CreateDashedLines=c,i.Kj.CreateLines=function(t,e,r,n,i){return void 0===r&&(r=null),void 0===n&&(n=!1),void 0===i&&(i=null),f(t,{points:e,updatable:n,instance:i},r)},i.Kj.CreateDashedLines=function(t,e,r,n,i,o,a,s){return void 0===o&&(o=null),p(t,{points:e,dashSize:r,gapSize:n,dashNb:i,updatable:a,instance:s},o)}},46719:(t,e,r)=>{r.d(e,{Hq:()=>a,mx:()=>u,pT:()=>s});var n=r(91243),i=r(89209),o=r(47884);function a(t){var e=[],r=[],n=[],a=[],s=t.width||t.size||1,u=t.height||t.size||1,h=0===t.sideOrientation?0:t.sideOrientation||i.x.DEFAULTSIDE,c=s/2,l=u/2;r.push(-c,-l,0),n.push(0,0,-1),a.push(0,o.e.UseOpenGLOrientationForUV?1:0),r.push(c,-l,0),n.push(0,0,-1),a.push(1,o.e.UseOpenGLOrientationForUV?1:0),r.push(c,l,0),n.push(0,0,-1),a.push(1,o.e.UseOpenGLOrientationForUV?0:1),r.push(-c,l,0),n.push(0,0,-1),a.push(0,o.e.UseOpenGLOrientationForUV?0:1),e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),i.x._ComputeSides(h,r,e,n,a,t.frontUVs,t.backUVs);var f=new i.x;return f.indices=e,f.positions=r,f.normals=n,f.uvs=a,f}function s(t,e,r){void 0===e&&(e={}),void 0===r&&(r=null);var i=new n.Kj(t,r);return e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation),i._originalBuilderSideOrientation=e.sideOrientation,a(e).applyToMesh(i,e.updatable),e.sourcePlane&&(i.translate(e.sourcePlane.normal,-e.sourcePlane.d),i.setDirection(e.sourcePlane.normal.scale(-1))),i}var u={CreatePlane:s};i.x.CreatePlane=a,n.Kj.CreatePlane=function(t,e,r,n,i){return s(t,{size:e,width:e,height:e,sideOrientation:i,updatable:n},r)}},52590:(t,e,r)=>{r.d(e,{Pk:()=>d,Yo:()=>p,a4:()=>f,gl:()=>l});var n=r(58095),i=r(15631),o=r(91243),a=r(89209),s=r(86230),u=r(72208),h=r(15210),c=r(47884);function l(t,e,r,o,s,h,l){for(var f=r||new Array(3),p=o,d=[],y=l||!1,_=0;_<3;_++)void 0===f[_]&&(f[_]=new n.Lt(0,0,1,1)),p&&void 0===p[_]&&(p[_]=new i.HE(1,1,1,1));var m=t.getVerticesData(u.o.PositionKind),v=t.getVerticesData(u.o.NormalKind),g=t.getVerticesData(u.o.UVKind),x=t.getIndices(),b=m.length/9,P=0,T=0,R=0,M=0,w=[0];if(y)for(var A=b;A<m.length/3;A+=4)T=m[3*(A+2)]-m[3*A],R=m[3*(A+2)+2]-m[3*A+2],M+=Math.sqrt(T*T+R*R),w.push(M);for(var I=0,z=0,F=0;F<v.length;F+=3)Math.abs(v[F+1])<.001&&(z=1),Math.abs(v[F+1]-1)<.001&&(z=0),Math.abs(v[F+1]+1)<.001&&(z=2),I=F/3,1===z?(P=I-b,g[2*I]=P%4<1.5?y?f[z].x+(f[z].z-f[z].x)*w[Math.floor(P/4)]/M:f[z].x:y?f[z].x+(f[z].z-f[z].x)*w[Math.floor(P/4)+1]/M:f[z].z,g[2*I+1]=P%2==0?c.e.UseOpenGLOrientationForUV?1-f[z].w:f[z].w:c.e.UseOpenGLOrientationForUV?1-f[z].y:f[z].y):(g[2*I]=(1-g[2*I])*f[z].x+g[2*I]*f[z].z,g[2*I+1]=(1-g[2*I+1])*f[z].y+g[2*I+1]*f[z].w,c.e.UseOpenGLOrientationForUV&&(g[2*I+1]=1-g[2*I+1])),p&&d.push(p[z].r,p[z].g,p[z].b,p[z].a);a.x._ComputeSides(e,m,x,v,g,s,h);var D=new a.x;if(D.indices=x,D.positions=m,D.normals=v,D.uvs=g,p){var O=e===a.x.DOUBLESIDE?d.concat(d):d;D.colors=O}return D}function f(t,e,r,i){void 0===r&&(r=null),void 0===i&&(i=earcut),e.sideOrientation=o.Kj._GetDefaultSideOrientation(e.sideOrientation);for(var a=e.shape,u=e.holes||[],c=e.depth||0,f=e.smoothingThreshold||2,p=[],d=[],y=0;y<a.length;y++)p[y]=new n.FM(a[y].x,a[y].z);p[0].equalsWithEpsilon(p[p.length-1],1e-8)&&p.pop();for(var _=new s.z(t,p,r||h.l.LastCreatedScene,i),m=0;m<u.length;m++){d=[];for(var v=0;v<u[m].length;v++)d.push(new n.FM(u[m][v].x,u[m][v].z));_.addHole(d)}var g=_.build(!1,c,f);return g._originalBuilderSideOrientation=e.sideOrientation,l(g,e.sideOrientation,e.faceUV,e.faceColors,e.frontUVs,e.backUVs,e.wrap).applyToMesh(g,e.updatable),g}function p(t,e,r,n){return void 0===r&&(r=null),void 0===n&&(n=earcut),f(t,e,r,n)}var d={ExtrudePolygon:p,CreatePolygon:f};a.x.CreatePolygon=l,o.Kj.CreatePolygon=function(t,e,r,n,i,o,a){return void 0===a&&(a=earcut),f(t,{shape:e,holes:n,updatable:i,sideOrientation:o},r,a)},o.Kj.ExtrudePolygon=function(t,e,r,n,i,o,a,s){return void 0===s&&(s=earcut),p(t,{shape:e,holes:i,depth:r,updatable:o,sideOrientation:a},n,s)}},57891:(t,e,r)=>{r.d(e,{Qy:()=>u,ox:()=>c,sh:()=>h});var n=r(58095),i=r(15631),o=r(91243),a=r(89209),s=r(47884);function u(t){var e=[];e[0]={vertex:[[0,0,1.732051],[1.632993,0,-.5773503],[-.8164966,1.414214,-.5773503],[-.8164966,-1.414214,-.5773503]],face:[[0,1,2],[0,2,3],[0,3,1],[1,3,2]]},e[1]={vertex:[[0,0,1.414214],[1.414214,0,0],[0,1.414214,0],[-1.414214,0,0],[0,-1.414214,0],[0,0,-1.414214]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]]},e[2]={vertex:[[0,0,1.070466],[.7136442,0,.7978784],[-.3568221,.618034,.7978784],[-.3568221,-.618034,.7978784],[.7978784,.618034,.3568221],[.7978784,-.618034,.3568221],[-.9341724,.381966,.3568221],[.1362939,1,.3568221],[.1362939,-1,.3568221],[-.9341724,-.381966,.3568221],[.9341724,.381966,-.3568221],[.9341724,-.381966,-.3568221],[-.7978784,.618034,-.3568221],[-.1362939,1,-.3568221],[-.1362939,-1,-.3568221],[-.7978784,-.618034,-.3568221],[.3568221,.618034,-.7978784],[.3568221,-.618034,-.7978784],[-.7136442,0,-.7978784],[0,0,-1.070466]],face:[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]]},e[3]={vertex:[[0,0,1.175571],[1.051462,0,.5257311],[.3249197,1,.5257311],[-.8506508,.618034,.5257311],[-.8506508,-.618034,.5257311],[.3249197,-1,.5257311],[.8506508,.618034,-.5257311],[.8506508,-.618034,-.5257311],[-.3249197,1,-.5257311],[-1.051462,0,-.5257311],[-.3249197,-1,-.5257311],[0,0,-1.175571]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]]},e[4]={vertex:[[0,0,1.070722],[.7148135,0,.7971752],[-.104682,.7071068,.7971752],[-.6841528,.2071068,.7971752],[-.104682,-.7071068,.7971752],[.6101315,.7071068,.5236279],[1.04156,.2071068,.1367736],[.6101315,-.7071068,.5236279],[-.3574067,1,.1367736],[-.7888348,-.5,.5236279],[-.9368776,.5,.1367736],[-.3574067,-1,.1367736],[.3574067,1,-.1367736],[.9368776,-.5,-.1367736],[.7888348,.5,-.5236279],[.3574067,-1,-.1367736],[-.6101315,.7071068,-.5236279],[-1.04156,-.2071068,-.1367736],[-.6101315,-.7071068,-.5236279],[.104682,.7071068,-.7971752],[.6841528,-.2071068,-.7971752],[.104682,-.7071068,-.7971752],[-.7148135,0,-.7971752],[0,0,-1.070722]],face:[[0,2,3],[1,6,5],[4,9,11],[7,15,13],[8,16,10],[12,14,19],[17,22,18],[20,21,23],[0,1,5,2],[0,3,9,4],[0,4,7,1],[1,7,13,6],[2,5,12,8],[2,8,10,3],[3,10,17,9],[4,11,15,7],[5,6,14,12],[6,13,20,14],[8,12,19,16],[9,17,18,11],[10,16,22,17],[11,18,21,15],[13,15,21,20],[14,20,23,19],[16,19,23,22],[18,22,23,21]]},e[5]={vertex:[[0,0,1.322876],[1.309307,0,.1889822],[-.9819805,.8660254,.1889822],[.1636634,-1.299038,.1889822],[.3273268,.8660254,-.9449112],[-.8183171,-.4330127,-.9449112]],face:[[0,3,1],[2,4,5],[0,1,4,2],[0,2,5,3],[1,3,5,4]]},e[6]={vertex:[[0,0,1.159953],[1.013464,0,.5642542],[-.3501431,.9510565,.5642542],[-.7715208,-.6571639,.5642542],[.6633206,.9510565,-.03144481],[.8682979,-.6571639,-.3996071],[-1.121664,.2938926,-.03144481],[-.2348831,-1.063314,-.3996071],[.5181548,.2938926,-.9953061],[-.5850262,-.112257,-.9953061]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,9,7],[5,7,9,8],[0,3,7,5,1],[2,4,8,9,6]]},e[7]={vertex:[[0,0,1.118034],[.8944272,0,.6708204],[-.2236068,.8660254,.6708204],[-.7826238,-.4330127,.6708204],[.6708204,.8660254,.2236068],[1.006231,-.4330127,-.2236068],[-1.006231,.4330127,.2236068],[-.6708204,-.8660254,-.2236068],[.7826238,.4330127,-.6708204],[.2236068,-.8660254,-.6708204],[-.8944272,0,-.6708204],[0,0,-1.118034]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,10,7],[5,9,11,8],[7,10,11,9],[0,3,7,9,5,1],[2,4,8,11,10,6]]},e[8]={vertex:[[-.729665,.670121,.319155],[-.655235,-.29213,-.754096],[-.093922,-.607123,.537818],[.702196,.595691,.485187],[.776626,-.36656,-.588064]],face:[[1,4,2],[0,1,2],[3,0,2],[4,3,2],[4,1,0,3]]},e[9]={vertex:[[-.868849,-.100041,.61257],[-.329458,.976099,.28078],[-.26629,-.013796,-.477654],[-.13392,-1.034115,.229829],[.738834,.707117,-.307018],[.859683,-.535264,-.338508]],face:[[3,0,2],[5,3,2],[4,5,2],[1,4,2],[0,1,2],[0,3,5,4,1]]},e[10]={vertex:[[-.610389,.243975,.531213],[-.187812,-.48795,-.664016],[-.187812,.9759,-.664016],[.187812,-.9759,.664016],[.798201,.243975,.132803]],face:[[1,3,0],[3,4,0],[3,1,4],[0,2,1],[0,4,2],[2,4,1]]},e[11]={vertex:[[-1.028778,.392027,-.048786],[-.640503,-.646161,.621837],[-.125162,-.395663,-.540059],[.004683,.888447,-.651988],[.125161,.395663,.540059],[.632925,-.791376,.433102],[1.031672,.157063,-.354165]],face:[[3,2,0],[2,1,0],[2,5,1],[0,4,3],[0,1,4],[4,1,5],[2,3,6],[3,4,6],[5,2,6],[4,5,6]]},e[12]={vertex:[[-.669867,.334933,-.529576],[-.669867,.334933,.529577],[-.4043,1.212901,0],[-.334933,-.669867,-.529576],[-.334933,-.669867,.529577],[.334933,.669867,-.529576],[.334933,.669867,.529577],[.4043,-1.212901,0],[.669867,-.334933,-.529576],[.669867,-.334933,.529577]],face:[[8,9,7],[6,5,2],[3,8,7],[5,0,2],[4,3,7],[0,1,2],[9,4,7],[1,6,2],[9,8,5,6],[8,3,0,5],[3,4,1,0],[4,9,6,1]]},e[13]={vertex:[[-.931836,.219976,-.264632],[-.636706,.318353,.692816],[-.613483,-.735083,-.264632],[-.326545,.979634,0],[-.318353,-.636706,.692816],[-.159176,.477529,-.856368],[.159176,-.477529,-.856368],[.318353,.636706,.692816],[.326545,-.979634,0],[.613482,.735082,-.264632],[.636706,-.318353,.692816],[.931835,-.219977,-.264632]],face:[[11,10,8],[7,9,3],[6,11,8],[9,5,3],[2,6,8],[5,0,3],[4,2,8],[0,1,3],[10,4,8],[1,7,3],[10,11,9,7],[11,6,5,9],[6,2,0,5],[2,4,1,0],[4,10,7,1]]},e[14]={vertex:[[-.93465,.300459,-.271185],[-.838689,-.260219,-.516017],[-.711319,.717591,.128359],[-.710334,-.156922,.080946],[-.599799,.556003,-.725148],[-.503838,-.004675,-.969981],[-.487004,.26021,.48049],[-.460089,-.750282,-.512622],[-.376468,.973135,-.325605],[-.331735,-.646985,.084342],[-.254001,.831847,.530001],[-.125239,-.494738,-.966586],[.029622,.027949,.730817],[.056536,-.982543,-.262295],[.08085,1.087391,.076037],[.125583,-.532729,.485984],[.262625,.599586,.780328],[.391387,-.726999,-.716259],[.513854,-.868287,.139347],[.597475,.85513,.326364],[.641224,.109523,.783723],[.737185,-.451155,.538891],[.848705,-.612742,-.314616],[.976075,.365067,.32976],[1.072036,-.19561,.084927]],face:[[15,18,21],[12,20,16],[6,10,2],[3,0,1],[9,7,13],[2,8,4,0],[0,4,5,1],[1,5,11,7],[7,11,17,13],[13,17,22,18],[18,22,24,21],[21,24,23,20],[20,23,19,16],[16,19,14,10],[10,14,8,2],[15,9,13,18],[12,15,21,20],[6,12,16,10],[3,6,2,0],[9,3,1,7],[9,15,12,6,3],[22,17,11,5,4,8,14,19,23,24]]};var r,o,u,h,c,l,f=t.type&&(t.type<0||t.type>=e.length)?0:t.type||0,p=t.size,d=t.sizeX||p||1,y=t.sizeY||p||1,_=t.sizeZ||p||1,m=t.custom||e[f],v=m.face.length,g=t.faceUV||new Array(v),x=t.faceColors,b=void 0===t.flat||t.flat,P=0===t.sideOrientation?0:t.sideOrientation||a.x.DEFAULTSIDE,T=new Array,R=new Array,M=new Array,w=new Array,A=new Array,I=0,z=0,F=new Array,D=0,O=0;if(b)for(O=0;O<v;O++)x&&void 0===x[O]&&(x[O]=new i.HE(1,1,1,1)),g&&void 0===g[O]&&(g[O]=new n.Lt(0,0,1,1));if(b)for(O=0;O<v;O++){var C=m.face[O].length;for(u=2*Math.PI/C,h=.5*Math.tan(u/2),c=.5,D=0;D<C;D++)T.push(m.vertex[m.face[O][D]][0]*d,m.vertex[m.face[O][D]][1]*y,m.vertex[m.face[O][D]][2]*_),F.push(I),I++,r=g[O].x+(g[O].z-g[O].x)*(.5+h),o=g[O].y+(g[O].w-g[O].y)*(c-.5),w.push(r,s.e.UseOpenGLOrientationForUV?1-o:o),l=h*Math.cos(u)-c*Math.sin(u),c=h*Math.sin(u)+c*Math.cos(u),h=l,x&&A.push(x[O].r,x[O].g,x[O].b,x[O].a);for(D=0;D<C-2;D++)R.push(F[0+z],F[D+2+z],F[D+1+z]);z+=C}else{for(D=0;D<m.vertex.length;D++)T.push(m.vertex[D][0]*d,m.vertex[D][1]*y,m.vertex[D][2]*_),w.push(0,s.e.UseOpenGLOrientationForUV?1:0);for(O=0;O<v;O++)for(D=0;D<m.face[O].length-2;D++)R.push(m.face[O][0],m.face[O][D+2],m.face[O][D+1])}a.x.ComputeNormals(T,R,M),a.x._ComputeSides(P,T,R,M,w,t.frontUVs,t.backUVs);var S=new a.x;return S.positions=T,S.indices=R,S.normals=M,S.uvs=w,x&&b&&(S.colors=A),S}function h(t,e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=new o.Kj(t,r);return e.sideOrientation=o.Kj._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,u(e).applyToMesh(n,e.updatable),n}var c={CreatePolyhedron:h};a.x.CreatePolyhedron=u,o.Kj.CreatePolyhedron=function(t,e,r){return h(t,e,r)}},48236:(t,e,r)=>{r.d(e,{LY:()=>h,Ub:()=>c,jM:()=>u});var n=r(58095),i=r(91243),o=r(72208),a=r(89209),s=r(47884);function u(t){var e=t.pathArray,r=t.closeArray||!1,n=t.closePath||!1,i=t.invertUV||!1,u=Math.floor(e[0].length/2),h=t.offset||u;h=h>u?u:Math.floor(h);var c,l,f,p,d=0===t.sideOrientation?0:t.sideOrientation||a.x.DEFAULTSIDE,y=t.uvs,_=t.colors,m=[],v=[],g=[],x=[],b=[],P=[],T=[],R=[],M=[],w=[];if(e.length<2){var A=[],I=[];for(f=0;f<e[0].length-h;f++)A.push(e[0][f]),I.push(e[0][f+h]);e=[A,I]}var z,F,D,O,C,S=0,L=n?1:0;for(c=e[0].length,l=0;l<e.length;l++){for(T[l]=0,b[l]=[0],c=c<(F=(z=e[l]).length)?c:F,p=0;p<F;)m.push(z[p].x,z[p].y,z[p].z),p>0&&(D=z[p].subtract(z[p-1]).length()+T[l],b[l].push(D),T[l]=D),p++;n&&(p--,m.push(z[0].x,z[0].y,z[0].z),D=z[p].subtract(z[0]).length()+T[l],b[l].push(D),T[l]=D),M[l]=F+L,w[l]=S,S+=F+L}var V,j,E=null,U=null;for(f=0;f<c+L;f++){for(R[f]=0,P[f]=[0],l=0;l<e.length-1;l++)O=e[l],C=e[l+1],f===c?(E=O[0],U=C[0]):(E=O[f],U=C[f]),D=U.subtract(E).length()+R[f],P[f].push(D),R[f]=D;r&&U&&E&&(O=e[l],C=e[0],f===c&&(U=C[0]),D=U.subtract(E).length()+R[f],R[f]=D)}if(y)for(l=0;l<y.length;l++)x.push(y[l].x,s.e.UseOpenGLOrientationForUV?1-y[l].y:y[l].y);else for(l=0;l<e.length;l++)for(f=0;f<c+L;f++)V=0!=T[l]?b[l][f]/T[l]:0,j=0!=R[f]?P[f][l]/R[f]:0,i?x.push(j,V):x.push(V,s.e.UseOpenGLOrientationForUV?1-j:j);for(var N=0,B=M[l=0]-1,k=M[l+1]-1,K=B<k?B:k,H=w[1]-w[0],W=r?M.length:M.length-1;N<=K&&l<W;)v.push(N,N+H,N+1),v.push(N+H+1,N+1,N+H),(N+=1)===K&&(++l===M.length-1?(H=w[0]-w[l],B=M[l]-1,k=M[0]-1):(H=w[l+1]-w[l],B=M[l]-1,k=M[l+1]-1),N=w[l],K=B<k?B+N:k+N);if(a.x.ComputeNormals(m,v,g),n){var G=0,Z=0;for(l=0;l<e.length;l++)G=3*w[l],Z=l+1<e.length?3*(w[l+1]-1):g.length-3,g[G]=.5*(g[G]+g[Z]),g[G+1]=.5*(g[G+1]+g[Z+1]),g[G+2]=.5*(g[G+2]+g[Z+2]),g[Z]=g[G],g[Z+1]=g[G+1],g[Z+2]=g[G+2]}a.x._ComputeSides(d,m,v,g,x,t.frontUVs,t.backUVs);var Y=null;if(_){Y=new Float32Array(4*_.length);for(var q=0;q<_.length;q++)Y[4*q]=_[q].r,Y[4*q+1]=_[q].g,Y[4*q+2]=_[q].b,Y[4*q+3]=_[q].a}var Q=new a.x,X=new Float32Array(m),$=new Float32Array(g),J=new Float32Array(x);return Q.indices=v,Q.positions=X,Q.normals=$,Q.uvs=J,Y&&Q.set(Y,o.o.ColorKind),n&&(Q._idx=w),Q}function h(t,e,r){void 0===r&&(r=null);var h=e.pathArray,c=e.closeArray,l=e.closePath,f=i.Kj._GetDefaultSideOrientation(e.sideOrientation),p=e.instance,d=e.updatable;if(p){var y=n.jp.Vector3[0].setAll(Number.MAX_VALUE),_=n.jp.Vector3[1].setAll(-Number.MAX_VALUE),m=p.getVerticesData(o.o.PositionKind);if(function(t){for(var e=h[0].length,r=p,n=0,o=r._originalBuilderSideOrientation===i.Kj.DOUBLESIDE?2:1,a=1;a<=o;++a)for(var s=0;s<h.length;++s){var u=h[s],c=u.length;e=e<c?e:c;for(var l=0;l<e;++l){var f=u[l];t[n]=f.x,t[n+1]=f.y,t[n+2]=f.z,y.minimizeInPlaceFromFloats(f.x,f.y,f.z),_.maximizeInPlaceFromFloats(f.x,f.y,f.z),n+=3}if(r._creationDataStorage&&r._creationDataStorage.closePath){f=u[0];t[n]=f.x,t[n+1]=f.y,t[n+2]=f.z,n+=3}}}(m),p.hasBoundingInfo?p.getBoundingInfo().reConstruct(y,_,p._worldMatrix):p.buildBoundingInfo(y,_,p._worldMatrix),p.updateVerticesData(o.o.PositionKind,m,!1,!1),e.colors){for(var v=p.getVerticesData(o.o.ColorKind),g=0,x=0;g<e.colors.length;g++,x+=4){var b=e.colors[g];v[x]=b.r,v[x+1]=b.g,v[x+2]=b.b,v[x+3]=b.a}p.updateVerticesData(o.o.ColorKind,v,!1,!1)}if(e.uvs){for(var P=p.getVerticesData(o.o.UVKind),T=0;T<e.uvs.length;T++)P[2*T]=e.uvs[T].x,P[2*T+1]=s.e.UseOpenGLOrientationForUV?1-e.uvs[T].y:e.uvs[T].y;p.updateVerticesData(o.o.UVKind,P,!1,!1)}if(!p.areNormalsFrozen||p.isFacetDataEnabled){var R=p.getIndices(),M=p.getVerticesData(o.o.NormalKind),w=p.isFacetDataEnabled?p.getFacetDataParameters():null;if(a.x.ComputeNormals(m,R,M,w),p._creationDataStorage&&p._creationDataStorage.closePath)for(var A=0,I=0,z=0;z<h.length;z++)A=3*p._creationDataStorage.idx[z],I=z+1<h.length?3*(p._creationDataStorage.idx[z+1]-1):M.length-3,M[A]=.5*(M[A]+M[I]),M[A+1]=.5*(M[A+1]+M[I+1]),M[A+2]=.5*(M[A+2]+M[I+2]),M[I]=M[A],M[I+1]=M[A+1],M[I+2]=M[A+2];p.areNormalsFrozen||p.updateVerticesData(o.o.NormalKind,M,!1,!1)}return p}var F=new i.Kj(t,r);F._originalBuilderSideOrientation=f,F._creationDataStorage=new i.gW;var D=u(e);return l&&(F._creationDataStorage.idx=D._idx),F._creationDataStorage.closePath=l,F._creationDataStorage.closeArray=c,D.applyToMesh(F,d),F}var c={CreateRibbon:h};a.x.CreateRibbon=u,i.Kj.CreateRibbon=function(t,e,r,n,i,o,a,s,u){return void 0===r&&(r=!1),void 0===a&&(a=!1),h(t,{pathArray:e,closeArray:r,closePath:n,offset:i,updatable:a,sideOrientation:s,instance:u},o)}},75159:(t,e,r)=>{r.d(e,{Gc:()=>s,Oy:()=>c,bC:()=>u});var n=r(58095),i=r(91243),o=r(48236),a=r(74742);function s(t,e,r){void 0===r&&(r=null);var n=e.path,o=e.shape,a=e.scale||1,s=e.rotation||0,u=0===e.cap?0:e.cap||i.Kj.NO_CAP,c=e.updatable,l=i.Kj._GetDefaultSideOrientation(e.sideOrientation),f=e.instance||null,p=e.invertUV||!1,d=e.closeShape||!1;return h(t,o,n,a,s,null,null,e.closePath||!1,d,u,!1,r,!!c,l,f,p,e.frontUVs||null,e.backUVs||null)}function u(t,e,r){void 0===r&&(r=null);var n=e.path;return h(t,e.shape,n,null,null,e.scaleFunction||function(){return 1},e.rotationFunction||function(){return 0},e.closePath||e.ribbonCloseArray||!1,e.closeShape||e.ribbonClosePath||!1,0===e.cap?0:e.cap||i.Kj.NO_CAP,!0,r,!!e.updatable,i.Kj._GetDefaultSideOrientation(e.sideOrientation),e.instance||null,e.invertUV||!1,e.frontUVs||null,e.backUVs||null)}function h(t,e,r,s,u,h,c,l,f,p,d,y,_,m,v,g,x,b){var P,T,R=function(t,e,r,o,a,s,u,h,c,l){for(var f=r.getTangents(),p=r.getNormals(),d=r.getBinormals(),y=r.getDistances(),_=0,m=l&&h?h:function(){return null!==s?s:0},v=l&&u?u:function(){return null!==a?a:1},g=c===i.Kj.NO_CAP||c===i.Kj.CAP_END?0:2,x=n.jp.Matrix[0],b=0;b<e.length;b++){for(var P=new Array,T=m(b,y[b]),R=v(b,y[b]),M=0;M<t.length;M++){n.y3.RotationAxisToRef(f[b],_,x);var w=f[b].scale(t[M].z).add(p[b].scale(t[M].x)).add(d[b].scale(t[M].y)),A=P[M]?P[M]:n.P.Zero();n.P.TransformCoordinatesToRef(w,x,A),A.scaleInPlace(R).addInPlace(e[b]),P[M]=A}o[g]=P,_+=T,g++}var I=function(t){var e,r=Array(),i=n.P.Zero();for(e=0;e<t.length;e++)i.addInPlace(t[e]);for(i.scaleInPlace(1/t.length),e=0;e<t.length;e++)r.push(i);return r};switch(c){case i.Kj.NO_CAP:break;case i.Kj.CAP_START:o[0]=I(o[2]),o[1]=o[2];break;case i.Kj.CAP_END:o[g]=o[g-1],o[g+1]=I(o[g-1]);break;case i.Kj.CAP_ALL:o[0]=I(o[2]),o[1]=o[2],o[g]=o[g-1],o[g+1]=I(o[g-1])}return o};if(v){var M=v._creationDataStorage;return P=M.path3D.update(r),T=R(e,r,M.path3D,M.pathArray,s,u,h,c,M.cap,d),v=(0,o.LY)("",{pathArray:T,closeArray:!1,closePath:!1,offset:0,updatable:!1,sideOrientation:0,instance:v},y||void 0)}T=R(e,r,P=new a.$B(r),new Array,s,u,h,c,p=p<0||p>3?0:p,d);var w=(0,o.LY)(t,{pathArray:T,closeArray:l,closePath:f,updatable:_,sideOrientation:m,invertUV:g,frontUVs:x||void 0,backUVs:b||void 0},y);return w._creationDataStorage.pathArray=T,w._creationDataStorage.path3D=P,w._creationDataStorage.cap=p,w}var c={ExtrudeShape:s,ExtrudeShapeCustom:u};i.Kj.ExtrudeShape=function(t,e,r,n,o,a,u,h,c,l){return void 0===u&&(u=null),s(t,{shape:e,path:r,scale:n,rotation:o,cap:0===a?0:a||i.Kj.NO_CAP,sideOrientation:c,instance:l,updatable:h},u)},i.Kj.ExtrudeShapeCustom=function(t,e,r,n,o,a,s,h,c,l,f,p){return u(t,{shape:e,path:r,scaleFunction:n,rotationFunction:o,ribbonCloseArray:a,ribbonClosePath:s,cap:0===h?0:h||i.Kj.NO_CAP,sideOrientation:f,instance:p,updatable:l},c)}},48087:(t,e,r)=>{r.d(e,{A1:()=>h,Qk:()=>u,jY:()=>s});var n=r(58095),i=r(91243),o=r(89209),a=r(47884);function s(t){for(var e=t.segments||32,r=t.diameterX||t.diameter||1,i=t.diameterY||t.diameter||1,s=t.diameterZ||t.diameter||1,u=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1,h=t.slice&&t.slice<=0?1:t.slice||1,c=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE,l=!!t.dedupTopBottomIndices,f=new n.P(r/2,i/2,s/2),p=2+e,d=2*p,y=[],_=[],m=[],v=[],g=0;g<=p;g++){for(var x=g/p,b=x*Math.PI*h,P=0;P<=d;P++){var T=P/d,R=T*Math.PI*2*u,M=n.y3.RotationZ(-b),w=n.y3.RotationY(R),A=n.P.TransformCoordinates(n.P.Up(),M),I=n.P.TransformCoordinates(A,w),z=I.multiply(f),F=I.divide(f).normalize();_.push(z.x,z.y,z.z),m.push(F.x,F.y,F.z),v.push(T,a.e.UseOpenGLOrientationForUV?1-x:x)}if(g>0)for(var D=_.length/3,O=D-2*(d+1);O+d+2<D;O++)l?(g>1&&(y.push(O),y.push(O+1),y.push(O+d+1)),(g<p||h<1)&&(y.push(O+d+1),y.push(O+1),y.push(O+d+2))):(y.push(O),y.push(O+1),y.push(O+d+1),y.push(O+d+1),y.push(O+1),y.push(O+d+2))}o.x._ComputeSides(c,_,y,m,v,t.frontUVs,t.backUVs);var C=new o.x;return C.indices=y,C.positions=_,C.normals=m,C.uvs=v,C}function u(t,e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=new i.Kj(t,r);return e.sideOrientation=i.Kj._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,s(e).applyToMesh(n,e.updatable),n}var h={CreateSphere:u};o.x.CreateSphere=s,i.Kj.CreateSphere=function(t,e,r,n,i,o){return u(t,{segments:e,diameterX:r,diameterY:r,diameterZ:r,sideOrientation:o,updatable:i},n)}},10149:(t,e,r)=>{r.d(e,{Sc:()=>l,cQ:()=>c,qS:()=>h});var n=r(58095),i=r(15631),o=r(91243),a=r(89209),s=r(89234),u=r(47884);function h(t){for(var e=t.faceUV||new Array(6),r=t.faceColors,h=t.pattern||o.Kj.NO_FLIP,c=t.width||t.size||1,l=t.height||t.size||1,f=t.depth||t.size||1,p=t.tileWidth||t.tileSize||1,d=t.tileHeight||t.tileSize||1,y=t.alignHorizontal||0,_=t.alignVertical||0,m=0===t.sideOrientation?0:t.sideOrientation||a.x.DEFAULTSIDE,v=0;v<6;v++)void 0===e[v]&&(e[v]=new n.Lt(0,0,1,1)),r&&void 0===r[v]&&(r[v]=new i.HE(1,1,1,1));var g=c/2,x=l/2,b=f/2,P=[];for(v=0;v<2;v++)P[v]=(0,s.mm)({pattern:h,tileWidth:p,tileHeight:d,width:c,height:l,alignVertical:_,alignHorizontal:y,sideOrientation:m});for(v=2;v<4;v++)P[v]=(0,s.mm)({pattern:h,tileWidth:p,tileHeight:d,width:f,height:l,alignVertical:_,alignHorizontal:y,sideOrientation:m});var T=_;_===o.Kj.BOTTOM?T=o.Kj.TOP:_===o.Kj.TOP&&(T=o.Kj.BOTTOM);for(v=4;v<6;v++)P[v]=(0,s.mm)({pattern:h,tileWidth:p,tileHeight:d,width:c,height:f,alignVertical:T,alignHorizontal:y,sideOrientation:m});var R=[],M=[],w=[],A=[],I=[],z=[],F=[],D=[],O=0,C=0;for(v=0;v<6;v++){var S=P[v].positions.length;z[v]=[],F[v]=[];for(var L=0;L<S/3;L++)z[v].push(new n.P(P[v].positions[3*L],P[v].positions[3*L+1],P[v].positions[3*L+2])),F[v].push(new n.P(P[v].normals[3*L],P[v].normals[3*L+1],P[v].normals[3*L+2]));O=P[v].uvs.length,D[v]=[];for(var V=0;V<O;V+=2)D[v][V]=e[v].x+(e[v].z-e[v].x)*P[v].uvs[V],D[v][V+1]=e[v].y+(e[v].w-e[v].y)*P[v].uvs[V+1],u.e.UseOpenGLOrientationForUV&&(D[v][V+1]=1-D[v][V+1]);if(w=w.concat(D[v]),A=A.concat(P[v].indices.map((function(t){return t+C}))),C+=z[v].length,r)for(var j=0;j<4;j++)I.push(r[v].r,r[v].g,r[v].b,r[v].a)}var E=new n.P(0,0,b),U=n.y3.RotationY(Math.PI);R=z[0].map((function(t){return n.P.TransformNormal(t,U).add(E)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[]),M=F[0].map((function(t){return n.P.TransformNormal(t,U)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[]),R=R.concat(z[1].map((function(t){return t.subtract(E)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[])),M=M.concat(F[1].map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[]));var N=new n.P(g,0,0),B=n.y3.RotationY(-Math.PI/2);R=R.concat(z[2].map((function(t){return n.P.TransformNormal(t,B).add(N)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[])),M=M.concat(F[2].map((function(t){return n.P.TransformNormal(t,B)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[]));var k=n.y3.RotationY(Math.PI/2);R=R.concat(z[3].map((function(t){return n.P.TransformNormal(t,k).subtract(N)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[])),M=M.concat(F[3].map((function(t){return n.P.TransformNormal(t,k)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[]));var K=new n.P(0,x,0),H=n.y3.RotationX(Math.PI/2);R=R.concat(z[4].map((function(t){return n.P.TransformNormal(t,H).add(K)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[])),M=M.concat(F[4].map((function(t){return n.P.TransformNormal(t,H)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[]));var W=n.y3.RotationX(-Math.PI/2);R=R.concat(z[5].map((function(t){return n.P.TransformNormal(t,W).subtract(K)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[])),M=M.concat(F[5].map((function(t){return n.P.TransformNormal(t,W)})).map((function(t){return[t.x,t.y,t.z]})).reduce((function(t,e){return t.concat(e)}),[])),a.x._ComputeSides(m,R,A,M,w);var G=new a.x;if(G.indices=A,G.positions=R,G.normals=M,G.uvs=w,r){var Z=m===a.x.DOUBLESIDE?I.concat(I):I;G.colors=Z}return G}function c(t,e,r){void 0===r&&(r=null);var n=new o.Kj(t,r);return e.sideOrientation=o.Kj._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,h(e).applyToMesh(n,e.updatable),n}var l={CreateTiledBox:c};a.x.CreateTiledBox=h},89234:(t,e,r)=>{r.d(e,{KA:()=>a,P8:()=>s,mm:()=>o});var n=r(91243),i=r(89209);function o(t){var e=t.pattern||n.Kj.NO_FLIP,r=t.tileWidth||t.tileSize||1,o=t.tileHeight||t.tileSize||1,a=t.alignHorizontal||0,s=t.alignVertical||0,u=t.width||t.size||1,h=Math.floor(u/r),c=u-h*r,l=t.height||t.size||1,f=Math.floor(l/o),p=l-f*o,d=r*h/2,y=o*f/2,_=0,m=0,v=0,g=0,x=0,b=0;if(c>0||p>0){switch(v=-d,g=-y,x=d,b=y,a){case n.Kj.CENTER:v-=c/=2,x+=c;break;case n.Kj.LEFT:x+=c,_=-c/2;break;case n.Kj.RIGHT:v-=c,_=c/2}switch(s){case n.Kj.CENTER:g-=p/=2,b+=p;break;case n.Kj.BOTTOM:b+=p,m=-p/2;break;case n.Kj.TOP:g-=p,m=p/2}}var P=[],T=[],R=[];R[0]=[0,0,1,0,1,1,0,1],R[1]=[0,0,1,0,1,1,0,1],e!==n.Kj.ROTATE_TILE&&e!==n.Kj.ROTATE_ROW||(R[1]=[1,1,0,1,0,0,1,0]),e!==n.Kj.FLIP_TILE&&e!==n.Kj.FLIP_ROW||(R[1]=[1,0,0,0,0,1,1,1]),e!==n.Kj.FLIP_N_ROTATE_TILE&&e!==n.Kj.FLIP_N_ROTATE_ROW||(R[1]=[0,1,1,1,1,0,0,0]);for(var M=[],w=[],A=[],I=0,z=0;z<f;z++)for(var F=0;F<h;F++)P.push(F*r-d+_,z*o-y+m,0),P.push((F+1)*r-d+_,z*o-y+m,0),P.push((F+1)*r-d+_,(z+1)*o-y+m,0),P.push(F*r-d+_,(z+1)*o-y+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),M=e===n.Kj.FLIP_TILE||e===n.Kj.ROTATE_TILE||e===n.Kj.FLIP_N_ROTATE_TILE?M.concat(R[(F%2+z%2)%2]):e===n.Kj.FLIP_ROW||e===n.Kj.ROTATE_ROW||e===n.Kj.FLIP_N_ROTATE_ROW?M.concat(R[z%2]):M.concat(R[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1),I+=4;if(c>0||p>0){var D=p>0&&(s===n.Kj.CENTER||s===n.Kj.TOP),O=p>0&&(s===n.Kj.CENTER||s===n.Kj.BOTTOM),C=c>0&&(a===n.Kj.CENTER||a===n.Kj.RIGHT),S=c>0&&(a===n.Kj.CENTER||a===n.Kj.LEFT),L=[],V=void 0,j=void 0,E=void 0,U=void 0;if(D&&C&&(P.push(v+_,g+m,0),P.push(-d+_,g+m,0),P.push(-d+_,g+p+m,0),P.push(v+_,g+p+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,L=[V=1-c/r,j=1-p/o,E=1,j,E,U=1,V,U],e===n.Kj.ROTATE_ROW&&(L=[1-V,1-j,1-E,1-j,1-E,1-U,1-V,1-U]),e===n.Kj.FLIP_ROW&&(L=[1-V,j,1-E,j,1-E,U,1-V,U]),e===n.Kj.FLIP_N_ROTATE_ROW&&(L=[V,1-j,E,1-j,E,1-U,V,1-U]),M=M.concat(L),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),D&&S&&(P.push(d+_,g+m,0),P.push(x+_,g+m,0),P.push(x+_,g+p+m,0),P.push(d+_,g+p+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,L=[V=0,j=1-p/o,E=c/r,j,E,U=1,V,U],(e===n.Kj.ROTATE_ROW||e===n.Kj.ROTATE_TILE&&h%2==0)&&(L=[1-V,1-j,1-E,1-j,1-E,1-U,1-V,1-U]),(e===n.Kj.FLIP_ROW||e===n.Kj.FLIP_TILE&&h%2==0)&&(L=[1-V,j,1-E,j,1-E,U,1-V,U]),(e===n.Kj.FLIP_N_ROTATE_ROW||e===n.Kj.FLIP_N_ROTATE_TILE&&h%2==0)&&(L=[V,1-j,E,1-j,E,1-U,V,1-U]),M=M.concat(L),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),O&&C&&(P.push(v+_,y+m,0),P.push(-d+_,y+m,0),P.push(-d+_,b+m,0),P.push(v+_,b+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,L=[V=1-c/r,j=0,E=1,j,E,U=p/o,V,U],(e===n.Kj.ROTATE_ROW&&f%2==1||e===n.Kj.ROTATE_TILE&&f%1==0)&&(L=[1-V,1-j,1-E,1-j,1-E,1-U,1-V,1-U]),(e===n.Kj.FLIP_ROW&&f%2==1||e===n.Kj.FLIP_TILE&&f%2==0)&&(L=[1-V,j,1-E,j,1-E,U,1-V,U]),(e===n.Kj.FLIP_N_ROTATE_ROW&&f%2==1||e===n.Kj.FLIP_N_ROTATE_TILE&&f%2==0)&&(L=[V,1-j,E,1-j,E,1-U,V,1-U]),M=M.concat(L),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),O&&S&&(P.push(d+_,y+m,0),P.push(x+_,y+m,0),P.push(x+_,b+m,0),P.push(d+_,b+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,L=[V=0,j=0,E=c/r,j,E,U=p/o,V,U],(e===n.Kj.ROTATE_ROW&&f%2==1||e===n.Kj.ROTATE_TILE&&(f+h)%2==1)&&(L=[1-V,1-j,1-E,1-j,1-E,1-U,1-V,1-U]),(e===n.Kj.FLIP_ROW&&f%2==1||e===n.Kj.FLIP_TILE&&(f+h)%2==1)&&(L=[1-V,j,1-E,j,1-E,U,1-V,U]),(e===n.Kj.FLIP_N_ROTATE_ROW&&f%2==1||e===n.Kj.FLIP_N_ROTATE_TILE&&(f+h)%2==1)&&(L=[V,1-j,E,1-j,E,1-U,V,1-U]),M=M.concat(L),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)),D){var N=[];V=0,j=1-p/o,E=1,U=1,N[0]=[V,j,E,j,E,U,V,U],N[1]=[V,j,E,j,E,U,V,U],e!==n.Kj.ROTATE_TILE&&e!==n.Kj.ROTATE_ROW||(N[1]=[1-V,1-j,1-E,1-j,1-E,1-U,1-V,1-U]),e!==n.Kj.FLIP_TILE&&e!==n.Kj.FLIP_ROW||(N[1]=[1-V,j,1-E,j,1-E,U,1-V,U]),e!==n.Kj.FLIP_N_ROTATE_TILE&&e!==n.Kj.FLIP_N_ROTATE_ROW||(N[1]=[V,1-j,E,1-j,E,1-U,V,1-U]);for(F=0;F<h;F++)P.push(F*r-d+_,g+m,0),P.push((F+1)*r-d+_,g+m,0),P.push((F+1)*r-d+_,g+p+m,0),P.push(F*r-d+_,g+p+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,M=e===n.Kj.FLIP_TILE||e===n.Kj.ROTATE_TILE||e===n.Kj.FLIP_N_ROTATE_TILE?M.concat(N[(F+1)%2]):e===n.Kj.FLIP_ROW||e===n.Kj.ROTATE_ROW||e===n.Kj.FLIP_N_ROTATE_ROW?M.concat(N[1]):M.concat(N[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(O){var B=[];V=0,j=0,E=1,U=p/o,B[0]=[V,j,E,j,E,U,V,U],B[1]=[V,j,E,j,E,U,V,U],e!==n.Kj.ROTATE_TILE&&e!==n.Kj.ROTATE_ROW||(B[1]=[1-V,1-j,1-E,1-j,1-E,1-U,1-V,1-U]),e!==n.Kj.FLIP_TILE&&e!==n.Kj.FLIP_ROW||(B[1]=[1-V,j,1-E,j,1-E,U,1-V,U]),e!==n.Kj.FLIP_N_ROTATE_TILE&&e!==n.Kj.FLIP_N_ROTATE_ROW||(B[1]=[V,1-j,E,1-j,E,1-U,V,1-U]);for(F=0;F<h;F++)P.push(F*r-d+_,b-p+m,0),P.push((F+1)*r-d+_,b-p+m,0),P.push((F+1)*r-d+_,b+m,0),P.push(F*r-d+_,b+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,M=e===n.Kj.FLIP_TILE||e===n.Kj.ROTATE_TILE||e===n.Kj.FLIP_N_ROTATE_TILE?M.concat(B[(F+f)%2]):e===n.Kj.FLIP_ROW||e===n.Kj.ROTATE_ROW||e===n.Kj.FLIP_N_ROTATE_ROW?M.concat(B[f%2]):M.concat(B[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(C){var k=[];V=1-c/r,j=0,E=1,U=1,k[0]=[V,j,E,j,E,U,V,U],k[1]=[V,j,E,j,E,U,V,U],e!==n.Kj.ROTATE_TILE&&e!==n.Kj.ROTATE_ROW||(k[1]=[1-V,1-j,1-E,1-j,1-E,1-U,1-V,1-U]),e!==n.Kj.FLIP_TILE&&e!==n.Kj.FLIP_ROW||(k[1]=[1-V,j,1-E,j,1-E,U,1-V,U]),e!==n.Kj.FLIP_N_ROTATE_TILE&&e!==n.Kj.FLIP_N_ROTATE_ROW||(k[1]=[V,1-j,E,1-j,E,1-U,V,1-U]);for(z=0;z<f;z++)P.push(v+_,z*o-y+m,0),P.push(v+c+_,z*o-y+m,0),P.push(v+c+_,(z+1)*o-y+m,0),P.push(v+_,(z+1)*o-y+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,M=e===n.Kj.FLIP_TILE||e===n.Kj.ROTATE_TILE||e===n.Kj.FLIP_N_ROTATE_TILE?M.concat(k[(z+1)%2]):e===n.Kj.FLIP_ROW||e===n.Kj.ROTATE_ROW||e===n.Kj.FLIP_N_ROTATE_ROW?M.concat(k[z%2]):M.concat(k[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}if(S){var K=[];V=0,j=0,E=c/o,U=1,K[0]=[V,j,E,j,E,U,V,U],K[1]=[V,j,E,j,E,U,V,U],e!==n.Kj.ROTATE_TILE&&e!==n.Kj.ROTATE_ROW||(K[1]=[1-V,1-j,1-E,1-j,1-E,1-U,1-V,1-U]),e!==n.Kj.FLIP_TILE&&e!==n.Kj.FLIP_ROW||(K[1]=[1-V,j,1-E,j,1-E,U,1-V,U]),e!==n.Kj.FLIP_N_ROTATE_TILE&&e!==n.Kj.FLIP_N_ROTATE_ROW||(K[1]=[V,1-j,E,1-j,E,1-U,V,1-U]);for(z=0;z<f;z++)P.push(x-c+_,z*o-y+m,0),P.push(x+_,z*o-y+m,0),P.push(x+_,(z+1)*o-y+m,0),P.push(x-c+_,(z+1)*o-y+m,0),A.push(I,I+1,I+3,I+1,I+2,I+3),I+=4,M=e===n.Kj.FLIP_TILE||e===n.Kj.ROTATE_TILE||e===n.Kj.FLIP_N_ROTATE_TILE?M.concat(K[(z+h)%2]):e===n.Kj.FLIP_ROW||e===n.Kj.ROTATE_ROW||e===n.Kj.FLIP_N_ROTATE_ROW?M.concat(K[z%2]):M.concat(K[0]),w.push(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),T.push(0,0,-1,0,0,-1,0,0,-1,0,0,-1)}}var H=0===t.sideOrientation?0:t.sideOrientation||i.x.DEFAULTSIDE;i.x._ComputeSides(H,P,A,T,M,t.frontUVs,t.backUVs);var W=new i.x;W.indices=A,W.positions=P,W.normals=T,W.uvs=M;var G=H===i.x.DOUBLESIDE?w.concat(w):w;return W.colors=G,W}function a(t,e,r){void 0===r&&(r=null);var i=new n.Kj(t,r);return e.sideOrientation=n.Kj._GetDefaultSideOrientation(e.sideOrientation),i._originalBuilderSideOrientation=e.sideOrientation,o(e).applyToMesh(i,e.updatable),i}var s={CreateTiledPlane:a};i.x.CreateTiledPlane=o},49353:(t,e,r)=>{r.d(e,{eu:()=>u,h5:()=>s,t3:()=>h});var n=r(58095),i=r(91243),o=r(89209),a=r(47884);function s(t){for(var e=[],r=[],i=[],s=[],u=t.diameter||1,h=t.thickness||.5,c=t.tessellation||16,l=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE,f=c+1,p=0;p<=c;p++)for(var d=p/c,y=p*Math.PI*2/c-Math.PI/2,_=n.y3.Translation(u/2,0,0).multiply(n.y3.RotationY(y)),m=0;m<=c;m++){var v=1-m/c,g=m*Math.PI*2/c+Math.PI,x=Math.cos(g),b=Math.sin(g),P=new n.P(x,b,0),T=P.scale(h/2),R=new n.FM(d,v);T=n.P.TransformCoordinates(T,_),P=n.P.TransformNormal(P,_),r.push(T.x,T.y,T.z),i.push(P.x,P.y,P.z),s.push(R.x,a.e.UseOpenGLOrientationForUV?1-R.y:R.y);var M=(p+1)%f,w=(m+1)%f;e.push(p*f+m),e.push(p*f+w),e.push(M*f+m),e.push(p*f+w),e.push(M*f+w),e.push(M*f+m)}o.x._ComputeSides(l,r,e,i,s,t.frontUVs,t.backUVs);var A=new o.x;return A.indices=e,A.positions=r,A.normals=i,A.uvs=s,A}function u(t,e,r){void 0===e&&(e={});var n=new i.Kj(t,r);return e.sideOrientation=i.Kj._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,s(e).applyToMesh(n,e.updatable),n}var h={CreateTorus:u};o.x.CreateTorus=s,i.Kj.CreateTorus=function(t,e,r,n,i,o,a){return u(t,{diameter:e,thickness:r,tessellation:n,sideOrientation:a,updatable:o},i)}},93471:(t,e,r)=>{r.d(e,{SN:()=>h,eB:()=>u,i9:()=>s});var n=r(58095),i=r(91243),o=r(89209),a=r(47884);function s(t){var e,r,i=new Array,s=new Array,u=new Array,h=new Array,c=t.radius||2,l=t.tube||.5,f=t.radialSegments||32,p=t.tubularSegments||32,d=t.p||2,y=t.q||3,_=0===t.sideOrientation?0:t.sideOrientation||o.x.DEFAULTSIDE,m=function(t){var e=Math.cos(t),r=Math.sin(t),i=y/d*t,o=Math.cos(i),a=c*(2+o)*.5*e,s=c*(2+o)*r*.5,u=c*Math.sin(i)*.5;return new n.P(a,s,u)};for(e=0;e<=f;e++){var v=e%f/f*2*d*Math.PI,g=m(v),x=m(v+.01),b=x.subtract(g),P=x.add(g),T=n.P.Cross(b,P);for(P=n.P.Cross(T,b),T.normalize(),P.normalize(),r=0;r<p;r++){var R=r%p/p*2*Math.PI,M=-l*Math.cos(R),w=l*Math.sin(R);s.push(g.x+M*P.x+w*T.x),s.push(g.y+M*P.y+w*T.y),s.push(g.z+M*P.z+w*T.z),h.push(e/f),h.push(a.e.UseOpenGLOrientationForUV?1-r/p:r/p)}}for(e=0;e<f;e++)for(r=0;r<p;r++){var A=(r+1)%p,I=e*p+r,z=(e+1)*p+r,F=(e+1)*p+A,D=e*p+A;i.push(D),i.push(z),i.push(I),i.push(D),i.push(F),i.push(z)}o.x.ComputeNormals(s,i,u),o.x._ComputeSides(_,s,i,u,h,t.frontUVs,t.backUVs);var O=new o.x;return O.indices=i,O.positions=s,O.normals=u,O.uvs=h,O}function u(t,e,r){void 0===e&&(e={});var n=new i.Kj(t,r);return e.sideOrientation=i.Kj._GetDefaultSideOrientation(e.sideOrientation),n._originalBuilderSideOrientation=e.sideOrientation,s(e).applyToMesh(n,e.updatable),n}var h={CreateTorusKnot:u};o.x.CreateTorusKnot=s,i.Kj.CreateTorusKnot=function(t,e,r,n,i,o,a,s,h,c){return u(t,{radius:e,tube:r,radialSegments:n,tubularSegments:i,p:o,q:a,sideOrientation:c,updatable:h},s)}},42387:(t,e,r)=>{r.d(e,{F:()=>u,_:()=>s});var n=r(58095),i=r(91243),o=r(48236),a=r(74742);function s(t,e,r){void 0===r&&(r=null);var s=e.path,u=e.instance,h=1;void 0!==e.radius?h=e.radius:u&&(h=u._creationDataStorage.radius);var c=e.tessellation||64,l=e.radiusFunction||null,f=e.cap||i.Kj.NO_CAP,p=e.invertUV||!1,d=e.updatable,y=i.Kj._GetDefaultSideOrientation(e.sideOrientation);e.arc=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1;var _,m,v=function(t,e,r,o,a,s,u,h){for(var c,l,f,p,d=e.getTangents(),y=e.getNormals(),_=e.getDistances(),m=2*Math.PI/a*h,v=s||function(){return o},g=n.jp.Matrix[0],x=u===i.Kj.NO_CAP||u===i.Kj.CAP_END?0:2,b=0;b<t.length;b++){l=v(b,_[b]),c=Array(),f=y[b];for(var P=0;P<a;P++)n.y3.RotationAxisToRef(d[b],m*P,g),p=c[P]?c[P]:n.P.Zero(),n.P.TransformCoordinatesToRef(f,g,p),p.scaleInPlace(l).addInPlace(t[b]),c[P]=p;r[x]=c,x++}var T=function(e,r){for(var n=Array(),i=0;i<e;i++)n.push(t[r]);return n};switch(u){case i.Kj.NO_CAP:break;case i.Kj.CAP_START:r[0]=T(a,0),r[1]=r[2].slice(0);break;case i.Kj.CAP_END:r[x]=r[x-1].slice(0),r[x+1]=T(a,t.length-1);break;case i.Kj.CAP_ALL:r[0]=T(a,0),r[1]=r[2].slice(0),r[x]=r[x-1].slice(0),r[x+1]=T(a,t.length-1)}return r};if(u){var g=u._creationDataStorage,x=e.arc||g.arc;return m=v(s,_=g.path3D.update(s),g.pathArray,h,g.tessellation,l,g.cap,x),u=(0,o.LY)("",{pathArray:m,instance:u}),g.path3D=_,g.pathArray=m,g.arc=x,g.radius=h,u}m=v(s,_=new a.$B(s),new Array,h,c,l,f=f<0||f>3?0:f,e.arc);var b=(0,o.LY)(t,{pathArray:m,closePath:!0,closeArray:!1,updatable:d,sideOrientation:y,invertUV:p,frontUVs:e.frontUVs,backUVs:e.backUVs},r);return b._creationDataStorage.pathArray=m,b._creationDataStorage.path3D=_,b._creationDataStorage.tessellation=c,b._creationDataStorage.cap=f,b._creationDataStorage.arc=e.arc,b._creationDataStorage.radius=h,b}var u={CreateTube:s};i.Kj.CreateTube=function(t,e,r,n,i,o,a,u,h,c){return s(t,{path:e,radius:r,tessellation:n,radiusFunction:i,arc:1,cap:o,updatable:u,sideOrientation:h,instance:c},a)}},73848:(t,e,r)=>{r.d(e,{J:()=>u});var n=r(13514),i=r(11758),o=r(89209);function a(t,e,r,n,i,o){var a=new t.DecoderBuffer;a.Init(e,e.byteLength);var s,u,h=new t.Decoder;try{var c=h.GetEncodedGeometryType(a);switch(c){case t.TRIANGULAR_MESH:s=new t.Mesh,u=h.DecodeBufferToMesh(a,s);break;case t.POINT_CLOUD:s=new t.PointCloud,u=h.DecodeBufferToPointCloud(a,s);break;default:throw new Error("Invalid geometry type ".concat(c))}if(!u.ok()||!s.ptr)throw new Error(u.error_msg());if(c===t.TRIANGULAR_MESH){var l=3*s.num_faces(),f=4*l,p=t._malloc(f);try{h.GetTrianglesUInt32Array(s,f,p);var d=new Uint32Array(l);d.set(new Uint32Array(t.HEAPF32.buffer,p,l)),n(d)}finally{t._free(p)}}var y=function(e,r,n){void 0===n&&(n=1);var o=r.num_components(),a=s.num_points(),u=a*o,c=u*Float32Array.BYTES_PER_ELEMENT,l=t._malloc(c);try{h.GetAttributeDataArrayForAllPoints(s,r,t.DT_FLOAT32,c,l);var f=new Float32Array(t.HEAPF32.buffer,l,u);if("color"===e&&3===o){for(var p=new Float32Array(4*a),d=0,y=0;d<p.length;d+=4,y+=o)p[d+0]=f[y+0],p[d+1]=f[y+1],p[d+2]=f[y+2],p[d+3]=1;i(e,p)}else{if((p=new Float32Array(u)).set(new Float32Array(t.HEAPF32.buffer,l,u)),1!==n)for(d=0;d<p.length;d++)p[d]=p[d]/n;i(e,p)}}finally{t._free(l)}};if(r)for(var _ in r){var m=r[_];y(_,h.GetAttributeByUniqueId(s,m),o&&o[_]||1)}else{var v={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"};for(var _ in v){if(-1!==(m=h.GetAttributeId(s,t[v[_]])))y(_,h.GetAttribute(s,m))}}}finally{s&&t.destroy(s),t.destroy(h),t.destroy(a)}}function s(){var t;onmessage=function(e){var r=e.data;switch(r.id){case"init":var n=r.decoder;n.url&&(importScripts(n.url),t=DracoDecoderModule({wasmBinary:n.wasmBinary})),postMessage("done");break;case"decodeMesh":if(!t)throw new Error("Draco decoder module is not available");t.then((function(t){a(t,r.dataView,r.attributes,(function(t){postMessage({id:"indices",value:t},[t.buffer])}),(function(t,e){postMessage({id:t,value:e},[e.buffer])})),postMessage("done")}))}}}var u=function(){function t(e){void 0===e&&(e=t.DefaultNumWorkers);var r=t.Configuration.decoder,o=r.wasmUrl&&r.wasmBinaryUrl&&"object"==typeof WebAssembly?{url:n.w1.GetAbsoluteUrl(r.wasmUrl),wasmBinaryPromise:n.w1.LoadFileAsync(n.w1.GetAbsoluteUrl(r.wasmBinaryUrl))}:{url:n.w1.GetAbsoluteUrl(r.fallbackUrl),wasmBinaryPromise:Promise.resolve(void 0)};e&&"function"==typeof Worker?this._workerPoolPromise=o.wasmBinaryPromise.then((function(t){var r="".concat(a,"(").concat(s,")()"),n=URL.createObjectURL(new Blob([r],{type:"application/javascript"}));return new i.v(e,(function(){return new Promise((function(e,r){var i=new Worker(n),a=function(t){i.removeEventListener("error",a),i.removeEventListener("message",s),r(t)},s=function(t){"done"===t.data&&(i.removeEventListener("error",a),i.removeEventListener("message",s),e(i))};i.addEventListener("error",a),i.addEventListener("message",s),i.postMessage({id:"init",decoder:{url:o.url,wasmBinary:t}})}))}))})):this._decoderModulePromise=o.wasmBinaryPromise.then((function(t){if(!o.url)throw new Error("Draco decoder module is not available");return n.w1.LoadScriptAsync(o.url).then((function(){return e=t,new Promise((function(t){DracoDecoderModule({wasmBinary:e}).then((function(e){t({module:e})}))}));var e}))}))}return Object.defineProperty(t,"DecoderAvailable",{get:function(){var e=t.Configuration.decoder;return!!(e.wasmUrl&&e.wasmBinaryUrl&&"object"==typeof WebAssembly||e.fallbackUrl)},enumerable:!1,configurable:!0}),t.GetDefaultNumWorkers=function(){return"object"==typeof navigator&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),4):1},Object.defineProperty(t,"Default",{get:function(){return t._Default||(t._Default=new t),t._Default},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._workerPoolPromise&&this._workerPoolPromise.then((function(t){t.dispose()})),delete this._workerPoolPromise,delete this._decoderModulePromise},t.prototype.whenReadyAsync=function(){return this._workerPoolPromise?this._workerPoolPromise.then((function(){})):this._decoderModulePromise?this._decoderModulePromise.then((function(){})):Promise.resolve()},t.prototype.decodeMeshAsync=function(t,e,r){var n=t instanceof ArrayBuffer?new Uint8Array(t):t;if(this._workerPoolPromise)return this._workerPoolPromise.then((function(t){return new Promise((function(i,a){t.push((function(t,s){var u=new o.x,h=function(e){t.removeEventListener("error",h),t.removeEventListener("message",c),a(e),s()},c=function(e){if("done"===e.data)t.removeEventListener("error",h),t.removeEventListener("message",c),i(u),s();else if("indices"===e.data.id)u.indices=e.data.value;else{var n=r&&r[e.data.id]?r[e.data.id]:1;if(1!==n)for(var o=0;o<e.data.value.length;o++)e.data.value[o]=e.data.value[o]/n;u.set(e.data.value,e.data.id)}};t.addEventListener("error",h),t.addEventListener("message",c);var l=new Uint8Array(n.byteLength);l.set(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),t.postMessage({id:"decodeMesh",dataView:l,attributes:e},[l.buffer])}))}))}));if(this._decoderModulePromise)return this._decoderModulePromise.then((function(t){var i=new o.x;return a(t.module,n,e,(function(t){i.indices=t}),(function(t,e){i.set(e,t)}),r),i}));throw new Error("Draco decoder module is not available")},t.Configuration={decoder:{wasmUrl:"https://preview.babylonjs.com/draco_wasm_wrapper_gltf.js",wasmBinaryUrl:"https://preview.babylonjs.com/draco_decoder_gltf.wasm",fallbackUrl:"https://preview.babylonjs.com/draco_decoder_gltf.js"}},t.DefaultNumWorkers=t.GetDefaultNumWorkers(),t._Default=null,t}()},19488:(t,e,r)=>{r.d(e,{J:()=>n.J,K:()=>i.K});var n=r(73848),i=r(76304)},76304:(t,e,r)=>{r.d(e,{K:()=>i});var n=r(13514),i=function(){function t(){var e=t.Configuration.decoder;this._decoderModulePromise=n.w1.LoadScriptAsync(n.w1.GetAbsoluteUrl(e.url)).then((function(){return MeshoptDecoder.ready}))}return Object.defineProperty(t,"Default",{get:function(){return t._Default||(t._Default=new t),t._Default},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){delete this._decoderModulePromise},t.prototype.decodeGltfBufferAsync=function(t,e,r,n,i){return this._decoderModulePromise.then((function(){var o=new Uint8Array(e*r);return MeshoptDecoder.decodeGltfBuffer(o,e,r,t,n,i),o}))},t.Configuration={decoder:{url:"https://preview.babylonjs.com/meshopt_decoder.js"}},t._Default=null,t}()},21254:(t,e,r)=>{r.d(e,{M:()=>i});var n=r(31191),i=function(t){function e(e){var r=t.call(this)||this;return r._buffer=e,r}return(0,n.ZT)(e,t),Object.defineProperty(e.prototype,"underlyingResource",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),e}(r(41364).h)},84157:(t,e,r)=>{r.d(e,{C:()=>i});var n=r(31191),i=function(t){function e(e){var r=t.call(this)||this;return r._buffer=e,r}return(0,n.ZT)(e,t),Object.defineProperty(e.prototype,"underlyingResource",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),e}(r(41364).h)},71419:(t,e,r)=>{r.d(e,{x:()=>P});var n=r(31191),i=r(62897),o=r(58095),a=r(37290),s=r(72208),u=r(89209),h=r(30700),c=r(5292),l=r(91859),f=r(83353),p=r(72521),d=r(77851),y=r(93701),_=r(15631),m=r(48154),v=r(43048),g=r(48620),x=function(){this.facetNb=0,this.partitioningSubdivisions=10,this.partitioningBBoxRatio=1.01,this.facetDataEnabled=!1,this.facetParameters={},this.bbSize=o.P.Zero(),this.subDiv={max:1,X:1,Y:1,Z:1},this.facetDepthSort=!1,this.facetDepthSortEnabled=!1},b=function(){this._hasVertexAlpha=!1,this._useVertexColors=!0,this._numBoneInfluencers=4,this._applyFog=!0,this._receiveShadows=!1,this._facetData=new x,this._visibility=1,this._skeleton=null,this._layerMask=268435455,this._computeBonesUsingShaders=!0,this._isActive=!1,this._onlyForInstances=!1,this._isActiveIntermediate=!1,this._onlyForInstancesIntermediate=!1,this._actAsRegularMesh=!1,this._currentLOD=null,this._currentLODIsUpToDate=!1,this._collisionRetryCount=3,this._morphTargetManager=null,this._renderingGroupId=0,this._bakedVertexAnimationManager=null,this._material=null,this._positions=null,this._meshCollisionData=new p.a,this._enableDistantPicking=!1},P=function(t){function e(r,n){void 0===n&&(n=null);var s=t.call(this,r,n,!1)||this;return s._internalAbstractMeshDataInfo=new b,s._waitingMaterialId=null,s.cullingStrategy=e.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY,s.onCollideObservable=new i.y$,s.onCollisionPositionChangeObservable=new i.y$,s.onMaterialChangedObservable=new i.y$,s.definedFacingForward=!0,s._occlusionQuery=null,s._renderingGroup=null,s.alphaIndex=Number.MAX_VALUE,s.isVisible=!0,s.isPickable=!0,s.isNearPickable=!1,s.isNearGrabbable=!1,s.showSubMeshesBoundingBox=!1,s.isBlocker=!1,s.enablePointerMoveEvents=!1,s.outlineColor=_.Wo.Red(),s.outlineWidth=.02,s.overlayColor=_.Wo.Red(),s.overlayAlpha=.5,s.useOctreeForRenderingSelection=!0,s.useOctreeForPicking=!0,s.useOctreeForCollisions=!0,s.alwaysSelectAsActiveMesh=!1,s.doNotSyncBoundingInfo=!1,s.actionManager=null,s.ellipsoid=new o.P(.5,1,.5),s.ellipsoidOffset=new o.P(0,0,0),s.edgesWidth=1,s.edgesColor=new _.HE(1,0,0,1),s._edgesRenderer=null,s._masterMesh=null,s._boundingInfo=null,s._boundingInfoIsDirty=!0,s._renderId=0,s._intersectionsInProgress=new Array,s._unIndexed=!1,s._lightSources=new Array,s._waitingData={lods:null,actions:null,freezeWorldMatrix:null},s._bonesTransformMatrices=null,s._transformMatrixTexture=null,s.onRebuildObservable=new i.y$,s._onCollisionPositionChange=function(t,e,r){void 0===r&&(r=null),e.subtractToRef(s._internalAbstractMeshDataInfo._meshCollisionData._oldPositionForCollisions,s._internalAbstractMeshDataInfo._meshCollisionData._diffPositionForCollisions),s._internalAbstractMeshDataInfo._meshCollisionData._diffPositionForCollisions.length()>a.D.CollisionsEpsilon&&s.position.addInPlace(s._internalAbstractMeshDataInfo._meshCollisionData._diffPositionForCollisions),r&&s.onCollideObservable.notifyObservers(r),s.onCollisionPositionChangeObservable.notifyObservers(s.position)},s.getScene().addMesh(s),s._resyncLightSources(),s._uniformBuffer=new f.M(s.getScene().getEngine(),void 0,void 0,r,!s.getScene().getEngine().isWebGPU),s._buildUniformLayout(),s}return(0,n.ZT)(e,t),Object.defineProperty(e,"BILLBOARDMODE_NONE",{get:function(){return h.Y.BILLBOARDMODE_NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BILLBOARDMODE_X",{get:function(){return h.Y.BILLBOARDMODE_X},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BILLBOARDMODE_Y",{get:function(){return h.Y.BILLBOARDMODE_Y},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BILLBOARDMODE_Z",{get:function(){return h.Y.BILLBOARDMODE_Z},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BILLBOARDMODE_ALL",{get:function(){return h.Y.BILLBOARDMODE_ALL},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BILLBOARDMODE_USE_POSITION",{get:function(){return h.Y.BILLBOARDMODE_USE_POSITION},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"facetNb",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetNb},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"partitioningSubdivisions",{get:function(){return this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions},set:function(t){this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"partitioningBBoxRatio",{get:function(){return this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio},set:function(t){this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mustDepthSortFacets",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDepthSort},set:function(t){this._internalAbstractMeshDataInfo._facetData.facetDepthSort=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"facetDepthSortFrom",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom},set:function(t){this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collisionRetryCount",{get:function(){return this._internalAbstractMeshDataInfo._collisionRetryCount},set:function(t){this._internalAbstractMeshDataInfo._collisionRetryCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFacetDataEnabled",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDataEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"morphTargetManager",{get:function(){return this._internalAbstractMeshDataInfo._morphTargetManager},set:function(t){this._internalAbstractMeshDataInfo._morphTargetManager!==t&&(this._internalAbstractMeshDataInfo._morphTargetManager=t,this._syncGeometryWithMorphTargetManager())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bakedVertexAnimationManager",{get:function(){return this._internalAbstractMeshDataInfo._bakedVertexAnimationManager},set:function(t){this._internalAbstractMeshDataInfo._bakedVertexAnimationManager!==t&&(this._internalAbstractMeshDataInfo._bakedVertexAnimationManager=t,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),e.prototype._syncGeometryWithMorphTargetManager=function(){},e.prototype._updateNonUniformScalingState=function(e){return!!t.prototype._updateNonUniformScalingState.call(this,e)&&(this._markSubMeshesAsMiscDirty(),!0)},Object.defineProperty(e.prototype,"onCollide",{set:function(t){this._internalAbstractMeshDataInfo._meshCollisionData._onCollideObserver&&this.onCollideObservable.remove(this._internalAbstractMeshDataInfo._meshCollisionData._onCollideObserver),this._internalAbstractMeshDataInfo._meshCollisionData._onCollideObserver=this.onCollideObservable.add(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCollisionPositionChange",{set:function(t){this._internalAbstractMeshDataInfo._meshCollisionData._onCollisionPositionChangeObserver&&this.onCollisionPositionChangeObservable.remove(this._internalAbstractMeshDataInfo._meshCollisionData._onCollisionPositionChangeObserver),this._internalAbstractMeshDataInfo._meshCollisionData._onCollisionPositionChangeObserver=this.onCollisionPositionChangeObservable.add(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibility",{get:function(){return this._internalAbstractMeshDataInfo._visibility},set:function(t){if(this._internalAbstractMeshDataInfo._visibility!==t){var e=this._internalAbstractMeshDataInfo._visibility;this._internalAbstractMeshDataInfo._visibility=t,(1===e&&1!==t||1!==e&&1===t)&&this._markSubMeshesAsMiscDirty()}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderingGroupId",{get:function(){return this._internalAbstractMeshDataInfo._renderingGroupId},set:function(t){this._internalAbstractMeshDataInfo._renderingGroupId=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this._internalAbstractMeshDataInfo._material},set:function(t){this._internalAbstractMeshDataInfo._material!==t&&(this._internalAbstractMeshDataInfo._material&&this._internalAbstractMeshDataInfo._material.meshMap&&(this._internalAbstractMeshDataInfo._material.meshMap[this.uniqueId]=void 0),this._internalAbstractMeshDataInfo._material=t,t&&t.meshMap&&(t.meshMap[this.uniqueId]=this),this.onMaterialChangedObservable.hasObservers()&&this.onMaterialChangedObservable.notifyObservers(this),this.subMeshes&&(this.resetDrawCache(),this._unBindEffect()))},enumerable:!1,configurable:!0}),e.prototype.getMaterialForRenderPass=function(t){var e;return null===(e=this._internalAbstractMeshDataInfo._materialForRenderPass)||void 0===e?void 0:e[t]},e.prototype.setMaterialForRenderPass=function(t,e){this.resetDrawCache(t),this._internalAbstractMeshDataInfo._materialForRenderPass||(this._internalAbstractMeshDataInfo._materialForRenderPass=[]),this._internalAbstractMeshDataInfo._materialForRenderPass[t]=e},Object.defineProperty(e.prototype,"receiveShadows",{get:function(){return this._internalAbstractMeshDataInfo._receiveShadows},set:function(t){this._internalAbstractMeshDataInfo._receiveShadows!==t&&(this._internalAbstractMeshDataInfo._receiveShadows=t,this._markSubMeshesAsLightDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasVertexAlpha",{get:function(){return this._internalAbstractMeshDataInfo._hasVertexAlpha},set:function(t){this._internalAbstractMeshDataInfo._hasVertexAlpha!==t&&(this._internalAbstractMeshDataInfo._hasVertexAlpha=t,this._markSubMeshesAsAttributesDirty(),this._markSubMeshesAsMiscDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useVertexColors",{get:function(){return this._internalAbstractMeshDataInfo._useVertexColors},set:function(t){this._internalAbstractMeshDataInfo._useVertexColors!==t&&(this._internalAbstractMeshDataInfo._useVertexColors=t,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"computeBonesUsingShaders",{get:function(){return this._internalAbstractMeshDataInfo._computeBonesUsingShaders},set:function(t){this._internalAbstractMeshDataInfo._computeBonesUsingShaders!==t&&(this._internalAbstractMeshDataInfo._computeBonesUsingShaders=t,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numBoneInfluencers",{get:function(){return this._internalAbstractMeshDataInfo._numBoneInfluencers},set:function(t){this._internalAbstractMeshDataInfo._numBoneInfluencers!==t&&(this._internalAbstractMeshDataInfo._numBoneInfluencers=t,this._markSubMeshesAsAttributesDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"applyFog",{get:function(){return this._internalAbstractMeshDataInfo._applyFog},set:function(t){this._internalAbstractMeshDataInfo._applyFog!==t&&(this._internalAbstractMeshDataInfo._applyFog=t,this._markSubMeshesAsMiscDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableDistantPicking",{get:function(){return this._internalAbstractMeshDataInfo._enableDistantPicking},set:function(t){this._internalAbstractMeshDataInfo._enableDistantPicking=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerMask",{get:function(){return this._internalAbstractMeshDataInfo._layerMask},set:function(t){t!==this._internalAbstractMeshDataInfo._layerMask&&(this._internalAbstractMeshDataInfo._layerMask=t,this._resyncLightSources())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collisionMask",{get:function(){return this._internalAbstractMeshDataInfo._meshCollisionData._collisionMask},set:function(t){this._internalAbstractMeshDataInfo._meshCollisionData._collisionMask=isNaN(t)?-1:t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collisionResponse",{get:function(){return this._internalAbstractMeshDataInfo._meshCollisionData._collisionResponse},set:function(t){this._internalAbstractMeshDataInfo._meshCollisionData._collisionResponse=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collisionGroup",{get:function(){return this._internalAbstractMeshDataInfo._meshCollisionData._collisionGroup},set:function(t){this._internalAbstractMeshDataInfo._meshCollisionData._collisionGroup=isNaN(t)?-1:t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"surroundingMeshes",{get:function(){return this._internalAbstractMeshDataInfo._meshCollisionData._surroundingMeshes},set:function(t){this._internalAbstractMeshDataInfo._meshCollisionData._surroundingMeshes=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lightSources",{get:function(){return this._lightSources},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_positions",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skeleton",{get:function(){return this._internalAbstractMeshDataInfo._skeleton},set:function(t){var e=this._internalAbstractMeshDataInfo._skeleton;e&&e.needInitialSkinMatrix&&e._unregisterMeshWithPoseMatrix(this),t&&t.needInitialSkinMatrix&&t._registerMeshWithPoseMatrix(this),this._internalAbstractMeshDataInfo._skeleton=t,this._internalAbstractMeshDataInfo._skeleton||(this._bonesTransformMatrices=null),this._markSubMeshesAsAttributesDirty()},enumerable:!1,configurable:!0}),e.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("world",16),this._uniformBuffer.addUniform("visibility",1),this._uniformBuffer.create()},e.prototype.transferToEffect=function(t){var e=this._uniformBuffer;e.updateMatrix("world",t),e.updateFloat("visibility",this._internalAbstractMeshDataInfo._visibility),e.update()},e.prototype.getMeshUniformBuffer=function(){return this._uniformBuffer},e.prototype.getClassName=function(){return"AbstractMesh"},e.prototype.toString=function(t){var e="Name: "+this.name+", isInstance: "+("InstancedMesh"!==this.getClassName()?"YES":"NO");e+=", # of submeshes: "+(this.subMeshes?this.subMeshes.length:0);var r=this._internalAbstractMeshDataInfo._skeleton;return r&&(e+=", skeleton: "+r.name),t&&(e+=", billboard mode: "+["NONE","X","Y",null,"Z",null,null,"ALL"][this.billboardMode],e+=", freeze wrld mat: "+(this._isWorldMatrixFrozen||this._waitingData.freezeWorldMatrix?"YES":"NO")),e},e.prototype._getEffectiveParent=function(){return this._masterMesh&&this.billboardMode!==h.Y.BILLBOARDMODE_NONE?this._masterMesh:t.prototype._getEffectiveParent.call(this)},e.prototype._getActionManagerForTrigger=function(t,e){if(void 0===e&&(e=!0),this.actionManager&&(e||this.actionManager.isRecursive)){if(!t)return this.actionManager;if(this.actionManager.hasSpecificTrigger(t))return this.actionManager}return this.parent?this.parent._getActionManagerForTrigger(t,!1):null},e.prototype._rebuild=function(t){if(void 0===t&&(t=!1),this.onRebuildObservable.notifyObservers(this),null!==this._occlusionQuery&&(this._occlusionQuery=null),this.subMeshes)for(var e=0,r=this.subMeshes;e<r.length;e++){r[e]._rebuild()}},e.prototype._resyncLightSources=function(){this._lightSources.length=0;for(var t=0,e=this.getScene().lights;t<e.length;t++){var r=e[t];r.isEnabled()&&(r.canAffectMesh(this)&&this._lightSources.push(r))}this._markSubMeshesAsLightDirty()},e.prototype._resyncLightSource=function(t){var e=t.isEnabled()&&t.canAffectMesh(this),r=this._lightSources.indexOf(t),n=!1;if(-1===r){if(!e)return;this._lightSources.push(t)}else{if(e)return;n=!0,this._lightSources.splice(r,1)}this._markSubMeshesAsLightDirty(n)},e.prototype._unBindEffect=function(){for(var t=0,e=this.subMeshes;t<e.length;t++){e[t].setEffect(null)}},e.prototype._removeLightSource=function(t,e){var r=this._lightSources.indexOf(t);-1!==r&&(this._lightSources.splice(r,1),this._markSubMeshesAsLightDirty(e))},e.prototype._markSubMeshesAsDirty=function(t){if(this.subMeshes)for(var e=0,r=this.subMeshes;e<r.length;e++)for(var n=r[e],i=0;i<n._drawWrappers.length;++i){var o=n._drawWrappers[i];o&&o.defines&&o.defines.markAllAsDirty&&t(o.defines)}},e.prototype._markSubMeshesAsLightDirty=function(t){void 0===t&&(t=!1),this._markSubMeshesAsDirty((function(e){return e.markAsLightDirty(t)}))},e.prototype._markSubMeshesAsAttributesDirty=function(){this._markSubMeshesAsDirty((function(t){return t.markAsAttributesDirty()}))},e.prototype._markSubMeshesAsMiscDirty=function(){this._markSubMeshesAsDirty((function(t){return t.markAsMiscDirty()}))},e.prototype.markAsDirty=function(t){return this._currentRenderId=Number.MAX_VALUE,this._isDirty=!0,this},e.prototype.resetDrawCache=function(t){if(this.subMeshes)for(var e=0,r=this.subMeshes;e<r.length;e++){r[e].resetDrawCache(t)}},Object.defineProperty(e.prototype,"isBlocked",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.getLOD=function(t){return this},e.prototype.getTotalVertices=function(){return 0},e.prototype.getTotalIndices=function(){return 0},e.prototype.getIndices=function(){return null},e.prototype.getVerticesData=function(t){return null},e.prototype.setVerticesData=function(t,e,r,n){return this},e.prototype.updateVerticesData=function(t,e,r,n){return this},e.prototype.setIndices=function(t,e){return this},e.prototype.isVerticesDataPresent=function(t){return!1},e.prototype.getBoundingInfo=function(){return this._masterMesh?this._masterMesh.getBoundingInfo():(this._boundingInfoIsDirty&&(this._boundingInfoIsDirty=!1,this._updateBoundingInfo()),this._boundingInfo)},e.prototype.setBoundingInfo=function(t){return this._boundingInfo=t,this},Object.defineProperty(e.prototype,"hasBoundingInfo",{get:function(){return null!==this._boundingInfo},enumerable:!1,configurable:!0}),e.prototype.buildBoundingInfo=function(t,e,r){return this._boundingInfo=new l.j(t,e,r),this._boundingInfo},e.prototype.normalizeToUnitCube=function(e,r,n){return void 0===e&&(e=!0),void 0===r&&(r=!1),t.prototype.normalizeToUnitCube.call(this,e,r,n)},Object.defineProperty(e.prototype,"useBones",{get:function(){return this.skeleton&&this.getScene().skeletonsEnabled&&this.isVerticesDataPresent(s.o.MatricesIndicesKind)&&this.isVerticesDataPresent(s.o.MatricesWeightsKind)},enumerable:!1,configurable:!0}),e.prototype._preActivate=function(){},e.prototype._preActivateForIntermediateRendering=function(t){},e.prototype._activate=function(t,e){return this._renderId=t,!0},e.prototype._postActivate=function(){},e.prototype._freeze=function(){},e.prototype._unFreeze=function(){},e.prototype.getWorldMatrix=function(){return this._masterMesh&&this.billboardMode===h.Y.BILLBOARDMODE_NONE?this._masterMesh.getWorldMatrix():t.prototype.getWorldMatrix.call(this)},e.prototype._getWorldMatrixDeterminant=function(){return this._masterMesh?this._masterMesh._getWorldMatrixDeterminant():t.prototype._getWorldMatrixDeterminant.call(this)},Object.defineProperty(e.prototype,"isAnInstance",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasInstances",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasThinInstances",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.movePOV=function(t,e,r){return this.position.addInPlace(this.calcMovePOV(t,e,r)),this},e.prototype.calcMovePOV=function(t,e,r){var n=new o.y3;(this.rotationQuaternion?this.rotationQuaternion:o._f.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z)).toRotationMatrix(n);var i=o.P.Zero(),a=this.definedFacingForward?-1:1;return o.P.TransformCoordinatesFromFloatsToRef(t*a,e,r*a,n,i),i},e.prototype.rotatePOV=function(t,e,r){return this.rotation.addInPlace(this.calcRotatePOV(t,e,r)),this},e.prototype.calcRotatePOV=function(t,e,r){var n=this.definedFacingForward?1:-1;return new o.P(t*n,e,r*n)},e.prototype.refreshBoundingInfo=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this._boundingInfo&&this._boundingInfo.isLocked||this._refreshBoundingInfo(this._getPositionData(t,e),null),this},e.prototype._refreshBoundingInfo=function(t,e){if(t){var r=(0,y.k)(t,0,this.getTotalVertices(),e);this._boundingInfo?this._boundingInfo.reConstruct(r.minimum,r.maximum):this._boundingInfo=new l.j(r.minimum,r.maximum)}if(this.subMeshes)for(var n=0;n<this.subMeshes.length;n++)this.subMeshes[n].refreshBoundingInfo(t);this._updateBoundingInfo()},e.prototype._getData=function(t,e,r,n){if(void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=s.o.PositionKind),(r=null!=r?r:this.getVerticesData(n).slice())&&e&&this.morphTargetManager)for(var i=0,a=0,u=0;u<r.length;u++){for(var h=0;h<this.morphTargetManager.numTargets;h++){var c=this.morphTargetManager.getTarget(h),l=c.influence;if(l>0){var f=c.getPositions();f&&(r[u]+=(f[u]-r[u])*l)}}if(i++,n===s.o.PositionKind&&this._positions&&3===i){i=0;var p=3*a;this._positions[a++].copyFromFloats(r[p],r[p+1],r[p+2])}}if(r&&t&&this.skeleton){var d=this.getVerticesData(s.o.MatricesIndicesKind),y=this.getVerticesData(s.o.MatricesWeightsKind);if(y&&d){var _=this.numBoneInfluencers>4,m=_?this.getVerticesData(s.o.MatricesIndicesExtraKind):null,v=_?this.getVerticesData(s.o.MatricesWeightsExtraKind):null,g=this.skeleton.getTransformMatrices(this),x=o.jp.Vector3[0],b=o.jp.Matrix[0],P=o.jp.Matrix[1],T=0;for(p=0;p<r.length;p+=3,T+=4){b.reset();var R=void 0,M=void 0;for(R=0;R<4;R++)(M=y[T+R])>0&&(o.y3.FromFloat32ArrayToRefScaled(g,Math.floor(16*d[T+R]),M,P),b.addToSelf(P));if(_)for(R=0;R<4;R++)(M=v[T+R])>0&&(o.y3.FromFloat32ArrayToRefScaled(g,Math.floor(16*m[T+R]),M,P),b.addToSelf(P));n===s.o.NormalKind?o.P.TransformNormalFromFloatsToRef(r[p],r[p+1],r[p+2],b,x):o.P.TransformCoordinatesFromFloatsToRef(r[p],r[p+1],r[p+2],b,x),x.toArray(r,p),n===s.o.PositionKind&&this._positions&&this._positions[p/3].copyFrom(x)}}}return r},e.prototype.getNormalsData=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this._getData(t,e,null,s.o.NormalKind)},e.prototype.getPositionData=function(t,e,r){return void 0===t&&(t=!1),void 0===e&&(e=!1),this._getData(t,e,r,s.o.PositionKind)},e.prototype._getPositionData=function(t,e){var r,n=this.getVerticesData(s.o.PositionKind);if(this._internalAbstractMeshDataInfo._positions&&(this._internalAbstractMeshDataInfo._positions=null),n&&(t&&this.skeleton||e&&this.morphTargetManager)){if(n=n.slice(),this._generatePointsArray(),this._positions){var i=this._positions;this._internalAbstractMeshDataInfo._positions=new Array(i.length);for(var a=0;a<i.length;a++)this._internalAbstractMeshDataInfo._positions[a]=(null===(r=i[a])||void 0===r?void 0:r.clone())||new o.P}return this.getPositionData(t,e,n)}return n},e.prototype._updateBoundingInfo=function(){return this._boundingInfo?this._boundingInfo.update(this.worldMatrixFromCache):this._boundingInfo=new l.j(o.P.Zero(),o.P.Zero(),this.worldMatrixFromCache),this._updateSubMeshesBoundingInfo(this.worldMatrixFromCache),this},e.prototype._updateSubMeshesBoundingInfo=function(t){if(!this.subMeshes)return this;for(var e=this.subMeshes.length,r=0;r<e;r++){var n=this.subMeshes[r];(e>1||!n.IsGlobal)&&n.updateBoundingInfo(t)}return this},e.prototype._afterComputeWorldMatrix=function(){this.doNotSyncBoundingInfo||(this._boundingInfoIsDirty=!0)},e.prototype.isInFrustum=function(t){return this.getBoundingInfo().isInFrustum(t,this.cullingStrategy)},e.prototype.isCompletelyInFrustum=function(t){return this.getBoundingInfo().isCompletelyInFrustum(t)},e.prototype.intersectsMesh=function(t,e,r){void 0===e&&(e=!1);var n=this.getBoundingInfo(),i=t.getBoundingInfo();if(n.intersects(i,e))return!0;if(r)for(var o=0,a=this.getChildMeshes();o<a.length;o++){if(a[o].intersectsMesh(t,e,!0))return!0}return!1},e.prototype.intersectsPoint=function(t){return this.getBoundingInfo().intersectsPoint(t)},Object.defineProperty(e.prototype,"checkCollisions",{get:function(){return this._internalAbstractMeshDataInfo._meshCollisionData._checkCollisions},set:function(t){this._internalAbstractMeshDataInfo._meshCollisionData._checkCollisions=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"collider",{get:function(){return this._internalAbstractMeshDataInfo._meshCollisionData._collider},enumerable:!1,configurable:!0}),e.prototype.moveWithCollisions=function(t){this.getAbsolutePosition().addToRef(this.ellipsoidOffset,this._internalAbstractMeshDataInfo._meshCollisionData._oldPositionForCollisions);var e=this.getScene().collisionCoordinator;return this._internalAbstractMeshDataInfo._meshCollisionData._collider||(this._internalAbstractMeshDataInfo._meshCollisionData._collider=e.createCollider()),this._internalAbstractMeshDataInfo._meshCollisionData._collider._radius=this.ellipsoid,e.getNewPosition(this._internalAbstractMeshDataInfo._meshCollisionData._oldPositionForCollisions,t,this._internalAbstractMeshDataInfo._meshCollisionData._collider,this.collisionRetryCount,this,this._onCollisionPositionChange,this.uniqueId),this},e.prototype._collideForSubMesh=function(t,e,r){var n;if(this._generatePointsArray(),!this._positions)return this;if(!t._lastColliderWorldVertices||!t._lastColliderTransformMatrix.equals(e)){t._lastColliderTransformMatrix=e.clone(),t._lastColliderWorldVertices=[],t._trianglePlanes=[];for(var i=t.verticesStart,a=t.verticesStart+t.verticesCount,s=i;s<a;s++)t._lastColliderWorldVertices.push(o.P.TransformCoordinates(this._positions[s],e))}return r._collide(t._trianglePlanes,t._lastColliderWorldVertices,this.getIndices(),t.indexStart,t.indexStart+t.indexCount,t.verticesStart,!!t.getMaterial(),this,this._shouldConvertRHS(),7===(null===(n=t.getMaterial())||void 0===n?void 0:n.fillMode)),this},e.prototype._processCollisionsForSubMeshes=function(t,e){for(var r=this._scene.getCollidingSubMeshCandidates(this,t),n=r.length,i=0;i<n;i++){var o=r.data[i];n>1&&!o._checkCollision(t)||this._collideForSubMesh(o,e,t)}return this},e.prototype._shouldConvertRHS=function(){return!1},e.prototype._checkCollision=function(t){if(!this.getBoundingInfo()._checkCollision(t))return this;var e=o.jp.Matrix[0],r=o.jp.Matrix[1];return o.y3.ScalingToRef(1/t._radius.x,1/t._radius.y,1/t._radius.z,e),this.worldMatrixFromCache.multiplyToRef(e,r),this._processCollisionsForSubMeshes(t,r),this},e.prototype._generatePointsArray=function(){return!1},e.prototype.intersects=function(t,e,r,n,i,a){void 0===n&&(n=!1),void 0===a&&(a=!1);var s=new c.p,u="InstancedLinesMesh"===this.getClassName()||"LinesMesh"===this.getClassName()?this.intersectionThreshold:0,h=this.getBoundingInfo();if(!this.subMeshes)return s;if(!(a||t.intersectsSphere(h.boundingSphere,u)&&t.intersectsBox(h.boundingBox,u)))return s;if(n)return s.hit=!a,s.pickedMesh=a?null:this,s.distance=a?0:o.P.Distance(t.origin,h.boundingSphere.center),s.subMeshId=0,s;if(!this._generatePointsArray())return s;for(var l=null,f=this._scene.getIntersectingSubMeshCandidates(this,t),p=f.length,d=!1,y=0;y<p;y++){var _=(m=f.data[y]).getMaterial();if(_&&(7==_.fillMode||0==_.fillMode||1==_.fillMode||2==_.fillMode||4==_.fillMode)){d=!0;break}}if(!d)return s.hit=!0,s.pickedMesh=this,s.distance=o.P.Distance(t.origin,h.boundingSphere.center),s.subMeshId=-1,s;for(y=0;y<p;y++){var m=f.data[y];if(!(p>1)||m.canIntersects(t)){var v=m.intersects(t,this._positions,this.getIndices(),e,r);if(v&&(e||!l||v.distance<l.distance)&&((l=v).subMeshId=y,e))break}}if(l){var g=null!=i?i:this.getWorldMatrix(),x=o.jp.Vector3[0],b=o.jp.Vector3[1];o.P.TransformCoordinatesToRef(t.origin,g,x),t.direction.scaleToRef(l.distance,b);var P=o.P.TransformNormal(b,g).addInPlace(x);return s.hit=!0,s.distance=o.P.Distance(x,P),s.pickedPoint=P,s.pickedMesh=this,s.bu=l.bu||0,s.bv=l.bv||0,s.subMeshFaceId=l.faceId,s.faceId=l.faceId+f.data[l.subMeshId].indexStart/(-1!==this.getClassName().indexOf("LinesMesh")?2:3),s.subMeshId=l.subMeshId,s}return s},e.prototype.clone=function(t,e,r){return null},e.prototype.releaseSubMeshes=function(){if(this.subMeshes)for(;this.subMeshes.length;)this.subMeshes[0].dispose();else this.subMeshes=new Array;return this},e.prototype.dispose=function(e,r){var n,i=this;for(void 0===r&&(r=!1),this._scene.useMaterialMeshMap&&this._internalAbstractMeshDataInfo._material&&this._internalAbstractMeshDataInfo._material.meshMap&&(this._internalAbstractMeshDataInfo._material.meshMap[this.uniqueId]=void 0),this.getScene().freeActiveMeshes(),this.getScene().freeRenderingGroups(),void 0!==this.actionManager&&null!==this.actionManager&&(this.actionManager.dispose(),this.actionManager=null),this._internalAbstractMeshDataInfo._skeleton=null,this._transformMatrixTexture&&(this._transformMatrixTexture.dispose(),this._transformMatrixTexture=null),n=0;n<this._intersectionsInProgress.length;n++){var o=this._intersectionsInProgress[n],a=o._intersectionsInProgress.indexOf(this);o._intersectionsInProgress.splice(a,1)}this._intersectionsInProgress=[],this.getScene().lights.forEach((function(t){var e=t.includedOnlyMeshes.indexOf(i);-1!==e&&t.includedOnlyMeshes.splice(e,1),-1!==(e=t.excludedMeshes.indexOf(i))&&t.excludedMeshes.splice(e,1);var r=t.getShadowGenerator();if(r){var n=r.getShadowMap();n&&n.renderList&&-1!==(e=n.renderList.indexOf(i))&&n.renderList.splice(e,1)}})),"InstancedMesh"===this.getClassName()&&"InstancedLinesMesh"===this.getClassName()||this.releaseSubMeshes();var s=this.getScene().getEngine();if(null!==this._occlusionQuery&&(this.isOcclusionQueryInProgress=!1,s.deleteQuery(this._occlusionQuery),this._occlusionQuery=null),s.wipeCaches(),this.getScene().removeMesh(this),this._parentContainer){var u=this._parentContainer.meshes.indexOf(this);u>-1&&this._parentContainer.meshes.splice(u,1),this._parentContainer=null}if(r&&this.material&&("MultiMaterial"===this.material.getClassName()?this.material.dispose(!1,!0,!0):this.material.dispose(!1,!0)),!e)for(n=0;n<this.getScene().particleSystems.length;n++)this.getScene().particleSystems[n].emitter===this&&(this.getScene().particleSystems[n].dispose(),n--);this._internalAbstractMeshDataInfo._facetData.facetDataEnabled&&this.disableFacetData(),this._uniformBuffer.dispose(),this.onAfterWorldMatrixUpdateObservable.clear(),this.onCollideObservable.clear(),this.onCollisionPositionChangeObservable.clear(),this.onRebuildObservable.clear(),t.prototype.dispose.call(this,e,r)},e.prototype.addChild=function(t,e){return void 0===e&&(e=!1),t.setParent(this,e),this},e.prototype.removeChild=function(t,e){return void 0===e&&(e=!1),t.setParent(null,e),this},e.prototype._initFacetData=function(){var t=this._internalAbstractMeshDataInfo._facetData;t.facetNormals||(t.facetNormals=new Array),t.facetPositions||(t.facetPositions=new Array),t.facetPartitioning||(t.facetPartitioning=new Array),t.facetNb=this.getIndices().length/3|0,t.partitioningSubdivisions=t.partitioningSubdivisions?t.partitioningSubdivisions:10,t.partitioningBBoxRatio=t.partitioningBBoxRatio?t.partitioningBBoxRatio:1.01;for(var e=0;e<t.facetNb;e++)t.facetNormals[e]=o.P.Zero(),t.facetPositions[e]=o.P.Zero();return t.facetDataEnabled=!0,this},e.prototype.updateFacetData=function(){var t=this._internalAbstractMeshDataInfo._facetData;t.facetDataEnabled||this._initFacetData();var e=this.getVerticesData(s.o.PositionKind),r=this.getIndices(),n=this.getVerticesData(s.o.NormalKind),i=this.getBoundingInfo();if(t.facetDepthSort&&!t.facetDepthSortEnabled){if(t.facetDepthSortEnabled=!0,r instanceof Uint16Array)t.depthSortedIndices=new Uint16Array(r);else if(r instanceof Uint32Array)t.depthSortedIndices=new Uint32Array(r);else{for(var a=!1,h=0;h<r.length;h++)if(r[h]>65535){a=!0;break}t.depthSortedIndices=a?new Uint32Array(r):new Uint16Array(r)}if(t.facetDepthSortFunction=function(t,e){return e.sqDistance-t.sqDistance},!t.facetDepthSortFrom){var c=this.getScene().activeCamera;t.facetDepthSortFrom=c?c.position:o.P.Zero()}t.depthSortedFacets=[];for(var l=0;l<t.facetNb;l++){var f={ind:3*l,sqDistance:0};t.depthSortedFacets.push(f)}t.invertedMatrix=o.y3.Identity(),t.facetDepthSortOrigin=o.P.Zero()}t.bbSize.x=i.maximum.x-i.minimum.x>m.kn?i.maximum.x-i.minimum.x:m.kn,t.bbSize.y=i.maximum.y-i.minimum.y>m.kn?i.maximum.y-i.minimum.y:m.kn,t.bbSize.z=i.maximum.z-i.minimum.z>m.kn?i.maximum.z-i.minimum.z:m.kn;var p=t.bbSize.x>t.bbSize.y?t.bbSize.x:t.bbSize.y;if(p=p>t.bbSize.z?p:t.bbSize.z,t.subDiv.max=t.partitioningSubdivisions,t.subDiv.X=Math.floor(t.subDiv.max*t.bbSize.x/p),t.subDiv.Y=Math.floor(t.subDiv.max*t.bbSize.y/p),t.subDiv.Z=Math.floor(t.subDiv.max*t.bbSize.z/p),t.subDiv.X=t.subDiv.X<1?1:t.subDiv.X,t.subDiv.Y=t.subDiv.Y<1?1:t.subDiv.Y,t.subDiv.Z=t.subDiv.Z<1?1:t.subDiv.Z,t.facetParameters.facetNormals=this.getFacetLocalNormals(),t.facetParameters.facetPositions=this.getFacetLocalPositions(),t.facetParameters.facetPartitioning=this.getFacetLocalPartitioning(),t.facetParameters.bInfo=i,t.facetParameters.bbSize=t.bbSize,t.facetParameters.subDiv=t.subDiv,t.facetParameters.ratio=this.partitioningBBoxRatio,t.facetParameters.depthSort=t.facetDepthSort,t.facetDepthSort&&t.facetDepthSortEnabled&&(this.computeWorldMatrix(!0),this._worldMatrix.invertToRef(t.invertedMatrix),o.P.TransformCoordinatesToRef(t.facetDepthSortFrom,t.invertedMatrix,t.facetDepthSortOrigin),t.facetParameters.distanceTo=t.facetDepthSortOrigin),t.facetParameters.depthSortedFacets=t.depthSortedFacets,n&&u.x.ComputeNormals(e,r,n,t.facetParameters),t.facetDepthSort&&t.facetDepthSortEnabled){t.depthSortedFacets.sort(t.facetDepthSortFunction);var d=t.depthSortedIndices.length/3|0;for(l=0;l<d;l++){var y=t.depthSortedFacets[l].ind;t.depthSortedIndices[3*l]=r[y],t.depthSortedIndices[3*l+1]=r[y+1],t.depthSortedIndices[3*l+2]=r[y+2]}this.updateIndices(t.depthSortedIndices,void 0,!0)}return this},e.prototype.getFacetLocalNormals=function(){var t=this._internalAbstractMeshDataInfo._facetData;return t.facetNormals||this.updateFacetData(),t.facetNormals},e.prototype.getFacetLocalPositions=function(){var t=this._internalAbstractMeshDataInfo._facetData;return t.facetPositions||this.updateFacetData(),t.facetPositions},e.prototype.getFacetLocalPartitioning=function(){var t=this._internalAbstractMeshDataInfo._facetData;return t.facetPartitioning||this.updateFacetData(),t.facetPartitioning},e.prototype.getFacetPosition=function(t){var e=o.P.Zero();return this.getFacetPositionToRef(t,e),e},e.prototype.getFacetPositionToRef=function(t,e){var r=this.getFacetLocalPositions()[t],n=this.getWorldMatrix();return o.P.TransformCoordinatesToRef(r,n,e),this},e.prototype.getFacetNormal=function(t){var e=o.P.Zero();return this.getFacetNormalToRef(t,e),e},e.prototype.getFacetNormalToRef=function(t,e){var r=this.getFacetLocalNormals()[t];return o.P.TransformNormalToRef(r,this.getWorldMatrix(),e),this},e.prototype.getFacetsAtLocalCoordinates=function(t,e,r){var n=this.getBoundingInfo(),i=this._internalAbstractMeshDataInfo._facetData,o=Math.floor((t-n.minimum.x*i.partitioningBBoxRatio)*i.subDiv.X*i.partitioningBBoxRatio/i.bbSize.x),a=Math.floor((e-n.minimum.y*i.partitioningBBoxRatio)*i.subDiv.Y*i.partitioningBBoxRatio/i.bbSize.y),s=Math.floor((r-n.minimum.z*i.partitioningBBoxRatio)*i.subDiv.Z*i.partitioningBBoxRatio/i.bbSize.z);return o<0||o>i.subDiv.max||a<0||a>i.subDiv.max||s<0||s>i.subDiv.max?null:i.facetPartitioning[o+i.subDiv.max*a+i.subDiv.max*i.subDiv.max*s]},e.prototype.getClosestFacetAtCoordinates=function(t,e,r,n,i,a){void 0===i&&(i=!1),void 0===a&&(a=!0);var s=this.getWorldMatrix(),u=o.jp.Matrix[5];s.invertToRef(u);var h=o.jp.Vector3[8];o.P.TransformCoordinatesFromFloatsToRef(t,e,r,u,h);var c=this.getClosestFacetAtLocalCoordinates(h.x,h.y,h.z,n,i,a);return n&&o.P.TransformCoordinatesFromFloatsToRef(n.x,n.y,n.z,s,n),c},e.prototype.getClosestFacetAtLocalCoordinates=function(t,e,r,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var a=null,s=0,u=0,h=0,c=0,l=0,f=0,p=0,d=0,y=this.getFacetLocalPositions(),_=this.getFacetLocalNormals(),m=this.getFacetsAtLocalCoordinates(t,e,r);if(!m)return null;for(var v,g,x,b=Number.MAX_VALUE,P=b,T=0;T<m.length;T++)g=_[v=m[T]],c=(t-(x=y[v]).x)*g.x+(e-x.y)*g.y+(r-x.z)*g.z,(!i||i&&o&&c>=0||i&&!o&&c<=0)&&(c=g.x*x.x+g.y*x.y+g.z*x.z,l=-(g.x*t+g.y*e+g.z*r-c)/(g.x*g.x+g.y*g.y+g.z*g.z),(P=(s=(f=t+g.x*l)-t)*s+(u=(p=e+g.y*l)-e)*u+(h=(d=r+g.z*l)-r)*h)<b&&(b=P,a=v,n&&(n.x=f,n.y=p,n.z=d)));return a},e.prototype.getFacetDataParameters=function(){return this._internalAbstractMeshDataInfo._facetData.facetParameters},e.prototype.disableFacetData=function(){var t=this._internalAbstractMeshDataInfo._facetData;return t.facetDataEnabled&&(t.facetDataEnabled=!1,t.facetPositions=new Array,t.facetNormals=new Array,t.facetPartitioning=new Array,t.facetParameters=null,t.depthSortedIndices=new Uint32Array(0)),this},e.prototype.updateIndices=function(t,e,r){return void 0===r&&(r=!1),this},e.prototype.createNormals=function(t){var e,r=this.getVerticesData(s.o.PositionKind),n=this.getIndices();return e=this.isVerticesDataPresent(s.o.NormalKind)?this.getVerticesData(s.o.NormalKind):[],u.x.ComputeNormals(r,n,e,{useRightHandedSystem:this.getScene().useRightHandedSystem}),this.setVerticesData(s.o.NormalKind,e,t),this},e.prototype.alignWithNormal=function(t,e){e||(e=v.RD.Y);var r=o.jp.Vector3[0],n=o.jp.Vector3[1];return o.P.CrossToRef(e,t,n),o.P.CrossToRef(t,n,r),this.rotationQuaternion?o._f.RotationQuaternionFromAxisToRef(r,t,n,this.rotationQuaternion):o.P.RotationFromAxisToRef(r,t,n,this.rotation),this},e.prototype._checkOcclusionQuery=function(){return!1},e.prototype.disableEdgesRendering=function(){throw(0,d.S)("EdgesRenderer")},e.prototype.enableEdgesRendering=function(t,e,r){throw(0,d.S)("EdgesRenderer")},e.prototype.getConnectedParticleSystems=function(){var t=this;return this._scene.particleSystems.filter((function(e){return e.emitter===t}))},e.OCCLUSION_TYPE_NONE=0,e.OCCLUSION_TYPE_OPTIMISTIC=1,e.OCCLUSION_TYPE_STRICT=2,e.OCCLUSION_ALGORITHM_TYPE_ACCURATE=0,e.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE=1,e.CULLINGSTRATEGY_STANDARD=0,e.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY=1,e.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION=2,e.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY=3,e}(h.Y);(0,g.H)("BABYLON.AbstractMesh",P)}}]);