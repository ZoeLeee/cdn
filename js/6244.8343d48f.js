"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6244],{24240:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(32735),l=n(61241),i=n(5385),o=n(3450),r=n(89044);const c=(0,o.ZP)(l.Z)((({theme:e})=>({border:"1px solid #E2E2E2",p:"0 0 0 4px",display:"inline-flex",alignItems:"center",width:400,height:36,boxShadow:"none",borderRadius:"5px"}))),s=(0,o.ZP)("div")((({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",padding:"0 3px",background:"#075FB8",height:"100%",width:36,color:"#fff",borderRadius:"0 5px 5px 0",cursor:"pointer"})));function d(e){const[t,n]=(0,a.useState)(""),l=()=>{const{search:n}=e;n&&n(t)};return a.createElement(c,null,a.createElement(i.ZP,{sx:{ml:1,flex:1},placeholder:"\u641c\u7d22",value:t,onChange:e=>{n(e.target.value)},onKeyUp:e=>{13===e.keyCode&&l()}}),a.createElement(s,{onClick:l},a.createElement(r.Z,null)))}},18163:(e,t,n)=>{n.d(t,{Z:()=>Z});var a=n(74857),l=n(21092),i=n(32735),o=n(75393),r=n(68867),c=n(57426),s=n(58181),d=n(37211),p=n(67970),m=n(44700),g=n(61241),u=n(3450),h=n(89294),x=n.n(h);const f=["children","onClose"],y=(0,u.ZP)(r.Z)((({theme:e})=>({"& .MuiDialogContent-root":{padding:e.spacing(2)},"& .MuiDialogActions-root":{padding:e.spacing(1)}}))),E=e=>{const{children:t,onClose:n}=e,o=(0,l.Z)(e,f);return i.createElement(c.Z,(0,a.Z)({sx:{m:0,p:2,cursor:"move"}},o),t,n?i.createElement(p.Z,{"aria-label":"close",onClick:n,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},i.createElement(m.Z,null)):null)},b=e=>i.createElement(x(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},i.createElement(g.Z,e)),Z=({title:e,visible:t,size:n,children:a,header:l,footer:r,fullWidth:c,sx:p,height:m,hideFooter:g,handleOk:u,handleClose:h})=>{const x=()=>{h&&h()};return i.createElement(y,{open:t,maxWidth:n,fullWidth:c,PaperComponent:b,"aria-labelledby":"draggable-dialog-title"},l||i.createElement(E,{id:"draggable-dialog-title",onClose:x},e),i.createElement(s.Z,{sx:{height:""+(m?m+"px":"auto")},dividers:!0},a),g?null:i.createElement(d.Z,null,r||i.createElement(i.Fragment,null,i.createElement(o.Z,{onClick:x},"\u53d6\u6d88"),i.createElement(o.Z,{onClick:()=>{u&&u()}},"\u786e\u5b9a"))))}},60092:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(36800),l=n.n(a),i=n(32735),o=n(65404);const r=({total:e,pagenation:t,onPageChange:n,onRowsPerPageChange:a})=>{const{pageNum:r,pageSize:c,pageSizeOptions:s}=t;return i.createElement(o.Z,{rowsPerPageOptions:s||[],component:"div",count:e,rowsPerPage:c,page:r>0?r-1:0,onPageChange:(e,t)=>{n&&n(t+1)},onRowsPerPageChange:e=>{a&&a(l()(e.target.value,10))},labelRowsPerPage:"\u6bcf\u9875\u6761\u6570\uff1a",labelDisplayedRows:({from:t,to:n})=>`${t}\u2013${n} \u5171 ${Math.ceil(e/c)}\u9875, ${e}\u6761`})}},86244:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Te});var a=n(39831),l=n.n(a),i=n(61799),o=n.n(i),r=n(26117),c=n.n(r),s=n(5996),d=n.n(s),p=n(20658),m=n.n(p),g=n(3434),u=n.n(g),h=n(97828),x=n.n(h),f=n(93213),y=n(20246),E=n.n(y),b=n(32735),Z=n(3346),v=n(3450),C=n(94063),k=n(24240),w=n(51463),S=n.n(w),P=n(13697),j=n(47513),z=n(35851),I=n(96433),O=n(29405),R=n.n(O),_=n(14549),D=n.n(_),T=n(45709),F=n(67970),N=n(10800),M=n(11528),L=n(46600),W=n(27660),H=n(83228);const $=(0,v.ZP)(P.Z)((({theme:e})=>({position:"relative","&:hover .footer":{display:"flex",position:"absolute",zIndex:100,bottom:0,justifyContent:"space-between",alignItems:"center",width:"100%",height:"20%",fontSize:"12px",left:0,padding:"0 16px",background:"rgba(209,233,255,.5)","& p":{fontSize:"12px",fontFamily:"Source Han Sans CN",fontWeight:500,color:"#333",margin:"5px 0 0 0"}}}))),A=(0,v.ZP)("div")((({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"80%","& i":{fontSize:"8em",color:"rgb(255, 208, 129)"}}))),B=(0,v.ZP)("div")((({theme:e})=>({display:"none"}))),G=(0,v.ZP)("div")((({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",width:"calc((100% - 32px) / 2)",height:"9%",position:"absolute",zIndex:100,right:"16px","& .action-menu-item":{display:"flex",justifyContent:"center",alignItems:"center",width:30,height:30,margin:"0 5px",borderRadius:"50%","& i":{cursor:"pointer",fontSize:"18px",color:"#333"}}}))),J=(0,v.ZP)("div")((({theme:e})=>({display:"flex",justifyContent:"center",alignItems:"center",height:"100%",width:"calc(100% / 3)"}))),K=(0,v.ZP)(F.Z)((({theme:e})=>({width:40,height:40,margin:"0 15px"}))),U=[{key:"preview",title:"\u9884\u89c8",icon:"icon-3Dyulan-dakai1"},{key:"rename",title:"\u91cd\u547d\u540d",icon:"icon-3Dbianji"},{key:"edit",title:"\u7f16\u8f91",icon:"icon-3Dshezhi"},{key:"delete",title:"\u5220\u9664",icon:"icon-3Ddel"}],X={id:"id",name:"name",count:"count",createdTime:"createdTime",updatedTime:"updatedTime",img:"img"};let q=0;const Q=({dataItem:e,dataIndex:t,handleClick:n,menuList:a,moreList:l,keyFormat:i,doubleClick:o})=>{const[r,c]=(0,b.useState)(null),[s,d]=(0,b.useState)(null),p=Boolean(r),m=(e,t,a)=>{x(),n&&n(e,t,a)},g=()=>{q+=1,R()((()=>{1===q?n&&n(e,t):2===q&&o&&o(e,t),q=0}),300)},u=e=>{const t={fontSize:"13px"};return b.createElement(N.Z,{id:"basic-menu"+e,anchorEl:r,open:p,onClose:x,MenuListProps:{"aria-labelledby":"basic-button"}},l&&S()(l).call(l,((e,n)=>b.createElement(M.Z,{sx:t,key:n,onClick:()=>m(e.key,s,n)},b.createElement("i",{className:"iconfont "+e.icon}),e.title))))},h=(e,t,n,a)=>{"more"===a?f(e,t):m(a,t,n)},x=()=>{c(null),d({})},f=(e,t)=>{c(e.currentTarget),d(t)};return(()=>{let n=a||U,l=D()(X,i||{});return b.createElement($,{className:"projectCardItem"},b.createElement(j.Z,{sx:{width:"100%",height:320,userSelect:"none"},onClick:g},b.createElement(G,null,n&&S()(n).call(n,((n,a)=>b.createElement(J,{key:a},b.createElement(K,{title:n.title,color:"primary",onClick:a=>h(a,e,t,n.key)},b.createElement(L.Z,{type:n.icon})),"more"===n.key?u(e[l.id]):null)))),b.createElement(T.Z,{align:"left",variant:"body2",color:"text.secondary",sx:{color:"#222",fontSize:"15px",fontWeight:"bold",width:"50%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e[l.name]},b.createElement("span",{style:{marginRight:"10px"}},"\u9879\u76ee\uff1a"),e[l.name]),b.createElement(T.Z,{align:"left",variant:"body2",color:"text.secondary",sx:{color:"#424B54",fontSize:"13px",marginTop:"5px"}},void 0===e[l.count]?null:b.createElement(b.Fragment,null,b.createElement("span",{style:{marginRight:"10px"}},"\u573a\u666f\uff1a"),e[l.count]?e[l.count]:0,"\u4e2a")),b.createElement(A,null,e[l.img]&&(0,H.ap)(W.l.prefix+e[l.img])?b.createElement("img",{style:{height:"100%"},src:W.l.prefix+e[l.img]+"?t="+(new Date).getTime()}):b.createElement("img",{src:"/static/images/bg.png"})),b.createElement(B,{className:"footer"},b.createElement("div",null,b.createElement("p",null,"\u521b\u5efa\u65f6\u95f4"),b.createElement("p",null,e[l.createdTime])),b.createElement("div",null,b.createElement("p",null,"\u66f4\u65b0\u65f6\u95f4"),b.createElement("p",null,e[l.updatedTime])))))})()};var V=n(60092);const Y=(0,v.ZP)("div")((({theme:e})=>({textAlign:"center",fontSize:"14px",padding:"20px 0","& img":{width:300,height:300},"& p":{margin:0}}))),ee=()=>b.createElement(Y,null,b.createElement("img",{src:"/static/images/nodata.svg"}),b.createElement("p",null,"\u6682\u65e0\u6570\u636e")),te=(0,v.ZP)("div")((({theme:e})=>({padding:"20px",display:"grid",flexWrap:"wrap",gridTemplateColumns:"repeat(auto-fill, calc((100% - 25px * 4) / 5))",gridGap:"25px 25px","& .projectCardItem":{width:"100%",maxHeight:400,boxShadow:"0px 0px 8px 0px rgba(0, 0, 0, 0.08)",borderRadius:"5px"},"& .activePane":{boxShadow:"0px 0px 8px 0px rgba(7, 95, 184, 0.46)"},"& .activeIcon":{color:"#1890ff"},"& .projectCardItem:hover":{boxShadow:"0px 0px 8px 0px rgba(7, 95, 184, 0.46)"},"& .MuiCardContent-root:last-child":{paddingBottom:"16px"}}))),ne=({dataSource:e,handleClick:t,ipagenation:n,handleChangePage:a,handleChangeRowsPerPage:l,add:i,menuList:o,sx:r,total:c,keyFormat:s,doubleClick:d,moreList:p})=>b.createElement(b.Fragment,null,b.createElement(te,{sx:r},i?b.createElement(P.Z,{onClick:()=>{i&&i()},className:"projectCardItem",title:"\u65b0\u5efa"},b.createElement(z.Z,{sx:{height:"100%"}},b.createElement(j.Z,{sx:{display:"flex",justifyContent:"center"}},b.createElement(I.Z,{component:"img",sx:{height:"90%",width:"90%"},image:"/static/images/add.png",alt:"green iguana"})))):null,e&&e.length>0?S()(e).call(e,((e,n)=>b.createElement(Q,{key:n,dataIndex:n,dataItem:e,menuList:o,moreList:p,keyFormat:s,handleClick:t,doubleClick:d}))):null),n&&c>0?b.createElement(V.Z,{pagenation:n,total:c,onPageChange:a,onRowsPerPageChange:l}):b.createElement(ee,null));var ae=n(25661),le=n(99394),ie=n(73554),oe=n(81215),re=n(4992),ce=n(74857),se=n(95279),de=n(73764),pe=n(70213),me=n(6924),ge=n(88270),ue=n(18163);const he=(0,v.ZP)("div")((({theme:e})=>({display:"inline-block",width:"80px",fontSize:"14px",textAlign:"right"}))),xe=({deployRef:e,onOk:t,onClose:n})=>{const[a,l]=(0,b.useState)(!1),[i,o]=(0,b.useState)(""),[r,c]=(0,b.useState)(""),[s,d]=(0,b.useState)(new Date),[p,m]=(0,b.useState)({});(0,b.useImperativeHandle)(e,(()=>({open:g})));const g=e=>{l(!0),d(new Date),c(""),m({project_code:e.id,project_name:e.name})};return(0,b.useEffect)((()=>{}),[]),b.createElement(ue.Z,{size:"sm",title:"\u90e8\u7f72",visible:a,handleOk:()=>{let e={project_code:p.project_code,project_name:p.project_name,hardware_info:r,expiration:(0,H.p6)(s.getTime(),"yyyy-MM-dd hh:mm:ss")};(0,le.SI)("trade/deploy/add",e).then((e=>{0===e.code&&(ie.y.success("\u64cd\u4f5c\u6210\u529f"),l(!1),t&&t())}))},handleClose:()=>{l(!1),n&&n()},fullWidth:!0,height:"auto"},b.createElement(se.ZP,{container:!0,spacing:2},b.createElement(se.ZP,{item:!0,xs:12,sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:"80px"}},b.createElement(he,null,"\u9879\u76ee\u540d\u79f0\uff1a"),b.createElement(he,{sx:{width:330,textAlign:"left"}},p.project_name)),b.createElement(se.ZP,{item:!0,xs:12,sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:"80px"}},b.createElement(he,null,"\u7ed3\u675f\u65f6\u95f4\uff1a"),b.createElement(me._,{dateAdapter:ge.Z},b.createElement(pe.x,{value:s,onChange:e=>{d(e)},ampm:!1,inputFormat:"yyyy-MM-dd HH:mm:ss",renderInput:e=>b.createElement(de.Z,(0,ce.Z)({sx:{width:330,height:30,"& input":{padding:"6px 14px"}}},e))})))))};var fe=n(66989),ye=n.n(fe),Ee=n(92491);function be(e,t){var n=E()(e);if(l()){var a=l()(e);t&&(a=o()(a).call(a,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,a)}return n}const Ze=(0,v.ZP)(de.Z)((({theme:e})=>({"& input":{height:"1em",width:"300px"}}))),ve=(0,v.ZP)("div")((({theme:e})=>({display:"inline-block",width:"80px",fontSize:"14px",textAlign:"right"}))),Ce=((0,v.ZP)(Ee.Z)((({theme:e})=>({height:"30px",width:"330px"}))),"editor/project/add"),ke="editor/project/edit",we=({dataRef:e,onOk:t,onClose:n})=>{const[a,l]=(0,b.useState)(!1),[i,o]=(0,b.useState)({}),[r,s]=(0,b.useState)(!1);(0,b.useImperativeHandle)(e,(()=>({init:p})));const p=(e,t)=>{let n=JSON.parse(ye()(e));l(!0),o(n),s(t)},g=(e,t)=>{let n=function(e){for(var t=1;t<arguments.length;t++){var n,a,l=null!=arguments[t]?arguments[t]:{};t%2?d()(n=be(Object(l),!0)).call(n,(function(t){(0,f.Z)(e,t,l[t])})):m()?u()(e,m()(l)):d()(a=be(Object(l))).call(a,(function(t){x()(e,t,c()(l,t))}))}return e}({},i);n[t]=e.target.value,o(n)},h=e=>{let n="",a="";r?(n="put",a=ke):(n="post",a=Ce),(0,le.XD)(a,e,n).then((e=>{0===e.code&&(ie.y.success("\u64cd\u4f5c\u6210\u529f"),l(!1),t&&t(!0))}))};return b.createElement(ue.Z,{size:"sm",title:r?"\u91cd\u547d\u540d":"\u65b0\u589e",visible:a,handleOk:()=>{h(r?i:{name:i.name,project_type:"3d"}),l(!1)},handleClose:()=>{l(!1),n&&n(!1)},fullWidth:!0},b.createElement(se.ZP,{container:!0,spacing:2},b.createElement(se.ZP,{item:!0,xs:12,sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:"80px"}},b.createElement(ve,null,"\u9879\u76ee\u540d\u79f0\uff1a"),b.createElement(Ze,{size:"small",value:i.name,onChange:e=>{g(e,"name")}}))))};function Se(e,t){var n=E()(e);if(l()){var a=l()(e);t&&(a=o()(a).call(a,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,a)}return n}const Pe=(0,v.ZP)("div")((({theme:e})=>({height:"calc(100vh - 78px)",background:"rgb(0, 81, 137)",color:"#fff"}))),je=(0,v.ZP)("div")((({theme:e})=>({display:"flex",height:"50px",justifyContent:"space-between",alignItems:"center",fontSize:"15px",padding:"15px 0",borderBottom:"1px solid #f0f0f0"}))),ze={name:""},Ie={count:"app_num",createdTime:"created_at",updatedTime:"updated_at",img:"preview_pic_path"},Oe=[{key:"preview",title:"\u9884\u89c8",icon:"icon-3Dsousuo"},{key:"edit",title:"\u7f16\u8f91",icon:"icon-3Dbianji1"},{key:"more",title:"\u66f4\u591a",icon:"icon-3Dgengduo"}],Re=[{key:"rename",title:"\u91cd\u547d\u540d",icon:"icon-3Dzhongmingming"},{key:"deploy",title:"\u90e8\u7f72",icon:"icon-3Dbushu"},{key:"publish",title:"\u53d1\u5e03",icon:"icon-3Dgongnengdingyi"},{key:"delete",title:"\u5220\u9664",icon:"icon-3Ddel"}],_e="editor/project/list",De="editor/project/delete/";function Te(){const[e,t]=(0,b.useState)({pageNum:1,pageSize:9,pageSizeOptions:[]}),[n,a]=(0,b.useState)([]),[l,i]=(0,b.useState)(""),[o,r]=(0,b.useState)(0),[s,p]=(0,b.useState)(""),[g,h]=(0,b.useState)(null),y=(0,b.useRef)(null),v=(0,b.useRef)(null),w=(0,b.useRef)(null),S=(0,Z.s0)(),P=t=>{let n=function(e){for(var t=1;t<arguments.length;t++){var n,a,l=null!=arguments[t]?arguments[t]:{};t%2?d()(n=Se(Object(l),!0)).call(n,(function(t){(0,f.Z)(e,t,l[t])})):m()?u()(e,m()(l)):d()(a=Se(Object(l))).call(a,(function(t){x()(e,t,c()(l,t))}))}return e}({page:e.pageNum,limit:e.pageSize,name:l,project_type:"3d"},t);(0,le.s7)(_e,n).then((e=>{if(0===e.code){let{list:t,total_count:n}=e.data;t&&t.length>0?(a(t),r(n)):(a([]),r(0))}})).catch((e=>{}))},j=t=>{let a={id:t};(0,le.mn)(De+t,a).then((t=>{0===t.code&&(n.length>1?P():P({page:e.pageNum}),ie.y.success("\u5220\u9664\u6210\u529f"))}))},z=e=>{const{id:t,preview_app_id:n}=e;if(n){let e=`/preview.html?projectId=${t}&id=${n}`;y.current.open(),p(e)}else ie.y.warn("\u672a\u8bbe\u7f6e\u9996\u9875\uff0c\u4e0d\u53ef\u9884\u89c8")};(0,b.useEffect)((()=>{P()}),[]);const I=e=>{e&&P()};return b.createElement(C.Z,{sx:{flexGrow:1,height:"100%"}},b.createElement(Pe,{sx:{background:"#fff",color:"#333",padding:"0 20px",height:"100%"}},b.createElement(je,null,b.createElement("span",{style:{fontWeight:"bold"}},"\u6211\u7684\u9879\u76ee"),b.createElement(k.Z,{search:e=>{i(e),P({name:e})}})),b.createElement("div",{style:{padding:"30px 0"}},b.createElement(ne,{sx:{padding:0},dataSource:n,handleClick:(e,t,n)=>{if("rename"===e)(e=>{w.current.init(e,!0)})(t);else if("delete"===e)(e=>{(0,oe.i)({title:`\u662f\u5426\u786e\u8ba4\u8981\u5220\u9664\u9879\u76ee\u201c${e.name}\u201d`,content:"\u8bf7\u6ce8\u610f\u5220\u9664\u9879\u76ee\u4f1a\u5220\u9664\u9879\u76ee\u4e0b\u7684\u6570\u636e\u5173\u8054\u4ee5\u53ca\u6240\u6709\u5e94\u7528\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c!",onOk:()=>{j(e.id)}})})(t);else if("edit"===e)S("/editor?projectId="+t.id);else if("preview"===e)z(t);else if("deploy"===e)v.current.open(t);else if("publish"===e){let{id:e,name:n}=t;h({id:e,title:n})}},ipagenation:e,handleChangePage:n=>{t({pageNum:n,pageSize:e.pageSize,pageSizeOptions:e.pageSizeOptions}),P({page:n})},handleChangeRowsPerPage:n=>{t({pageNum:1,pageSize:n,pageSizeOptions:e.pageSizeOptions}),P({limit:n})},add:()=>{w.current.init(ze,!1)},menuList:Oe,total:o,keyFormat:Ie,doubleClick:(e,t)=>{S("/editor?projectId="+e.id)},moreList:Re}))),b.createElement(we,{dataRef:w,onOk:I,onClose:I}),b.createElement(re.Z,{previewRef:y,url:s}),b.createElement(xe,{deployRef:v}),g&&E()(g).length>0?b.createElement(ae.Z,{category:"M0001",type:"project",onClose:()=>{h(null)},target:g.id,targetObj:g}):null)}},4992:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(32735),l=n(3346),i=n(3450),o=n(18163),r=n(1453);const c=(0,i.ZP)("iframe")((({theme:e})=>({width:"100%",height:"calc(100% - 32px)",border:"none",margin:"0",padding:"0"}))),s=({url:e,previewRef:t})=>{const[n,i]=(0,a.useState)(!1),s=(0,l.s0)();(0,a.useImperativeHandle)(t,(()=>({open:p})));const d=()=>{i(!1)},p=e=>{i(!0),m(e)},m=e=>{r.h.addEventListener("message",(t=>{const{type:n}=t.data;"close_preview"===n?i(!1):"apply-shop"===n&&(s("/editor?code="+e),d())}))};return a.createElement(o.Z,{size:"xl",title:"\u9884\u89c8",visible:n,handleOk:()=>{i(!1)},handleClose:d,fullWidth:!0,height:800,hideFooter:!0},a.createElement(c,{src:e}))}}}]);