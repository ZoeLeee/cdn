"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4848],{8036:(e,t,i)=>{i.d(t,{Z:()=>p});var r=i(93517),n=i(54485),o=i(22874),s=i(18061);function a(){this.enabled=!0,this.renderable=!0,this.density=2e-4,this.screenSpaceErrorFactor=2,this.minimumBrightness=.03}const c=[359.393,800.749,1275.6501,2151.1192,3141.7763,4777.5198,6281.2493,12364.307,15900.765,49889.0549,78026.8259,99260.7344,120036.3873,151011.0158,156091.1953,203849.3112,274866.9803,319916.3149,493552.0528,628733.5874],u=[2e-5,2e-4,1e-4,7e-5,5e-5,4e-5,3e-5,19e-6,1e-5,85e-7,62e-7,58e-7,53e-7,52e-7,51e-7,42e-7,4e-6,34e-7,26e-7,22e-7];for(let e=0;e<u.length;++e)u[e]*=1e6;const l=u[1],h=u[u.length-1];for(let e=0;e<u.length;++e)u[e]=(u[e]-h)/(l-h);let d=0;const f=new r.Z;a.prototype.update=function(e){if(!(e.fog.enabled=this.enabled))return;e.fog.renderable=this.renderable;const t=e.camera,i=t.positionCartographic;if(!(0,n.Z)(i)||i.height>8e5||e.mode!==s.Z.SCENE3D)return void(e.fog.enabled=!1);const a=i.height,p=function(e){const t=c,i=t.length;if(e<t[0])return d=0,d;if(e>t[i-1])return d=i-2,d;if(e>=t[d]){if(d+1<i&&e<t[d+1])return d;if(d+2<i&&e<t[d+2])return++d,d}else if(d-1>=0&&e>=t[d-1])return--d,d;let r;for(r=0;r<i-2&&!(e>=t[r]&&e<t[r+1]);++r);return d=r,d}(a),m=o.Z.clamp((a-c[p])/(c[p+1]-c[p]),0,1);let g=o.Z.lerp(u[p],u[p+1],m);const _=1e6*this.density;g=g*(_-_/l*h)*1e-6;const Z=r.Z.normalize(t.positionWC,f);g*=1-Math.abs(r.Z.dot(t.directionWC,Z)),e.fog.density=g,e.fog.sse=this.screenSpaceErrorFactor,e.fog.minimumBrightness=this.minimumBrightness};const p=a},99695:(e,t,i)=>{i.d(t,{Z:()=>h});var r=i(88779),n=i(54485),o=i(90332),s=i(20176),a=i(92893),c=i(41780),u=i(4230);function l(e){if(!(0,n.Z)(e)||!(0,n.Z)(e.scene))throw new s.Z("options.scene is required.");this._scene=e.scene,this.samplingWindow=(0,r.Z)(e.samplingWindow,l.defaultSettings.samplingWindow),this.quietPeriod=(0,r.Z)(e.quietPeriod,l.defaultSettings.quietPeriod),this.warmupPeriod=(0,r.Z)(e.warmupPeriod,l.defaultSettings.warmupPeriod),this.minimumFrameRateDuringWarmup=(0,r.Z)(e.minimumFrameRateDuringWarmup,l.defaultSettings.minimumFrameRateDuringWarmup),this.minimumFrameRateAfterWarmup=(0,r.Z)(e.minimumFrameRateAfterWarmup,l.defaultSettings.minimumFrameRateAfterWarmup),this._lowFrameRate=new a.Z,this._nominalFrameRate=new a.Z,this._frameTimes=[],this._needsQuietPeriod=!0,this._quietPeriodEndTime=0,this._warmupPeriodEndTime=0,this._frameRateIsLow=!1,this._lastFramesPerSecond=void 0,this._pauseCount=0;const t=this;this._preUpdateRemoveListener=this._scene.preUpdate.addEventListener((function(e,i){!function(e,t){if(e._pauseCount>0)return;const i=(0,c.Z)();if(e._needsQuietPeriod)e._needsQuietPeriod=!1,e._frameTimes.length=0,e._quietPeriodEndTime=i+e.quietPeriod/u.Z.SECONDS_PER_MILLISECOND,e._warmupPeriodEndTime=e._quietPeriodEndTime+(e.warmupPeriod+e.samplingWindow)/u.Z.SECONDS_PER_MILLISECOND;else if(i>=e._quietPeriodEndTime){e._frameTimes.push(i);const t=i-e.samplingWindow/u.Z.SECONDS_PER_MILLISECOND;if(e._frameTimes.length>=2&&e._frameTimes[0]<=t){for(;e._frameTimes.length>=2&&e._frameTimes[1]<t;)e._frameTimes.shift();const r=(i-e._frameTimes[0])/(e._frameTimes.length-1);e._lastFramesPerSecond=1e3/r;r>1e3/(i>e._warmupPeriodEndTime?e.minimumFrameRateAfterWarmup:e.minimumFrameRateDuringWarmup)?e._frameRateIsLow||(e._frameRateIsLow=!0,e._needsQuietPeriod=!0,e.lowFrameRate.raiseEvent(e.scene,e._lastFramesPerSecond)):e._frameRateIsLow&&(e._frameRateIsLow=!1,e._needsQuietPeriod=!0,e.nominalFrameRate.raiseEvent(e.scene,e._lastFramesPerSecond))}}}(t)})),this._hiddenPropertyName=void 0!==document.hidden?"hidden":void 0!==document.mozHidden?"mozHidden":void 0!==document.msHidden?"msHidden":void 0!==document.webkitHidden?"webkitHidden":void 0;const i=void 0!==document.hidden?"visibilitychange":void 0!==document.mozHidden?"mozvisibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychange":void 0;function o(){var e;e=t,document[e._hiddenPropertyName]?e.pause():e.unpause()}this._visibilityChangeRemoveListener=void 0,(0,n.Z)(i)&&(document.addEventListener(i,o,!1),this._visibilityChangeRemoveListener=function(){document.removeEventListener(i,o,!1)})}l.defaultSettings={samplingWindow:5,quietPeriod:2,warmupPeriod:5,minimumFrameRateDuringWarmup:4,minimumFrameRateAfterWarmup:8},l.fromScene=function(e){if(!(0,n.Z)(e))throw new s.Z("scene is required.");return(0,n.Z)(e._frameRateMonitor)&&!e._frameRateMonitor.isDestroyed()||(e._frameRateMonitor=new l({scene:e})),e._frameRateMonitor},Object.defineProperties(l.prototype,{scene:{get:function(){return this._scene}},lowFrameRate:{get:function(){return this._lowFrameRate}},nominalFrameRate:{get:function(){return this._nominalFrameRate}},lastFramesPerSecond:{get:function(){return this._lastFramesPerSecond}}}),l.prototype.pause=function(){++this._pauseCount,1===this._pauseCount&&(this._frameTimes.length=0,this._lastFramesPerSecond=void 0)},l.prototype.unpause=function(){--this._pauseCount,this._pauseCount<=0&&(this._pauseCount=0,this._needsQuietPeriod=!0)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._preUpdateRemoveListener(),(0,n.Z)(this._visibilityChangeRemoveListener)&&this._visibilityChangeRemoveListener(),(0,o.Z)(this)};const h=l},71309:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(18061);const n=function(e,t,i){this.context=e,this.commandList=[],this.shadowMaps=[],this.brdfLutGenerator=void 0,this.environmentMap=void 0,this.sphericalHarmonicCoefficients=void 0,this.specularEnvironmentMaps=void 0,this.specularEnvironmentMapsMaximumLOD=void 0,this.mode=r.Z.SCENE3D,this.morphTime=r.Z.getMorphTime(r.Z.SCENE3D),this.frameNumber=0,this.newFrame=!1,this.time=void 0,this.jobScheduler=i,this.mapProjection=void 0,this.camera=void 0,this.cameraUnderground=!1,this.globeTranslucencyState=void 0,this.cullingVolume=void 0,this.occluder=void 0,this.maximumScreenSpaceError=void 0,this.pixelRatio=1,this.passes={render:!1,pick:!1,depth:!1,postProcess:!1,offscreen:!1},this.creditDisplay=t,this.afterRender=[],this.scene3DOnly=!1,this.fog={enabled:!1,density:void 0,sse:void 0,minimumBrightness:void 0},this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.shadowState={shadowsEnabled:!0,shadowMaps:[],lightShadowMaps:[],nearPlane:1,farPlane:5e3,closestObjectSize:1e3,lastDirtyTime:0,outOfView:!0},this.splitPosition=0,this.frustumSplits=[],this.backgroundColor=void 0,this.light=void 0,this.minimumDisableDepthTestDistance=void 0,this.invertClassification=!1,this.invertClassificationColor=void 0,this.useLogDepth=!1,this.tilesetPassState=void 0,this.minimumTerrainHeight=0}},94413:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(88779),n=i(1577);const o=function(e,t){this.near=(0,r.Z)(e,0),this.far=(0,r.Z)(t,0);const i=n.Z.NUMBER_OF_PASSES,o=new Array(i),s=new Array(i);for(let e=0;e<i;++e)o[e]=[],s[e]=0;this.commands=o,this.indices=s}},20506:(e,t,i)=>{i.d(t,{Z:()=>g});var r=i(93517),n=i(88779),o=i(54485),s=i(90332),a=i(20176),c=i(7219),u=i(71118),l=i(21514),h=i(18272),d=i(60197);function f(e,t,i,s,a){this._tileset=e,this._tile=t,this._resource=i,this._geometries=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,this._readyPromise=function(e,t,i){i=(0,n.Z)(i,0);const s=new Uint8Array(t),a=new DataView(t);i+=p;const f=a.getUint32(i,!0);if(1!==f)throw new l.Z(`Only Geometry tile version 1 is supported.  Version ${f} is not.`);i+=p;const m=a.getUint32(i,!0);if(i+=p,0===m)return void e._readyPromise.resolve(e);const g=a.getUint32(i,!0);if(i+=p,0===g)throw new l.Z("Feature table must have a byte length greater than zero");const _=a.getUint32(i,!0);i+=p;const Z=a.getUint32(i,!0);i+=p;const y=a.getUint32(i,!0);i+=p;const b=(0,c.Z)(s,i,g);i+=g;const v=new Uint8Array(t,i,_);let T,x;i+=_,Z>0&&(T=(0,c.Z)(s,i,Z),i+=Z,y>0&&(x=new Uint8Array(t,i,y),x=new Uint8Array(x)));const w=(0,n.Z)(b.BOXES_LENGTH,0),S=(0,n.Z)(b.CYLINDERS_LENGTH,0),A=(0,n.Z)(b.ELLIPSOIDS_LENGTH,0),E=(0,n.Z)(b.SPHERES_LENGTH,0),C=w+S+A+E,I=new h.Z(e,C,T,x,function(e){return function(t,i){(0,o.Z)(e._geometries)&&e._geometries.updateCommands(t,i)}}(e));if(e._batchTable=I,0===C)return;const L=e.tile.computedTransform;let P;(0,o.Z)(b.RTC_CENTER)&&(P=r.Z.unpack(b.RTC_CENTER),u.Z.multiplyByPoint(L,P,P));const O=function(e,t){let i,r,s,a,c;const u=(0,n.Z)(e.BOXES_LENGTH,0),h=(0,n.Z)(e.CYLINDERS_LENGTH,0),d=(0,n.Z)(e.ELLIPSOIDS_LENGTH,0),f=(0,n.Z)(e.SPHERES_LENGTH,0);if(u>0&&(0,o.Z)(e.BOX_BATCH_IDS)){const r=t.byteOffset+e.BOX_BATCH_IDS.byteOffset;i=new Uint16Array(t.buffer,r,u)}if(h>0&&(0,o.Z)(e.CYLINDER_BATCH_IDS)){const i=t.byteOffset+e.CYLINDER_BATCH_IDS.byteOffset;r=new Uint16Array(t.buffer,i,h)}if(d>0&&(0,o.Z)(e.ELLIPSOID_BATCH_IDS)){const i=t.byteOffset+e.ELLIPSOID_BATCH_IDS.byteOffset;s=new Uint16Array(t.buffer,i,d)}if(f>0&&(0,o.Z)(e.SPHERE_BATCH_IDS)){const i=t.byteOffset+e.SPHERE_BATCH_IDS.byteOffset;a=new Uint16Array(t.buffer,i,f)}const p=(0,o.Z)(i)||(0,o.Z)(r)||(0,o.Z)(s)||(0,o.Z)(a),m=u>0&&!(0,o.Z)(i)||h>0&&!(0,o.Z)(r)||d>0&&!(0,o.Z)(s)||f>0&&!(0,o.Z)(a);if(p&&m)throw new l.Z("If one group of batch ids is defined, then all batch ids must be defined.");if(!((0,o.Z)(i)||(0,o.Z)(r)||(0,o.Z)(s)||(0,o.Z)(a))){let e=0;if(!(0,o.Z)(i)&&u>0)for(i=new Uint16Array(u),c=0;c<u;++c)i[c]=e++;if(!(0,o.Z)(r)&&h>0)for(r=new Uint16Array(h),c=0;c<h;++c)r[c]=e++;if(!(0,o.Z)(s)&&d>0)for(s=new Uint16Array(d),c=0;c<d;++c)s[c]=e++;if(!(0,o.Z)(a)&&f>0)for(a=new Uint16Array(f),c=0;c<f;++c)a[c]=e++}return{boxes:i,cylinders:r,ellipsoids:s,spheres:a}}(b,v);if(w>0||S>0||A>0||E>0){let t,i,r,n;if(w>0){const e=v.byteOffset+b.BOXES.byteOffset;t=new Float32Array(v.buffer,e,d.Z.packedBoxLength*w)}if(S>0){const e=v.byteOffset+b.CYLINDERS.byteOffset;i=new Float32Array(v.buffer,e,d.Z.packedCylinderLength*S)}if(A>0){const e=v.byteOffset+b.ELLIPSOIDS.byteOffset;r=new Float32Array(v.buffer,e,d.Z.packedEllipsoidLength*A)}if(E>0){const e=v.byteOffset+b.SPHERES.byteOffset;n=new Float32Array(v.buffer,e,d.Z.packedSphereLength*E)}return e._geometries=new d.Z({boxes:t,boxBatchIds:O.boxes,cylinders:i,cylinderBatchIds:O.cylinders,ellipsoids:r,ellipsoidBatchIds:O.ellipsoids,spheres:n,sphereBatchIds:O.spheres,center:P,modelMatrix:L,batchTable:I,boundingVolume:e.tile.boundingVolume.boundingVolume}),e._geometries.readyPromise.then((function(){return e}))}return Promise.resolve(e)}(this,s,a)}Object.defineProperties(f.prototype,{featuresLength:{get:function(){return(0,o.Z)(this._batchTable)?this._batchTable.featuresLength:0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return(0,o.Z)(this._geometries)?this._geometries.trianglesLength:0}},geometryByteLength:{get:function(){return(0,o.Z)(this._geometries)?this._geometries.geometryByteLength:0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return(0,o.Z)(this._batchTable)?this._batchTable.memorySizeInBytes:0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const p=Uint32Array.BYTES_PER_ELEMENT;function m(e){const t=e.featuresLength;if(!(0,o.Z)(e._features)&&t>0){const i=new Array(t);(0,o.Z)(e._geometries)&&e._geometries.createFeatures(e,i),e._features=i}}f.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},f.prototype.getFeature=function(e){const t=this.featuresLength;if(!(0,o.Z)(e)||e<0||e>=t)throw new a.Z(`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return m(this),this._features[e]},f.prototype.applyDebugSettings=function(e,t){(0,o.Z)(this._geometries)&&this._geometries.applyDebugSettings(e,t)},f.prototype.applyStyle=function(e){m(this),(0,o.Z)(this._geometries)&&this._geometries.applyStyle(e,this._features)},f.prototype.update=function(e,t){(0,o.Z)(this._geometries)&&(this._geometries.classificationType=this._tileset.classificationType,this._geometries.debugWireframe=this._tileset.debugWireframe,this._geometries.update(t)),(0,o.Z)(this._batchTable)&&this._geometries._ready&&this._batchTable.update(e,t)},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._geometries=this._geometries&&this._geometries.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,s.Z)(this)};const g=f},29489:(e,t,i)=>{i.d(t,{Z:()=>Z});var r=i(66866),n=i(54485),o=i(20176),s=i(21514),a=i(15411);function c(e){const t=[],i=e.features;for(let e=0;e<i.length;++e){const o=i[e],s=new a.Z;if(s.data=o,s.properties=o.properties,s.configureNameFromProperties(o.properties),s.configureDescriptionFromProperties(o.properties),(0,n.Z)(o.geometry)&&"Point"===o.geometry.type){const e=o.geometry.coordinates[0],t=o.geometry.coordinates[1];s.position=r.Z.fromDegrees(e,t)}t.push(s)}return t}const u="http://www.mapinfo.com/mxp",l="http://www.opengis.net/gml";function h(e){const t=e.documentElement;if("MultiFeatureCollection"===t.localName&&t.namespaceURI===u)return function(e){const t=[],i=e.documentElement.getElementsByTagNameNS(u,"Feature");for(let e=0;e<i.length;++e){const r=i[e],n={},o=r.getElementsByTagNameNS(u,"Val");for(let e=0;e<o.length;++e){const t=o[e];if(t.hasAttribute("ref")){const e=t.getAttribute("ref"),i=t.textContent.trim();n[e]=i}}const s=new a.Z;s.data=r,s.properties=n,s.configureNameFromProperties(n),s.configureDescriptionFromProperties(n),t.push(s)}return t}(e);if("FeatureInfoResponse"===t.localName&&"http://www.esri.com/wms"===t.namespaceURI)return function(e){const t=e.documentElement,i=[];let r;const n=t.getElementsByTagNameNS("*","FIELDS");if(n.length>0)for(let e=0;e<n.length;++e){const t=n[e];r={};const o=t.attributes;for(let e=0;e<o.length;++e){const t=o[e];r[t.name]=t.value}i.push(f(t,r))}else{const e=t.getElementsByTagNameNS("*","FeatureInfo");for(let t=0;t<e.length;++t){const n=e[t];r={};const o=n.childNodes;for(let e=0;e<o.length;++e){const t=o[e];t.nodeType===Node.ELEMENT_NODE&&(r[t.localName]=t.textContent)}i.push(f(n,r))}}return i}(e);if("FeatureCollection"===t.localName&&"http://www.opengis.net/wfs"===t.namespaceURI)return function(e){const t=[],i=e.documentElement.getElementsByTagNameNS(l,"featureMember");for(let e=0;e<i.length;++e){const r=i[e],n={};d(r,n),t.push(f(r,n))}return t}(e);if("ServiceExceptionReport"===t.localName)throw new s.Z((new XMLSerializer).serializeToString(t));return"msGMLOutput"===t.localName?function(e){const t=[];let i;const r=e.documentElement.childNodes;for(let e=0;e<r.length;e++)if(r[e].nodeType===Node.ELEMENT_NODE){i=r[e];break}if(!(0,n.Z)(i))throw new s.Z("Unable to find first child of the feature info xml document");const o=i.childNodes;for(let e=0;e<o.length;++e){const i=o[e];if(i.nodeType===Node.ELEMENT_NODE){const e={};d(i,e),t.push(f(i,e))}}return t}(e):function(e){const t=(new XMLSerializer).serializeToString(e),i=document.createElement("div"),r=document.createElement("pre");r.textContent=t,i.appendChild(r);const n=new a.Z;return n.data=e,n.description=i.innerHTML,[n]}(e)}function d(e,t){let i=!0;for(let r=0;r<e.childNodes.length;++r){const n=e.childNodes[r];n.nodeType===Node.ELEMENT_NODE&&(i=!1),"Point"!==n.localName&&"LineString"!==n.localName&&"Polygon"!==n.localName&&"boundedBy"!==n.localName&&(n.hasChildNodes()&&d(n,t)&&(t[n.localName]=n.textContent))}return i}function f(e,t){const i=new a.Z;return i.data=e,i.properties=t,i.configureNameFromProperties(t),i.configureDescriptionFromProperties(t),i}const p=/<body>\s*<\/body>/im,m=/<ServiceExceptionReport([\s\S]*)<\/ServiceExceptionReport>/im,g=/<title>([\s\S]*)<\/title>/im;function _(e){if(p.test(e))return;if(m.test(e))return;let t;const i=g.exec(e);i&&i.length>1&&(t=i[1]);const r=new a.Z;return r.name=t,r.description=e,r.data=e,[r]}const Z=function(e,t,i){if(!(0,n.Z)(e))throw new o.Z("type is required.");if(this.type=e,!(0,n.Z)(t))if("json"===e)t="application/json";else if("xml"===e)t="text/xml";else if("html"===e)t="text/html";else{if("text"!==e)throw new o.Z('format is required when type is not "json", "xml", "html", or "text".');t="text/plain"}if(this.format=t,!(0,n.Z)(i))if("json"===e)i=c;else if("xml"===e)i=h;else if("html"===e)i=_;else{if("text"!==e)throw new o.Z('callback is required when type is not "json", "xml", "html", or "text".');i=_}this.callback=i}},29857:(e,t,i)=>{i.d(t,{Z:()=>G});var r=i(52351),n=i(25914),o=i(93517),s=i(66866),a=i(6785),c=i(88779),u=i(54485),l=i(90332),h=i(20176),d=i(99996),f=i(19759),p=i(92893),m=i(14090),g=i(14633),_=i(43262),Z=i(34152),y=i(67197),b=i(7048),v=i(47334),T=i(22120),x=i(435),w=i(70444),S=i(4473),A=i(26259),E=i(33083),C=i(27170),I=i(15836),L=i(87795),P=i(18061),O=i(49616);function R(e){e=(0,c.Z)(e,d.Z.WGS84);const t=new f.Z({ellipsoid:e}),i=new I.Z;this._ellipsoid=e,this._imageryLayerCollection=i,this._surfaceShaderSet=new A.Z,this._material=void 0,this._surface=new L.Z({tileProvider:new E.Z({terrainProvider:t,imageryLayers:i,surfaceShaderSet:this._surfaceShaderSet})}),this._terrainProvider=t,this._terrainProviderChanged=new p.Z,this._undergroundColor=a.Z.clone(a.Z.BLACK),this._undergroundColorAlphaByDistance=new g.Z(e.maximumRadius/1e3,0,e.maximumRadius/5,1),this._translucency=new C.Z,D(this),this.show=!0,this._oceanNormalMapResourceDirty=!0,this._oceanNormalMapResource=new y.Z({url:(0,n.Z)("Assets/Textures/waterNormalsSmall.jpg")}),this.maximumScreenSpaceError=2,this.tileCacheSize=100,this.loadingDescendantLimit=20,this.preloadAncestors=!0,this.preloadSiblings=!1,this.fillHighlightColor=void 0,this.enableLighting=!1,this.lambertDiffuseMultiplier=.9,this.dynamicAtmosphereLighting=!0,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!0,this.atmosphereLightIntensity=10,this.atmosphereRayleighCoefficient=new o.Z(55e-7,13e-6,284e-7),this.atmosphereMieCoefficient=new o.Z(21e-6,21e-6,21e-6),this.atmosphereRayleighScaleHeight=1e4,this.atmosphereMieScaleHeight=3200,this.atmosphereMieAnisotropy=.9,this.lightingFadeOutDistance=1e7,this.lightingFadeInDistance=2e7,this.nightFadeOutDistance=1e7,this.nightFadeInDistance=5e7,this.showWaterEffect=!0,this.depthTestAgainstTerrain=!1,this.shadows=O.Z.RECEIVE_ONLY,this.atmosphereHueShift=0,this.atmosphereSaturationShift=0,this.atmosphereBrightnessShift=0,this.terrainExaggeration=1,this.terrainExaggerationRelativeHeight=0,this.showSkirts=!0,this.backFaceCulling=!0,this._oceanNormalMap=void 0,this._zoomedOutOceanSpecularIntensity=void 0}function D(e){const t=[],i=(0,u.Z)(e._material)&&(e._material.shaderSource.match(/slope/)||e._material.shaderSource.match("normalEC")),r=[w.Z,S.Z];!(0,u.Z)(e._material)||i&&!e._terrainProvider.requestVertexNormals?e._surface._tileProvider.materialUniformMap=void 0:(r.push(e._material.shaderSource),t.push("APPLY_MATERIAL"),e._surface._tileProvider.materialUniformMap=e._material._uniforms),r.push(T.Z),e._surfaceShaderSet.baseVertexShaderSource=new b.Z({sources:[w.Z,S.Z,x.Z],defines:t}),e._surfaceShaderSet.baseFragmentShaderSource=new b.Z({sources:r,defines:t}),e._surfaceShaderSet.material=e._material}Object.defineProperties(R.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},imageryLayers:{get:function(){return this._imageryLayerCollection}},imageryLayersUpdatedEvent:{get:function(){return this._surface.tileProvider.imageryLayersUpdatedEvent}},tilesLoaded:{get:function(){return!(0,u.Z)(this._surface)||this._surface.tileProvider.ready&&0===this._surface._tileLoadQueueHigh.length&&0===this._surface._tileLoadQueueMedium.length&&0===this._surface._tileLoadQueueLow.length}},baseColor:{get:function(){return this._surface.tileProvider.baseColor},set:function(e){this._surface.tileProvider.baseColor=e}},clippingPlanes:{get:function(){return this._surface.tileProvider.clippingPlanes},set:function(e){this._surface.tileProvider.clippingPlanes=e}},cartographicLimitRectangle:{get:function(){return this._surface.tileProvider.cartographicLimitRectangle},set:function(e){(0,u.Z)(e)||(e=Z.Z.clone(Z.Z.MAX_VALUE)),this._surface.tileProvider.cartographicLimitRectangle=e}},oceanNormalMapUrl:{get:function(){return this._oceanNormalMapResource.url},set:function(e){this._oceanNormalMapResource.url=e,this._oceanNormalMapResourceDirty=!0}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){e!==this._terrainProvider&&(this._terrainProvider=e,this._terrainProviderChanged.raiseEvent(e),(0,u.Z)(this._material)&&D(this))}},terrainProviderChanged:{get:function(){return this._terrainProviderChanged}},tileLoadProgressEvent:{get:function(){return this._surface.tileLoadProgressEvent}},material:{get:function(){return this._material},set:function(e){this._material!==e&&(this._material=e,D(this))}},undergroundColor:{get:function(){return this._undergroundColor},set:function(e){this._undergroundColor=a.Z.clone(e,this._undergroundColor)}},undergroundColorAlphaByDistance:{get:function(){return this._undergroundColorAlphaByDistance},set:function(e){if((0,u.Z)(e)&&e.far<e.near)throw new h.Z("far distance must be greater than near distance.");this._undergroundColorAlphaByDistance=g.Z.clone(e,this._undergroundColorAlphaByDistance)}},translucency:{get:function(){return this._translucency}}});const F=[],M={start:0,stop:0};R.prototype.pickWorldCoordinates=function(e,t,i,n){if(!(0,u.Z)(e))throw new h.Z("ray is required");if(!(0,u.Z)(t))throw new h.Z("scene is required");i=(0,c.Z)(i,!0);const s=t.mode,a=t.mapProjection,l=F;l.length=0;const d=this._surface._tilesToRender;let f,p,g=d.length;for(p=0;p<g;++p){f=d[p];const t=f.data;if(!(0,u.Z)(t))continue;let i=t.pickBoundingSphere;if(s!==P.Z.SCENE3D)t.pickBoundingSphere=i=r.Z.fromRectangleWithHeights2D(f.rectangle,a,t.tileBoundingRegion.minimumHeight,t.tileBoundingRegion.maximumHeight,i),o.Z.fromElements(i.center.z,i.center.x,i.center.y,i.center);else{if(!(0,u.Z)(t.renderedMesh))continue;r.Z.clone(t.tileBoundingRegion.boundingSphere,i)}const n=m.Z.raySphere(e,i,M);(0,u.Z)(n)&&l.push(t)}var _;let Z;for(l.sort((_=e.origin,function(e,t){return r.Z.distanceSquaredTo(e.pickBoundingSphere,_)-r.Z.distanceSquaredTo(t.pickBoundingSphere,_)})),g=l.length,p=0;p<g&&(Z=l[p].pick(e,t.mode,t.mapProjection,i,n),!(0,u.Z)(Z));++p);return Z};const N=new s.Z;R.prototype.pick=function(e,t,i){if(i=this.pickWorldCoordinates(e,t,!0,i),(0,u.Z)(i)&&t.mode!==P.Z.SCENE3D){i=o.Z.fromElements(i.y,i.z,i.x,i);const e=t.mapProjection.unproject(i,N);i=t.globe.ellipsoid.cartographicToCartesian(e,i)}return i};const B=new o.Z,H=new o.Z,V=new s.Z,U=new _.Z;function k(e,t){return(0,u.Z)(e)&&Z.Z.contains(e.rectangle,t)?e:void 0}R.prototype.getHeight=function(e){if(!(0,u.Z)(e))throw new h.Z("cartographic is required");const t=this._surface._levelZeroTiles;if(!(0,u.Z)(t))return;let i,r;const n=t.length;for(r=0;r<n&&(i=t[r],!Z.Z.contains(i.rectangle,e));++r);if(r>=n)return;let s=i;for(;(0,u.Z)(i);)i=k(i._southwestChild,e)||k(i._southeastChild,e)||k(i._northwestChild,e)||i._northeastChild,(0,u.Z)(i)&&(0,u.Z)(i.data)&&(0,u.Z)(i.data.renderedMesh)&&(s=i);if(i=s,!(0,u.Z)(i)||!(0,u.Z)(i.data)||!(0,u.Z)(i.data.renderedMesh))return;const a=this._surface._tileProvider.tilingScheme.projection,l=this._surface._tileProvider.tilingScheme.ellipsoid,d=o.Z.fromRadians(e.longitude,e.latitude,0,l,B),f=U,p=l.geodeticSurfaceNormal(d,f.direction),m=l.getSurfaceNormalIntersectionWithZAxis(d,11500,f.origin);if(!(0,u.Z)(m)){let e;(0,u.Z)(i.data.tileBoundingRegion)&&(e=i.data.tileBoundingRegion.minimumHeight);const t=Math.min((0,c.Z)(e,0),-11500),r=o.Z.multiplyByScalar(p,Math.abs(t)+1,H);o.Z.subtract(d,r,f.origin)}const g=i.data.pick(f,void 0,a,!1,H);return(0,u.Z)(g)?l.cartesianToCartographic(g,V).height:void 0},R.prototype.update=function(e){this.show&&e.passes.render&&this._surface.update(e)},R.prototype.beginFrame=function(e){const t=this._surface,i=t.tileProvider,r=this.terrainProvider,n=this.showWaterEffect&&r.ready&&r.hasWaterMask;if(n&&this._oceanNormalMapResourceDirty){this._oceanNormalMapResourceDirty=!1;const t=this._oceanNormalMapResource,i=t.url;if((0,u.Z)(i)){const r=this;t.fetchImage().then((function(t){i===r._oceanNormalMapResource.url&&(r._oceanNormalMap=r._oceanNormalMap&&r._oceanNormalMap.destroy(),r._oceanNormalMap=new v.Z({context:e.context,source:t}))}))}else this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy()}const o=e.passes,s=e.mode;o.render&&(this.showGroundAtmosphere?this._zoomedOutOceanSpecularIntensity=.4:this._zoomedOutOceanSpecularIntensity=.5,t.maximumScreenSpaceError=this.maximumScreenSpaceError,t.tileCacheSize=this.tileCacheSize,t.loadingDescendantLimit=this.loadingDescendantLimit,t.preloadAncestors=this.preloadAncestors,t.preloadSiblings=this.preloadSiblings,i.terrainProvider=this.terrainProvider,i.lightingFadeOutDistance=this.lightingFadeOutDistance,i.lightingFadeInDistance=this.lightingFadeInDistance,i.nightFadeOutDistance=this.nightFadeOutDistance,i.nightFadeInDistance=this.nightFadeInDistance,i.zoomedOutOceanSpecularIntensity=s===P.Z.SCENE3D?this._zoomedOutOceanSpecularIntensity:0,i.hasWaterMask=n,i.oceanNormalMap=this._oceanNormalMap,i.enableLighting=this.enableLighting,i.dynamicAtmosphereLighting=this.dynamicAtmosphereLighting,i.dynamicAtmosphereLightingFromSun=this.dynamicAtmosphereLightingFromSun,i.showGroundAtmosphere=this.showGroundAtmosphere,i.atmosphereLightIntensity=this.atmosphereLightIntensity,i.atmosphereRayleighCoefficient=this.atmosphereRayleighCoefficient,i.atmosphereMieCoefficient=this.atmosphereMieCoefficient,i.atmosphereRayleighScaleHeight=this.atmosphereRayleighScaleHeight,i.atmosphereMieScaleHeight=this.atmosphereMieScaleHeight,i.atmosphereMieAnisotropy=this.atmosphereMieAnisotropy,i.shadows=this.shadows,i.hueShift=this.atmosphereHueShift,i.saturationShift=this.atmosphereSaturationShift,i.brightnessShift=this.atmosphereBrightnessShift,i.fillHighlightColor=this.fillHighlightColor,i.showSkirts=this.showSkirts,i.backFaceCulling=this.backFaceCulling,i.undergroundColor=this._undergroundColor,i.undergroundColorAlphaByDistance=this._undergroundColorAlphaByDistance,i.lambertDiffuseMultiplier=this.lambertDiffuseMultiplier,t.beginFrame(e))},R.prototype.render=function(e){this.show&&((0,u.Z)(this._material)&&this._material.update(e.context),this._surface.render(e))},R.prototype.endFrame=function(e){this.show&&e.passes.render&&this._surface.endFrame(e)},R.prototype.isDestroyed=function(){return!1},R.prototype.destroy=function(){return this._surfaceShaderSet=this._surfaceShaderSet&&this._surfaceShaderSet.destroy(),this._surface=this._surface&&this._surface.destroy(),this._oceanNormalMap=this._oceanNormalMap&&this._oceanNormalMap.destroy(),(0,l.Z)(this)};const G=R},61007:(e,t,i)=>{i.d(t,{Z:()=>y});var r=i(23114),n=i(6785),o=i(54485),s=i(90332),a=i(74366),c=i(37791),u=i(27400),l=i(74064),h=i(2312),d=i(96084),f=i(995),p=i(84067),m=i(88307),g=i(59215);function _(){this._picking=!1,this._numSamples=1,this._tempCopyDepthTexture=void 0,this._pickColorFramebuffer=new c.Z({depthStencil:!0,supportsDepthTexture:!0}),this._outputFramebuffer=new c.Z({depthStencil:!0,supportsDepthTexture:!0}),this._copyDepthFramebuffer=new c.Z,this._tempCopyDepthFramebuffer=new c.Z,this._updateDepthFramebuffer=new c.Z({createColorAttachments:!1,createDepthAttachments:!1,depthStencil:!0}),this._clearGlobeColorCommand=void 0,this._copyColorCommand=void 0,this._copyDepthCommand=void 0,this._tempCopyDepthCommand=void 0,this._updateDepthCommand=void 0,this._viewport=new r.Z,this._rs=void 0,this._rsBlend=void 0,this._rsUpdate=void 0,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0,this._clearGlobeDepth=void 0}function Z(e,t,i,s,c){e._viewport.width=i,e._viewport.height=s;const u=!r.Z.equals(e._viewport,c.viewport);let _=u!==e._useScissorTest;e._useScissorTest=u,r.Z.equals(e._scissorRectangle,c.viewport)||(e._scissorRectangle=r.Z.clone(c.viewport,e._scissorRectangle),_=!0),(0,o.Z)(e._rs)&&r.Z.equals(e._viewport,e._rs.viewport)&&!_||(e._rs=l.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}}),e._rsBlend=l.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},blending:f.Z.ALPHA_BLEND}),e._rsUpdate=l.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle},stencilTest:{enabled:!0,frontFunction:m.Z.EQUAL,frontOperation:{fail:g.Z.KEEP,zFail:g.Z.KEEP,zPass:g.Z.KEEP},backFunction:m.Z.NEVER,reference:p.Z.CESIUM_3D_TILE_MASK,mask:p.Z.CESIUM_3D_TILE_MASK}})),(0,o.Z)(e._copyDepthCommand)||(e._copyDepthCommand=t.createViewportQuadCommand(d.Z,{uniformMap:{u_depthTexture:function(){return e.colorFramebufferManager.getDepthStencilTexture()}},owner:e})),e._copyDepthCommand.framebuffer=e._copyDepthFramebuffer.framebuffer,e._copyDepthCommand.renderState=e._rs,(0,o.Z)(e._copyColorCommand)||(e._copyColorCommand=t.createViewportQuadCommand(h.Z,{uniformMap:{colorTexture:function(){return e.colorFramebufferManager.getColorTexture()}},owner:e})),e._copyColorCommand.renderState=e._rs,(0,o.Z)(e._tempCopyDepthCommand)||(e._tempCopyDepthCommand=t.createViewportQuadCommand(d.Z,{uniformMap:{u_depthTexture:function(){return e._tempCopyDepthTexture}},owner:e})),e._tempCopyDepthCommand.framebuffer=e._tempCopyDepthFramebuffer.framebuffer,e._tempCopyDepthCommand.renderState=e._rs,(0,o.Z)(e._updateDepthCommand)||(e._updateDepthCommand=t.createViewportQuadCommand(h.Z,{uniformMap:{colorTexture:function(){return e._tempCopyDepthFramebuffer.getColorTexture()}},owner:e})),e._updateDepthCommand.framebuffer=e._updateDepthFramebuffer.framebuffer,e._updateDepthCommand.renderState=e._rsUpdate,(0,o.Z)(e._clearGlobeColorCommand)||(e._clearGlobeColorCommand=new a.Z({color:new n.Z(0,0,0,0),stencil:0,owner:e})),e._clearGlobeColorCommand.framebuffer=e.framebuffer}Object.defineProperties(_.prototype,{colorFramebufferManager:{get:function(){return this._picking?this._pickColorFramebuffer:this._outputFramebuffer}},framebuffer:{get:function(){return this.colorFramebufferManager.framebuffer}},depthStencilTexture:{get:function(){return this.colorFramebufferManager.getDepthStencilTexture()}},picking:{get:function(){return this._picking},set:function(e){this._picking=e}}}),_.prototype.update=function(e,t,i,r,n,o){const s=i.width,a=i.height,c=n?e.halfFloatingPointTexture?u.Z.HALF_FLOAT:u.Z.FLOAT:u.Z.UNSIGNED_BYTE;this._numSamples=r,this.picking?this._pickColorFramebuffer.update(e,s,a):this._outputFramebuffer.update(e,s,a,r,c),this._copyDepthFramebuffer.update(e,s,a),Z(this,e,s,a,t),e.uniformState.globeDepthTexture=void 0,this._useHdr=n,this._clearGlobeDepth=o},_.prototype.prepareColorTextures=function(e,t){!this.picking&&this._numSamples>1&&this._outputFramebuffer.prepareTextures(e,t)},_.prototype.executeCopyDepth=function(e,t){(0,o.Z)(this._copyDepthCommand)&&(this.prepareColorTextures(e),this._copyDepthCommand.execute(e,t),e.uniformState.globeDepthTexture=this._copyDepthFramebuffer.getColorTexture())},_.prototype.executeUpdateDepth=function(e,t,i,r){const n=(0,o.Z)(r)?r:t.framebuffer.depthStencilTexture;if(i||n!==this.colorFramebufferManager.getDepthStencilTexture()){if((0,o.Z)(this._updateDepthCommand)){if(!(0,o.Z)(this._updateDepthFramebuffer.framebuffer)||this._updateDepthFramebuffer.getDepthStencilTexture()!==n||this._updateDepthFramebuffer.getColorTexture()!==this._copyDepthFramebuffer.getColorTexture()){const i=this._copyDepthFramebuffer.getColorTexture().width,r=this._copyDepthFramebuffer.getColorTexture().height;this._tempCopyDepthFramebuffer.destroy(),this._tempCopyDepthFramebuffer.update(e,i,r);const o=this._copyDepthFramebuffer.getColorTexture();this._updateDepthFramebuffer.setColorTexture(o,0),this._updateDepthFramebuffer.setDepthStencilTexture(n),this._updateDepthFramebuffer.update(e,i,r),Z(this,e,i,r,t)}this._tempCopyDepthTexture=n,this._tempCopyDepthCommand.execute(e,t),this._updateDepthCommand.execute(e,t)}}else(0,o.Z)(this._copyDepthCommand)&&this._copyDepthCommand.execute(e,t)},_.prototype.executeCopyColor=function(e,t){(0,o.Z)(this._copyColorCommand)&&this._copyColorCommand.execute(e,t)},_.prototype.clear=function(e,t,i){const r=this._clearGlobeColorCommand;(0,o.Z)(r)&&(n.Z.clone(i,r.color),this.colorFramebufferManager.clear(e,r,t))},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){var e;return(e=this)._pickColorFramebuffer.destroy(),e._outputFramebuffer.destroy(),e._copyDepthFramebuffer.destroy(),e._tempCopyDepthFramebuffer.destroy(),e._updateDepthFramebuffer.destroy(),(0,o.Z)(this._copyColorCommand)&&(this._copyColorCommand.shaderProgram=this._copyColorCommand.shaderProgram.destroy()),(0,o.Z)(this._copyDepthCommand)&&(this._copyDepthCommand.shaderProgram=this._copyDepthCommand.shaderProgram.destroy()),(0,o.Z)(this._tempCopyDepthCommand)&&(this._tempCopyDepthCommand.shaderProgram=this._tempCopyDepthCommand.shaderProgram.destroy()),(0,o.Z)(this._updateDepthCommand)&&(this._updateDepthCommand.shaderProgram=this._updateDepthCommand.shaderProgram.destroy()),(0,s.Z)(this)};const y=_},26259:(e,t,i)=>{i.d(t,{Z:()=>h});var r=i(54485),n=i(90332),o=i(1553),s=i(17426),a=i(44804),c=i(18061);function u(e,t,i,r,n){this.numberOfDayTextures=e,this.flags=t,this.material=i,this.shaderProgram=r,this.clippingShaderState=n}function l(){this.baseVertexShaderSource=void 0,this.baseFragmentShaderSource=void 0,this._shadersByTexturesFlags=[],this.material=void 0}l.prototype.getShaderProgram=function(e){const t=e.frameState,i=e.surfaceTile,n=e.numberOfDayTextures,l=e.applyBrightness,h=e.applyContrast,d=e.applyHue,f=e.applySaturation,p=e.applyGamma,m=e.applyAlpha,g=e.applyDayNightAlpha,_=e.applySplit,Z=e.showReflectiveOcean,y=e.showOceanWaves,b=e.enableLighting,v=e.dynamicAtmosphereLighting,T=e.dynamicAtmosphereLightingFromSun,x=e.showGroundAtmosphere,w=e.perFragmentGroundAtmosphere,S=e.hasVertexNormals,A=e.useWebMercatorProjection,E=e.enableFog,C=e.enableClippingPlanes,I=e.clippingPlanes,L=e.clippedByBoundaries,P=e.hasImageryLayerCutout,O=e.colorCorrect,R=e.highlightFillTile,D=e.colorToAlpha,F=e.hasGeodeticSurfaceNormals,M=e.hasExaggeration,N=e.showUndergroundColor,B=e.translucent;let H=0,V="";const U=i.renderedMesh.encoding;U.quantization===o.Z.BITS12&&(H=1,V="QUANTIZATION_BITS12");let k=0,G="";L&&(k=1,G="TILE_LIMIT_RECTANGLE");let j=0,q="";P&&(j=1,q="APPLY_IMAGERY_CUTOUT");const z=t.mode,W=z|l<<2|h<<3|d<<4|f<<5|p<<6|m<<7|Z<<8|y<<9|b<<10|v<<11|T<<12|x<<13|w<<14|S<<15|A<<16|E<<17|H<<18|_<<19|C<<20|k<<21|j<<22|O<<23|R<<24|D<<25|F<<26|M<<27|N<<28|B<<29|g<<30;let Y=0;(0,r.Z)(I)&&I.length>0&&(Y=C?I.clippingPlanesState:0);let K=i.surfaceShader;if((0,r.Z)(K)&&K.numberOfDayTextures===n&&K.flags===W&&K.material===this.material&&K.clippingShaderState===Y)return K.shaderProgram;let J=this._shadersByTexturesFlags[n];if((0,r.Z)(J)||(J=this._shadersByTexturesFlags[n]=[]),K=J[W],!(0,r.Z)(K)||K.material!==this.material||K.clippingShaderState!==Y){const e=this.baseVertexShaderSource.clone(),i=this.baseFragmentShaderSource.clone();0!==Y&&i.sources.unshift((0,a.Z)(I,t.context)),e.defines.push(V),i.defines.push(`TEXTURE_UNITS ${n}`,G,q),l&&i.defines.push("APPLY_BRIGHTNESS"),h&&i.defines.push("APPLY_CONTRAST"),d&&i.defines.push("APPLY_HUE"),f&&i.defines.push("APPLY_SATURATION"),p&&i.defines.push("APPLY_GAMMA"),m&&i.defines.push("APPLY_ALPHA"),g&&i.defines.push("APPLY_DAY_NIGHT_ALPHA"),Z&&(i.defines.push("SHOW_REFLECTIVE_OCEAN"),e.defines.push("SHOW_REFLECTIVE_OCEAN")),y&&i.defines.push("SHOW_OCEAN_WAVES"),D&&i.defines.push("APPLY_COLOR_TO_ALPHA"),N&&(e.defines.push("UNDERGROUND_COLOR"),i.defines.push("UNDERGROUND_COLOR")),B&&(e.defines.push("TRANSLUCENT"),i.defines.push("TRANSLUCENT")),b&&(S?(e.defines.push("ENABLE_VERTEX_LIGHTING"),i.defines.push("ENABLE_VERTEX_LIGHTING")):(e.defines.push("ENABLE_DAYNIGHT_SHADING"),i.defines.push("ENABLE_DAYNIGHT_SHADING"))),v&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),i.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING"),T&&(e.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"),i.defines.push("DYNAMIC_ATMOSPHERE_LIGHTING_FROM_SUN"))),x&&(e.defines.push("GROUND_ATMOSPHERE"),i.defines.push("GROUND_ATMOSPHERE"),w&&(e.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"),i.defines.push("PER_FRAGMENT_GROUND_ATMOSPHERE"))),e.defines.push("INCLUDE_WEB_MERCATOR_Y"),i.defines.push("INCLUDE_WEB_MERCATOR_Y"),E&&(e.defines.push("FOG"),i.defines.push("FOG")),_&&i.defines.push("APPLY_SPLIT"),C&&i.defines.push("ENABLE_CLIPPING_PLANES"),O&&i.defines.push("COLOR_CORRECT"),R&&i.defines.push("HIGHLIGHT_FILL_TILE"),F&&e.defines.push("GEODETIC_SURFACE_NORMALS"),M&&e.defines.push("EXAGGERATION");let r="    vec4 computeDayColor(vec4 initialColor, vec3 textureCoordinates, float nightBlend)\n    {\n        vec4 color = initialColor;\n";P&&(r+="        vec4 cutoutAndColorResult;\n        bool texelUnclipped;\n");for(let e=0;e<n;++e)r+=P?`        cutoutAndColorResult = u_dayTextureCutoutRectangles[${e}];\n        texelUnclipped = v_textureCoordinates.x < cutoutAndColorResult.x || cutoutAndColorResult.z < v_textureCoordinates.x || v_textureCoordinates.y < cutoutAndColorResult.y || cutoutAndColorResult.w < v_textureCoordinates.y;\n        cutoutAndColorResult = sampleAndBlend(\n`:"        color = sampleAndBlend(\n",r+=`            color,\n            u_dayTextures[${e}],\n            u_dayTextureUseWebMercatorT[${e}] ? textureCoordinates.xz : textureCoordinates.xy,\n            u_dayTextureTexCoordsRectangle[${e}],\n            u_dayTextureTranslationAndScale[${e}],\n            ${m?`u_dayTextureAlpha[${e}]`:"1.0"},\n            ${g?`u_dayTextureNightAlpha[${e}]`:"1.0"},\n${g?`u_dayTextureDayAlpha[${e}]`:"1.0"},\n${l?`u_dayTextureBrightness[${e}]`:"0.0"},\n            ${h?`u_dayTextureContrast[${e}]`:"0.0"},\n            ${d?`u_dayTextureHue[${e}]`:"0.0"},\n            ${f?`u_dayTextureSaturation[${e}]`:"0.0"},\n            ${p?`u_dayTextureOneOverGamma[${e}]`:"0.0"},\n            ${_?`u_dayTextureSplit[${e}]`:"0.0"},\n            ${D?`u_colorsToAlpha[${e}]`:"vec4(0.0)"},\n        nightBlend        );\n`,P&&(r+="        color = czm_branchFreeTernary(texelUnclipped, cutoutAndColorResult, color);\n");r+="        return color;\n    }",i.sources.push(r),e.sources.push(function(e){let t;switch(e){case c.Z.SCENE3D:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPosition3DMode(position, height, textureCoordinates); }";break;case c.Z.SCENE2D:case c.Z.COLUMBUS_VIEW:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionColumbusViewMode(position, height, textureCoordinates); }";break;case c.Z.MORPHING:t="vec4 getPosition(vec3 position, float height, vec2 textureCoordinates) { return getPositionMorphingMode(position, height, textureCoordinates); }"}return t}(z)),e.sources.push(function(e){return e?"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DMercatorYPositionFraction(textureCoordinates); }":"float get2DYPositionFraction(vec2 textureCoordinates) { return get2DGeographicYPositionFraction(textureCoordinates); }"}(A));const o=s.Z.fromCache({context:t.context,vertexShaderSource:e,fragmentShaderSource:i,attributeLocations:U.getAttributeLocations()});K=J[W]=new u(n,W,this.material,o,Y)}return i.surfaceShader=K,K.shaderProgram},l.prototype.destroy=function(){let e,t;const i=this._shadersByTexturesFlags;for(const n in i)if(i.hasOwnProperty(n)){const o=i[n];if(!(0,r.Z)(o))continue;for(e in o)o.hasOwnProperty(e)&&(t=o[e],(0,r.Z)(t)&&t.shaderProgram.destroy())}return(0,n.Z)(this)};const h=l},37252:(e,t,i)=>{i.d(t,{Z:()=>B});var r=i(52351),n=i(93517),o=i(90868),s=i(66866),a=i(54485),c=i(39172),u=i(14090),l=i(91166),h=i(43262),d=i(51625),f=i(62969),p=i(22041),m=i(87569),g=i(85002),_=i(31328),Z=i(36627),y=i(27400),b=i(28696),v=i(47334),T=i(92106),x=i(48867),w=i(91373),S=i(46801),A=i(68502),E=i(36242),C=i(18061),I=i(40830);function L(){this.imagery=[],this.waterMaskTexture=void 0,this.waterMaskTranslationAndScale=new o.Z(0,0,1,1),this.terrainData=void 0,this.vertexArray=void 0,this.tileBoundingRegion=void 0,this.occludeePointInScaledSpace=new n.Z,this.boundingVolumeSourceTile=void 0,this.boundingVolumeIsFromMesh=!1,this.terrainState=I.Z.UNLOADED,this.mesh=void 0,this.fill=void 0,this.pickBoundingSphere=new r.Z,this.surfaceShader=void 0,this.isClipped=!0,this.clippedByBoundaries=!1}Object.defineProperties(L.prototype,{eligibleForUnloading:{get:function(){const e=this.terrainState;let t=!(e===I.Z.RECEIVING||e===I.Z.TRANSFORMING);const i=this.imagery;for(let e=0,r=i.length;t&&e<r;++e){const r=i[e];t=!(0,a.Z)(r.loadingImagery)||r.loadingImagery.state!==A.Z.TRANSITIONING}return t}},renderedMesh:{get:function(){return(0,a.Z)(this.vertexArray)?this.mesh:(0,a.Z)(this.fill)?this.fill.mesh:void 0}}});const P=new s.Z;function O(e,t,i,r,o,s){let c=e.getExaggeratedPosition(r,o,s);if((0,a.Z)(t)&&t!==C.Z.SCENE3D){const e=i.ellipsoid.cartesianToCartographic(c,P);c=i.project(e,s),c=n.Z.fromElements(c.z,c.x,c.y,s)}return c}const R=new n.Z,D=new n.Z,F=new n.Z;function M(e,t,i,r){const n=e.renderedMesh,o=n.vertices,s=n.encoding,a=o.length/s.stride;let c=m.Z.clone(s);c.hasGeodeticSurfaceNormals=t,c=m.Z.clone(c);const u=c.stride,l=new Float32Array(a*u);t?s.addGeodeticSurfaceNormals(o,l,i):s.removeGeodeticSurfaceNormals(o,l),n.vertices=l,n.stride=u;n!==e.mesh?(L._freeVertexArray(e.fill.vertexArray),e.fill.vertexArray=L._createVertexArrayForMesh(r.context,n)):(L._freeVertexArray(e.vertexArray),e.vertexArray=L._createVertexArrayForMesh(r.context,n)),L._freeVertexArray(e.wireframeVertexArray),e.wireframeVertexArray=void 0}L.prototype.pick=function(e,t,i,r,n){const o=this.renderedMesh;if(!(0,a.Z)(o))return;const s=o.vertices,c=o.indices,l=o.encoding,d=c.length;let f=Number.MAX_VALUE;for(let n=0;n<d;n+=3){const o=c[n],h=c[n+1],d=c[n+2],p=O(l,t,i,s,o,R),m=O(l,t,i,s,h,D),g=O(l,t,i,s,d,F),_=u.Z.rayTriangleParametric(e,p,m,g,r);(0,a.Z)(_)&&_<f&&_>=0&&(f=_)}return f!==Number.MAX_VALUE?h.Z.getPoint(e,f,n):void 0},L.prototype.freeResources=function(){(0,a.Z)(this.waterMaskTexture)&&(--this.waterMaskTexture.referenceCount,0===this.waterMaskTexture.referenceCount&&this.waterMaskTexture.destroy(),this.waterMaskTexture=void 0),this.terrainData=void 0,this.terrainState=I.Z.UNLOADED,this.mesh=void 0,this.fill=this.fill&&this.fill.destroy();const e=this.imagery;for(let t=0,i=e.length;t<i;++t)e[t].freeResources();this.imagery.length=0,this.freeVertexArray()},L.prototype.freeVertexArray=function(){L._freeVertexArray(this.vertexArray),this.vertexArray=void 0,L._freeVertexArray(this.wireframeVertexArray),this.wireframeVertexArray=void 0},L.initialize=function(e,t,i){let r=e.data;(0,a.Z)(r)||(r=e.data=new L),e.state===E.Z.START&&(!function(e,t,i){let r=t.getTileDataAvailable(e.x,e.y,e.level);if(!(0,a.Z)(r)&&(0,a.Z)(e.parent)){const t=e.parent,i=t.data;(0,a.Z)(i)&&(0,a.Z)(i.terrainData)&&(r=i.terrainData.isChildAvailable(t.x,t.y,e.x,e.y))}!1===r&&(e.data.terrainState=I.Z.FAILED);for(let r=0,n=i.length;r<n;++r){const n=i.get(r);n.show&&n._createTileImagerySkeletons(e,t)}}(e,t,i),e.state=E.Z.LOADING)},L.processStateMachine=function(e,t,i,r,n,s,c){L.initialize(e,i,r);const u=e.data;if(e.state===E.Z.LOADING&&function(e,t,i,r,n,s){const c=e.data,u=e.parent;if(c.terrainState===I.Z.FAILED&&void 0!==u){void 0!==u.data&&void 0!==u.data.terrainData&&!1!==u.data.terrainData.canUpsample||L.processStateMachine(u,t,i,r,n,s,!0)}c.terrainState===I.Z.FAILED&&function(e,t,i,r,n,o,s){const c=t.parent;if(!c)return void(t.state=E.Z.FAILED);const u=c.data.terrainData,l=c.x,h=c.y,d=c.level;if(!(0,a.Z)(u))return;const f=u.upsample(r.tilingScheme,l,h,d,n,o,s);if(!(0,a.Z)(f))return;e.terrainState=I.Z.RECEIVING,Promise.resolve(f).then((function(t){e.terrainData=t,e.terrainState=I.Z.RECEIVED})).catch((function(){e.terrainState=I.Z.FAILED}))}(c,e,0,i,e.x,e.y,e.level);c.terrainState===I.Z.UNLOADED&&function(e,t,i,r,n){function o(t){e.terrainData=t,e.terrainState=I.Z.RECEIVED,e.request=void 0}function s(o){if(e.request.state===f.Z.CANCELLED)return e.terrainData=void 0,e.terrainState=I.Z.UNLOADED,void(e.request=void 0);e.terrainState=I.Z.FAILED,e.request=void 0;const s=`Failed to obtain terrain tile X: ${i} Y: ${r} Level: ${n}. Error message: "${o}"`;t._requestError=g.Z.handleError(t._requestError,t,t.errorEvent,s,i,r,n,c)}function c(){const c=new d.Z({throttle:!1,throttleByServer:!0,type:p.Z.TERRAIN});e.request=c;const u=t.requestTileGeometry(i,r,n,c);(0,a.Z)(u)?(e.terrainState=I.Z.RECEIVING,Promise.resolve(u).then((function(e){o(e)})).catch((function(e){s(e)}))):(e.terrainState=I.Z.UNLOADED,e.request=void 0)}c()}(c,i,e.x,e.y,e.level);c.terrainState===I.Z.RECEIVED&&function(e,t,i,r,n,o){const s=i.tilingScheme,c=N;c.tilingScheme=s,c.x=r,c.y=n,c.level=o,c.exaggeration=t.terrainExaggeration,c.exaggerationRelativeHeight=t.terrainExaggerationRelativeHeight,c.throttle=!0;const u=e.terrainData.createMesh(c);if(!(0,a.Z)(u))return;e.terrainState=I.Z.TRANSFORMING,Promise.resolve(u).then((function(t){e.mesh=t,e.terrainState=I.Z.TRANSFORMED})).catch((function(){e.terrainState=I.Z.FAILED}))}(c,t,i,e.x,e.y,e.level);c.terrainState===I.Z.TRANSFORMED&&(!function(e,t,i,r,n,o,s){e.vertexArray=L._createVertexArrayForMesh(t,e.mesh),e.terrainState=I.Z.READY,e.fill=e.fill&&e.fill.destroy(s)}(c,t.context,0,e.x,e.y,e.level,s),c.updateExaggeration(e,t,n));if(c.terrainState>=I.Z.RECEIVED&&void 0===c.waterMaskTexture&&i.hasWaterMask){if(void 0!==c.terrainData.waterMask)!function(e,t){const i=t.terrainData.waterMask,r=function(e){let t=e.cache.tile_waterMaskData;if(!(0,a.Z)(t)){const i=v.Z.create({context:e,pixelFormat:l.Z.LUMINANCE,pixelDatatype:y.Z.UNSIGNED_BYTE,source:{arrayBufferView:new Uint8Array([255]),width:1,height:1}});i.referenceCount=1;t={allWaterTexture:i,sampler:new b.Z({wrapS:w.Z.CLAMP_TO_EDGE,wrapT:w.Z.CLAMP_TO_EDGE,minificationFilter:x.Z.LINEAR,magnificationFilter:T.Z.LINEAR}),destroy:function(){this.allWaterTexture.destroy()}},e.cache.tile_waterMaskData=t}return t}(e);let n;const s=i.length;if(1===s){if(0===i[0])return;n=r.allWaterTexture}else{const t=Math.sqrt(s);n=v.Z.create({context:e,pixelFormat:l.Z.LUMINANCE,pixelDatatype:y.Z.UNSIGNED_BYTE,source:{width:t,height:t,arrayBufferView:i},sampler:r.sampler,flipY:!1}),n.referenceCount=0}++n.referenceCount,t.waterMaskTexture=n,o.Z.fromElements(0,0,1,1,t.waterMaskTranslationAndScale)}(t.context,c);else{const t=c._findAncestorTileWithTerrainData(e);(0,a.Z)(t)&&(0,a.Z)(t.data.waterMaskTexture)&&(c.waterMaskTexture=t.data.waterMaskTexture,++c.waterMaskTexture.referenceCount,c._computeWaterMaskTranslationAndScale(e,t,c.waterMaskTranslationAndScale))}}}(e,t,i,r,n,s),c)return;const h=e.renderable;e.renderable=(0,a.Z)(u.vertexArray);const m=u.terrainState===I.Z.READY;e.upsampledFromParent=(0,a.Z)(u.terrainData)&&u.terrainData.wasCreatedByUpsampling();const _=u.processImagery(e,i,t);if(m&&_){const t=e._loadedCallbacks,i={};for(const r in t)t.hasOwnProperty(r)&&(t[r](e)||(i[r]=t[r]));e._loadedCallbacks=i,e.state=E.Z.DONE}h&&(e.renderable=!0)},L.prototype.processImagery=function(e,t,i,r){const n=e.data;let o=e.upsampledFromParent,s=!1,c=!0;const u=n.imagery;let l,h;for(l=0,h=u.length;l<h;++l){const n=u[l];if(!(0,a.Z)(n.loadingImagery)){o=!1;continue}if(n.loadingImagery.state===A.Z.PLACEHOLDER){const i=n.loadingImagery.imageryLayer;if(i.imageryProvider.ready){n.freeResources(),u.splice(l,1),i._createTileImagerySkeletons(e,t,l),--l,h=u.length;continue}o=!1}const d=n.processStateMachine(e,i,r);c=c&&d,s=s||d||(0,a.Z)(n.readyImagery),o=o&&(0,a.Z)(n.loadingImagery)&&(n.loadingImagery.state===A.Z.FAILED||n.loadingImagery.state===A.Z.INVALID)}return e.upsampledFromParent=o,e.renderable=e.renderable&&(s||c),c},L.prototype.addGeodeticSurfaceNormals=function(e,t){M(this,!0,e,t)},L.prototype.removeGeodeticSurfaceNormals=function(e){M(this,!1,void 0,e)},L.prototype.updateExaggeration=function(e,t,i){const r=this,n=r.renderedMesh;if(void 0===n)return;const o=t.terrainExaggeration,s=t.terrainExaggerationRelativeHeight,a=1!==o,c=n.encoding,u=c.exaggeration!==o,l=c.exaggerationRelativeHeight!==s;if(u||l){if(u)if(a&&!c.hasGeodeticSurfaceNormals){const i=e.tilingScheme.ellipsoid;r.addGeodeticSurfaceNormals(i,t)}else!a&&c.hasGeodeticSurfaceNormals&&r.removeGeodeticSurfaceNormals(t);if(c.exaggeration=o,c.exaggerationRelativeHeight=s,void 0!==i){i._tileToUpdateHeights.push(e);const t=e.customData,r=t.length;for(let e=0;e<r;e++){t[e].level=-1}}}};const N={tilingScheme:void 0,x:0,y:0,level:0,exaggeration:1,exaggerationRelativeHeight:0,throttle:!0};L._createVertexArrayForMesh=function(e,t){const i=t.vertices,r=_.Z.createVertexBuffer({context:e,typedArray:i,usage:Z.Z.STATIC_DRAW}),n=t.encoding.getAttributes(r),o=t.indices.indexBuffers||{};let s=o[e.id];if(!(0,a.Z)(s)||s.isDestroyed()){const i=t.indices;s=_.Z.createIndexBuffer({context:e,typedArray:i,usage:Z.Z.STATIC_DRAW,indexDatatype:c.Z.fromSizeInBytes(i.BYTES_PER_ELEMENT)}),s.vertexArrayDestroyable=!1,s.referenceCount=1,o[e.id]=s,t.indices.indexBuffers=o}else++s.referenceCount;return new S.Z({context:e,attributes:n,indexBuffer:s})},L._freeVertexArray=function(e){if((0,a.Z)(e)){const t=e.indexBuffer;e.isDestroyed()||e.destroy(),(0,a.Z)(t)&&!t.isDestroyed()&&(0,a.Z)(t.referenceCount)&&(--t.referenceCount,0===t.referenceCount&&t.destroy())}},L.prototype._findAncestorTileWithTerrainData=function(e){let t=e.parent;for(;(0,a.Z)(t)&&(!(0,a.Z)(t.data)||!(0,a.Z)(t.data.terrainData)||t.data.terrainData.wasCreatedByUpsampling());)t=t.parent;return t},L.prototype._computeWaterMaskTranslationAndScale=function(e,t,i){const r=t.rectangle,n=e.rectangle,o=n.width,s=n.height,a=o/r.width,c=s/r.height;return i.x=a*(n.west-r.west)/o,i.y=c*(n.south-r.south)/s,i.z=a,i.w=c,i};const B=L},33083:(e,t,i)=>{i.d(t,{Z:()=>Ne});var r=i(52351),n=i(66522),o=i(59015),s=i(93517),a=i(90868),c=i(66866),u=i(55077),l=i(6785),h=i(41631),d=i(51138),f=i(88779),p=i(54485),m=i(90332),g=i(20176),_=i(92893),Z=i(78224),y=i(45050),b=i(39172),v=i(3169),T=i(22874),x=i(71118),w=i(14633),S=i(42428),A=i(74408),E=i(84473),C=i(34152),I=i(44164),L=i(91571),P=i(1553),O=i(33374),R=i(65412),D=i(31328),F=i(36627),M=i(85834),N=i(71087),B=i(1577),H=i(74064),V=i(46801),U=i(995),k=i(53425),G=i(86672),j=i(37252),q=i(55706),z=i(68502),W=i(73020),Y=i(27401),K=i(36242),J=i(18061),X=i(49616),$=i(8355),Q=i(40830),ee=i(74371),te=i(29159);function ie(e){if(!(0,p.Z)(e))throw new g.Z("options is required.");if(!(0,p.Z)(e.terrainProvider))throw new g.Z("options.terrainProvider is required.");if(!(0,p.Z)(e.imageryLayers))throw new g.Z("options.imageryLayers is required.");if(!(0,p.Z)(e.surfaceShaderSet))throw new g.Z("options.surfaceShaderSet is required.");this.lightingFadeOutDistance=65e5,this.lightingFadeInDistance=9e6,this.hasWaterMask=!1,this.oceanNormalMap=void 0,this.zoomedOutOceanSpecularIntensity=.5,this.enableLighting=!1,this.dynamicAtmosphereLighting=!1,this.dynamicAtmosphereLightingFromSun=!1,this.showGroundAtmosphere=!1,this.shadows=X.Z.RECEIVE_ONLY,this.fillHighlightColor=void 0,this.hueShift=0,this.saturationShift=0,this.brightnessShift=0,this.showSkirts=!0,this.backFaceCulling=!0,this.undergroundColor=void 0,this.undergroundColorAlphaByDistance=void 0,this.lambertDiffuseMultiplier=0,this.materialUniformMap=void 0,this._materialUniformMap=void 0,this._quadtree=void 0,this._terrainProvider=e.terrainProvider,this._imageryLayers=e.imageryLayers,this._surfaceShaderSet=e.surfaceShaderSet,this._renderState=void 0,this._blendRenderState=void 0,this._disableCullingRenderState=void 0,this._disableCullingBlendRenderState=void 0,this._errorEvent=new _.Z,this._imageryLayers.layerAdded.addEventListener(ie.prototype._onLayerAdded,this),this._imageryLayers.layerRemoved.addEventListener(ie.prototype._onLayerRemoved,this),this._imageryLayers.layerMoved.addEventListener(ie.prototype._onLayerMoved,this),this._imageryLayers.layerShownOrHidden.addEventListener(ie.prototype._onLayerShownOrHidden,this),this._imageryLayersUpdatedEvent=new _.Z,this._layerOrderChanged=!1,this._tilesToRenderByTextureCount=[],this._drawCommands=[],this._uniformMaps=[],this._usedDrawCommands=0,this._vertexArraysToDestroy=[],this._debug={wireframe:!1,boundingSphereTile:void 0},this._baseColor=void 0,this._firstPassInitialColor=void 0,this.baseColor=new l.Z(0,0,.5,1),this._clippingPlanes=void 0,this.cartographicLimitRectangle=C.Z.clone(C.Z.MAX_VALUE),this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1,this._oldTerrainExaggeration=void 0,this._oldTerrainExaggerationRelativeHeight=void 0}function re(e,t){let i=e.loadingImagery;(0,p.Z)(i)||(i=e.readyImagery);let r=t.loadingImagery;return(0,p.Z)(r)||(r=t.readyImagery),i.imageryLayer._layerIndex-r.imageryLayer._layerIndex}function ne(e,t){const i=t.globeTranslucencyState;if(i.translucent){const r=e.renderState.blending.enabled;i.pushDerivedCommands(e,r,t)}else t.commandList.push(e)}Object.defineProperties(ie.prototype,{baseColor:{get:function(){return this._baseColor},set:function(e){if(!(0,p.Z)(e))throw new g.Z("value is required.");this._baseColor=e,this._firstPassInitialColor=a.Z.fromColor(e,this._firstPassInitialColor)}},quadtree:{get:function(){return this._quadtree},set:function(e){if(!(0,p.Z)(e))throw new g.Z("value is required.");this._quadtree=e}},ready:{get:function(){return this._terrainProvider.ready&&(0===this._imageryLayers.length||this._imageryLayers.get(0).imageryProvider.ready)}},tilingScheme:{get:function(){return this._terrainProvider.tilingScheme}},errorEvent:{get:function(){return this._errorEvent}},imageryLayersUpdatedEvent:{get:function(){return this._imageryLayersUpdatedEvent}},terrainProvider:{get:function(){return this._terrainProvider},set:function(e){if(this._terrainProvider!==e){if(!(0,p.Z)(e))throw new g.Z("terrainProvider is required.");this._terrainProvider=e,(0,p.Z)(this._quadtree)&&this._quadtree.invalidateAllTiles()}}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){k.Z.setOwner(e,this,"_clippingPlanes")}}}),ie.prototype.update=function(e){this._imageryLayers._update()},ie.prototype.initialize=function(e){this._imageryLayers.queueReprojectionCommands(e),this._layerOrderChanged&&(this._layerOrderChanged=!1,this._quadtree.forEachLoadedTile((function(e){e.data.imagery.sort(re)}))),function(e,t){const i=t.creditDisplay;e._terrainProvider.ready&&(0,p.Z)(e._terrainProvider.credit)&&i.addCredit(e._terrainProvider.credit);const r=e._imageryLayers;for(let e=0,t=r.length;e<t;++e){const t=r.get(e).imageryProvider;t.ready&&(0,p.Z)(t.credit)&&i.addCredit(t.credit)}}(this,e);const t=this._vertexArraysToDestroy,i=t.length;for(let e=0;e<i;++e)j.Z._freeVertexArray(t[e]);t.length=0},ie.prototype.beginUpdate=function(e){const t=this._tilesToRenderByTextureCount;for(let e=0,i=t.length;e<i;++e){const i=t[e];(0,p.Z)(i)&&(i.length=0)}const i=this._clippingPlanes;(0,p.Z)(i)&&i.enabled&&i.update(e),this._usedDrawCommands=0,this._hasLoadedTilesThisFrame=!1,this._hasFillTilesThisFrame=!1},ie.prototype.endUpdate=function(e){if(!(0,p.Z)(this._renderState)){this._renderState=H.Z.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:G.Z.LESS}}),this._blendRenderState=H.Z.fromCache({cull:{enabled:!0},depthTest:{enabled:!0,func:G.Z.LESS_OR_EQUAL},blending:U.Z.ALPHA_BLEND});let e=(0,u.Z)(this._renderState,!0);e.cull.enabled=!1,this._disableCullingRenderState=H.Z.fromCache(e),e=(0,u.Z)(this._blendRenderState,!0),e.cull.enabled=!1,this._disableCullingBlendRenderState=H.Z.fromCache(e)}this._hasFillTilesThisFrame&&this._hasLoadedTilesThisFrame&&$.Z.updateFillTiles(this,this._quadtree._tilesToRender,e,this._vertexArraysToDestroy);const t=this.quadtree,i=e.terrainExaggeration,r=e.terrainExaggerationRelativeHeight,n=this._oldTerrainExaggeration!==i||this._oldTerrainExaggerationRelativeHeight!==r;this._oldTerrainExaggeration=i,this._oldTerrainExaggerationRelativeHeight=r,n&&t.forEachLoadedTile((function(i){i.data.updateExaggeration(i,e,t)}));const o=this._tilesToRenderByTextureCount;for(let t=0,i=o.length;t<i;++t){const i=o[t];if((0,p.Z)(i))for(let t=0,r=i.length;t<r;++t){const r=i[t],n=r.data.tileBoundingRegion;Me(this,r,e),e.minimumTerrainHeight=Math.min(e.minimumTerrainHeight,n.minimumHeight)}}},ie.prototype.updateForPick=function(e){const t=this._drawCommands;for(let i=0,r=this._usedDrawCommands;i<r;++i)ne(t[i],e)},ie.prototype.cancelReprojections=function(){this._imageryLayers.cancelReprojections()},ie.prototype.getLevelMaximumGeometricError=function(e){return this._terrainProvider.getLevelMaximumGeometricError(e)},ie.prototype.loadTile=function(e,t){let i,r=t.data,n=!0;(0,p.Z)(r)&&(n=r.boundingVolumeSourceTile!==t||t._lastSelectionResult===te.Z.CULLED_BUT_NEEDED,i=r.terrainState),j.Z.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,n),r=t.data,n&&i!==t.data.terrainState&&this.computeTileVisibility(t,e,this.quadtree.occluders)!==O.Z.NONE&&r.boundingVolumeSourceTile===t&&(n=!1,j.Z.processStateMachine(t,e,this.terrainProvider,this._imageryLayers,this.quadtree,this._vertexArraysToDestroy,n))};const oe=new r.Z,se=new C.Z,ae=new C.Z,ce=new c.Z;function ue(e,t){if(t.west<t.east)return t;const i=C.Z.clone(t,ae);return C.Z.center(e,ce).longitude>0?i.east=T.Z.PI:i.west=-T.Z.PI,i}function le(e,t){if(t.cameraUnderground)return!0;if(t.globeTranslucencyState.translucent)return!0;if(e.backFaceCulling)return!1;const i=e._clippingPlanes;return!(!(0,p.Z)(i)||!i.enabled)||!C.Z.equals(e.cartographicLimitRectangle,C.Z.MAX_VALUE)}ie.prototype.computeTileVisibility=function(e,t,i){const n=this.computeDistanceToTile(e,t);e._distance=n;const o=le(this,t);if(t.fog.enabled&&!o&&T.Z.fog(n,t.fog.density)>=1)return O.Z.NONE;const a=e.data,c=a.tileBoundingRegion;if(void 0===a.boundingVolumeSourceTile)return O.Z.PARTIAL;const u=t.cullingVolume;let l=c.boundingVolume;(0,p.Z)(l)||(l=c.boundingSphere),a.clippedByBoundaries=!1;const h=ue(e.rectangle,this.cartographicLimitRectangle),d=C.Z.simpleIntersection(h,e.rectangle,se);if(!(0,p.Z)(d))return O.Z.NONE;if(C.Z.equals(d,e.rectangle)||(a.clippedByBoundaries=!0),t.mode!==J.Z.SCENE3D&&(l=oe,r.Z.fromRectangleWithHeights2D(e.rectangle,t.mapProjection,c.minimumHeight,c.maximumHeight,l),s.Z.fromElements(l.center.z,l.center.x,l.center.y,l.center),t.mode===J.Z.MORPHING&&(0,p.Z)(a.renderedMesh)&&(l=r.Z.union(c.boundingSphere,l,l))),!(0,p.Z)(l))return O.Z.PARTIAL;const f=this._clippingPlanes;if((0,p.Z)(f)&&f.enabled){const t=f.computeIntersectionWithBoundingVolume(l);if(e.isClipped=t!==v.Z.INSIDE,t===v.Z.OUTSIDE)return O.Z.NONE}let m;const g=u.computeVisibility(l);if(g===v.Z.OUTSIDE?m=O.Z.NONE:g===v.Z.INTERSECTING?m=O.Z.PARTIAL:g===v.Z.INSIDE&&(m=O.Z.FULL),m===O.Z.NONE)return m;const _=t.mode===J.Z.SCENE3D&&t.camera.frustum instanceof A.Z;if(t.mode===J.Z.SCENE3D&&!_&&(0,p.Z)(i)&&!o){const e=a.occludeePointInScaledSpace;return(0,p.Z)(e)?i.ellipsoid.isScaledSpacePointVisiblePossiblyUnderEllipsoid(e,c.minimumHeight)?m:O.Z.NONE:m}return m},ie.prototype.canRefine=function(e){if((0,p.Z)(e.data.terrainData))return!0;return void 0!==this.terrainProvider.getTileDataAvailable(2*e.x,2*e.y,e.level+1)};const he=[],de=[];ie.prototype.canRenderWithoutLosingDetail=function(e,t){const i=e.data,r=he;r.length=this._imageryLayers.length;let n,o,s,a=!1,c=!1;for((0,p.Z)(i)&&(a=i.terrainState===Q.Z.READY,c=!0,n=i.imagery),o=0,s=r.length;o<s;++o)r[o]=c;if((0,p.Z)(n))for(o=0,s=n.length;o<s;++o){const e=n[o],t=e.loadingImagery,i=!(0,p.Z)(t)||t.state===z.Z.FAILED||t.state===z.Z.INVALID,s=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;r[s]=i&&r[s]}const u=this.quadtree._lastSelectionFrameNumber,l=de;for(l.length=0,l.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild);l.length>0;){const e=l.pop(),t=e._lastSelectionResultFrame===u?e._lastSelectionResult:te.Z.NONE;if(t===te.Z.RENDERED){const t=e.data;if(!(0,p.Z)(t))continue;if(!a&&e.data.terrainState===Q.Z.READY)return!1;const i=e.data.imagery;for(o=0,s=i.length;o<s;++o){const e=i[o],t=e.loadingImagery,n=!(0,p.Z)(t)||t.state===z.Z.FAILED||t.state===z.Z.INVALID,s=(e.loadingImagery||e.readyImagery).imageryLayer._layerIndex;if(n&&!r[s])return!1}}else t===te.Z.REFINED&&l.push(e.southwestChild,e.southeastChild,e.northwestChild,e.northeastChild)}return!0};const fe=new s.Z;ie.prototype.computeTileLoadPriority=function(e,t){const i=e.data;if(void 0===i)return 0;const r=i.tileBoundingRegion.boundingVolume;if(void 0===r)return 0;const n=t.camera.positionWC,o=t.camera.directionWC,a=s.Z.subtract(r.center,n,fe),c=s.Z.magnitude(a);return c<T.Z.EPSILON5?0:(s.Z.divideByScalar(a,c,a),(1-s.Z.dot(a,o))*e._distance)};const pe=new x.Z,me=new x.Z,ge=new a.Z,_e=new a.Z,Ze=new a.Z,ye=new s.Z,be=new s.Z,ve=new s.Z,Te=new s.Z;ie.prototype.showTileThisFrame=function(e,t){let i=0;const r=e.data.imagery;for(let e=0,t=r.length;e<t;++e){const t=r[e];(0,p.Z)(t.readyImagery)&&0!==t.readyImagery.imageryLayer.alpha&&++i}let n=this._tilesToRenderByTextureCount[i];(0,p.Z)(n)||(n=[],this._tilesToRenderByTextureCount[i]=n),n.push(e);const o=e.data;(0,p.Z)(o.vertexArray)?this._hasLoadedTilesThisFrame=!0:this._hasFillTilesThisFrame=!0;const s=this._debug;++s.tilesRendered,s.texturesRendered+=i};const xe=[new s.Z,new s.Z,new s.Z,new s.Z];function we(e,t,i,r,n,o){const a=e.quadtree._occluders.ellipsoid,c=a.ellipsoid,u=xe;return s.Z.fromRadians(i.west,i.south,n,c,u[0]),s.Z.fromRadians(i.east,i.south,n,c,u[1]),s.Z.fromRadians(i.west,i.north,n,c,u[2]),s.Z.fromRadians(i.east,i.north,n,c,u[3]),a.computeHorizonCullingPointPossiblyUnderEllipsoid(t,u,r,o)}ie.prototype.computeDistanceToTile=function(e,t){!function(e,t,i){let n=e.data;void 0===n&&(n=e.data=new j.Z);const o=e.tilingScheme.ellipsoid;void 0===n.tileBoundingRegion&&(n.tileBoundingRegion=new ee.Z({computeBoundingVolumes:!1,rectangle:e.rectangle,ellipsoid:o,minimumHeight:0,maximumHeight:0}));const a=n.tileBoundingRegion,c=a.minimumHeight,u=a.maximumHeight;let l=!1,h=e;const d=n.mesh,f=n.terrainData;if(void 0!==d&&void 0!==d.minimumHeight&&void 0!==d.maximumHeight)a.minimumHeight=d.minimumHeight,a.maximumHeight=d.maximumHeight,l=!0;else if(void 0!==f&&void 0!==f._minimumHeight&&void 0!==f._maximumHeight)a.minimumHeight=f._minimumHeight,a.maximumHeight=f._maximumHeight;else{a.minimumHeight=Number.NaN,a.maximumHeight=Number.NaN;let t=e.parent;for(;void 0!==t;){const e=t.data;if(void 0!==e){const t=e.mesh,i=e.terrainData;if(void 0!==t&&void 0!==t.minimumHeight&&void 0!==t.maximumHeight){a.minimumHeight=t.minimumHeight,a.maximumHeight=t.maximumHeight;break}if(void 0!==i&&void 0!==i._minimumHeight&&void 0!==i._maximumHeight){a.minimumHeight=i._minimumHeight,a.maximumHeight=i._maximumHeight;break}}t=t.parent}h=t}if(void 0!==h){const f=i.terrainExaggeration,m=i.terrainExaggerationRelativeHeight;if(1!==f&&(l=!1,a.minimumHeight=L.Z.getHeight(a.minimumHeight,f,m),a.maximumHeight=L.Z.getHeight(a.maximumHeight,f,m)),l)n.boundingVolumeIsFromMesh||(a._orientedBoundingBox=S.Z.clone(d.orientedBoundingBox,a._orientedBoundingBox),a._boundingSphere=r.Z.clone(d.boundingSphere3D,a._boundingSphere),n.occludeePointInScaledSpace=s.Z.clone(d.occludeePointInScaledSpace,n.occludeePointInScaledSpace),(0,p.Z)(n.occludeePointInScaledSpace)||(n.occludeePointInScaledSpace=we(t,a._orientedBoundingBox.center,e.rectangle,a.minimumHeight,a.maximumHeight,n.occludeePointInScaledSpace)));else{const i=void 0===a._orientedBoundingBox||void 0===a._boundingSphere;(a.minimumHeight!==c||a.maximumHeight!==u||i)&&(a.computeBoundingVolumes(o),n.occludeePointInScaledSpace=we(t,a._orientedBoundingBox.center,e.rectangle,a.minimumHeight,a.maximumHeight,n.occludeePointInScaledSpace))}n.boundingVolumeSourceTile=h,n.boundingVolumeIsFromMesh=l}else n.boundingVolumeSourceTile=void 0,n.boundingVolumeIsFromMesh=!1}(e,this,t);const i=e.data;if(void 0===i.boundingVolumeSourceTile)return 9999999999;const n=i.tileBoundingRegion,o=n.minimumHeight,a=n.maximumHeight;if(i.boundingVolumeSourceTile!==e){const e=t.camera.positionCartographic.height;Math.abs(e-o)>Math.abs(e-a)?(n.minimumHeight=o,n.maximumHeight=o):(n.minimumHeight=a,n.maximumHeight=a)}const c=n.distanceToCamera(t);return n.minimumHeight=o,n.maximumHeight=a,c},ie.prototype.isDestroyed=function(){return!1},ie.prototype.destroy=function(){return this._tileProvider=this._tileProvider&&this._tileProvider.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),(0,m.Z)(this)},ie.prototype._onLayerAdded=function(e,t){if(e.show){const t=this._terrainProvider,i=this,r=e.imageryProvider,n=this._imageryLayersUpdatedEvent;r._reload=function(){e._imageryCache={},i._quadtree.forEachLoadedTile((function(i){if((0,p.Z)(i._loadedCallbacks[e._layerIndex]))return;let r;const n=i.data.imagery,o=n.length;let s=-1,a=0;for(r=0;r<o;++r){const t=n[r];if((0,f.Z)(t.readyImagery,t.loadingImagery).imageryLayer===e)-1===s&&(s=r),++a;else if(-1!==s)break}if(-1===s)return;const c=s+a;e._createTileImagerySkeletons(i,t,c)&&(i._loadedCallbacks[e._layerIndex]=function(e,t,i){return function(r){let n,o,s=-1;const a=r.data.imagery,c=a.length;let u;for(u=0;u<c;++u)if(n=a[u],o=(0,f.Z)(n.readyImagery,n.loadingImagery),o.imageryLayer===t){s=u;break}if(-1!==s){const c=s+e;if(n=a[c],o=(0,p.Z)(n)?(0,f.Z)(n.readyImagery,n.loadingImagery):void 0,!(0,p.Z)(o)||o.imageryLayer!==t)return!t._createTileImagerySkeletons(r,i,c);for(u=s;u<c;++u)a[u].freeResources();a.splice(s,e)}return!0}}(a,e,t),i.state=K.Z.LOADING)}))},this._quadtree.forEachLoadedTile((function(r){e._createTileImagerySkeletons(r,t)&&(r.state=K.Z.LOADING,0===r.level||r._lastSelectionResultFrame===i.quadtree._lastSelectionFrameNumber&&r._lastSelectionResult===te.Z.RENDERED||(r.renderable=!1))})),this._layerOrderChanged=!0,n.raiseEvent()}},ie.prototype._onLayerRemoved=function(e,t){this._quadtree.forEachLoadedTile((function(t){const i=t.data.imagery;let r=-1,n=0;for(let t=0,o=i.length;t<o;++t){const o=i[t];let s=o.loadingImagery;if((0,p.Z)(s)||(s=o.readyImagery),s.imageryLayer===e)-1===r&&(r=t),o.freeResources(),++n;else if(-1!==r)break}-1!==r&&i.splice(r,n)})),(0,p.Z)(e.imageryProvider)&&(e.imageryProvider._reload=void 0),this._imageryLayersUpdatedEvent.raiseEvent()},ie.prototype._onLayerMoved=function(e,t,i){this._layerOrderChanged=!0,this._imageryLayersUpdatedEvent.raiseEvent()},ie.prototype._onLayerShownOrHidden=function(e,t,i){i?this._onLayerAdded(e,t):this._onLayerRemoved(e,t)};const Se=new x.Z,Ae=new x.Z;function Ee(e,t){const i={u_initialColor:function(){return this.properties.initialColor},u_fillHighlightColor:function(){return this.properties.fillHighlightColor},u_zoomedOutOceanSpecularIntensity:function(){return this.properties.zoomedOutOceanSpecularIntensity},u_oceanNormalMap:function(){return this.properties.oceanNormalMap},u_atmosphereLightIntensity:function(){return this.properties.atmosphereLightIntensity},u_atmosphereRayleighCoefficient:function(){return this.properties.atmosphereRayleighCoefficient},u_atmosphereMieCoefficient:function(){return this.properties.atmosphereMieCoefficient},u_atmosphereRayleighScaleHeight:function(){return this.properties.atmosphereRayleighScaleHeight},u_atmosphereMieScaleHeight:function(){return this.properties.atmosphereMieScaleHeight},u_atmosphereMieAnisotropy:function(){return this.properties.atmosphereMieAnisotropy},u_lightingFadeDistance:function(){return this.properties.lightingFadeDistance},u_nightFadeDistance:function(){return this.properties.nightFadeDistance},u_center3D:function(){return this.properties.center3D},u_terrainExaggerationAndRelativeHeight:function(){return this.properties.terrainExaggerationAndRelativeHeight},u_tileRectangle:function(){return this.properties.tileRectangle},u_modifiedModelView:function(){const t=e.context.uniformState.view,i=x.Z.multiplyByPoint(t,this.properties.rtc,be);return x.Z.setTranslation(t,i,pe),pe},u_modifiedModelViewProjection:function(){const t=e.context.uniformState.view,i=e.context.uniformState.projection,r=x.Z.multiplyByPoint(t,this.properties.rtc,be);return x.Z.setTranslation(t,r,me),x.Z.multiply(i,me,me),me},u_dayTextures:function(){return this.properties.dayTextures},u_dayTextureTranslationAndScale:function(){return this.properties.dayTextureTranslationAndScale},u_dayTextureTexCoordsRectangle:function(){return this.properties.dayTextureTexCoordsRectangle},u_dayTextureUseWebMercatorT:function(){return this.properties.dayTextureUseWebMercatorT},u_dayTextureAlpha:function(){return this.properties.dayTextureAlpha},u_dayTextureNightAlpha:function(){return this.properties.dayTextureNightAlpha},u_dayTextureDayAlpha:function(){return this.properties.dayTextureDayAlpha},u_dayTextureBrightness:function(){return this.properties.dayTextureBrightness},u_dayTextureContrast:function(){return this.properties.dayTextureContrast},u_dayTextureHue:function(){return this.properties.dayTextureHue},u_dayTextureSaturation:function(){return this.properties.dayTextureSaturation},u_dayTextureOneOverGamma:function(){return this.properties.dayTextureOneOverGamma},u_dayIntensity:function(){return this.properties.dayIntensity},u_southAndNorthLatitude:function(){return this.properties.southAndNorthLatitude},u_southMercatorYAndOneOverHeight:function(){return this.properties.southMercatorYAndOneOverHeight},u_waterMask:function(){return this.properties.waterMask},u_waterMaskTranslationAndScale:function(){return this.properties.waterMaskTranslationAndScale},u_minMaxHeight:function(){return this.properties.minMaxHeight},u_scaleAndBias:function(){return this.properties.scaleAndBias},u_dayTextureSplit:function(){return this.properties.dayTextureSplit},u_dayTextureCutoutRectangles:function(){return this.properties.dayTextureCutoutRectangles},u_clippingPlanes:function(){const i=t._clippingPlanes;return(0,p.Z)(i)&&(0,p.Z)(i.texture)?i.texture:e.context.defaultTexture},u_cartographicLimitRectangle:function(){return this.properties.localizedCartographicLimitRectangle},u_clippingPlanesMatrix:function(){const i=t._clippingPlanes,r=(0,p.Z)(i)?x.Z.multiply(e.context.uniformState.view,i.modelMatrix,Se):x.Z.IDENTITY;return x.Z.inverseTranspose(r,Ae)},u_clippingPlanesEdgeStyle:function(){const e=this.properties.clippingPlanesEdgeColor;return e.alpha=this.properties.clippingPlanesEdgeWidth,e},u_minimumBrightness:function(){return e.fog.minimumBrightness},u_hsbShift:function(){return this.properties.hsbShift},u_colorsToAlpha:function(){return this.properties.colorsToAlpha},u_frontFaceAlphaByDistance:function(){return this.properties.frontFaceAlphaByDistance},u_backFaceAlphaByDistance:function(){return this.properties.backFaceAlphaByDistance},u_translucencyRectangle:function(){return this.properties.localizedTranslucencyRectangle},u_undergroundColor:function(){return this.properties.undergroundColor},u_undergroundColorAlphaByDistance:function(){return this.properties.undergroundColorAlphaByDistance},u_lambertDiffuseMultiplier:function(){return this.properties.lambertDiffuseMultiplier},properties:{initialColor:new a.Z(0,0,.5,1),fillHighlightColor:new l.Z(0,0,0,0),zoomedOutOceanSpecularIntensity:.5,oceanNormalMap:void 0,lightingFadeDistance:new o.Z(65e5,9e6),nightFadeDistance:new o.Z(1e7,4e7),atmosphereLightIntensity:10,atmosphereRayleighCoefficient:new s.Z(55e-7,13e-6,284e-7),atmosphereMieCoefficient:new s.Z(21e-6,21e-6,21e-6),atmosphereRayleighScaleHeight:1e4,atmosphereMieScaleHeight:3200,atmosphereMieAnisotropy:.9,hsbShift:new s.Z,center3D:void 0,rtc:new s.Z,modifiedModelView:new x.Z,tileRectangle:new a.Z,terrainExaggerationAndRelativeHeight:new o.Z(1,0),dayTextures:[],dayTextureTranslationAndScale:[],dayTextureTexCoordsRectangle:[],dayTextureUseWebMercatorT:[],dayTextureAlpha:[],dayTextureNightAlpha:[],dayTextureDayAlpha:[],dayTextureBrightness:[],dayTextureContrast:[],dayTextureHue:[],dayTextureSaturation:[],dayTextureOneOverGamma:[],dayTextureSplit:[],dayTextureCutoutRectangles:[],dayIntensity:0,colorsToAlpha:[],southAndNorthLatitude:new o.Z,southMercatorYAndOneOverHeight:new o.Z,waterMask:void 0,waterMaskTranslationAndScale:new a.Z,minMaxHeight:new o.Z,scaleAndBias:new x.Z,clippingPlanesEdgeColor:l.Z.clone(l.Z.WHITE),clippingPlanesEdgeWidth:0,localizedCartographicLimitRectangle:new a.Z,frontFaceAlphaByDistance:new a.Z,backFaceAlphaByDistance:new a.Z,localizedTranslucencyRectangle:new a.Z,undergroundColor:l.Z.clone(l.Z.TRANSPARENT),undergroundColorAlphaByDistance:new a.Z,lambertDiffuseMultiplier:0}};return(0,p.Z)(t.materialUniformMap)?(0,d.Z)(i,t.materialUniformMap):i}function Ce(e,t,i){const r=i.data;let n,o;if((0,p.Z)(r.vertexArray)?(n=r.mesh,o=r.vertexArray):(0,p.Z)(r.fill)&&(0,p.Z)(r.fill.vertexArray)&&(n=r.fill.mesh,o=r.fill.vertexArray),(0,p.Z)(n)&&(0,p.Z)(o)){if((0,p.Z)(r.wireframeVertexArray)){if(r.wireframeVertexArray.mesh===n)return;r.wireframeVertexArray.destroy(),r.wireframeVertexArray=void 0}r.wireframeVertexArray=function(e,t,i){const r={indices:i.indices,primitiveType:E.Z.TRIANGLES};y.Z.toWireframe(r);const n=r.indices,o=D.Z.createIndexBuffer({context:e,typedArray:n,usage:F.Z.STATIC_DRAW,indexDatatype:b.Z.fromSizeInBytes(n.BYTES_PER_ELEMENT)});return new V.Z({context:e,attributes:t._attributes,indexBuffer:o})}(e,o,n),r.wireframeVertexArray.mesh=n}}let Ie,Le,Pe;!function(){const e=new Z.Z({geometry:n.Z.fromDimensions({dimensions:new s.Z(2,2,2)})}),t=new Z.Z({geometry:new I.Z({radius:1})});let i,r,o=new x.Z;function a(e){return new Y.Z({geometryInstances:e,appearance:new W.Z({translucent:!1,flat:!0}),asynchronous:!1})}Ie=function(t,n){return t===i||(Pe(),i=t,o=x.Z.fromRotationTranslation(t.halfAxes,t.center,o),e.modelMatrix=o,e.attributes.color=h.Z.fromColor(n),r=a(e)),r},Le=function(e,n){return e===i||(Pe(),i=e,o=x.Z.fromTranslation(e.center,o),o=x.Z.multiplyByUniformScale(o,e.radius,o),t.modelMatrix=o,t.attributes.color=h.Z.fromColor(n),r=a(t)),r},Pe=function(){(0,p.Z)(r)&&(r.destroy(),r=void 0,i=void 0)}}();const Oe=new a.Z(0,0,0,0),Re={frameState:void 0,surfaceTile:void 0,numberOfDayTextures:void 0,applyBrightness:void 0,applyContrast:void 0,applyHue:void 0,applySaturation:void 0,applyGamma:void 0,applyAlpha:void 0,applyDayNightAlpha:void 0,applySplit:void 0,showReflectiveOcean:void 0,showOceanWaves:void 0,enableLighting:void 0,dynamicAtmosphereLighting:void 0,dynamicAtmosphereLightingFromSun:void 0,showGroundAtmosphere:void 0,perFragmentGroundAtmosphere:void 0,hasVertexNormals:void 0,useWebMercatorProjection:void 0,enableFog:void 0,enableClippingPlanes:void 0,clippingPlanes:void 0,clippedByBoundaries:void 0,hasImageryLayerCutout:void 0,colorCorrect:void 0,colorToAlpha:void 0,hasGeodeticSurfaceNormals:void 0,hasExaggeration:void 0},De=l.Z.TRANSPARENT,Fe=new w.Z;function Me(e,t,i){const n=t.data;(0,p.Z)(n.vertexArray)||(void 0===n.fill&&(n.fill=new $.Z(t)),n.fill.update(e,i));const o=i.creditDisplay,c=n.terrainData;if((0,p.Z)(c)&&(0,p.Z)(c.credits)){const e=c.credits;for(let t=0,i=e.length;t<i;++t)o.addCredit(e[t])}let u=M.Z.maximumTextureImageUnits,h=n.waterMaskTexture,d=n.waterMaskTranslationAndScale;!(0,p.Z)(h)&&(0,p.Z)(n.fill)&&(h=n.fill.waterMaskTexture,d=n.fill.waterMaskTranslationAndScale);const m=i.cameraUnderground,_=i.globeTranslucencyState,Z=_.translucent,y=_.frontFaceAlphaByDistance,b=_.backFaceAlphaByDistance,v=_.rectangle,w=(0,f.Z)(e.undergroundColor,De),A=(0,f.Z)(e.undergroundColorAlphaByDistance,Fe),I=le(e,i)&&i.mode===J.Z.SCENE3D&&w.alpha>0&&(A.nearValue>0||A.farValue>0),L=e.lambertDiffuseMultiplier,O=e.hasWaterMask&&(0,p.Z)(h),D=e.oceanNormalMap,F=O&&(0,p.Z)(D),H=e.terrainProvider.ready&&e.terrainProvider.hasVertexNormals,V=i.fog.enabled&&i.fog.renderable&&!m,U=e.showGroundAtmosphere&&i.mode===J.Z.SCENE3D,k=X.Z.castShadows(e.shadows)&&!Z,G=X.Z.receiveShadows(e.shadows)&&!Z,j=e.hueShift,z=e.saturationShift,W=e.brightnessShift;let Y=!(T.Z.equalsEpsilon(j,0,T.Z.EPSILON7)&&T.Z.equalsEpsilon(z,0,T.Z.EPSILON7)&&T.Z.equalsEpsilon(W,0,T.Z.EPSILON7)),K=!1;if(U){K=s.Z.magnitude(i.camera.positionWC)>e.nightFadeOutDistance}O&&--u,F&&--u,(0,p.Z)(i.shadowState)&&i.shadowState.shadowsEnabled&&--u,(0,p.Z)(e.clippingPlanes)&&e.clippingPlanes.enabled&&--u,u-=_.numberOfTextureUniforms;const Q=n.renderedMesh;let ee=Q.center;const te=Q.encoding,ie=n.tileBoundingRegion,re=i.terrainExaggeration,oe=i.terrainExaggerationRelativeHeight,ae=1!==re,ce=te.hasGeodeticSurfaceNormals,he=ge;let de=0,fe=0,pe=0,me=0,be=!1;if(i.mode!==J.Z.SCENE3D){const e=i.mapProjection,r=e.project(C.Z.southwest(t.rectangle),ve),n=e.project(C.Z.northeast(t.rectangle),Te);if(he.x=r.x,he.y=r.y,he.z=n.x,he.w=n.y,i.mode!==J.Z.MORPHING&&(ee=ye,ee.x=0,ee.y=.5*(he.z+he.x),ee.z=.5*(he.w+he.y),he.x-=ee.y,he.y-=ee.z,he.z-=ee.y,he.w-=ee.z),i.mode===J.Z.SCENE2D&&te.quantization===P.Z.BITS12){const e=1/(Math.pow(2,12)-1)*.5,t=(he.z-he.x)*e,i=(he.w-he.y)*e;he.x-=t,he.y-=i,he.z+=t,he.w+=i}e instanceof R.Z&&(de=t.rectangle.south,fe=t.rectangle.north,pe=R.Z.geodeticLatitudeToMercatorAngle(de),me=1/(R.Z.geodeticLatitudeToMercatorAngle(fe)-pe),be=!0)}const xe=Re;xe.frameState=i,xe.surfaceTile=n,xe.showReflectiveOcean=O,xe.showOceanWaves=F,xe.enableLighting=e.enableLighting,xe.dynamicAtmosphereLighting=e.dynamicAtmosphereLighting,xe.dynamicAtmosphereLightingFromSun=e.dynamicAtmosphereLightingFromSun,xe.showGroundAtmosphere=U,xe.atmosphereLightIntensity=e.atmosphereLightIntensity,xe.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,xe.atmosphereMieCoefficient=e.atmosphereMieCoefficient,xe.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,xe.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,xe.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,xe.perFragmentGroundAtmosphere=K,xe.hasVertexNormals=H,xe.useWebMercatorProjection=be,xe.clippedByBoundaries=n.clippedByBoundaries,xe.hasGeodeticSurfaceNormals=ce,xe.hasExaggeration=ae;const we=n.imagery;let Se=0;const Ae=we.length,Me=e.showSkirts&&!m&&!Z,Ne=e.backFaceCulling&&!m&&!Z,Be=Ne?e._renderState:e._disableCullingRenderState,He=Ne?e._blendRenderState:e._disableCullingBlendRenderState;let Ve=Be,Ue=e._firstPassInitialColor;const ke=i.context;(0,p.Z)(e._debug.boundingSphereTile)||Pe();if(e._materialUniformMap!==e.materialUniformMap){e._materialUniformMap=e.materialUniformMap;const t=e._drawCommands.length;for(let r=0;r<t;++r)e._uniformMaps[r]=Ee(i,e)}do{let c,f,P=0;if(e._drawCommands.length<=e._usedDrawCommands?(c=new N.Z,c.owner=t,c.cull=!1,c.boundingVolume=new r.Z,c.orientedBoundingBox=void 0,f=Ee(i,e),e._drawCommands.push(c),e._uniformMaps.push(f)):(c=e._drawCommands[e._usedDrawCommands],f=e._uniformMaps[e._usedDrawCommands]),c.owner=t,++e._usedDrawCommands,t===e._debug.boundingSphereTile){const e=ie.boundingVolume,t=ie.boundingSphere;(0,p.Z)(e)?Ie(e,l.Z.RED).update(i):(0,p.Z)(t)&&Le(t,l.Z.RED).update(i)}const O=f.properties;a.Z.clone(Ue,O.initialColor),O.oceanNormalMap=D,O.lightingFadeDistance.x=e.lightingFadeOutDistance,O.lightingFadeDistance.y=e.lightingFadeInDistance,O.nightFadeDistance.x=e.nightFadeOutDistance,O.nightFadeDistance.y=e.nightFadeInDistance,O.atmosphereLightIntensity=e.atmosphereLightIntensity,O.atmosphereRayleighCoefficient=e.atmosphereRayleighCoefficient,O.atmosphereMieCoefficient=e.atmosphereMieCoefficient,O.atmosphereRayleighScaleHeight=e.atmosphereRayleighScaleHeight,O.atmosphereMieScaleHeight=e.atmosphereMieScaleHeight,O.atmosphereMieAnisotropy=e.atmosphereMieAnisotropy,O.zoomedOutOceanSpecularIntensity=e.zoomedOutOceanSpecularIntensity;const R=m?b:y,F=m?y:b;(0,p.Z)(R)&&(a.Z.fromElements(R.near,R.nearValue,R.far,R.farValue,O.frontFaceAlphaByDistance),a.Z.fromElements(F.near,F.nearValue,F.far,F.farValue,O.backFaceAlphaByDistance)),a.Z.fromElements(A.near,A.nearValue,A.far,A.farValue,O.undergroundColorAlphaByDistance),l.Z.clone(w,O.undergroundColor),O.lambertDiffuseMultiplier=L;const M=!(0,p.Z)(n.vertexArray)&&(0,p.Z)(e.fillHighlightColor)&&e.fillHighlightColor.alpha>0;M&&l.Z.clone(e.fillHighlightColor,O.fillHighlightColor),O.terrainExaggerationAndRelativeHeight.x=re,O.terrainExaggerationAndRelativeHeight.y=oe,O.center3D=Q.center,s.Z.clone(ee,O.rtc),a.Z.clone(he,O.tileRectangle),O.southAndNorthLatitude.x=de,O.southAndNorthLatitude.y=fe,O.southMercatorYAndOneOverHeight.x=pe,O.southMercatorYAndOneOverHeight.y=me;const H=_e,K=ue(t.rectangle,e.cartographicLimitRectangle),X=Ze,$=ue(t.rectangle,v);s.Z.fromElements(j,z,W,O.hsbShift);const ae=t.rectangle,ce=1/ae.width,le=1/ae.height;H.x=(K.west-ae.west)*ce,H.y=(K.south-ae.south)*le,H.z=(K.east-ae.west)*ce,H.w=(K.north-ae.south)*le,a.Z.clone(H,O.localizedCartographicLimitRectangle),X.x=($.west-ae.west)*ce,X.y=($.south-ae.south)*le,X.z=($.east-ae.west)*ce,X.w=($.north-ae.south)*le,a.Z.clone(X,O.localizedTranslucencyRectangle);const ge=V&&T.Z.fog(t._distance,i.fog.density)>T.Z.EPSILON3;Y=Y&&(ge||U);let ye=!1,be=!1,ve=!1,Te=!1,Pe=!1,Re=!1,De=!1,Fe=!1,Ne=!1,Be=!1;for(;P<u&&Se<Ae;){const e=we[Se],i=e.readyImagery;if(++Se,!(0,p.Z)(i)||0===i.imageryLayer.alpha)continue;const r=e.useWebMercatorT?i.textureWebMercator:i.texture;if(!(0,p.Z)(r))throw new g.Z("readyImagery is not actually ready!");const n=i.imageryLayer;(0,p.Z)(e.textureTranslationAndScale)||(e.textureTranslationAndScale=n._calculateTextureTranslationAndScale(t,e)),O.dayTextures[P]=r,O.dayTextureTranslationAndScale[P]=e.textureTranslationAndScale,O.dayTextureTexCoordsRectangle[P]=e.textureCoordinateRectangle,O.dayTextureUseWebMercatorT[P]=e.useWebMercatorT,O.dayTextureAlpha[P]=n.alpha,Re=Re||1!==O.dayTextureAlpha[P],O.dayTextureNightAlpha[P]=n.nightAlpha,De=De||1!==O.dayTextureNightAlpha[P],O.dayTextureDayAlpha[P]=n.dayAlpha,De=De||1!==O.dayTextureDayAlpha[P],O.dayTextureBrightness[P]=n.brightness,ye=ye||O.dayTextureBrightness[P]!==q.Z.DEFAULT_BRIGHTNESS,O.dayTextureContrast[P]=n.contrast,be=be||O.dayTextureContrast[P]!==q.Z.DEFAULT_CONTRAST,O.dayTextureHue[P]=n.hue,ve=ve||O.dayTextureHue[P]!==q.Z.DEFAULT_HUE,O.dayTextureSaturation[P]=n.saturation,Te=Te||O.dayTextureSaturation[P]!==q.Z.DEFAULT_SATURATION,O.dayTextureOneOverGamma[P]=1/n.gamma,Pe=Pe||O.dayTextureOneOverGamma[P]!==1/q.Z.DEFAULT_GAMMA,O.dayTextureSplit[P]=n.splitDirection,Fe=Fe||0!==O.dayTextureSplit[P];let s=O.dayTextureCutoutRectangles[P];if((0,p.Z)(s)||(s=O.dayTextureCutoutRectangles[P]=new a.Z),a.Z.clone(a.Z.ZERO,s),(0,p.Z)(n.cutoutRectangle)){const e=ue(ae,n.cutoutRectangle),t=C.Z.simpleIntersection(e,ae,se);Ne=(0,p.Z)(t)||Ne,s.x=(e.west-ae.west)*ce,s.y=(e.south-ae.south)*le,s.z=(e.east-ae.west)*ce,s.w=(e.north-ae.south)*le}let c=O.colorsToAlpha[P];(0,p.Z)(c)||(c=O.colorsToAlpha[P]=new a.Z);const u=(0,p.Z)(n.colorToAlpha)&&n.colorToAlphaThreshold>0;if(Be=Be||u,u){const e=n.colorToAlpha;c.x=e.red,c.y=e.green,c.z=e.blue,c.w=n.colorToAlphaThreshold}else c.w=-1;if((0,p.Z)(i.credits)){const e=i.credits;for(let t=0,i=e.length;t<i;++t)o.addCredit(e[t])}++P}O.dayTextures.length=P,O.waterMask=h,a.Z.clone(d,O.waterMaskTranslationAndScale),O.minMaxHeight.x=te.minimumHeight,O.minMaxHeight.y=te.maximumHeight,x.Z.clone(te.matrix,O.scaleAndBias);const Ge=e._clippingPlanes,je=(0,p.Z)(Ge)&&Ge.enabled&&t.isClipped;je&&(O.clippingPlanesEdgeColor=l.Z.clone(Ge.edgeColor,O.clippingPlanesEdgeColor),O.clippingPlanesEdgeWidth=Ge.edgeWidth),xe.numberOfDayTextures=P,xe.applyBrightness=ye,xe.applyContrast=be,xe.applyHue=ve,xe.applySaturation=Te,xe.applyGamma=Pe,xe.applyAlpha=Re,xe.applyDayNightAlpha=De,xe.applySplit=Fe,xe.enableFog=ge,xe.enableClippingPlanes=je,xe.clippingPlanes=Ge,xe.hasImageryLayerCutout=Ne,xe.colorCorrect=Y,xe.highlightFillTile=M,xe.colorToAlpha=Be,xe.showUndergroundColor=I,xe.translucent=Z;let qe=n.renderedMesh.indices.length;Me||(qe=n.renderedMesh.indexCountWithoutSkirts),c.shaderProgram=e._surfaceShaderSet.getShaderProgram(xe),c.castShadows=k,c.receiveShadows=G,c.renderState=Ve,c.primitiveType=E.Z.TRIANGLES,c.vertexArray=n.vertexArray||n.fill.vertexArray,c.count=qe,c.uniformMap=f,c.pass=B.Z.GLOBE,e._debug.wireframe&&(Ce(ke,0,t),(0,p.Z)(n.wireframeVertexArray)&&(c.vertexArray=n.wireframeVertexArray,c.primitiveType=E.Z.LINES,c.count=2*qe));let ze=c.boundingVolume;const We=c.orientedBoundingBox;i.mode!==J.Z.SCENE3D?(r.Z.fromRectangleWithHeights2D(t.rectangle,i.mapProjection,ie.minimumHeight,ie.maximumHeight,ze),s.Z.fromElements(ze.center.z,ze.center.x,ze.center.y,ze.center),i.mode===J.Z.MORPHING&&(ze=r.Z.union(ie.boundingSphere,ze,ze))):(c.boundingVolume=r.Z.clone(ie.boundingSphere,ze),c.orientedBoundingBox=S.Z.clone(ie.boundingVolume,We)),c.dirty=!0,Z&&_.updateDerivedCommands(c,i),ne(c,i),Ve=He,Ue=Oe}while(Se<Ae)}const Ne=ie},27170:(e,t,i)=>{i.d(t,{Z:()=>u});var r=i(17497),n=i(54485),o=i(20176),s=i(14633),a=i(34152);function c(){this._enabled=!1,this._frontFaceAlpha=1,this._frontFaceAlphaByDistance=void 0,this._backFaceAlpha=1,this._backFaceAlphaByDistance=void 0,this._rectangle=a.Z.clone(a.Z.MAX_VALUE)}Object.defineProperties(c.prototype,{enabled:{get:function(){return this._enabled},set:function(e){r.Z.typeOf.bool("enabled",e),this._enabled=e}},frontFaceAlpha:{get:function(){return this._frontFaceAlpha},set:function(e){r.Z.typeOf.number.greaterThanOrEquals("frontFaceAlpha",e,0),r.Z.typeOf.number.lessThanOrEquals("frontFaceAlpha",e,1),this._frontFaceAlpha=e}},frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance},set:function(e){if((0,n.Z)(e)&&e.far<e.near)throw new o.Z("far distance must be greater than near distance.");this._frontFaceAlphaByDistance=s.Z.clone(e,this._frontFaceAlphaByDistance)}},backFaceAlpha:{get:function(){return this._backFaceAlpha},set:function(e){r.Z.typeOf.number.greaterThanOrEquals("backFaceAlpha",e,0),r.Z.typeOf.number.lessThanOrEquals("backFaceAlpha",e,1),this._backFaceAlpha=e}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance},set:function(e){if((0,n.Z)(e)&&e.far<e.near)throw new o.Z("far distance must be greater than near distance.");this._backFaceAlphaByDistance=s.Z.clone(e,this._backFaceAlphaByDistance)}},rectangle:{get:function(){return this._rectangle},set:function(e){(0,n.Z)(e)||(e=a.Z.clone(a.Z.MAX_VALUE)),a.Z.clone(e,this._rectangle)}}});const u=c},32463:(e,t,i)=>{i.d(t,{Z:()=>f});var r=i(23114),n=i(6785),o=i(54485),s=i(90332),a=i(74366),c=i(37791),u=i(27400),l=i(74064),h=i(96084);function d(){this._framebuffer=new c.Z({depthStencil:!0,supportsDepthTexture:!0}),this._packedDepthFramebuffer=new c.Z,this._renderState=void 0,this._packedDepthCommand=void 0,this._clearCommand=void 0,this._viewport=new r.Z,this._useScissorTest=!1,this._scissorRectangle=void 0,this._useHdr=void 0}Object.defineProperties(d.prototype,{classificationTexture:{get:function(){return this._framebuffer.getColorTexture()}},classificationFramebuffer:{get:function(){return this._framebuffer.framebuffer}},packedDepthFramebuffer:{get:function(){return this._packedDepthFramebuffer.framebuffer}},depthStencilTexture:{get:function(){return this._framebuffer.getDepthStencilTexture()}},depthStencilRenderbuffer:{get:function(){return this._framebuffer.getDepthStencilRenderbuffer()}},packedDepthTexture:{get:function(){return this._packedDepthFramebuffer.getColorTexture()}}}),d.prototype.updateAndClear=function(e,t,i,s){const c=t.width,d=t.height;!function(e,t,i,r,n){const o=n?t.halfFloatingPointTexture?u.Z.HALF_FLOAT:u.Z.FLOAT:u.Z.UNSIGNED_BYTE;e._framebuffer.update(t,i,r,1,o),e._packedDepthFramebuffer.update(t,i,r)}(this,i,c,d,e),function(e,t,i,s,c){e._viewport.width=i,e._viewport.height=s;const u=!r.Z.equals(e._viewport,c.viewport);let d=u!==e._useScissorTest;e._useScissorTest=u,r.Z.equals(e._scissorRectangle,c.viewport)||(e._scissorRectangle=r.Z.clone(c.viewport,e._scissorRectangle),d=!0),(0,o.Z)(e._renderState)&&r.Z.equals(e._viewport,e._renderState.viewport)&&!d||(e._renderState=l.Z.fromCache({viewport:e._viewport,scissorTest:{enabled:e._useScissorTest,rectangle:e._scissorRectangle}})),(0,o.Z)(e._packedDepthCommand)||(e._packedDepthCommand=t.createViewportQuadCommand(h.Z,{uniformMap:{u_depthTexture:function(){return e.depthStencilTexture}},owner:e})),(0,o.Z)(e._clearCommand)||(e._clearCommand=new a.Z({color:new n.Z(0,0,0,0),depth:1,stencil:0,owner:e})),e._packedDepthCommand.framebuffer=e._packedDepthFramebuffer.framebuffer,e._packedDepthCommand.renderState=e._renderState,e._clearCommand.framebuffer=e.classificationFramebuffer,e._clearCommand.renderState=e._renderState}(this,i,c,d,s),this._useHdr=e},d.prototype.clearClassification=function(e,t){this._clearCommand.execute(e,t)},d.prototype.packDepth=function(e,t){return this._packedDepthCommand.execute(e,t),this.packedDepthTexture},d.prototype.isDestroyed=function(){return!1},d.prototype.destroy=function(){var e;return(e=this)._framebuffer.destroy(),e._packedDepthFramebuffer.destroy(),(0,s.Z)(this)};const f=d},86553:(e,t,i)=>{i.d(t,{Z:()=>ce});var r=i(51138),n=i(88779),o=i(54485),s=i(14633),a=i(34152),c=i(71087),u=i(1577),l=i(74064),h=i(7048),d=i(995),f=i(28075),p=i(18061);const m=0,g=1,_=2,Z=3,y=4,b=5,v=6,T=7,x=8,w=9,S=10,A=11,E=["opaqueFrontFaceCommand","opaqueBackFaceCommand","depthOnlyFrontFaceCommand","depthOnlyBackFaceCommand","depthOnlyFrontAndBackFaceCommand","translucentFrontFaceCommand","translucentBackFaceCommand","translucentFrontFaceManualDepthTestCommand","translucentBackFaceManualDepthTestCommand","pickFrontFaceCommand","pickBackFaceCommand"];function C(){this._frontFaceAlphaByDistance=new s.Z(0,1,0,1),this._backFaceAlphaByDistance=new s.Z(0,1,0,1),this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._requiresManualDepthTest=!1,this._sunVisibleThroughGlobe=!1,this._environmentVisible=!1,this._useDepthPlane=!1,this._numberOfTextureUniforms=0,this._globeTranslucencyFramebuffer=void 0,this._rectangle=a.Z.clone(a.Z.MAX_VALUE),this._derivedCommandKey=0,this._derivedCommandsDirty=!1,this._derivedCommandPacks=void 0,this._derivedCommandTypes=new Array(A),this._derivedBlendCommandTypes=new Array(A),this._derivedPickCommandTypes=new Array(A),this._derivedCommandTypesToUpdate=new Array(A),this._derivedCommandsLength=0,this._derivedBlendCommandsLength=0,this._derivedPickCommandsLength=0,this._derivedCommandsToUpdateLength=0}function I(e,t,i,r){return e?(0,o.Z)(i)?(s.Z.clone(i,r),r.nearValue*=t,r.farValue*=t,r):(r.nearValue=t,r.farValue=t,r):(r.nearValue=1,r.farValue=1,r)}function L(e,t,i){return e&&(i.baseColor.alpha<1||t.nearValue<1||t.farValue<1)}function P(e,t,i,r,n){let o=0;const s=e._frontFaceTranslucent,a=e._backFaceTranslucent;if(!s)return o;const c=t.cameraUnderground,u=e._requiresManualDepthTest,l=r?w:u?T:b,h=r?S:u?x:v;return t.mode===p.Z.SCENE2D?(n[o++]=_,n[o++]=l,o):(a?(i||(n[o++]=y),c?(n[o++]=l,n[o++]=h):(n[o++]=h,n[o++]=l)):c?(i||(n[o++]=Z),n[o++]=m,n[o++]=h):(i||(n[o++]=_),n[o++]=g,n[o++]=l),o)}function O(e,t){const i=e.indexOf(t);i>-1&&e.splice(i,1)}function R(e,t){return e.indexOf(t)>-1}function D(e,t){O(e.defines,"TRANSLUCENT"),O(t.defines,"TRANSLUCENT")}function F(e,t){O(e.defines,"GROUND_ATMOSPHERE"),O(t.defines,"GROUND_ATMOSPHERE"),O(e.defines,"FOG"),O(t.defines,"FOG"),O(e.defines,"TRANSLUCENT"),O(t.defines,"TRANSLUCENT")}function M(e,t){if(R(t.defines,"TILE_LIMIT_RECTANGLE")||R(t.defines,"ENABLE_CLIPPING_PLANES"))return;t.sources=["void main() \n{ \n    gl_FragColor = vec4(1.0); \n} \n"]}function N(e,t){const i=t.sources,r=i.length;for(let e=0;e<r;++e)i[e]=h.Z.replaceMain(i[e],"czm_globe_translucency_main");i.push("\n\nuniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n#ifdef MANUAL_DEPTH_TEST \n    float logDepthOrDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, st)); \n    if (logDepthOrDepth != 0.0) \n    { \n        vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, logDepthOrDepth); \n        float depthEC = eyeCoordinate.z / eyeCoordinate.w; \n        if (v_positionEC.z < depthEC) \n        { \n            discard; \n        } \n    } \n#endif \n    czm_globe_translucency_main(); \n    vec4 classificationColor = texture2D(u_classificationTexture, st); \n    if (classificationColor.a > 0.0) \n    { \n        // Reverse premultiplication process to get the correct composited result of the classification primitives \n        classificationColor.rgb /= classificationColor.a; \n    } \n    gl_FragColor = classificationColor * vec4(classificationColor.aaa, 1.0) + gl_FragColor * (1.0 - classificationColor.a); \n} \n")}function B(e,t){N(0,t),O(e.defines,"GROUND_ATMOSPHERE"),O(t.defines,"GROUND_ATMOSPHERE"),O(e.defines,"FOG"),O(t.defines,"FOG")}function H(e,t){N(0,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function V(e,t){B(e,t),e.defines.push("GENERATE_POSITION"),t.defines.push("MANUAL_DEPTH_TEST")}function U(e,t){t.sources=["uniform sampler2D u_classificationTexture; \nvoid main() \n{ \n    vec2 st = gl_FragCoord.xy / czm_viewport.zw; \n    vec4 pickColor = texture2D(u_classificationTexture, st); \n    if (pickColor == vec4(0.0)) \n    { \n        discard; \n    } \n    gl_FragColor = pickColor; \n} \n"]}function k(e,t,i,r,n,s){if(!(0,o.Z)(n))return t;if(!r&&(0,o.Z)(i))return i;let a=e.shaderCache.getDerivedShaderProgram(t,s);if(!(0,o.Z)(a)){const i=t._attributeLocations,r=t.vertexShaderSource.clone(),c=t.fragmentShaderSource.clone();r.defines=(0,o.Z)(r.defines)?r.defines.slice(0):[],c.defines=(0,o.Z)(c.defines)?c.defines.slice(0):[],n(r,c),a=e.shaderCache.createDerivedShaderProgram(t,s,{vertexShaderSource:r,fragmentShaderSource:c,attributeLocations:i})}return a}function G(e){e.cull.face=f.Z.BACK,e.cull.enabled=!0}function j(e){e.cull.face=f.Z.FRONT,e.cull.enabled=!0}function q(e){e.cull.face=f.Z.BACK,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function z(e){e.cull.face=f.Z.FRONT,e.cull.enabled=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function W(e){e.cull.enabled=!1,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1}}function Y(e){e.cull.face=f.Z.BACK,e.cull.enabled=!0,e.depthMask=!1,e.blending=d.Z.ALPHA_BLEND}function K(e){e.cull.face=f.Z.FRONT,e.cull.enabled=!0,e.depthMask=!1,e.blending=d.Z.ALPHA_BLEND}function J(e){e.cull.face=f.Z.BACK,e.cull.enabled=!0,e.blending.enabled=!1}function X(e){e.cull.face=f.Z.FRONT,e.cull.enabled=!0,e.blending.enabled=!1}function $(e,t,i,r,n){if(!(0,o.Z)(r))return e;if(!i&&(0,o.Z)(t))return t;let s=n[e.id];if(!(0,o.Z)(s)){const t=l.Z.getState(e);r(t),s=l.Z.fromCache(t),n[e.id]=s}return s}function Q(e){return{u_classificationTexture:function(){return e._globeTranslucencyFramebuffer.classificationTexture}}}function ee(e,t,i,n,s){return(0,o.Z)(s)?!n&&(0,o.Z)(i)?i:(0,r.Z)(t,s(e),!1):t}function te(e){this.pass=e.pass,this.pickOnly=e.pickOnly,this.getShaderProgramFunction=e.getShaderProgramFunction,this.getRenderStateFunction=e.getRenderStateFunction,this.getUniformMapFunction=e.getUniformMapFunction,this.renderStateCache={}}Object.defineProperties(C.prototype,{frontFaceAlphaByDistance:{get:function(){return this._frontFaceAlphaByDistance}},backFaceAlphaByDistance:{get:function(){return this._backFaceAlphaByDistance}},translucent:{get:function(){return this._frontFaceTranslucent}},sunVisibleThroughGlobe:{get:function(){return this._sunVisibleThroughGlobe}},environmentVisible:{get:function(){return this._environmentVisible}},useDepthPlane:{get:function(){return this._useDepthPlane}},numberOfTextureUniforms:{get:function(){return this._numberOfTextureUniforms}},rectangle:{get:function(){return this._rectangle}}}),C.prototype.update=function(e){const t=e.globe;if(!(0,o.Z)(t)||!t.show)return this._frontFaceTranslucent=!1,this._backFaceTranslucent=!1,this._sunVisibleThroughGlobe=!0,this._environmentVisible=!0,void(this._useDepthPlane=!1);this._frontFaceAlphaByDistance=I(t.translucency.enabled,t.translucency.frontFaceAlpha,t.translucency.frontFaceAlphaByDistance,this._frontFaceAlphaByDistance),this._backFaceAlphaByDistance=I(t.translucency.enabled,t.translucency.backFaceAlpha,t.translucency.backFaceAlphaByDistance,this._backFaceAlphaByDistance),this._frontFaceTranslucent=L(t.translucency.enabled,this._frontFaceAlphaByDistance,t),this._backFaceTranslucent=L(t.translucency.enabled,this._backFaceAlphaByDistance,t),this._requiresManualDepthTest=function(e,t,i){return e._frontFaceTranslucent&&!e._backFaceTranslucent&&!i.depthTestAgainstTerrain&&t.mode!==p.Z.SCENE2D&&t.context.depthTexture}(this,e,t),this._sunVisibleThroughGlobe=function(e,t){const i=e._frontFaceTranslucent,r=e._backFaceTranslucent;return i&&(t.cameraUnderground||r)}(this,e),this._environmentVisible=function(e,t){return!t.cameraUnderground||e._frontFaceTranslucent}(this,e),this._useDepthPlane=function(e,t){return!t.cameraUnderground&&!e._frontFaceTranslucent}(this,e),this._numberOfTextureUniforms=function(e){let t=0;e._frontFaceTranslucent&&++t;e._requiresManualDepthTest&&++t;return t}(this),this._rectangle=a.Z.clone(t.translucency.rectangle,this._rectangle),function(e,t){let i;e._derivedCommandsLength=P(e,t,!1,!1,e._derivedCommandTypes),e._derivedBlendCommandsLength=P(e,t,!0,!1,e._derivedBlendCommandTypes),e._derivedPickCommandsLength=P(e,t,!1,!0,e._derivedPickCommandTypes);let r=0;for(i=0;i<e._derivedCommandsLength;++i)r|=1<<e._derivedCommandTypes[i];for(i=0;i<e._derivedBlendCommandsLength;++i)r|=1<<e._derivedBlendCommandTypes[i];for(i=0;i<e._derivedPickCommandsLength;++i)r|=1<<e._derivedPickCommandTypes[i];let n=0;for(i=0;i<A;++i)(r&1<<i)>0&&(e._derivedCommandTypesToUpdate[n++]=i);e._derivedCommandsToUpdateLength=n;const s=r!==e._derivedCommandKey;e._derivedCommandKey=r,e._derivedCommandsDirty=s,!(0,o.Z)(e._derivedCommandPacks)&&e._frontFaceTranslucent&&(e._derivedCommandPacks=[new te({pass:u.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:D,getRenderStateFunction:G,getUniformMapFunction:void 0}),new te({pass:u.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:F,getRenderStateFunction:j,getUniformMapFunction:void 0}),new te({pass:u.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:M,getRenderStateFunction:q,getUniformMapFunction:void 0}),new te({pass:u.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:M,getRenderStateFunction:z,getUniformMapFunction:void 0}),new te({pass:u.Z.GLOBE,pickOnly:!1,getShaderProgramFunction:M,getRenderStateFunction:W,getUniformMapFunction:void 0}),new te({pass:u.Z.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:N,getRenderStateFunction:Y,getUniformMapFunction:Q}),new te({pass:u.Z.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:B,getRenderStateFunction:K,getUniformMapFunction:Q}),new te({pass:u.Z.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:H,getRenderStateFunction:Y,getUniformMapFunction:Q}),new te({pass:u.Z.TRANSLUCENT,pickOnly:!1,getShaderProgramFunction:V,getRenderStateFunction:K,getUniformMapFunction:Q}),new te({pass:u.Z.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:U,getRenderStateFunction:J,getUniformMapFunction:Q}),new te({pass:u.Z.TRANSLUCENT,pickOnly:!0,getShaderProgramFunction:U,getRenderStateFunction:X,getUniformMapFunction:Q})])}(this,e)};const ie=new Array(A),re=new Array(A);function ne(e,t,i,r,n,s,a){for(let c=0;c<t;++c){const t=e[c],u=t.derivedCommands.type;(!(0,o.Z)(a)||a.indexOf(u)>-1)&&i(t,r,n,s)}}function oe(e,t,i,r,n,o){for(let s=0;s<t;++s)i(e[s],r,n,o)}C.prototype.updateDerivedCommands=function(e,t){const i=this._derivedCommandTypesToUpdate,r=this._derivedCommandsToUpdateLength;if(0!==r){for(let e=0;e<r;++e)re[e]=this._derivedCommandPacks[i[e]],ie[e]=E[i[e]];!function(e,t,i,r,s,a,u){let l=t.derivedCommands.globeTranslucency;const h=e._derivedCommandsDirty;if(t.dirty||!(0,o.Z)(l)||h){t.dirty=!1,(0,o.Z)(l)||(l={},t.derivedCommands.globeTranslucency=l);const h=u.frameNumber,d=(0,n.Z)(l.uniformMapDirtyFrame,0),f=(0,n.Z)(l.shaderProgramDirtyFrame,0),p=(0,n.Z)(l.renderStateDirtyFrame,0),m=l.uniformMap!==t.uniformMap,g=l.shaderProgramId!==t.shaderProgram.id,_=l.renderStateId!==t.renderState.id;m&&(l.uniformMapDirtyFrame=h),g&&(l.shaderProgramDirtyFrame=h),_&&(l.renderStateDirtyFrame=h),l.uniformMap=t.uniformMap,l.shaderProgramId=t.shaderProgram.id,l.renderStateId=t.renderState.id;for(let Z=0;Z<i;++Z){const i=a[Z],y=r[Z],b=s[Z];let v,T,x,w=l[b];(0,o.Z)(w)?(v=w.uniformMap,T=w.shaderProgram,x=w.renderState):(v=void 0,T=void 0,x=void 0),w=c.Z.shallowClone(t,w),l[b]=w;const S=(0,n.Z)(w.derivedCommands.uniformMapDirtyFrame,0),A=(0,n.Z)(w.derivedCommands.shaderProgramDirtyFrame,0),E=(0,n.Z)(w.derivedCommands.renderStateDirtyFrame,0),C=m||S<d,I=g||A<f,L=_||E<p;C&&(w.derivedCommands.uniformMapDirtyFrame=h),I&&(w.derivedCommands.shaderProgramDirtyFrame=h),L&&(w.derivedCommands.renderStateDirtyFrame=h),w.derivedCommands.type=y,w.pass=i.pass,w.pickOnly=i.pickOnly,w.uniformMap=ee(e,t.uniformMap,v,C,i.getUniformMapFunction),w.shaderProgram=k(u.context,t.shaderProgram,T,I,i.getShaderProgramFunction,b),w.renderState=$(t.renderState,x,L,i.getRenderStateFunction,i.renderStateCache)}}}(this,e,r,i,ie,re,t)}},C.prototype.pushDerivedCommands=function(e,t,i){const r=i.passes.pick;if(r&&t)return;let n=this._derivedCommandTypes,o=this._derivedCommandsLength;if(r?(n=this._derivedPickCommandTypes,o=this._derivedPickCommandsLength):t&&(n=this._derivedBlendCommandTypes,o=this._derivedBlendCommandsLength),0===o)return void i.commandList.push(e);const s=e.derivedCommands.globeTranslucency;for(let e=0;e<o;++e){const t=E[n[e]];i.commandList.push(s[t])}};const se=[m,g],ae=[_,Z,y];C.prototype.executeGlobeCommands=function(e,t,i,r,n){const o=r.context,s=e.commands[u.Z.GLOBE],a=e.indices[u.Z.GLOBE];0!==a&&(this._globeTranslucencyFramebuffer=i,i.clearClassification(o,n),ne(s,a,t,r,o,n,se))},C.prototype.executeGlobeClassificationCommands=function(e,t,i,r,n){const o=r.context,s=e.commands[u.Z.GLOBE],a=e.indices[u.Z.GLOBE],c=e.commands[u.Z.TERRAIN_CLASSIFICATION],l=e.indices[u.Z.TERRAIN_CLASSIFICATION];if(0===a||0===l)return;const h=this._frontFaceTranslucent,d=this._backFaceTranslucent;if(h&&d||oe(c,l,t,r,o,n),!h&&!d)return;this._globeTranslucencyFramebuffer=i;const f=o.uniformState.globeDepthTexture,p=n.framebuffer;if(n.framebuffer=i.classificationFramebuffer,ne(s,a,t,r,o,n,ae),o.depthTexture){const e=i.packDepth(o,n);o.uniformState.globeDepthTexture=e}oe(c,l,t,r,o,n),o.uniformState.globeDepthTexture=f,n.framebuffer=p};const ce=C},43284:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(17497),n=i(88779),o=i(54485),s=i(30271),a=i(56633),c=i(39226),u=i(5955);function l(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).resourceCache,i=e.gltf,o=e.bufferViewId,a=e.gltfResource,c=e.baseResource,l=e.cacheKey;r.Z.typeOf.func("options.resourceCache",t),r.Z.typeOf.object("options.gltf",i),r.Z.typeOf.number("options.bufferViewId",o),r.Z.typeOf.object("options.gltfResource",a),r.Z.typeOf.object("options.baseResource",c);const h=i.bufferViews[o];let d,f,p,m,g=h.buffer,_=h.byteOffset,Z=h.byteLength,y=!1;if((0,s.Z)(h,"EXT_meshopt_compression")){const e=h.extensions.EXT_meshopt_compression;g=e.buffer,_=(0,n.Z)(e.byteOffset,0),Z=e.byteLength,y=!0,d=e.byteStride,f=e.count,p=e.mode,m=(0,n.Z)(e.filter,"NONE")}const b=i.buffers[g];this._hasMeshopt=y,this._meshoptByteStride=d,this._meshoptCount=f,this._meshoptMode=p,this._meshoptFilter=m,this._resourceCache=t,this._gltfResource=a,this._baseResource=c,this._buffer=b,this._bufferId=g,this._byteOffset=_,this._byteLength=Z,this._cacheKey=l,this._bufferLoader=void 0,this._typedArray=void 0,this._state=u.Z.UNLOADED,this._promise=void 0,this._process=function(e,t){}}(0,o.Z)(Object.create)&&(l.prototype=Object.create(c.Z.prototype),l.prototype.constructor=l),Object.defineProperties(l.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),l.prototype.load=function(){const e=function(e){const t=e._resourceCache,i=e._buffer;if((0,o.Z)(i.uri)){const r=e._baseResource.getDerivedResource({url:i.uri});return t.loadExternalBuffer({resource:r})}return t.loadEmbeddedBuffer({parentResource:e._gltfResource,bufferId:e._bufferId})}(this);this._bufferLoader=e,this._state=u.Z.LOADING;const t=this,i=new Promise((function(e){t._process=function(t,i){if(!t._hasMeshopt)return;if(!(0,o.Z)(t._typedArray))return;if(t._state!==u.Z.PROCESSING)return;const r=t._meshoptCount,n=t._meshoptByteStride,s=new Uint8Array(r*n);a.Z.decodeGltfBuffer(s,r,n,t._typedArray,t._meshoptMode,t._meshoptFilter),t._typedArray=s,t._state=u.Z.READY,e(t)}}));return this._promise=e.promise.then((function(){if(t.isDestroyed())return;const r=e.typedArray,n=new Uint8Array(r.buffer,r.byteOffset+t._byteOffset,t._byteLength);return t.unload(),t._typedArray=n,t._hasMeshopt?(t._state=u.Z.PROCESSING,i):(t._state=u.Z.READY,t)})).catch((function(e){if(t.isDestroyed())return;t.unload(),t._state=u.Z.FAILED;return Promise.reject(t.getError("Failed to load buffer view",e))})),this._promise},l.prototype.process=function(e){return r.Z.typeOf.object("frameState",e),this._process(this,e)},l.prototype.unload=function(){(0,o.Z)(this._bufferLoader)&&this._resourceCache.unload(this._bufferLoader),this._bufferLoader=void 0,this._typedArray=void 0}},37757:(e,t,i)=>{i.d(t,{Z:()=>u});var r=i(17497),n=i(88779),o=i(54485),s=i(10613),a=i(39226),c=i(5955);function u(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).resourceCache,i=e.gltf,o=e.draco,s=e.gltfResource,a=e.baseResource,u=e.cacheKey;r.Z.typeOf.func("options.resourceCache",t),r.Z.typeOf.object("options.gltf",i),r.Z.typeOf.object("options.draco",o),r.Z.typeOf.object("options.gltfResource",s),r.Z.typeOf.object("options.baseResource",a),this._resourceCache=t,this._gltfResource=s,this._baseResource=a,this._gltf=i,this._draco=o,this._cacheKey=u,this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodePromise=void 0,this._decodedData=void 0,this._state=c.Z.UNLOADED,this._promise=void 0,this._process=function(e,t){}}(0,o.Z)(Object.create)&&(u.prototype=Object.create(a.Z.prototype),u.prototype.constructor=u),Object.defineProperties(u.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},decodedData:{get:function(){return this._decodedData}}}),u.prototype.load=function(){const e=this._resourceCache.loadBufferView({gltf:this._gltf,bufferViewId:this._draco.bufferView,gltfResource:this._gltfResource,baseResource:this._baseResource});this._bufferViewLoader=e,this._state=c.Z.LOADING;const t=this,i=new Promise((function(e,i){t._process=function(t,r){if(!(0,o.Z)(t._bufferViewTypedArray))return;if((0,o.Z)(t._decodePromise))return;const n=t._draco,a=t._gltf.bufferViews[n.bufferView],u=n.attributes,l={array:new Uint8Array(t._bufferViewTypedArray),bufferView:a,compressedAttributes:u,dequantizeInShader:!0},h=s.Z.decodeBufferView(l);(0,o.Z)(h)&&(t._decodePromise=h.then((function(i){t.isDestroyed()?e():(t.unload(),t._decodedData={indices:i.indexArray,vertexAttributes:i.attributeData},t._state=c.Z.READY,e(t))})).catch((function(r){t.isDestroyed()?e():i(r)})))}}));return this._promise=e.promise.then((function(){if(!t.isDestroyed())return t._bufferViewTypedArray=e.typedArray,t._state=c.Z.PROCESSING,i})).catch((function(e){if(!t.isDestroyed())return function(e,t){e.unload(),e._state=c.Z.FAILED;const i="Failed to load Draco";return Promise.reject(e.getError(i,t))}(t,e)})),this._promise},u.prototype.process=function(e){return r.Z.typeOf.object("frameState",e),this._process(this,e)},u.prototype.unload=function(){(0,o.Z)(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._bufferViewTypedArray=void 0,this._decodedData=void 0,this._gltf=void 0}},10537:(e,t,i)=>{i.d(t,{Z:()=>h});var r=i(17497),n=i(88779),o=i(54485),s=i(67410),a=i(22260),c=i(21514),u=i(39226),l=i(5955);function h(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).resourceCache,i=e.gltf,o=e.imageId,s=e.gltfResource,a=e.baseResource,c=e.cacheKey;r.Z.typeOf.func("options.resourceCache",t),r.Z.typeOf.object("options.gltf",i),r.Z.typeOf.number("options.imageId",o),r.Z.typeOf.object("options.gltfResource",s),r.Z.typeOf.object("options.baseResource",a);const u=i.images[o],h=u.bufferView,d=u.uri;this._resourceCache=t,this._gltfResource=s,this._baseResource=a,this._gltf=i,this._bufferViewId=h,this._uri=d,this._cacheKey=c,this._bufferViewLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._state=l.Z.UNLOADED,this._promise=void 0}function d(e){let t;return Array.isArray(e)&&(t=e.slice(1,e.length).map((function(e){return e.bufferView})),e=e[0]),{image:e,mipLevels:t}}function f(e,t,i){return e.unload(),e._state=l.Z.FAILED,Promise.reject(e.getError(i,t))}(0,o.Z)(Object.create)&&(h.prototype=Object.create(u.Z.prototype),h.prototype.constructor=h),Object.defineProperties(h.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},image:{get:function(){return this._image}},mipLevels:{get:function(){return this._mipLevels}}}),h.prototype.load=function(){return(0,o.Z)(this._bufferViewId)?(this._promise=function(e){const t=e._resourceCache.loadBufferView({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoader=t,e._state=l.Z.LOADING,t.promise.then((function(){if(e.isDestroyed())return;return function(e){const t=function(e){const t=e.subarray(0,2),i=e.subarray(0,4),r=e.subarray(8,12);if(255===t[0]&&216===t[1])return"image/jpeg";if(137===t[0]&&80===t[1])return"image/png";if(171===t[0]&&75===t[1])return"image/ktx2";if(82===i[0]&&73===i[1]&&70===i[2]&&70===i[3]&&87===r[0]&&69===r[1]&&66===r[2]&&80===r[3])return"image/webp";throw new c.Z("Image format is not recognized")}(e);if("image/ktx2"===t){const t=new Uint8Array(e);return(0,a.Z)(t)}return h._loadImageFromTypedArray({uint8Array:e,format:t,flipY:!1,skipColorSpaceConversion:!0})}(t.typedArray).then((function(t){if(e.isDestroyed())return;const i=d(t);return e.unload(),e._image=i.image,e._mipLevels=i.mipLevels,e._state=l.Z.READY,e}))})).catch((function(t){if(!e.isDestroyed())return f(e,t,"Failed to load embedded image")}))}(this),this._promise):(this._promise=function(e){const t=e._baseResource,i=e._uri,r=t.getDerivedResource({url:i});return e._state=l.Z.LOADING,function(e){const t=e.url;if(p.test(t))return(0,a.Z)(e);return e.fetchImage({skipColorSpaceConversion:!0,preferImageBitmap:!0})}(r).then((function(t){if(e.isDestroyed())return;const i=d(t);return e.unload(),e._image=i.image,e._mipLevels=i.mipLevels,e._state=l.Z.READY,e})).catch((function(t){if(!e.isDestroyed())return f(e,t,`Failed to load image: ${i}`)}))}(this),this._promise)};const p=/(^data:image\/ktx2)|(\.ktx2$)/i;h.prototype.unload=function(){(0,o.Z)(this._bufferViewLoader)&&this._resourceCache.unload(this._bufferViewLoader),this._bufferViewLoader=void 0,this._uri=void 0,this._image=void 0,this._mipLevels=void 0,this._gltf=void 0},h._loadImageFromTypedArray=s.Z},72724:(e,t,i)=>{i.d(t,{Z:()=>p});var r=i(17497),n=i(44990),o=i(88779),s=i(54485),a=i(20176),c=i(39172),u=i(31328),l=i(36627),h=i(66962),d=i(39226),f=i(5955);function p(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resourceCache,i=e.gltf,n=e.accessorId,s=e.gltfResource,c=e.baseResource,u=e.draco,l=e.cacheKey,h=(0,o.Z)(e.asynchronous,!0),d=(0,o.Z)(e.loadBuffer,!1),p=(0,o.Z)(e.loadTypedArray,!1);if(r.Z.typeOf.func("options.resourceCache",t),r.Z.typeOf.object("options.gltf",i),r.Z.typeOf.number("options.accessorId",n),r.Z.typeOf.object("options.gltfResource",s),r.Z.typeOf.object("options.baseResource",c),!d&&!p)throw new a.Z("At least one of loadBuffer and loadTypedArray must be true.");const m=i.accessors[n].componentType;this._resourceCache=t,this._gltfResource=s,this._baseResource=c,this._gltf=i,this._accessorId=n,this._indexDatatype=m,this._draco=u,this._cacheKey=l,this._asynchronous=h,this._loadBuffer=d,this._loadTypedArray=p,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=f.Z.UNLOADED,this._promise=void 0,this._process=function(e,t){}}(0,s.Z)(Object.create)&&(p.prototype=Object.create(d.Z.prototype),p.prototype.constructor=p),Object.defineProperties(p.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},indexDatatype:{get:function(){return this._indexDatatype}}});const m=new g;function g(){this.typedArray=void 0,this.indexDatatype=void 0,this.context=void 0,this.buffer=void 0}function _(e,t,i){const r=u.Z.createIndexBuffer({typedArray:e,context:i,usage:l.Z.STATIC_DRAW,indexDatatype:t});return r.vertexArrayDestroyable=!1,r}p.prototype.load=function(){let e;e=(0,s.Z)(this._draco)?function(e){const t=e._resourceCache.loadDraco({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=t,e._state=f.Z.LOADING,t.promise.then((function(){if(e.isDestroyed())return;const i=t.decodedData.indices.typedArray;return e._typedArray=i,e._indexDatatype=n.Z.fromTypedArray(i),e._state=f.Z.PROCESSING,e}))}(this):function(e){const t=e._gltf,i=e._accessorId,r=t.accessors[i].bufferView,n=e._resourceCache.loadBufferView({gltf:t,bufferViewId:r,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._state=f.Z.LOADING,e._bufferViewLoader=n,n.promise.then((function(){if(e.isDestroyed())return;const t=n.typedArray;return e._typedArray=function(e,t){const i=e._gltf,r=e._accessorId,n=i.accessors[r],o=n.count,s=n.componentType,a=t.buffer,u=t.byteOffset+n.byteOffset;let l;s===c.Z.UNSIGNED_BYTE?l=new Uint8Array(a,u,o):s===c.Z.UNSIGNED_SHORT?l=new Uint16Array(a,u,o):s===c.Z.UNSIGNED_INT&&(l=new Uint32Array(a,u,o));return l}(e,t),e._state=f.Z.PROCESSING,e}))}(this);const t=this,i=new Promise((function(e){t._process=function(t,i){if(t._state===f.Z.READY)return;const r=t._typedArray,n=t._indexDatatype;if((0,s.Z)(t._dracoLoader)&&t._dracoLoader.process(i),(0,s.Z)(t._bufferViewLoader)&&t._bufferViewLoader.process(i),!(0,s.Z)(r))return;let o;if(t._loadBuffer&&t._asynchronous){const e=m;e.set(r,n,i.context);if(!i.jobScheduler.execute(e,h.Z.BUFFER))return;o=e.buffer}else t._loadBuffer&&(o=_(r,n,i.context));t.unload(),t._buffer=o,t._typedArray=t._loadTypedArray?r:void 0,t._state=f.Z.READY,e(t)}}));return this._promise=e.then((function(){if(!t.isDestroyed())return i})).catch((function(e){if(!t.isDestroyed())return function(e,t){e.unload(),e._state=f.Z.FAILED;const i="Failed to load index buffer";return t=e.getError(i,t),Promise.reject(t)}(t,e)})),this._promise},g.prototype.set=function(e,t,i){this.typedArray=e,this.indexDatatype=t,this.context=i},g.prototype.execute=function(){this.buffer=_(this.typedArray,this.indexDatatype,this.context)},p.prototype.process=function(e){return r.Z.typeOf.object("frameState",e),this._process(this,e)},p.prototype.unload=function(){(0,s.Z)(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;(0,s.Z)(this._bufferViewLoader)&&e.unload(this._bufferViewLoader),(0,s.Z)(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0}},34817:(e,t,i)=>{i.d(t,{Z:()=>Z});var r=i(17497),n=i(88779),o=i(54485),s=i(7219),a=i(52312),c=i(73860),u=i(67197),l=i(96232),h=i(40460),d=i(45813),f=i(58943),p=i(86569),m=i(319),g=i(39226),_=i(5955);function Z(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).resourceCache,i=e.gltfResource,o=e.baseResource,s=e.typedArray,a=e.gltfJson,c=e.cacheKey;r.Z.typeOf.func("options.resourceCache",t),r.Z.typeOf.object("options.gltfResource",i),r.Z.typeOf.object("options.baseResource",o),this._resourceCache=t,this._gltfResource=i,this._baseResource=o,this._typedArray=s,this._gltfJson=a,this._cacheKey=c,this._gltf=void 0,this._bufferLoaders=[],this._state=_.Z.UNLOADED,this._promise=void 0}function y(e,t){return(0,h.Z)(t),function(e){const t=[];return d.Z.buffer(e,(function(e){const i=e.uri;!(0,o.Z)(e.extras._pipeline.source)&&(0,o.Z)(i)&&(0,c.Z)(i)&&(delete e.uri,t.push(u.Z.fetchArrayBuffer(i).then((function(t){e.extras._pipeline.source=new Uint8Array(t)}))))})),Promise.all(t)}(t).then((function(){return function(e,t){if("2.0"===t.asset.version)return Promise.resolve();const i=[];return d.Z.buffer(t,(function(t){if(!(0,o.Z)(t.extras._pipeline.source)&&(0,o.Z)(t.uri)){const r=e._baseResource.getDerivedResource({url:t.uri}),n=e._resourceCache.loadExternalBuffer({resource:r});e._bufferLoaders.push(n),i.push(n.promise.then((function(e){t.extras._pipeline.source=e.typedArray})))}})),Promise.all(i).then((function(){(0,m.Z)(t)}))}(e,t)})).then((function(){return(0,l.Z)(t),function(e,t){const i=[];return d.Z.buffer(t,(function(t,r){const n=t.extras._pipeline.source;if((0,o.Z)(n)&&!(0,o.Z)(t.uri)){const t=e._resourceCache.loadEmbeddedBuffer({parentResource:e._gltfResource,bufferId:r,typedArray:n});e._bufferLoaders.push(t),i.push(t.promise)}})),Promise.all(i)}(e,t)})).then((function(){return(0,p.Z)(t),t}))}function b(e,t){let i;return i="glTF"===(0,a.Z)(t)?(0,f.Z)(t):(0,s.Z)(t),y(e,i)}(0,o.Z)(Object.create)&&(Z.prototype=Object.create(g.Z.prototype),Z.prototype.constructor=Z),Object.defineProperties(Z.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},gltf:{get:function(){return this._gltf}}}),Z.prototype.load=function(){let e;var t;this._state=_.Z.LOADING,e=(0,o.Z)(this._gltfJson)?y(this,this._gltfJson):(0,o.Z)(this._typedArray)?b(this,this._typedArray):(t=this)._fetchGltf().then((function(e){if(t.isDestroyed())return;const i=new Uint8Array(e);return b(t,i)}));const i=this;return this._promise=e.then((function(e){if(!i.isDestroyed())return i._gltf=e,i._state=_.Z.READY,i})).catch((function(e){if(!i.isDestroyed())return function(e,t){e.unload(),e._state=_.Z.FAILED;const i=`Failed to load glTF: ${e._gltfResource.url}`;return Promise.reject(e.getError(i,t))}(i,e)})),this._promise},Z.prototype.unload=function(){const e=this._bufferLoaders,t=e.length;for(let i=0;i<t;++i)this._resourceCache.unload(e[i]);this._bufferLoaders.length=0,this._gltf=void 0},Z.prototype._fetchGltf=function(){return this._gltfResource.fetchArrayBuffer()}},94335:(e,t,i)=>{i.d(t,{Z:()=>re});var r=i(65730),n=i(93517),o=i(90868),s=i(17497),a=i(44990),c=i(78505),u=i(88779),l=i(54485),h=i(26092),d=i(74834),f=i(71118),p=i(20291),m=i(28696),g=i(47428),_=i(2492),Z=i(57727),y=i(91257),b=i(81737),v=i(55160),T=i(76274),x=i(84599),w=i(53839),S=i(22128),A=i(39226),E=i(89248),C=i(34240);const I=w.Z.Attribute,L=w.Z.Indices,P=w.Z.FeatureIdAttribute,O=w.Z.FeatureIdTexture,R=w.Z.FeatureIdImplicitRange,D=w.Z.MorphTarget,F=w.Z.Primitive,M=w.Z.Instances,N=w.Z.Skin,B=w.Z.Node,H=w.Z.AnimatedPropertyType,V=w.Z.AnimationSampler,U=w.Z.AnimationTarget,k=w.Z.AnimationChannel,G=w.Z.Animation,j=w.Z.Asset,q=w.Z.Scene,z=w.Z.Components,W=w.Z.MetallicRoughness,Y=w.Z.SpecularGlossiness,K=w.Z.Material,J=0,X=1,$=2,Q=3,ee=4,te=4,ie=5;function re(e){const t=(e=(0,u.Z)(e,u.Z.EMPTY_OBJECT)).gltfResource;let i=e.baseResource;const r=e.typedArray,n=(0,u.Z)(e.releaseGltfJson,!1),o=(0,u.Z)(e.asynchronous,!0),a=(0,u.Z)(e.incrementallyLoadTextures,!0),c=(0,u.Z)(e.upAxis,b.Z.Y),h=(0,u.Z)(e.forwardAxis,b.Z.Z),d=(0,u.Z)(e.loadAttributesAsTypedArray,!1),f=(0,u.Z)(e.loadPositionsFor2D,!1),p=(0,u.Z)(e.loadIndicesForWireframe,!1),m=(0,u.Z)(e.renameBatchIdSemantic,!1);s.Z.typeOf.object("options.gltfResource",t),i=(0,l.Z)(i)?i:t.clone(),this._gltfJson=e.gltfJson,this._gltfResource=t,this._baseResource=i,this._typedArray=r,this._releaseGltfJson=n,this._asynchronous=o,this._incrementallyLoadTextures=a,this._upAxis=c,this._forwardAxis=h,this._loadAttributesAsTypedArray=d,this._loadPositionsFor2D=f,this._loadIndicesForWireframe=p,this._renameBatchIdSemantic=m,this._sortedPropertyTableIds=void 0,this._sortedFeatureTextureIds=void 0,this._gltfJsonLoader=void 0,this._state=J,this._textureState=J,this._promise=void 0,this._texturesLoadedPromise=void 0,this._process=function(e,t){},this._processTextures=function(e,t){},this._loaderPromises=[],this._textureLoaders=[],this._texturesPromises=[],this._bufferViewLoaders=[],this._geometryLoaders=[],this._structuralMetadataLoader=void 0,this._components=void 0}function ne(e,t){e.unload();return t=e.getError("Failed to load glTF",t),Promise.reject(t)}function oe(e,t,i){let r=t.byteOffset;const n=(0,g.Z)(e,t),o=t.count,s=(0,Z.Z)(t.type),c=t.componentType,u=a.Z.getSizeInBytes(c),l=o*s;if(n===u*s)return i=new Uint8Array(i),a.Z.createArrayBufferView(c,i.buffer,i.byteOffset+r,l);const h=a.Z.createTypedArray(c,l),d=new DataView(i.buffer),f=new Array(s),p=(0,_.Z)(t.componentType);r=i.byteOffset+r;for(let e=0;e<o;++e){p(d,r,s,u,f);for(let t=0;t<s;++t)h[e*s+t]=f[t];r+=n}return h}function se(e,t){const i=e.type;if(i===y.Z.SCALAR)return(0,r.Z)(t,0);const n=y.Z.getMathType(i);return(0,r.Z)(t,n.clone(n.ZERO))}function ae(e,t,i,r){const n=t.accessors[i],o=n.count,s=new Array(o),a=n.bufferView;if((0,l.Z)(a)){const i=function(e,t,i){const r=S.Z.loadBufferView({gltf:t,bufferViewId:i,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._bufferViewLoaders.push(r),r}(e,t,a),o=i.promise.then((function(i){if(e.isDestroyed())return;const o=i.typedArray,a=oe(t,n,o);r=(0,u.Z)(r,!1),function(e,t,i,r){const n=e.type,o=e.count;if(n===y.Z.SCALAR)for(let e=0;e<o;e++)i[e]=t[e];else if(n===y.Z.VEC4&&r)for(let e=0;e<o;e++)i[e]=p.Z.unpack(t,4*e);else{const e=y.Z.getMathType(n),r=y.Z.getNumberOfComponents(n);for(let n=0;n<o;n++)i[n]=e.unpack(t,n*r)}}(n,a,s,r)})).catch((function(){se(n,s)}));return e._loaderPromises.push(o),s}return se(n,s)}function ce(e,t){if((0,l.Z)(t))return e===Number?t[0]:e.unpack(t)}function ue(e,t,i,r,n){const o=e.accessors[t],s=y.Z.getMathType(o.type),a=new I;return a.name=i,a.semantic=r,a.setIndex=n,a.constant=function(e){return e===Number?0:new e}(s),a.componentDatatype=o.componentType,a.normalized=(0,u.Z)(o.normalized,!1),a.count=o.count,a.type=o.type,a.min=ce(s,o.min),a.max=ce(s,o.max),a.byteOffset=o.byteOffset,a.byteStride=(0,g.Z)(e,o),a}function le(e){const t=/^\w+_(\d+)$/.exec(e);if(null!==t)return parseInt(t[1])}function he(e,t,i,r,n,o,s,a,c,u){const h=t.accessors[i],d=h.bufferView;let f=n;!e._renameBatchIdSemantic||"_BATCHID"!==n&&"BATCHID"!==n||(f="_FEATURE_ID_0");const p=n,m=r.fromGltfSemantic(f),g=(0,l.Z)(m)?le(f):void 0,_=ue(t,i,p,m,g);if(!(0,l.Z)(o)&&!(0,l.Z)(d))return _;const Z=m===C.Z.POSITION&&e._loadPositionsFor2D&&!u.scene3DOnly,y=function(e,t,i,r,n,o,s,a){const c=t.accessors[i].bufferView,u=!s,l=s||a,h=S.Z.loadVertexBuffer({gltf:t,gltfResource:e._gltfResource,baseResource:e._baseResource,bufferViewId:c,draco:n,attributeSemantic:r,accessorId:i,asynchronous:e._asynchronous,dequantize:o,loadBuffer:u,loadTypedArray:l});return e._geometryLoaders.push(h),h}(e,t,i,n,o,s,a,Z),b=y.promise.then((function(i){if(!e.isDestroyed()){if(c){const e=i.typedArray;_.packedTypedArray=oe(t,h,e),_.byteOffset=0,_.byteStride=void 0}else _.typedArray=i.typedArray,_.buffer=i.buffer;(0,l.Z)(o)&&(0,l.Z)(o.attributes)&&(0,l.Z)(o.attributes[n])&&(_.byteOffset=0,_.byteStride=void 0,_.quantization=i.quantization)}}));return e._loaderPromises.push(b),_}function de(e,t,i,r,n,o){return he(e,t,i,C.Z,r,n,!1,e._loadAttributesAsTypedArray,!1,o)}function fe(e,t,i,r,n){return he(e,t,i,x.Z,r,void 0,!0,n,n)}function pe(e,t,i,r,n){const o=t.accessors[i],s=o.bufferView;if(!(0,l.Z)(r)&&!(0,l.Z)(s))return;const a=new L;a.count=o.count;const c=function(e,t,i,r,n){const o=e._loadAttributesAsTypedArray,s=e._loadIndicesForWireframe&&!n.context.webgl2,a=!o,c=o||s,u=S.Z.loadIndexBuffer({gltf:t,accessorId:i,gltfResource:e._gltfResource,baseResource:e._baseResource,draco:r,asynchronous:e._asynchronous,loadBuffer:a,loadTypedArray:c});return e._geometryLoaders.push(u),u}(e,t,i,r,n),u=c.promise.then((function(t){e.isDestroyed()||(a.indexDatatype=t.indexDatatype,a.buffer=t.buffer,a.typedArray=t.typedArray)}));return e._loaderPromises.push(u),a}function me(e,t,i,r,n){const o=T.Z.getImageIdFromTexture({gltf:t,textureId:i.index,supportedImageFormats:r});if(!(0,l.Z)(o))return;const s=S.Z.loadTexture({gltf:t,textureInfo:i,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:r,asynchronous:e._asynchronous});e._textureLoaders.push(s);const a=T.Z.createModelTextureReader({textureInfo:i}),c=s.promise.then((function(t){e.isDestroyed()||(a.texture=t.texture,(0,l.Z)(n)&&(a.texture.sampler=n))}));return e._texturesPromises.push(c),a}function ge(e,t){const i=new P;return i.featureCount=e.featureCount,i.nullFeatureId=e.nullFeatureId,i.propertyTableId=e.propertyTable,i.setIndex=e.attribute,i.label=e.label,i.positionalLabel=t,i}function _e(e,t,i,r){const n=new P,o=e.featureIds;return n.featureCount=i,n.propertyTableId=t,n.setIndex=le(o.attribute),n.positionalLabel=r,n}function Ze(e,t){const i=new R;return i.propertyTableId=e.propertyTable,i.featureCount=e.featureCount,i.nullFeatureId=e.nullFeatureId,i.label=e.label,i.positionalLabel=t,i.offset=0,i.repeat=1,i}function ye(e,t,i,r){const n=new R,o=e.featureIds;n.propertyTableId=t,n.featureCount=i,n.offset=(0,u.Z)(o.constant,0);const s=(0,u.Z)(o.divisor,0);return n.repeat=0===s?void 0:s,n.positionalLabel=r,n}function be(e,t,i,r,n){const o=new O;o.featureCount=i.featureCount,o.nullFeatureId=i.nullFeatureId,o.propertyTableId=i.propertyTable,o.label=i.label,o.positionalLabel=n;const s=i.texture;o.textureReader=me(e,t,s,r,m.Z.NEAREST);const a=s.channels.map((function(e){return"rgba".charAt(e)})).join("");return o.textureReader.channels=a,o}function ve(e,t,i,r,n,o,s){const a=new O,c=i.featureIds,u=c.texture;return a.featureCount=o,a.propertyTableId=r,a.textureReader=me(e,t,u,n,m.Z.NEAREST),a.textureReader.channels=c.channels,a.positionalLabel=s,a}function Te(e,t,i){const r=new D;for(const n in i)if(i.hasOwnProperty(n)){const o=i[n];r.attributes.push(de(e,t,o,n,void 0))}return r}function xe(e,t,i,r,s){const a=new F,c=i.material;(0,l.Z)(c)&&(a.material=function(e,t,i,r){const s=new K,a=(0,u.Z)(i.extensions,u.Z.EMPTY_OBJECT),c=a.KHR_materials_pbrSpecularGlossiness,h=i.pbrMetallicRoughness;if(s.unlit=(0,l.Z)(a.KHR_materials_unlit),(0,l.Z)(c)){const i=new Y;s.specularGlossiness=i,(0,l.Z)(c.diffuseTexture)&&(i.diffuseTexture=me(e,t,c.diffuseTexture,r)),(0,l.Z)(c.specularGlossinessTexture)&&(0,l.Z)(c.specularGlossinessTexture)&&(i.specularGlossinessTexture=me(e,t,c.specularGlossinessTexture,r)),i.diffuseFactor=ce(o.Z,c.diffuseFactor),i.specularFactor=ce(n.Z,c.specularFactor),i.glossinessFactor=c.glossinessFactor,s.pbrSpecularGlossiness=c}else if((0,l.Z)(h)){const i=new W;s.metallicRoughness=i,(0,l.Z)(h.baseColorTexture)&&(i.baseColorTexture=me(e,t,h.baseColorTexture,r)),(0,l.Z)(h.metallicRoughnessTexture)&&(i.metallicRoughnessTexture=me(e,t,h.metallicRoughnessTexture,r)),i.baseColorFactor=ce(o.Z,h.baseColorFactor),i.metallicFactor=h.metallicFactor,i.roughnessFactor=h.roughnessFactor,s.pbrMetallicRoughness=h}return(0,l.Z)(i.emissiveTexture)&&(s.emissiveTexture=me(e,t,i.emissiveTexture,r)),(0,l.Z)(i.normalTexture)&&(s.normalTexture=me(e,t,i.normalTexture,r)),(0,l.Z)(i.occlusionTexture)&&(s.occlusionTexture=me(e,t,i.occlusionTexture,r)),s.emissiveFactor=ce(n.Z,i.emissiveFactor),s.alphaMode=i.alphaMode,s.alphaCutoff=i.alphaCutoff,s.doubleSided=i.doubleSided,s}(e,t,t.materials[c],r));const h=(0,u.Z)(i.extensions,u.Z.EMPTY_OBJECT),d=h.KHR_draco_mesh_compression,f=i.attributes;if((0,l.Z)(f))for(const i in f)if(f.hasOwnProperty(i)){const r=f[i];a.attributes.push(de(e,t,r,i,d,s))}const p=i.targets;if((0,l.Z)(p)){const i=p.length;for(let r=0;r<i;++r)a.morphTargets.push(Te(e,t,p[r]))}const m=i.indices;(0,l.Z)(m)&&(a.indices=pe(e,t,m,d,s));const g=h.EXT_structural_metadata,_=h.EXT_mesh_features,Z=h.EXT_feature_metadata,y=(0,l.Z)(Z);return(0,l.Z)(_)?function(e,t,i,r,n){let o;o=(0,l.Z)(r)&&(0,l.Z)(r.featureIds)?r.featureIds:[];for(let r=0;r<o.length;r++){const s=o[r],a=`featureId_${r}`;let c;c=(0,l.Z)(s.texture)?be(e,t,s,n,a):(0,l.Z)(s.attribute)?ge(s,a):Ze(s,a),i.featureIds.push(c)}}(e,t,a,_,r):y&&function(e,t,i,r,n){const o=t.extensions.EXT_feature_metadata.featureTables;let s=0;const a=r.featureIdAttributes;if((0,l.Z)(a)){const t=a.length;for(let r=0;r<t;++r){const t=a[r],n=t.featureTable,c=e._sortedPropertyTableIds.indexOf(n),u=o[n].count,h=`featureId_${s}`;let d;s++,d=(0,l.Z)(t.featureIds.attribute)?_e(t,c,u,h):ye(t,c,u,h),i.featureIds.push(d)}}const c=r.featureIdTextures;if((0,l.Z)(c)){const r=c.length;for(let a=0;a<r;++a){const r=c[a],u=r.featureTable,l=e._sortedPropertyTableIds.indexOf(u),h=`featureId_${s}`;s++;const d=ve(e,t,r,l,n,o[u].count,h);i.featureIds.push(d)}}}(e,t,a,Z,r),(0,l.Z)(g)?function(e,t){if(!(0,l.Z)(t))return;(0,l.Z)(t.propertyTextures)&&(e.propertyTextureIds=t.propertyTextures);(0,l.Z)(t.propertyAttributes)&&(e.propertyAttributeIds=t.propertyAttributes)}(a,g):y&&function(e,t,i){(0,l.Z)(i.featureTextures)&&(t.propertyTextureIds=i.featureTextures.map((function(t){return e._sortedFeatureTextureIds.indexOf(t)})))}(e,a,Z),a.primitiveType=i.mode,a}function we(e,t,i,r){const n=i.EXT_mesh_gpu_instancing,o=new M,s=n.attributes;if((0,l.Z)(s)){const i=(0,l.Z)(s.ROTATION),n=(0,l.Z)(s.TRANSLATION)&&(0,l.Z)(t.accessors[s.TRANSLATION].min)&&(0,l.Z)(t.accessors[s.TRANSLATION].max);for(const a in s)if(s.hasOwnProperty(a)){const c=a===x.Z.TRANSLATION||a===x.Z.ROTATION||a===x.Z.SCALE,u=e._loadAttributesAsTypedArray||(i||!n)&&c||a.indexOf(x.Z.FEATURE_ID)>=0||!r.context.instancedArrays,l=s[a];o.attributes.push(fe(e,t,l,a,u))}}const a=(0,u.Z)(n.extensions,u.Z.EMPTY_OBJECT),c=i.EXT_instance_features,h=a.EXT_feature_metadata;return(0,l.Z)(c)?function(e,t){const i=t.featureIds;for(let t=0;t<i.length;t++){const r=i[t],n=`instanceFeatureId_${t}`;let o;o=(0,l.Z)(r.attribute)?ge(r,n):Ze(r,n),e.featureIds.push(o)}}(o,c):(0,l.Z)(h)&&function(e,t,i,r){const n=e.extensions.EXT_feature_metadata.featureTables,o=i.featureIdAttributes;if((0,l.Z)(o)){const e=o.length;for(let i=0;i<e;++i){const e=o[i],s=e.featureTable,a=r.indexOf(s),c=n[s].count,u=`instanceFeatureId_${i}`;let h;h=(0,l.Z)(e.featureIds.attribute)?_e(e,a,c,u):ye(e,a,c,u),t.featureIds.push(h)}}}(t,o,h,e._sortedPropertyTableIds),o}function Se(e,t,i,o,s){const a=new B;a.name=i.name,a.matrix=ce(f.Z,i.matrix),a.translation=ce(n.Z,i.translation),a.rotation=ce(p.Z,i.rotation),a.scale=ce(n.Z,i.scale);const c=i.mesh;if((0,l.Z)(c)){const n=t.meshes[c],h=n.primitives,d=h.length;for(let i=0;i<d;++i)a.primitives.push(xe(e,t,h[i],o,s));const f=(0,u.Z)(i.weights,n.weights),p=a.primitives[0].morphTargets.length;a.morphWeights=(0,l.Z)(f)?f.slice():(0,r.Z)(new Array(p),0)}const h=(0,u.Z)(i.extensions,u.Z.EMPTY_OBJECT),d=h.EXT_mesh_gpu_instancing;return(0,l.Z)(d)&&(a.instances=we(e,t,h,s)),a}function Ae(e,t,i,n){const o=new N,s=i.joints,a=s.length,c=new Array(a);for(let e=0;e<a;++e)c[e]=n[s[e]];o.joints=c;const u=i.inverseBindMatrices;return(0,l.Z)(u)?o.inverseBindMatrices=ae(e,t,u):o.inverseBindMatrices=(0,r.Z)(new Array(a),f.Z.IDENTITY),o}function Ee(e,t,i){const r=new V,n=i.input;r.input=ae(e,t,n);const o=i.interpolation;r.interpolation=(0,u.Z)(h.Z[o],h.Z.LINEAR);const s=i.output;return r.output=ae(e,t,s,!0),r}function Ce(e,t,i){const r=new k,n=e.sampler;return r.sampler=t[n],r.target=function(e,t){const i=new U,r=e.node;if(!(0,l.Z)(r))return;i.node=t[r];const n=e.path.toUpperCase();return i.path=H[n],i}(e.target,i),r}function Ie(e,t,i,r){let n;const o=new G;o.name=i.name;const s=i.samplers,a=s.length,c=new Array(a);for(n=0;n<a;n++){const i=Ee(e,t,s[n]);i.index=n,c[n]=i}const u=i.channels,l=u.length,h=new Array(l);for(n=0;n<l;n++)h[n]=Ce(u[n],c,r);return o.samplers=c,o.channels=h,o}function Le(e){const t=e._bufferViewLoaders,i=t.length;for(let e=0;e<i;++e)S.Z.unload(t[e]);e._bufferViewLoaders.length=0}(0,l.Z)(Object.create)&&(re.prototype=Object.create(A.Z.prototype),re.prototype.constructor=re),Object.defineProperties(re.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){}},components:{get:function(){return this._components}},texturesLoadedPromise:{get:function(){return this._texturesLoadedPromise}}}),re.prototype.load=function(){const e=S.Z.loadGltfJson({gltfResource:this._gltfResource,baseResource:this._baseResource,typedArray:this._typedArray,gltfJson:this._gltfJson});this._gltfJsonLoader=e,this._state=X,this._textureState=X;const t=this;let i;const r=new Promise((function(e,r){i=new Promise((function(i,n){t._process=function(t,i){if(d.Z.supportsWebP.initialized){if(t._state===$){t._state=Q;const e=new E.Z({webp:d.Z.supportsWebP(),basis:i.context.supportsBasis});let o;o=(0,l.Z)(t._gltfJsonLoader)?t._gltfJsonLoader.gltf:t._gltfJson,function(e,t,i,r,n,o){const s=(0,u.Z)(t.extensions,u.Z.EMPTY_OBJECT),a=s.EXT_structural_metadata,h=s.EXT_feature_metadata;if((0,l.Z)(h)){const t=h.featureTables,i=h.featureTextures,r=(0,l.Z)(t)?t:[],n=(0,l.Z)(i)?i:[];e._sortedPropertyTableIds=Object.keys(r).sort(),e._sortedFeatureTextureIds=Object.keys(n).sort()}const d=function(e,t,i,r){let n,o;const s=t.nodes.length,a=new Array(s);for(n=0;n<s;++n){const o=Se(e,t,t.nodes[n],i,r);o.index=n,a[n]=o}for(n=0;n<s;++n){const e=t.nodes[n].children;if((0,l.Z)(e)){const t=e.length;for(o=0;o<t;++o)a[n].children.push(a[e[o]])}}return a}(e,t,i,r),f=function(e,t,i){let r;const n=t.skins;if(!(0,l.Z)(n))return[];const o=t.skins.length,s=new Array(o);for(r=0;r<o;++r){const n=Ae(e,t,t.skins[r],i);n.index=r,s[r]=n}const a=i.length;for(r=0;r<a;++r){const e=t.nodes[r].skin;(0,l.Z)(e)&&(i[r].skin=s[e])}return s}(e,t,d),p=function(e,t,i){let r;const n=t.animations;if(!(0,l.Z)(n))return[];const o=t.animations.length,s=new Array(o);for(r=0;r<o;++r){const n=Ie(e,t,t.animations[r],i);n.index=r,s[r]=n}return s}(e,t,d),m=function(e,t){const i=new q,r=function(e){let t;(0,l.Z)(e.scenes)&&(0,l.Z)(e.scene)&&(t=e.scenes[e.scene].nodes);return t=(0,u.Z)(t,e.nodes),t=(0,l.Z)(t)?t:[],t}(e);return i.nodes=r.map((function(e){return t[e]})),i}(t,d),g=new z,_=new j,Z=t.asset.copyright;if((0,l.Z)(Z)){const e=Z.split(";").map((function(e){return new c.Z(e.trim())}));_.credits=e}if(g.asset=_,g.scene=m,g.nodes=d,g.skins=f,g.animations=p,g.upAxis=e._upAxis,g.forwardAxis=e._forwardAxis,e._components=g,(0,l.Z)(a)||(0,l.Z)(h)){const r=function(e,t,i,r,n){const o=new v.Z({gltf:t,extension:i,extensionLegacy:r,gltfResource:e._gltfResource,baseResource:e._baseResource,supportedImageFormats:n,asynchronous:e._asynchronous});return o.load(),e._structuralMetadataLoader=o,o}(e,t,a,h,i),n=r.promise.then((function(t){e.isDestroyed()||(g.structuralMetadata=t.structuralMetadata)}));e._loaderPromises.push(n)}const y=[];y.push.apply(y,e._loaderPromises),e._incrementallyLoadTextures||y.push.apply(y,e._texturesPromises);Promise.all(y).then((function(){e.isDestroyed()||(e._state=ee)})).catch(n),Promise.all(e._texturesPromises).then((function(){e.isDestroyed()||(e._textureState=ee)})).catch(o)}(t,o,e,i,r,n),(0,l.Z)(t._gltfJsonLoader)&&t._releaseGltfJson&&(S.Z.unload(t._gltfJsonLoader),t._gltfJsonLoader=void 0)}t._state===Q&&function(e,t){let i;const r=e._bufferViewLoaders,n=r.length;for(i=0;i<n;++i)r[i].process(t);const o=e._geometryLoaders,s=o.length;for(i=0;i<s;++i)o[i].process(t);(0,l.Z)(e._structuralMetadataLoader)&&e._structuralMetadataLoader.process(t)}(t,i),t._state===ee&&(Le(t),t._state=te,e(t))}else d.Z.supportsWebP.initialize()},t._processTextures=function(e,t){if(e._textureState===$&&(e._textureState=Q),e._textureState===Q){let i;const r=e._textureLoaders,n=r.length;for(i=0;i<n;++i)r[i].process(t)}e._textureState===ee&&(e._textureState=te,i(e))}}))}));return this._promise=e.promise.then((function(){if(!t.isDestroyed())return t._state=$,t._textureState=$,r})).catch((function(e){if(!t.isDestroyed())return t._state=ie,t._textureState=ie,ne(t,e)})),this._texturesLoadedPromise=i.catch((function(e){if(!t.isDestroyed())return t._textureState=ie,ne(t,e)})),this._promise},re.prototype.process=function(e){s.Z.typeOf.object("frameState",e),this._process(this,e),this._processTextures(this,e)},re.prototype.unload=function(){var e;(0,l.Z)(this._gltfJsonLoader)&&S.Z.unload(this._gltfJsonLoader),this._gltfJsonLoader=void 0,function(e){const t=e._textureLoaders,i=t.length;for(let e=0;e<i;++e)S.Z.unload(t[e]);e._textureLoaders.length=0}(this),Le(this),function(e){const t=e._geometryLoaders,i=t.length;for(let e=0;e<i;++e)S.Z.unload(t[e]);e._geometryLoaders.length=0}(this),e=this,(0,l.Z)(e._structuralMetadataLoader)&&(e._structuralMetadataLoader.destroy(),e._structuralMetadataLoader=void 0),this._components=void 0}},76274:(e,t,i)=>{i.d(t,{Z:()=>m});var r=i(59015),n=i(17497),o=i(88779),s=i(54485),a=i(39109),c=i(28696),u=i(92106),l=i(48867),h=i(91373),d=i(53839);const f={getImageIdFromTexture:function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,i=e.textureId,r=e.supportedImageFormats;n.Z.typeOf.object("options.gltf",t),n.Z.typeOf.number("options.textureId",i),n.Z.typeOf.object("options.supportedImageFormats",r);const a=t.textures[i],c=a.extensions;if((0,s.Z)(c)){if(r.webp&&(0,s.Z)(c.EXT_texture_webp))return c.EXT_texture_webp.source;if(r.basis&&(0,s.Z)(c.KHR_texture_basisu))return c.KHR_texture_basisu.source}return a.source},createSampler:function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).gltf,i=e.textureInfo,r=(0,o.Z)(e.compressedTextureNoMipmap,!1);n.Z.typeOf.object("options.gltf",t),n.Z.typeOf.object("options.textureInfo",i);let a=h.Z.REPEAT,d=h.Z.REPEAT,f=l.Z.LINEAR,p=u.Z.LINEAR;const m=i.index,g=t.textures[m].sampler;if((0,s.Z)(g)){const e=t.samplers[g];a=(0,o.Z)(e.wrapS,a),d=(0,o.Z)(e.wrapT,d),f=(0,o.Z)(e.minFilter,f),p=(0,o.Z)(e.magFilter,p)}let _=!1;const Z=i.extensions;return(0,s.Z)(Z)&&(0,s.Z)(Z.KHR_texture_transform)&&(_=!0),(r||_)&&f!==l.Z.LINEAR&&f!==l.Z.NEAREST&&(f=f===l.Z.NEAREST_MIPMAP_NEAREST||f===l.Z.NEAREST_MIPMAP_LINEAR?l.Z.NEAREST:l.Z.LINEAR),new c.Z({wrapS:a,wrapT:d,minificationFilter:f,magnificationFilter:p})}},p=new r.Z(1,1);f.createModelTextureReader=function(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).textureInfo,i=e.channels,c=e.texture;n.Z.typeOf.object("options.textureInfo",t);let u,l=(0,o.Z)(t.texCoord,0);const h=(0,o.Z)(t.extensions,o.Z.EMPTY_OBJECT).KHR_texture_transform;if((0,s.Z)(h)){l=(0,o.Z)(h.texCoord,l);const e=(0,s.Z)(h.offset)?r.Z.unpack(h.offset):r.Z.ZERO;let t=(0,o.Z)(h.rotation,0);const i=(0,s.Z)(h.scale)?r.Z.unpack(h.scale):p;t=-t,u=new a.Z(Math.cos(t)*i.x,-Math.sin(t)*i.y,e.x,Math.sin(t)*i.x,Math.cos(t)*i.y,e.y,0,0,1)}const f=new d.Z.TextureReader;return f.index=t.index,f.texture=c,f.texCoord=l,f.transform=u,f.channels=i,f};const m=f},45813:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(90289),n=i(54485);function o(){}o.objectLegacy=function(e,t){if((0,n.Z)(e))for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const r=t(e[i],i);if((0,n.Z)(r))return r}},o.object=function(e,t){if((0,n.Z)(e)){const i=e.length;for(let r=0;r<i;r++){const i=t(e[r],r);if((0,n.Z)(i))return i}}},o.topLevel=function(e,t,i){const r=e[t];return(0,n.Z)(r)&&!Array.isArray(r)?o.objectLegacy(r,i):o.object(r,i)},o.accessor=function(e,t){return o.topLevel(e,"accessors",t)},o.accessorWithSemantic=function(e,t,i){const r={};return o.mesh(e,(function(e){return o.meshPrimitive(e,(function(e){const s=o.meshPrimitiveAttribute(e,(function(e,o){if(0===o.indexOf(t)&&!(0,n.Z)(r[e])){r[e]=!0;const t=i(e);if((0,n.Z)(t))return t}}));return(0,n.Z)(s)?s:o.meshPrimitiveTarget(e,(function(e){return o.meshPrimitiveTargetAttribute(e,(function(e,o){if(0===o.indexOf(t)&&!(0,n.Z)(r[e])){r[e]=!0;const t=i(e);if((0,n.Z)(t))return t}}))}))}))}))},o.accessorContainingVertexAttributeData=function(e,t){const i={};return o.mesh(e,(function(e){return o.meshPrimitive(e,(function(e){const r=o.meshPrimitiveAttribute(e,(function(e){if(!(0,n.Z)(i[e])){i[e]=!0;const r=t(e);if((0,n.Z)(r))return r}}));return(0,n.Z)(r)?r:o.meshPrimitiveTarget(e,(function(e){return o.meshPrimitiveTargetAttribute(e,(function(e){if(!(0,n.Z)(i[e])){i[e]=!0;const r=t(e);if((0,n.Z)(r))return r}}))}))}))}))},o.accessorContainingIndexData=function(e,t){const i={};return o.mesh(e,(function(e){return o.meshPrimitive(e,(function(e){const r=e.indices;if((0,n.Z)(r)&&!(0,n.Z)(i[r])){i[r]=!0;const e=t(r);if((0,n.Z)(e))return e}}))}))},o.animation=function(e,t){return o.topLevel(e,"animations",t)},o.animationChannel=function(e,t){const i=e.channels;return o.object(i,t)},o.animationSampler=function(e,t){const i=e.samplers;return o.object(i,t)},o.buffer=function(e,t){return o.topLevel(e,"buffers",t)},o.bufferView=function(e,t){return o.topLevel(e,"bufferViews",t)},o.camera=function(e,t){return o.topLevel(e,"cameras",t)},o.image=function(e,t){return o.topLevel(e,"images",t)},o.material=function(e,t){return o.topLevel(e,"materials",t)},o.materialValue=function(e,t){let i=e.values;(0,n.Z)(e.extensions)&&(0,n.Z)(e.extensions.KHR_techniques_webgl)&&(i=e.extensions.KHR_techniques_webgl.values);for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const r=t(i[e],e);if((0,n.Z)(r))return r}},o.mesh=function(e,t){return o.topLevel(e,"meshes",t)},o.meshPrimitive=function(e,t){const i=e.primitives;if((0,n.Z)(i)){const e=i.length;for(let r=0;r<e;r++){const e=t(i[r],r);if((0,n.Z)(e))return e}}},o.meshPrimitiveAttribute=function(e,t){const i=e.attributes;for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const r=t(i[e],e);if((0,n.Z)(r))return r}},o.meshPrimitiveTarget=function(e,t){const i=e.targets;if((0,n.Z)(i)){const e=i.length;for(let r=0;r<e;++r){const e=t(i[r],r);if((0,n.Z)(e))return e}}},o.meshPrimitiveTargetAttribute=function(e,t){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const r=t(e[i],i);if((0,n.Z)(r))return r}},o.node=function(e,t){return o.topLevel(e,"nodes",t)},o.nodeInTree=function(e,t,i){const r=e.nodes;if((0,n.Z)(r)){const s=t.length;for(let a=0;a<s;a++){const s=t[a],c=r[s];if((0,n.Z)(c)){let t=i(c,s);if((0,n.Z)(t))return t;const r=c.children;if((0,n.Z)(r)&&(t=o.nodeInTree(e,r,i),(0,n.Z)(t)))return t}}}},o.nodeInScene=function(e,t,i){const r=t.nodes;if((0,n.Z)(r))return o.nodeInTree(e,r,i)},o.program=function(e,t){return(0,r.Z)(e,"KHR_techniques_webgl")?o.object(e.extensions.KHR_techniques_webgl.programs,t):o.topLevel(e,"programs",t)},o.sampler=function(e,t){return o.topLevel(e,"samplers",t)},o.scene=function(e,t){return o.topLevel(e,"scenes",t)},o.shader=function(e,t){return(0,r.Z)(e,"KHR_techniques_webgl")?o.object(e.extensions.KHR_techniques_webgl.shaders,t):o.topLevel(e,"shaders",t)},o.skin=function(e,t){return o.topLevel(e,"skins",t)},o.skinJoint=function(e,t){const i=e.joints;if((0,n.Z)(i)){const e=i.length;for(let r=0;r<e;r++){const e=t(i[r]);if((0,n.Z)(e))return e}}},o.techniqueAttribute=function(e,t){const i=e.attributes;for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const r=t(i[e],e);if((0,n.Z)(r))return r}},o.techniqueUniform=function(e,t){const i=e.uniforms;for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const r=t(i[e],e);if((0,n.Z)(r))return r}},o.techniqueParameter=function(e,t){const i=e.parameters;for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const r=t(i[e],e);if((0,n.Z)(r))return r}},o.technique=function(e,t){return(0,r.Z)(e,"KHR_techniques_webgl")?o.object(e.extensions.KHR_techniques_webgl.techniques,t):o.topLevel(e,"techniques",t)},o.texture=function(e,t){return o.topLevel(e,"textures",t)};const s=o},32891:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(75143);const n=function(e,t){const i={byteLength:t.length,extras:{_pipeline:{source:t}}},n={buffer:(0,r.Z)(e.buffers,i),byteOffset:0,byteLength:t.length};return(0,r.Z)(e.bufferViews,n)}},96232:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(75143),n=i(45813),o=i(47428),s=i(88779),a=i(54485),c=i(95411);function u(e){(0,a.Z)(e)&&(e.texCoord=(0,s.Z)(e.texCoord,0))}const l=function(e){n.Z.accessor(e,(function(e){(0,a.Z)(e.bufferView)&&(e.byteOffset=(0,s.Z)(e.byteOffset,0))})),n.Z.bufferView(e,(function(e){(0,a.Z)(e.buffer)&&(e.byteOffset=(0,s.Z)(e.byteOffset,0))})),n.Z.mesh(e,(function(t){n.Z.meshPrimitive(t,(function(t){if(t.mode=(0,s.Z)(t.mode,c.Z.TRIANGLES),!(0,a.Z)(t.material)){(0,a.Z)(e.materials)||(e.materials=[]);const i={name:"default"};t.material=(0,r.Z)(e.materials,i)}}))})),n.Z.accessorContainingVertexAttributeData(e,(function(t){const i=e.accessors[t],r=i.bufferView;if(i.normalized=(0,s.Z)(i.normalized,!1),(0,a.Z)(r)){const t=e.bufferViews[r];t.byteStride=(0,o.Z)(e,i),t.target=c.Z.ARRAY_BUFFER}})),n.Z.accessorContainingIndexData(e,(function(t){const i=e.accessors[t].bufferView;if((0,a.Z)(i)){e.bufferViews[i].target=c.Z.ELEMENT_ARRAY_BUFFER}})),n.Z.material(e,(function(e){const t=(0,s.Z)(e.extensions,s.Z.EMPTY_OBJECT),i=t.KHR_materials_common;if((0,a.Z)(i)){const e=i.technique,t=(0,a.Z)(i.values)?i.values:{};return i.values=t,t.ambient=(0,a.Z)(t.ambient)?t.ambient:[0,0,0,1],t.emission=(0,a.Z)(t.emission)?t.emission:[0,0,0,1],t.transparency=(0,s.Z)(t.transparency,1),t.transparent=(0,s.Z)(t.transparent,!1),t.doubleSided=(0,s.Z)(t.doubleSided,!1),void("CONSTANT"!==e&&(t.diffuse=(0,a.Z)(t.diffuse)?t.diffuse:[0,0,0,1],"LAMBERT"!==e&&(t.specular=(0,a.Z)(t.specular)?t.specular:[0,0,0,1],t.shininess=(0,s.Z)(t.shininess,0))))}e.emissiveFactor=(0,s.Z)(e.emissiveFactor,[0,0,0]),e.alphaMode=(0,s.Z)(e.alphaMode,"OPAQUE"),e.doubleSided=(0,s.Z)(e.doubleSided,!1),"MASK"===e.alphaMode&&(e.alphaCutoff=(0,s.Z)(e.alphaCutoff,.5));const r=t.KHR_techniques_webgl;(0,a.Z)(r)&&n.Z.materialValue(e,(function(e){(0,a.Z)(e.index)&&u(e)})),u(e.emissiveTexture),u(e.normalTexture),u(e.occlusionTexture);const o=e.pbrMetallicRoughness;(0,a.Z)(o)&&(o.baseColorFactor=(0,s.Z)(o.baseColorFactor,[1,1,1,1]),o.metallicFactor=(0,s.Z)(o.metallicFactor,1),o.roughnessFactor=(0,s.Z)(o.roughnessFactor,1),u(o.baseColorTexture),u(o.metallicRoughnessTexture));const c=t.KHR_materials_pbrSpecularGlossiness;(0,a.Z)(c)&&(c.diffuseFactor=(0,s.Z)(c.diffuseFactor,[1,1,1,1]),c.specularFactor=(0,s.Z)(c.specularFactor,[1,1,1]),c.glossinessFactor=(0,s.Z)(c.glossinessFactor,1),u(c.specularGlossinessTexture))})),n.Z.animation(e,(function(e){n.Z.animationSampler(e,(function(e){e.interpolation=(0,s.Z)(e.interpolation,"LINEAR")}))}));const t=function(e){const t={};return n.Z.animation(e,(function(e){n.Z.animationChannel(e,(function(e){const i=e.target,r=i.node,n=i.path;"translation"!==n&&"rotation"!==n&&"scale"!==n||(t[r]=!0)}))})),t}(e);return n.Z.node(e,(function(e,i){(0,a.Z)(t[i])||(0,a.Z)(e.translation)||(0,a.Z)(e.rotation)||(0,a.Z)(e.scale)?(e.translation=(0,s.Z)(e.translation,[0,0,0]),e.rotation=(0,s.Z)(e.rotation,[0,0,0,1]),e.scale=(0,s.Z)(e.scale,[1,1,1])):e.matrix=(0,s.Z)(e.matrix,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])})),n.Z.sampler(e,(function(e){e.wrapS=(0,s.Z)(e.wrapS,c.Z.REPEAT),e.wrapT=(0,s.Z)(e.wrapT,c.Z.REPEAT)})),(0,a.Z)(e.scenes)&&!(0,a.Z)(e.scene)&&(e.scene=0),e}},73453:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(63651),n=i(75143),o=i(54485);const s=function(e,t){let i=e.extensionsRequired;(0,o.Z)(i)||(i=[],e.extensionsRequired=i),(0,n.Z)(i,t,!0),(0,r.Z)(e,t)}},63651:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(75143),n=i(54485);const o=function(e,t){let i=e.extensionsUsed;(0,n.Z)(i)||(i=[],e.extensionsUsed=i),(0,r.Z)(i,t,!0)}},40460:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(45813),n=i(54485);function o(e){e.extras=(0,n.Z)(e.extras)?e.extras:{},e.extras._pipeline=(0,n.Z)(e.extras._pipeline)?e.extras._pipeline:{}}const s=function(e){return r.Z.shader(e,(function(e){o(e)})),r.Z.buffer(e,(function(e){o(e)})),r.Z.image(e,(function(e){o(e)})),o(e),e}},75143:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(88779);const n=function(e,t,i){if(i=(0,r.Z)(i,!1)){const i=e.indexOf(t);if(i>-1)return i}return e.push(t),e.length-1}},62030:(e,t,i)=>{i.d(t,{Z:()=>u});var r=i(47428),n=i(2492),o=i(57727),s=i(65730),a=i(44990),c=i(54485);const u=function(e,t){const i=e.bufferViews,u=e.buffers,l=t.bufferView,h=(0,o.Z)(t.type);if(!(0,c.Z)(t.bufferView))return{min:(0,s.Z)(new Array(h),0),max:(0,s.Z)(new Array(h),0)};const d=(0,s.Z)(new Array(h),Number.POSITIVE_INFINITY),f=(0,s.Z)(new Array(h),Number.NEGATIVE_INFINITY),p=i[l],m=u[p.buffer].extras._pipeline.source,g=t.count,_=(0,r.Z)(e,t);let Z=t.byteOffset+p.byteOffset+m.byteOffset;const y=t.componentType,b=a.Z.getSizeInBytes(y),v=new DataView(m.buffer),T=new Array(h),x=(0,n.Z)(y);for(let e=0;e<g;e++){x(v,Z,h,b,T);for(let e=0;e<h;e++){const t=T[e];d[e]=Math.min(d[e],t),f[e]=Math.max(f[e],t)}Z+=_}return{min:d,max:f}}},47066:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(45813),n=i(17497),o=i(54485);const s=function(e,t){n.Z.typeOf.object("material",e),n.Z.defined("handler",t);const i=e.pbrMetallicRoughness;if((0,o.Z)(i)){if((0,o.Z)(i.baseColorTexture)){const e=i.baseColorTexture,r=t(e.index,e);if((0,o.Z)(r))return r}if((0,o.Z)(i.metallicRoughnessTexture)){const e=i.metallicRoughnessTexture,r=t(e.index,e);if((0,o.Z)(r))return r}}if((0,o.Z)(e.extensions)){const i=e.extensions.KHR_materials_pbrSpecularGlossiness;if((0,o.Z)(i)){if((0,o.Z)(i.diffuseTexture)){const e=i.diffuseTexture,r=t(e.index,e);if((0,o.Z)(r))return r}if((0,o.Z)(i.specularGlossinessTexture)){const e=i.specularGlossinessTexture,r=t(e.index,e);if((0,o.Z)(r))return r}}const r=e.extensions.KHR_materials_common;if((0,o.Z)(r)){const e=r.values.diffuse,i=r.values.ambient,n=r.values.emission,s=r.values.specular;if((0,o.Z)(e)&&(0,o.Z)(e.index)){const i=t(e.index,e);if((0,o.Z)(i))return i}if((0,o.Z)(i)&&(0,o.Z)(i.index)){const e=t(i.index,i);if((0,o.Z)(e))return e}if((0,o.Z)(n)&&(0,o.Z)(n.index)){const e=t(n.index,n);if((0,o.Z)(e))return e}if((0,o.Z)(s)&&(0,o.Z)(s.index)){const e=t(s.index,s);if((0,o.Z)(e))return e}}}const s=r.Z.materialValue(e,(function(e){if((0,o.Z)(e.index)){const i=t(e.index,e);if((0,o.Z)(i))return i}}));if((0,o.Z)(s))return s;if((0,o.Z)(e.emissiveTexture)){const i=e.emissiveTexture,r=t(i.index,i);if((0,o.Z)(r))return r}if((0,o.Z)(e.normalTexture)){const i=e.normalTexture,r=t(i.index,i);if((0,o.Z)(r))return r}if((0,o.Z)(e.occlusionTexture)){const i=e.occlusionTexture,r=t(i.index,i);if((0,o.Z)(r))return r}}},47428:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(57727),n=i(44990),o=i(54485);const s=function(e,t){const i=t.bufferView;if((0,o.Z)(i)){const t=e.bufferViews[i];if((0,o.Z)(t.byteStride)&&t.byteStride>0)return t.byteStride}return n.Z.getSizeInBytes(t.componentType)*(0,r.Z)(t.type)}},2492:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(44990);const n=function(e){switch(e){case r.Z.BYTE:return function(e,t,i,r,n){for(let o=0;o<i;++o)n[o]=e.getInt8(t+o*r)};case r.Z.UNSIGNED_BYTE:return function(e,t,i,r,n){for(let o=0;o<i;++o)n[o]=e.getUint8(t+o*r)};case r.Z.SHORT:return function(e,t,i,r,n){for(let o=0;o<i;++o)n[o]=e.getInt16(t+o*r,!0)};case r.Z.UNSIGNED_SHORT:return function(e,t,i,r,n){for(let o=0;o<i;++o)n[o]=e.getUint16(t+o*r,!0)};case r.Z.INT:return function(e,t,i,r,n){for(let o=0;o<i;++o)n[o]=e.getInt32(t+o*r,!0)};case r.Z.UNSIGNED_INT:return function(e,t,i,r,n){for(let o=0;o<i;++o)n[o]=e.getUint32(t+o*r,!0)};case r.Z.FLOAT:return function(e,t,i,r,n){for(let o=0;o<i;++o)n[o]=e.getFloat32(t+o*r,!0)};case r.Z.DOUBLE:return function(e,t,i,r,n){for(let o=0;o<i;++o)n[o]=e.getFloat64(t+o*r,!0)}}}},19719:(e,t,i)=>{i.d(t,{Z:()=>f});var r=i(63651),n=i(45813),o=i(88779),s=i(54485),a=i(95411);const c=[a.Z.FUNC_ADD,a.Z.FUNC_ADD],u=[a.Z.ONE,a.Z.ZERO,a.Z.ONE,a.Z.ZERO];function l(e,t){const i=e.enable;return!!(0,s.Z)(i)&&i.indexOf(t)>-1}const h=[a.Z.ZERO,a.Z.ONE,a.Z.SRC_COLOR,a.Z.ONE_MINUS_SRC_COLOR,a.Z.SRC_ALPHA,a.Z.ONE_MINUS_SRC_ALPHA,a.Z.DST_ALPHA,a.Z.ONE_MINUS_DST_ALPHA,a.Z.DST_COLOR,a.Z.ONE_MINUS_DST_COLOR];function d(e,t){if(!(0,s.Z)(e))return t;for(let i=0;i<4;i++)if(-1===h.indexOf(e[i]))return t;return e}const f=function(e){const t={},i={},h=e.techniques;return(0,s.Z)(h)?(n.Z.technique(e,(function(e,r){const n=e.states;if((0,s.Z)(n)){const h=i[r]={};if(l(n,a.Z.BLEND)){h.alphaMode="BLEND";const e=n.functions;(0,s.Z)(e)&&((0,s.Z)(e.blendEquationSeparate)||(0,s.Z)(e.blendFuncSeparate))&&(t[r]={blendEquation:(0,o.Z)(e.blendEquationSeparate,c),blendFactors:d(e.blendFuncSeparate,u)})}l(n,a.Z.CULL_FACE)||(h.doubleSided=!0),delete e.states}})),Object.keys(t).length>0&&((0,s.Z)(e.extensions)||(e.extensions={}),(0,r.Z)(e,"KHR_blend")),n.Z.material(e,(function(e){if((0,s.Z)(e.technique)){const r=i[e.technique];n.Z.objectLegacy(r,(function(t,i){e[i]=t}));const o=t[e.technique];(0,s.Z)(o)&&((0,s.Z)(e.extensions)||(e.extensions={}),e.extensions.KHR_blend=o)}})),e):e}},50849:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(63651),n=i(73453),o=i(75143),s=i(45813),a=i(54485);const c=function(e){const t=e.techniques,i={},c={},u={};if((0,a.Z)(t)){const t={programs:[],shaders:[],techniques:[]},l=e.glExtensionsUsed;delete e.glExtensionsUsed,s.Z.technique(e,(function(r,n){const h={name:r.name,program:void 0,attributes:{},uniforms:{}};let d;if(s.Z.techniqueAttribute(r,(function(e,t){d=r.parameters[e],h.attributes[t]={semantic:d.semantic}})),s.Z.techniqueUniform(r,(function(e,t){d=r.parameters[e],h.uniforms[t]={count:d.count,node:d.node,type:d.type,semantic:d.semantic,value:d.value},(0,a.Z)(i[n])||(i[n]={}),i[n][e]=t})),(0,a.Z)(u[r.program]))h.program=u[r.program];else{const i=e.programs[r.program],n={name:i.name,fragmentShader:void 0,vertexShader:void 0,glExtensions:l},s=e.shaders[i.fragmentShader];n.fragmentShader=(0,o.Z)(t.shaders,s,!0);const a=e.shaders[i.vertexShader];n.vertexShader=(0,o.Z)(t.shaders,a,!0),h.program=(0,o.Z)(t.programs,n),u[r.program]=h.program}c[n]=(0,o.Z)(t.techniques,h)})),t.techniques.length>0&&((0,a.Z)(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t,(0,r.Z)(e,"KHR_techniques_webgl"),(0,n.Z)(e,"KHR_techniques_webgl"))}return s.Z.material(e,(function(e){if((0,a.Z)(e.technique)){const t={technique:c[e.technique]};s.Z.objectLegacy(e.values,(function(r,n){(0,a.Z)(t.values)||(t.values={});const o=i[e.technique][n];t.values[o]=r})),(0,a.Z)(e.extensions)||(e.extensions={}),e.extensions.KHR_techniques_webgl=t}delete e.technique,delete e.values})),delete e.techniques,delete e.programs,delete e.shaders,e}},57727:(e,t,i)=>{i.d(t,{Z:()=>r});const r=function(e){switch(e){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}}},58943:(e,t,i)=>{i.d(t,{Z:()=>h});var r=i(40460),n=i(84747),o=i(88779),s=i(54485),a=i(52312),c=i(16383),u=i(21514);function l(e,t,i){const r=new DataView(e.buffer),n=new Array(i);for(let o=0;o<i;++o)n[o]=r.getUint32(e.byteOffset+t+4*o,!0);return n}const h=function(e){if("glTF"!==(0,a.Z)(e))throw new u.Z("File is not valid binary glTF");const t=l(e,0,5),i=t[1];if(1!==i&&2!==i)throw new u.Z("Binary glTF version is not 1 or 2");return 1===i?function(e,t){const i=t[2],a=t[3];if(0!==t[4])throw new u.Z("Binary glTF scene format is not JSON");const l=20,h=l+a,d=(0,c.Z)(e,l,a),f=JSON.parse(d);(0,r.Z)(f);const p=e.subarray(h,i),m=f.buffers;if((0,s.Z)(m)&&Object.keys(m).length>0){const e=(0,o.Z)(m.binary_glTF,m.KHR_binary_glTF);(0,s.Z)(e)&&(e.extras._pipeline.source=p,delete e.uri)}return(0,n.Z)(f,"KHR_binary_glTF"),f}(e,t):function(e,t){const i=t[2];let n,o,a=12;for(;a<i;){const t=l(e,a,2),i=t[0],s=t[1];a+=8;const u=e.subarray(a,a+i);if(a+=i,1313821514===s){const e=(0,c.Z)(u);n=JSON.parse(e),(0,r.Z)(n)}else 5130562===s&&(o=u)}if((0,s.Z)(n)&&(0,s.Z)(o)){const e=n.buffers;if((0,s.Z)(e)&&e.length>0){e[0].extras._pipeline.source=o}}return n}(e,t)}},30839:(e,t,i)=>{i.d(t,{Z:()=>u});var r=i(47428),n=i(2492),o=i(57727),s=i(65730),a=i(44990),c=i(54485);const u=function(e,t){const i=(0,r.Z)(e,t),u=a.Z.getSizeInBytes(t.componentType),l=(0,o.Z)(t.type),h=t.count,d=new Array(l*h);if(!(0,c.Z)(t.bufferView))return(0,s.Z)(d,0),d;const f=e.bufferViews[t.bufferView],p=e.buffers[f.buffer].extras._pipeline.source;let m=t.byteOffset+f.byteOffset+p.byteOffset;const g=new DataView(p.buffer),_=new Array(l),Z=(0,n.Z)(t.componentType);for(let e=0;e<h;++e){Z(g,m,l,u,_);for(let t=0;t<l;++t)d[e*l+t]=_[t];m+=i}return d}},56033:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(54485);const n=function(e,t){const i=e.extensionsRequired;if((0,r.Z)(i)){const r=i.indexOf(t);r>=0&&i.splice(r,1),0===i.length&&delete e.extensionsRequired}}},84747:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(56033),n=i(54485);const o=function(e,t){const i=e.extensionsUsed;if((0,n.Z)(i)){const n=i.indexOf(t);n>=0&&i.splice(n,1),(0,r.Z)(e,t),0===i.length&&delete e.extensionsUsed}}},86569:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(45813),n=i(54485);function o(e){(0,n.Z)(e.extras)&&((0,n.Z)(e.extras._pipeline)&&delete e.extras._pipeline,0===Object.keys(e.extras).length&&delete e.extras)}const s=function(e){return r.Z.shader(e,(function(e){o(e)})),r.Z.buffer(e,(function(e){o(e)})),r.Z.image(e,(function(e){o(e)})),o(e),e}},68869:(e,t,i)=>{i.d(t,{Z:()=>f});var r=i(45813),n=i(47066),o=i(90289),s=i(88779),a=i(54485);const c=["mesh","node","material","accessor","bufferView","buffer","texture","sampler","image"];const u={accessor:"accessors",buffer:"buffers",bufferView:"bufferViews",image:"images",node:"nodes",material:"materials",mesh:"meshes",sampler:"samplers",texture:"textures"};function l(){}function h(){}function d(e,t,i){const r=e.nodes[t];return!((0,a.Z)(r.mesh)||(0,a.Z)(r.camera)||(0,a.Z)(r.skin)||(0,a.Z)(r.weights)||(0,a.Z)(r.extras)||(0,a.Z)(r.extensions)&&0!==Object.keys(r.extensions).length||(0,a.Z)(i[t]))&&(!(0,a.Z)(r.children)||0===r.children.filter((function(t){return!d(e,t,i)})).length)}l.accessor=function(e,t){e.accessors.splice(t,1),r.Z.mesh(e,(function(e){r.Z.meshPrimitive(e,(function(e){r.Z.meshPrimitiveAttribute(e,(function(i,r){i>t&&e.attributes[r]--})),r.Z.meshPrimitiveTarget(e,(function(e){r.Z.meshPrimitiveTargetAttribute(e,(function(i,r){i>t&&e[r]--}))}));const i=e.indices;(0,a.Z)(i)&&i>t&&e.indices--}))})),r.Z.skin(e,(function(e){(0,a.Z)(e.inverseBindMatrices)&&e.inverseBindMatrices>t&&e.inverseBindMatrices--})),r.Z.animation(e,(function(e){r.Z.animationSampler(e,(function(e){(0,a.Z)(e.input)&&e.input>t&&e.input--,(0,a.Z)(e.output)&&e.output>t&&e.output--}))}))},l.buffer=function(e,t){e.buffers.splice(t,1),r.Z.bufferView(e,(function(e){(0,a.Z)(e.buffer)&&e.buffer>t&&e.buffer--,(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.EXT_meshopt_compression)&&e.extensions.EXT_meshopt_compression.buffer--}))},l.bufferView=function(e,t){if(e.bufferViews.splice(t,1),r.Z.accessor(e,(function(e){(0,a.Z)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),r.Z.shader(e,(function(e){(0,a.Z)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),r.Z.image(e,(function(e){(0,a.Z)(e.bufferView)&&e.bufferView>t&&e.bufferView--})),(0,o.Z)(e,"KHR_draco_mesh_compression")&&r.Z.mesh(e,(function(e){r.Z.meshPrimitive(e,(function(e){(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.KHR_draco_mesh_compression)&&e.extensions.KHR_draco_mesh_compression.bufferView>t&&e.extensions.KHR_draco_mesh_compression.bufferView--}))})),(0,o.Z)(e,"EXT_feature_metadata")){const i=e.extensions.EXT_feature_metadata.featureTables;for(const e in i)if(i.hasOwnProperty(e)){const r=i[e].properties;if((0,a.Z)(r))for(const e in r)if(r.hasOwnProperty(e)){const i=r[e];(0,a.Z)(i.bufferView)&&i.bufferView>t&&i.bufferView--,(0,a.Z)(i.arrayOffsetBufferView)&&i.arrayOffsetBufferView>t&&i.arrayOffsetBufferView--,(0,a.Z)(i.stringOffsetBufferView)&&i.stringOffsetBufferView>t&&i.stringOffsetBufferView--}}}},l.image=function(e,t){e.images.splice(t,1),r.Z.texture(e,(function(e){(0,a.Z)(e.source)&&e.source>t&&--e.source;const i=e.extensions;(0,a.Z)(i)&&(0,a.Z)(i.EXT_texture_webp)&&i.EXT_texture_webp.source>t?--e.extensions.EXT_texture_webp.source:(0,a.Z)(i)&&(0,a.Z)(i.KHR_texture_basisu)&&i.KHR_texture_basisu.source>t&&--e.extensions.KHR_texture_basisu.source}))},l.mesh=function(e,t){e.meshes.splice(t,1),r.Z.node(e,(function(e){(0,a.Z)(e.mesh)&&(e.mesh>t?e.mesh--:e.mesh===t&&delete e.mesh)}))},l.node=function(e,t){e.nodes.splice(t,1),r.Z.skin(e,(function(e){(0,a.Z)(e.skeleton)&&e.skeleton>t&&e.skeleton--,e.joints=e.joints.map((function(e){return e>t?e-1:e}))})),r.Z.animation(e,(function(e){r.Z.animationChannel(e,(function(e){(0,a.Z)(e.target)&&(0,a.Z)(e.target.node)&&e.target.node>t&&e.target.node--}))})),r.Z.technique(e,(function(e){r.Z.techniqueUniform(e,(function(e){(0,a.Z)(e.node)&&e.node>t&&e.node--}))})),r.Z.node(e,(function(e){(0,a.Z)(e.children)&&(e.children=e.children.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e})))})),r.Z.scene(e,(function(e){e.nodes=e.nodes.filter((function(e){return e!==t})).map((function(e){return e>t?e-1:e}))}))},l.material=function(e,t){e.materials.splice(t,1),r.Z.mesh(e,(function(e){r.Z.meshPrimitive(e,(function(e){(0,a.Z)(e.material)&&e.material>t&&e.material--}))}))},l.sampler=function(e,t){e.samplers.splice(t,1),r.Z.texture(e,(function(e){(0,a.Z)(e.sampler)&&e.sampler>t&&--e.sampler}))},l.texture=function(e,t){if(e.textures.splice(t,1),r.Z.material(e,(function(e){(0,n.Z)(e,(function(e,i){i.index>t&&--i.index}))})),(0,o.Z)(e,"EXT_feature_metadata")){r.Z.mesh(e,(function(e){r.Z.meshPrimitive(e,(function(e){const i=e.extensions;if((0,a.Z)(i)&&(0,a.Z)(i.EXT_feature_metadata)){const e=i.EXT_feature_metadata.featureIdTextures;if((0,a.Z)(e)){const i=e.length;for(let r=0;r<i;++r){const i=e[r].featureIds.texture;i.index>t&&--i.index}}}}))}));const i=e.extensions.EXT_feature_metadata.featureTextures;for(const e in i)if(i.hasOwnProperty(e)){const r=i[e].properties;if((0,a.Z)(r))for(const e in r)if(r.hasOwnProperty(e)){const i=r[e].texture;i.index>t&&--i.index}}}},h.accessor=function(e){const t={};return r.Z.mesh(e,(function(e){r.Z.meshPrimitive(e,(function(e){r.Z.meshPrimitiveAttribute(e,(function(e){t[e]=!0})),r.Z.meshPrimitiveTarget(e,(function(e){r.Z.meshPrimitiveTargetAttribute(e,(function(e){t[e]=!0}))}));const i=e.indices;(0,a.Z)(i)&&(t[i]=!0)}))})),r.Z.skin(e,(function(e){(0,a.Z)(e.inverseBindMatrices)&&(t[e.inverseBindMatrices]=!0)})),r.Z.animation(e,(function(e){r.Z.animationSampler(e,(function(e){(0,a.Z)(e.input)&&(t[e.input]=!0),(0,a.Z)(e.output)&&(t[e.output]=!0)}))})),(0,o.Z)(e,"EXT_mesh_gpu_instancing")&&r.Z.node(e,(function(e){(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.EXT_mesh_gpu_instancing)&&Object.keys(e.extensions.EXT_mesh_gpu_instancing.attributes).forEach((function(i){const r=e.extensions.EXT_mesh_gpu_instancing.attributes[i];t[r]=!0}))})),t},h.buffer=function(e){const t={};return r.Z.bufferView(e,(function(e){(0,a.Z)(e.buffer)&&(t[e.buffer]=!0),(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.EXT_meshopt_compression)&&(t[e.extensions.EXT_meshopt_compression.buffer]=!0)})),t},h.bufferView=function(e){const t={};if(r.Z.accessor(e,(function(e){(0,a.Z)(e.bufferView)&&(t[e.bufferView]=!0)})),r.Z.shader(e,(function(e){(0,a.Z)(e.bufferView)&&(t[e.bufferView]=!0)})),r.Z.image(e,(function(e){(0,a.Z)(e.bufferView)&&(t[e.bufferView]=!0)})),(0,o.Z)(e,"KHR_draco_mesh_compression")&&r.Z.mesh(e,(function(e){r.Z.meshPrimitive(e,(function(e){(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.KHR_draco_mesh_compression)&&(t[e.extensions.KHR_draco_mesh_compression.bufferView]=!0)}))})),(0,o.Z)(e,"EXT_feature_metadata")){const i=e.extensions.EXT_feature_metadata.featureTables;for(const e in i)if(i.hasOwnProperty(e)){const r=i[e].properties;if((0,a.Z)(r))for(const e in r)if(r.hasOwnProperty(e)){const i=r[e];(0,a.Z)(i.bufferView)&&(t[i.bufferView]=!0),(0,a.Z)(i.arrayOffsetBufferView)&&(t[i.arrayOffsetBufferView]=!0),(0,a.Z)(i.stringOffsetBufferView)&&(t[i.stringOffsetBufferView]=!0)}}}return t},h.image=function(e){const t={};return r.Z.texture(e,(function(e){(0,a.Z)(e.source)&&(t[e.source]=!0),(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.EXT_texture_webp)?t[e.extensions.EXT_texture_webp.source]=!0:(0,a.Z)(e.extensions)&&(0,a.Z)(e.extensions.KHR_texture_basisu)&&(t[e.extensions.KHR_texture_basisu.source]=!0)})),t},h.mesh=function(e){const t={};return r.Z.node(e,(function(i){if((0,a.Z)(i.mesh&&(0,a.Z)(e.meshes))){const r=e.meshes[i.mesh];(0,a.Z)(r)&&(0,a.Z)(r.primitives)&&r.primitives.length>0&&(t[i.mesh]=!0)}})),t},h.node=function(e){const t={};return r.Z.skin(e,(function(e){(0,a.Z)(e.skeleton)&&(t[e.skeleton]=!0),r.Z.skinJoint(e,(function(e){t[e]=!0}))})),r.Z.animation(e,(function(e){r.Z.animationChannel(e,(function(e){(0,a.Z)(e.target)&&(0,a.Z)(e.target.node)&&(t[e.target.node]=!0)}))})),r.Z.technique(e,(function(e){r.Z.techniqueUniform(e,(function(e){(0,a.Z)(e.node)&&(t[e.node]=!0)}))})),r.Z.node(e,(function(i,r){d(e,r,t)||(t[r]=!0)})),t},h.material=function(e){const t={};return r.Z.mesh(e,(function(e){r.Z.meshPrimitive(e,(function(e){(0,a.Z)(e.material)&&(t[e.material]=!0)}))})),t},h.texture=function(e){const t={};if(r.Z.material(e,(function(e){(0,n.Z)(e,(function(e){t[e]=!0}))})),(0,o.Z)(e,"EXT_feature_metadata")){r.Z.mesh(e,(function(e){r.Z.meshPrimitive(e,(function(e){const i=e.extensions;if((0,a.Z)(i)&&(0,a.Z)(i.EXT_feature_metadata)){const e=i.EXT_feature_metadata.featureIdTextures;if((0,a.Z)(e)){const i=e.length;for(let r=0;r<i;++r){const i=e[r].featureIds.texture;t[i.index]=!0}}}}))}));const i=e.extensions.EXT_feature_metadata.featureTextures;for(const e in i)if(i.hasOwnProperty(e)){const r=i[e].properties;if((0,a.Z)(r))for(const e in r)if(r.hasOwnProperty(e)){const i=r[e].texture;t[i.index]=!0}}}return t},h.sampler=function(e){const t={};return r.Z.texture(e,(function(e){(0,a.Z)(e.sampler)&&(t[e.sampler]=!0)})),t};const f=function(e,t){return t=(0,s.Z)(t,c),c.forEach((function(i){t.indexOf(i)>-1&&function(e,t){const i=e[u[t]];if((0,a.Z)(i)){let r=0;const n=h[t](e),o=i.length;for(let i=0;i<o;++i)n[i]||(l[t](e,i-r),r++)}}(e,i)})),e}},40273:(e,t,i)=>{i.d(t,{Z:()=>u});var r=i(32891),n=i(45813),o=i(30839),s=i(44990),a=i(95411);function c(e,t,i){const n=s.Z.createTypedArray(i,(0,o.Z)(e,t)),a=new Uint8Array(n.buffer);t.bufferView=(0,r.Z)(e,a),t.componentType=i,t.byteOffset=0}const u=function(e){let t;return n.Z.accessorWithSemantic(e,"JOINTS_0",(function(i){const r=e.accessors[i];t=r.componentType,t===a.Z.BYTE?c(e,r,s.Z.UNSIGNED_BYTE):t!==a.Z.UNSIGNED_BYTE&&t!==a.Z.UNSIGNED_SHORT&&c(e,r,s.Z.UNSIGNED_SHORT)})),n.Z.accessorWithSemantic(e,"WEIGHTS_0",(function(i){const r=e.accessors[i];t=r.componentType,t===a.Z.BYTE?c(e,r,s.Z.UNSIGNED_BYTE):t===a.Z.SHORT&&c(e,r,s.Z.UNSIGNED_SHORT)})),e}},319:(e,t,i)=>{i.d(t,{Z:()=>F});var r=i(63651),n=i(75143),o=i(62030),s=i(45813),a=i(47428),c=i(57727),u=i(19719),l=i(50849),h=i(68869),d=i(40273),f=i(93517),p=i(90868),m=i(55077),g=i(44990),_=i(88779),Z=i(54485),y=i(71118),b=i(20291),v=i(95411);const T={.8:function(e){(0,Z.Z)(e.asset)||(e.asset={});const t=e.asset;if(t.version="1.0","string"==typeof t.profile){const e=t.profile.split(" ");t.profile={api:e[0],version:e[1]}}else t.profile={};(0,Z.Z)(e.version)&&delete e.version;x(e),w(e),S(e),A(e),E(e),(0,Z.Z)(e.allExtensions)&&(e.extensionsUsed=e.allExtensions,delete e.allExtensions);if((0,Z.Z)(e.lights)){const t=(0,_.Z)(e.extensions,{});e.extensions=t;const i=(0,_.Z)(t.KHR_materials_common,{});t.KHR_materials_common=i,i.lights=e.lights,delete e.lights,(0,r.Z)(e,"KHR_materials_common")}},"1.0":function(e){e.asset=(0,_.Z)(e.asset,{}),e.asset.version="2.0",x(e),function(e){const t=e.animations;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const i=t[e],r=i.parameters;if((0,Z.Z)(r)){const e=i.samplers;for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];i.input=r[i.input],i.output=r[i.output]}delete i.parameters}}}(e),function(e){s.Z.node(e,(function(t,i){R(t)&&D(e,i)}))}(e),function(e){let t;const i={accessors:{},animations:{},buffers:{},bufferViews:{},cameras:{},images:{},materials:{},meshes:{},nodes:{},programs:{},samplers:{},scenes:{},shaders:{},skins:{},textures:{},techniques:{}};let r;const o={},a=e.nodes;for(const e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r=a[e].jointName,(0,Z.Z)(r)&&(o[r]=e));for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&(0,Z.Z)(i[t])){const r={},n=e[t];e[t]=C(n,r),i[t]=r}for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(o[r]=i.nodes[o[r]]);(0,Z.Z)(e.scene)&&(e.scene=i.scenes[e.scene]);s.Z.bufferView(e,(function(e){(0,Z.Z)(e.buffer)&&(e.buffer=i.buffers[e.buffer])})),s.Z.accessor(e,(function(e){(0,Z.Z)(e.bufferView)&&(e.bufferView=i.bufferViews[e.bufferView])})),s.Z.shader(e,(function(e){const t=e.extensions;if((0,Z.Z)(t)){const r=t.KHR_binary_glTF;(0,Z.Z)(r)&&(e.bufferView=i.bufferViews[r.bufferView],delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}})),s.Z.program(e,(function(e){(0,Z.Z)(e.vertexShader)&&(e.vertexShader=i.shaders[e.vertexShader]),(0,Z.Z)(e.fragmentShader)&&(e.fragmentShader=i.shaders[e.fragmentShader])})),s.Z.technique(e,(function(e){(0,Z.Z)(e.program)&&(e.program=i.programs[e.program]),s.Z.techniqueParameter(e,(function(e){(0,Z.Z)(e.node)&&(e.node=i.nodes[e.node]);const t=e.value;"string"==typeof t&&(e.value={index:i.textures[t]})}))})),s.Z.mesh(e,(function(e){s.Z.meshPrimitive(e,(function(e){(0,Z.Z)(e.indices)&&(e.indices=i.accessors[e.indices]),s.Z.meshPrimitiveAttribute(e,(function(t,r){e.attributes[r]=i.accessors[t]})),(0,Z.Z)(e.material)&&(e.material=i.materials[e.material])}))})),s.Z.node(e,(function(r){let o=r.children;if((0,Z.Z)(o)){const e=o.length;for(t=0;t<e;++t)o[t]=i.nodes[o[t]]}if((0,Z.Z)(r.meshes)){const s=r.meshes,a=s.length;if(a>0)for(r.mesh=i.meshes[s[0]],t=1;t<a;++t){const a={mesh:i.meshes[s[t]]},c=(0,n.Z)(e.nodes,a);(0,Z.Z)(o)||(o=[],r.children=o),o.push(c)}delete r.meshes}if((0,Z.Z)(r.camera)&&(r.camera=i.cameras[r.camera]),(0,Z.Z)(r.skin)&&(r.skin=i.skins[r.skin]),(0,Z.Z)(r.skeletons)){const t=r.skeletons;if(t.length>0&&(0,Z.Z)(r.skin)){e.skins[r.skin].skeleton=i.nodes[t[0]]}delete r.skeletons}(0,Z.Z)(r.jointName)&&delete r.jointName})),s.Z.skin(e,(function(e){(0,Z.Z)(e.inverseBindMatrices)&&(e.inverseBindMatrices=i.accessors[e.inverseBindMatrices]);const r=e.jointNames;if((0,Z.Z)(r)){const i=[],n=r.length;for(t=0;t<n;++t)i[t]=o[r[t]];e.joints=i,delete e.jointNames}})),s.Z.scene(e,(function(e){const r=e.nodes;if((0,Z.Z)(r)){const e=r.length;for(t=0;t<e;++t)r[t]=i.nodes[r[t]]}})),s.Z.animation(e,(function(e){const t={};e.samplers=C(e.samplers,t),s.Z.animationSampler(e,(function(e){e.input=i.accessors[e.input],e.output=i.accessors[e.output]})),s.Z.animationChannel(e,(function(e){e.sampler=t[e.sampler];const r=e.target;(0,Z.Z)(r)&&(r.node=i.nodes[r.id],delete r.id)}))})),s.Z.material(e,(function(e){(0,Z.Z)(e.technique)&&(e.technique=i.techniques[e.technique]),s.Z.materialValue(e,(function(t,r){"string"==typeof t&&(e.values[r]={index:i.textures[t]})}));const t=e.extensions;if((0,Z.Z)(t)){const e=t.KHR_materials_common;(0,Z.Z)(e)&&s.Z.materialValue(e,(function(t,r){"string"==typeof t&&(e.values[r]={index:i.textures[t]})}))}})),s.Z.image(e,(function(e){const t=e.extensions;if((0,Z.Z)(t)){const r=t.KHR_binary_glTF;(0,Z.Z)(r)&&(e.bufferView=i.bufferViews[r.bufferView],e.mimeType=r.mimeType,delete t.KHR_binary_glTF),0===Object.keys(t).length&&delete e.extensions}})),s.Z.texture(e,(function(e){(0,Z.Z)(e.sampler)&&(e.sampler=i.samplers[e.sampler]),(0,Z.Z)(e.source)&&(e.source=i.images[e.source])}))}(e),function(e){s.Z.animation(e,(function(e){s.Z.animationSampler(e,(function(e){delete e.name}))}))}(e),function(e){const t=e.asset;delete t.profile,delete t.premultipliedAlpha}(e),function(e){const t=e.extensionsUsed;if(e.extensionsRequired=(0,_.Z)(e.extensionsRequired,[]),(0,Z.Z)(t)){const i=t.length;for(let r=0;r<i;++r){const i=t[r];(0,Z.Z)(I[i])&&e.extensionsRequired.push(i)}}}(e),function(e){s.Z.buffer(e,(function(e){(0,Z.Z)(e.byteLength)||(e.byteLength=e.extras._pipeline.source.length)})),s.Z.accessor(e,(function(t){const i=t.bufferView;if((0,Z.Z)(i)){const r=e.bufferViews[i],n=O(e,t),o=t.byteOffset+t.count*n;r.byteLength=Math.max((0,_.Z)(r.byteLength,0),o)}}))}(e),function(e){let t,i,r;const o=e.bufferViews,a={};s.Z.accessorContainingVertexAttributeData(e,(function(t){const i=e.accessors[t];(0,Z.Z)(i.bufferView)&&(a[i.bufferView]=!0)}));const c={};s.Z.accessor(e,(function(e){(0,Z.Z)(e.bufferView)&&(c[e.bufferView]=(0,_.Z)(c[e.bufferView],[]),c[e.bufferView].push(e))}));for(const s in c)if(Object.prototype.hasOwnProperty.call(c,s)){r=o[s];const u=c[s];u.sort((function(e,t){return e.byteOffset-t.byteOffset}));let l=0,h=0;const d=u.length;for(t=0;t<d;++t){let c=u[t];const f=O(e,c),p=c.byteOffset,g=c.count*f;delete c.byteStride;const _=t<d-1;if(f!==(_?O(e,u[t+1]):void 0)){const e=(0,m.Z)(r,!0);a[s]&&(e.byteStride=f),e.byteOffset+=l,e.byteLength=p+g-l;const d=(0,n.Z)(o,e);for(i=h;i<=t;++i)c=u[i],c.bufferView=d,c.byteOffset=c.byteOffset-l;l=_?u[t+1].byteOffset:void 0,h=t+1}}}(0,h.Z)(e,["accessor","bufferView","buffer"])}(e),function(e){s.Z.accessorWithSemantic(e,"POSITION",(function(t){const i=e.accessors[t];if(!(0,Z.Z)(i.min)||!(0,Z.Z)(i.max)){const t=(0,o.Z)(e,i);i.min=t.min,i.max=t.max}}))}(e),function(e){s.Z.animation(e,(function(t){s.Z.animationSampler(t,(function(t){const i=e.accessors[t.input];if(!(0,Z.Z)(i.min)||!(0,Z.Z)(i.max)){const t=(0,o.Z)(e,i);i.min=t.min,i.max=t.max}}))}))}(e),function(e){s.Z.buffer(e,(function(e){delete e.type}))}(e),function(e){s.Z.texture(e,(function(e){delete e.format,delete e.internalFormat,delete e.target,delete e.type}))}(e),function(e){s.Z.mesh(e,(function(e){s.Z.meshPrimitive(e,(function(e){s.Z.meshPrimitiveAttribute(e,(function(t,i){"TEXCOORD"===i?e.attributes.TEXCOORD_0=t:"COLOR"===i&&(e.attributes.COLOR_0=t)})),delete e.attributes.TEXCOORD,delete e.attributes.COLOR}))})),s.Z.technique(e,(function(e){s.Z.techniqueParameter(e,(function(e){const t=e.semantic;(0,Z.Z)(t)&&("TEXCOORD"===t?e.semantic="TEXCOORD_0":"COLOR"===t&&(e.semantic="COLOR_0"))}))}))}(e),function(e){const t={};s.Z.mesh(e,(function(e){s.Z.meshPrimitive(e,(function(e){s.Z.meshPrimitiveAttribute(e,(function(e,i){if("_"!==i.charAt(0)){const e=i.search(/_[0-9]+/g);let r,n=i,o="_0";e>=0&&(n=i.substring(0,e),o=i.substring(e));const s=P[n];(0,Z.Z)(s)?(r=s+o,t[i]=r):(0,Z.Z)(L[n])||(r="_"+i,t[i]=r)}}));for(const i in t)if(Object.prototype.hasOwnProperty.call(t,i)){const r=t[i],n=e.attributes[i];(0,Z.Z)(n)&&(delete e.attributes[i],e.attributes[r]=n)}}))})),s.Z.technique(e,(function(e){s.Z.techniqueParameter(e,(function(e){const i=t[e.semantic];(0,Z.Z)(i)&&(e.semantic=i)}))}))}(e),(0,d.Z)(e),function(e){s.Z.camera(e,(function(e){const t=e.perspective;if((0,Z.Z)(t)){const e=t.aspectRatio;(0,Z.Z)(e)&&0===e&&delete t.aspectRatio;const i=t.yfov;(0,Z.Z)(i)&&0===i&&(t.yfov=1)}}))}(e),(0,u.Z)(e),(0,l.Z)(e),function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const i=e[t];Array.isArray(i)&&0===i.length&&delete e[t]}s.Z.node(e,(function(e){(0,Z.Z)(e.children)&&0===e.children.length&&delete e.children}))}(e)},"2.0":void 0};function x(e){const t=e.materials;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const i=t[e],r=i.instanceTechnique;(0,Z.Z)(r)&&(i.technique=r.technique,i.values=r.values,delete i.instanceTechnique)}}function w(e){const t=e.meshes;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const i=t[e].primitives;if((0,Z.Z)(i)){const e=i.length;for(let t=0;t<e;++t){const e=i[t],r=(0,_.Z)(e.primitive,v.Z.TRIANGLES);e.mode=(0,_.Z)(e.mode,r),delete e.primitive}}}}function S(e){const t=e.nodes,i=new f.Z,r=new b.Z;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if((0,Z.Z)(n.rotation)){const e=n.rotation;f.Z.fromArray(e,0,i),b.Z.fromAxisAngle(i,e[3],r),n.rotation=[r.x,r.y,r.z,r.w]}const o=n.instanceSkin;(0,Z.Z)(o)&&(n.skeletons=o.skeletons,n.skin=o.skin,n.meshes=o.meshes,delete n.instanceSkin)}}function A(e){const t=e.animations,i=e.accessors,r=e.bufferViews,n=e.buffers,o={},s=new f.Z,a=new b.Z;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const u=t[e],l=u.channels,h=u.parameters,d=u.samplers;if((0,Z.Z)(l)){const e=l.length;for(let t=0;t<e;++t){const e=l[t];if("rotation"===e.target.path){const t=h[d[e.sampler].output];if((0,Z.Z)(o[t]))continue;o[t]=!0;const u=i[t],l=r[u.bufferView],p=n[l.buffer].extras._pipeline.source,m=p.byteOffset+l.byteOffset+u.byteOffset,_=u.componentType,y=u.count,v=(0,c.Z)(u.type),T=u.count*v,x=g.Z.createArrayBufferView(_,p.buffer,m,T);for(let e=0;e<y;e++){const t=e*v;f.Z.unpack(x,t,s);const i=x[t+3];b.Z.fromAxisAngle(s,i,a),b.Z.pack(a,x,t)}}}}}}function E(e){const t=e.techniques;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const i=t[e],r=i.passes;if((0,Z.Z)(r)){const e=(0,_.Z)(i.pass,"defaultPass");if(Object.prototype.hasOwnProperty.call(r,e)){const t=r[e],n=t.instanceProgram;i.attributes=(0,_.Z)(i.attributes,n.attributes),i.program=(0,_.Z)(i.program,n.program),i.uniforms=(0,_.Z)(i.uniforms,n.uniforms),i.states=(0,_.Z)(i.states,t.states)}delete i.passes,delete i.pass}}}function C(e,t){const i=[];for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];t[r]=i.length,i.push(n),(0,Z.Z)(n.name)||(n.name=r)}return i}const I={CESIUM_RTC:!0,KHR_materials_common:!0,WEB3D_quantized_attributes:!0};const L={POSITION:!0,NORMAL:!0,TANGENT:!0},P={COLOR:"COLOR",JOINT:"JOINTS",JOINTS:"JOINTS",TEXCOORD:"TEXCOORD",WEIGHT:"WEIGHTS",WEIGHTS:"WEIGHTS"};function O(e,t){return(0,Z.Z)(t.byteStride)&&0!==t.byteStride?t.byteStride:(0,a.Z)(e,t)}function R(e){return(!(0,Z.Z)(e.children)||0===e.children.length)&&(!(0,Z.Z)(e.meshes)||0===e.meshes.length)&&!(0,Z.Z)(e.camera)&&!(0,Z.Z)(e.skin)&&!(0,Z.Z)(e.skeletons)&&!(0,Z.Z)(e.jointName)&&(!(0,Z.Z)(e.translation)||f.Z.fromArray(e.translation).equals(f.Z.ZERO))&&(!(0,Z.Z)(e.scale)||f.Z.fromArray(e.scale).equals(new f.Z(1,1,1)))&&(!(0,Z.Z)(e.rotation)||p.Z.fromArray(e.rotation).equals(new p.Z(0,0,0,1)))&&(!(0,Z.Z)(e.matrix)||y.Z.fromColumnMajorArray(e.matrix).equals(y.Z.IDENTITY))&&!(0,Z.Z)(e.extensions)&&!(0,Z.Z)(e.extras)}function D(e,t){s.Z.scene(e,(function(e){const i=e.nodes;if((0,Z.Z)(i)){for(let e=i.length;e>=0;--e)if(i[e]===t)return void i.splice(e,1)}})),s.Z.node(e,(function(i,r){if((0,Z.Z)(i.children)){const n=i.children.indexOf(t);n>-1&&(i.children.splice(n,1),R(i)&&D(e,r))}})),delete e.nodes[t]}const F=function(e,t){const i=(t=(0,_.Z)(t,_.Z.EMPTY_OBJECT)).targetVersion;let r=e.version;e.asset=(0,_.Z)(e.asset,{version:"1.0"}),e.asset.version=(0,_.Z)(e.asset.version,"1.0"),r=(0,_.Z)(r,e.asset.version).toString(),Object.prototype.hasOwnProperty.call(T,r)||((0,Z.Z)(r)&&(r=r.substring(0,3)),Object.prototype.hasOwnProperty.call(T,r)||(r="1.0"));let n=T[r];for(;(0,Z.Z)(n)&&r!==i;)n(e,t),r=e.asset.version,n=T[r];return e}},90289:(e,t,i)=>{i.d(t,{Z:()=>n});var r=i(54485);const n=function(e,t){return(0,r.Z)(e.extensionsUsed)&&e.extensionsUsed.indexOf(t)>=0}},55160:(e,t,i)=>{i.d(t,{Z:()=>d});var r=i(17497),n=i(88779),o=i(54485),s=i(20176),a=i(20573),c=i(29457),u=i(22128),l=i(39226),h=i(5955);function d(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).gltf,i=e.extension,a=e.extensionLegacy,c=e.gltfResource,u=e.baseResource,l=e.supportedImageFormats,d=e.cacheKey,f=(0,n.Z)(e.asynchronous,!0);if(r.Z.typeOf.object("options.gltf",t),r.Z.typeOf.object("options.gltfResource",c),r.Z.typeOf.object("options.baseResource",u),r.Z.typeOf.object("options.supportedImageFormats",l),!(0,o.Z)(e.extension)&&!(0,o.Z)(e.extensionLegacy))throw new s.Z("One of options.extension or options.extensionLegacy must be specified");this._gltfResource=c,this._baseResource=u,this._gltf=t,this._extension=i,this._extensionLegacy=a,this._supportedImageFormats=l,this._cacheKey=d,this._asynchronous=f,this._bufferViewLoaders=[],this._textureLoaders=[],this._schemaLoader=void 0,this._structuralMetadata=void 0,this._state=h.Z.UNLOADED,this._promise=void 0}function f(e,t){for(const i in e)if(e.hasOwnProperty(i)){const r=e[i],n=r.values,s=r.arrayOffsets,a=r.stringOffsets;(0,o.Z)(n)&&(t[n]=!0),(0,o.Z)(s)&&(t[s]=!0),(0,o.Z)(a)&&(t[a]=!0)}}function p(e,t){for(const i in e)if(e.hasOwnProperty(i)){const r=e[i],n=r.bufferView,s=r.arrayOffsetBufferView,a=r.stringOffsetBufferView;(0,o.Z)(n)&&(t[n]=!0),(0,o.Z)(s)&&(t[s]=!0),(0,o.Z)(a)&&(t[a]=!0)}}function m(e,t){for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];t[r.index]=r}}function g(e,t){for(const i in e)if(e.hasOwnProperty(i)){const r=e[i].texture;t[r.index]=r}}function _(e){const t=e._bufferViewLoaders,i=t.length;for(let e=0;e<i;++e)u.Z.unload(t[e]);e._bufferViewLoaders.length=0}(0,o.Z)(Object.create)&&(d.prototype=Object.create(l.Z.prototype),d.prototype.constructor=d),Object.defineProperties(d.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},structuralMetadata:{get:function(){return this._structuralMetadata}}}),d.prototype.load=function(){const e=function(e){let t;t=(0,o.Z)(e._extension)?function(e){const t=e.propertyTables,i={};if((0,o.Z)(t))for(let e=0;e<t.length;e++){f(t[e].properties,i)}return i}(e._extension):function(e){const t=e.featureTables,i={};if((0,o.Z)(t))for(const e in t)if(t.hasOwnProperty(e)){const r=t[e].properties;(0,o.Z)(r)&&p(r,i)}return i}(e._extensionLegacy);const i=[],r={};for(const n in t)if(t.hasOwnProperty(n)){const t=u.Z.loadBufferView({gltf:e._gltf,bufferViewId:parseInt(n),gltfResource:e._gltfResource,baseResource:e._baseResource});i.push(t.promise),e._bufferViewLoaders.push(t),r[n]=t}return Promise.all(i).then((function(){const t={};for(const e in r)if(r.hasOwnProperty(e)){const i=r[e],n=new Uint8Array(i.typedArray);t[e]=n}return _(e),t}))}(this),t=function(e){let t;t=(0,o.Z)(e._extension)?function(e){const t={},i=e.propertyTextures;if((0,o.Z)(i))for(let e=0;e<i.length;e++){const r=i[e].properties;(0,o.Z)(r)&&m(r,t)}return t}(e._extension):function(e){const t={},i=e.featureTextures;if((0,o.Z)(i))for(const e in i)if(i.hasOwnProperty(e)){const r=i[e].properties;(0,o.Z)(r)&&g(r,t)}return t}(e._extensionLegacy);const i=e._gltf,r=e._gltfResource,n=e._baseResource,s=e._supportedImageFormats,a=e._asynchronous,c=[],l={};for(const o in t)if(t.hasOwnProperty(o)){const h=u.Z.loadTexture({gltf:i,textureInfo:t[o],gltfResource:r,baseResource:n,supportedImageFormats:s,asynchronous:a});c.push(h.promise),e._textureLoaders.push(h),l[o]=h}return Promise.all(c).then((function(){const e={};for(const t in l)if(l.hasOwnProperty(t)){const i=l[t];e[t]=i.texture}return e}))}(this),i=function(e){const t=(0,n.Z)(e._extension,e._extensionLegacy);let i;if((0,o.Z)(t.schemaUri)){const r=e._baseResource.getDerivedResource({url:t.schemaUri});i=u.Z.loadSchema({resource:r})}else i=u.Z.loadSchema({schema:t.schema});return e._schemaLoader=i,i.promise.then((function(e){return e.schema}))}(this);this._gltf=void 0,this._state=h.Z.LOADING;const r=this;this._promise=Promise.all([e,t,i]).then((function(e){if(r.isDestroyed())return;const t=e[0],i=e[1],n=e[2];return(0,o.Z)(r._extension)?r._structuralMetadata=(0,a.Z)({extension:r._extension,schema:n,bufferViews:t,textures:i}):r._structuralMetadata=(0,c.Z)({extension:r._extensionLegacy,schema:n,bufferViews:t,textures:i}),r._state=h.Z.READY,r})).catch((function(e){if(r.isDestroyed())return;r.unload(),r._state=h.Z.FAILED;return Promise.reject(r.getError("Failed to load structural metadata",e))}))},d.prototype.process=function(e){if(r.Z.typeOf.object("frameState",e),this._state!==h.Z.LOADING)return;const t=this._textureLoaders,i=t.length;for(let r=0;r<i;++r){t[r].process(e)}},d.prototype.unload=function(){_(this),function(e){const t=e._textureLoaders,i=t.length;for(let e=0;e<i;++e)u.Z.unload(t[e]);e._textureLoaders.length=0}(this),(0,o.Z)(this._schemaLoader)&&u.Z.unload(this._schemaLoader),this._schemaLoader=void 0,this._structuralMetadata=void 0}},23960:(e,t,i)=>{i.d(t,{Z:()=>m});var r=i(17497),n=i(22874),o=i(88779),s=i(54485),a=i(91166),c=i(47334),u=i(48867),l=i(91373),h=i(76274),d=i(66962),f=i(39226),p=i(5955);function m(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resourceCache,i=e.gltf,n=e.textureInfo,s=e.gltfResource,a=e.baseResource,c=e.supportedImageFormats,u=e.cacheKey,l=(0,o.Z)(e.asynchronous,!0);r.Z.typeOf.func("options.resourceCache",t),r.Z.typeOf.object("options.gltf",i),r.Z.typeOf.object("options.textureInfo",n),r.Z.typeOf.object("options.gltfResource",s),r.Z.typeOf.object("options.baseResource",a),r.Z.typeOf.object("options.supportedImageFormats",c);const d=n.index,f=h.Z.getImageIdFromTexture({gltf:i,textureId:d,supportedImageFormats:c});this._resourceCache=t,this._gltf=i,this._textureInfo=n,this._imageId=f,this._gltfResource=s,this._baseResource=a,this._cacheKey=u,this._asynchronous=l,this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._state=p.Z.UNLOADED,this._promise=void 0,this._process=function(e,t){}}(0,s.Z)(Object.create)&&(m.prototype=Object.create(f.Z.prototype),m.prototype.constructor=m),Object.defineProperties(m.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},texture:{get:function(){return this._texture}}});const g=new _;function _(){this.gltf=void 0,this.textureInfo=void 0,this.image=void 0,this.context=void 0,this.texture=void 0}function Z(e,t,i,r,o){const d=i.internalFormat;let f=!1;a.Z.isCompressedFormat(d)&&!(0,s.Z)(r)&&(f=!0);const p=h.Z.createSampler({gltf:e,textureInfo:t,compressedTextureNoMipmap:f}),m=p.minificationFilter,g=p.wrapS,_=p.wrapT,Z=m===u.Z.NEAREST_MIPMAP_NEAREST||m===u.Z.NEAREST_MIPMAP_LINEAR||m===u.Z.LINEAR_MIPMAP_NEAREST||m===u.Z.LINEAR_MIPMAP_LINEAR,y=!(0,s.Z)(d)&&Z,b=y||g===l.Z.REPEAT||g===l.Z.MIRRORED_REPEAT||_===l.Z.REPEAT||_===l.Z.MIRRORED_REPEAT,v=!n.Z.isPowerOfTwo(i.width)||!n.Z.isPowerOfTwo(i.height),T=b&&v;let x;return(0,s.Z)(d)?(!o.webgl2&&a.Z.isCompressedFormat(d),x=c.Z.create({context:o,source:{arrayBufferView:i.bufferView,mipLevels:r},width:i.width,height:i.height,pixelFormat:i.internalFormat,sampler:p})):(T&&(i=function(e){const t=document.createElement("canvas");return t.width=n.Z.nextPowerOfTwo(e.width),t.height=n.Z.nextPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),t}(i)),x=c.Z.create({context:o,source:i,sampler:p,flipY:!1,skipColorSpaceConversion:!0})),y&&x.generateMipmap(),x}m.prototype.load=function(){const e=this._resourceCache.loadImage({gltf:this._gltf,imageId:this._imageId,gltfResource:this._gltfResource,baseResource:this._baseResource});this._imageLoader=e,this._state=p.Z.LOADING;const t=this,i=new Promise((function(e){t._process=function(t,i){if((0,s.Z)(t._texture))return;if(!(0,s.Z)(t._image))return;let r;if(t._asynchronous){const e=g;e.set(t._gltf,t._textureInfo,t._image,t._mipLevels,i.context);if(!i.jobScheduler.execute(e,d.Z.TEXTURE))return;r=e.texture}else r=Z(t._gltf,t._textureInfo,t._image,t._mipLevels,i.context);t.unload(),t._texture=r,t._state=p.Z.READY,e(t)}}));return this._promise=e.promise.then((function(){if(!t.isDestroyed())return t._image=e.image,t._mipLevels=e.mipLevels,t._state=p.Z.PROCESSING,i})).catch((function(e){if(t.isDestroyed())return;t.unload(),t._state=p.Z.FAILED;return Promise.reject(t.getError("Failed to load texture",e))})),this._promise},_.prototype.set=function(e,t,i,r,n){this.gltf=e,this.textureInfo=t,this.image=i,this.mipLevels=r,this.context=n},_.prototype.execute=function(){this.texture=Z(this.gltf,this.textureInfo,this.image,this.mipLevels,this.context)},m.prototype.process=function(e){return r.Z.typeOf.object("frameState",e),this._process(this,e)},m.prototype.unload=function(){(0,s.Z)(this._texture)&&this._texture.destroy(),(0,s.Z)(this._imageLoader)&&this._resourceCache.unload(this._imageLoader),this._imageLoader=void 0,this._image=void 0,this._mipLevels=void 0,this._texture=void 0,this._gltf=void 0}},88651:(e,t,i)=>{i.d(t,{Z:()=>_});var r=i(65730),n=i(17497),o=i(88779),s=i(54485),a=i(20176),c=i(31328),u=i(36627),l=i(91257),h=i(66962),d=i(53839),f=i(39226),p=i(5955),m=i(69310),g=i(44990);function _(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).resourceCache,i=e.gltf,r=e.gltfResource,c=e.baseResource,u=e.bufferViewId,l=e.draco,h=e.attributeSemantic,d=e.accessorId,f=e.cacheKey,m=(0,o.Z)(e.asynchronous,!0),g=(0,o.Z)(e.dequantize,!1),_=(0,o.Z)(e.loadBuffer,!1),Z=(0,o.Z)(e.loadTypedArray,!1);if(n.Z.typeOf.func("options.resourceCache",t),n.Z.typeOf.object("options.gltf",i),n.Z.typeOf.object("options.gltfResource",r),n.Z.typeOf.object("options.baseResource",c),!_&&!Z)throw new a.Z("At least one of loadBuffer and loadTypedArray must be true.");const y=(0,s.Z)(u),b=(0,s.Z)(l),v=(0,s.Z)(h),T=(0,s.Z)(d);if(y===b)throw new a.Z("One of options.bufferViewId and options.draco must be defined.");if(b&&!v)throw new a.Z("When options.draco is defined options.attributeSemantic must also be defined.");if(b&&!T)throw new a.Z("When options.draco is defined options.accessorId must also be defined.");b&&(n.Z.typeOf.object("options.draco",l),n.Z.typeOf.string("options.attributeSemantic",h),n.Z.typeOf.number("options.accessorId",d)),this._resourceCache=t,this._gltfResource=r,this._baseResource=c,this._gltf=i,this._bufferViewId=u,this._draco=l,this._attributeSemantic=h,this._accessorId=d,this._cacheKey=f,this._asynchronous=m,this._dequantize=g,this._loadBuffer=_,this._loadTypedArray=Z,this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._quantization=void 0,this._typedArray=void 0,this._buffer=void 0,this._state=p.Z.UNLOADED,this._promise=void 0,this._process=function(e,t){}}function Z(){this.typedArray=void 0,this.dequantize=void 0,this.componentType=void 0,this.type=void 0,this.count=void 0,this.context=void 0,this.buffer=void 0}function y(e,t,i,r,n,o){t&&i!==g.Z.FLOAT&&(e=m.Z.dequantize(e,i,r,n));const s=c.Z.createVertexBuffer({typedArray:e,context:o,usage:u.Z.STATIC_DRAW});return s.vertexArrayDestroyable=!1,s}(0,s.Z)(Object.create)&&(_.prototype=Object.create(f.Z.prototype),_.prototype.constructor=_),Object.defineProperties(_.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},buffer:{get:function(){return this._buffer}},typedArray:{get:function(){return this._typedArray}},quantization:{get:function(){return this._quantization}}}),_.prototype.load=function(){let e;e=(0,s.Z)(this._draco)?function(e){const t=e._resourceCache.loadDraco({gltf:e._gltf,draco:e._draco,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._dracoLoader=t,e._state=p.Z.LOADING,t.promise.then((function(){if(e.isDestroyed())return;const i=t.decodedData.vertexAttributes[e._attributeSemantic],n=e._accessorId,o=e._gltf.accessors[n].type,a=i.array,c=i.data.quantization;return(0,s.Z)(c)&&(e._quantization=function(e,t,i,n){const o=(1<<e.quantizationBits)-1,s=1/o,a=new d.Z.Quantization;if(a.componentDatatype=t,a.octEncoded=e.octEncoded,a.octEncodedZXY=!0,a.type=n,a.octEncoded)a.type=l.Z.VEC2,a.normalizationRange=o;else{const t=l.Z.getMathType(n);if(t===Number){const t=e.range;a.quantizedVolumeOffset=e.minValues[0],a.quantizedVolumeDimensions=t,a.normalizationRange=o,a.quantizedVolumeStepSize=t*s}else{a.quantizedVolumeOffset=t.unpack(e.minValues),a.normalizationRange=t.unpack((0,r.Z)(new Array(i),o));const n=(0,r.Z)(new Array(i),e.range);a.quantizedVolumeDimensions=t.unpack(n);const c=n.map((function(e){return e*s}));a.quantizedVolumeStepSize=t.unpack(c)}}return a}(c,i.data.componentDatatype,i.data.componentsPerAttribute,o)),e._typedArray=a,e._state=p.Z.PROCESSING,e}))}(this):function(e){const t=e._resourceCache.loadBufferView({gltf:e._gltf,bufferViewId:e._bufferViewId,gltfResource:e._gltfResource,baseResource:e._baseResource});return e._state=p.Z.LOADING,e._bufferViewLoader=t,t.promise.then((function(){if(!e.isDestroyed())return e._typedArray=t.typedArray,e._state=p.Z.PROCESSING,e}))}(this);const t=this,i=new Z,n=new Promise((function(e){t._process=function(t,r){if(t._state===p.Z.READY)return;const n=t._typedArray,o=t._dequantize;if((0,s.Z)(t._dracoLoader)&&t._dracoLoader.process(r),(0,s.Z)(t._bufferViewLoader)&&t._bufferViewLoader.process(r),!(0,s.Z)(n))return;const a=t._gltf.accessors[t._accessorId];let c;if(t._loadBuffer&&t._asynchronous){const e=i;e.set(n,o,a.componentType,a.type,a.count,r.context);if(!r.jobScheduler.execute(e,h.Z.BUFFER))return;c=e.buffer}else t._loadBuffer&&(c=y(n,o,a.componentType,a.type,a.count,r.context));t.unload(),t._buffer=c,t._typedArray=t._loadTypedArray?n:void 0,t._state=p.Z.READY,e(t)}}));return this._promise=e.then((function(){if(!t.isDestroyed())return n})).catch((function(e){if(!t.isDestroyed())return function(e,t){e.unload(),e._state=p.Z.FAILED;const i="Failed to load vertex buffer";return t=e.getError(i,t),Promise.reject(t)}(t,e)})),this._promise},Z.prototype.set=function(e,t,i,r,n,o){this.typedArray=e,this.dequantize=t,this.componentType=i,this.type=r,this.count=n,this.context=o},Z.prototype.execute=function(){this.buffer=y(this.typedArray,this.dequantize,this.componentType,this.type,this.count,this.context)},_.prototype.process=function(e){return n.Z.typeOf.object("frameState",e),this._process(this,e)},_.prototype.unload=function(){(0,s.Z)(this._buffer)&&this._buffer.destroy();const e=this._resourceCache;(0,s.Z)(this._bufferViewLoader)&&e.unload(this._bufferViewLoader),(0,s.Z)(this._dracoLoader)&&e.unload(this._dracoLoader),this._bufferViewLoader=void 0,this._dracoLoader=void 0,this._typedArray=void 0,this._buffer=void 0,this._gltf=void 0}},82110:(e,t,i)=>{i.d(t,{Z:()=>v});var r=i(78505),n=i(62062),o=i(88779),s=i(54485),a=i(20176),c=i(92893),u=i(96507),l=i(79070),h=i(67410),d=i(22874),f=i(34152),p=i(51625),m=i(67197),g=i(21514),_=i(85002),Z=i(78333);function y(){this._image=new Image}function b(e){if(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),!(0,s.Z)(e.url)&&!(0,s.Z)(e.metadata))throw new a.Z("options.url or options.metadata is required.");let t;if(this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,(0,s.Z)(e.metadata))t=e.metadata;else{const i=m.Z.createIfNeeded(e.url);t=new l.Z(i)}this._metadata=t,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tilingScheme=new u.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new f.Z(-d.Z.PI,-d.Z.PI,d.Z.PI,d.Z.PI),ellipsoid:e.ellipsoid});let i=e.credit;"string"==typeof i&&(i=new r.Z(i)),this._credit=i,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=23,(0,s.Z)(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new y),this._errorEvent=new c.Z,this._ready=!1;const n=this;let h;this._readyPromise=t.readyPromise.then((function(e){if(!t.imageryPresent){const e=new g.Z(`The server ${t.url} doesn't have imagery`);return h=_.Z.handleError(h,n,n._errorEvent,e.message,void 0,void 0,void 0,e),Promise.reject(e)}return _.Z.handleSuccess(h),n._ready=e,e})).catch((function(e){return h=_.Z.handleError(h,n,n._errorEvent,e.message,void 0,void 0,void 0,e),Promise.reject(e)}))}y.prototype.isReady=function(){return!0},y.prototype.shouldDiscardImage=function(e){return e===this._image},Object.defineProperties(b.prototype,{url:{get:function(){return this._metadata.url}},proxy:{get:function(){return this._metadata.proxy}},tileWidth:{get:function(){if(!this._ready)throw new a.Z("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new a.Z("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new a.Z("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new a.Z("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new a.Z("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new a.Z("rectangle must not be called before the imagery provider is ready.");return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new a.Z("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}}}),b.prototype.getTileCredits=function(e,t,i){if(!this._ready)throw new a.Z("getTileCredits must not be called before the imagery provider is ready.");const r=this._metadata,n=r.getTileInformation(e,t,i);if((0,s.Z)(n)){const e=r.providers[n.imageryProvider];if((0,s.Z)(e))return[e]}},b.prototype.requestImage=function(e,t,i,r){if(!this._ready)throw new a.Z("requestImage must not be called before the imagery provider is ready.");const o=this._tileDiscardPolicy._image,c=this._metadata,u=l.Z.tileXYToQuadKey(e,t,i),d=c.getTileInformation(e,t,i);if(!(0,s.Z)(d)){if(c.isValid(u)){const n=new p.Z({throttle:r.throttle,throttleByServer:r.throttleByServer,type:r.type,priorityFunction:r.priorityFunction});return void c.populateSubtree(e,t,i,n)}return Promise.resolve(o)}if(!d.hasImagery())return Promise.resolve(o);const f=function(e,t,i,r,n,o){const a=l.Z.tileXYToQuadKey(i,r,n);let c=t.imageryVersion;return c=(0,s.Z)(c)&&c>0?c:1,e._metadata.resource.getDerivedResource({url:`flatfile?f1-0${a}-i.${c.toString()}`,request:o})}(this,d,e,t,i,r).fetchArrayBuffer();return(0,s.Z)(f)?f.then((function(e){(0,n.Z)(c.key,e);let t,i=new Uint8Array(e);const r=c.protoImagery;if((0,s.Z)(r)&&r||(t=function(e){const t="JFIF";if(e[6]===t.charCodeAt(0)&&e[7]===t.charCodeAt(1)&&e[8]===t.charCodeAt(2)&&e[9]===t.charCodeAt(3))return"image/jpeg";const i="PNG";if(e[1]===i.charCodeAt(0)&&e[2]===i.charCodeAt(1)&&e[3]===i.charCodeAt(2))return"image/png";return}(i)),!(0,s.Z)(t)&&(!(0,s.Z)(r)||r)){const e=function(e){const t=Z.Z.Reader.create(e),i=t.len,r={};for(;t.pos<i;){const e=t.uint32();let i;switch(e>>>3){case 1:r.imageType=t.uint32();break;case 2:r.imageData=t.bytes();break;case 3:r.alphaType=t.uint32();break;case 4:r.imageAlpha=t.bytes();break;case 5:if(i=r.copyrightIds,(0,s.Z)(i)||(i=r.copyrightIds=[]),2==(7&e)){const e=t.uint32()+t.pos;for(;t.pos<e;)i.push(t.uint32())}else i.push(t.uint32());break;default:t.skipType(7&e)}}const n=r.imageType;if((0,s.Z)(n))switch(n){case 0:r.imageType="image/jpeg";break;case 4:r.imageType="image/png";break;default:throw new g.Z("GoogleEarthEnterpriseImageryProvider: Unsupported image type.")}const o=r.alphaType;(0,s.Z)(o)&&0!==o&&(delete r.alphaType,delete r.imageAlpha);return r}(i);t=e.imageType,i=e.imageData}return(0,s.Z)(t)&&(0,s.Z)(i)?(0,h.Z)({uint8Array:i,format:t,flipY:!0}):o})):void 0},b.prototype.pickFeatures=function(e,t,i,r,n){};const v=b},58750:(e,t,i)=>{i.d(t,{Z:()=>y});var r=i(25914),n=i(17497),o=i(78505),s=i(88779),a=i(58587),c=i(54485),u=i(20176),l=i(92893),h=i(96507),d=i(34152),f=i(67197),p=i(21514),m=i(85002),g=i(67561),_=i(20709);function Z(e){if(e=(0,s.Z)(e,{}),!(0,c.Z)(e.url))throw new u.Z("options.url is required.");if(!(0,c.Z)(e.channel))throw new u.Z("options.channel is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=1.9,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const t=e.url,i=(0,s.Z)(e.path,"/default_map"),r=f.Z.createIfNeeded(t).getDerivedResource({url:"/"===i[0]?i.substring(1):i});r.appendForwardSlash(),this._resource=r,this._url=t,this._path=i,this._tileDiscardPolicy=e.tileDiscardPolicy,this._channel=e.channel,this._requestType="ImageryMaps",this._credit=new o.Z(`<a href="http://www.google.com/enterprise/mapsearth/products/earthenterprise.html"><img src="${Z.logoUrl}" title="Google Imagery"/></a>`),this._tilingScheme=void 0,this._version=void 0,this._tileWidth=256,this._tileHeight=256,this._maximumLevel=e.maximumLevel,this._errorEvent=new l.Z,this._ready=!1,this._readyPromise=(0,a.Z)();const n=r.getDerivedResource({url:"query",queryParameters:{request:"Json",vars:"geeServerDefs",is2d:"t"}}),_=this;let y;function b(){n.fetchText().then((function(t){!function(t){let i,r,n;try{i=JSON.parse(t)}catch(e){i=JSON.parse(t.replace(/([\[\{,])[\n\r ]*([A-Za-z0-9]+)[\n\r ]*:/g,'$1"$2":'))}for(let e=0;e<i.layers.length;e++)if(i.layers[e].id===_._channel){r=i.layers[e];break}if(!(0,c.Z)(r))throw n=`Could not find layer with channel (id) of ${_._channel}.`,y=m.Z.handleError(y,_,_._errorEvent,n,void 0,void 0,void 0,b),new p.Z(n);if(!(0,c.Z)(r.version))throw n=`Could not find a version in channel (id) ${_._channel}.`,y=m.Z.handleError(y,_,_._errorEvent,n,void 0,void 0,void 0,b),new p.Z(n);if(_._version=r.version,(0,c.Z)(i.projection)&&"flat"===i.projection)_._tilingScheme=new h.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,rectangle:new d.Z(-Math.PI,-Math.PI,Math.PI,Math.PI),ellipsoid:e.ellipsoid});else{if((0,c.Z)(i.projection)&&"mercator"!==i.projection)throw n=`Unsupported projection ${i.projection}.`,y=m.Z.handleError(y,_,_._errorEvent,n,void 0,void 0,void 0,b),new p.Z(n);_._tilingScheme=new g.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:e.ellipsoid})}_._ready=!0,_._readyPromise.resolve(!0),m.Z.handleSuccess(y)}(t)})).catch((function(e){!function(e){const t=(0,s.Z)(e.message,`An error occurred while accessing ${n.url}.`);y=m.Z.handleError(y,_,_._errorEvent,t,void 0,void 0,void 0,b),_._readyPromise.reject(new p.Z(t))}(e)}))}b()}Object.defineProperties(Z.prototype,{url:{get:function(){return this._url}},path:{get:function(){return this._path}},proxy:{get:function(){return this._resource.proxy}},channel:{get:function(){return this._channel}},tileWidth:{get:function(){if(!this._ready)throw new u.Z("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new u.Z("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new u.Z("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new u.Z("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new u.Z("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},version:{get:function(){if(!this._ready)throw new u.Z("version must not be called before the imagery provider is ready.");return this._version}},requestType:{get:function(){if(!this._ready)throw new u.Z("requestType must not be called before the imagery provider is ready.");return this._requestType}},rectangle:{get:function(){if(!this._ready)throw new u.Z("rectangle must not be called before the imagery provider is ready.");return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new u.Z("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!0}}}),Z.prototype.getTileCredits=function(e,t,i){},Z.prototype.requestImage=function(e,t,i,r){if(!this._ready)throw new u.Z("requestImage must not be called before the imagery provider is ready.");const n=this._resource.getDerivedResource({url:"query",request:r,queryParameters:{request:this._requestType,channel:this._channel,version:this._version,x:e,y:t,z:i+1}});return _.Z.loadImage(this,n)},Z.prototype.pickFeatures=function(e,t,i,r,n){},Z._logoUrl=void 0,Object.defineProperties(Z,{logoUrl:{get:function(){return(0,c.Z)(Z._logoUrl)||(Z._logoUrl=(0,r.Z)("Assets/Images/google_earth_credit.png")),Z._logoUrl},set:function(e){n.Z.defined("value",e),Z._logoUrl=e}}});const y=Z},33412:(e,t,i)=>{i.d(t,{Z:()=>d});var r=i(6785),n=i(88779),o=i(54485),s=i(92893),a=i(96507);const c=new r.Z(1,1,1,.4),u=new r.Z(0,1,0,.05),l=new r.Z(0,.5,0,.2);function h(e){e=(0,n.Z)(e,n.Z.EMPTY_OBJECT),this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._tilingScheme=(0,o.Z)(e.tilingScheme)?e.tilingScheme:new a.Z({ellipsoid:e.ellipsoid}),this._cells=(0,n.Z)(e.cells,8),this._color=(0,n.Z)(e.color,c),this._glowColor=(0,n.Z)(e.glowColor,u),this._glowWidth=(0,n.Z)(e.glowWidth,6),this._backgroundColor=(0,n.Z)(e.backgroundColor,l),this._errorEvent=new s.Z,this._tileWidth=(0,n.Z)(e.tileWidth,256),this._tileHeight=(0,n.Z)(e.tileHeight,256),this._canvasSize=(0,n.Z)(e.canvasSize,256),this._canvas=this._createGridCanvas(),this._readyPromise=Promise.resolve(!0)}Object.defineProperties(h.prototype,{proxy:{get:function(){}},tileWidth:{get:function(){return this._tileWidth}},tileHeight:{get:function(){return this._tileHeight}},maximumLevel:{get:function(){}},minimumLevel:{get:function(){}},tilingScheme:{get:function(){return this._tilingScheme}},rectangle:{get:function(){return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return!0}},readyPromise:{get:function(){return this._readyPromise}},credit:{get:function(){}},hasAlphaChannel:{get:function(){return!0}}}),h.prototype._drawGrid=function(e){const t=this._canvasSize;for(let i=0;i<=this._cells;++i){const r=1+i/this._cells*(t-1);e.moveTo(r,0),e.lineTo(r,t),e.moveTo(0,r),e.lineTo(t,r)}e.stroke()},h.prototype._createGridCanvas=function(){const e=document.createElement("canvas");e.width=this._canvasSize,e.height=this._canvasSize;const t=this._canvasSize,i=e.getContext("2d"),r=this._backgroundColor.toCssColorString();i.fillStyle=r,i.fillRect(0,0,t,t);const n=this._glowColor.toCssColorString();i.strokeStyle=n,i.lineWidth=this._glowWidth,i.strokeRect(0,0,t,t),this._drawGrid(i),i.lineWidth=.5*this._glowWidth,i.strokeRect(0,0,t,t),this._drawGrid(i);const o=this._color.toCssColorString();return i.strokeStyle=o,i.lineWidth=2,i.strokeRect(0,0,t,t),i.lineWidth=1,this._drawGrid(i),e},h.prototype.getTileCredits=function(e,t,i){},h.prototype.requestImage=function(e,t,i,r){return Promise.resolve(this._canvas)},h.prototype.pickFeatures=function(e,t,i,r,n){};const d=h},94193:(e,t,i)=>{i.d(t,{Z:()=>F});var r=i(93237),n=i(44990),o=i(88779),s=i(58587),a=i(54485),c=i(90332),u=i(20176),l=i(78224),h=i(11188),d=i(22823),f=i(71087),p=i(1577),m=i(74064),g=i(17426),_=i(7048),Z=i(28927),y=i(21359),b=i(43271),v=i(29843),T=i(995),x=i(98179),w=i(28075),S=i(69154),A=i(11922),E=i(27401),C=i(18061),I=i(84067),L=i(88307),P=i(59215);function O(e){e=(0,o.Z)(e,o.Z.EMPTY_OBJECT),this.geometryInstances=e.geometryInstances,this._hasPerInstanceColors=!0;let t=e.appearance;(0,a.Z)(t)||(t=new A.Z),this.appearance=t,this.show=(0,o.Z)(e.show,!0),this.classificationType=(0,o.Z)(e.classificationType,x.Z.BOTH),this.debugShowBoundingVolume=(0,o.Z)(e.debugShowBoundingVolume,!1),this._debugShowShadowVolume=(0,o.Z)(e.debugShowShadowVolume,!1),this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:!1,interleave:(0,o.Z)(e.interleave,!1),releaseGeometryInstances:(0,o.Z)(e.releaseGeometryInstances,!0),allowPicking:(0,o.Z)(e.allowPicking,!0),asynchronous:(0,o.Z)(e.asynchronous,!0),compressVertices:!1,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0},this._zIndex=void 0,this._ready=!1,this._readyPromise=(0,s.Z)(),this._primitive=void 0,this._sp=void 0,this._sp2D=void 0,this._spMorph=void 0,this._renderState=R(!1),this._renderState3DTiles=R(!0),this._renderStateMorph=m.Z.fromCache({cull:{enabled:!0,face:w.Z.FRONT},depthTest:{enabled:!0},blending:T.Z.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1})}function R(e){return m.Z.fromCache({cull:{enabled:!0},blending:T.Z.PRE_MULTIPLIED_ALPHA_BLEND,depthMask:!1,stencilTest:{enabled:e,frontFunction:L.Z.EQUAL,frontOperation:{fail:P.Z.KEEP,zFail:P.Z.KEEP,zPass:P.Z.KEEP},backFunction:L.Z.EQUAL,backOperation:{fail:P.Z.KEEP,zFail:P.Z.KEEP,zPass:P.Z.KEEP},reference:I.Z.CESIUM_3D_TILE_MASK,mask:I.Z.CESIUM_3D_TILE_MASK}})}function D(e,t,i,r,n,o,s){i.mode===C.Z.MORPHING?t=t.derivedCommands.colorMorph:i.mode!==C.Z.SCENE3D&&(t=t.derivedCommands.color2D),t.modelMatrix=r,t.boundingVolume=o,t.cull=n,t.debugShowBoundingVolume=s,i.commandList.push(t)}Object.defineProperties(O.prototype,{interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},debugShowShadowVolume:{get:function(){return this._debugShowShadowVolume}}}),O.initializeTerrainHeights=function(){return r.Z.initialize()},O.prototype.update=function(e){if(!(0,a.Z)(this._primitive)&&!(0,a.Z)(this.geometryInstances))return;if(!r.Z.initialized){if(!this.asynchronous)throw new u.Z("For synchronous GroundPolylinePrimitives, you must call GroundPolylinePrimitives.initializeTerrainHeights() and wait for the returned promise to resolve.");return void O.initializeTerrainHeights()}let t;const i=this,o=this._primitiveOptions;if(!(0,a.Z)(this._primitive)){const s=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],c=s.length,u=new Array(c);let m;for(t=0;t<c;++t)if(m=s[t].attributes,!(0,a.Z)(m)||!(0,a.Z)(m.color)){this._hasPerInstanceColors=!1;break}for(t=0;t<c;++t){const r=s[t];m={};const o=r.attributes;for(const e in o)o.hasOwnProperty(e)&&(m[e]=o[e]);(0,a.Z)(m.width)||(m.width=new h.Z({componentDatatype:n.Z.UNSIGNED_BYTE,componentsPerAttribute:1,value:[r.geometry.width]})),r.geometry._scene3DOnly=e.scene3DOnly,d.Z.setProjectionAndEllipsoid(r.geometry,e.mapProjection),u[t]=new l.Z({geometry:r.geometry,attributes:m,id:r.id,pickPrimitive:i})}o.geometryInstances=u,o.appearance=this.appearance,o._createShaderProgramFunction=function(e,t,n){!function(e,t,i){const n=t.context,o=e._primitive,s=o._attributeLocations;let c=o._batchTable.getVertexShaderCallback()(v.Z);c=E.Z._appendShowToShader(o,c),c=E.Z._appendDistanceDisplayConditionToShader(o,c),c=E.Z._modifyShaderPosition(e,c,t.scene3DOnly);let u=o._batchTable.getVertexShaderCallback()(b.Z);u=E.Z._appendShowToShader(o,u),u=E.Z._appendDistanceDisplayConditionToShader(o,u),u=E.Z._modifyShaderPosition(e,u,t.scene3DOnly);let l=o._batchTable.getVertexShaderCallback()(Z.Z);const h=[`GLOBE_MINIMUM_ALTITUDE ${t.mapProjection.ellipsoid.minimumRadius.toFixed(1)}`];let d="",f="";(0,a.Z)(i.material)?(f=(0,a.Z)(i.material)?i.material.shaderSource:"",-1!==f.search(/varying\s+float\s+v_polylineAngle;/g)&&h.push("ANGLE_VARYING"),-1!==f.search(/varying\s+float\s+v_width;/g)&&h.push("WIDTH_VARYING")):d="PER_INSTANCE_COLOR",h.push(d);const p=e.debugShowShadowVolume?["DEBUG_SHOW_VOLUME",d]:[d],m=new _.Z({defines:h,sources:[c]}),T=new _.Z({defines:p,sources:[f,l]});e._sp=g.Z.replaceCache({context:n,shaderProgram:o._sp,vertexShaderSource:m,fragmentShaderSource:T,attributeLocations:s});let x=n.shaderCache.getDerivedShaderProgram(e._sp,"2dColor");if(!(0,a.Z)(x)){const t=new _.Z({defines:h.concat(["COLUMBUS_VIEW_2D"]),sources:[c]});x=n.shaderCache.createDerivedShaderProgram(e._sp,"2dColor",{context:n,shaderProgram:e._sp2D,vertexShaderSource:t,fragmentShaderSource:T,attributeLocations:s})}e._sp2D=x;let w=n.shaderCache.getDerivedShaderProgram(e._sp,"MorphColor");if(!(0,a.Z)(w)){const t=new _.Z({defines:h.concat([`MAX_TERRAIN_HEIGHT ${r.Z._defaultMaxTerrainHeight.toFixed(1)}`]),sources:[u]});l=o._batchTable.getVertexShaderCallback()(y.Z);const i=new _.Z({defines:p,sources:[f,l]});w=n.shaderCache.createDerivedShaderProgram(e._sp,"MorphColor",{context:n,shaderProgram:e._spMorph,vertexShaderSource:t,fragmentShaderSource:i,attributeLocations:s})}e._spMorph=w}(i,t,n)},o._createCommandsFunction=function(e,t,r,n,o,s,c){!function(e,t,i,r,n,o){const s=e._primitive,c=s._va.length;n.length=c,o.length=c;const u=t instanceof S.Z?{}:i._uniforms,l=s._batchTable.getUniformMapCallback()(u);for(let t=0;t<c;t++){const i=s._va[t];let r=n[t];(0,a.Z)(r)||(r=n[t]=new f.Z({owner:e,primitiveType:s._primitiveType})),r.vertexArray=i,r.renderState=e._renderState,r.shaderProgram=e._sp,r.uniformMap=l,r.pass=p.Z.TERRAIN_CLASSIFICATION,r.pickId="czm_batchTable_pickColor(v_endPlaneNormalEcAndBatchId.w)";const o=f.Z.shallowClone(r,r.derivedCommands.tileset);o.renderState=e._renderState3DTiles,o.pass=p.Z.CESIUM_3D_TILE_CLASSIFICATION,r.derivedCommands.tileset=o;const c=f.Z.shallowClone(r,r.derivedCommands.color2D);c.shaderProgram=e._sp2D,r.derivedCommands.color2D=c;const u=f.Z.shallowClone(o,o.derivedCommands.color2D);u.shaderProgram=e._sp2D,o.derivedCommands.color2D=u;const h=f.Z.shallowClone(r,r.derivedCommands.colorMorph);h.renderState=e._renderStateMorph,h.shaderProgram=e._spMorph,h.pickId="czm_batchTable_pickColor(v_batchId)",r.derivedCommands.colorMorph=h}}(i,t,r,0,s,c)},o._updateAndQueueCommandsFunction=function(e,t,r,n,o,s,c,u){!function(e,t,i,r,n,o,s){const c=e._primitive;let u;E.Z._updateBoundingVolumes(c,t,n),t.mode===C.Z.SCENE3D?u=c._boundingSphereWC:t.mode===C.Z.COLUMBUS_VIEW?u=c._boundingSphereCV:t.mode===C.Z.SCENE2D&&(0,a.Z)(c._boundingSphere2D)?u=c._boundingSphere2D:(0,a.Z)(c._boundingSphereMorph)&&(u=c._boundingSphereMorph);const l=t.mode===C.Z.MORPHING,h=e.classificationType,d=h!==x.Z.CESIUM_3D_TILE,f=h!==x.Z.TERRAIN&&!l;let p;const m=t.passes;if(m.render||m.pick&&c.allowPicking){const e=i.length;for(let r=0;r<e;++r){const e=u[r];d&&(p=i[r],D(0,p,t,n,o,e,s)),f&&(p=i[r].derivedCommands.tileset,D(0,p,t,n,o,e,s))}}}(i,t,r,0,o,s,c)},this._primitive=new E.Z(o),this._primitive.readyPromise.then((function(e){i._ready=!0,i.releaseGeometryInstances&&(i.geometryInstances=void 0);const t=e._error;(0,a.Z)(t)?i._readyPromise.reject(t):i._readyPromise.resolve(i)}))}if(this.appearance instanceof S.Z&&!this._hasPerInstanceColors)throw new u.Z("All GeometryInstances must have color attributes to use PolylineColorAppearance with GroundPolylinePrimitive.");this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)},O.prototype.getGeometryInstanceAttributes=function(e){if(!(0,a.Z)(this._primitive))throw new u.Z("must call update before calling getGeometryInstanceAttributes");return this._primitive.getGeometryInstanceAttributes(e)},O.isSupported=function(e){return e.frameState.context.depthTexture},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._sp2D=void 0,this._spMorph=void 0,(0,c.Z)(this)};const F=O},63333:(e,t,i)=>{i.d(t,{Z:()=>F});var r=i(93237),n=i(52351),o=i(93517),s=i(66866),a=i(17497),c=i(88779),u=i(58587),l=i(54485),h=i(90332),d=i(20176),f=i(78224),p=i(42428),m=i(34152),g=i(91571),_=i(28169),Z=i(98179),y=i(73020),b=i(18061),v=i(342);const T={u_globeMinimumAltitude:function(){return 55e3}};function x(e){let t=(e=(0,c.Z)(e,c.Z.EMPTY_OBJECT)).appearance;const i=e.geometryInstances;if(!(0,l.Z)(t)&&(0,l.Z)(i)){const e=Array.isArray(i)?i:[i],r=e.length;for(let i=0;i<r;i++){const r=e[i].attributes;if((0,l.Z)(r)&&(0,l.Z)(r.color)){t=new y.Z({flat:!0});break}}}this.appearance=t,this.geometryInstances=e.geometryInstances,this.show=(0,c.Z)(e.show,!0),this.classificationType=(0,c.Z)(e.classificationType,Z.Z.BOTH),this.debugShowBoundingVolume=(0,c.Z)(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=(0,c.Z)(e.debugShowShadowVolume,!1),this._boundingVolumes=[],this._boundingVolumes2D=[],this._ready=!1,this._readyPromise=(0,u.Z)(),this._primitive=void 0,this._maxHeight=void 0,this._minHeight=void 0,this._maxTerrainHeight=r.Z._defaultMaxTerrainHeight,this._minTerrainHeight=r.Z._defaultMinTerrainHeight,this._boundingSpheresKeys=[],this._boundingSpheres=[],this._useFragmentCulling=!1,this._zIndex=void 0;this._classificationPrimitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:(0,c.Z)(e.vertexCacheOptimize,!1),interleave:(0,c.Z)(e.interleave,!1),releaseGeometryInstances:(0,c.Z)(e.releaseGeometryInstances,!0),allowPicking:(0,c.Z)(e.allowPicking,!0),asynchronous:(0,c.Z)(e.asynchronous,!0),compressVertices:(0,c.Z)(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_updateAndQueueCommandsFunction:void 0,_pickPrimitive:this,_extruded:!0,_uniformMap:T}}function w(e){return function(t,i){const r=i.maximumRadius,n=r/Math.cos(.5*t)-r;return e._maxHeight+n}}function S(e){return function(t,i){return e._minHeight}}Object.defineProperties(x.prototype,{vertexCacheOptimize:{get:function(){return this._classificationPrimitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._classificationPrimitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._classificationPrimitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._classificationPrimitiveOptions.allowPicking}},asynchronous:{get:function(){return this._classificationPrimitiveOptions.asynchronous}},compressVertices:{get:function(){return this._classificationPrimitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}}}),x.isSupported=_.Z.isSupported;const A=new o.Z,E=new o.Z,C=new o.Z,I=new s.Z,L=new m.Z;function P(e,t){const i=e.mapProjection.ellipsoid;if(!(0,l.Z)(t.attributes)||!(0,l.Z)(t.attributes.position3DHigh))return(0,l.Z)(t.rectangle)?t.rectangle:void 0;const r=t.attributes.position3DHigh.values,n=t.attributes.position3DLow.values,s=r.length;let a=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(let e=0;e<s;e+=3){const t=o.Z.unpack(r,e,A),s=o.Z.unpack(n,e,E),l=o.Z.add(t,s,C),d=i.cartesianToCartographic(l,I),f=d.latitude,p=d.longitude;a=Math.min(a,f),c=Math.min(c,p),u=Math.max(u,f),h=Math.max(h,p)}const d=L;return d.north=u,d.south=a,d.east=h,d.west=c,d}function O(e,t){return Math.floor(e%t/2)}function R(e,t,i,r,n,o,s){const a=e._primitive;i.mode!==b.Z.SCENE3D&&t.shaderProgram===a._spColor&&a._needs2DShader&&(t=t.derivedCommands.appearance2D),t.owner=e,t.modelMatrix=r,t.boundingVolume=o,t.cull=n,t.debugShowBoundingVolume=s,i.commandList.push(t)}function D(e,t,i,r,n,o){const s=e._primitive;i.mode!==b.Z.SCENE3D&&t.shaderProgram===s._spPick&&s._needs2DShader&&(t=t.derivedCommands.pick2D),t.owner=e,t.modelMatrix=r,t.boundingVolume=o,t.cull=n,i.commandList.push(t)}x.initializeTerrainHeights=function(){return r.Z.initialize()},x.prototype.update=function(e){if(!(0,l.Z)(this._primitive)&&!(0,l.Z)(this.geometryInstances))return;if(!r.Z.initialized){if(!this.asynchronous)throw new d.Z("For synchronous GroundPrimitives, you must call GroundPrimitive.initializeTerrainHeights() and wait for the returned promise to resolve.");return void x.initializeTerrainHeights()}const t=this,i=this._classificationPrimitiveOptions;if(!(0,l.Z)(this._primitive)){const s=e.mapProjection.ellipsoid;let a,c,u;const h=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],y=h.length,T=new Array(y);let A,E;for(A=0;A<y;++A){a=h[A],c=a.geometry;const t=P(e,c);(0,l.Z)(E)?(0,l.Z)(t)&&m.Z.union(E,t,E):E=m.Z.clone(t);const i=a.id;if((0,l.Z)(i)&&(0,l.Z)(t)){const e=r.Z.getBoundingSphere(t,s);this._boundingSpheresKeys.push(i),this._boundingSpheres.push(e)}if(u=c.constructor,!(0,l.Z)(u)||!(0,l.Z)(u.createShadowVolume))throw new d.Z("Not all of the geometry instances have GroundPrimitive support.")}!function(e,t,i){const n=r.Z.getMinimumMaximumHeights(t,i);e._minTerrainHeight=n.minimumTerrainHeight,e._maxTerrainHeight=n.maximumTerrainHeight}(this,E,s);const C=e.terrainExaggeration,I=e.terrainExaggerationRelativeHeight;this._minHeight=g.Z.getHeight(this._minTerrainHeight,C,I),this._maxHeight=g.Z.getHeight(this._maxTerrainHeight,C,I);const L=x._supportsMaterials(e.context);if(this._useFragmentCulling=L,L){let t,i=!0;for(A=0;A<y;++A)if(a=h[A],c=a.geometry,E=P(e,c),v.Z.shouldUseSphericalCoordinates(E)){i=!1;break}for(A=0;A<y;++A){a=h[A],c=a.geometry,u=c.constructor;const r=P(e,c),n=c.textureCoordinateRotationPoints;t=i?v.Z.getPlanarTextureCoordinateAttributes(r,n,s,e.mapProjection,this._maxHeight):v.Z.getSphericalExtentGeometryInstanceAttributes(r,n,s,e.mapProjection);const o=a.attributes;for(const e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);T[A]=new f.Z({geometry:u.createShadowVolume(c,S(this),w(this)),attributes:t,id:a.id})}}else for(A=0;A<y;++A)a=h[A],c=a.geometry,u=c.constructor,T[A]=new f.Z({geometry:u.createShadowVolume(c,S(this),w(this)),attributes:a.attributes,id:a.id});i.geometryInstances=T,i.appearance=this.appearance,i._createBoundingVolumeFunction=function(e,i){!function(e,t,i){const r=t.mapProjection.ellipsoid,s=P(t,i),a=p.Z.fromRectangle(s,e._minHeight,e._maxHeight,r);if(e._boundingVolumes.push(a),!t.scene3DOnly){const i=t.mapProjection,r=n.Z.fromRectangleWithHeights2D(s,i,e._maxHeight,e._minHeight);o.Z.fromElements(r.center.z,r.center.x,r.center.y,r.center),e._boundingVolumes2D.push(r)}}(t,e,i)},i._updateAndQueueCommandsFunction=function(e,i,r,n,o,s,a,c){!function(e,t,i,r,n,o,s,a){let c;c=t.mode===b.Z.SCENE3D?e._boundingVolumes:e._boundingVolumes2D;const u=e.classificationType,l=u!==Z.Z.CESIUM_3D_TILE,h=u!==Z.Z.TERRAIN,d=t.passes,f=e._primitive;let p,m,g;if(d.render){const r=i.length;for(p=0;p<r;++p)m=c[O(p,r)],l&&(g=i[p],R(e,g,t,n,o,m,s)),h&&(g=i[p].derivedCommands.tileset,R(e,g,t,n,o,m,s));if(t.invertClassification){const i=f._commandsIgnoreShow,r=i.length;for(p=0;p<r;++p)m=c[p],g=i[p],R(e,g,t,n,o,m,s)}}if(d.pick){const i=r.length;let s;for(e._useFragmentCulling||(s=f._primitive._pickOffsets),p=0;p<i;++p)m=c[O(p,i)],e._useFragmentCulling||(m=c[s[O(p,i)].index]),l&&(g=r[p],D(e,g,t,n,o,m)),h&&(g=r[p].derivedCommands.tileset,D(e,g,t,n,o,m))}}(t,i,r,n,o,s,a)},this._primitive=new _.Z(i),this._primitive.readyPromise.then((function(e){t._ready=!0,t.releaseGeometryInstances&&(t.geometryInstances=void 0);const i=e._error;(0,l.Z)(i)?t._readyPromise.reject(i):t._readyPromise.resolve(t)}))}this._primitive.appearance=this.appearance,this._primitive.show=this.show,this._primitive.debugShowShadowVolume=this.debugShowShadowVolume,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)},x.prototype.getBoundingSphere=function(e){const t=this._boundingSpheresKeys.indexOf(e);if(-1!==t)return this._boundingSpheres[t]},x.prototype.getGeometryInstanceAttributes=function(e){if(!(0,l.Z)(this._primitive))throw new d.Z("must call update before calling getGeometryInstanceAttributes");return this._primitive.getGeometryInstanceAttributes(e)},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,h.Z)(this)},x._supportsMaterials=function(e){return e.depthTexture},x.supportsMaterials=function(e){return a.Z.typeOf.object("scene",e),x._supportsMaterials(e.frameState.context)};const F=x},18125:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(17497),n=i(88779),o=i(54485),s=i(8754);function a(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).id,i=e.group,s=e.class;r.Z.typeOf.object("options.group",i),r.Z.typeOf.object("options.class",s);const a=(0,o.Z)(i.properties)?i.properties:{};this._class=s,this._properties=a,this._id=t,this._extras=i.extras,this._extensions=i.extensions}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},id:{get:function(){return this._id}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return s.Z.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return s.Z.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return s.Z.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return s.Z.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return s.Z.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return s.Z.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return s.Z.setPropertyBySemantic(e,t,this._properties,this._class)};const c=a},16272:(e,t,i)=>{i.d(t,{Z:()=>r});const r=Object.freeze({NONE:0,CLAMP_TO_GROUND:1,RELATIVE_TO_GROUND:2})},72293:(e,t,i)=>{i.d(t,{Z:()=>r});const r=Object.freeze({CENTER:0,LEFT:1,RIGHT:-1})},5797:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(17497),n=i(88779),o=i(34971),s=i(7219),a=i(21514);const c={};c._deprecationWarning=o.Z;const u=Uint32Array.BYTES_PER_ELEMENT;c.parse=function(e,t){r.Z.defined("arrayBuffer",e);const i=(0,n.Z)(t,0);t=i;const o=new Uint8Array(e),l=new DataView(e);t+=u;const h=l.getUint32(t,!0);if(1!==h)throw new a.Z(`Only Instanced 3D Model version 1 is supported. Version ${h} is not.`);t+=u;const d=l.getUint32(t,!0);t+=u;const f=l.getUint32(t,!0);if(0===f)throw new a.Z("featureTableJsonByteLength is zero, the feature table must be defined.");t+=u;const p=l.getUint32(t,!0);t+=u;const m=l.getUint32(t,!0);t+=u;const g=l.getUint32(t,!0);t+=u;const _=l.getUint32(t,!0);if(1!==_&&0!==_)throw new a.Z(`Only glTF format 0 (uri) or 1 (embedded) are supported. Format ${_} is not.`);t+=u;const Z=(0,s.Z)(o,t,f);t+=f;const y=new Uint8Array(e,t,p);let b,v;t+=p,m>0&&(b=(0,s.Z)(o,t,m),t+=m,g>0&&(v=new Uint8Array(e,t,g),v=new Uint8Array(v),t+=g));const T=i+d-t;if(0===T)throw new a.Z("glTF byte length must be greater than 0.");let x;return t%4==0?x=new Uint8Array(e,t,T):(c._deprecationWarning("i3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),x=new Uint8Array(o.subarray(t,t+T))),{gltfFormat:_,featureTableJson:Z,featureTableBinary:y,batchTableJson:b,batchTableBinary:v,gltf:x}};const l=c},98140:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(59015),n=i(17497),o=i(54485),s=i(88779),a=i(90332),c=i(20176),u=i(9257);function l(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT);const t=(0,o.Z)(e.imageBasedLightingFactor)?r.Z.clone(e.imageBasedLightingFactor):new r.Z(1,1);n.Z.typeOf.object("options.imageBasedLightingFactor",t),n.Z.typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.x",t.x,0),n.Z.typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.x",t.x,1),n.Z.typeOf.number.greaterThanOrEquals("options.imageBasedLightingFactor.y",t.y,0),n.Z.typeOf.number.lessThanOrEquals("options.imageBasedLightingFactor.y",t.y,1),this._imageBasedLightingFactor=t;const i=(0,s.Z)(e.luminanceAtZenith,.2);n.Z.typeOf.number("options.luminanceAtZenith",i),this._luminanceAtZenith=i;const a=e.sphericalHarmonicCoefficients;if((0,o.Z)(a)&&(!Array.isArray(a)||9!==a.length))throw new c.Z("options.sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._sphericalHarmonicCoefficients=a,this._specularEnvironmentMaps=e.specularEnvironmentMaps,this._specularEnvironmentMapAtlas=void 0,this._specularEnvironmentMapAtlasDirty=!0,this._specularEnvironmentMapLoaded=!1,this._previousSpecularEnvironmentMapLoaded=!1,this._useDefaultSpecularMaps=!1,this._useDefaultSphericalHarmonics=!1,this._shouldRegenerateShaders=!1,this._previousFrameNumber=void 0,this._previousImageBasedLightingFactor=r.Z.clone(t),this._previousLuminanceAtZenith=i,this._previousSphericalHarmonicCoefficients=a}Object.defineProperties(l.prototype,{imageBasedLightingFactor:{get:function(){return this._imageBasedLightingFactor},set:function(e){n.Z.typeOf.object("imageBasedLightingFactor",e),n.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.x",e.x,0),n.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.x",e.x,1),n.Z.typeOf.number.greaterThanOrEquals("imageBasedLightingFactor.y",e.y,0),n.Z.typeOf.number.lessThanOrEquals("imageBasedLightingFactor.y",e.y,1),this._previousImageBasedLightingFactor=r.Z.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor),this._imageBasedLightingFactor=r.Z.clone(e,this._imageBasedLightingFactor)}},luminanceAtZenith:{get:function(){return this._luminanceAtZenith},set:function(e){this._previousLuminanceAtZenith=this._luminanceAtZenith,this._luminanceAtZenith=e}},sphericalHarmonicCoefficients:{get:function(){return this._sphericalHarmonicCoefficients},set:function(e){if((0,o.Z)(e)&&(!Array.isArray(e)||9!==e.length))throw new c.Z("sphericalHarmonicCoefficients must be an array of 9 Cartesian3 values.");this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients,this._sphericalHarmonicCoefficients=e}},specularEnvironmentMaps:{get:function(){return this._specularEnvironmentMaps},set:function(e){e!==this._specularEnvironmentMaps&&(this._specularEnvironmentMapAtlasDirty=this._specularEnvironmentMapAtlasDirty||e!==this._specularEnvironmentMaps,this._specularEnvironmentMapLoaded=!1),this._specularEnvironmentMaps=e}},enabled:{get:function(){return this._imageBasedLightingFactor.x>0||this._imageBasedLightingFactor.y>0}},shouldRegenerateShaders:{get:function(){return this._shouldRegenerateShaders}},useDefaultSphericalHarmonics:{get:function(){return this._useDefaultSphericalHarmonics}},useSphericalHarmonicCoefficients:{get:function(){return(0,o.Z)(this._sphericalHarmonicCoefficients)||this._useDefaultSphericalHarmonics}},specularEnvironmentMapAtlas:{get:function(){return this._specularEnvironmentMapAtlas}},useDefaultSpecularMaps:{get:function(){return this._useDefaultSpecularMaps}},useSpecularEnvironmentMaps:{get:function(){return(0,o.Z)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.ready||this._useDefaultSpecularMaps}}}),l.prototype.update=function(e){if(e.frameNumber===this._previousFrameNumber)return;this._previousFrameNumber=e.frameNumber;const t=e.context;e.brdfLutGenerator.update(e),this._shouldRegenerateShaders=!1;const i=this._imageBasedLightingFactor,n=this._previousImageBasedLightingFactor;r.Z.equals(i,n)||(this._shouldRegenerateShaders=i.x>0&&0===n.x||0===i.x&&n.x>0,this._shouldRegenerateShaders=this._shouldRegenerateShaders||i.y>0&&0===n.y||0===i.y&&n.y>0,this._previousImageBasedLightingFactor=r.Z.clone(this._imageBasedLightingFactor,this._previousImageBasedLightingFactor)),this._luminanceAtZenith!==this._previousLuminanceAtZenith&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,o.Z)(this._luminanceAtZenith)!==(0,o.Z)(this._previousLuminanceAtZenith),this._previousLuminanceAtZenith=this._luminanceAtZenith),this._previousSphericalHarmonicCoefficients!==this._sphericalHarmonicCoefficients&&(this._shouldRegenerateShaders=this._shouldRegenerateShaders||(0,o.Z)(this._previousSphericalHarmonicCoefficients)!==(0,o.Z)(this._sphericalHarmonicCoefficients),this._previousSphericalHarmonicCoefficients=this._sphericalHarmonicCoefficients),this._shouldRegenerateShaders=this._shouldRegenerateShaders||this._previousSpecularEnvironmentMapLoaded!==this._specularEnvironmentMapLoaded,this._previousSpecularEnvironmentMapLoaded=this._specularEnvironmentMapLoaded,this._specularEnvironmentMapAtlasDirty&&(!function(e,t){if(u.Z.isSupported(t)){if(e._specularEnvironmentMapAtlas=e._specularEnvironmentMapAtlas&&e._specularEnvironmentMapAtlas.destroy(),(0,o.Z)(e._specularEnvironmentMaps)){const t=new u.Z(e._specularEnvironmentMaps);e._specularEnvironmentMapAtlas=t,t.readyPromise.then((function(){e._specularEnvironmentMapLoaded=!0})).catch((function(e){}))}e._shouldRegenerateShaders=!0}}(this,t),this._specularEnvironmentMapAtlasDirty=!1),(0,o.Z)(this._specularEnvironmentMapAtlas)&&this._specularEnvironmentMapAtlas.update(e);const s=!(0,o.Z)(this._specularEnvironmentMapAtlas)&&(0,o.Z)(e.specularEnvironmentMaps)&&!this._useDefaultSpecularMaps,a=!(0,o.Z)(e.specularEnvironmentMaps)&&this._useDefaultSpecularMaps,c=!(0,o.Z)(this._sphericalHarmonicCoefficients)&&(0,o.Z)(e.sphericalHarmonicCoefficients)&&!this._useDefaultSphericalHarmonics,l=!(0,o.Z)(e.sphericalHarmonicCoefficients)&&this._useDefaultSphericalHarmonics;this._shouldRegenerateShaders=this._shouldRegenerateShaders||s||a||c||l,this._useDefaultSpecularMaps=!(0,o.Z)(this._specularEnvironmentMapAtlas)&&(0,o.Z)(e.specularEnvironmentMaps),this._useDefaultSphericalHarmonics=!(0,o.Z)(this._sphericalHarmonicCoefficients)&&(0,o.Z)(e.sphericalHarmonicCoefficients)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return this._specularEnvironmentMapAtlas=this._specularEnvironmentMapAtlas&&this._specularEnvironmentMapAtlas.destroy(),(0,a.Z)(this)}},48071:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(54485),n=i(90332),o=i(68502);function s(e,t,i,n,s){if(this.imageryLayer=e,this.x=t,this.y=i,this.level=n,this.request=void 0,0!==n){const r=t/2|0,o=i/2|0,s=n-1;this.parent=e.getImageryFromCache(r,o,s)}if(this.state=o.Z.UNLOADED,this.imageUrl=void 0,this.image=void 0,this.texture=void 0,this.textureWebMercator=void 0,this.credits=void 0,this.referenceCount=0,!(0,r.Z)(s)&&e.imageryProvider.ready){s=e.imageryProvider.tilingScheme.tileXYToRectangle(t,i,n)}this.rectangle=s}s.createPlaceholder=function(e){const t=new s(e,0,0,0);return t.addReference(),t.state=o.Z.PLACEHOLDER,t},s.prototype.addReference=function(){++this.referenceCount},s.prototype.releaseReference=function(){return--this.referenceCount,0===this.referenceCount?(this.imageryLayer.removeImageryFromCache(this),(0,r.Z)(this.parent)&&this.parent.releaseReference(),(0,r.Z)(this.image)&&(0,r.Z)(this.image.destroy)&&this.image.destroy(),(0,r.Z)(this.texture)&&this.texture.destroy(),(0,r.Z)(this.textureWebMercator)&&this.texture!==this.textureWebMercator&&this.textureWebMercator.destroy(),(0,n.Z)(this),0):this.referenceCount},s.prototype.processStateMachine=function(e,t,i){this.state!==o.Z.UNLOADED||i||(this.state=o.Z.TRANSITIONING,this.imageryLayer._requestImagery(this)),this.state===o.Z.RECEIVED&&(this.state=o.Z.TRANSITIONING,this.imageryLayer._createTexture(e.context,this));const r=this.state===o.Z.READY&&t&&!this.texture;(this.state===o.Z.TEXTURE_LOADED||r)&&(this.state=o.Z.TRANSITIONING,this.imageryLayer._reprojectTexture(e,this,t))};const a=s},55706:(e,t,i)=>{i.d(t,{Z:()=>K});var r=i(59015),n=i(90868),o=i(88779),s=i(54485),a=i(90332),c=i(20176),u=i(74834),l=i(64729),h=i(39172),d=i(22874),f=i(91166),p=i(34152),m=i(51625),g=i(62969),_=i(22041),Z=i(87264),y=i(85002),b=i(65412),v=i(31328),T=i(36627),x=i(2099),w=i(85834),S=i(22641),A=i(28696),E=i(17426),C=i(7048),I=i(47334),L=i(92106),P=i(48867),O=i(91373),R=i(46801),D=i(42781),F=i(16380),M=i(48071),N=i(68502),B=i(77493),H=i(41737);function V(e,t){this._imageryProvider=e,t=(0,o.Z)(t,o.Z.EMPTY_OBJECT),this.alpha=(0,o.Z)(t.alpha,(0,o.Z)(e.defaultAlpha,1)),this.nightAlpha=(0,o.Z)(t.nightAlpha,(0,o.Z)(e.defaultNightAlpha,1)),this.dayAlpha=(0,o.Z)(t.dayAlpha,(0,o.Z)(e.defaultDayAlpha,1)),this.brightness=(0,o.Z)(t.brightness,(0,o.Z)(e.defaultBrightness,V.DEFAULT_BRIGHTNESS)),this.contrast=(0,o.Z)(t.contrast,(0,o.Z)(e.defaultContrast,V.DEFAULT_CONTRAST)),this.hue=(0,o.Z)(t.hue,(0,o.Z)(e.defaultHue,V.DEFAULT_HUE)),this.saturation=(0,o.Z)(t.saturation,(0,o.Z)(e.defaultSaturation,V.DEFAULT_SATURATION)),this.gamma=(0,o.Z)(t.gamma,(0,o.Z)(e.defaultGamma,V.DEFAULT_GAMMA)),this.splitDirection=(0,o.Z)(t.splitDirection,(0,o.Z)(e.defaultSplit,V.DEFAULT_SPLIT)),this.minificationFilter=(0,o.Z)(t.minificationFilter,(0,o.Z)(e.defaultMinificationFilter,V.DEFAULT_MINIFICATION_FILTER)),this.magnificationFilter=(0,o.Z)(t.magnificationFilter,(0,o.Z)(e.defaultMagnificationFilter,V.DEFAULT_MAGNIFICATION_FILTER)),this.show=(0,o.Z)(t.show,!0),this._minimumTerrainLevel=t.minimumTerrainLevel,this._maximumTerrainLevel=t.maximumTerrainLevel,this._rectangle=(0,o.Z)(t.rectangle,p.Z.MAX_VALUE),this._maximumAnisotropy=t.maximumAnisotropy,this._imageryCache={},this._skeletonPlaceholder=new H.Z(M.Z.createPlaceholder(this)),this._show=!0,this._layerIndex=-1,this._isBaseLayer=!1,this._requestImageError=void 0,this._reprojectComputeCommands=[],this.cutoutRectangle=t.cutoutRectangle,this.colorToAlpha=t.colorToAlpha,this.colorToAlphaThreshold=(0,o.Z)(t.colorToAlphaThreshold,V.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD)}Object.defineProperties(V.prototype,{imageryProvider:{get:function(){return this._imageryProvider}},rectangle:{get:function(){return this._rectangle}}}),V.DEFAULT_BRIGHTNESS=1,V.DEFAULT_CONTRAST=1,V.DEFAULT_HUE=0,V.DEFAULT_SATURATION=1,V.DEFAULT_GAMMA=1,V.DEFAULT_SPLIT=B.Z.NONE,V.DEFAULT_MINIFICATION_FILTER=P.Z.LINEAR,V.DEFAULT_MAGNIFICATION_FILTER=L.Z.LINEAR,V.DEFAULT_APPLY_COLOR_TO_ALPHA_THRESHOLD=.004,V.prototype.isBaseLayer=function(){return this._isBaseLayer},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){return(0,a.Z)(this)};const U=new p.Z,k=new p.Z,G=new p.Z,j=new p.Z;function q(e,t,i){return`${e}:${t}:${i}`}function z(e,t,i){return JSON.stringify([e,t,i])}V.prototype.getViewableRectangle=function(){const e=this._imageryProvider,t=this._rectangle;return e.readyPromise.then((function(){return p.Z.intersection(e.rectangle,t)}))},V.prototype._createTileImagerySkeletons=function(e,t,i){const r=e.data;if((0,s.Z)(this._minimumTerrainLevel)&&e.level<this._minimumTerrainLevel)return!1;if((0,s.Z)(this._maximumTerrainLevel)&&e.level>this._maximumTerrainLevel)return!1;const o=this._imageryProvider;if((0,s.Z)(i)||(i=r.imagery.length),!o.ready)return this._skeletonPlaceholder.loadingImagery.addReference(),r.imagery.splice(i,0,this._skeletonPlaceholder),!0;const a=o.tilingScheme.projection instanceof b.Z&&e.rectangle.north<b.Z.MaximumLatitude&&e.rectangle.south>-b.Z.MaximumLatitude,c=p.Z.intersection(o.rectangle,this._rectangle,U);let u=p.Z.intersection(e.rectangle,c,k);if(!(0,s.Z)(u)){if(!this.isBaseLayer())return!1;const t=c,i=e.rectangle;u=k,i.south>=t.north?u.north=u.south=t.north:i.north<=t.south?u.north=u.south=t.south:(u.south=Math.max(i.south,t.south),u.north=Math.min(i.north,t.north)),i.west>=t.east?u.west=u.east=t.east:i.east<=t.west?u.west=u.east=t.west:(u.west=Math.max(i.west,t.west),u.east=Math.min(i.east,t.east))}let h=0;u.south>0?h=u.south:u.north<0&&(h=u.north);let d=function(e,t,i){const r=e._imageryProvider,n=r.tilingScheme,o=n.ellipsoid,s=e._imageryProvider.tilingScheme.projection instanceof l.Z?1:Math.cos(i),a=n.rectangle,c=o.maximumRadius*a.width*s/(r.tileWidth*n.getNumberOfXTilesAtLevel(0))/t,u=Math.log(c)/Math.log(2);return 0|Math.round(u)}(this,1*t.getLevelMaximumGeometricError(e.level),h);d=Math.max(0,d);const f=o.maximumLevel;if(d>f&&(d=f),(0,s.Z)(o.minimumLevel)){const e=o.minimumLevel;d<e&&(d=e)}const m=o.tilingScheme,g=m.positionToTileXY(p.Z.northwest(u),d),_=m.positionToTileXY(p.Z.southeast(u),d);let Z=e.rectangle.width/512,y=e.rectangle.height/512;const v=m.tileXYToRectangle(g.x,g.y,d);Math.abs(v.south-e.rectangle.north)<y&&g.y<_.y&&++g.y,Math.abs(v.east-e.rectangle.west)<Z&&g.x<_.x&&++g.x;const T=m.tileXYToRectangle(_.x,_.y,d);Math.abs(T.north-e.rectangle.south)<y&&_.y>g.y&&--_.y,Math.abs(T.west-e.rectangle.east)<Z&&_.x>g.x&&--_.x;const x=p.Z.clone(e.rectangle,j);let w,S,A=m.tileXYToRectangle(g.x,g.y,d),E=p.Z.intersection(A,c,G);a?(m.rectangleToNativeRectangle(x,x),m.rectangleToNativeRectangle(A,A),m.rectangleToNativeRectangle(E,E),m.rectangleToNativeRectangle(c,c),w=m.tileXYToNativeRectangle.bind(m),Z=x.width/512,y=x.height/512):w=m.tileXYToRectangle.bind(m);let C,I=0,L=1;!this.isBaseLayer()&&Math.abs(E.west-x.west)>=Z&&(I=Math.min(1,(E.west-x.west)/x.width)),!this.isBaseLayer()&&Math.abs(E.north-x.north)>=y&&(L=Math.max(0,(E.north-x.south)/x.height));const P=L;for(let e=g.x;e<=_.x;e++)if(S=I,A=w(e,g.y,d),E=p.Z.simpleIntersection(A,c,G),(0,s.Z)(E)){I=Math.min(1,(E.east-x.west)/x.width),e===_.x&&(this.isBaseLayer()||Math.abs(E.east-x.east)<Z)&&(I=1),L=P;for(let t=g.y;t<=_.y;t++){if(C=L,A=w(e,t,d),E=p.Z.simpleIntersection(A,c,G),!(0,s.Z)(E))continue;L=Math.max(0,(E.south-x.south)/x.height),t===_.y&&(this.isBaseLayer()||Math.abs(E.south-x.south)<y)&&(L=0);const o=new n.Z(S,L,I,C),u=this.getImageryFromCache(e,t,d);r.imagery.splice(i,0,new H.Z(u,o,a)),++i}}return!0},V.prototype._calculateTextureTranslationAndScale=function(e,t){let i=t.readyImagery.rectangle,r=e.rectangle;if(t.useWebMercatorT){const e=t.readyImagery.imageryLayer.imageryProvider.tilingScheme;i=e.rectangleToNativeRectangle(i,U),r=e.rectangleToNativeRectangle(r,j)}const o=r.width,s=r.height,a=o/i.width,c=s/i.height;return new n.Z(a*(r.west-i.west)/o,c*(r.south-i.south)/s,a,c)},V.prototype._requestImagery=function(e){const t=this._imageryProvider,i=this;function r(r){if(e.request.state===g.Z.CANCELLED)return e.state=N.Z.UNLOADED,void(e.request=void 0);e.state=N.Z.FAILED,e.request=void 0;const o=`Failed to obtain image tile X: ${e.x} Y: ${e.y} Level: ${e.level}.`;i._requestImageError=y.Z.handleError(i._requestImageError,t,t.errorEvent,o,e.x,e.y,e.level,n,r)}function n(){const n=new m.Z({throttle:!1,throttleByServer:!0,type:_.Z.IMAGERY});e.request=n,e.state=N.Z.TRANSITIONING;const o=t.requestImage(e.x,e.y,e.level,n);if(!(0,s.Z)(o))return e.state=N.Z.UNLOADED,void(e.request=void 0);(0,s.Z)(t.getTileCredits)&&(e.credits=t.getTileCredits(e.x,e.y,e.level)),o.then((function(t){!function(t){if(!(0,s.Z)(t))return r();e.image=t,e.state=N.Z.RECEIVED,e.request=void 0,y.Z.handleSuccess(i._requestImageError)}(t)})).catch((function(e){r(e)}))}n()},V.prototype._createTextureWebGL=function(e,t){const i=new A.Z({minificationFilter:this.minificationFilter,magnificationFilter:this.magnificationFilter}),r=t.image;return(0,s.Z)(r.internalFormat)?new I.Z({context:e,pixelFormat:r.internalFormat,width:r.width,height:r.height,source:{arrayBufferView:r.bufferView},sampler:i}):new I.Z({context:e,source:r,pixelFormat:this._imageryProvider.hasAlphaChannel?f.Z.RGBA:f.Z.RGB,sampler:i})},V.prototype._createTexture=function(e,t){const i=this._imageryProvider,r=t.image;if((0,s.Z)(i.tileDiscardPolicy)){const e=i.tileDiscardPolicy;if((0,s.Z)(e)){if(!e.isReady())return void(t.state=N.Z.RECEIVED);if(e.shouldDiscardImage(r))return void(t.state=N.Z.INVALID)}}if(this.minificationFilter!==P.Z.NEAREST&&this.minificationFilter!==P.Z.LINEAR)throw new c.Z("ImageryLayer minification filter must be NEAREST or LINEAR");const n=this._createTextureWebGL(e,t);i.tilingScheme.projection instanceof b.Z?t.textureWebMercator=n:t.texture=n,t.image=void 0,t.state=N.Z.TEXTURE_LOADED},V.prototype._finalizeReprojectTexture=function(e,t){let i=this.minificationFilter;const r=this.magnificationFilter;if(i===P.Z.LINEAR&&r===L.Z.LINEAR&&!f.Z.isCompressedFormat(t.pixelFormat)&&d.Z.isPowerOfTwo(t.width)&&d.Z.isPowerOfTwo(t.height)){i=P.Z.LINEAR_MIPMAP_LINEAR;const n=w.Z.maximumTextureFilterAnisotropy,a=Math.min(n,(0,o.Z)(this._maximumAnisotropy,n)),c=q(i,r,a);let u=e.cache.imageryLayerMipmapSamplers;(0,s.Z)(u)||(u={},e.cache.imageryLayerMipmapSamplers=u);let l=u[c];(0,s.Z)(l)||(l=u[c]=new A.Z({wrapS:O.Z.CLAMP_TO_EDGE,wrapT:O.Z.CLAMP_TO_EDGE,minificationFilter:i,magnificationFilter:r,maximumAnisotropy:a})),t.generateMipmap(S.Z.NICEST),t.sampler=l}else{const n=q(i,r,0);let o=e.cache.imageryLayerNonMipmapSamplers;(0,s.Z)(o)||(o={},e.cache.imageryLayerNonMipmapSamplers=o);let a=o[n];(0,s.Z)(a)||(a=o[n]=new A.Z({wrapS:O.Z.CLAMP_TO_EDGE,wrapT:O.Z.CLAMP_TO_EDGE,minificationFilter:i,magnificationFilter:r})),t.sampler=a}},V.prototype._reprojectTexture=function(e,t,i){const r=t.textureWebMercator||t.texture,n=t.rectangle,a=e.context;if((i=(0,o.Z)(i,!0))&&!(this._imageryProvider.tilingScheme.projection instanceof l.Z)&&n.width/r.width>1e-5){const e=this;t.addReference();const i=new x.Z({persists:!0,owner:this,preExecute:function(e){!function(e,t,i,r){let n=t.cache.imageryLayer_reproject;if(!(0,s.Z)(n)){n=t.cache.imageryLayer_reproject={vertexArray:void 0,shaderProgram:void 0,sampler:void 0,destroy:function(){(0,s.Z)(this.framebuffer)&&this.framebuffer.destroy(),(0,s.Z)(this.vertexArray)&&this.vertexArray.destroy(),(0,s.Z)(this.shaderProgram)&&this.shaderProgram.destroy()}};const e=new Float32Array(256);let i=0;for(let t=0;t<64;++t){const r=t/63;e[i++]=0,e[i++]=r,e[i++]=1,e[i++]=r}const r={position:0,webMercatorT:1},o=Z.Z.getRegularGridIndices(2,64),a=v.Z.createIndexBuffer({context:t,typedArray:o,usage:T.Z.STATIC_DRAW,indexDatatype:h.Z.UNSIGNED_SHORT});n.vertexArray=new R.Z({context:t,attributes:[{index:r.position,vertexBuffer:v.Z.createVertexBuffer({context:t,typedArray:e,usage:T.Z.STATIC_DRAW}),componentsPerAttribute:2},{index:r.webMercatorT,vertexBuffer:v.Z.createVertexBuffer({context:t,sizeInBytes:512,usage:T.Z.STREAM_DRAW}),componentsPerAttribute:1}],indexBuffer:a});const c=new C.Z({sources:[F.Z]});n.shaderProgram=E.Z.fromCache({context:t,vertexShaderSource:c,fragmentShaderSource:D.Z,attributeLocations:r}),n.sampler=new A.Z({wrapS:O.Z.CLAMP_TO_EDGE,wrapT:O.Z.CLAMP_TO_EDGE,minificationFilter:P.Z.LINEAR,magnificationFilter:L.Z.LINEAR})}i.sampler=n.sampler;const o=i.width,a=i.height;W.textureDimensions.x=o,W.textureDimensions.y=a,W.texture=i;let c=Math.sin(r.south);const u=.5*Math.log((1+c)/(1-c));c=Math.sin(r.north);const l=1/(.5*Math.log((1+c)/(1-c))-u),f=new I.Z({context:t,width:o,height:a,pixelFormat:i.pixelFormat,pixelDatatype:i.pixelDatatype,preMultiplyAlpha:i.preMultiplyAlpha});d.Z.isPowerOfTwo(o)&&d.Z.isPowerOfTwo(a)&&f.generateMipmap(S.Z.NICEST);const p=r.south,m=r.north,g=Y;let _=0;for(let e=0;e<64;++e){const t=e/63,i=d.Z.lerp(p,m,t);c=Math.sin(i);const r=(.5*Math.log((1+c)/(1-c))-u)*l;g[_++]=r,g[_++]=r}n.vertexArray.getAttribute(1).vertexBuffer.copyFromArrayView(g),e.shaderProgram=n.shaderProgram,e.outputTexture=f,e.uniformMap=W,e.vertexArray=n.vertexArray}(e,a,r,t.rectangle)},postExecute:function(i){t.texture=i,e._finalizeReprojectTexture(a,i),t.state=N.Z.READY,t.releaseReference()},canceled:function(){t.state=N.Z.TEXTURE_LOADED,t.releaseReference()}});this._reprojectComputeCommands.push(i)}else i&&(t.texture=r),this._finalizeReprojectTexture(a,r),t.state=N.Z.READY},V.prototype.queueReprojectionCommands=function(e){const t=this._reprojectComputeCommands,i=t.length;for(let r=0;r<i;++r)e.commandList.push(t[r]);t.length=0},V.prototype.cancelReprojections=function(){this._reprojectComputeCommands.forEach((function(e){(0,s.Z)(e.canceled)&&e.canceled()})),this._reprojectComputeCommands.length=0},V.prototype.getImageryFromCache=function(e,t,i,r){const n=z(e,t,i);let o=this._imageryCache[n];return(0,s.Z)(o)||(o=new M.Z(this,e,t,i,r),this._imageryCache[n]=o),o.addReference(),o},V.prototype.removeImageryFromCache=function(e){const t=z(e.x,e.y,e.level);delete this._imageryCache[t]};const W={u_textureDimensions:function(){return this.textureDimensions},u_texture:function(){return this.texture},textureDimensions:new r.Z,texture:void 0},Y=u.Z.supportsTypedArrays()?new Float32Array(128):void 0;const K=V},15836:(e,t,i)=>{i.d(t,{Z:()=>g});var r=i(88779),n=i(54485),o=i(90332),s=i(20176),a=i(92893),c=i(22874),u=i(34152),l=i(55706);function h(){this._layers=[],this.layerAdded=new a.Z,this.layerRemoved=new a.Z,this.layerMoved=new a.Z,this.layerShownOrHidden=new a.Z}function d(e,t){if(!(0,n.Z)(t))throw new s.Z("layer is required.");const i=e.indexOf(t);if(-1===i)throw new s.Z("layer is not in this collection.");return i}function f(e,t,i){const r=e._layers;if((t=c.Z.clamp(t,0,r.length-1))===(i=c.Z.clamp(i,0,r.length-1)))return;const n=r[t];r[t]=r[i],r[i]=n,e._update(),e.layerMoved.raiseEvent(n,i,t)}Object.defineProperties(h.prototype,{length:{get:function(){return this._layers.length}}}),h.prototype.add=function(e,t){const i=(0,n.Z)(t);if(!(0,n.Z)(e))throw new s.Z("layer is required.");if(i){if(t<0)throw new s.Z("index must be greater than or equal to zero.");if(t>this._layers.length)throw new s.Z("index must be less than or equal to the number of layers.")}i?this._layers.splice(t,0,e):(t=this._layers.length,this._layers.push(e)),this._update(),this.layerAdded.raiseEvent(e,t)},h.prototype.addImageryProvider=function(e,t){if(!(0,n.Z)(e))throw new s.Z("imageryProvider is required.");const i=new l.Z(e);return this.add(i,t),i},h.prototype.remove=function(e,t){t=(0,r.Z)(t,!0);const i=this._layers.indexOf(e);return-1!==i&&(this._layers.splice(i,1),this._update(),this.layerRemoved.raiseEvent(e,i),t&&e.destroy(),!0)},h.prototype.removeAll=function(e){e=(0,r.Z)(e,!0);const t=this._layers;for(let i=0,r=t.length;i<r;i++){const r=t[i];this.layerRemoved.raiseEvent(r,i),e&&r.destroy()}this._layers=[]},h.prototype.contains=function(e){return-1!==this.indexOf(e)},h.prototype.indexOf=function(e){return this._layers.indexOf(e)},h.prototype.get=function(e){if(!(0,n.Z)(e))throw new s.Z("index is required.","index");return this._layers[e]},h.prototype.raise=function(e){const t=d(this._layers,e);f(this,t,t+1)},h.prototype.lower=function(e){const t=d(this._layers,e);f(this,t,t-1)},h.prototype.raiseToTop=function(e){const t=d(this._layers,e);t!==this._layers.length-1&&(this._layers.splice(t,1),this._layers.push(e),this._update(),this.layerMoved.raiseEvent(e,this._layers.length-1,t))},h.prototype.lowerToBottom=function(e){const t=d(this._layers,e);0!==t&&(this._layers.splice(t,1),this._layers.splice(0,0,e),this._update(),this.layerMoved.raiseEvent(e,0,t))};const p=new u.Z;function m(e,t,i,r){const o=e.globe._surface._tilesToRender;let s;for(let e=0;!(0,n.Z)(s)&&e<o.length;++e){const i=o[e];u.Z.contains(i.rectangle,t)&&(s=i)}if(!(0,n.Z)(s))return;const a=s.data.imagery;for(let e=a.length-1;e>=0;--e){const o=a[e],l=o.readyImagery;if(!(0,n.Z)(l))continue;const h=l.imageryLayer.imageryProvider;if(i&&!(0,n.Z)(h.pickFeatures))continue;if(!u.Z.contains(l.rectangle,t))continue;const d=p,f=1/1024;d.west=c.Z.lerp(s.rectangle.west,s.rectangle.east,o.textureCoordinateRectangle.x-f),d.east=c.Z.lerp(s.rectangle.west,s.rectangle.east,o.textureCoordinateRectangle.z+f),d.south=c.Z.lerp(s.rectangle.south,s.rectangle.north,o.textureCoordinateRectangle.y-f),d.north=c.Z.lerp(s.rectangle.south,s.rectangle.north,o.textureCoordinateRectangle.w+f),u.Z.contains(d,t)&&r(l)}}h.prototype.pickImageryLayers=function(e,t){const i=t.globe.pick(e,t);if(!(0,n.Z)(i))return;const r=t.globe.ellipsoid.cartesianToCartographic(i),o=[];return m(t,r,!1,(function(e){o.push(e.imageryLayer)})),0!==o.length?o:void 0},h.prototype.pickImageryLayerFeatures=function(e,t){const i=t.globe.pick(e,t);if(!(0,n.Z)(i))return;const r=t.globe.ellipsoid.cartesianToCartographic(i),o=[],s=[];return m(t,r,!0,(function(e){const t=e.imageryLayer.imageryProvider.pickFeatures(e.x,e.y,e.level,r.longitude,r.latitude);(0,n.Z)(t)&&(o.push(t),s.push(e.imageryLayer))})),0!==o.length?Promise.all(o).then((function(e){const t=[];for(let i=0;i<e.length;++i){const o=e[i],a=s[i];if((0,n.Z)(o)&&o.length>0)for(let e=0;e<o.length;++e){const i=o[e];i.imageryLayer=a,(0,n.Z)(i.position)||(i.position=r),t.push(i)}}return t})):void 0},h.prototype.queueReprojectionCommands=function(e){const t=this._layers;for(let i=0,r=t.length;i<r;++i)t[i].queueReprojectionCommands(e)},h.prototype.cancelReprojections=function(){const e=this._layers;for(let t=0,i=e.length;t<i;++t)e[t].cancelReprojections()},h.prototype.isDestroyed=function(){return!1},h.prototype.destroy=function(){return this.removeAll(!0),(0,o.Z)(this)},h.prototype._update=function(){let e=!0;const t=this._layers;let i,r,o,s;for(o=0,s=t.length;o<s;++o)r=t[o],r._layerIndex=o,r.show?(r._isBaseLayer=e,e=!1):r._isBaseLayer=!1,r.show!==r._show&&((0,n.Z)(r._show)&&((0,n.Z)(i)||(i=[]),i.push(r)),r._show=r.show);if((0,n.Z)(i))for(o=0,s=i.length;o<s;++o)r=i[o],this.layerShownOrHidden.raiseEvent(r,r._layerIndex,r.show)};const g=h},15411:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(54485);function n(){this.name=void 0,this.description=void 0,this.position=void 0,this.data=void 0,this.imageryLayer=void 0}n.prototype.configureNameFromProperties=function(e){let t,i=10;for(const r in e)if(e.hasOwnProperty(r)&&e[r]){const e=r.toLowerCase();i>1&&"name"===e?(i=1,t=r):i>2&&"title"===e?(i=2,t=r):i>3&&/name/i.test(r)?(i=3,t=r):i>4&&/title/i.test(r)&&(i=4,t=r)}(0,r.Z)(t)&&(this.name=e[t])},n.prototype.configureDescriptionFromProperties=function(e){this.description=function e(t){let i='<table class="cesium-infoBox-defaultTable">';for(const n in t)if(t.hasOwnProperty(n)){const o=t[n];(0,r.Z)(o)&&(i+="object"==typeof o?`<tr><td>${n}</td><td>${e(o)}</td></tr>`:`<tr><td>${n}</td><td>${o}</td></tr>`)}return i+="</table>",i}(e)};const o=n},20709:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(17497),n=i(54485),o=i(20176),s=i(22260),a=i(67197);function c(){this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,o.Z.throwInstantiationError()}Object.defineProperties(c.prototype,{ready:{get:o.Z.throwInstantiationError},readyPromise:{get:o.Z.throwInstantiationError},rectangle:{get:o.Z.throwInstantiationError},tileWidth:{get:o.Z.throwInstantiationError},tileHeight:{get:o.Z.throwInstantiationError},maximumLevel:{get:o.Z.throwInstantiationError},minimumLevel:{get:o.Z.throwInstantiationError},tilingScheme:{get:o.Z.throwInstantiationError},tileDiscardPolicy:{get:o.Z.throwInstantiationError},errorEvent:{get:o.Z.throwInstantiationError},credit:{get:o.Z.throwInstantiationError},proxy:{get:o.Z.throwInstantiationError},hasAlphaChannel:{get:o.Z.throwInstantiationError}}),c.prototype.getTileCredits=function(e,t,i){o.Z.throwInstantiationError()},c.prototype.requestImage=function(e,t,i,r){o.Z.throwInstantiationError()},c.prototype.pickFeatures=function(e,t,i,r,n){o.Z.throwInstantiationError()};const u=/\.ktx2$/i;c.loadImage=function(e,t){r.Z.defined("url",t);const i=a.Z.createIfNeeded(t);return u.test(i.url)?(0,s.Z)(i):(0,n.Z)(e)&&(0,n.Z)(e.tileDiscardPolicy)?i.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}):i.fetchImage({preferImageBitmap:!0,flipY:!0})};const l=c},68502:(e,t,i)=>{i.d(t,{Z:()=>r});const r=Object.freeze({UNLOADED:0,TRANSITIONING:1,RECEIVED:2,TEXTURE_LOADED:3,READY:4,FAILED:5,INVALID:6,PLACEHOLDER:7})},64142:(e,t,i)=>{i.d(t,{Z:()=>b});var r=i(93517),n=i(17497),o=i(55077),s=i(51138),a=i(88779),c=i(54485),u=i(90332),l=i(20176),h=i(22874),d=i(66590),f=i(39109),p=i(34152),m=i(24845),g=i(27849),_=i(30271),Z=i(98686),y=i(6717);function b(e,t,i,r,o,s){if(n.Z.defined("tile.implicitTileset",t.implicitTileset),n.Z.defined("tile.implicitCoordinates",t.implicitCoordinates),(0,c.Z)(r)===(0,c.Z)(o))throw new l.Z("One of json and arrayBuffer must be defined.");const u=t.implicitTileset,h=t.implicitCoordinates;this._implicitTileset=u,this._implicitCoordinates=h,this._implicitSubtree=void 0,this._tileset=e,this._tile=t,this._resource=i,this._metadata=void 0,this.featurePropertiesDirty=!1,this._group=void 0;const d=h.getTemplateValues(),f=u.subtreeUriTemplate.getDerivedResource({templateValues:d});this._url=f.getUrlComponent(!0),this._readyPromise=function(e,t,i,r){let n;r=(0,a.Z)(r,0),(0,c.Z)(i)&&(n=new Uint8Array(i,r));const o=new g.Z(e._resource,t,n,e._implicitTileset,e._implicitCoordinates);return e._implicitSubtree=o,o.readyPromise.then((function(){return function(e,t){const i=e._tile,r=e._implicitCoordinates.childIndex,n=function(e,t,i,r){const n=T(e,t,i,r,0,!0);let o=[n],s=[];const a=e._implicitTileset;for(let i=1;i<a.subtreeLevels;i++){const r=t.getLevelOffset(i),n=a.branchingFactor*o.length;for(let i=0;i<n;i++){const n=r+i;if(!t.tileIsAvailableAtIndex(n)){s.push(void 0);continue}const c=o[t.getParentMortonIndex(i)],u=T(e,t,c,i%a.branchingFactor,n);c.children.push(u),s.push(u)}o=s,s=[]}return{rootTile:n,bottomRow:o}}(e,t,i,r);i.children.push(n.rootTile);const o=function(e,t,i){const r=[],n=e._implicitTileset.branchingFactor;for(let e=0;e<i.length;e++){const o=i[e];if((0,c.Z)(o))for(let i=0;i<n;i++){const s=e*n+i;t.childSubtreeIsAvailableAtIndex(s)&&r.push({tile:o,childIndex:i})}}return r}(e,t,n.bottomRow);for(let t=0;t<o.length;t++){const i=o[t],r=i.tile,n=F(e,r,i.childIndex);r.children.push(n)}}(e,o),e}))}(this,r,o,s)}function v(e,t,i){const r=Z.Z.TILE_GEOMETRIC_ERROR;return(0,c.Z)(e)&&e.hasPropertyBySemantic(r)?e.getPropertyBySemantic(r):t.geometricError/Math.pow(2,i.level)}function T(e,t,i,r,n,u){const l=e._implicitTileset;let h,d,f,p;if(h=(0,a.Z)(u,!1)?i.implicitCoordinates:i.implicitCoordinates.getChildCoordinates(r),(0,c.Z)(t.tilePropertyTableJson)){d=t.getTileMetadataView(h);const e=(0,y.Z)(d);f=e.tile,p=e.content}const m=t.contentPropertyTableJsons.length;let g=!1;for(let e=0;e<m;e++)if(t.contentIsAvailableAtCoordinates(h,e)){g=!0;break}const _=function(e,t,i,r,n,o){let s;s=!(0,c.Z)(o)||!(0,c.Z)(o.boundingVolume)||!x(o.boundingVolume,o)&&x(e.boundingVolume,o)?A(e,t,i,(0,a.Z)(r,!1),n):o.boundingVolume;return w(s,o),s}(l,h,r,u,i,f),Z=[];for(let e=0;e<l.contentCount;e++){if(!t.contentIsAvailableAtIndex(n,e))continue;const i={uri:l.contentUriTemplates[e].getDerivedResource({templateValues:h.getTemplateValues()}).url},r=S(_,p);(0,c.Z)(r)&&(i.boundingVolume=r),Z.push((0,s.Z)(i,l.contentHeaders[e]))}const b={boundingVolume:_,geometricError:v(d,l,h),refine:l.refine,contents:Z},T=(0,o.Z)(l.tileHeader,true);delete T.boundingVolume,delete T.transform;const E=(0,s.Z)(b,T,true),C=M(e,l.baseResource,E,i);return C.implicitCoordinates=h,C.implicitSubtree=t,C.metadata=d,C.hasImplicitContentMetadata=g,C}function x(e,t){return(0,c.Z)(e)&&(0,c.Z)(t)&&((0,c.Z)(t.minimumHeight)||(0,c.Z)(t.maximumHeight))&&((0,_.Z)(e,"3DTILES_bounding_volume_S2")||(0,c.Z)(e.region))}function w(e,t){(0,c.Z)(t)&&((0,_.Z)(e,"3DTILES_bounding_volume_S2")?function(e,t,i){(0,c.Z)(t)&&(e.minimumHeight=t);(0,c.Z)(i)&&(e.maximumHeight=i)}(e.extensions["3DTILES_bounding_volume_S2"],t.minimumHeight,t.maximumHeight):(0,c.Z)(e.region)&&function(e,t,i){(0,c.Z)(t)&&(e[4]=t);(0,c.Z)(i)&&(e[5]=i)}(e.region,t.minimumHeight,t.maximumHeight))}function S(e,t){let i;return(0,c.Z)(t)&&(i=t.boundingVolume),x(i,t)?w(i,t):x(e,t)&&(i=(0,o.Z)(e,!0),w(i,t)),i}function A(e,t,i,r,n){const o=e.boundingVolume;if((0,_.Z)(o,"3DTILES_bounding_volume_S2"))return E(r,n,i,t.level,t.x,t.y,t.z);if((0,c.Z)(o.region)){return{region:D(o.region,t.level,t.x,t.y,t.z)}}return{box:O(o.box,t.level,t.x,t.y,t.z)}}function E(e,t,i,r,o,s,a){n.Z.typeOf.bool("parentIsPlaceholderTile",e),n.Z.typeOf.object("parentTile",t),n.Z.typeOf.number("childIndex",i),n.Z.typeOf.number("level",r),n.Z.typeOf.number("x",o),n.Z.typeOf.number("y",s),(0,c.Z)(a)&&n.Z.typeOf.number("z",a);const u=t._boundingVolume;if(e)return{extensions:{"3DTILES_bounding_volume_S2":{token:m.Z.getTokenFromId(u.s2Cell._cellId),minimumHeight:u.minimumHeight,maximumHeight:u.maximumHeight}}};const l=Number(t._boundingVolume.s2Cell._cellId>>BigInt(61)),h=l%2==0?d.Z.encode2D(r,o,s):d.Z.encode2D(r,s,o),f=m.Z.fromFacePositionLevel(l,BigInt(h),r);let p,g;if((0,c.Z)(a)){const e=(u.maximumHeight+u.minimumHeight)/2;p=i<4?u.minimumHeight:e,g=i<4?e:u.maximumHeight}else p=u.minimumHeight,g=u.maximumHeight;return{extensions:{"3DTILES_bounding_volume_S2":{token:m.Z.getTokenFromId(f._cellId),minimumHeight:p,maximumHeight:g}}}}Object.defineProperties(b.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._url}},metadata:{get:function(){},set:function(){throw new l.Z("Implicit3DTileContent cannot have metadata")}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const C=new r.Z,I=new r.Z,L=new r.Z,P=new f.Z;function O(e,t,i,o,s){if(n.Z.typeOf.object("rootBox",e),n.Z.typeOf.number("level",t),n.Z.typeOf.number("x",i),n.Z.typeOf.number("y",o),(0,c.Z)(s)&&n.Z.typeOf.number("z",s),0===t)return e;const a=r.Z.unpack(e,0,I),u=f.Z.unpack(e,3,P),l=Math.pow(2,-t),h=(2*i+1)*l-1,d=(2*o+1)*l-1;let p=0;const m=r.Z.fromElements(l,l,1,C);(0,c.Z)(s)&&(p=(2*s+1)*l-1,m.z=l);let g=r.Z.fromElements(h,d,p,L);g=f.Z.multiplyByVector(u,g,L),g=r.Z.add(g,a,L);let _=f.Z.clone(u);_=f.Z.multiplyByScale(_,m,_);const Z=new Array(12);return r.Z.pack(g,Z),f.Z.pack(_,Z,3),Z}const R=new p.Z;function D(e,t,i,r,o){if(n.Z.typeOf.object("rootRegion",e),n.Z.typeOf.number("level",t),n.Z.typeOf.number("x",i),n.Z.typeOf.number("y",r),(0,c.Z)(o)&&n.Z.typeOf.number("z",o),0===t)return e.slice();const s=p.Z.unpack(e,0,R),a=e[4],u=e[5],l=Math.pow(2,-t),d=l*s.width,f=h.Z.negativePiToPi(s.west+i*d),m=h.Z.negativePiToPi(f+d),g=l*s.height,_=h.Z.negativePiToPi(s.south+r*g),Z=h.Z.negativePiToPi(_+g);let y=a,b=u;if((0,c.Z)(o)){const e=l*(u-a);y+=o*e,b=y+e}return[f,_,m,Z,y,b]}function F(e,t,i){const r=e._implicitTileset,n=t.implicitCoordinates.getChildCoordinates(i),o=A(r,n,i,!1,t),s=v(void 0,r,n),a=r.subtreeUriTemplate.getDerivedResource({templateValues:n.getTemplateValues()}).url,c={boundingVolume:o,geometricError:s,refine:r.refine,contents:[{uri:a}]},u=M(e,r.baseResource,c,t);return u.implicitTileset=r,u.implicitCoordinates=n,u}function M(e,t,i,r){return new(0,e._tile.constructor)(e._tileset,t,i,r)}b.prototype.hasProperty=function(e,t){return!1},b.prototype.getFeature=function(e){},b.prototype.applyDebugSettings=function(e,t){},b.prototype.applyStyle=function(e){},b.prototype.update=function(e,t){},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._implicitSubtree=this._implicitSubtree&&this._implicitSubtree.destroy(),(0,u.Z)(this)},b._deriveBoundingBox=O,b._deriveBoundingRegion=D,b._deriveBoundingVolumeS2=E},914:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(17497),n=i(54485),o=i(88779),s=i(20176),a=i(21514);function c(e){const t=e.lengthBits;let i=e.availableCount;r.Z.typeOf.number("options.lengthBits",t);const s=e.constant,c=e.bitstream;if((0,n.Z)(s))i=t;else{const r=Math.ceil(t/8);if(c.length!==r)throw new a.Z(`Availability bitstream must be exactly ${r} bytes long to store ${t} bits. Actual bitstream was ${c.length} bytes long.`);const s=(0,o.Z)(e.computeAvailableCountEnabled,!1);!(0,n.Z)(i)&&s&&(i=function(e,t){let i=0;for(let r=0;r<t;r++){const t=r%8;i+=e[r>>3]>>t&1}return i}(c,t))}this._lengthBits=t,this._availableCount=i,this._constant=s,this._bitstream=c}Object.defineProperties(c.prototype,{lengthBits:{get:function(){return this._lengthBits}},availableCount:{get:function(){return this._availableCount}}}),c.prototype.getBit=function(e){if(e<0||e>=this._lengthBits)throw new s.Z("Bit index out of bounds.");if((0,n.Z)(this._constant))return this._constant;const t=e>>3,i=e%8;return 1==(this._bitstream[t]>>i&1)}},3244:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(17497),n=i(88779);function o(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).metadataTable,i=e.class,o=e.entityId,s=e.propertyTableJson;r.Z.typeOf.object("options.metadataTable",t),r.Z.typeOf.object("options.class",i),r.Z.typeOf.number("options.entityId",o),r.Z.typeOf.object("options.propertyTableJson",s),this._class=i,this._metadataTable=t,this._entityId=o,this._extensions=s.extensions,this._extras=s.extras}Object.defineProperties(o.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),o.prototype.hasProperty=function(e){return this._metadataTable.hasProperty(e)},o.prototype.hasPropertyBySemantic=function(e){return this._metadataTable.hasPropertyBySemantic(e)},o.prototype.getPropertyIds=function(e){return this._metadataTable.getPropertyIds(e)},o.prototype.getProperty=function(e){return this._metadataTable.getProperty(this._entityId,e)},o.prototype.setProperty=function(e,t){return this._metadataTable.setProperty(this._entityId,e,t)},o.prototype.getPropertyBySemantic=function(e){return this._metadataTable.getPropertyBySemantic(this._entityId,e)},o.prototype.setPropertyBySemantic=function(e,t){return this._metadataTable.setPropertyBySemantic(this._entityId,e,t)}},35170:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(20176);const n={QUADTREE:"QUADTREE",OCTREE:"OCTREE",getBranchingFactor:function(e){switch(e){case n.OCTREE:return 8;case n.QUADTREE:return 4;default:throw new r.Z("subdivisionScheme is not a valid value.")}}},o=Object.freeze(n)},27849:(e,t,i)=>{i.d(t,{Z:()=>_});var r=i(17497),n=i(88779),o=i(20176),s=i(54485),a=i(90332),c=i(7219),u=i(21514),l=i(30271),h=i(914),d=i(3244),f=i(35170),p=i(5296),m=i(24206),g=i(22128);function _(e,t,i,a,u){if(r.Z.typeOf.object("resource",e),(0,s.Z)(t)===(0,s.Z)(i))throw new o.Z("One of json and subtreeView must be defined.");r.Z.typeOf.object("implicitTileset",a),r.Z.typeOf.object("implicitCoordinates",u),this._resource=e,this._subtreeJson=void 0,this._bufferLoader=void 0,this._tileAvailability=void 0,this._contentAvailabilityBitstreams=[],this._childSubtreeAvailability=void 0,this._implicitCoordinates=u,this._subtreeLevels=a.subtreeLevels,this._subdivisionScheme=a.subdivisionScheme,this._branchingFactor=a.branchingFactor,this._metadata=void 0,this._tileMetadataTable=void 0,this._tilePropertyTableJson=void 0,this._contentMetadataTables=[],this._contentPropertyTableJsons=[],this._tileJumpBuffer=void 0,this._contentJumpBuffers=[],this._readyPromise=function(e,t,i,r){let o;o=(0,s.Z)(t)?{json:t,binary:void 0}:function(e){const t=!0,i=new DataView(e.buffer,e.byteOffset);let r=8;const n=i.getUint32(r,t);r+=8;const o=i.getUint32(r,t);r+=8;const s=(0,c.Z)(e,r,n);r+=n;const a=e.subarray(r,r+o);return{json:s,binary:a}}(i);const a=o.json;let u;if(e._subtreeJson=a,(0,l.Z)(a,"3DTILES_metadata"))u=a.extensions["3DTILES_metadata"];else if((0,s.Z)(a.tileMetadata)){const e=a.tileMetadata;u=a.propertyTables[e]}const h=[];if((0,s.Z)(a.contentMetadata)){const e=a.contentMetadata.length;for(let t=0;t<e;t++){const e=a.contentMetadata[t];h.push(a.propertyTables[e])}}let d;const f=r.metadataSchema,g=a.subtreeMetadata;if((0,s.Z)(g)){const e=g.class,t=f.classes[e];d=new p.Z({subtreeMetadata:g,class:t})}e._metadata=d,e._tilePropertyTableJson=u,e._contentPropertyTableJsons=h;const _={constant:0};a.contentAvailabilityHeaders=[],(0,l.Z)(a,"3DTILES_multiple_contents")?a.contentAvailabilityHeaders=a.extensions["3DTILES_multiple_contents"].contentAvailability:Array.isArray(a.contentAvailability)?a.contentAvailabilityHeaders=a.contentAvailability:a.contentAvailabilityHeaders.push((0,n.Z)(a.contentAvailability,_));const T=function(e){e=(0,s.Z)(e)?e:[];for(let t=0;t<e.length;t++){const i=e[t];i.isExternal=(0,s.Z)(i.uri),i.isActive=!1}return e}(a.buffers),x=function(e,t){e=(0,s.Z)(e)?e:[];for(let i=0;i<e.length;i++){const r=e[i],n=t[r.buffer];r.bufferHeader=n,r.isActive=!1}return e}(a.bufferViews,T);(function(e,t){let i;const r=e.tileAvailability;(0,s.Z)(r.bitstream)?i=t[r.bitstream]:(0,s.Z)(r.bufferView)&&(i=t[r.bufferView]);(0,s.Z)(i)&&(i.isActive=!0,i.bufferHeader.isActive=!0);const n=e.contentAvailabilityHeaders;for(let e=0;e<n.length;e++)i=void 0,(0,s.Z)(n[e].bitstream)?i=t[n[e].bitstream]:(0,s.Z)(n[e].bufferView)&&(i=t[n[e].bufferView]),(0,s.Z)(i)&&(i.isActive=!0,i.bufferHeader.isActive=!0);i=void 0;const o=e.childSubtreeAvailability;(0,s.Z)(o.bitstream)?i=t[o.bitstream]:(0,s.Z)(o.bufferView)&&(i=t[o.bufferView]);(0,s.Z)(i)&&(i.isActive=!0,i.bufferHeader.isActive=!0)})(a,x),(0,s.Z)(u)&&Z(u,x);for(let e=0;e<h.length;e++){Z(h[e],x)}return function(e,t,i){const r=[];for(let n=0;n<t.length;n++){const o=t[n];if(o.isActive)if(o.isExternal){const t=y(e,o);r.push(t)}else r.push(Promise.resolve(i));else r.push(Promise.resolve(void 0))}return Promise.all(r).then((function(e){const t={};for(let i=0;i<e.length;i++){const r=e[i];(0,s.Z)(r)&&(t[i]=r)}return t}))}(e,T,o.binary).then((function(t){const i=function(e,t){const i={};for(let r=0;r<e.length;r++){const n=e[r];if(!n.isActive)continue;const o=n.byteOffset,s=o+n.byteLength,a=t[n.buffer].subarray(o,s);i[r]=a}return i}(x,t);return function(e,t,i,r){const n=i.branchingFactor,o=i.subtreeLevels,a=(Math.pow(n,o)-1)/(n-1),c=Math.pow(n,o),u=(0,l.Z)(t,"3DTILES_metadata"),h=(0,s.Z)(e._tilePropertyTableJson);let d=u||h;e._tileAvailability=b(t.tileAvailability,r,a,d);const f=e._contentPropertyTableJsons.length>0;d=d||f;for(let i=0;i<t.contentAvailabilityHeaders.length;i++){const n=b(t.contentAvailabilityHeaders[i],r,a,d);e._contentAvailabilityBitstreams.push(n)}e._childSubtreeAvailability=b(t.childSubtreeAvailability,r,c)}(e,a,r,i),(0,s.Z)(u)&&(function(e,t,i){const r=e._tilePropertyTableJson,n=e._tileAvailability.availableCount,o=t.metadataSchema,s=r.class,a=o.classes[s];e._tileMetadataTable=new m.Z({class:a,count:n,properties:r.properties,bufferViews:i})}(e,r,i),function(e){const t=v(e._tileAvailability);e._tileJumpBuffer=t}(e)),function(e,t,i){const r=e._contentPropertyTableJsons,n=e._contentAvailabilityBitstreams,o=t.metadataSchema,s=e._contentMetadataTables;for(let e=0;e<r.length;e++){const t=r[e],a=n[e].availableCount,c=t.class,u=o.classes[c],l=new m.Z({class:u,count:a,properties:t.properties,bufferViews:i});s.push(l)}}(e,r,i),function(e){const t=e._contentJumpBuffers,i=e._contentAvailabilityBitstreams;for(let e=0;e<i.length;e++){const r=v(i[e]);t.push(r)}}(e),e}))}(this,t,i,a)}function Z(e,t){const i=e.properties;let r;for(const e in i)if(i.hasOwnProperty(e)){const o=i[e];r=t[(0,n.Z)(o.values,o.bufferView)],r.isActive=!0,r.bufferHeader.isActive=!0;const a=(0,n.Z)(o.stringOffsets,o.stringOffsetBufferView);(0,s.Z)(a)&&(r=t[a],r.isActive=!0,r.bufferHeader.isActive=!0);const c=(0,n.Z)(o.arrayOffsets,o.arrayOffsetBufferView);(0,s.Z)(c)&&(r=t[c],r.isActive=!0,r.bufferHeader.isActive=!0)}}function y(e,t){const i=e._resource.getDerivedResource({url:t.uri}),r=g.Z.loadExternalBuffer({resource:i});return e._bufferLoader=r,r.promise.then((function(e){return e.typedArray}))}function b(e,t,i,r){if((0,s.Z)(e.constant))return new h.Z({constant:Boolean(e.constant),lengthBits:i,availableCount:e.availableCount});let n;return(0,s.Z)(e.bitstream)?n=t[e.bitstream]:(0,s.Z)(e.bufferView)&&(n=t[e.bufferView]),new h.Z({bitstream:n,lengthBits:i,availableCount:e.availableCount,computeAvailableCountEnabled:r})}function v(e){let t=0;const i=e.lengthBits,r=e.availableCount;let n;n=r<256?new Uint8Array(i):r<65536?new Uint16Array(i):new Uint32Array(i);for(let i=0;i<e.lengthBits;i++)e.getBit(i)&&(n[i]=t,t++);return n}Object.defineProperties(_.prototype,{readyPromise:{get:function(){return this._readyPromise}},metadata:{get:function(){return this._metadata}},tileMetadataTable:{get:function(){return this._tileMetadataTable}},tilePropertyTableJson:{get:function(){return this._tilePropertyTableJson}},contentMetadataTables:{get:function(){return this._contentMetadataTables}},contentPropertyTableJsons:{get:function(){return this._contentPropertyTableJsons}},implicitCoordinates:{get:function(){return this._implicitCoordinates}}}),_.prototype.tileIsAvailableAtIndex=function(e){return this._tileAvailability.getBit(e)},_.prototype.tileIsAvailableAtCoordinates=function(e){const t=this.getTileIndex(e);return this.tileIsAvailableAtIndex(t)},_.prototype.contentIsAvailableAtIndex=function(e,t){if((t=(0,n.Z)(t,0))<0||t>=this._contentAvailabilityBitstreams.length)throw new o.Z("contentIndex out of bounds.");return this._contentAvailabilityBitstreams[t].getBit(e)},_.prototype.contentIsAvailableAtCoordinates=function(e,t){const i=this.getTileIndex(e);return this.contentIsAvailableAtIndex(i,t)},_.prototype.childSubtreeIsAvailableAtIndex=function(e){return this._childSubtreeAvailability.getBit(e)},_.prototype.childSubtreeIsAvailableAtCoordinates=function(e){const t=this.getChildSubtreeIndex(e);return this.childSubtreeIsAvailableAtIndex(t)},_.prototype.getLevelOffset=function(e){const t=this._branchingFactor;return(Math.pow(t,e)-1)/(t-1)},_.prototype.getParentMortonIndex=function(e){let t=2;return this._subdivisionScheme===f.Z.OCTREE&&(t=3),e>>t},_.prototype.getTileIndex=function(e){const t=e.level-this._implicitCoordinates.level;if(t<0||this._subtreeLevels<=t)throw new u.Z("level is out of bounds for this subtree");return e.getSubtreeCoordinates().getOffsetCoordinates(e).tileIndex},_.prototype.getChildSubtreeIndex=function(e){if(e.level-this._implicitCoordinates.level!==this._implicitCoordinates.subtreeLevels)throw new u.Z("level is out of bounds for this subtree");return e.getParentSubtreeCoordinates().getOffsetCoordinates(e).mortonIndex},_.prototype.getTileMetadataView=function(e){const t=function(e,t){if(!(0,s.Z)(e._tileMetadataTable))return;const i=e.getTileIndex(t);return e._tileAvailability.getBit(i)?e._tileJumpBuffer[i]:void 0}(this,e);if(!(0,s.Z)(t))return;const i=this._tileMetadataTable;return new d.Z({class:i.class,metadataTable:i,entityId:t,propertyTableJson:this._tilePropertyTableJson})},_.prototype.getContentMetadataView=function(e,t){const i=function(e,t,i){const r=e._contentMetadataTables;if(!(0,s.Z)(r))return;const n=r[i];if(!(0,s.Z)(n))return;const o=e._contentAvailabilityBitstreams[i],a=e.getTileIndex(t);if(o.getBit(a))return e._contentJumpBuffers[i][a]}(this,e,t);if(!(0,s.Z)(i))return;const r=this._contentMetadataTables[t],n=this._contentPropertyTableJsons[t];return new d.Z({class:r.class,metadataTable:r,entityId:i,contentIndex:t,propertyTableJson:n})},_.prototype.isDestroyed=function(){return!1},_.prototype.destroy=function(){return(0,s.Z)(this._bufferLoader)&&g.Z.unload(this._bufferLoader),(0,a.Z)(this)}},5296:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(17497),n=i(88779),o=i(54485),s=i(8754);function a(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).subtreeMetadata,i=e.class;r.Z.typeOf.object("options.subtreeMetadata",t),r.Z.typeOf.object("options.class",i);const s=(0,o.Z)(t.properties)?t.properties:{};this._class=i,this._properties=s,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(a.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),a.prototype.hasProperty=function(e){return s.Z.hasProperty(e,this._properties,this._class)},a.prototype.hasPropertyBySemantic=function(e){return s.Z.hasPropertyBySemantic(e,this._properties,this._class)},a.prototype.getPropertyIds=function(e){return s.Z.getPropertyIds(this._properties,this._class,e)},a.prototype.getProperty=function(e){return s.Z.getProperty(e,this._properties,this._class)},a.prototype.setProperty=function(e,t){return s.Z.setProperty(e,t,this._properties,this._class)},a.prototype.getPropertyBySemantic=function(e){return s.Z.getPropertyBySemantic(e,this._properties,this._class)},a.prototype.setPropertyBySemantic=function(e,t){return s.Z.setPropertyBySemantic(e,t,this._properties,this._class)};const c=a},88472:(e,t,i)=>{i.d(t,{Z:()=>c});var r=i(22874),n=i(17497),o=i(20176),s=i(84564),a=i(35170);function c(e){if(n.Z.typeOf.string("options.subdivisionScheme",e.subdivisionScheme),n.Z.typeOf.number("options.subtreeLevels",e.subtreeLevels),n.Z.typeOf.number("options.level",e.level),n.Z.typeOf.number("options.x",e.x),n.Z.typeOf.number("options.y",e.y),e.subdivisionScheme===a.Z.OCTREE&&n.Z.typeOf.number("options.z",e.z),e.level<0)throw new o.Z("level must be non-negative");if(e.x<0)throw new o.Z("x must be non-negative");if(e.y<0)throw new o.Z("y must be non-negative");if(e.subdivisionScheme===a.Z.OCTREE&&e.z<0)throw new o.Z("z must be non-negative");const t=1<<e.level;if(e.x>=t)throw new o.Z("x is out of range");if(e.y>=t)throw new o.Z("y is out of range");if(e.subdivisionScheme===a.Z.OCTREE&&e.z>=t)throw new o.Z("z is out of range");this.subdivisionScheme=e.subdivisionScheme,this.subtreeLevels=e.subtreeLevels,this.level=e.level,this.x=e.x,this.y=e.y,this.z=void 0,e.subdivisionScheme===a.Z.OCTREE&&(this.z=e.z)}function u(e,t){if(e.subdivisionScheme!==t.subdivisionScheme)throw new o.Z("coordinates must have same subdivisionScheme");if(e.subtreeLevels!==t.subtreeLevels)throw new o.Z("coordinates must have same subtreeLevels")}Object.defineProperties(c.prototype,{childIndex:{get:function(){let e=0;return e|=1&this.x,e|=(1&this.y)<<1,this.subdivisionScheme===a.Z.OCTREE&&(e|=(1&this.z)<<2),e}},mortonIndex:{get:function(){return this.subdivisionScheme===a.Z.OCTREE?s.Z.encode3D(this.x,this.y,this.z):s.Z.encode2D(this.x,this.y)}},tileIndex:{get:function(){return(this.subdivisionScheme===a.Z.OCTREE?((1<<3*this.level)-1)/7:((1<<2*this.level)-1)/3)+this.mortonIndex}}}),c.prototype.getDescendantCoordinates=function(e){n.Z.typeOf.object("offsetCoordinates",e),u(this,e);const t=this.level+e.level,i=(this.x<<e.level)+e.x,r=(this.y<<e.level)+e.y;if(this.subdivisionScheme===a.Z.OCTREE){const n=(this.z<<e.level)+e.z;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:r,z:n})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:i,y:r})},c.prototype.getAncestorCoordinates=function(e){if(n.Z.typeOf.number("offsetLevels",e),e<0)throw new o.Z("offsetLevels must be non-negative");if(e>this.level)throw new o.Z("ancestor cannot be above the tileset root");const t=1<<e,i=this.level-e,r=Math.floor(this.x/t),s=Math.floor(this.y/t);if(this.subdivisionScheme===a.Z.OCTREE){const e=Math.floor(this.z/t);return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:r,y:s,z:e})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:r,y:s})},c.prototype.getOffsetCoordinates=function(e){if(n.Z.typeOf.object("descendantCoordinates",e),!this.isEqual(e)&&!this.isAncestor(e))throw new o.Z("this is not an ancestor of descendant");u(this,e);const t=e.level-this.level,i=1<<t,r=e.x%i,s=e.y%i;if(this.subdivisionScheme===a.Z.OCTREE){const n=e.z%i;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:r,y:s,z:n})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:t,x:r,y:s})},c.prototype.getChildCoordinates=function(e){n.Z.typeOf.number("childIndex",e);const t=a.Z.getBranchingFactor(this.subdivisionScheme);if(e<0||t<=e)throw new o.Z(`childIndex must be at least 0 and less than ${t}`);const i=this.level+1,r=2*this.x+e%2,s=2*this.y+Math.floor(e/2)%2;if(this.subdivisionScheme===a.Z.OCTREE){const t=2*this.z+Math.floor(e/4)%2;return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:r,y:s,z:t})}return new c({subdivisionScheme:this.subdivisionScheme,subtreeLevels:this.subtreeLevels,level:i,x:r,y:s})},c.prototype.getSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels)},c.prototype.getParentSubtreeCoordinates=function(){return this.getAncestorCoordinates(this.level%this.subtreeLevels+this.subtreeLevels)},c.prototype.isAncestor=function(e){n.Z.typeOf.object("descendantCoordinates",e),u(this,e);const t=e.level-this.level;if(t<=0)return!1;const i=e.x>>t,r=e.y>>t,o=this.x===i,s=this.y===r;if(this.subdivisionScheme===a.Z.OCTREE){const i=e.z>>t,r=this.z===i;return o&&s&&r}return o&&s},c.prototype.isEqual=function(e){return n.Z.typeOf.object("otherCoordinates",e),this.subdivisionScheme===e.subdivisionScheme&&this.subtreeLevels===e.subtreeLevels&&this.level===e.level&&this.x===e.x&&this.y===e.y&&(this.subdivisionScheme!==a.Z.OCTREE||this.z===e.z)},c.prototype.isImplicitTilesetRoot=function(){return 0===this.level},c.prototype.isSubtreeRoot=function(){return this.level%this.subtreeLevels==0},c.prototype.isBottomOfSubtree=function(){return this.level%this.subtreeLevels==this.subtreeLevels-1},c.prototype.getTemplateValues=function(){const e={level:this.level,x:this.x,y:this.y};return this.subdivisionScheme===a.Z.OCTREE&&(e.z=this.z),e};const l=[0,0,0];c.fromMortonIndex=function(e,t,i,r){let n;return e===a.Z.OCTREE?(n=s.Z.decode3D(r,l),new c({subdivisionScheme:e,subtreeLevels:t,level:i,x:n[0],y:n[1],z:n[2]})):(n=s.Z.decode2D(r,l),new c({subdivisionScheme:e,subtreeLevels:t,level:i,x:n[0],y:n[1]}))},c.fromTileIndex=function(e,t,i){let n,o,s;return e===a.Z.OCTREE?(n=Math.floor(r.Z.log2(7*i+1)/3),o=((1<<3*n)-1)/7,s=i-o):(n=Math.floor(r.Z.log2(3*i+1)/2),o=((1<<2*n)-1)/3,s=i-o),c.fromMortonIndex(e,t,n,s)}},22468:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(17497),n=i(55077),o=i(54485),s=i(67197),a=i(21514),c=i(30271),u=i(35170);function l(e,t,i){const l=(0,c.Z)(t,"3DTILES_implicit_tiling")?t.extensions["3DTILES_implicit_tiling"]:t.implicitTiling;r.Z.typeOf.object("implicitTiling",l),this.baseResource=e,this.geometricError=t.geometricError,this.metadataSchema=i;const h=t.boundingVolume;if(!(0,o.Z)(h.box)&&!(0,o.Z)(h.region)&&!(0,c.Z)(h,"3DTILES_bounding_volume_S2"))throw new a.Z("Only box, region and 3DTILES_bounding_volume_S2 are supported for implicit tiling");this.boundingVolume=h,this.refine=t.refine,this.subtreeUriTemplate=new s.Z({url:l.subtrees.uri}),this.contentUriTemplates=[],this.contentHeaders=[];const d=function(e){if((0,c.Z)(e,"3DTILES_multiple_contents")){const t=e.extensions["3DTILES_multiple_contents"];return(0,o.Z)(t.contents)?t.contents:t.content}if((0,o.Z)(e.contents))return e.contents;if((0,o.Z)(e.content))return[e.content];return[]}(t);for(let e=0;e<d.length;e++){const t=d[e];this.contentHeaders.push((0,n.Z)(t,!0));const i=new s.Z({url:t.uri});this.contentUriTemplates.push(i)}this.contentCount=this.contentHeaders.length,this.tileHeader=function(e){const t=(0,n.Z)(e,!0);(0,o.Z)(t.extensions)&&(delete t.extensions["3DTILES_implicit_tiling"],delete t.extensions["3DTILES_multiple_contents"],0===Object.keys(t.extensions).length&&delete t.extensions);return delete t.implicitTiling,delete t.contents,delete t.content,t}(t),this.subdivisionScheme=u.Z[l.subdivisionScheme],this.branchingFactor=u.Z.getBranchingFactor(this.subdivisionScheme),this.subtreeLevels=l.subtreeLevels,(0,o.Z)(l.availableLevels)?this.availableLevels=l.availableLevels:this.availableLevels=l.maximumLevel+1}},84599:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(17497);const n={TRANSLATION:"TRANSLATION",ROTATION:"ROTATION",SCALE:"SCALE",FEATURE_ID:"_FEATURE_ID",fromGltfSemantic:function(e){r.Z.typeOf.string("gltfSemantic",e);let t=e;const i=/^(\w+)_\d+$/.exec(e);switch(null!==i&&(t=i[1]),t){case"TRANSLATION":return n.TRANSLATION;case"ROTATION":return n.ROTATION;case"SCALE":return n.SCALE;case"_FEATURE_ID":return n.FEATURE_ID}}},o=Object.freeze(n)},73067:(e,t,i)=>{i.d(t,{Z:()=>O});var r=i(69310),n=i(93517),o=i(6785),s=i(44990),a=i(54485),c=i(34971),u=i(90332),l=i(20176),h=i(99996),d=i(16383),f=i(39109),p=i(71118),m=i(20291),g=i(22041),_=i(21514),Z=i(7004),y=i(4135),b=i(1577),v=i(81737),T=i(18272),x=i(96059),w=i(73673),S=i(5797),A=i(18889),E=i(13715);function C(e,t,i,o,c){this._tileset=e,this._tile=t,this._resource=i,this._modelInstanceCollection=void 0,this._metadata=void 0,this._batchTable=void 0,this._features=void 0,this.featurePropertiesDirty=!1,this._group=void 0,function(e,t,i){const o=S.Z.parse(t,i),c=o.gltfFormat,u=o.gltf,l=o.featureTableJson,x=o.featureTableBinary,C=o.batchTableJson,O=o.batchTableBinary,R=new w.Z(l,x),D=R.getGlobalProperty("INSTANCES_LENGTH");if(R.featuresLength=D,!(0,a.Z)(D))throw new _.Z("Feature table global property: INSTANCES_LENGTH must be defined");e._batchTable=new T.Z(e,D,C,O);const F=e._tileset,M={instances:new Array(D),batchTable:e._batchTable,cull:!1,url:void 0,requestType:g.Z.TILES3D,gltf:void 0,basePath:void 0,incrementallyLoadTextures:!1,upAxis:F._gltfUpAxis,forwardAxis:v.Z.X,opaquePass:b.Z.CESIUM_3D_TILE,pickIdLoaded:I(e),imageBasedLighting:F.imageBasedLighting,backFaceCulling:F.backFaceCulling,showOutline:F.showOutline,showCreditsOnScreen:F.showCreditsOnScreen};if(0===c){let t=(0,d.Z)(u);t=t.replace(/[\s\0]+$/,""),M.url=e._resource.getDerivedResource({url:t})}else M.gltf=u,M.basePath=e._resource.clone();const N=R.getGlobalProperty("EAST_NORTH_UP");let B;const H=R.getGlobalProperty("RTC_CENTER",s.Z.FLOAT,3);(0,a.Z)(H)&&(B=n.Z.unpack(H));const V=M.instances,U=new n.Z,k=new Array(3),G=new n.Z,j=new n.Z,q=new n.Z,z=new f.Z,W=new m.Z;let Y=new n.Z;const K=new y.Z,J=new p.Z;for(let e=0;e<D;e++){let t=R.getProperty("POSITION",s.Z.FLOAT,3,e,L);if(!(0,a.Z)(t)){t=k;const i=R.getProperty("POSITION_QUANTIZED",s.Z.UNSIGNED_SHORT,3,e,L);if(!(0,a.Z)(i))throw new _.Z("Either POSITION or POSITION_QUANTIZED must be defined for each instance.");const r=R.getGlobalProperty("QUANTIZED_VOLUME_OFFSET",s.Z.FLOAT,3);if(!(0,a.Z)(r))throw new _.Z("Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.");const n=R.getGlobalProperty("QUANTIZED_VOLUME_SCALE",s.Z.FLOAT,3);if(!(0,a.Z)(n))throw new _.Z("Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.");for(let e=0;e<3;e++)t[e]=i[e]/65535*n[e]+r[e]}n.Z.unpack(t,0,U),(0,a.Z)(B)&&n.Z.add(U,B,U),K.translation=U;const i=R.getProperty("NORMAL_UP",s.Z.FLOAT,3,e,L),o=R.getProperty("NORMAL_RIGHT",s.Z.FLOAT,3,e,P);let c=!1;if((0,a.Z)(i)){if(!(0,a.Z)(o))throw new _.Z("To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.");n.Z.unpack(i,0,j),n.Z.unpack(o,0,G),c=!0}else{const t=R.getProperty("NORMAL_UP_OCT32P",s.Z.UNSIGNED_SHORT,2,e,L),i=R.getProperty("NORMAL_RIGHT_OCT32P",s.Z.UNSIGNED_SHORT,2,e,P);if((0,a.Z)(t)){if(!(0,a.Z)(i))throw new _.Z("To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.");r.Z.octDecodeInRange(t[0],t[1],65535,j),r.Z.octDecodeInRange(i[0],i[1],65535,G),c=!0}else N?(Z.Z.eastNorthUpToFixedFrame(U,h.Z.WGS84,J),p.Z.getMatrix3(J,z)):f.Z.clone(f.Z.IDENTITY,z)}c&&(n.Z.cross(G,j,q),n.Z.normalize(q,q),f.Z.setColumn(z,0,G,z),f.Z.setColumn(z,1,j,z),f.Z.setColumn(z,2,q,z)),m.Z.fromRotationMatrix(z,W),K.rotation=W,Y=n.Z.fromElements(1,1,1,Y);const u=R.getProperty("SCALE",s.Z.FLOAT,1,e);(0,a.Z)(u)&&n.Z.multiplyByScalar(Y,u,Y);const l=R.getProperty("SCALE_NON_UNIFORM",s.Z.FLOAT,3,e,L);(0,a.Z)(l)&&(Y.x*=l[0],Y.y*=l[1],Y.z*=l[2]),K.scale=Y;let d=R.getProperty("BATCH_ID",s.Z.UNSIGNED_SHORT,1,e);(0,a.Z)(d)||(d=e),p.Z.fromTranslationRotationScale(K,J);const g=J.clone();V[e]={modelMatrix:g,batchId:d}}e._modelInstanceCollection=new A.Z(M),e._modelInstanceCollection.readyPromise.catch((function(){})).then((function(t){e._modelInstanceCollection.ready&&t.activeAnimations.addAll({loop:E.Z.REPEAT})}))}(this,o,c)}function I(e){return function(){return e._batchTable.getPickId()}}C._deprecationWarning=c.Z,Object.defineProperties(C.prototype,{featuresLength:{get:function(){return this._batchTable.featuresLength}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){const e=this._modelInstanceCollection._model;return(0,a.Z)(e)?e.trianglesLength:0}},geometryByteLength:{get:function(){const e=this._modelInstanceCollection._model;return(0,a.Z)(e)?e.geometryByteLength:0}},texturesByteLength:{get:function(){const e=this._modelInstanceCollection._model;return(0,a.Z)(e)?e.texturesByteLength:0}},batchTableByteLength:{get:function(){return this._batchTable.memorySizeInBytes}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._modelInstanceCollection.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(e){this._group=e}}});const L=new Array(4),P=new Array(4);C.prototype.hasProperty=function(e,t){return this._batchTable.hasProperty(e,t)},C.prototype.getFeature=function(e){const t=this.featuresLength;if(!(0,a.Z)(e)||e<0||e>=t)throw new l.Z(`batchId is required and between zero and featuresLength - 1 (${t-1}).`);return function(e){const t=e.featuresLength;if(!(0,a.Z)(e._features)&&t>0){const i=new Array(t);for(let r=0;r<t;++r)i[r]=new x.Z(e,r);e._features=i}}(this),this._features[e]},C.prototype.applyDebugSettings=function(e,t){t=e?t:o.Z.WHITE,this._batchTable.setAllColor(t)},C.prototype.applyStyle=function(e){this._batchTable.applyStyle(e)},C.prototype.update=function(e,t){const i=t.commandList.length;this._batchTable.update(e,t),this._modelInstanceCollection.modelMatrix=this._tile.computedTransform,this._modelInstanceCollection.shadows=this._tileset.shadows,this._modelInstanceCollection.lightColor=this._tileset.lightColor,this._modelInstanceCollection.imageBasedLighting=this._tileset.imageBasedLighting,this._modelInstanceCollection.backFaceCulling=this._tileset.backFaceCulling,this._modelInstanceCollection.debugWireframe=this._tileset.debugWireframe,this._modelInstanceCollection.showCreditsOnScreen=this._tileset.showCreditsOnScreen,this._modelInstanceCollection.splitDirection=this._tileset.splitDirection;const r=this._modelInstanceCollection._model;if((0,a.Z)(r)){const e=this._tileset.clippingPlanes;r.referenceMatrix=this._tileset.clippingPlanesOriginMatrix,(0,a.Z)(e)&&this._tile.clippingPlanesDirty&&(r._clippingPlanes=e.enabled&&this._tile._isClipped?e:void 0),(0,a.Z)(e)&&(0,a.Z)(r._clippingPlanes)&&r._clippingPlanes!==e&&(r._clippingPlanes=e)}this._modelInstanceCollection.update(t);i<t.commandList.length&&(t.passes.render||t.passes.pick)&&this._batchTable.addDerivedCommands(t,i,!1)},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){return this._modelInstanceCollection=this._modelInstanceCollection&&this._modelInstanceCollection.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,u.Z)(this)};const O=C},91986:(e,t,i)=>{i.d(t,{Z:()=>w});var r=i(6785),n=i(54485),o=i(90332),s=i(91166),a=i(74366),c=i(37791),u=i(27400),l=i(29825),h=i(88573),d=i(74064),f=i(7048),p=i(47334),m=i(2312),g=i(995),_=i(84067),Z=i(88307),y=i(59215);function b(){this._numSamples=1,this.previousFramebuffer=void 0,this._previousFramebuffer=void 0,this._depthStencilTexture=void 0,this._depthStencilRenderbuffer=void 0,this._fbo=new c.Z({depthStencil:!0,createDepthAttachments:!1}),this._fboClassified=new c.Z({depthStencil:!0,createDepthAttachments:!1}),this._rsUnclassified=void 0,this._rsClassified=void 0,this._unclassifiedCommand=void 0,this._classifiedCommand=void 0,this._translucentCommand=void 0,this._clearColorCommand=new a.Z({color:new r.Z(0,0,0,0),owner:this}),this._clearCommand=new a.Z({color:new r.Z(0,0,0,0),depth:1,stencil:0});const e=this;this._uniformMap={colorTexture:function(){return e._fbo.getColorTexture()},depthTexture:function(){return e._depthStencilTexture},classifiedTexture:function(){return e._fboClassified.getColorTexture()}}}Object.defineProperties(b.prototype,{unclassifiedCommand:{get:function(){return this._unclassifiedCommand}}}),b.isTranslucencySupported=function(e){return e.depthTexture&&e.fragmentDepth};const v={depthMask:!1,stencilTest:{enabled:!0,frontFunction:Z.Z.EQUAL,frontOperation:{fail:y.Z.KEEP,zFail:y.Z.KEEP,zPass:y.Z.KEEP},backFunction:Z.Z.NEVER,reference:0,mask:_.Z.CLASSIFICATION_MASK},blending:g.Z.ALPHA_BLEND},T={depthMask:!1,stencilTest:{enabled:!0,frontFunction:Z.Z.NOT_EQUAL,frontOperation:{fail:y.Z.KEEP,zFail:y.Z.KEEP,zPass:y.Z.KEEP},backFunction:Z.Z.NEVER,reference:0,mask:_.Z.CLASSIFICATION_MASK},blending:g.Z.ALPHA_BLEND},x={depthMask:!0,depthTest:{enabled:!0},stencilTest:_.Z.setCesium3DTileBit(),stencilMask:_.Z.CESIUM_3D_TILE_MASK,blending:g.Z.ALPHA_BLEND};b.prototype.update=function(e,t,i){const r=this._fbo.getColorTexture(),o=this.previousFramebuffer!==this._previousFramebuffer;this._previousFramebuffer=this.previousFramebuffer;const a=this._numSamples!==t,c=e.drawingBufferWidth,g=e.drawingBufferHeight,_=!(0,n.Z)(r)||r.width!==c||r.height!==g;if((_||o||a)&&(this._numSamples=t,this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),(0,n.Z)(this._previousFramebuffer)||(this._depthStencilTexture=new p.Z({context:e,width:c,height:g,pixelFormat:s.Z.DEPTH_STENCIL,pixelDatatype:u.Z.UNSIGNED_INT_24_8}),t>1&&(this._depthStencilRenderbuffer=new l.Z({context:e,width:c,height:g,format:h.Z.DEPTH24_STENCIL8,numSamples:t})))),!(0,n.Z)(this._fbo.framebuffer)||_||o||a){let r,o;this._fbo.destroy(),this._fboClassified.destroy(),(0,n.Z)(this._previousFramebuffer)?(r=i.getDepthStencilTexture(),o=i.getDepthStencilRenderbuffer()):(r=this._depthStencilTexture,o=this._depthStencilRenderbuffer),this._fbo.setDepthStencilTexture(r),(0,n.Z)(o)&&this._fbo.setDepthStencilRenderbuffer(o),this._fbo.update(e,c,g,t),(0,n.Z)(this._previousFramebuffer)||(this._fboClassified.setDepthStencilTexture(r),this._fboClassified.update(e,c,g))}if((0,n.Z)(this._rsUnclassified)||(this._rsUnclassified=d.Z.fromCache(v),this._rsClassified=d.Z.fromCache(T),this._rsDefault=d.Z.fromCache(x)),!(0,n.Z)(this._unclassifiedCommand)||o||a){(0,n.Z)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy());const t=(0,n.Z)(this._previousFramebuffer)?"uniform sampler2D colorTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n#ifdef UNCLASSIFIED\n    gl_FragColor = color * czm_invertClassificationColor;\n#else\n    gl_FragColor = color;\n#endif\n}\n":"#extension GL_EXT_frag_depth : enable\nuniform sampler2D colorTexture;\nuniform sampler2D depthTexture;\nuniform sampler2D classifiedTexture;\nvarying vec2 v_textureCoordinates;\nvoid main()\n{\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    if (color.a == 0.0)\n    {\n        discard;\n    }\n    bool isClassified = all(equal(texture2D(classifiedTexture, v_textureCoordinates), vec4(0.0)));\n#ifdef UNCLASSIFIED\n    vec4 highlightColor = czm_invertClassificationColor;\n    if (isClassified)\n    {\n        discard;\n    }\n#else\n    vec4 highlightColor = vec4(1.0);\n    if (!isClassified)\n    {\n        discard;\n    }\n#endif\n    gl_FragColor = color * highlightColor;\n    gl_FragDepthEXT = texture2D(depthTexture, v_textureCoordinates).r;\n}\n",i=new f.Z({defines:["UNCLASSIFIED"],sources:[t]}),r=new f.Z({sources:[t]});this._unclassifiedCommand=e.createViewportQuadCommand(i,{renderState:(0,n.Z)(this._previousFramebuffer)?this._rsUnclassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),this._classifiedCommand=e.createViewportQuadCommand(r,{renderState:(0,n.Z)(this._previousFramebuffer)?this._rsClassified:this._rsDefault,uniformMap:this._uniformMap,owner:this}),(0,n.Z)(this._translucentCommand)&&(this._translucentCommand.shaderProgram=this._translucentCommand.shaderProgram&&this._translucentCommand.shaderProgram.destroy()),(0,n.Z)(this._previousFramebuffer)||(this._translucentCommand=e.createViewportQuadCommand(m.Z,{renderState:this._rsUnclassified,uniformMap:this._uniformMap,owner:this}))}},b.prototype.prepareTextures=function(e,t){this._fbo._numSamples>1&&this._fbo.prepareTextures(e,t)},b.prototype.clear=function(e,t){(0,n.Z)(this._previousFramebuffer)?this._fbo.clear(e,this._clearColorCommand,t):(this._fbo.clear(e,this._clearCommand,t),this._fboClassified.clear(e,this._clearCommand,t))},b.prototype.executeClassified=function(e,t){if(!(0,n.Z)(this._previousFramebuffer)){const i=t.framebuffer;this.prepareTextures(e,!0),t.framebuffer=this._fboClassified.framebuffer,this._translucentCommand.execute(e,t),t.framebuffer=i}this._classifiedCommand.execute(e,t)},b.prototype.executeUnclassified=function(e,t){this._unclassifiedCommand.execute(e,t)},b.prototype.isDestroyed=function(){return!1},b.prototype.destroy=function(){return this._fbo.destroy(),this._fboClassified.destroy(),this._depthStencilTexture=this._depthStencilTexture&&this._depthStencilTexture.destroy(),this._depthStencilRenderbuffer=this._depthStencilRenderbuffer&&this._depthStencilRenderbuffer.destroy(),(0,n.Z)(this._unclassifiedCommand)&&(this._unclassifiedCommand.shaderProgram=this._unclassifiedCommand.shaderProgram&&this._unclassifiedCommand.shaderProgram.destroy(),this._classifiedCommand.shaderProgram=this._classifiedCommand.shaderProgram&&this._classifiedCommand.shaderProgram.destroy()),(0,o.Z)(this)};const w=b},54085:(e,t,i)=>{i.d(t,{Z:()=>T});var r=i(17497),n=i(88779),o=i(54485),s=i(20176),a=i(92893),c=i(33556),u=i(21514),l=i(73558),h=i(12332),d=i(14506),f=i(58750),p=i(28678),m=i(6956),g=i(85933),_=i(57946),Z=i(11320);function y(e){return function(t){return new e(t)}}const b={ARCGIS_MAPSERVER:y(l.Z),BING:y(h.Z),GOOGLE_EARTH:y(f.Z),MAPBOX:y(p.Z),SINGLE_TILE:y(m.Z),TMS:y(d.Z),URL_TEMPLATE:y(g.Z),WMS:y(_.Z),WMTS:y(Z.Z)};function v(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).assetId;r.Z.typeOf.number("options.assetId",t),this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._ready=!1,this._tileCredits=void 0,this._errorEvent=new a.Z;const i=this,s=c.Z._createEndpointResource(t,e),l=e.assetId.toString()+e.accessToken+e.server;let h=v._endpointCache[l];(0,o.Z)(h)||(h=s.fetchJson(),v._endpointCache[l]=h),this._readyPromise=h.then((function(e){if("IMAGERY"!==e.type)return Promise.reject(new u.Z(`Cesium ion asset ${t} is not an imagery asset.`));let r;const n=e.externalType;if((0,o.Z)(n)){const t=b[n];if(!(0,o.Z)(t))return Promise.reject(new u.Z(`Unrecognized Cesium ion imagery type: ${n}`));r=t(e.options)}else r=new d.Z({url:new c.Z(e,s)});return i._tileCredits=c.Z.getCreditsFromEndpoint(e,s),r.errorEvent.addEventListener((function(e){e.provider=i,i._errorEvent.raiseEvent(e)})),i._imageryProvider=r,r.readyPromise.then((function(){return i._ready=!0,!0}))}))}Object.defineProperties(v.prototype,{ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise}},rectangle:{get:function(){if(!this._ready)throw new s.Z("tileHeight must not be called before the imagery provider is ready.");return this._imageryProvider.rectangle}},tileWidth:{get:function(){if(!this._ready)throw new s.Z("tileWidth must not be called before the imagery provider is ready.");return this._imageryProvider.tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new s.Z("tileHeight must not be called before the imagery provider is ready.");return this._imageryProvider.tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new s.Z("maximumLevel must not be called before the imagery provider is ready.");return this._imageryProvider.maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new s.Z("minimumLevel must not be called before the imagery provider is ready.");return this._imageryProvider.minimumLevel}},tilingScheme:{get:function(){if(!this._ready)throw new s.Z("tilingScheme must not be called before the imagery provider is ready.");return this._imageryProvider.tilingScheme}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new s.Z("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._imageryProvider.tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},credit:{get:function(){if(!this._ready)throw new s.Z("credit must not be called before the imagery provider is ready.");return this._imageryProvider.credit}},hasAlphaChannel:{get:function(){if(!this._ready)throw new s.Z("hasAlphaChannel must not be called before the imagery provider is ready.");return this._imageryProvider.hasAlphaChannel},proxy:{get:function(){}}}}),v.prototype.getTileCredits=function(e,t,i){if(!this._ready)throw new s.Z("getTileCredits must not be called before the imagery provider is ready.");const r=this._imageryProvider.getTileCredits(e,t,i);return(0,o.Z)(r)?this._tileCredits.concat(r):this._tileCredits},v.prototype.requestImage=function(e,t,i,r){if(!this._ready)throw new s.Z("requestImage must not be called before the imagery provider is ready.");return this._imageryProvider.requestImage(e,t,i,r)},v.prototype.pickFeatures=function(e,t,i,r,n){if(!this._ready)throw new s.Z("pickFeatures must not be called before the imagery provider is ready.");return this._imageryProvider.pickFeatures(e,t,i,r,n)},v._endpointCache={};const T=v},14615:(e,t,i)=>{i.d(t,{Z:()=>r});const r=Object.freeze({AERIAL:2,AERIAL_WITH_LABELS:3,ROAD:4})},22151:(e,t,i)=>{i.d(t,{Z:()=>u});var r=i(54485),n=i(20176),o=i(41780),s=i(66962);function a(e){this._total=e,this.usedThisFrame=0,this.stolenFromMeThisFrame=0,this.starvedThisFrame=!1,this.starvedLastFrame=!1}function c(e){if((0,r.Z)(e)&&e.length!==s.Z.NUMBER_OF_JOB_TYPES)throw new n.Z("A budget must be specified for each job type; budgets.length should equal JobType.NUMBER_OF_JOB_TYPES.");const t=new Array(s.Z.NUMBER_OF_JOB_TYPES);t[s.Z.TEXTURE]=new a((0,r.Z)(e)?e[s.Z.TEXTURE]:10),t[s.Z.PROGRAM]=new a((0,r.Z)(e)?e[s.Z.PROGRAM]:10),t[s.Z.BUFFER]=new a((0,r.Z)(e)?e[s.Z.BUFFER]:30);const i=t.length;let o,c=0;for(o=0;o<i;++o)c+=t[o].total;const u=new Array(i);for(o=0;o<i;++o)u[o]=!1;this._totalBudget=c,this._totalUsedThisFrame=0,this._budgets=t,this._executedThisFrame=u}Object.defineProperties(a.prototype,{total:{get:function(){return this._total}}}),c.getTimestamp=o.Z,Object.defineProperties(c.prototype,{totalBudget:{get:function(){return this._totalBudget}}}),c.prototype.disableThisFrame=function(){this._totalUsedThisFrame=this._totalBudget},c.prototype.resetBudgets=function(){const e=this._budgets,t=e.length;for(let i=0;i<t;++i){const t=e[i];t.starvedLastFrame=t.starvedThisFrame,t.starvedThisFrame=!1,t.usedThisFrame=0,t.stolenFromMeThisFrame=0}this._totalUsedThisFrame=0},c.prototype.execute=function(e,t){const i=this._budgets,r=i[t],n=this._executedThisFrame[t];if(this._totalUsedThisFrame>=this._totalBudget&&n)return r.starvedThisFrame=!0,!1;let o;if(r.usedThisFrame+r.stolenFromMeThisFrame>=r.total){const e=i.length;let t;for(t=0;t<e&&(o=i[t],!(o.usedThisFrame+o.stolenFromMeThisFrame<o.total)||o.starvedLastFrame);++t);if(t===e&&n)return!1;n&&(r.starvedThisFrame=!0)}const s=c.getTimestamp();e.execute();const a=c.getTimestamp()-s;return this._totalUsedThisFrame+=a,o?o.stolenFromMeThisFrame+=a:r.usedThisFrame+=a,this._executedThisFrame[t]=!0,!0};const u=c},66962:(e,t,i)=>{i.d(t,{Z:()=>r});const r=Object.freeze({TEXTURE:0,PROGRAM:1,BUFFER:2,NUMBER_OF_JOB_TYPES:3})}}]);