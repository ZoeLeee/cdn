"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6405],{46959:(t,e,i)=>{i.d(e,{Z:()=>n});const n=Object.freeze({OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"})},58466:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(55077),o=i(51138),r=i(88779),s=i(54485),a=i(995),c=i(28075);function u(t){t=(0,r.Z)(t,r.Z.EMPTY_OBJECT),this.material=t.material,this.translucent=(0,r.Z)(t.translucent,!0),this._vertexShaderSource=t.vertexShaderSource,this._fragmentShaderSource=t.fragmentShaderSource,this._renderState=t.renderState,this._closed=(0,r.Z)(t.closed,!1)}Object.defineProperties(u.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}}}),u.prototype.getFragmentShaderSource=function(){const t=[];return this.flat&&t.push("#define FLAT"),this.faceForward&&t.push("#define FACE_FORWARD"),(0,s.Z)(this.material)&&t.push(this.material.shaderSource),t.push(this.fragmentShaderSource),t.join("\n")},u.prototype.isTranslucent=function(){return(0,s.Z)(this.material)&&this.material.isTranslucent()||!(0,s.Z)(this.material)&&this.translucent},u.prototype.getRenderState=function(){const t=this.isTranslucent(),e=(0,n.Z)(this.renderState,!1);return t?(e.depthMask=!1,e.blending=a.Z.ALPHA_BLEND):e.depthMask=!0,e},u.getDefaultRenderState=function(t,e,i){let n={depthTest:{enabled:!0}};return t&&(n.depthMask=!1,n.blending=a.Z.ALPHA_BLEND),e&&(n.cull={enabled:!0,face:c.Z.BACK}),(0,s.Z)(i)&&(n=(0,o.Z)(i,n,!0)),n};const l=u},73558:(t,e,i)=>{i.d(e,{Z:()=>S});var n=i(59015),o=i(93517),r=i(66866),s=i(78505),a=i(88779),c=i(58587),u=i(54485),l=i(20176),h=i(92893),d=i(64729),f=i(96507),_=i(22874),p=i(34152),Z=i(67197),m=i(21514),g=i(85002),y=i(65412),T=i(67561),b=i(9381),x=i(15411),C=i(20709);function E(t){if(t=(0,a.Z)(t,a.Z.EMPTY_OBJECT),!(0,u.Z)(t.url))throw new l.Z("options.url is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=void 0,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0;const e=Z.Z.createIfNeeded(t.url);e.appendForwardSlash(),(0,u.Z)(t.token)&&e.setQueryParameters({token:t.token}),this._resource=e,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=(0,a.Z)(t.tileWidth,256),this._tileHeight=(0,a.Z)(t.tileHeight,256),this._maximumLevel=t.maximumLevel,this._tilingScheme=(0,a.Z)(t.tilingScheme,new f.Z({ellipsoid:t.ellipsoid})),this._useTiles=(0,a.Z)(t.usePreCachedTilesIfAvailable,!0),this._rectangle=(0,a.Z)(t.rectangle,this._tilingScheme.rectangle),this._layers=t.layers;let i=t.credit;"string"==typeof i&&(i=new s.Z(i)),this._credit=i,this.enablePickFeatures=(0,a.Z)(t.enablePickFeatures,!0),this._errorEvent=new h.Z,this._ready=!1,this._readyPromise=(0,c.Z)();const r=this;let d;function _(){r._resource.getDerivedResource({queryParameters:{f:"json"}}).fetchJsonp().then((function(e){!function(e){const i=e.tileInfo;if((0,u.Z)(i)){if(r._tileWidth=i.rows,r._tileHeight=i.cols,102100===i.spatialReference.wkid||102113===i.spatialReference.wkid)r._tilingScheme=new T.Z({ellipsoid:t.ellipsoid});else{if(4326!==e.tileInfo.spatialReference.wkid){const t=`Tile spatial reference WKID ${e.tileInfo.spatialReference.wkid} is not supported.`;return d=g.Z.handleError(d,r,r._errorEvent,t,void 0,void 0,void 0,_),void(d.retry||r._readyPromise.reject(new m.Z(t)))}r._tilingScheme=new f.Z({ellipsoid:t.ellipsoid})}if(r._maximumLevel=e.tileInfo.lods.length-1,(0,u.Z)(e.fullExtent)){if((0,u.Z)(e.fullExtent.spatialReference)&&(0,u.Z)(e.fullExtent.spatialReference.wkid))if(102100===e.fullExtent.spatialReference.wkid||102113===e.fullExtent.spatialReference.wkid){const t=new y.Z,i=e.fullExtent,n=t.unproject(new o.Z(Math.max(i.xmin,-r._tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.max(i.ymin,-r._tilingScheme.ellipsoid.maximumRadius*Math.PI),0)),s=t.unproject(new o.Z(Math.min(i.xmax,r._tilingScheme.ellipsoid.maximumRadius*Math.PI),Math.min(i.ymax,r._tilingScheme.ellipsoid.maximumRadius*Math.PI),0));r._rectangle=new p.Z(n.longitude,n.latitude,s.longitude,s.latitude)}else{if(4326!==e.fullExtent.spatialReference.wkid){const t=`fullExtent.spatialReference WKID ${e.fullExtent.spatialReference.wkid} is not supported.`;return d=g.Z.handleError(d,r,r._errorEvent,t,void 0,void 0,void 0,_),void(d.retry||r._readyPromise.reject(new m.Z(t)))}r._rectangle=p.Z.fromDegrees(e.fullExtent.xmin,e.fullExtent.ymin,e.fullExtent.xmax,e.fullExtent.ymax)}}else r._rectangle=r._tilingScheme.rectangle;(0,u.Z)(r._tileDiscardPolicy)||(r._tileDiscardPolicy=new b.Z({missingImageUrl:w(r,0,0,r._maximumLevel).url,pixelsToCheck:[new n.Z(0,0),new n.Z(200,20),new n.Z(20,200),new n.Z(80,110),new n.Z(160,130)],disableCheckIfAllPixelsAreTransparent:!0})),r._useTiles=!0}else r._useTiles=!1;(0,u.Z)(e.copyrightText)&&e.copyrightText.length>0&&(r._credit=new s.Z(e.copyrightText)),r._ready=!0,r._readyPromise.resolve(!0),g.Z.handleSuccess(d)}(e)})).catch((function(t){!function(t){const e=`An error occurred while accessing ${r._resource.url}.`;d=g.Z.handleError(d,r,r._errorEvent,e,void 0,void 0,void 0,_),r._readyPromise.reject(new m.Z(e))}()}))}this._useTiles?_():(this._ready=!0,this._readyPromise.resolve(!0))}function w(t,e,i,n,o){let r;if(t._useTiles)r=t._resource.getDerivedResource({url:`tile/${n}/${i}/${e}`,request:o});else{const s=t._tilingScheme.tileXYToNativeRectangle(e,i,n),a={bbox:`${s.west},${s.south},${s.east},${s.north}`,size:`${t._tileWidth},${t._tileHeight}`,format:"png32",transparent:!0,f:"image"};t._tilingScheme.projection instanceof d.Z?(a.bboxSR=4326,a.imageSR=4326):(a.bboxSR=3857,a.imageSR=3857),t.layers&&(a.layers=`show:${t.layers}`),r=t._resource.getDerivedResource({url:"export",request:o,queryParameters:a})}return r}Object.defineProperties(E.prototype,{url:{get:function(){return this._resource._url}},token:{get:function(){return this._resource.queryParameters.token}},proxy:{get:function(){return this._resource.proxy}},tileWidth:{get:function(){if(!this._ready)throw new l.Z("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new l.Z("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new l.Z("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new l.Z("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new l.Z("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new l.Z("rectangle must not be called before the imagery provider is ready.");return this._rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new l.Z("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},usingPrecachedTiles:{get:function(){return this._useTiles}},hasAlphaChannel:{get:function(){return!0}},layers:{get:function(){return this._layers}}}),E.prototype.getTileCredits=function(t,e,i){},E.prototype.requestImage=function(t,e,i,n){if(!this._ready)throw new l.Z("requestImage must not be called before the imagery provider is ready.");return C.Z.loadImage(this,w(this,t,e,i,n))},E.prototype.pickFeatures=function(t,e,i,n,s){if(!this._ready)throw new l.Z("pickFeatures must not be called before the imagery provider is ready.");if(!this.enablePickFeatures)return;const a=this._tilingScheme.tileXYToNativeRectangle(t,e,i);let c,h,f;if(this._tilingScheme.projection instanceof d.Z)c=_.Z.toDegrees(n),h=_.Z.toDegrees(s),f="4326";else{const t=this._tilingScheme.projection.project(new r.Z(n,s,0));c=t.x,h=t.y,f="3857"}let p="visible";(0,u.Z)(this._layers)&&(p+=`:${this._layers}`);const Z={f:"json",tolerance:2,geometryType:"esriGeometryPoint",geometry:`${c},${h}`,mapExtent:`${a.west},${a.south},${a.east},${a.north}`,imageDisplay:`${this._tileWidth},${this._tileHeight},96`,sr:f,layers:p};return this._resource.getDerivedResource({url:"identify",queryParameters:Z}).fetchJson().then((function(t){const e=[],i=t.results;if(!(0,u.Z)(i))return e;for(let t=0;t<i.length;++t){const n=i[t],s=new x.Z;if(s.data=n,s.name=n.value,s.properties=n.attributes,s.configureDescriptionFromProperties(n.attributes),"esriGeometryPoint"===n.geometryType&&n.geometry){const t=n.geometry.spatialReference&&n.geometry.spatialReference.wkid?n.geometry.spatialReference.wkid:4326;if(4326===t||4283===t)s.position=r.Z.fromDegrees(n.geometry.x,n.geometry.y,n.geometry.z);else if(102100===t||900913===t||3857===t){const t=new y.Z;s.position=t.unproject(new o.Z(n.geometry.x,n.geometry.y,n.geometry.z))}}e.push(s)}return e}))};const S=E},91257:(t,e,i)=>{i.d(e,{Z:()=>d});var n=i(59015),o=i(93517),r=i(90868),s=i(17497),a=i(20176),c=i(40734),u=i(39109),l=i(71118);const h={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4",getMathType:function(t){switch(t){case h.SCALAR:return Number;case h.VEC2:return n.Z;case h.VEC3:return o.Z;case h.VEC4:return r.Z;case h.MAT2:return c.Z;case h.MAT3:return u.Z;case h.MAT4:return l.Z;default:throw new a.Z("attributeType is not a valid value.")}},getNumberOfComponents:function(t){switch(t){case h.SCALAR:return 1;case h.VEC2:return 2;case h.VEC3:return 3;case h.VEC4:case h.MAT2:return 4;case h.MAT3:return 9;case h.MAT4:return 16;default:throw new a.Z("attributeType is not a valid value.")}},getAttributeLocationCount:function(t){switch(t){case h.SCALAR:case h.VEC2:case h.VEC3:case h.VEC4:return 1;case h.MAT2:return 2;case h.MAT3:return 3;case h.MAT4:return 4;default:throw new a.Z("attributeType is not a valid value.")}},getGlslType:function(t){switch(s.Z.typeOf.string("attributeType",t),t){case h.SCALAR:return"float";case h.VEC2:return"vec2";case h.VEC3:return"vec3";case h.VEC4:return"vec4";case h.MAT2:return"mat2";case h.MAT3:return"mat3";case h.MAT4:return"mat4";default:throw new a.Z("attributeType is not a valid value.")}}},d=Object.freeze(h)},42315:(t,e,i)=>{i.d(e,{Z:()=>p});var n=i(59015),o=i(6785),r=i(54485),s=i(90332),a=i(74366),c=i(37791),u=i(27400);function l(){this._uniformMap=void 0,this._command=void 0,this._colorTexture=void 0,this._depthTexture=void 0,this._ready=!1,this._name="czm_autoexposure",this._logDepthChanged=void 0,this._useLogDepth=void 0,this._framebuffers=void 0,this._previousLuminance=new c.Z,this._commands=void 0,this._clearCommand=void 0,this._minMaxLuminance=new n.Z,this.enabled=!0,this._enabled=!0,this.minimumLuminance=.1,this.maximumLuminance=10}function h(t){const e=t._framebuffers;if(!(0,r.Z)(e))return;const i=e.length;for(let t=0;t<i;++t)e[t].destroy();t._framebuffers=void 0,t._previousLuminance.destroy(),t._previousLuminance=void 0}function d(t){const e=t._commands;if(!(0,r.Z)(e))return;const i=e.length;for(let t=0;t<i;++t)e[t].shaderProgram.destroy();t._commands=void 0}function f(t,e){let i;if(0===e)i={colorTexture:function(){return t._colorTexture},colorTextureDimensions:function(){return t._colorTexture.dimensions}};else{const n=t._framebuffers[e-1].getColorTexture(0);i={colorTexture:function(){return n},colorTextureDimensions:function(){return n.dimensions}}}return i.minMaxLuminance=function(){return t._minMaxLuminance},i.previousLuminance=function(){return t._previousLuminance.getColorTexture(0)},i}function _(t,e){let i="uniform sampler2D colorTexture; \nvarying vec2 v_textureCoordinates; \nfloat sampleTexture(vec2 offset) { \n";return i+=0===t?"    vec4 color = texture2D(colorTexture, v_textureCoordinates + offset); \n    return czm_luminance(color.rgb); \n":"    return texture2D(colorTexture, v_textureCoordinates + offset).r; \n",i+="}\n\n",i+="uniform vec2 colorTextureDimensions; \nuniform vec2 minMaxLuminance; \nuniform sampler2D previousLuminance; \nvoid main() { \n    float color = 0.0; \n    float xStep = 1.0 / colorTextureDimensions.x; \n    float yStep = 1.0 / colorTextureDimensions.y; \n    int count = 0; \n    for (int i = 0; i < 3; ++i) { \n        for (int j = 0; j < 3; ++j) { \n            vec2 offset; \n            offset.x = -xStep + float(i) * xStep; \n            offset.y = -yStep + float(j) * yStep; \n            if (offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0) { \n                continue; \n            } \n            color += sampleTexture(offset); \n            ++count; \n        } \n    } \n    if (count > 0) { \n        color /= float(count); \n    } \n",t===e-1&&(i+="    float previous = texture2D(previousLuminance, vec2(0.5)).r; \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n    color = previous + (color - previous) / (60.0 * 1.5); \n    color = clamp(color, minMaxLuminance.x, minMaxLuminance.y); \n"),i+="    gl_FragColor = vec4(color); \n} \n",i}Object.defineProperties(l.prototype,{ready:{get:function(){return this._ready}},name:{get:function(){return this._name}},outputTexture:{get:function(){const t=this._framebuffers;if((0,r.Z)(t))return t[t.length-1].getColorTexture(0)}}}),l.prototype.clear=function(t){const e=this._framebuffers;if(!(0,r.Z)(e))return;let i=this._clearCommand;(0,r.Z)(i)||(i=this._clearCommand=new a.Z({color:new o.Z(0,0,0,0),framebuffer:void 0}));const n=e.length;for(let o=0;o<n;++o)e[o].clear(t,i)},l.prototype.update=function(t){const e=t.drawingBufferWidth,i=t.drawingBufferHeight;e===this._width&&i===this._height||(this._width=e,this._height=i,function(t,e){h(t);let i=t._width,n=t._height;const o=e.halfFloatingPointTexture?u.Z.HALF_FLOAT:u.Z.FLOAT,r=Math.ceil(Math.log(Math.max(i,n))/Math.log(3)),s=new Array(r);for(let t=0;t<r;++t)i=Math.max(Math.ceil(i/3),1),n=Math.max(Math.ceil(n/3),1),s[t]=new c.Z,s[t].update(e,i,n,1,o);const a=s[r-1].getColorTexture(0);t._previousLuminance.update(e,a.width,a.height,1,o),t._framebuffers=s}(this,t),function(t,e){d(t);const i=t._framebuffers,n=i.length,o=new Array(n);for(let r=0;r<n;++r)o[r]=e.createViewportQuadCommand(_(r,n),{framebuffer:i[r].framebuffer,uniformMap:f(t,r)});t._commands=o}(this,t),this._ready||(this._ready=!0)),this._minMaxLuminance.x=this.minimumLuminance,this._minMaxLuminance.y=this.maximumLuminance;const n=this._framebuffers,o=n[n.length-1];n[n.length-1]=this._previousLuminance,this._commands[this._commands.length-1].framebuffer=this._previousLuminance.framebuffer,this._previousLuminance=o},l.prototype.execute=function(t,e){this._colorTexture=e;const i=this._commands;if(!(0,r.Z)(i))return;const n=i.length;for(let e=0;e<n;++e)i[e].execute(t)},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){return h(this),d(this),(0,s.Z)(this)};const p=l},81737:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(17497),o=i(22874),r=i(39109),s=i(71118);const a={X:0,Y:1,Z:2};a.Y_UP_TO_Z_UP=s.Z.fromRotationTranslation(r.Z.fromRotationX(o.Z.PI_OVER_TWO)),a.Z_UP_TO_Y_UP=s.Z.fromRotationTranslation(r.Z.fromRotationX(-o.Z.PI_OVER_TWO)),a.X_UP_TO_Z_UP=s.Z.fromRotationTranslation(r.Z.fromRotationY(-o.Z.PI_OVER_TWO)),a.Z_UP_TO_X_UP=s.Z.fromRotationTranslation(r.Z.fromRotationY(o.Z.PI_OVER_TWO)),a.X_UP_TO_Y_UP=s.Z.fromRotationTranslation(r.Z.fromRotationZ(o.Z.PI_OVER_TWO)),a.Y_UP_TO_X_UP=s.Z.fromRotationTranslation(r.Z.fromRotationZ(-o.Z.PI_OVER_TWO)),a.fromName=function(t){return n.Z.typeOf.string("name",t),a[t]};const c=Object.freeze(a)},71743:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(17497),o=i(88779),r=i(34971),s=i(7219),a=i(21514);const c={};c._deprecationWarning=r.Z;const u=Uint32Array.BYTES_PER_ELEMENT;c.parse=function(t,e){const i=(0,o.Z)(e,0);n.Z.defined("arrayBuffer",t),e=i;const r=new Uint8Array(t),l=new DataView(t);e+=u;const h=l.getUint32(e,!0);if(1!==h)throw new a.Z(`Only Batched 3D Model version 1 is supported.  Version ${h} is not.`);e+=u;const d=l.getUint32(e,!0);e+=u;let f=l.getUint32(e,!0);e+=u;let _=l.getUint32(e,!0);e+=u;let p=l.getUint32(e,!0);e+=u;let Z,m,g=l.getUint32(e,!0);e+=u,p>=570425344?(e-=2*u,Z=f,p=_,g=0,f=0,_=0,c._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")):g>=570425344&&(e-=u,Z=p,p=f,g=_,f=0,_=0,c._deprecationWarning("b3dm-legacy-header","This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/main/specification/TileFormats/Batched3DModel.")),0===f?m={BATCH_LENGTH:(0,o.Z)(Z,0)}:(m=(0,s.Z)(r,e,f),e+=f);const y=new Uint8Array(t,e,_);let T,b;e+=_,p>0&&(T=(0,s.Z)(r,e,p),e+=p,g>0&&(b=new Uint8Array(t,e,g),b=new Uint8Array(b),e+=g));const x=i+d-e;if(0===x)throw new a.Z("glTF byte length must be greater than 0.");let C;return e%4==0?C=new Uint8Array(t,e,x):(c._deprecationWarning("b3dm-glb-unaligned","The embedded glb is not aligned to a 4-byte boundary."),C=new Uint8Array(r.subarray(e,e+x))),{batchLength:Z,featureTableJson:m,featureTableBinary:y,batchTableJson:T,batchTableBinary:b,gltf:C}};const l=c},98570:(t,e,i)=>{i.d(e,{Z:()=>C});var n=i(59015),o=i(93517),r=i(90868),s=i(51138),a=i(44990),c=i(54485),u=i(90332),l=i(20176),h=i(91166),d=i(85834),f=i(27400),_=i(28696),p=i(47334);function Z(t,e,i){if(!(0,c.Z)(t))throw new l.Z("context is required");if(!(0,c.Z)(e))throw new l.Z("attributes is required");if(!(0,c.Z)(i))throw new l.Z("numberOfInstances is required");if(this._attributes=e,this._numberOfInstances=i,0===e.length)return;const o=function(t){let e=!1;const i=t.length;for(let n=0;n<i;++n)if(t[n].componentDatatype!==a.Z.UNSIGNED_BYTE){e=!0;break}return e?f.Z.FLOAT:f.Z.UNSIGNED_BYTE}(e),s=t.floatingPointTexture,u=o===f.Z.FLOAT&&!s,h=function(t,e){const i=new Array(t.length);let n=0;const o=t.length;for(let r=0;r<o;++r){const o=t[r].componentDatatype;i[r]=n,o!==a.Z.UNSIGNED_BYTE&&e?n+=4:++n}return i}(e,u),_=function(t,e,i){const n=t.length,o=t[n-1],r=e[n-1];if(r.componentDatatype!==a.Z.UNSIGNED_BYTE&&i)return o+4;return o+1}(h,e,u),p=Math.floor(d.Z.maximumTextureSize/_),Z=Math.min(i,p),m=_*Z,g=Math.ceil(i/Z),y=1/m,T=.5*y,b=1/g,x=.5*b;this._textureDimensions=new n.Z(m,g),this._textureStep=new r.Z(y,T,b,x),this._pixelDatatype=u?f.Z.UNSIGNED_BYTE:o,this._packFloats=u,this._offsets=h,this._stride=_,this._texture=void 0;const C=4*m*g;this._batchValues=o!==f.Z.FLOAT||u?new Uint8Array(C):new Float32Array(C),this._batchValuesDirty=!1}function m(t,e){const i=t[e].componentsPerAttribute;return 2===i?n.Z:3===i?o.Z:4===i?r.Z:Number}Object.defineProperties(Z.prototype,{attributes:{get:function(){return this._attributes}},numberOfInstances:{get:function(){return this._numberOfInstances}}});const g=new r.Z;const y=new r.Z;Z.prototype.getBatchedAttribute=function(t,e,i){if(t<0||t>=this._numberOfInstances)throw new l.Z("instanceIndex is out of range.");if(e<0||e>=this._attributes.length)throw new l.Z("attributeIndex is out of range");const n=this._attributes,o=this._offsets[e],s=4*this._stride*t+4*o;let a;a=this._packFloats&&n[e].componentDatatype!==f.Z.UNSIGNED_BYTE?function(t,e,i){let n=r.Z.unpack(t,e,g);const o=r.Z.unpackFloat(n);n=r.Z.unpack(t,e+4,g);const s=r.Z.unpackFloat(n);n=r.Z.unpack(t,e+8,g);const a=r.Z.unpackFloat(n);n=r.Z.unpack(t,e+12,g);const c=r.Z.unpackFloat(n);return r.Z.fromElements(o,s,a,c,i)}(this._batchValues,s,y):r.Z.unpack(this._batchValues,s,y);const u=m(n,e);return(0,c.Z)(u.fromCartesian4)?u.fromCartesian4(a,i):(0,c.Z)(u.clone)?u.clone(a,i):a.x};const T=[void 0,void 0,new n.Z,new o.Z,new r.Z],b=new r.Z;function x(t,e){const i=t._attributes[e],n=i.componentsPerAttribute,o=i.functionName,r=function(t){return 1===t?"float":`vec${t}`}(n),s=function(t){return 1===t?".x":2===t?".xy":3===t?".xyz":""}(n);let c=`${r} ${o}(float batchId) \n{ \n    vec2 st = computeSt(batchId); \n    st.x += batchTextureStep.x * float(${t._offsets[e]}); \n`;return t._packFloats&&i.componentDatatype!==f.Z.UNSIGNED_BYTE?c+="vec4 textureValue; \ntextureValue.x = czm_unpackFloat(texture2D(batchTexture, st)); \ntextureValue.y = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x, 0.0))); \ntextureValue.z = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x * 2.0, 0.0))); \ntextureValue.w = czm_unpackFloat(texture2D(batchTexture, st + vec2(batchTextureStep.x * 3.0, 0.0))); \n":c+="    vec4 textureValue = texture2D(batchTexture, st); \n",c+=`    ${r} value = textureValue${s}; \n`,t._pixelDatatype!==f.Z.UNSIGNED_BYTE||i.componentDatatype!==a.Z.UNSIGNED_BYTE||i.normalize?t._pixelDatatype===f.Z.FLOAT&&i.componentDatatype===a.Z.UNSIGNED_BYTE&&i.normalize&&(c+="value /= 255.0; \n"):c+="value *= 255.0; \n",c+="    return value; \n} \n",c}Z.prototype.setBatchedAttribute=function(t,e,i){if(t<0||t>=this._numberOfInstances)throw new l.Z("instanceIndex is out of range.");if(e<0||e>=this._attributes.length)throw new l.Z("attributeIndex is out of range");if(!(0,c.Z)(i))throw new l.Z("value is required.");const n=this._attributes,o=T[n[e].componentsPerAttribute],s=this.getBatchedAttribute(t,e,o),a=m(this._attributes,e);if((0,c.Z)(a.equals)?a.equals(s,i):s===i)return;const u=b;u.x=(0,c.Z)(i.x)?i.x:i,u.y=(0,c.Z)(i.y)?i.y:0,u.z=(0,c.Z)(i.z)?i.z:0,u.w=(0,c.Z)(i.w)?i.w:0;const h=this._offsets[e],d=4*this._stride*t+4*h;this._packFloats&&n[e].componentDatatype!==f.Z.UNSIGNED_BYTE?function(t,e,i){let n=r.Z.packFloat(t.x,g);r.Z.pack(n,e,i),n=r.Z.packFloat(t.y,n),r.Z.pack(n,e,i+4),n=r.Z.packFloat(t.z,n),r.Z.pack(n,e,i+8),n=r.Z.packFloat(t.w,n),r.Z.pack(n,e,i+12)}(u,this._batchValues,d):r.Z.pack(u,this._batchValues,d),this._batchValuesDirty=!0},Z.prototype.update=function(t){(0,c.Z)(this._texture)&&!this._batchValuesDirty||0===this._attributes.length||(this._batchValuesDirty=!1,(0,c.Z)(this._texture)||function(t,e){const i=t._textureDimensions;t._texture=new p.Z({context:e,pixelFormat:h.Z.RGBA,pixelDatatype:t._pixelDatatype,width:i.x,height:i.y,sampler:_.Z.NEAREST,flipY:!1})}(this,t.context),function(t){const e=t._textureDimensions;t._texture.copyFrom({source:{width:e.x,height:e.y,arrayBufferView:t._batchValues}})}(this))},Z.prototype.getUniformMapCallback=function(){const t=this;return function(e){if(0===t._attributes.length)return e;const i={batchTexture:function(){return t._texture},batchTextureDimensions:function(){return t._textureDimensions},batchTextureStep:function(){return t._textureStep}};return(0,s.Z)(e,i)}},Z.prototype.getVertexShaderCallback=function(){const t=this._attributes;if(0===t.length)return function(t){return t};let e="uniform highp sampler2D batchTexture; \n";e+=`${function(t){const e=t._stride;return 1===t._textureDimensions.y?`uniform vec4 batchTextureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = batchTextureStep.x; \n    float centerX = batchTextureStep.y; \n    float numberOfAttributes = float(${e}); \n    return vec2(centerX + (batchId * numberOfAttributes * stepX), 0.5); \n} \n`:`uniform vec4 batchTextureStep; \nuniform vec2 batchTextureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = batchTextureStep.x; \n    float centerX = batchTextureStep.y; \n    float stepY = batchTextureStep.z; \n    float centerY = batchTextureStep.w; \n    float numberOfAttributes = float(${e}); \n    float xId = mod(batchId * numberOfAttributes, batchTextureDimensions.x); \n    float yId = floor(batchId * numberOfAttributes / batchTextureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n`}(this)}\n`;const i=t.length;for(let t=0;t<i;++t)e+=x(this,t);return function(t){const i=t.indexOf("void main"),n=t.substring(0,i),o=t.substring(i);return`${n}\n${e}\n${o}`}},Z.prototype.isDestroyed=function(){return!1},Z.prototype.destroy=function(){return this._texture=this._texture&&this._texture.destroy(),(0,u.Z)(this)};const C=Z},44674:(t,e,i)=>{i.d(e,{Z:()=>_});var n=i(65730),o=i(91257),r=i(17497),s=i(55077),a=i(51138),c=i(44990),u=i(54485),l=i(88779),h=i(20176),d=i(52314),f=i(21514);function _(t){this._classes=void 0,this._classIds=void 0,this._classIndexes=void 0,this._parentCounts=void 0,this._parentIndexes=void 0,this._parentIds=void 0,r.Z.typeOf.object("options.extension",t.extension),function(t,e,i){let r,s,h;const f=e.instancesLength,_=e.classes;let Z,m=e.classIds,g=e.parentCounts,y=e.parentIds,T=f;(0,u.Z)(m.byteOffset)&&(m.componentType=(0,l.Z)(m.componentType,c.Z.UNSIGNED_SHORT),m.type=o.Z.SCALAR,h=(0,d.Z)(m),m=h.createArrayBufferView(i.buffer,i.byteOffset+m.byteOffset,f));if((0,u.Z)(g))for((0,u.Z)(g.byteOffset)&&(g.componentType=(0,l.Z)(g.componentType,c.Z.UNSIGNED_SHORT),g.type=o.Z.SCALAR,h=(0,d.Z)(g),g=h.createArrayBufferView(i.buffer,i.byteOffset+g.byteOffset,f)),Z=new Uint16Array(f),T=0,r=0;r<f;++r)Z[r]=T,T+=g[r];(0,u.Z)(y)&&(0,u.Z)(y.byteOffset)&&(y.componentType=(0,l.Z)(y.componentType,c.Z.UNSIGNED_SHORT),y.type=o.Z.SCALAR,h=(0,d.Z)(y),y=h.createArrayBufferView(i.buffer,i.byteOffset+y.byteOffset,T));const b=_.length;for(r=0;r<b;++r){const t=_[r].length,e=_[r].instances,n=p(t,e,i);_[r].instances=(0,a.Z)(n,e)}const x=(0,n.Z)(new Array(b),0),C=new Uint16Array(f);for(r=0;r<f;++r)s=m[r],C[r]=x[s],++x[s];t._classes=_,t._classIds=m,t._classIndexes=C,t._parentCounts=g,t._parentIndexes=Z,t._parentIds=y}(this,t.extension,t.binaryBody),function(t){const e=Z;e.length=0;const i=t._classIds.length;for(let n=0;n<i;++n)m(t,n,e)}(this)}function p(t,e,i){let n;for(const o in e)if(e.hasOwnProperty(o)){const r=e[o],s=r.byteOffset;if((0,u.Z)(s)){const e=r.componentType,a=r.type;if(!(0,u.Z)(e))throw new f.Z("componentType is required.");if(!(0,u.Z)(a))throw new f.Z("type is required.");if(!(0,u.Z)(i))throw new f.Z(`Property ${o} requires a batch table binary.`);const c=(0,d.Z)(r),l=c.componentsPerAttribute,h=c.classType,_=c.createArrayBufferView(i.buffer,i.byteOffset+s,t);(0,u.Z)(n)||(n={}),n[o]={typedArray:_,componentCount:l,type:h}}}return n}const Z=[];function m(t,e,i){const n=t._parentCounts,o=t._parentIds,r=t._parentIndexes,s=t._classIds.length;if(!(0,u.Z)(o))return;if(e>=s)throw new h.Z(`Parent index ${e} exceeds the total number of instances: ${s}`);if(i.indexOf(e)>-1)throw new h.Z("Circular dependency detected in the batch table hierarchy.");i.push(e);const a=(0,u.Z)(n)?n[e]:1,c=(0,u.Z)(n)?r[e]:e;for(let n=0;n<a;++n){const r=o[c+n];r!==e&&m(t,r,i)}i.pop(e)}const g=[],y=[];let T=0;function b(t,e,i){const n=t._parentCounts,o=t._parentIds;return(0,u.Z)(o)?(0,u.Z)(n)?function(t,e,i){const n=t._classIds,o=t._parentCounts,r=t._parentIds,s=t._parentIndexes,a=n.length,c=g;c.length=Math.max(c.length,a);const l=++T,h=y;for(h.length=0,h.push(e);h.length>0;){if(c[e=h.pop()]===l)continue;c[e]=l;const n=i(t,e);if((0,u.Z)(n))return n;const a=o[e],d=s[e];for(let t=0;t<a;++t){const i=r[d+t];i!==e&&h.push(i)}}}(t,e,i):function(t,e,i){let n=!0;for(;n;){const o=i(t,e);if((0,u.Z)(o))return o;const r=t._parentIds[e];n=r!==e,e=r}}(t,e,i):i(t,e)}_.prototype.hasProperty=function(t,e){const i=b(this,t,(function(t,i){const n=t._classIds[i],o=t._classes[n].instances;if((0,u.Z)(o[e]))return!0}));return(0,u.Z)(i)},_.prototype.propertyExists=function(t){const e=this._classes,i=e.length;for(let n=0;n<i;++n){const i=e[n].instances;if((0,u.Z)(i[t]))return!0}return!1},_.prototype.getPropertyIds=function(t,e){return(e=(0,u.Z)(e)?e:[]).length=0,b(this,t,(function(t,i){const n=t._classIds[i],o=t._classes[n].instances;for(const t in o)o.hasOwnProperty(t)&&-1===e.indexOf(t)&&e.push(t)})),e},_.prototype.getProperty=function(t,e){return b(this,t,(function(t,i){const n=t._classIds[i],o=t._classes[n],r=t._classIndexes[i],a=o.instances[e];if((0,u.Z)(a))return(0,u.Z)(a.typedArray)?function(t,e){const i=t.typedArray,n=t.componentCount;if(1===n)return i[e];return t.type.unpack(i,e*n)}(a,r):(0,s.Z)(a[r],!0)}))},_.prototype.setProperty=function(t,e,i){const n=b(this,t,(function(n,o){const r=n._classIds[o],a=n._classes[r],c=n._classIndexes[o],l=a.instances[e];if((0,u.Z)(l)){if(o!==t)throw new h.Z(`Inherited property "${e}" is read-only.`);return(0,u.Z)(l.typedArray)?function(t,e,i){const n=t.typedArray,o=t.componentCount;1===o?n[e]=i:t.type.pack(i,n,e*o)}(l,c,i):l[c]=(0,s.Z)(i,!0),!0}}));return(0,u.Z)(n)},_.prototype.isClass=function(t,e){const i=b(this,t,(function(t,i){const n=t._classIds[i];if(t._classes[n].name===e)return!0}));return(0,u.Z)(i)},_.prototype.getClassName=function(t){const e=this._classIds[t];return this._classes[e].name}},66973:(t,e,i)=>{i.d(e,{Z:()=>Z});var n=i(65730),o=i(59015),r=i(90868),s=i(17497),a=i(6785),c=i(54485),u=i(90332),l=i(20176),h=i(91166),d=i(85834),f=i(27400),_=i(28696),p=i(47334);function Z(t){s.Z.typeOf.number("options.featuresLength",t.featuresLength),s.Z.typeOf.object("options.owner",t.owner);const e=t.featuresLength;let i,n;if(this._showAlphaProperties=void 0,this._batchValues=void 0,this._batchValuesDirty=!1,this._batchTexture=void 0,this._defaultTexture=void 0,this._pickTexture=void 0,this._pickIds=[],e>0){const t=Math.min(e,d.Z.maximumTextureSize),s=Math.ceil(e/d.Z.maximumTextureSize),a=1/t,c=.5*a,u=1/s,l=.5*u;i=new o.Z(t,s),n=new r.Z(a,c,u,l)}this._translucentFeaturesLength=0,this._featuresLength=e,this._textureDimensions=i,this._textureStep=n,this._owner=t.owner,this._statistics=t.statistics,this._colorChangedCallback=t.colorChangedCallback}function m(t){const e=t._textureDimensions;return e.x*e.y*4}function g(t){if(!(0,c.Z)(t._batchValues)){const e=m(t),i=new Uint8Array(e);(0,n.Z)(i,255),t._batchValues=i}return t._batchValues}function y(t){if(!(0,c.Z)(t._showAlphaProperties)){const e=2*t._featuresLength,i=new Uint8Array(e);(0,n.Z)(i,255),t._showAlphaProperties=i}return t._showAlphaProperties}function T(t,e){if(!(0,c.Z)(t)||t<0||t>=e)throw new l.Z(`batchId is required and between zero and featuresLength - 1 (${e}`-NaN)}Object.defineProperties(Z.prototype,{translucentFeaturesLength:{get:function(){return this._translucentFeaturesLength}},memorySizeInBytes:{get:function(){let t=0;return(0,c.Z)(this._pickTexture)&&(t+=this._pickTexture.sizeInBytes),(0,c.Z)(this._batchTexture)&&(t+=this._batchTexture.sizeInBytes),t}},textureDimensions:{get:function(){return this._textureDimensions}},textureStep:{get:function(){return this._textureStep}},batchTexture:{get:function(){return this._batchTexture}},defaultTexture:{get:function(){return this._defaultTexture}},pickTexture:{get:function(){return this._pickTexture}}}),Z.DEFAULT_COLOR_VALUE=a.Z.WHITE,Z.DEFAULT_SHOW_VALUE=!0,Z.prototype.setShow=function(t,e){if(T(t,this._featuresLength),s.Z.typeOf.bool("show",e),e&&!(0,c.Z)(this._showAlphaProperties))return;const i=y(this),n=2*t,o=e?255:0;if(i[n]!==o){i[n]=o;g(this)[4*t+3]=e?i[n+1]:0,this._batchValuesDirty=!0}},Z.prototype.setAllShow=function(t){s.Z.typeOf.bool("show",t);const e=this._featuresLength;for(let i=0;i<e;++i)this.setShow(i,t)},Z.prototype.getShow=function(t){if(T(t,this._featuresLength),!(0,c.Z)(this._showAlphaProperties))return!0;const e=2*t;return 255===this._showAlphaProperties[e]};const b=new Array(4);function x(t,e,i){const n=t._textureDimensions;return new p.Z({context:e,pixelFormat:h.Z.RGBA,pixelDatatype:f.Z.UNSIGNED_BYTE,source:{width:n.x,height:n.y,arrayBufferView:i},flipY:!1,sampler:_.Z.NEAREST})}Z.prototype.setColor=function(t,e){if(T(t,this._featuresLength),s.Z.typeOf.object("color",e),a.Z.equals(e,Z.DEFAULT_COLOR_VALUE)&&!(0,c.Z)(this._batchValues))return;const i=e.toBytes(b),n=i[3],o=g(this),r=4*t,u=y(this),l=2*t;if(o[r]!==i[0]||o[r+1]!==i[1]||o[r+2]!==i[2]||u[l+1]!==n){o[r]=i[0],o[r+1]=i[1],o[r+2]=i[2];const s=255!==u[l+1],a=0!==u[l];o[r+3]=a?n:0,u[l+1]=n;const h=255!==n;h&&!s?++this._translucentFeaturesLength:!h&&s&&--this._translucentFeaturesLength,this._batchValuesDirty=!0,(0,c.Z)(this._colorChangedCallback)&&this._colorChangedCallback(t,e)}},Z.prototype.setAllColor=function(t){s.Z.typeOf.object("color",t);const e=this._featuresLength;for(let i=0;i<e;++i)this.setColor(i,t)},Z.prototype.getColor=function(t,e){if(T(t,this._featuresLength),s.Z.typeOf.object("result",e),!(0,c.Z)(this._batchValues))return a.Z.clone(Z.DEFAULT_COLOR_VALUE,e);const i=this._batchValues,n=4*t,o=this._showAlphaProperties,r=2*t;return a.Z.fromBytes(i[n],i[n+1],i[n+2],o[r+1],e)},Z.prototype.getPickColor=function(t){return T(t,this._featuresLength),this._pickIds[t]},Z.prototype.update=function(t,e){const i=e.context;this._defaultTexture=i.defaultTexture;const n=e.passes;(n.pick||n.postProcess)&&function(t,e){const i=t._featuresLength;if(!(0,c.Z)(t._pickTexture)&&i>0){const n=t._pickIds,o=m(t),r=new Uint8Array(o),s=t._owner,u=t._statistics;for(let t=0;t<i;++t){const i=e.createPickId(s.getFeature(t));n.push(i);const o=i.color,c=4*t;r[c]=a.Z.floatToByte(o.red),r[c+1]=a.Z.floatToByte(o.green),r[c+2]=a.Z.floatToByte(o.blue),r[c+3]=a.Z.floatToByte(o.alpha)}t._pickTexture=x(t,e,r),(0,c.Z)(u)&&(u.batchTableByteLength+=t._pickTexture.sizeInBytes)}}(this,i),this._batchValuesDirty&&(this._batchValuesDirty=!1,(0,c.Z)(this._batchTexture)||(this._batchTexture=x(this,i,this._batchValues),(0,c.Z)(this._statistics)&&(this._statistics.batchTableByteLength+=this._batchTexture.sizeInBytes)),function(t){const e=t._textureDimensions;t._batchTexture.copyFrom({source:{width:e.x,height:e.y,arrayBufferView:t._batchValues}})}(this))},Z.prototype.isDestroyed=function(){return!1},Z.prototype.destroy=function(){this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),this._pickTexture=this._pickTexture&&this._pickTexture.destroy();const t=this._pickIds,e=t.length;for(let i=0;i<e;++i)t[i].destroy();return(0,u.Z)(this)}},64412:(t,e,i)=>{i.d(e,{Z:()=>A});var n=i(93517),o=i(6785),r=i(44990),s=i(54485),a=i(34971),c=i(90332),u=i(20176),l=i(71118),h=i(22041),d=i(1577),f=i(81737),_=i(71743),p=i(18272),Z=i(96059),m=i(73673),g=i(15157),y=i(53273),T=i(13715),b=i(11487);function x(t,e,i,o,a){this._tileset=t,this._tile=e,this._resource=i,this._model=void 0,this._batchTable=void 0,this._features=void 0,this._classificationType=t.vectorClassificationOnly?void 0:t.classificationType,this._metadata=void 0,this._batchIdAttributeName=void 0,this._diffuseAttributeOrUniformName={},this._rtcCenterTransform=void 0,this._contentModelMatrix=void 0,this.featurePropertiesDirty=!1,this._group=void 0,function(t,e,i){const o=t._tileset,a=t._tile,c=t._resource,u=_.Z.parse(e,i);let Z=u.batchLength;const b=u.featureTableJson,x=u.featureTableBinary,A=new m.Z(b,x);Z=A.getGlobalProperty("BATCH_LENGTH"),A.featuresLength=Z;const D=u.batchTableJson,I=u.batchTableBinary;let O;(0,s.Z)(t._classificationType)&&(O=function(t){return function(e,i){t._model.updateCommands(e,i)}}(t));const v=new p.Z(t,Z,D,I,O);t._batchTable=v;const P=u.gltf,N={content:t,primitive:o};t._rtcCenterTransform=l.Z.IDENTITY;const L=A.getGlobalProperty("RTC_CENTER",r.Z.FLOAT,3);(0,s.Z)(L)&&(t._rtcCenterTransform=l.Z.fromTranslation(n.Z.fromArray(L)));t._contentModelMatrix=l.Z.multiply(a.computedTransform,t._rtcCenterTransform,new l.Z),(0,s.Z)(t._classificationType)?t._model=new g.Z({gltf:P,cull:!1,basePath:c,requestType:h.Z.TILES3D,modelMatrix:t._contentModelMatrix,upAxis:o._gltfUpAxis,forwardAxis:f.Z.X,debugWireframe:o.debugWireframe,vertexShaderLoaded:C(t),classificationShaderLoaded:S(t),uniformMapLoaded:v.getUniformMapCallback(),pickIdLoaded:w(t),classificationType:t._classificationType,batchTable:v}):(t._model=new y.Z({gltf:P,cull:!1,releaseGltfJson:!0,opaquePass:d.Z.CESIUM_3D_TILE,basePath:c,requestType:h.Z.TILES3D,modelMatrix:t._contentModelMatrix,upAxis:o._gltfUpAxis,forwardAxis:f.Z.X,shadows:o.shadows,debugWireframe:o.debugWireframe,incrementallyLoadTextures:!1,vertexShaderLoaded:C(t),fragmentShaderLoaded:E(t),uniformMapLoaded:v.getUniformMapCallback(),pickIdLoaded:w(t),addBatchIdToGeneratedShaders:Z>0,pickObject:N,lightColor:o.lightColor,imageBasedLighting:o.imageBasedLighting,backFaceCulling:o.backFaceCulling,showOutline:o.showOutline,showCreditsOnScreen:o.showCreditsOnScreen}),t._model.readyPromise.then((function(t){t.activeAnimations.addAll({loop:T.Z.REPEAT})})))}(this,o,a)}function C(t){return function(e,i){const n=t._batchTable,o=!(0,s.Z)(t._classificationType),r=t._model.gltfInternal;(0,s.Z)(r)&&(t._batchIdAttributeName=function(t){let e=b.Z.getAttributeOrUniformBySemantic(t,"_BATCHID");return(0,s.Z)(e)||(e=b.Z.getAttributeOrUniformBySemantic(t,"BATCHID"),(0,s.Z)(e)&&x._deprecationWarning("b3dm-legacy-batchid","The glTF in this b3dm uses the semantic `BATCHID`. Application-specific semantics should be prefixed with an underscore: `_BATCHID`.")),e}(r),t._diffuseAttributeOrUniformName[i]=b.Z.getDiffuseAttributeOrUniform(r,i));const a=n.getVertexShaderCallback(o,t._batchIdAttributeName,t._diffuseAttributeOrUniformName[i]);return(0,s.Z)(a)?a(e):e}}function E(t){return function(e,i){const n=t._batchTable,o=!(0,s.Z)(t._classificationType),r=t._model.gltfInternal;(0,s.Z)(r)&&(t._diffuseAttributeOrUniformName[i]=b.Z.getDiffuseAttributeOrUniform(r,i));const a=n.getFragmentShaderCallback(o,t._diffuseAttributeOrUniformName[i],!1);return(0,s.Z)(a)?a(e):e}}function w(t){return function(){return t._batchTable.getPickId()}}function S(t){return function(e){const i=t._batchTable.getClassificationFragmentShaderCallback();return(0,s.Z)(i)?i(e):e}}x._deprecationWarning=a.Z,Object.defineProperties(x.prototype,{featuresLength:{get:function(){return this.batchTable.featuresLength}},pointsLength:{get:function(){return this._model.pointsLength}},trianglesLength:{get:function(){return this._model.trianglesLength}},geometryByteLength:{get:function(){return this._model.geometryByteLength}},texturesByteLength:{get:function(){return this._model.texturesByteLength}},batchTableByteLength:{get:function(){return this.batchTable.memorySizeInBytes}},innerContents:{get:function(){}},readyPromise:{get:function(){return this._model.readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(t){this._metadata=t}},batchTable:{get:function(){return this._batchTable}},group:{get:function(){return this._group},set:function(t){this._group=t}}}),x.prototype.hasProperty=function(t,e){return this._batchTable.hasProperty(t,e)},x.prototype.getFeature=function(t){const e=this.featuresLength;if(!(0,s.Z)(t)||t<0||t>=e)throw new u.Z(`batchId is required and between zero and featuresLength - 1 (${e-1}).`);return function(t){const e=t.featuresLength;if(!(0,s.Z)(t._features)&&e>0){const i=new Array(e);for(let n=0;n<e;++n)i[n]=new Z.Z(t,n);t._features=i}}(this),this._features[t]},x.prototype.applyDebugSettings=function(t,e){e=t?e:o.Z.WHITE,0===this.featuresLength?this._model.color=e:this._batchTable.setAllColor(e)},x.prototype.applyStyle=function(t){if(0===this.featuresLength){const e=(0,s.Z)(t)&&(0,s.Z)(t.color),i=(0,s.Z)(t)&&(0,s.Z)(t.show);this._model.color=e?t.color.evaluateColor(void 0,this._model.color):o.Z.clone(o.Z.WHITE,this._model.color),this._model.show=!i||t.show.evaluate(void 0)}else this._batchTable.applyStyle(t)},x.prototype.update=function(t,e){const i=e.commandList.length,n=this._model,o=this._tile,r=this._batchTable;r.update(t,e),this._contentModelMatrix=l.Z.multiply(o.computedTransform,this._rtcCenterTransform,this._contentModelMatrix),n.modelMatrix=this._contentModelMatrix,n.shadows=t.shadows,n.lightColor=t.lightColor,n.imageBasedLighting=t.imageBasedLighting,n.backFaceCulling=t.backFaceCulling,n.debugWireframe=t.debugWireframe,n.showCreditsOnScreen=t.showCreditsOnScreen,n.splitDirection=t.splitDirection;const a=t.clippingPlanes;n.referenceMatrix=t.clippingPlanesOriginMatrix,(0,s.Z)(a)&&o.clippingPlanesDirty&&(n._clippingPlanes=a.enabled&&o._isClipped?a:void 0),(0,s.Z)(a)&&(0,s.Z)(n._clippingPlanes)&&n._clippingPlanes!==a&&(n._clippingPlanes=a),n.update(e);i<e.commandList.length&&(e.passes.render||e.passes.pick)&&!(0,s.Z)(this._classificationType)&&r.addDerivedCommands(e,i)},x.prototype.isDestroyed=function(){return!1},x.prototype.destroy=function(){return this._model=this._model&&this._model.destroy(),this._batchTable=this._batchTable&&this._batchTable.destroy(),(0,c.Z)(this)};const A=x},72720:(t,e,i)=>{i.d(e,{Z:()=>j});var n=i(23114),o=i(59015),r=i(93517),s=i(90868),a=i(66866),c=i(17497),u=i(6785),l=i(93737),h=i(88779),d=i(54485),f=i(20176),_=i(51178),p=i(71118),Z=i(14633),m=i(67197),g=i(16272),y=i(72293),T=i(18061),b=i(53640),x=i(49824);function C(t,e){if(t=(0,h.Z)(t,h.Z.EMPTY_OBJECT),(0,d.Z)(t.disableDepthTestDistance)&&t.disableDepthTestDistance<0)throw new f.Z("disableDepthTestDistance must be greater than or equal to 0.0.");let i=t.translucencyByDistance,n=t.pixelOffsetScaleByDistance,s=t.scaleByDistance,a=t.distanceDisplayCondition;if((0,d.Z)(i)){if(i.far<=i.near)throw new f.Z("translucencyByDistance.far must be greater than translucencyByDistance.near.");i=Z.Z.clone(i)}if((0,d.Z)(n)){if(n.far<=n.near)throw new f.Z("pixelOffsetScaleByDistance.far must be greater than pixelOffsetScaleByDistance.near.");n=Z.Z.clone(n)}if((0,d.Z)(s)){if(s.far<=s.near)throw new f.Z("scaleByDistance.far must be greater than scaleByDistance.near.");s=Z.Z.clone(s)}if((0,d.Z)(a)){if(a.far<=a.near)throw new f.Z("distanceDisplayCondition.far must be greater than distanceDisplayCondition.near.");a=_.Z.clone(a)}this._show=(0,h.Z)(t.show,!0),this._position=r.Z.clone((0,h.Z)(t.position,r.Z.ZERO)),this._actualPosition=r.Z.clone(this._position),this._pixelOffset=o.Z.clone((0,h.Z)(t.pixelOffset,o.Z.ZERO)),this._translate=new o.Z(0,0),this._eyeOffset=r.Z.clone((0,h.Z)(t.eyeOffset,r.Z.ZERO)),this._heightReference=(0,h.Z)(t.heightReference,g.Z.NONE),this._verticalOrigin=(0,h.Z)(t.verticalOrigin,x.Z.CENTER),this._horizontalOrigin=(0,h.Z)(t.horizontalOrigin,y.Z.CENTER),this._scale=(0,h.Z)(t.scale,1),this._color=u.Z.clone((0,h.Z)(t.color,u.Z.WHITE)),this._rotation=(0,h.Z)(t.rotation,0),this._alignedAxis=r.Z.clone((0,h.Z)(t.alignedAxis,r.Z.ZERO)),this._width=t.width,this._height=t.height,this._scaleByDistance=s,this._translucencyByDistance=i,this._pixelOffsetScaleByDistance=n,this._sizeInMeters=(0,h.Z)(t.sizeInMeters,!1),this._distanceDisplayCondition=a,this._disableDepthTestDistance=t.disableDepthTestDistance,this._id=t.id,this._collection=(0,h.Z)(t.collection,e),this._pickId=void 0,this._pickPrimitive=(0,h.Z)(t._pickPrimitive,this),this._billboardCollection=e,this._dirty=!1,this._index=-1,this._batchIndex=void 0,this._imageIndex=-1,this._imageIndexPromise=void 0,this._imageId=void 0,this._image=void 0,this._imageSubRegion=void 0,this._imageWidth=void 0,this._imageHeight=void 0,this._labelDimensions=void 0,this._labelHorizontalOrigin=void 0,this._labelTranslate=void 0;const c=t.image;let p=t.imageId;(0,d.Z)(c)&&((0,d.Z)(p)||(p="string"==typeof c?c:(0,d.Z)(c.src)?c.src:(0,l.Z)()),this._imageId=p,this._image=c),(0,d.Z)(t.imageSubRegion)&&(this._imageId=p,this._imageSubRegion=t.imageSubRegion),(0,d.Z)(this._billboardCollection._textureAtlas)&&this._loadImage(),this._actualClampedPosition=void 0,this._removeCallbackFunc=void 0,this._mode=T.Z.SCENE3D,this._clusterShow=!0,this._outlineColor=u.Z.clone((0,h.Z)(t.outlineColor,u.Z.BLACK)),this._outlineWidth=(0,h.Z)(t.outlineWidth,0),this._updateClamping()}const E=C.SHOW_INDEX=0,w=C.POSITION_INDEX=1,S=C.PIXEL_OFFSET_INDEX=2,A=C.EYE_OFFSET_INDEX=3,D=C.HORIZONTAL_ORIGIN_INDEX=4,I=C.VERTICAL_ORIGIN_INDEX=5,O=C.SCALE_INDEX=6,v=C.IMAGE_INDEX_INDEX=7,P=C.COLOR_INDEX=8,N=C.ROTATION_INDEX=9,L=C.ALIGNED_AXIS_INDEX=10,R=C.SCALE_BY_DISTANCE_INDEX=11,M=C.TRANSLUCENCY_BY_DISTANCE_INDEX=12,B=C.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX=13,U=C.DISTANCE_DISPLAY_CONDITION=14,F=C.DISABLE_DEPTH_DISTANCE=15;C.TEXTURE_COORDINATE_BOUNDS=16;const W=C.SDF_INDEX=17;function V(t,e){const i=t._billboardCollection;(0,d.Z)(i)&&(i._updateBillboard(t,e),t._dirty=!0)}C.NUMBER_OF_PROPERTIES=18,Object.defineProperties(C.prototype,{show:{get:function(){return this._show},set:function(t){c.Z.typeOf.bool("value",t),this._show!==t&&(this._show=t,V(this,E))}},position:{get:function(){return this._position},set:function(t){c.Z.typeOf.object("value",t);const e=this._position;r.Z.equals(e,t)||(r.Z.clone(t,e),r.Z.clone(t,this._actualPosition),this._updateClamping(),V(this,w))}},heightReference:{get:function(){return this._heightReference},set:function(t){c.Z.typeOf.number("value",t);t!==this._heightReference&&(this._heightReference=t,this._updateClamping(),V(this,w))}},pixelOffset:{get:function(){return this._pixelOffset},set:function(t){c.Z.typeOf.object("value",t);const e=this._pixelOffset;o.Z.equals(e,t)||(o.Z.clone(t,e),V(this,S))}},scaleByDistance:{get:function(){return this._scaleByDistance},set:function(t){if((0,d.Z)(t)&&(c.Z.typeOf.object("value",t),t.far<=t.near))throw new f.Z("far distance must be greater than near distance.");const e=this._scaleByDistance;Z.Z.equals(e,t)||(this._scaleByDistance=Z.Z.clone(t,e),V(this,R))}},translucencyByDistance:{get:function(){return this._translucencyByDistance},set:function(t){if((0,d.Z)(t)&&(c.Z.typeOf.object("value",t),t.far<=t.near))throw new f.Z("far distance must be greater than near distance.");const e=this._translucencyByDistance;Z.Z.equals(e,t)||(this._translucencyByDistance=Z.Z.clone(t,e),V(this,M))}},pixelOffsetScaleByDistance:{get:function(){return this._pixelOffsetScaleByDistance},set:function(t){if((0,d.Z)(t)&&(c.Z.typeOf.object("value",t),t.far<=t.near))throw new f.Z("far distance must be greater than near distance.");const e=this._pixelOffsetScaleByDistance;Z.Z.equals(e,t)||(this._pixelOffsetScaleByDistance=Z.Z.clone(t,e),V(this,B))}},eyeOffset:{get:function(){return this._eyeOffset},set:function(t){c.Z.typeOf.object("value",t);const e=this._eyeOffset;r.Z.equals(e,t)||(r.Z.clone(t,e),V(this,A))}},horizontalOrigin:{get:function(){return this._horizontalOrigin},set:function(t){c.Z.typeOf.number("value",t),this._horizontalOrigin!==t&&(this._horizontalOrigin=t,V(this,D))}},verticalOrigin:{get:function(){return this._verticalOrigin},set:function(t){c.Z.typeOf.number("value",t),this._verticalOrigin!==t&&(this._verticalOrigin=t,V(this,I))}},scale:{get:function(){return this._scale},set:function(t){c.Z.typeOf.number("value",t),this._scale!==t&&(this._scale=t,V(this,O))}},color:{get:function(){return this._color},set:function(t){c.Z.typeOf.object("value",t);const e=this._color;u.Z.equals(e,t)||(u.Z.clone(t,e),V(this,P))}},rotation:{get:function(){return this._rotation},set:function(t){c.Z.typeOf.number("value",t),this._rotation!==t&&(this._rotation=t,V(this,N))}},alignedAxis:{get:function(){return this._alignedAxis},set:function(t){c.Z.typeOf.object("value",t);const e=this._alignedAxis;r.Z.equals(e,t)||(r.Z.clone(t,e),V(this,L))}},width:{get:function(){return(0,h.Z)(this._width,this._imageWidth)},set:function(t){(0,d.Z)(t)&&c.Z.typeOf.number("value",t),this._width!==t&&(this._width=t,V(this,v))}},height:{get:function(){return(0,h.Z)(this._height,this._imageHeight)},set:function(t){(0,d.Z)(t)&&c.Z.typeOf.number("value",t),this._height!==t&&(this._height=t,V(this,v))}},sizeInMeters:{get:function(){return this._sizeInMeters},set:function(t){c.Z.typeOf.bool("value",t),this._sizeInMeters!==t&&(this._sizeInMeters=t,V(this,P))}},distanceDisplayCondition:{get:function(){return this._distanceDisplayCondition},set:function(t){if(!_.Z.equals(t,this._distanceDisplayCondition)){if((0,d.Z)(t)&&(c.Z.typeOf.object("value",t),t.far<=t.near))throw new f.Z("far distance must be greater than near distance.");this._distanceDisplayCondition=_.Z.clone(t,this._distanceDisplayCondition),V(this,U)}}},disableDepthTestDistance:{get:function(){return this._disableDepthTestDistance},set:function(t){if((0,d.Z)(t)&&(c.Z.typeOf.number("value",t),t<0))throw new f.Z("disableDepthTestDistance must be greater than or equal to 0.0.");this._disableDepthTestDistance!==t&&(this._disableDepthTestDistance=t,V(this,F))}},id:{get:function(){return this._id},set:function(t){this._id=t,(0,d.Z)(this._pickId)&&(this._pickId.object.id=t)}},pickPrimitive:{get:function(){return this._pickPrimitive},set:function(t){this._pickPrimitive=t,(0,d.Z)(this._pickId)&&(this._pickId.object.primitive=t)}},pickId:{get:function(){return this._pickId}},image:{get:function(){return this._imageId},set:function(t){(0,d.Z)(t)?"string"==typeof t?this.setImage(t,t):t instanceof m.Z?this.setImage(t.url,t):(0,d.Z)(t.src)?this.setImage(t.src,t):this.setImage((0,l.Z)(),t):(this._imageIndex=-1,this._imageSubRegion=void 0,this._imageId=void 0,this._image=void 0,this._imageIndexPromise=void 0,V(this,v))}},ready:{get:function(){return-1!==this._imageIndex}},_clampedPosition:{get:function(){return this._actualClampedPosition},set:function(t){this._actualClampedPosition=r.Z.clone(t,this._actualClampedPosition),V(this,w)}},clusterShow:{get:function(){return this._clusterShow},set:function(t){this._clusterShow!==t&&(this._clusterShow=t,V(this,E))}},outlineColor:{get:function(){return this._outlineColor},set:function(t){if(!(0,d.Z)(t))throw new f.Z("value is required.");const e=this._outlineColor;u.Z.equals(e,t)||(u.Z.clone(t,e),V(this,W))}},outlineWidth:{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth!==t&&(this._outlineWidth=t,V(this,W))}}}),C.prototype.getPickId=function(t){return(0,d.Z)(this._pickId)||(this._pickId=t.createPickId({primitive:this._pickPrimitive,collection:this._collection,id:this._id})),this._pickId},C.prototype._updateClamping=function(){C._updateClamping(this._billboardCollection,this)};const k=new a.Z,H=new r.Z;C._updateClamping=function(t,e){const i=t._scene;if(!(0,d.Z)(i)||!(0,d.Z)(i.globe)){if(e._heightReference!==g.Z.NONE)throw new f.Z("Height reference is not supported without a scene and globe.");return}const n=i.globe,o=n.ellipsoid,s=n._surface,c=i.frameState.mode,u=c!==e._mode;if(e._mode=c,(e._heightReference===g.Z.NONE||u)&&(0,d.Z)(e._removeCallbackFunc)&&(e._removeCallbackFunc(),e._removeCallbackFunc=void 0,e._clampedPosition=void 0),e._heightReference===g.Z.NONE||!(0,d.Z)(e._position))return;const l=o.cartesianToCartographic(e._position);if(!(0,d.Z)(l))return void(e._actualClampedPosition=void 0);function h(t){if(e._heightReference===g.Z.RELATIVE_TO_GROUND)if(e._mode===T.Z.SCENE3D){const e=o.cartesianToCartographic(t,k);e.height+=l.height,o.cartographicToCartesian(e,t)}else t.x+=l.height;e._clampedPosition=r.Z.clone(t,e._clampedPosition)}(0,d.Z)(e._removeCallbackFunc)&&e._removeCallbackFunc(),e._removeCallbackFunc=s.updateHeight(l,h),a.Z.clone(l,k);const _=n.getHeight(l);(0,d.Z)(_)&&(k.height=_),o.cartographicToCartesian(k,H),h(H)},C.prototype._loadImage=function(){const t=this._billboardCollection._textureAtlas,e=this._imageId,i=this._image,o=this._imageSubRegion;let r;const s=this;function a(r){if(s._imageId!==e||s._image!==i||!n.Z.equals(s._imageSubRegion,o))return;const a=t.textureCoordinates[r];s._imageWidth=t.texture.width*a.width,s._imageHeight=t.texture.height*a.height,s._imageIndex=r,s._ready=!0,s._image=void 0,s._imageIndexPromise=void 0,V(s,v)}if((0,d.Z)(i)){const n=t.getImageIndex(e);if((0,d.Z)(n))return void a(n);r=t.addImage(e,i)}(0,d.Z)(o)&&(r=t.addSubRegion(e,o)),this._imageIndexPromise=r,(0,d.Z)(r)&&r.then(a).catch((function(t){s._imageIndexPromise=void 0}))},C.prototype.setImage=function(t,e){if(!(0,d.Z)(t))throw new f.Z("id is required.");if(!(0,d.Z)(e))throw new f.Z("image is required.");this._imageId!==t&&(this._imageIndex=-1,this._imageSubRegion=void 0,this._imageId=t,this._image=e,(0,d.Z)(this._billboardCollection._textureAtlas)&&this._loadImage())},C.prototype.setImageSubRegion=function(t,e){if(!(0,d.Z)(t))throw new f.Z("id is required.");if(!(0,d.Z)(e))throw new f.Z("subRegion is required.");this._imageId===t&&n.Z.equals(this._imageSubRegion,e)||(this._imageIndex=-1,this._imageId=t,this._imageSubRegion=n.Z.clone(e),(0,d.Z)(this._billboardCollection._textureAtlas)&&this._loadImage())},C.prototype._setTranslate=function(t){if(!(0,d.Z)(t))throw new f.Z("value is required.");const e=this._translate;o.Z.equals(e,t)||(o.Z.clone(t,e),V(this,S))},C.prototype._getActualPosition=function(){return(0,d.Z)(this._clampedPosition)?this._clampedPosition:this._actualPosition},C.prototype._setActualPosition=function(t){(0,d.Z)(this._clampedPosition)||r.Z.clone(t,this._actualPosition),V(this,w)};const z=new s.Z;C._computeActualPosition=function(t,e,i,n){return(0,d.Z)(t._clampedPosition)?(i.mode!==t._mode&&t._updateClamping(),t._clampedPosition):i.mode===T.Z.SCENE3D?e:(p.Z.multiplyByPoint(n,e,z),b.Z.computeActualWgs84Position(i,z))};const q=new r.Z;C._computeScreenSpacePosition=function(t,e,i,n,r,s){const a=p.Z.multiplyByPoint(t,e,q),c=b.Z.wgs84WithEyeOffsetToWindowCoordinates(r,a,i,s);if((0,d.Z)(c))return o.Z.add(c,n,c),c};const G=new o.Z(0,0);C.prototype.computeScreenSpacePosition=function(t,e){const i=this._billboardCollection;if((0,d.Z)(e)||(e=new o.Z),!(0,d.Z)(i))throw new f.Z("Billboard must be in a collection.  Was it removed?");if(!(0,d.Z)(t))throw new f.Z("scene is required.");o.Z.clone(this._pixelOffset,G),o.Z.add(G,this._translate,G);let n=i.modelMatrix,r=this._position;if((0,d.Z)(this._clampedPosition)&&(r=this._clampedPosition,t.mode!==T.Z.SCENE3D)){const e=t.mapProjection,i=e.ellipsoid,o=e.unproject(r,k);r=i.cartographicToCartesian(o,q),n=p.Z.IDENTITY}return C._computeScreenSpacePosition(n,r,this._eyeOffset,G,t,e)},C.getScreenSpaceBoundingBox=function(t,e,i){let o=t.width,r=t.height;const s=t.scale;o*=s,r*=s;let a=e.x;t.horizontalOrigin===y.Z.RIGHT?a-=o:t.horizontalOrigin===y.Z.CENTER&&(a-=.5*o);let c=e.y;return t.verticalOrigin===x.Z.BOTTOM||t.verticalOrigin===x.Z.BASELINE?c-=r:t.verticalOrigin===x.Z.CENTER&&(c-=.5*r),(0,d.Z)(i)||(i=new n.Z),i.x=a,i.y=c,i.width=o,i.height=r,i},C.prototype.equals=function(t){return this===t||(0,d.Z)(t)&&this._id===t._id&&r.Z.equals(this._position,t._position)&&this._imageId===t._imageId&&this._show===t._show&&this._scale===t._scale&&this._verticalOrigin===t._verticalOrigin&&this._horizontalOrigin===t._horizontalOrigin&&this._heightReference===t._heightReference&&n.Z.equals(this._imageSubRegion,t._imageSubRegion)&&u.Z.equals(this._color,t._color)&&o.Z.equals(this._pixelOffset,t._pixelOffset)&&o.Z.equals(this._translate,t._translate)&&r.Z.equals(this._eyeOffset,t._eyeOffset)&&Z.Z.equals(this._scaleByDistance,t._scaleByDistance)&&Z.Z.equals(this._translucencyByDistance,t._translucencyByDistance)&&Z.Z.equals(this._pixelOffsetScaleByDistance,t._pixelOffsetScaleByDistance)&&_.Z.equals(this._distanceDisplayCondition,t._distanceDisplayCondition)&&this._disableDepthTestDistance===t._disableDepthTestDistance},C.prototype._destroy=function(){(0,d.Z)(this._customData)&&(this._billboardCollection._scene.globe._surface.removeTileCustomData(this._customData),this._customData=void 0),(0,d.Z)(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this.image=void 0,this._pickId=this._pickId&&this._pickId.destroy(),this._billboardCollection=void 0};const j=C},64764:(t,e,i)=>{i.d(e,{Z:()=>Nt});var n=i(69310),o=i(52351),r=i(59015),s=i(93517),a=i(17497),c=i(6785),u=i(44990),l=i(88779),h=i(54485),d=i(90332),f=i(20176),_=i(88173),p=i(39172),Z=i(22874),m=i(71118),g=i(95411),y=i(31328),T=i(36627),b=i(85834),x=i(71087),C=i(1577),E=i(74064),w=i(17426),S=i(7048),A=i(19695),D=i(92810),I=i(60666),O=i(72720),v=i(995),P=i(12471),N=i(16272),L=i(72293),R=i(18061),M=i(53102),B=i(79670),U=i(49824);const F=O.Z.SHOW_INDEX,W=O.Z.POSITION_INDEX,V=O.Z.PIXEL_OFFSET_INDEX,k=O.Z.EYE_OFFSET_INDEX,H=O.Z.HORIZONTAL_ORIGIN_INDEX,z=O.Z.VERTICAL_ORIGIN_INDEX,q=O.Z.SCALE_INDEX,G=O.Z.IMAGE_INDEX_INDEX,j=O.Z.COLOR_INDEX,Y=O.Z.ROTATION_INDEX,X=O.Z.ALIGNED_AXIS_INDEX,$=O.Z.SCALE_BY_DISTANCE_INDEX,K=O.Z.TRANSLUCENCY_BY_DISTANCE_INDEX,J=O.Z.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX,Q=O.Z.DISTANCE_DISPLAY_CONDITION,tt=O.Z.DISABLE_DEPTH_DISTANCE,et=O.Z.TEXTURE_COORDINATE_BOUNDS,it=O.Z.SDF_INDEX,nt=O.Z.NUMBER_OF_PROPERTIES;let ot;const rt={positionHighAndScale:0,positionLowAndRotation:1,compressedAttribute0:2,compressedAttribute1:3,compressedAttribute2:4,eyeOffset:5,scaleByDistance:6,pixelOffsetScaleByDistance:7,compressedAttribute3:8,textureCoordinateBoundsOrLabelTranslate:9,a_batchId:10,sdf:11},st={direction:0,positionHighAndScale:1,positionLowAndRotation:2,compressedAttribute0:3,compressedAttribute1:4,compressedAttribute2:5,eyeOffset:6,scaleByDistance:7,pixelOffsetScaleByDistance:8,compressedAttribute3:9,textureCoordinateBoundsOrLabelTranslate:10,a_batchId:11,sdf:12};function at(t){t=(0,l.Z)(t,l.Z.EMPTY_OBJECT),this._scene=t.scene,this._batchTable=t.batchTable,this._textureAtlas=void 0,this._textureAtlasGUID=void 0,this._destroyTextureAtlas=!0,this._sp=void 0,this._spTranslucent=void 0,this._rsOpaque=void 0,this._rsTranslucent=void 0,this._vaf=void 0,this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!1,this._shaderRotation=!1,this._compiledShaderRotation=!1,this._shaderAlignedAxis=!1,this._compiledShaderAlignedAxis=!1,this._shaderScaleByDistance=!1,this._compiledShaderScaleByDistance=!1,this._shaderTranslucencyByDistance=!1,this._compiledShaderTranslucencyByDistance=!1,this._shaderPixelOffsetScaleByDistance=!1,this._compiledShaderPixelOffsetScaleByDistance=!1,this._shaderDistanceDisplayCondition=!1,this._compiledShaderDistanceDisplayCondition=!1,this._shaderDisableDepthDistance=!1,this._compiledShaderDisableDepthDistance=!1,this._shaderClampToGround=!1,this._compiledShaderClampToGround=!1,this._propertiesChanged=new Uint32Array(nt),this._maxSize=0,this._maxEyeOffset=0,this._maxScale=1,this._maxPixelOffset=0,this._allHorizontalCenter=!0,this._allVerticalCenter=!0,this._allSizedInMeters=!0,this._baseVolume=new o.Z,this._baseVolumeWC=new o.Z,this._baseVolume2D=new o.Z,this._boundingVolume=new o.Z,this._boundingVolumeDirty=!1,this._colorCommands=[],this.show=(0,l.Z)(t.show,!0),this.modelMatrix=m.Z.clone((0,l.Z)(t.modelMatrix,m.Z.IDENTITY)),this._modelMatrix=m.Z.clone(m.Z.IDENTITY),this.debugShowBoundingVolume=(0,l.Z)(t.debugShowBoundingVolume,!1),this.debugShowTextureAtlas=(0,l.Z)(t.debugShowTextureAtlas,!1),this.blendOption=(0,l.Z)(t.blendOption,P.Z.OPAQUE_AND_TRANSLUCENT),this._blendOption=void 0,this._mode=R.Z.SCENE3D,this._buffersUsage=[T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW,T.Z.STATIC_DRAW],this._highlightColor=c.Z.clone(c.Z.WHITE);const e=this;this._uniforms={u_atlas:function(){return e._textureAtlas.texture},u_highlightColor:function(){return e._highlightColor}};const i=this._scene;(0,h.Z)(i)&&(0,h.Z)(i.terrainProviderChanged)&&(this._removeCallbackFunc=i.terrainProviderChanged.addEventListener((function(){const t=this._billboards,e=t.length;for(let i=0;i<e;++i)(0,h.Z)(t[i])&&t[i]._updateClamping()}),this))}function ct(t){const e=t.length;for(let i=0;i<e;++i)t[i]&&t[i]._destroy()}function ut(t){if(t._billboardsRemoved){t._billboardsRemoved=!1;const e=[],i=t._billboards,n=i.length;for(let t=0,o=0;t<n;++t){const n=i[t];(0,h.Z)(n)&&(n._index=o++,e.push(n))}t._billboards=e}}let lt;function ht(t){let e=t.cache.billboardCollection_indexBufferBatched;if((0,h.Z)(e))return e;const i=new Uint16Array(98298);for(let t=0,e=0;t<98298;t+=6,e+=4)i[t]=e,i[t+1]=e+1,i[t+2]=e+2,i[t+3]=e+0,i[t+4]=e+2,i[t+5]=e+3;return e=y.Z.createIndexBuffer({context:t,typedArray:i,usage:T.Z.STATIC_DRAW,indexDatatype:p.Z.UNSIGNED_SHORT}),e.vertexArrayDestroyable=!1,t.cache.billboardCollection_indexBufferBatched=e,e}function dt(t){let e=t.cache.billboardCollection_indexBufferInstanced;return(0,h.Z)(e)||(e=y.Z.createIndexBuffer({context:t,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:T.Z.STATIC_DRAW,indexDatatype:p.Z.UNSIGNED_SHORT}),e.vertexArrayDestroyable=!1,t.cache.billboardCollection_indexBufferInstanced=e),e}function ft(t){let e=t.cache.billboardCollection_vertexBufferInstanced;return(0,h.Z)(e)||(e=y.Z.createVertexBuffer({context:t,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:T.Z.STATIC_DRAW}),e.vertexArrayDestroyable=!1,t.cache.billboardCollection_vertexBufferInstanced=e),e}Object.defineProperties(at.prototype,{length:{get:function(){return ut(this),this._billboards.length}},textureAtlas:{get:function(){return this._textureAtlas},set:function(t){this._textureAtlas!==t&&(this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._textureAtlas=t,this._createVertexArray=!0)}},destroyTextureAtlas:{get:function(){return this._destroyTextureAtlas},set:function(t){this._destroyTextureAtlas=t}}}),at.prototype.add=function(t){const e=new O.Z(t,this);return e._index=this._billboards.length,this._billboards.push(e),this._createVertexArray=!0,e},at.prototype.remove=function(t){return!!this.contains(t)&&(this._billboards[t._index]=void 0,this._billboardsRemoved=!0,this._createVertexArray=!0,t._destroy(),!0)},at.prototype.removeAll=function(){ct(this._billboards),this._billboards=[],this._billboardsToUpdate=[],this._billboardsToUpdateIndex=0,this._billboardsRemoved=!1,this._createVertexArray=!0},at.prototype._updateBillboard=function(t,e){t._dirty||(this._billboardsToUpdate[this._billboardsToUpdateIndex++]=t),++this._propertiesChanged[e]},at.prototype.contains=function(t){return(0,h.Z)(t)&&t._billboardCollection===this},at.prototype.get=function(t){return a.Z.typeOf.number("index",t),ut(this),this._billboards[t]},at.prototype.computeNewBuffersUsage=function(){const t=this._buffersUsage;let e=!1;const i=this._propertiesChanged;for(let n=0;n<nt;++n){const o=0===i[n]?T.Z.STATIC_DRAW:T.Z.STREAM_DRAW;e=e||t[n]!==o,t[n]=o}return e};const _t=new _.Z;function pt(t,e,i,n,r){let s;const a=n[ot.positionHighAndScale],c=n[ot.positionLowAndRotation],u=r._getActualPosition();t._mode===R.Z.SCENE3D&&(o.Z.expand(t._baseVolume,u,t._baseVolume),t._boundingVolumeDirty=!0),_.Z.fromCartesian(u,_t);const l=r.scale,h=r.rotation;0!==h&&(t._shaderRotation=!0),t._maxScale=Math.max(t._maxScale,l);const d=_t.high,f=_t.low;t._instanced?(s=r._index,a(s,d.x,d.y,d.z,l),c(s,f.x,f.y,f.z,h)):(s=4*r._index,a(s+0,d.x,d.y,d.z,l),a(s+1,d.x,d.y,d.z,l),a(s+2,d.x,d.y,d.z,l),a(s+3,d.x,d.y,d.z,l),c(s+0,f.x,f.y,f.z,h),c(s+1,f.x,f.y,f.z,h),c(s+2,f.x,f.y,f.z,h),c(s+3,f.x,f.y,f.z,h))}const Zt=new r.Z,mt=32768,gt=65536,yt=4096,Tt=256;function bt(t,e,i,o,r){let s;const a=o[ot.compressedAttribute0],c=r.pixelOffset,u=c.x,l=c.y,d=r._translate,_=d.x,p=d.y;t._maxPixelOffset=Math.max(t._maxPixelOffset,Math.abs(u+_),Math.abs(-l+p));const m=r.horizontalOrigin;let g=r._verticalOrigin,y=r.show&&r.clusterShow;0===r.color.alpha&&(y=!1),g===U.Z.BASELINE&&(g=U.Z.BOTTOM),t._allHorizontalCenter=t._allHorizontalCenter&&m===L.Z.CENTER,t._allVerticalCenter=t._allVerticalCenter&&g===U.Z.CENTER;let T=0,b=0,x=0,C=0;const E=r._imageIndex;if(-1!==E){const t=i[E];if(!(0,h.Z)(t))throw new f.Z(`Invalid billboard image index: ${E}`);T=t.x,b=t.y,x=t.width,C=t.height}const w=T+x,S=b+C;let A=128*Math.floor(Z.Z.clamp(u,-32768,mt)+mt);A+=32*(m+1),A+=8*(g+1),A+=4*(y?1:0);let D=Math.floor(Z.Z.clamp(l,-32768,mt)+mt)*Tt,I=Math.floor(Z.Z.clamp(_,-32768,mt)+mt)*Tt;const O=.00390625*(Z.Z.clamp(p,-32768,mt)+mt),v=Math.floor(O);D+=v,I+=Math.floor((O-v)*Tt),Zt.x=T,Zt.y=b;const P=n.Z.compressTextureCoordinates(Zt);Zt.x=w;const N=n.Z.compressTextureCoordinates(Zt);Zt.y=S;const R=n.Z.compressTextureCoordinates(Zt);Zt.x=T;const M=n.Z.compressTextureCoordinates(Zt);t._instanced?(s=r._index,a(s,A,D,I,P)):(s=4*r._index,a(s+0,A+0,D,I,P),a(s+1,A+2,D,I,N),a(s+2,A+3,D,I,R),a(s+3,A+1,D,I,M))}function xt(t,e,i,o,r){let a;const c=o[ot.compressedAttribute1],u=r.alignedAxis;s.Z.equals(u,s.Z.ZERO)||(t._shaderAlignedAxis=!0);let d=0,_=1,p=1,m=1;const g=r.translucencyByDistance;(0,h.Z)(g)&&(d=g.near,_=g.nearValue,p=g.far,m=g.farValue,1===_&&1===m||(t._shaderTranslucencyByDistance=!0));let y=0;const T=r._imageIndex;if(-1!==T){const t=i[T];if(!(0,h.Z)(t))throw new f.Z(`Invalid billboard image index: ${T}`);y=t.width}const b=t._textureAtlas.texture.width,x=Math.round((0,l.Z)(r.width,b*y));t._maxSize=Math.max(t._maxSize,x);let C=Z.Z.clamp(x,0,gt),E=0;Math.abs(s.Z.magnitudeSquared(u)-1)<Z.Z.EPSILON6&&(E=n.Z.octEncodeFloat(u)),_=Z.Z.clamp(_,0,1),_=1===_?255:255*_|0,C=C*Tt+_,m=Z.Z.clamp(m,0,1),m=1===m?255:255*m|0,E=E*Tt+m,t._instanced?(a=r._index,c(a,C,E,d,p)):(a=4*r._index,c(a+0,C,E,d,p),c(a+1,C,E,d,p),c(a+2,C,E,d,p),c(a+3,C,E,d,p))}function Ct(t,e,i,n,o){let r;const a=n[ot.compressedAttribute2],u=o.color,d=(0,h.Z)(t._batchTable)?c.Z.WHITE:o.getPickId(e.context).color,_=o.sizeInMeters?1:0,p=Math.abs(s.Z.magnitudeSquared(o.alignedAxis)-1)<Z.Z.EPSILON6?1:0;t._allSizedInMeters=t._allSizedInMeters&&1===_;let m=0;const g=o._imageIndex;if(-1!==g){const t=i[g];if(!(0,h.Z)(t))throw new f.Z(`Invalid billboard image index: ${g}`);m=t.height}const y=t._textureAtlas.texture.dimensions,T=Math.round((0,l.Z)(o.height,y.y*m));t._maxSize=Math.max(t._maxSize,T);let b=(0,l.Z)(o._labelHorizontalOrigin,-2);b+=2;const x=4*T+b;let C=c.Z.floatToByte(u.red),E=c.Z.floatToByte(u.green),w=c.Z.floatToByte(u.blue);const S=C*gt+E*Tt+w;C=c.Z.floatToByte(d.red),E=c.Z.floatToByte(d.green),w=c.Z.floatToByte(d.blue);const A=C*gt+E*Tt+w;let D=c.Z.floatToByte(u.alpha)*gt+c.Z.floatToByte(d.alpha)*Tt;D+=2*_+p,t._instanced?(r=o._index,a(r,S,A,D,x)):(r=4*o._index,a(r+0,S,A,D,x),a(r+1,S,A,D,x),a(r+2,S,A,D,x),a(r+3,S,A,D,x))}function Et(t,e,i,o,r){let s;const a=o[ot.eyeOffset],c=r.eyeOffset;let u=c.z;if(r._heightReference!==N.Z.NONE&&(u*=1.005),t._maxEyeOffset=Math.max(t._maxEyeOffset,Math.abs(c.x),Math.abs(c.y),Math.abs(u)),t._instanced){let t=0,e=0;const o=r._imageIndex;if(-1!==o){const n=i[o];if(!(0,h.Z)(n))throw new f.Z(`Invalid billboard image index: ${o}`);t=n.width,e=n.height}Zt.x=t,Zt.y=e;const l=n.Z.compressTextureCoordinates(Zt);s=r._index,a(s,c.x,c.y,u,l)}else s=4*r._index,a(s+0,c.x,c.y,u,0),a(s+1,c.x,c.y,u,0),a(s+2,c.x,c.y,u,0),a(s+3,c.x,c.y,u,0)}function wt(t,e,i,n,o){let r;const s=n[ot.scaleByDistance];let a=0,c=1,u=1,l=1;const d=o.scaleByDistance;(0,h.Z)(d)&&(a=d.near,c=d.nearValue,u=d.far,l=d.farValue,1===c&&1===l||(t._shaderScaleByDistance=!0)),t._instanced?(r=o._index,s(r,a,c,u,l)):(r=4*o._index,s(r+0,a,c,u,l),s(r+1,a,c,u,l),s(r+2,a,c,u,l),s(r+3,a,c,u,l))}function St(t,e,i,n,o){let r;const s=n[ot.pixelOffsetScaleByDistance];let a=0,c=1,u=1,l=1;const d=o.pixelOffsetScaleByDistance;(0,h.Z)(d)&&(a=d.near,c=d.nearValue,u=d.far,l=d.farValue,1===c&&1===l||(t._shaderPixelOffsetScaleByDistance=!0)),t._instanced?(r=o._index,s(r,a,c,u,l)):(r=4*o._index,s(r+0,a,c,u,l),s(r+1,a,c,u,l),s(r+2,a,c,u,l),s(r+3,a,c,u,l))}function At(t,e,i,n,o){let r;const s=n[ot.compressedAttribute3];let a=0,c=Number.MAX_VALUE;const u=o.distanceDisplayCondition;(0,h.Z)(u)&&(a=u.near,c=u.far,a*=a,c*=c,t._shaderDistanceDisplayCondition=!0);let d=o.disableDepthTestDistance;const _=o.heightReference===N.Z.CLAMP_TO_GROUND&&e.context.depthTexture;let p,m;if((0,h.Z)(d)||(d=_?5e3:0),d*=d,(_||d>0)&&(t._shaderDisableDepthDistance=!0,d===Number.POSITIVE_INFINITY&&(d=-1)),(0,h.Z)(o._labelDimensions))m=o._labelDimensions.x,p=o._labelDimensions.y;else{let e=0,n=0;const r=o._imageIndex;if(-1!==r){const t=i[r];if(!(0,h.Z)(t))throw new f.Z(`Invalid billboard image index: ${r}`);e=t.height,n=t.width}p=Math.round((0,l.Z)(o.height,t._textureAtlas.texture.dimensions.y*e));const s=t._textureAtlas.texture.width;m=Math.round((0,l.Z)(o.width,s*n))}const g=Math.floor(Z.Z.clamp(m,0,yt)),y=Math.floor(Z.Z.clamp(p,0,yt)),T=g*yt+y;t._instanced?(r=o._index,s(r,a,c,d,T)):(r=4*o._index,s(r+0,a,c,d,T),s(r+1,a,c,d,T),s(r+2,a,c,d,T),s(r+3,a,c,d,T))}function Dt(t,e,i,n,o){if(o.heightReference===N.Z.CLAMP_TO_GROUND){const i=t._scene,n=e.context,o=e.globeTranslucencyState.translucent,r=(0,h.Z)(i.globe)&&i.globe.depthTestAgainstTerrain;t._shaderClampToGround=n.depthTexture&&!o&&r}let r;const s=n[ot.textureCoordinateBoundsOrLabelTranslate];if(b.Z.maximumVertexTextureImageUnits>0){let e=0,i=0;return(0,h.Z)(o._labelTranslate)&&(e=o._labelTranslate.x,i=o._labelTranslate.y),void(t._instanced?(r=o._index,s(r,e,i,0,0)):(r=4*o._index,s(r+0,e,i,0,0),s(r+1,e,i,0,0),s(r+2,e,i,0,0),s(r+3,e,i,0,0)))}let a=0,c=0,u=0,l=0;const d=o._imageIndex;if(-1!==d){const t=i[d];if(!(0,h.Z)(t))throw new f.Z(`Invalid billboard image index: ${d}`);a=t.x,c=t.y,u=t.width,l=t.height}const _=a+u,p=c+l;t._instanced?(r=o._index,s(r,a,c,_,p)):(r=4*o._index,s(r+0,a,c,_,p),s(r+1,a,c,_,p),s(r+2,a,c,_,p),s(r+3,a,c,_,p))}function It(t,e,i,n,o){if(!t._sdf)return;let r;const s=n[ot.sdf],a=o.outlineColor,u=o.outlineWidth,l=c.Z.floatToByte(a.red),h=c.Z.floatToByte(a.green),d=c.Z.floatToByte(a.blue),f=l*gt+h*Tt+d,_=u/M.Z.RADIUS,p=c.Z.floatToByte(a.alpha)*gt+c.Z.floatToByte(_)*Tt;t._instanced?(r=o._index,s(r,f,p)):(r=4*o._index,s(r+0,f+0,p),s(r+1,f+2,p),s(r+2,f+3,p),s(r+3,f+1,p))}function Ot(t,e,i,n,o){pt(t,0,0,n,o),bt(t,0,i,n,o),xt(t,0,i,n,o),Ct(t,e,i,n,o),Et(t,0,i,n,o),wt(t,0,0,n,o),St(t,0,0,n,o),At(t,e,i,n,o),Dt(t,e,i,n,o),function(t,e,i,n,o){if(!(0,h.Z)(t._batchTable))return;const r=n[ot.a_batchId],s=o._batchIndex;let a;t._instanced?(a=o._index,r(a,s)):(a=4*o._index,r(a+0,s),r(a+1,s),r(a+2,s),r(a+3,s))}(t,0,0,n,o),It(t,0,0,n,o)}function vt(t,e,i,n,r,s){let a;n.mode===R.Z.SCENE3D?(a=t._baseVolume,t._boundingVolumeDirty=!0):a=t._baseVolume2D;const c=[];for(let t=0;t<i;++t){const i=e[t],u=i.position,l=O.Z._computeActualPosition(i,u,n,r);(0,h.Z)(l)&&(i._setActualPosition(l),s?c.push(l):o.Z.expand(a,l,a))}s&&o.Z.fromPoints(c,a)}const Pt=[];at.prototype.update=function(t){if(ut(this),!this.show)return;let e=this._billboards,i=e.length;const n=t.context;this._instanced=n.instancedArrays,ot=this._instanced?st:rt,lt=this._instanced?dt:ht;let r=this._textureAtlas;if(!(0,h.Z)(r)){r=this._textureAtlas=new B.Z({context:n});for(let t=0;t<i;++t)e[t]._loadImage()}const s=r.textureCoordinates;if(0===s.length)return;!function(t,e){const i=e.mode,n=t._billboards,o=t._billboardsToUpdate,r=t._modelMatrix;t._createVertexArray||t._mode!==i||i!==R.Z.SCENE3D&&!m.Z.equals(r,t.modelMatrix)?(t._mode=i,m.Z.clone(t.modelMatrix,r),t._createVertexArray=!0,i!==R.Z.SCENE3D&&i!==R.Z.SCENE2D&&i!==R.Z.COLUMBUS_VIEW||vt(t,n,n.length,e,r,!0)):i===R.Z.MORPHING?vt(t,n,n.length,e,r,!0):i!==R.Z.SCENE2D&&i!==R.Z.COLUMBUS_VIEW||vt(t,o,t._billboardsToUpdateIndex,e,r,!1)}(this,t),e=this._billboards,i=e.length;const a=this._billboardsToUpdate,c=this._billboardsToUpdateIndex,l=this._propertiesChanged,d=r.guid,f=this._createVertexArray||this._textureAtlasGUID!==d;let _;this._textureAtlasGUID=d;const p=t.passes,Z=p.pick;if(f||!Z&&this.computeNewBuffersUsage()){this._createVertexArray=!1;for(let t=0;t<nt;++t)l[t]=0;if(this._vaf=this._vaf&&this._vaf.destroy(),i>0){this._vaf=function(t,e,i,n,o,r){const s=[{index:ot.positionHighAndScale,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[W]},{index:ot.positionLowAndRotation,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[W]},{index:ot.compressedAttribute0,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[V]},{index:ot.compressedAttribute1,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[K]},{index:ot.compressedAttribute2,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[j]},{index:ot.eyeOffset,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[k]},{index:ot.scaleByDistance,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[$]},{index:ot.pixelOffsetScaleByDistance,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[J]},{index:ot.compressedAttribute3,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[Q]},{index:ot.textureCoordinateBoundsOrLabelTranslate,componentsPerAttribute:4,componentDatatype:u.Z.FLOAT,usage:i[et]}];n&&s.push({index:ot.direction,componentsPerAttribute:2,componentDatatype:u.Z.FLOAT,vertexBuffer:ft(t)}),(0,h.Z)(o)&&s.push({index:ot.a_batchId,componentsPerAttribute:1,componentDatatype:u.Z.FLOAT,bufferUsage:T.Z.STATIC_DRAW}),r&&s.push({index:ot.sdf,componentsPerAttribute:2,componentDatatype:u.Z.FLOAT,usage:i[it]});const a=n?e:4*e;return new A.Z(t,s,a,n)}(n,i,this._buffersUsage,this._instanced,this._batchTable,this._sdf),_=this._vaf.writers;for(let e=0;e<i;++e){const i=this._billboards[e];i._dirty=!1,Ot(this,t,s,_,i)}this._vaf.commit(lt(n))}this._billboardsToUpdateIndex=0}else if(c>0){const e=Pt;e.length=0,(l[W]||l[Y]||l[q])&&e.push(pt),(l[G]||l[V]||l[H]||l[z]||l[F])&&(e.push(bt),this._instanced&&e.push(Et)),(l[G]||l[X]||l[K])&&(e.push(xt),e.push(Ct)),(l[G]||l[j])&&e.push(Ct),l[k]&&e.push(Et),l[$]&&e.push(wt),l[J]&&e.push(St),(l[Q]||l[tt]||l[G]||l[W])&&e.push(At),(l[G]||l[W])&&e.push(Dt),l[it]&&e.push(It);const o=e.length;if(_=this._vaf.writers,c/i>.1){for(let i=0;i<c;++i){const n=a[i];n._dirty=!1;for(let i=0;i<o;++i)e[i](this,t,s,_,n)}this._vaf.commit(lt(n))}else{for(let i=0;i<c;++i){const n=a[i];n._dirty=!1;for(let i=0;i<o;++i)e[i](this,t,s,_,n);this._instanced?this._vaf.subCommit(n._index,1):this._vaf.subCommit(4*n._index,4)}this._vaf.endSubCommits()}this._billboardsToUpdateIndex=0}if(c>1.5*i&&(a.length=i),!(0,h.Z)(this._vaf)||!(0,h.Z)(this._vaf.va))return;let y;this._boundingVolumeDirty&&(this._boundingVolumeDirty=!1,o.Z.transform(this._baseVolume,this.modelMatrix,this._baseVolumeWC));let O=m.Z.IDENTITY;t.mode===R.Z.SCENE3D?(O=this.modelMatrix,y=o.Z.clone(this._baseVolumeWC,this._boundingVolume)):y=o.Z.clone(this._baseVolume2D,this._boundingVolume),function(t,e,i){let n=1;t._allSizedInMeters&&0===t._maxPixelOffset||(n=e.camera.getPixelSize(i,e.context.drawingBufferWidth,e.context.drawingBufferHeight));let o=n*t._maxScale*t._maxSize*2;t._allHorizontalCenter&&t._allVerticalCenter&&(o*=.5);const r=n*t._maxPixelOffset+t._maxEyeOffset;i.radius+=o+r}(this,t,y);const N=this._blendOption!==this.blendOption;if(this._blendOption=this.blendOption,N){this._blendOption===P.Z.OPAQUE||this._blendOption===P.Z.OPAQUE_AND_TRANSLUCENT?this._rsOpaque=E.Z.fromCache({depthTest:{enabled:!0,func:g.Z.LESS},depthMask:!0}):this._rsOpaque=void 0;const t=this._blendOption===P.Z.TRANSLUCENT;this._blendOption===P.Z.TRANSLUCENT||this._blendOption===P.Z.OPAQUE_AND_TRANSLUCENT?this._rsTranslucent=E.Z.fromCache({depthTest:{enabled:!0,func:t?g.Z.LEQUAL:g.Z.LESS},depthMask:t,blending:v.Z.ALPHA_BLEND}):this._rsTranslucent=void 0}let L,U,at,ct,_t;this._shaderDisableDepthDistance=this._shaderDisableDepthDistance||0!==t.minimumDisableDepthTestDistance;const Zt=b.Z.maximumVertexTextureImageUnits>0;if(N||this._shaderRotation!==this._compiledShaderRotation||this._shaderAlignedAxis!==this._compiledShaderAlignedAxis||this._shaderScaleByDistance!==this._compiledShaderScaleByDistance||this._shaderTranslucencyByDistance!==this._compiledShaderTranslucencyByDistance||this._shaderPixelOffsetScaleByDistance!==this._compiledShaderPixelOffsetScaleByDistance||this._shaderDistanceDisplayCondition!==this._compiledShaderDistanceDisplayCondition||this._shaderDisableDepthDistance!==this._compiledShaderDisableDepthDistance||this._shaderClampToGround!==this._compiledShaderClampToGround||this._sdf!==this._compiledSDF){L=I.Z,U=D.Z,_t=[],(0,h.Z)(this._batchTable)&&(_t.push("VECTOR_TILE"),L=this._batchTable.getVertexShaderCallback(!1,"a_batchId",void 0)(L),U=this._batchTable.getFragmentShaderCallback(!1,void 0)(U)),at=new S.Z({defines:_t,sources:[L]}),this._instanced&&at.defines.push("INSTANCED"),this._shaderRotation&&at.defines.push("ROTATION"),this._shaderAlignedAxis&&at.defines.push("ALIGNED_AXIS"),this._shaderScaleByDistance&&at.defines.push("EYE_DISTANCE_SCALING"),this._shaderTranslucencyByDistance&&at.defines.push("EYE_DISTANCE_TRANSLUCENCY"),this._shaderPixelOffsetScaleByDistance&&at.defines.push("EYE_DISTANCE_PIXEL_OFFSET"),this._shaderDistanceDisplayCondition&&at.defines.push("DISTANCE_DISPLAY_CONDITION"),this._shaderDisableDepthDistance&&at.defines.push("DISABLE_DEPTH_DISTANCE"),this._shaderClampToGround&&(Zt?at.defines.push("VERTEX_DEPTH_CHECK"):at.defines.push("FRAGMENT_DEPTH_CHECK"));const t=1-M.Z.CUTOFF;this._sdf&&at.defines.push("SDF");const e=(0,h.Z)(this._batchTable)?"VECTOR_TILE":"";this._blendOption===P.Z.OPAQUE_AND_TRANSLUCENT&&(ct=new S.Z({defines:["OPAQUE",e],sources:[U]}),this._shaderClampToGround&&(Zt?ct.defines.push("VERTEX_DEPTH_CHECK"):ct.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(ct.defines.push("SDF"),ct.defines.push(`SDF_EDGE ${t}`)),this._sp=w.Z.replaceCache({context:n,shaderProgram:this._sp,vertexShaderSource:at,fragmentShaderSource:ct,attributeLocations:ot}),ct=new S.Z({defines:["TRANSLUCENT",e],sources:[U]}),this._shaderClampToGround&&(Zt?ct.defines.push("VERTEX_DEPTH_CHECK"):ct.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(ct.defines.push("SDF"),ct.defines.push(`SDF_EDGE ${t}`)),this._spTranslucent=w.Z.replaceCache({context:n,shaderProgram:this._spTranslucent,vertexShaderSource:at,fragmentShaderSource:ct,attributeLocations:ot})),this._blendOption===P.Z.OPAQUE&&(ct=new S.Z({defines:[e],sources:[U]}),this._shaderClampToGround&&(Zt?ct.defines.push("VERTEX_DEPTH_CHECK"):ct.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(ct.defines.push("SDF"),ct.defines.push(`SDF_EDGE ${t}`)),this._sp=w.Z.replaceCache({context:n,shaderProgram:this._sp,vertexShaderSource:at,fragmentShaderSource:ct,attributeLocations:ot})),this._blendOption===P.Z.TRANSLUCENT&&(ct=new S.Z({defines:[e],sources:[U]}),this._shaderClampToGround&&(Zt?ct.defines.push("VERTEX_DEPTH_CHECK"):ct.defines.push("FRAGMENT_DEPTH_CHECK")),this._sdf&&(ct.defines.push("SDF"),ct.defines.push(`SDF_EDGE ${t}`)),this._spTranslucent=w.Z.replaceCache({context:n,shaderProgram:this._spTranslucent,vertexShaderSource:at,fragmentShaderSource:ct,attributeLocations:ot})),this._compiledShaderRotation=this._shaderRotation,this._compiledShaderAlignedAxis=this._shaderAlignedAxis,this._compiledShaderScaleByDistance=this._shaderScaleByDistance,this._compiledShaderTranslucencyByDistance=this._shaderTranslucencyByDistance,this._compiledShaderPixelOffsetScaleByDistance=this._shaderPixelOffsetScaleByDistance,this._compiledShaderDistanceDisplayCondition=this._shaderDistanceDisplayCondition,this._compiledShaderDisableDepthDistance=this._shaderDisableDepthDistance,this._compiledShaderClampToGround=this._shaderClampToGround,this._compiledSDF=this._sdf}const mt=t.commandList;if(p.render||p.pick){const e=this._colorCommands,n=this._blendOption===P.Z.OPAQUE,o=this._blendOption===P.Z.OPAQUE_AND_TRANSLUCENT,r=this._vaf.va,s=r.length;let a,c=this._uniforms;(0,h.Z)(this._batchTable)?(c=this._batchTable.getUniformMapCallback()(c),a=this._batchTable.getPickId()):a="v_pickColor",e.length=s;const u=o?2*s:s;for(let t=0;t<u;++t){let s=e[t];(0,h.Z)(s)||(s=e[t]=new x.Z);const u=n||o&&t%2==0;s.pass=u||!o?C.Z.OPAQUE:C.Z.TRANSLUCENT,s.owner=this;const l=o?Math.floor(t/2):t;s.boundingVolume=y,s.modelMatrix=O,s.count=r[l].indicesCount,s.shaderProgram=u?this._sp:this._spTranslucent,s.uniformMap=c,s.vertexArray=r[l].va,s.renderState=u?this._rsOpaque:this._rsTranslucent,s.debugShowBoundingVolume=this.debugShowBoundingVolume,s.pickId=a,this._instanced&&(s.count=6,s.instanceCount=i),mt.push(s)}this.debugShowTextureAtlas&&((0,h.Z)(this.debugCommand)||(this.debugCommand=function(t,e){const i=e.createViewportQuadCommand("uniform sampler2D billboard_texture; \nvarying vec2 v_textureCoordinates; \nvoid main() \n{ \n    gl_FragColor = texture2D(billboard_texture, v_textureCoordinates); \n} \n",{uniformMap:{billboard_texture:function(){return t._textureAtlas.texture}}});return i.pass=C.Z.OVERLAY,i}(this,t.context)),mt.push(this.debugCommand))}},at.prototype.isDestroyed=function(){return!1},at.prototype.destroy=function(){return(0,h.Z)(this._removeCallbackFunc)&&(this._removeCallbackFunc(),this._removeCallbackFunc=void 0),this._textureAtlas=this._destroyTextureAtlas&&this._textureAtlas&&this._textureAtlas.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spTranslucent=this._spTranslucent&&this._spTranslucent.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),ct(this._billboards),(0,d.Z)(this)};const Nt=at},12332:(t,e,i)=>{i.d(e,{Z:()=>C});var n=i(25914),o=i(17497),r=i(78505),s=i(88779),a=i(58587),c=i(54485),u=i(20176),l=i(92893),h=i(22874),d=i(34152),f=i(67197),_=i(21514),p=i(85002),Z=i(67561),m=i(37024),g=i(99773),y=i(20709);function T(t){const e=(t=(0,s.Z)(t,s.Z.EMPTY_OBJECT)).key;if(!(0,c.Z)(t.url))throw new u.Z("options.url is required.");if(!(0,c.Z)(e))throw new u.Z("options.key is required.");this.defaultAlpha=void 0,this.defaultNightAlpha=void 0,this.defaultDayAlpha=void 0,this.defaultBrightness=void 0,this.defaultContrast=void 0,this.defaultHue=void 0,this.defaultSaturation=void 0,this.defaultGamma=1,this.defaultMinificationFilter=void 0,this.defaultMagnificationFilter=void 0,this._key=e,this._resource=f.Z.createIfNeeded(t.url),this._resource.appendForwardSlash(),this._tileProtocol=t.tileProtocol,this._mapStyle=(0,s.Z)(t.mapStyle,m.Z.AERIAL),this._culture=(0,s.Z)(t.culture,""),this._tileDiscardPolicy=t.tileDiscardPolicy,(0,c.Z)(this._tileDiscardPolicy)||(this._tileDiscardPolicy=new g.Z),this._proxy=t.proxy,this._credit=new r.Z(`<a href="http://www.bing.com"><img src="${T.logoUrl}" title="Bing Imagery"/></a>`),this._tilingScheme=new Z.Z({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:2,ellipsoid:t.ellipsoid}),this._tileWidth=void 0,this._tileHeight=void 0,this._maximumLevel=void 0,this._imageUrlTemplate=void 0,this._imageUrlSubdomains=void 0,this._errorEvent=new l.Z,this._ready=!1,this._readyPromise=(0,a.Z)();let i=this._tileProtocol;if((0,c.Z)(i))i.length>0&&":"===i[i.length-1]&&(i=i.substr(0,i.length-1));else{i="http:"===document.location.protocol?"http":"https"}const n=this._resource.getDerivedResource({url:`REST/v1/Imagery/Metadata/${this._mapStyle}`,queryParameters:{incl:"ImageryProviders",key:this._key,uriScheme:i}}),o=this;let y;function b(t){if(1!==t.resourceSets.length)return void x();const e=t.resourceSets[0].resources[0];o._tileWidth=e.imageWidth,o._tileHeight=e.imageHeight,o._maximumLevel=e.zoomMax-1,o._imageUrlSubdomains=e.imageUrlSubdomains,o._imageUrlTemplate=e.imageUrl;let i=o._attributionList=e.imageryProviders;i||(i=o._attributionList=[]);for(let t=0,e=i.length;t<e;++t){const e=i[t];if(e.credit instanceof r.Z)break;e.credit=new r.Z(e.attribution);const n=e.coverageAreas;for(let t=0,i=e.coverageAreas.length;t<i;++t){const e=n[t],i=e.bbox;e.bbox=new d.Z(h.Z.toRadians(i[1]),h.Z.toRadians(i[0]),h.Z.toRadians(i[3]),h.Z.toRadians(i[2]))}}o._ready=!0,o._readyPromise.resolve(!0),p.Z.handleSuccess(y)}function x(t){const e=`An error occurred while accessing ${n.url}.`;y=p.Z.handleError(y,o,o._errorEvent,e,void 0,void 0,void 0,E),o._readyPromise.reject(new _.Z(e))}const C=n.url;function E(){const t=n.fetchJsonp("jsonp");T._metadataCache[C]=t,t.then(b).catch(x)}const w=T._metadataCache[C];(0,c.Z)(w)?w.then(b).catch(x):E()}Object.defineProperties(T.prototype,{url:{get:function(){return this._resource.url}},proxy:{get:function(){return this._resource.proxy}},key:{get:function(){return this._key}},mapStyle:{get:function(){return this._mapStyle}},culture:{get:function(){return this._culture}},tileWidth:{get:function(){if(!this._ready)throw new u.Z("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}},tileHeight:{get:function(){if(!this._ready)throw new u.Z("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}},maximumLevel:{get:function(){if(!this._ready)throw new u.Z("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}},minimumLevel:{get:function(){if(!this._ready)throw new u.Z("minimumLevel must not be called before the imagery provider is ready.");return 0}},tilingScheme:{get:function(){if(!this._ready)throw new u.Z("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}},rectangle:{get:function(){if(!this._ready)throw new u.Z("rectangle must not be called before the imagery provider is ready.");return this._tilingScheme.rectangle}},tileDiscardPolicy:{get:function(){if(!this._ready)throw new u.Z("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}},errorEvent:{get:function(){return this._errorEvent}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},credit:{get:function(){return this._credit}},hasAlphaChannel:{get:function(){return!1}}});const b=new d.Z;T.prototype.getTileCredits=function(t,e,i){if(!this._ready)throw new u.Z("getTileCredits must not be called before the imagery provider is ready.");const n=this._tilingScheme.tileXYToRectangle(t,e,i,b),o=function(t,e,i){++e;const n=[];for(let o=0,r=t.length;o<r;++o){const r=t[o],s=r.coverageAreas;let a=!1;for(let t=0,n=r.coverageAreas.length;!a&&t<n;++t){const n=s[t];if(e>=n.zoomMin&&e<=n.zoomMax){const t=d.Z.intersection(i,n.bbox,x);(0,c.Z)(t)&&(a=!0)}}a&&n.push(r.credit)}return n}(this._attributionList,i,n);return o},T.prototype.requestImage=function(t,e,i,n){if(!this._ready)throw new u.Z("requestImage must not be called before the imagery provider is ready.");const o=y.Z.loadImage(this,function(t,e,i,n,o){const r=t._imageUrlTemplate,s=t._imageUrlSubdomains,a=(e+i+n)%s.length;return t._resource.getDerivedResource({url:r,request:o,templateValues:{quadkey:T.tileXYToQuadKey(e,i,n),subdomain:s[a],culture:t._culture},queryParameters:{n:"z"}})}(this,t,e,i,n));if((0,c.Z)(o))return o.catch((function(t){return(0,c.Z)(t.blob)&&0===t.blob.size?g.Z.EMPTY_IMAGE:Promise.reject(t)}))},T.prototype.pickFeatures=function(t,e,i,n,o){},T.tileXYToQuadKey=function(t,e,i){let n="";for(let o=i;o>=0;--o){const i=1<<o;let r=0;0!=(t&i)&&(r|=1),0!=(e&i)&&(r|=2),n+=r}return n},T.quadKeyToTileXY=function(t){let e=0,i=0;const n=t.length-1;for(let o=n;o>=0;--o){const r=1<<o,s=+t[n-o];0!=(1&s)&&(e|=r),0!=(2&s)&&(i|=r)}return{x:e,y:i,level:n}},T._logoUrl=void 0,Object.defineProperties(T,{logoUrl:{get:function(){return(0,c.Z)(T._logoUrl)||(T._logoUrl=(0,n.Z)("Assets/Images/bing_maps_credit.png")),T._logoUrl},set:function(t){o.Z.defined("value",t),T._logoUrl=t}}});const x=new d.Z;T._metadataCache={};const C=T},37024:(t,e,i)=>{i.d(e,{Z:()=>n});const n=Object.freeze({AERIAL:"Aerial",AERIAL_WITH_LABELS:"AerialWithLabels",AERIAL_WITH_LABELS_ON_DEMAND:"AerialWithLabelsOnDemand",ROAD:"Road",ROAD_ON_DEMAND:"RoadOnDemand",CANVAS_DARK:"CanvasDark",CANVAS_LIGHT:"CanvasLight",CANVAS_GRAY:"CanvasGray",ORDNANCE_SURVEY:"OrdnanceSurvey",COLLINS_BART:"CollinsBart"})},53134:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(95411);const o={ADD:n.Z.FUNC_ADD,SUBTRACT:n.Z.FUNC_SUBTRACT,REVERSE_SUBTRACT:n.Z.FUNC_REVERSE_SUBTRACT,MIN:n.Z.MIN,MAX:n.Z.MAX},r=Object.freeze(o)},16829:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(95411);const o={ZERO:n.Z.ZERO,ONE:n.Z.ONE,SOURCE_COLOR:n.Z.SRC_COLOR,ONE_MINUS_SOURCE_COLOR:n.Z.ONE_MINUS_SRC_COLOR,DESTINATION_COLOR:n.Z.DST_COLOR,ONE_MINUS_DESTINATION_COLOR:n.Z.ONE_MINUS_DST_COLOR,SOURCE_ALPHA:n.Z.SRC_ALPHA,ONE_MINUS_SOURCE_ALPHA:n.Z.ONE_MINUS_SRC_ALPHA,DESTINATION_ALPHA:n.Z.DST_ALPHA,ONE_MINUS_DESTINATION_ALPHA:n.Z.ONE_MINUS_DST_ALPHA,CONSTANT_COLOR:n.Z.CONSTANT_COLOR,ONE_MINUS_CONSTANT_COLOR:n.Z.ONE_MINUS_CONSTANT_COLOR,CONSTANT_ALPHA:n.Z.CONSTANT_ALPHA,ONE_MINUS_CONSTANT_ALPHA:n.Z.ONE_MINUS_CONSTANT_ALPHA,SOURCE_ALPHA_SATURATE:n.Z.SRC_ALPHA_SATURATE},r=Object.freeze(o)},12471:(t,e,i)=>{i.d(e,{Z:()=>n});const n=Object.freeze({OPAQUE:0,TRANSLUCENT:1,OPAQUE_AND_TRANSLUCENT:2})},995:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(53134),o=i(16829);const r={DISABLED:Object.freeze({enabled:!1}),ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:n.Z.ADD,equationAlpha:n.Z.ADD,functionSourceRgb:o.Z.SOURCE_ALPHA,functionSourceAlpha:o.Z.ONE,functionDestinationRgb:o.Z.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:o.Z.ONE_MINUS_SOURCE_ALPHA}),PRE_MULTIPLIED_ALPHA_BLEND:Object.freeze({enabled:!0,equationRgb:n.Z.ADD,equationAlpha:n.Z.ADD,functionSourceRgb:o.Z.ONE,functionSourceAlpha:o.Z.ONE,functionDestinationRgb:o.Z.ONE_MINUS_SOURCE_ALPHA,functionDestinationAlpha:o.Z.ONE_MINUS_SOURCE_ALPHA}),ADDITIVE_BLEND:Object.freeze({enabled:!0,equationRgb:n.Z.ADD,equationAlpha:n.Z.ADD,functionSourceRgb:o.Z.SOURCE_ALPHA,functionSourceAlpha:o.Z.ONE,functionDestinationRgb:o.Z.ONE,functionDestinationAlpha:o.Z.ONE})},s=Object.freeze(r)},952:(t,e,i)=>{i.d(e,{Z:()=>l});var n=i(93517),o=i(17497),r=i(88779),s=i(22874);const a=new n.Z(1,1,1);function c(t){t=(0,r.Z)(t,a),o.Z.defined("dimensions",t),o.Z.typeOf.number.greaterThanOrEquals("dimensions.x",t.x,0),o.Z.typeOf.number.greaterThanOrEquals("dimensions.y",t.y,0),o.Z.typeOf.number.greaterThanOrEquals("dimensions.z",t.z,0),this._dimensions=n.Z.clone(t)}Object.defineProperties(c.prototype,{dimensions:{get:function(){return this._dimensions},set:function(t){o.Z.defined("value",t),o.Z.typeOf.number.greaterThanOrEquals("value.x",t.x,0),o.Z.typeOf.number.greaterThanOrEquals("value.y",t.y,0),o.Z.typeOf.number.greaterThanOrEquals("value.z",t.z,0),n.Z.clone(t,this._dimensions)}}});const u=new n.Z;c.prototype.emit=function(t){const e=this._dimensions,i=n.Z.multiplyByScalar(e,.5,u),o=s.Z.randomBetween(-i.x,i.x),r=s.Z.randomBetween(-i.y,i.y),a=s.Z.randomBetween(-i.z,i.z);t.position=n.Z.fromElements(o,r,a,t.position),t.velocity=n.Z.normalize(t.position,t.velocity)};const l=c},71300:(t,e,i)=>{i.d(e,{Z:()=>_});var n=i(23114),o=i(54485),r=i(90332),s=i(91166),a=i(36274),c=i(27400),u=i(74064),l=i(28696),h=i(47334),d=i(59375);function f(){this._colorTexture=void 0,this._drawCommand=void 0}Object.defineProperties(f.prototype,{colorTexture:{get:function(){return this._colorTexture}}}),f.prototype.update=function(t){if(!(0,o.Z)(this._colorTexture)){const e=t.context,i=new h.Z({context:e,width:256,height:256,pixelFormat:s.Z.RGBA,pixelDatatype:c.Z.UNSIGNED_BYTE,sampler:l.Z.NEAREST});this._colorTexture=i;const o=new a.Z({context:e,colorTextures:[i],destroyAttachments:!1});!function(t,e,i){const o=e.createViewportQuadCommand(d.Z,{framebuffer:i,renderState:u.Z.fromCache({viewport:new n.Z(0,0,256,256)})});t._drawCommand=o}(this,e,o),this._drawCommand.execute(e),o.destroy(),this._drawCommand.shaderProgram=this._drawCommand.shaderProgram&&this._drawCommand.shaderProgram.destroy()}},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._colorTexture=this._colorTexture&&this._colorTexture.destroy(),(0,r.Z)(this)};const _=f},44584:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(88779),o=i(54485),r=i(20176),s=i(39226),a=i(5955);function c(t){const e=(t=(0,n.Z)(t,n.Z.EMPTY_OBJECT)).typedArray,i=t.resource,s=t.cacheKey;if((0,o.Z)(e)===(0,o.Z)(i))throw new r.Z("One of options.typedArray and options.resource must be defined.");this._typedArray=e,this._resource=i,this._cacheKey=s,this._state=a.Z.UNLOADED,this._promise=void 0}(0,o.Z)(Object.create)&&(c.prototype=Object.create(s.Z.prototype),c.prototype.constructor=c),Object.defineProperties(c.prototype,{promise:{get:function(){return this._promise}},cacheKey:{get:function(){return this._cacheKey}},typedArray:{get:function(){return this._typedArray}}}),c.prototype.load=function(){return(0,o.Z)(this._typedArray)?this._promise=Promise.resolve(this):this._promise=function(t){const e=t._resource;return t._state=a.Z.LOADING,c._fetchArrayBuffer(e).then((function(e){if(!t.isDestroyed())return t._typedArray=new Uint8Array(e),t._state=a.Z.READY,t})).catch((function(i){if(t.isDestroyed())return;t._state=a.Z.FAILED;const n=`Failed to load external buffer: ${e.url}`;return Promise.reject(t.getError(n,i))}))}(this),this._promise},c._fetchArrayBuffer=function(t){return t.fetchArrayBuffer()},c.prototype.unload=function(){this._typedArray=void 0}},38268:(t,e,i)=>{i.d(e,{Z:()=>Ue});var n=i(52351),o=i(59015),r=i(93517),s=i(90868),a=i(66866),c=i(88779),u=i(54485),l=i(20176),h=i(45971),d=i(99996),f=i(94025),_=i(92893),p=i(41780),Z=i(66246),m=i(55264),g=i(3169),y=i(14090),T=i(22874),b=i(39109),x=i(71118),C=i(74408),E=i(16587),w=i(84929),S=i(20291),A=i(43262),D=i(34152),I=i(7004),O=i(23934),v=i(50445),P=i(18061);function N(t){if(!(0,u.Z)(t))throw new l.Z("scene is required.");this._scene=t,this._transform=x.Z.clone(x.Z.IDENTITY),this._invTransform=x.Z.clone(x.Z.IDENTITY),this._actualTransform=x.Z.clone(x.Z.IDENTITY),this._actualInvTransform=x.Z.clone(x.Z.IDENTITY),this._transformChanged=!1,this.position=new r.Z,this._position=new r.Z,this._positionWC=new r.Z,this._positionCartographic=new a.Z,this._oldPositionWC=void 0,this.positionWCDeltaMagnitude=0,this.positionWCDeltaMagnitudeLastFrame=0,this.timeSinceMoved=0,this._lastMovedTimestamp=0,this.direction=new r.Z,this._direction=new r.Z,this._directionWC=new r.Z,this.up=new r.Z,this._up=new r.Z,this._upWC=new r.Z,this.right=new r.Z,this._right=new r.Z,this._rightWC=new r.Z,this.frustum=new w.Z,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.fov=T.Z.toRadians(60),this.defaultMoveAmount=1e5,this.defaultLookAmount=Math.PI/60,this.defaultRotateAmount=Math.PI/3600,this.defaultZoomAmount=1e5,this.constrainedAxis=void 0,this.maximumZoomFactor=1.5,this._moveStart=new _.Z,this._moveEnd=new _.Z,this._changed=new _.Z,this._changedPosition=void 0,this._changedDirection=void 0,this._changedFrustum=void 0,this._changedHeading=void 0,this.percentageChanged=.5,this._viewMatrix=new x.Z,this._invViewMatrix=new x.Z,L(this),this._mode=P.Z.SCENE3D,this._modeChanged=!0;const e=t.mapProjection;this._projection=e,this._maxCoord=e.project(new a.Z(Math.PI,T.Z.PI_OVER_TWO)),this._max2Dfrustum=void 0,$t(this,N.DEFAULT_VIEW_RECTANGLE,this.position,!0);let i=r.Z.magnitude(this.position);i+=i*N.DEFAULT_VIEW_FACTOR,r.Z.normalize(this.position,this.position),r.Z.multiplyByScalar(this.position,i,this.position)}function L(t){x.Z.computeView(t._position,t._direction,t._up,t._right,t._viewMatrix),x.Z.multiply(t._viewMatrix,t._actualInvTransform,t._viewMatrix),x.Z.inverseTransformation(t._viewMatrix,t._invViewMatrix)}N.TRANSFORM_2D=new x.Z(0,0,1,0,1,0,0,0,0,1,0,0,0,0,0,1),N.TRANSFORM_2D_INVERSE=x.Z.inverseTransformation(N.TRANSFORM_2D,new x.Z),N.DEFAULT_VIEW_RECTANGLE=D.Z.fromDegrees(-95,-20,-70,90),N.DEFAULT_VIEW_FACTOR=.5,N.DEFAULT_OFFSET=new Z.Z(0,-T.Z.PI_OVER_FOUR,0),N.prototype.canPreloadFlight=function(){return(0,u.Z)(this._currentFlight)&&this._mode!==P.Z.SCENE2D},N.prototype._updateCameraChanged=function(){const t=this;if(function(t){if((0,u.Z)(t._oldPositionWC)){t.positionWCDeltaMagnitudeLastFrame=t.positionWCDeltaMagnitude;const e=r.Z.subtract(t.positionWC,t._oldPositionWC,t._oldPositionWC);t.positionWCDeltaMagnitude=r.Z.magnitude(e),t._oldPositionWC=r.Z.clone(t.positionWC,t._oldPositionWC),t.positionWCDeltaMagnitude>0?(t.timeSinceMoved=0,t._lastMovedTimestamp=(0,p.Z)()):t.timeSinceMoved=Math.max((0,p.Z)()-t._lastMovedTimestamp,0)/1e3}else t._oldPositionWC=r.Z.clone(t.positionWC,t._oldPositionWC)}(t),0===t._changed.numberOfListeners)return;const e=t.percentageChanged,i=t.heading;(0,u.Z)(t._changedHeading)||(t._changedHeading=i);let n=Math.abs(t._changedHeading-i)%T.Z.TWO_PI;n=n>T.Z.PI?T.Z.TWO_PI-n:n;const o=n/Math.PI;if(o>e&&(t._changed.raiseEvent(o),t._changedHeading=i),t._mode===P.Z.SCENE2D){if(!(0,u.Z)(t._changedFrustum))return t._changedPosition=r.Z.clone(t.position,t._changedPosition),void(t._changedFrustum=t.frustum.clone());const i=t.position,n=t._changedPosition,o=t.frustum,s=t._changedFrustum,a=i.x+o.left,c=i.x+o.right,l=n.x+s.left,h=n.x+s.right,d=i.y+o.bottom,f=i.y+o.top,_=n.y+s.bottom,p=n.y+s.top,Z=Math.max(a,l),m=Math.min(c,h),g=Math.max(d,_),y=Math.min(f,p);let T;if(Z>=m||g>=f)T=1;else{let t=s;a<l&&c>h&&d<_&&f>p&&(t=o),T=1-(m-Z)*(y-g)/((t.right-t.left)*(t.top-t.bottom))}return void(T>e&&(t._changed.raiseEvent(T),t._changedPosition=r.Z.clone(t.position,t._changedPosition),t._changedFrustum=t.frustum.clone(t._changedFrustum)))}if(!(0,u.Z)(t._changedDirection))return t._changedPosition=r.Z.clone(t.positionWC,t._changedPosition),void(t._changedDirection=r.Z.clone(t.directionWC,t._changedDirection));const s=T.Z.acosClamped(r.Z.dot(t.directionWC,t._changedDirection));let a;a=(0,u.Z)(t.frustum.fovy)?s/(.5*t.frustum.fovy):s;const c=r.Z.distance(t.positionWC,t._changedPosition)/t.positionCartographic.height;(a>e||c>e)&&(t._changed.raiseEvent(Math.max(a,c)),t._changedPosition=r.Z.clone(t.positionWC,t._changedPosition),t._changedDirection=r.Z.clone(t.directionWC,t._changedDirection))};const R=new a.Z,M=new r.Z,B=new r.Z,U=new s.Z,F=new s.Z,W=new s.Z,V=new s.Z,k=new s.Z;const H=new r.Z;function z(t){const e=t._mode;let i=!1,n=0;e===P.Z.SCENE2D&&(n=t.frustum.right-t.frustum.left,i=n!==t._positionCartographic.height);let o=t._position;const a=!r.Z.equals(o,t.position)||i;a&&(o=r.Z.clone(t.position,t._position));let c=t._direction;const u=!r.Z.equals(c,t.direction);u&&(r.Z.normalize(t.direction,t.direction),c=r.Z.clone(t.direction,t._direction));let l=t._up;const h=!r.Z.equals(l,t.up);h&&(r.Z.normalize(t.up,t.up),l=r.Z.clone(t.up,t._up));let d=t._right;const f=!r.Z.equals(d,t.right);f&&(r.Z.normalize(t.right,t.right),d=r.Z.clone(t.right,t._right));const _=t._transformChanged||t._modeChanged;t._transformChanged=!1,_&&(x.Z.inverseTransformation(t._transform,t._invTransform),t._mode===P.Z.COLUMBUS_VIEW||t._mode===P.Z.SCENE2D?x.Z.equals(x.Z.IDENTITY,t._transform)?x.Z.clone(N.TRANSFORM_2D,t._actualTransform):t._mode===P.Z.COLUMBUS_VIEW?function(t){I.Z.basisTo2D(t._projection,t._transform,t._actualTransform)}(t):function(t){const e=t._projection,i=e.ellipsoid,n=x.Z.getColumn(t._transform,3,U),o=i.cartesianToCartographic(n,R),a=e.project(o,M),c=F;c.x=a.z,c.y=a.x,c.z=a.y,c.w=1;const u=s.Z.clone(s.Z.UNIT_X,k),l=s.Z.add(x.Z.getColumn(t._transform,0,B),n,B);i.cartesianToCartographic(l,o),e.project(o,a);const h=W;h.x=a.z,h.y=a.x,h.z=a.y,h.w=0,r.Z.subtract(h,c,h),h.x=0;const d=V;if(r.Z.magnitudeSquared(h)>T.Z.EPSILON10)r.Z.cross(u,h,d);else{const u=s.Z.add(x.Z.getColumn(t._transform,1,B),n,B);i.cartesianToCartographic(u,o),e.project(o,a),d.x=a.z,d.y=a.x,d.z=a.y,d.w=0,r.Z.subtract(d,c,d),d.x=0,r.Z.magnitudeSquared(d)<T.Z.EPSILON10&&(s.Z.clone(s.Z.UNIT_Y,h),s.Z.clone(s.Z.UNIT_Z,d))}r.Z.cross(d,u,h),r.Z.normalize(h,h),r.Z.cross(u,h,d),r.Z.normalize(d,d),x.Z.setColumn(t._actualTransform,0,h,t._actualTransform),x.Z.setColumn(t._actualTransform,1,d,t._actualTransform),x.Z.setColumn(t._actualTransform,2,u,t._actualTransform),x.Z.setColumn(t._actualTransform,3,c,t._actualTransform)}(t):x.Z.clone(t._transform,t._actualTransform),x.Z.inverseTransformation(t._actualTransform,t._actualInvTransform),t._modeChanged=!1);const p=t._actualTransform;if(a||_)if(t._positionWC=x.Z.multiplyByPoint(p,o,t._positionWC),e===P.Z.SCENE3D||e===P.Z.MORPHING)t._positionCartographic=t._projection.ellipsoid.cartesianToCartographic(t._positionWC,t._positionCartographic);else{const i=H;i.x=t._positionWC.y,i.y=t._positionWC.z,i.z=t._positionWC.x,e===P.Z.SCENE2D&&(i.z=n),t._projection.unproject(i,t._positionCartographic)}if(u||h||f){const e=r.Z.dot(c,r.Z.cross(l,d,H));if(Math.abs(1-e)>T.Z.EPSILON2){const e=1/r.Z.magnitudeSquared(l),i=r.Z.dot(l,c)*e,n=r.Z.multiplyByScalar(c,i,H);l=r.Z.normalize(r.Z.subtract(l,n,t._up),t._up),r.Z.clone(l,t.up),d=r.Z.cross(c,l,t._right),r.Z.clone(d,t.right)}}(u||_)&&(t._directionWC=x.Z.multiplyByPointAsVector(p,c,t._directionWC),r.Z.normalize(t._directionWC,t._directionWC)),(h||_)&&(t._upWC=x.Z.multiplyByPointAsVector(p,l,t._upWC),r.Z.normalize(t._upWC,t._upWC)),(f||_)&&(t._rightWC=x.Z.multiplyByPointAsVector(p,d,t._rightWC),r.Z.normalize(t._rightWC,t._rightWC)),(a||u||h||f||_)&&L(t)}function q(t,e){let i;return i=T.Z.equalsEpsilon(Math.abs(t.z),1,T.Z.EPSILON3)?Math.atan2(e.y,e.x)-T.Z.PI_OVER_TWO:Math.atan2(t.y,t.x)-T.Z.PI_OVER_TWO,T.Z.TWO_PI-T.Z.zeroToTwoPi(i)}function G(t){return T.Z.PI_OVER_TWO-T.Z.acosClamped(t.z)}function j(t,e,i){let n=0;return T.Z.equalsEpsilon(Math.abs(t.z),1,T.Z.EPSILON3)||(n=Math.atan2(-i.z,e.z),n=T.Z.zeroToTwoPi(n+T.Z.TWO_PI)),n}const Y=new x.Z,X=new x.Z;Object.defineProperties(N.prototype,{transform:{get:function(){return this._transform}},inverseTransform:{get:function(){return z(this),this._invTransform}},viewMatrix:{get:function(){return z(this),this._viewMatrix}},inverseViewMatrix:{get:function(){return z(this),this._invViewMatrix}},positionCartographic:{get:function(){return z(this),this._positionCartographic}},positionWC:{get:function(){return z(this),this._positionWC}},directionWC:{get:function(){return z(this),this._directionWC}},upWC:{get:function(){return z(this),this._upWC}},rightWC:{get:function(){return z(this),this._rightWC}},heading:{get:function(){if(this._mode!==P.Z.MORPHING){const t=this._projection.ellipsoid,e=x.Z.clone(this._transform,Y),i=I.Z.eastNorthUpToFixedFrame(this.positionWC,t,X);this._setTransform(i);const n=q(this.direction,this.up);return this._setTransform(e),n}}},pitch:{get:function(){if(this._mode!==P.Z.MORPHING){const t=this._projection.ellipsoid,e=x.Z.clone(this._transform,Y),i=I.Z.eastNorthUpToFixedFrame(this.positionWC,t,X);this._setTransform(i);const n=G(this.direction);return this._setTransform(e),n}}},roll:{get:function(){if(this._mode!==P.Z.MORPHING){const t=this._projection.ellipsoid,e=x.Z.clone(this._transform,Y),i=I.Z.eastNorthUpToFixedFrame(this.positionWC,t,X);this._setTransform(i);const n=j(this.direction,this.up,this.right);return this._setTransform(e),n}}},moveStart:{get:function(){return this._moveStart}},moveEnd:{get:function(){return this._moveEnd}},changed:{get:function(){return this._changed}}}),N.prototype.update=function(t){if(!(0,u.Z)(t))throw new l.Z("mode is required.");if(t===P.Z.SCENE2D&&!(this.frustum instanceof E.Z))throw new l.Z("An OrthographicOffCenterFrustum is required in 2D.");if(!(t!==P.Z.SCENE3D&&t!==P.Z.COLUMBUS_VIEW||this.frustum instanceof w.Z||this.frustum instanceof C.Z))throw new l.Z("A PerspectiveFrustum or OrthographicFrustum is required in 3D and Columbus view");let e=!1;if(t!==this._mode&&(this._mode=t,this._modeChanged=t!==P.Z.MORPHING,e=this._mode===P.Z.SCENE2D),e){const t=this._max2Dfrustum=this.frustum.clone();if(!(t instanceof E.Z))throw new l.Z("The camera frustum is expected to be orthographic for 2D camera control.");const e=2,i=t.top/t.right;t.right=this._maxCoord.x*e,t.left=-t.right,t.top=i*t.right,t.bottom=-t.top}this._mode===P.Z.SCENE2D&&mt(this,this.position)};const $=new r.Z,K=new r.Z,J=new r.Z;N.prototype._setTransform=function(t){const e=r.Z.clone(this.positionWC,$),i=r.Z.clone(this.upWC,K),n=r.Z.clone(this.directionWC,J);x.Z.clone(t,this._transform),this._transformChanged=!0,z(this);const o=this._actualInvTransform;x.Z.multiplyByPoint(o,e,this.position),x.Z.multiplyByPointAsVector(o,n,this.direction),x.Z.multiplyByPointAsVector(o,i,this.up),r.Z.cross(this.direction,this.up,this.right),z(this)};const Q=new o.Z,tt=new A.Z,et=new r.Z,it=new r.Z;function nt(t){if(!x.Z.equals(x.Z.IDENTITY,t.transform))return r.Z.magnitude(t.position);const e=t._scene,i=e.globe,n=Q;let o,s,a;if(n.x=e.drawingBufferWidth/2,n.y=e.drawingBufferHeight/2,(0,u.Z)(i)){const r=t.getPickRay(n,tt);o=i.pickWorldCoordinates(r,e,!0,et)}if(e.pickPositionSupported&&(s=e.pickPositionWorldCoordinates(n,it)),(0,u.Z)(o)||(0,u.Z)(s)){const e=(0,u.Z)(s)?r.Z.distance(s,t.positionWC):Number.POSITIVE_INFINITY,i=(0,u.Z)(o)?r.Z.distance(o,t.positionWC):Number.POSITIVE_INFINITY;a=Math.min(e,i)}else a=Math.max(t.positionCartographic.height,0);return a}N.prototype._adjustOrthographicFrustum=function(t){this.frustum instanceof C.Z&&(!t&&this._positionCartographic.height<15e4||(this.frustum.width=nt(this)))};const ot=new r.Z,rt=new x.Z,st=new x.Z,at=new S.Z,ct=new b.Z,ut=new a.Z;const lt=new r.Z,ht=new r.Z,dt=new r.Z;function ft(t,e,i,n){const o=r.Z.clone(i.direction,lt),s=r.Z.clone(i.up,ht);if(t._scene.mode===P.Z.SCENE3D){const i=t._projection.ellipsoid,n=I.Z.eastNorthUpToFixedFrame(e,i,Y),r=x.Z.inverseTransformation(n,X);x.Z.multiplyByPointAsVector(r,o,o),x.Z.multiplyByPointAsVector(r,s,s)}const a=r.Z.cross(o,s,dt);return n.heading=q(o,s),n.pitch=G(o),n.roll=j(o,s,a),n}const _t={destination:void 0,orientation:{direction:void 0,up:void 0,heading:void 0,pitch:void 0,roll:void 0},convert:void 0,endTransform:void 0},pt=new m.Z;N.prototype.setView=function(t){t=(0,c.Z)(t,c.Z.EMPTY_OBJECT);let e=(0,c.Z)(t.orientation,c.Z.EMPTY_OBJECT);const i=this._mode;if(i===P.Z.MORPHING)return;(0,u.Z)(t.endTransform)&&this._setTransform(t.endTransform);let n=(0,c.Z)(t.convert,!0),s=(0,c.Z)(t.destination,r.Z.clone(this.positionWC,ot));(0,u.Z)(s)&&(0,u.Z)(s.west)&&(s=this.getRectangleCameraCoordinates(s,ot),n=!1),(0,u.Z)(e.direction)&&(e=ft(this,s,e,_t.orientation)),pt.heading=(0,c.Z)(e.heading,0),pt.pitch=(0,c.Z)(e.pitch,-T.Z.PI_OVER_TWO),pt.roll=(0,c.Z)(e.roll,0),i===P.Z.SCENE3D?function(t,e,i){const n=x.Z.clone(t.transform,rt),o=I.Z.eastNorthUpToFixedFrame(e,t._projection.ellipsoid,st);t._setTransform(o),r.Z.clone(r.Z.ZERO,t.position),i.heading=i.heading-T.Z.PI_OVER_TWO;const s=S.Z.fromHeadingPitchRoll(i,at),a=b.Z.fromQuaternion(s,ct);b.Z.getColumn(a,0,t.direction),b.Z.getColumn(a,2,t.up),r.Z.cross(t.direction,t.up,t.right),t._setTransform(n),t._adjustOrthographicFrustum(!0)}(this,s,pt):i===P.Z.SCENE2D?function(t,e,i,n){const s=x.Z.clone(t.transform,rt);if(t._setTransform(x.Z.IDENTITY),!r.Z.equals(e,t.positionWC)){if(n){const i=t._projection,n=i.ellipsoid.cartesianToCartographic(e,ut);e=i.project(n,ot)}o.Z.clone(e,t.position);const i=.5*-e.z,r=-i,s=t.frustum;if(r>i){const t=s.top/s.right;s.right=r,s.left=i,s.top=s.right*t,s.bottom=-s.top}}if(t._scene.mapMode2D===v.Z.ROTATE){i.heading=i.heading-T.Z.PI_OVER_TWO,i.pitch=-T.Z.PI_OVER_TWO,i.roll=0;const e=S.Z.fromHeadingPitchRoll(i,at),n=b.Z.fromQuaternion(e,ct);b.Z.getColumn(n,2,t.up),r.Z.cross(t.direction,t.up,t.right)}t._setTransform(s)}(this,s,pt,n):function(t,e,i,n){const o=x.Z.clone(t.transform,rt);if(t._setTransform(x.Z.IDENTITY),!r.Z.equals(e,t.positionWC)){if(n){const i=t._projection,n=i.ellipsoid.cartesianToCartographic(e,ut);e=i.project(n,ot)}r.Z.clone(e,t.position)}i.heading=i.heading-T.Z.PI_OVER_TWO;const s=S.Z.fromHeadingPitchRoll(i,at),a=b.Z.fromQuaternion(s,ct);b.Z.getColumn(a,0,t.direction),b.Z.getColumn(a,2,t.up),r.Z.cross(t.direction,t.up,t.right),t._setTransform(o),t._adjustOrthographicFrustum(!0)}(this,s,pt,n)};const Zt=new r.Z;function mt(t,e){const i=t._scene.mapMode2D===v.Z.ROTATE,n=t._maxCoord.x,o=t._maxCoord.y;let r,s;i?(s=n,r=-s):(s=e.x-2*n,r=e.x+2*n),e.x>n&&(e.x=s),e.x<-n&&(e.x=r),e.y>o&&(e.y=o),e.y<-o&&(e.y=-o)}N.prototype.flyHome=function(t){const e=this._mode;if(e===P.Z.MORPHING&&this._scene.completeMorph(),e===P.Z.SCENE2D)this.flyTo({destination:N.DEFAULT_VIEW_RECTANGLE,duration:t,endTransform:x.Z.IDENTITY});else if(e===P.Z.SCENE3D){const e=this.getRectangleCameraCoordinates(N.DEFAULT_VIEW_RECTANGLE);let i=r.Z.magnitude(e);i+=i*N.DEFAULT_VIEW_FACTOR,r.Z.normalize(e,e),r.Z.multiplyByScalar(e,i,e),this.flyTo({destination:e,duration:t,endTransform:x.Z.IDENTITY})}else if(e===P.Z.COLUMBUS_VIEW){const e=this._projection.ellipsoid.maximumRadius;let i=new r.Z(0,-1,1);i=r.Z.multiplyByScalar(r.Z.normalize(i,i),5*e,i),this.flyTo({destination:i,duration:t,orientation:{heading:0,pitch:-Math.acos(r.Z.normalize(i,Zt).z),roll:0},endTransform:x.Z.IDENTITY,convert:!1})}},N.prototype.worldToCameraCoordinates=function(t,e){if(!(0,u.Z)(t))throw new l.Z("cartesian is required.");return(0,u.Z)(e)||(e=new s.Z),z(this),x.Z.multiplyByVector(this._actualInvTransform,t,e)},N.prototype.worldToCameraCoordinatesPoint=function(t,e){if(!(0,u.Z)(t))throw new l.Z("cartesian is required.");return(0,u.Z)(e)||(e=new r.Z),z(this),x.Z.multiplyByPoint(this._actualInvTransform,t,e)},N.prototype.worldToCameraCoordinatesVector=function(t,e){if(!(0,u.Z)(t))throw new l.Z("cartesian is required.");return(0,u.Z)(e)||(e=new r.Z),z(this),x.Z.multiplyByPointAsVector(this._actualInvTransform,t,e)},N.prototype.cameraToWorldCoordinates=function(t,e){if(!(0,u.Z)(t))throw new l.Z("cartesian is required.");return(0,u.Z)(e)||(e=new s.Z),z(this),x.Z.multiplyByVector(this._actualTransform,t,e)},N.prototype.cameraToWorldCoordinatesPoint=function(t,e){if(!(0,u.Z)(t))throw new l.Z("cartesian is required.");return(0,u.Z)(e)||(e=new r.Z),z(this),x.Z.multiplyByPoint(this._actualTransform,t,e)},N.prototype.cameraToWorldCoordinatesVector=function(t,e){if(!(0,u.Z)(t))throw new l.Z("cartesian is required.");return(0,u.Z)(e)||(e=new r.Z),z(this),x.Z.multiplyByPointAsVector(this._actualTransform,t,e)};const gt=new r.Z;N.prototype.move=function(t,e){if(!(0,u.Z)(t))throw new l.Z("direction is required.");const i=this.position;r.Z.multiplyByScalar(t,e,gt),r.Z.add(i,gt,i),this._mode===P.Z.SCENE2D&&mt(this,i),this._adjustOrthographicFrustum(!0)},N.prototype.moveForward=function(t){t=(0,c.Z)(t,this.defaultMoveAmount),this._mode===P.Z.SCENE2D?It(this,t):this.move(this.direction,t)},N.prototype.moveBackward=function(t){t=(0,c.Z)(t,this.defaultMoveAmount),this._mode===P.Z.SCENE2D?It(this,-t):this.move(this.direction,-t)},N.prototype.moveUp=function(t){t=(0,c.Z)(t,this.defaultMoveAmount),this.move(this.up,t)},N.prototype.moveDown=function(t){t=(0,c.Z)(t,this.defaultMoveAmount),this.move(this.up,-t)},N.prototype.moveRight=function(t){t=(0,c.Z)(t,this.defaultMoveAmount),this.move(this.right,t)},N.prototype.moveLeft=function(t){t=(0,c.Z)(t,this.defaultMoveAmount),this.move(this.right,-t)},N.prototype.lookLeft=function(t){t=(0,c.Z)(t,this.defaultLookAmount),this._mode!==P.Z.SCENE2D&&this.look(this.up,-t)},N.prototype.lookRight=function(t){t=(0,c.Z)(t,this.defaultLookAmount),this._mode!==P.Z.SCENE2D&&this.look(this.up,t)},N.prototype.lookUp=function(t){t=(0,c.Z)(t,this.defaultLookAmount),this._mode!==P.Z.SCENE2D&&this.look(this.right,-t)},N.prototype.lookDown=function(t){t=(0,c.Z)(t,this.defaultLookAmount),this._mode!==P.Z.SCENE2D&&this.look(this.right,t)};const yt=new S.Z,Tt=new b.Z;N.prototype.look=function(t,e){if(!(0,u.Z)(t))throw new l.Z("axis is required.");const i=(0,c.Z)(e,this.defaultLookAmount),n=S.Z.fromAxisAngle(t,-i,yt),o=b.Z.fromQuaternion(n,Tt),r=this.direction,s=this.up,a=this.right;b.Z.multiplyByVector(o,r,r),b.Z.multiplyByVector(o,s,s),b.Z.multiplyByVector(o,a,a)},N.prototype.twistLeft=function(t){t=(0,c.Z)(t,this.defaultLookAmount),this.look(this.direction,t)},N.prototype.twistRight=function(t){t=(0,c.Z)(t,this.defaultLookAmount),this.look(this.direction,-t)};const bt=new S.Z,xt=new b.Z;N.prototype.rotate=function(t,e){if(!(0,u.Z)(t))throw new l.Z("axis is required.");const i=(0,c.Z)(e,this.defaultRotateAmount),n=S.Z.fromAxisAngle(t,-i,bt),o=b.Z.fromQuaternion(n,xt);b.Z.multiplyByVector(o,this.position,this.position),b.Z.multiplyByVector(o,this.direction,this.direction),b.Z.multiplyByVector(o,this.up,this.up),r.Z.cross(this.direction,this.up,this.right),r.Z.cross(this.right,this.direction,this.up),this._adjustOrthographicFrustum(!1)},N.prototype.rotateDown=function(t){At(this,t=(0,c.Z)(t,this.defaultRotateAmount))},N.prototype.rotateUp=function(t){At(this,-(t=(0,c.Z)(t,this.defaultRotateAmount)))};const Ct=new r.Z,Et=new r.Z,wt=new r.Z,St=new r.Z;function At(t,e){const i=t.position;if((0,u.Z)(t.constrainedAxis)&&!r.Z.equalsEpsilon(t.position,r.Z.ZERO,T.Z.EPSILON2)){const n=r.Z.normalize(i,Ct),o=r.Z.equalsEpsilon(n,t.constrainedAxis,T.Z.EPSILON2),s=r.Z.equalsEpsilon(n,r.Z.negate(t.constrainedAxis,St),T.Z.EPSILON2);if(o||s)(o&&e<0||s&&e>0)&&t.rotate(t.right,e);else{const i=r.Z.normalize(t.constrainedAxis,Et);let o=r.Z.dot(n,i),s=T.Z.acosClamped(o);e>0&&e>s&&(e=s-T.Z.EPSILON4),o=r.Z.dot(n,r.Z.negate(i,St)),s=T.Z.acosClamped(o),e<0&&-e>s&&(e=-s+T.Z.EPSILON4);const a=r.Z.cross(i,n,wt);t.rotate(a,e)}}else t.rotate(t.right,e)}function Dt(t,e){(0,u.Z)(t.constrainedAxis)?t.rotate(t.constrainedAxis,e):t.rotate(t.up,e)}function It(t,e){const i=t.frustum;if(!(i instanceof E.Z&&(0,u.Z)(i.left)&&(0,u.Z)(i.right)&&(0,u.Z)(i.bottom)&&(0,u.Z)(i.top)))throw new l.Z("The camera frustum is expected to be orthographic for 2D camera control.");let n;if(e*=.5,Math.abs(i.top)+Math.abs(i.bottom)>Math.abs(i.left)+Math.abs(i.right)){let o=i.top-e,r=i.bottom+e,s=t._maxCoord.y;t._scene.mapMode2D===v.Z.ROTATE&&(s*=t.maximumZoomFactor),r>s&&(r=s,o=-s),o<=r&&(o=1,r=-1),n=i.right/i.top,i.top=o,i.bottom=r,i.right=i.top*n,i.left=-i.right}else{let o=i.right-e,r=i.left+e,s=t._maxCoord.x;t._scene.mapMode2D===v.Z.ROTATE&&(s*=t.maximumZoomFactor),o>s&&(o=s,r=-s),o<=r&&(o=1,r=-1),n=i.top/i.right,i.right=o,i.left=r,i.top=i.right*n,i.bottom=-i.top}}function Ot(t,e){t.move(t.direction,e)}N.prototype.rotateRight=function(t){Dt(this,-(t=(0,c.Z)(t,this.defaultRotateAmount)))},N.prototype.rotateLeft=function(t){Dt(this,t=(0,c.Z)(t,this.defaultRotateAmount))},N.prototype.zoomIn=function(t){t=(0,c.Z)(t,this.defaultZoomAmount),this._mode===P.Z.SCENE2D?It(this,t):Ot(this,t)},N.prototype.zoomOut=function(t){t=(0,c.Z)(t,this.defaultZoomAmount),this._mode===P.Z.SCENE2D?It(this,-t):Ot(this,-t)},N.prototype.getMagnitude=function(){return this._mode===P.Z.SCENE3D?r.Z.magnitude(this.position):this._mode===P.Z.COLUMBUS_VIEW?Math.abs(this.position.z):this._mode===P.Z.SCENE2D?Math.max(this.frustum.right-this.frustum.left,this.frustum.top-this.frustum.bottom):void 0};const vt=new x.Z;N.prototype.lookAt=function(t,e){if(!(0,u.Z)(t))throw new l.Z("target is required");if(!(0,u.Z)(e))throw new l.Z("offset is required");if(this._mode===P.Z.MORPHING)throw new l.Z("lookAt is not supported while morphing.");const i=I.Z.eastNorthUpToFixedFrame(t,d.Z.WGS84,vt);this.lookAtTransform(i,e)};const Pt=new r.Z,Nt=new S.Z,Lt=new S.Z,Rt=new b.Z;function Mt(t,e,i){e=T.Z.clamp(e,-T.Z.PI_OVER_TWO,T.Z.PI_OVER_TWO),t=T.Z.zeroToTwoPi(t)-T.Z.PI_OVER_TWO;const n=S.Z.fromAxisAngle(r.Z.UNIT_Y,-e,Nt),o=S.Z.fromAxisAngle(r.Z.UNIT_Z,-t,Lt),s=S.Z.multiply(o,n,o),a=b.Z.fromQuaternion(s,Rt),c=r.Z.clone(r.Z.UNIT_X,Pt);return b.Z.multiplyByVector(a,c,c),r.Z.negate(c,c),r.Z.multiplyByScalar(c,i,c),c}N.prototype.lookAtTransform=function(t,e){if(!(0,u.Z)(t))throw new l.Z("transform is required");if(this._mode===P.Z.MORPHING)throw new l.Z("lookAtTransform is not supported while morphing.");if(this._setTransform(t),!(0,u.Z)(e))return;let i;if(i=(0,u.Z)(e.heading)?Mt(e.heading,e.pitch,e.range):e,this._mode===P.Z.SCENE2D){o.Z.clone(o.Z.ZERO,this.position),r.Z.negate(i,this.up),this.up.z=0,r.Z.magnitudeSquared(this.up)<T.Z.EPSILON10&&r.Z.clone(r.Z.UNIT_Y,this.up),r.Z.normalize(this.up,this.up),this._setTransform(x.Z.IDENTITY),r.Z.negate(r.Z.UNIT_Z,this.direction),r.Z.cross(this.direction,this.up,this.right),r.Z.normalize(this.right,this.right);const e=this.frustum,n=e.top/e.right;return e.right=.5*r.Z.magnitude(i),e.left=-e.right,e.top=n*e.right,e.bottom=-e.top,void this._setTransform(t)}r.Z.clone(i,this.position),r.Z.negate(this.position,this.direction),r.Z.normalize(this.direction,this.direction),r.Z.cross(this.direction,r.Z.UNIT_Z,this.right),r.Z.magnitudeSquared(this.right)<T.Z.EPSILON10&&r.Z.clone(r.Z.UNIT_X,this.right),r.Z.normalize(this.right,this.right),r.Z.cross(this.right,this.direction,this.up),r.Z.normalize(this.up,this.up),this._adjustOrthographicFrustum(!0)};const Bt=new a.Z,Ut=new a.Z,Ft=new r.Z,Wt=new r.Z,Vt=new r.Z,kt=new r.Z,Ht=new r.Z,zt=new r.Z,qt=new r.Z,Gt=new r.Z,jt={direction:new r.Z,right:new r.Z,up:new r.Z};let Yt;function Xt(t,e,i,n){return Math.abs(r.Z.dot(e,i))/n-r.Z.dot(t,i)}function $t(t,e,i,n){const o=t._projection.ellipsoid,s=n?t:jt,a=e.north,c=e.south;let l=e.east;const h=e.west;h>l&&(l+=T.Z.TWO_PI);const d=.5*(h+l);let _;if(c<-T.Z.PI_OVER_TWO+T.Z.RADIANS_PER_DEGREE&&a>T.Z.PI_OVER_TWO-T.Z.RADIANS_PER_DEGREE)_=0;else{const t=Bt;t.longitude=d,t.latitude=a,t.height=0;const e=Ut;e.longitude=d,e.latitude=c,e.height=0;let i=Yt;(0,u.Z)(i)&&i.ellipsoid===o||(Yt=i=new f.Z(void 0,void 0,o)),i.setEndPoints(t,e),_=i.interpolateUsingFraction(.5,Bt).latitude}const p=Bt;p.longitude=d,p.latitude=_,p.height=0;const Z=o.cartographicToCartesian(p,qt),m=Bt;m.longitude=l,m.latitude=a;const g=o.cartographicToCartesian(m,Ft);m.longitude=h;const y=o.cartographicToCartesian(m,Vt);m.longitude=d;const b=o.cartographicToCartesian(m,Ht);m.latitude=c;const x=o.cartographicToCartesian(m,zt);m.longitude=l;const E=o.cartographicToCartesian(m,kt);m.longitude=h;const w=o.cartographicToCartesian(m,Wt);r.Z.subtract(y,Z,y),r.Z.subtract(E,Z,E),r.Z.subtract(g,Z,g),r.Z.subtract(w,Z,w),r.Z.subtract(b,Z,b),r.Z.subtract(x,Z,x);const S=o.geodeticSurfaceNormal(Z,s.direction);r.Z.negate(S,S);const A=r.Z.cross(S,r.Z.UNIT_Z,s.right);r.Z.normalize(A,A);const D=r.Z.cross(A,S,s.up);let I;if(t.frustum instanceof C.Z){const e=Math.max(r.Z.distance(g,y),r.Z.distance(E,w)),i=Math.max(r.Z.distance(g,E),r.Z.distance(y,w));let n,o;const s=t.frustum._offCenterFrustum.right/t.frustum._offCenterFrustum.top,a=i*s;e>a?(n=e,o=n/s):(o=i,n=a),I=Math.max(n,o)}else{const e=Math.tan(.5*t.frustum.fovy),i=t.frustum.aspectRatio*e;if(I=Math.max(Xt(S,D,y,e),Xt(S,D,E,e),Xt(S,D,g,e),Xt(S,D,w,e),Xt(S,D,b,e),Xt(S,D,x,e),Xt(S,A,y,i),Xt(S,A,E,i),Xt(S,A,g,i),Xt(S,A,w,i),Xt(S,A,b,i),Xt(S,A,x,i)),c<0&&a>0){const t=Bt;t.longitude=h,t.latitude=0,t.height=0;let n=o.cartographicToCartesian(t,Gt);r.Z.subtract(n,Z,n),I=Math.max(I,Xt(S,D,n,e),Xt(S,A,n,i)),t.longitude=l,n=o.cartographicToCartesian(t,Gt),r.Z.subtract(n,Z,n),I=Math.max(I,Xt(S,D,n,e),Xt(S,A,n,i))}}return r.Z.add(Z,r.Z.multiplyByScalar(S,-I,Gt),i)}const Kt=new a.Z,Jt=new r.Z,Qt=new r.Z;const te=new a.Z,ee=new r.Z,ie=new r.Z;N.prototype.getRectangleCameraCoordinates=function(t,e){if(!(0,u.Z)(t))throw new l.Z("rectangle is required");const i=this._mode;return(0,u.Z)(e)||(e=new r.Z),i===P.Z.SCENE3D?$t(this,t,e):i===P.Z.COLUMBUS_VIEW?function(t,e,i){const n=t._projection;e.west>e.east&&(e=D.Z.MAX_VALUE);const o=t._actualTransform,r=t._actualInvTransform,s=Kt;s.longitude=e.east,s.latitude=e.north;const a=n.project(s,Jt);x.Z.multiplyByPoint(o,a,a),x.Z.multiplyByPoint(r,a,a),s.longitude=e.west,s.latitude=e.south;const c=n.project(s,Qt);if(x.Z.multiplyByPoint(o,c,c),x.Z.multiplyByPoint(r,c,c),i.x=.5*(a.x-c.x)+c.x,i.y=.5*(a.y-c.y)+c.y,(0,u.Z)(t.frustum.fovy)){const e=Math.tan(.5*t.frustum.fovy),n=t.frustum.aspectRatio*e;i.z=.5*Math.max((a.x-c.x)/n,(a.y-c.y)/e)}else{const t=a.x-c.x,e=a.y-c.y;i.z=Math.max(t,e)}return i}(this,t,e):i===P.Z.SCENE2D?function(t,e,i){const n=t._projection;let o=e.east;e.west>e.east&&(t._scene.mapMode2D===v.Z.INFINITE_SCROLL?o+=T.Z.TWO_PI:o=(e=D.Z.MAX_VALUE).east);let r=te;r.longitude=o,r.latitude=e.north;const s=n.project(r,ee);r.longitude=e.west,r.latitude=e.south;const a=n.project(r,ie),c=.5*Math.abs(s.x-a.x);let u,l,h=.5*Math.abs(s.y-a.y);const d=t.frustum.right/t.frustum.top,f=h*d;return c>f?(u=c,l=u/d):(l=h,u=f),h=Math.max(2*u,2*l),i.x=.5*(s.x-a.x)+a.x,i.y=.5*(s.y-a.y)+a.y,r=n.unproject(i,r),r.height=h,n.project(r,i)}(this,t,e):void 0};const ne=new A.Z;const oe=new A.Z;const re=new A.Z;N.prototype.pickEllipsoid=function(t,e,i){if(!(0,u.Z)(t))throw new l.Z("windowPosition is required.");const n=this._scene.canvas;if(0!==n.clientWidth&&0!==n.clientHeight){if((0,u.Z)(i)||(i=new r.Z),e=(0,c.Z)(e,d.Z.WGS84),this._mode===P.Z.SCENE3D)i=function(t,e,i,n){i=(0,c.Z)(i,d.Z.WGS84);const o=t.getPickRay(e,ne),r=y.Z.rayEllipsoid(o,i);if(!r)return;const s=r.start>0?r.start:r.stop;return A.Z.getPoint(o,s,n)}(this,t,e,i);else if(this._mode===P.Z.SCENE2D)i=function(t,e,i,n){let o=t.getPickRay(e,oe).origin;o=r.Z.fromElements(o.y,o.z,0,o);const s=i.unproject(o);if(!(s.latitude<-T.Z.PI_OVER_TWO||s.latitude>T.Z.PI_OVER_TWO))return i.ellipsoid.cartographicToCartesian(s,n)}(this,t,this._projection,i);else{if(this._mode!==P.Z.COLUMBUS_VIEW)return;i=function(t,e,i,n){const o=t.getPickRay(e,re),s=-o.origin.x/o.direction.x;A.Z.getPoint(o,s,n);const a=i.unproject(new r.Z(n.y,n.z,0));if(!(a.latitude<-T.Z.PI_OVER_TWO||a.latitude>T.Z.PI_OVER_TWO||a.longitude<-Math.PI||a.longitude>Math.PI))return i.ellipsoid.cartographicToCartesian(a,n)}(this,t,this._projection,i)}return i}};const se=new r.Z,ae=new r.Z,ce=new r.Z;const ue=new r.Z;N.prototype.getPickRay=function(t,e){if(!(0,u.Z)(t))throw new l.Z("windowPosition is required.");(0,u.Z)(e)||(e=new A.Z);const i=this._scene.canvas;if(i.clientWidth<=0||i.clientHeight<=0)return;const n=this.frustum;return(0,u.Z)(n.aspectRatio)&&(0,u.Z)(n.fov)&&(0,u.Z)(n.near)?function(t,e,i){const n=t._scene.canvas,o=n.clientWidth,s=n.clientHeight,a=Math.tan(.5*t.frustum.fovy),c=t.frustum.aspectRatio*a,u=t.frustum.near,l=2/o*e.x-1,h=2/s*(s-e.y)-1,d=t.positionWC;r.Z.clone(d,i.origin);const f=r.Z.multiplyByScalar(t.directionWC,u,se);r.Z.add(d,f,f);const _=r.Z.multiplyByScalar(t.rightWC,l*u*c,ae),p=r.Z.multiplyByScalar(t.upWC,h*u*a,ce),Z=r.Z.add(f,_,i.direction);return r.Z.add(Z,p,Z),r.Z.subtract(Z,d,Z),r.Z.normalize(Z,Z),i}(this,t,e):function(t,e,i){const n=t._scene.canvas,o=n.clientWidth,s=n.clientHeight;let a=t.frustum;(0,u.Z)(a._offCenterFrustum)&&(a=a._offCenterFrustum);let c=2/o*e.x-1;c*=.5*(a.right-a.left);let l=2/s*(s-e.y)-1;l*=.5*(a.top-a.bottom);const h=i.origin;return r.Z.clone(t.position,h),r.Z.multiplyByScalar(t.right,c,ue),r.Z.add(ue,h,h),r.Z.multiplyByScalar(t.up,l,ue),r.Z.add(ue,h,h),r.Z.clone(t.directionWC,i.direction),t._mode!==P.Z.COLUMBUS_VIEW&&t._mode!==P.Z.SCENE2D||r.Z.fromElements(i.origin.z,i.origin.x,i.origin.y,i.origin),i}(this,t,e)};const le=new r.Z,he=new r.Z;N.prototype.distanceToBoundingSphere=function(t){if(!(0,u.Z)(t))throw new l.Z("boundingSphere is required.");const e=r.Z.subtract(this.positionWC,t.center,le),i=r.Z.multiplyByScalar(this.directionWC,r.Z.dot(e,this.directionWC),he);return Math.max(0,r.Z.magnitude(i)-t.radius)};const de=new o.Z;N.prototype.getPixelSize=function(t,e,i){if(!(0,u.Z)(t))throw new l.Z("boundingSphere is required.");if(!(0,u.Z)(e))throw new l.Z("drawingBufferWidth is required.");if(!(0,u.Z)(i))throw new l.Z("drawingBufferHeight is required.");const n=this.distanceToBoundingSphere(t),o=this.frustum.getPixelDimensions(e,i,n,this._scene.pixelRatio,de);return Math.max(o.x,o.y)};const fe=new r.Z,_e=new r.Z,pe=new r.Z,Ze=new r.Z;function me(t,e){let i=t.position;const n=t.direction,o=t.worldToCameraCoordinatesVector(r.Z.UNIT_X,fe),s=-r.Z.dot(o,i)/r.Z.dot(o,n),a=r.Z.add(i,r.Z.multiplyByScalar(n,s,_e),_e);t.cameraToWorldCoordinatesPoint(a,a),i=t.cameraToWorldCoordinatesPoint(t.position,pe);const c=Math.tan(.5*t.frustum.fovy),u=t.frustum.aspectRatio*c,l=r.Z.magnitude(r.Z.subtract(i,a,Ze)),d=u*l,f=c*l,_=t._maxCoord.x,p=t._maxCoord.y,Z=Math.max(d-_,_),m=Math.max(f-p,p);if(i.z<-Z||i.z>Z||i.y<-m||i.y>m){const n=a.y<-Z||a.y>Z,o=a.z<-m||a.z>m;if(n||o)return function(t,e,i,n,o,s){const a=r.Z.clone(e);return i.y>n?a.y-=i.y-n:i.y<-n&&(a.y+=-n-i.y),i.z>o?a.z-=i.z-o:i.z<-o&&(a.z+=-o-i.z),{easingFunction:h.Z.EXPONENTIAL_OUT,startObject:{time:0},stopObject:{time:1},duration:s,update:function(i){const n=r.Z.lerp(e,a,i.time,new r.Z);t.worldToCameraCoordinatesPoint(n,t.position)}}}(t,i,a,Z,m,e)}}N.prototype.createCorrectPositionTween=function(t){if(!(0,u.Z)(t))throw new l.Z("duration is required.");if(this._mode===P.Z.COLUMBUS_VIEW)return me(this,t)};const ge=new r.Z,ye={destination:void 0,heading:void 0,pitch:void 0,roll:void 0,duration:void 0,complete:void 0,cancel:void 0,endTransform:void 0,maximumHeight:void 0,easingFunction:void 0};N.prototype.cancelFlight=function(){(0,u.Z)(this._currentFlight)&&(this._currentFlight.cancelTween(),this._currentFlight=void 0)},N.prototype.completeFlight=function(){if((0,u.Z)(this._currentFlight)){this._currentFlight.cancelTween();const t={destination:void 0,orientation:{heading:void 0,pitch:void 0,roll:void 0}};t.destination=ye.destination,t.orientation.heading=ye.heading,t.orientation.pitch=ye.pitch,t.orientation.roll=ye.roll,this.setView(t),(0,u.Z)(this._currentFlight.complete)&&this._currentFlight.complete(),this._currentFlight=void 0}},N.prototype.flyTo=function(t){let e=(t=(0,c.Z)(t,c.Z.EMPTY_OBJECT)).destination;if(!(0,u.Z)(e))throw new l.Z("destination is required.");if(this._mode===P.Z.MORPHING)return;this.cancelFlight();let i=(0,c.Z)(t.orientation,c.Z.EMPTY_OBJECT);if((0,u.Z)(i.direction)&&(i=ft(this,e,i,_t.orientation)),(0,u.Z)(t.duration)&&t.duration<=0){const e=_t;return e.destination=t.destination,e.orientation.heading=i.heading,e.orientation.pitch=i.pitch,e.orientation.roll=i.roll,e.convert=t.convert,e.endTransform=t.endTransform,this.setView(e),void("function"==typeof t.complete&&t.complete())}const n=(0,u.Z)(e.west);n&&(e=this.getRectangleCameraCoordinates(e,ge));const o=this;let r;ye.destination=e,ye.heading=i.heading,ye.pitch=i.pitch,ye.roll=i.roll,ye.duration=t.duration,ye.complete=function(){r===o._currentFlight&&(o._currentFlight=void 0),(0,u.Z)(t.complete)&&t.complete()},ye.cancel=t.cancel,ye.endTransform=t.endTransform,ye.convert=!n&&t.convert,ye.maximumHeight=t.maximumHeight,ye.pitchAdjustHeight=t.pitchAdjustHeight,ye.flyOverLongitude=t.flyOverLongitude,ye.flyOverLongitudeWeight=t.flyOverLongitudeWeight,ye.easingFunction=t.easingFunction;const s=this._scene,a=O.Z.createTween(s,ye);if(0===a.duration)return void("function"==typeof a.complete&&a.complete());r=s.tweens.add(a),this._currentFlight=r;let h=this._scene.preloadFlightCamera;this._mode!==P.Z.SCENE2D&&((0,u.Z)(h)||(h=N.clone(this)),h.setView({destination:e,orientation:i}),this._scene.preloadFlightCullingVolume=h.frustum.computeCullingVolume(h.positionWC,h.directionWC,h.upWC))};function Te(t,e,i){i=Z.Z.clone((0,u.Z)(i)?i:N.DEFAULT_OFFSET);const n=t._scene.screenSpaceCameraController.minimumZoomDistance,o=t._scene.screenSpaceCameraController.maximumZoomDistance,r=i.range;if(!(0,u.Z)(r)||0===r){const r=e.radius;0===r?i.range=100:t.frustum instanceof C.Z||t._mode===P.Z.SCENE2D?i.range=function(t,e){let i,n,o=t.frustum;(0,u.Z)(o._offCenterFrustum)&&(o=o._offCenterFrustum);const r=o.right/o.top,s=e*r;return e>s?(i=e,n=i/r):(n=e,i=s),1.5*Math.max(i,n)}(t,r):i.range=function(t,e){const i=t.frustum,n=Math.tan(.5*i.fovy),o=i.aspectRatio*n;return Math.max(e/o,e/n)}(t,r),i.range=T.Z.clamp(i.range,n,o)}return i}N.prototype.viewBoundingSphere=function(t,e){if(!(0,u.Z)(t))throw new l.Z("boundingSphere is required.");if(this._mode===P.Z.MORPHING)throw new l.Z("viewBoundingSphere is not supported while morphing.");e=Te(this,t,e),this.lookAt(t.center,e)};const be=new x.Z,xe=new r.Z,Ce=new r.Z,Ee=new r.Z,we=new r.Z,Se=new s.Z,Ae=new S.Z,De=new b.Z;N.prototype.flyToBoundingSphere=function(t,e){if(!(0,u.Z)(t))throw new l.Z("boundingSphere is required.");e=(0,c.Z)(e,c.Z.EMPTY_OBJECT);const i=this._mode===P.Z.SCENE2D||this._mode===P.Z.COLUMBUS_VIEW;this._setTransform(x.Z.IDENTITY);const n=Te(this,t,e.offset);let o;o=i?r.Z.multiplyByScalar(r.Z.UNIT_Z,n.range,xe):Mt(n.heading,n.pitch,n.range);const s=I.Z.eastNorthUpToFixedFrame(t.center,d.Z.WGS84,be);let a,h;if(x.Z.multiplyByPoint(s,o,o),!i){if(a=r.Z.subtract(t.center,o,Ce),r.Z.normalize(a,a),h=x.Z.multiplyByPointAsVector(s,r.Z.UNIT_Z,Ee),1-Math.abs(r.Z.dot(a,h))<T.Z.EPSILON6){const t=S.Z.fromAxisAngle(a,n.heading,Ae),e=b.Z.fromQuaternion(t,De);r.Z.fromCartesian4(x.Z.getColumn(s,1,Se),h),b.Z.multiplyByVector(e,h,h)}const e=r.Z.cross(a,h,we);r.Z.cross(e,a,h),r.Z.normalize(h,h)}this.flyTo({destination:o,orientation:{direction:a,up:h},duration:e.duration,complete:e.complete,cancel:e.cancel,endTransform:e.endTransform,maximumHeight:e.maximumHeight,easingFunction:e.easingFunction,flyOverLongitude:e.flyOverLongitude,flyOverLongitudeWeight:e.flyOverLongitudeWeight,pitchAdjustHeight:e.pitchAdjustHeight})};const Ie=new r.Z,Oe=new r.Z,ve=new r.Z,Pe=new r.Z,Ne=[new r.Z,new r.Z,new r.Z,new r.Z];const Le=new o.Z,Re=new r.Z,Me=[new a.Z,new a.Z,new a.Z,new a.Z];function Be(t,e,i,n,o,r){Le.x=t,Le.y=e;const s=n.pickEllipsoid(Le,o,Re);return(0,u.Z)(s)?(Me[i]=o.cartesianToCartographic(s,Me[i]),1):(Me[i]=o.cartesianToCartographic(r[i],Me[i]),0)}N.prototype.computeViewRectangle=function(t,e){t=(0,c.Z)(t,d.Z.WGS84);const i=this.frustum.computeCullingVolume(this.positionWC,this.directionWC,this.upWC),o=new n.Z(r.Z.ZERO,t.maximumRadius);if(i.computeVisibility(o)===g.Z.OUTSIDE)return;const s=this._scene.canvas,a=s.clientWidth,u=s.clientHeight;let l=0;const h=function(t,e){const i=e.radii,n=t.positionWC,o=r.Z.multiplyComponents(e.oneOverRadii,n,Ie),s=r.Z.magnitude(o),a=r.Z.normalize(o,Oe);let c,u;r.Z.equalsEpsilon(a,r.Z.UNIT_Z,T.Z.EPSILON10)?(c=new r.Z(0,1,0),u=new r.Z(0,0,1)):(c=r.Z.normalize(r.Z.cross(r.Z.UNIT_Z,a,ve),ve),u=r.Z.normalize(r.Z.cross(a,c,Pe),Pe));const l=Math.sqrt(r.Z.magnitudeSquared(o)-1),h=r.Z.multiplyByScalar(a,1/s,Ie),d=l/s,f=r.Z.multiplyByScalar(c,d,Oe),_=r.Z.multiplyByScalar(u,d,ve),p=r.Z.add(h,_,Ne[0]);r.Z.subtract(p,f,p),r.Z.multiplyComponents(i,p,p);const Z=r.Z.subtract(h,_,Ne[1]);r.Z.subtract(Z,f,Z),r.Z.multiplyComponents(i,Z,Z);const m=r.Z.subtract(h,_,Ne[2]);r.Z.add(m,f,m),r.Z.multiplyComponents(i,m,m);const g=r.Z.add(h,_,Ne[3]);return r.Z.add(g,f,g),r.Z.multiplyComponents(i,g,g),Ne}(this,t);if(l+=Be(0,0,0,this,t,h),l+=Be(0,u,1,this,t,h),l+=Be(a,u,2,this,t,h),l+=Be(a,0,3,this,t,h),l<2)return D.Z.MAX_VALUE;e=D.Z.fromCartographicArray(Me,e);let f=0,_=Me[3].longitude;for(let t=0;t<4;++t){const e=Me[t].longitude,i=Math.abs(e-_);i>T.Z.PI?f+=T.Z.TWO_PI-i:f+=i,_=e}return T.Z.equalsEpsilon(Math.abs(f),T.Z.TWO_PI,T.Z.EPSILON9)&&(e.west=-T.Z.PI,e.east=T.Z.PI,Me[0].latitude>=0?e.north=T.Z.PI_OVER_TWO:e.south=-T.Z.PI_OVER_TWO),e},N.prototype.switchToPerspectiveFrustum=function(){if(this._mode===P.Z.SCENE2D||this.frustum instanceof w.Z)return;const t=this._scene;this.frustum=new w.Z,this.frustum.aspectRatio=t.drawingBufferWidth/t.drawingBufferHeight,this.frustum.fov=T.Z.toRadians(60)},N.prototype.switchToOrthographicFrustum=function(){if(this._mode===P.Z.SCENE2D||this.frustum instanceof C.Z)return;const t=nt(this),e=this._scene;this.frustum=new C.Z,this.frustum.aspectRatio=e.drawingBufferWidth/e.drawingBufferHeight,this.frustum.width=t},N.clone=function(t,e){return(0,u.Z)(e)||(e=new N(t._scene)),r.Z.clone(t.position,e.position),r.Z.clone(t.direction,e.direction),r.Z.clone(t.up,e.up),r.Z.clone(t.right,e.right),x.Z.clone(t._transform,e.transform),e._transformChanged=!0,e.frustum=t.frustum.clone(),e};const Ue=N},66470:(t,e,i)=>{i.d(e,{Z:()=>y});var n=i(59015),o=i(54485),r=i(90332),s=i(20176),a=i(77407),c=i(22874),u=i(87036),l=i(61234),h=i(88125);function d(t,e){let i=t;return(0,o.Z)(e)&&(i+=`+${e}`),i}function f(t,e,i){const r=d(h.Z.PINCH,e),s=t._update,a=t._isDown,c=t._eventStartPosition,u=t._pressTime,f=t._releaseTime;s[r]=!0,a[r]=!1,c[r]=new n.Z;let _=t._movement[r];(0,o.Z)(_)||(_=t._movement[r]={}),_.distance={startPosition:new n.Z,endPosition:new n.Z},_.angleAndHeight={startPosition:new n.Z,endPosition:new n.Z},_.prevAngle=0,t._eventHandler.setInputAction((function(e){t._buttonsDown++,a[r]=!0,u[r]=new Date,n.Z.lerp(e.position1,e.position2,.5,c[r])}),l.Z.PINCH_START,e),t._eventHandler.setInputAction((function(){t._buttonsDown=Math.max(t._buttonsDown-1,0),a[r]=!1,f[r]=new Date}),l.Z.PINCH_END,e),t._eventHandler.setInputAction((function(t){if(a[r]){s[r]?(e=t,o=_,n.Z.clone(e.distance.startPosition,o.distance.startPosition),n.Z.clone(e.distance.endPosition,o.distance.endPosition),n.Z.clone(e.angleAndHeight.startPosition,o.angleAndHeight.startPosition),n.Z.clone(e.angleAndHeight.endPosition,o.angleAndHeight.endPosition),s[r]=!1,_.prevAngle=_.angleAndHeight.startPosition.x):(n.Z.clone(t.distance.endPosition,_.distance.endPosition),n.Z.clone(t.angleAndHeight.endPosition,_.angleAndHeight.endPosition));let a=_.angleAndHeight.endPosition.x;const c=_.prevAngle,u=2*Math.PI;for(;a>=c+Math.PI;)a-=u;for(;a<c-Math.PI;)a+=u;_.angleAndHeight.endPosition.x=-a*i.clientWidth/12,_.angleAndHeight.startPosition.x=-c*i.clientWidth/12}var e,o}),l.Z.PINCH_MOVE,e)}function _(t,e){const i=d(h.Z.WHEEL,e),r=t._update;r[i]=!0;let s=t._movement[i];(0,o.Z)(s)||(s=t._movement[i]={}),s.startPosition=new n.Z,s.endPosition=new n.Z,t._eventHandler.setInputAction((function(t){const e=15*c.Z.toRadians(t);r[i]?(n.Z.clone(n.Z.ZERO,s.startPosition),s.endPosition.x=0,s.endPosition.y=e,r[i]=!1):s.endPosition.y=s.endPosition.y+e}),l.Z.WHEEL,e)}function p(t,e,i){const r=d(i,e),s=t._isDown,a=t._eventStartPosition,c=t._pressTime,u=t._releaseTime;s[r]=!1,a[r]=new n.Z;let f,_,p=t._lastMovement[r];(0,o.Z)(p)||(p=t._lastMovement[r]={startPosition:new n.Z,endPosition:new n.Z,valid:!1}),i===h.Z.LEFT_DRAG?(f=l.Z.LEFT_DOWN,_=l.Z.LEFT_UP):i===h.Z.RIGHT_DRAG?(f=l.Z.RIGHT_DOWN,_=l.Z.RIGHT_UP):i===h.Z.MIDDLE_DRAG&&(f=l.Z.MIDDLE_DOWN,_=l.Z.MIDDLE_UP),t._eventHandler.setInputAction((function(e){t._buttonsDown++,p.valid=!1,s[r]=!0,c[r]=new Date,n.Z.clone(e.position,a[r])}),f,e),t._eventHandler.setInputAction((function(){t._buttonsDown=Math.max(t._buttonsDown-1,0),s[r]=!1,u[r]=new Date}),_,e)}function Z(t,e){n.Z.clone(t.startPosition,e.startPosition),n.Z.clone(t.endPosition,e.endPosition)}function m(t,e){const i=t._update,r=t._movement,s=t._lastMovement,a=t._isDown;for(const r in h.Z)if(h.Z.hasOwnProperty(r)){const s=h.Z[r];if((0,o.Z)(s)){const r=d(s,e);i[r]=!0,(0,o.Z)(t._lastMovement[r])||(t._lastMovement[r]={startPosition:new n.Z,endPosition:new n.Z,valid:!1}),(0,o.Z)(t._movement[r])||(t._movement[r]={startPosition:new n.Z,endPosition:new n.Z})}}t._eventHandler.setInputAction((function(c){for(const t in h.Z)if(h.Z.hasOwnProperty(t)){const u=h.Z[t];if((0,o.Z)(u)){const t=d(u,e);a[t]&&(i[t]?(Z(r[t],s[t]),s[t].valid=!0,Z(c,r[t]),i[t]=!1):n.Z.clone(c.endPosition,r[t].endPosition))}}n.Z.clone(c.endPosition,t._currentMousePosition)}),l.Z.MOUSE_MOVE,e)}function g(t){if(!(0,o.Z)(t))throw new s.Z("canvas is required.");this._eventHandler=new u.Z(t),this._update={},this._movement={},this._lastMovement={},this._isDown={},this._eventStartPosition={},this._pressTime={},this._releaseTime={},this._buttonsDown=0,this._currentMousePosition=new n.Z,_(this,void 0),f(this,void 0,t),p(this,void 0,h.Z.LEFT_DRAG),p(this,void 0,h.Z.RIGHT_DRAG),p(this,void 0,h.Z.MIDDLE_DRAG),m(this,void 0);for(const e in a.Z)if(a.Z.hasOwnProperty(e)){const i=a.Z[e];(0,o.Z)(i)&&(_(this,i),f(this,i,t),p(this,i,h.Z.LEFT_DRAG),p(this,i,h.Z.RIGHT_DRAG),p(this,i,h.Z.MIDDLE_DRAG),m(this,i))}}Object.defineProperties(g.prototype,{currentMousePosition:{get:function(){return this._currentMousePosition}},anyButtonDown:{get:function(){const t=!(this._update[d(h.Z.WHEEL)]&&this._update[d(h.Z.WHEEL,a.Z.SHIFT)]&&this._update[d(h.Z.WHEEL,a.Z.CTRL)]&&this._update[d(h.Z.WHEEL,a.Z.ALT)]);return this._buttonsDown>0||t}}}),g.prototype.isMoving=function(t,e){if(!(0,o.Z)(t))throw new s.Z("type is required.");const i=d(t,e);return!this._update[i]},g.prototype.getMovement=function(t,e){if(!(0,o.Z)(t))throw new s.Z("type is required.");const i=d(t,e);return this._movement[i]},g.prototype.getLastMovement=function(t,e){if(!(0,o.Z)(t))throw new s.Z("type is required.");const i=d(t,e),n=this._lastMovement[i];if(n.valid)return n},g.prototype.isButtonDown=function(t,e){if(!(0,o.Z)(t))throw new s.Z("type is required.");const i=d(t,e);return this._isDown[i]},g.prototype.getStartMousePosition=function(t,e){if(!(0,o.Z)(t))throw new s.Z("type is required.");if(t===h.Z.WHEEL)return this._currentMousePosition;const i=d(t,e);return this._eventStartPosition[i]},g.prototype.getButtonPressTime=function(t,e){if(!(0,o.Z)(t))throw new s.Z("type is required.");const i=d(t,e);return this._pressTime[i]},g.prototype.getButtonReleaseTime=function(t,e){if(!(0,o.Z)(t))throw new s.Z("type is required.");const i=d(t,e);return this._releaseTime[i]},g.prototype.reset=function(){for(const t in this._update)this._update.hasOwnProperty(t)&&(this._update[t]=!0)},g.prototype.isDestroyed=function(){return!1},g.prototype.destroy=function(){return this._eventHandler=this._eventHandler&&this._eventHandler.destroy(),(0,r.Z)(this)};const y=g},88125:(t,e,i)=>{i.d(e,{Z:()=>n});const n=Object.freeze({LEFT_DRAG:0,RIGHT_DRAG:1,MIDDLE_DRAG:2,WHEEL:3,PINCH:4})},23934:(t,e,i)=>{i.d(e,{Z:()=>O});var n=i(59015),o=i(93517),r=i(66866),s=i(88779),a=i(54485),c=i(20176),u=i(45971),l=i(22874),h=i(84929),d=i(87823),f=i(18061);const _={};const p=new o.Z,Z=new o.Z;function m(t,e,i,n){if((0,a.Z)(n)&&i(.5)>n){const n=i(0),o=i(1),r=i(.5),s=r-n,a=r-o;return function(r){const c=i(r);if(r<=.5){const e=(c-n)/s;return l.Z.lerp(t,-l.Z.PI_OVER_TWO,e)}const u=(c-o)/a;return l.Z.lerp(-l.Z.PI_OVER_TWO,e,1-u)}}return function(i){return l.Z.lerp(t,e,i)}}function g(t,e,i,n,r){let s=r;const c=Math.max(i,n);if(!(0,a.Z)(s)){const i=t.position,n=e,r=t.up,a=t.right,c=t.frustum,u=o.Z.subtract(i,n,p),l=o.Z.magnitude(o.Z.multiplyByScalar(r,o.Z.dot(u,r),Z)),f=o.Z.magnitude(o.Z.multiplyByScalar(a,o.Z.dot(u,a),Z));s=Math.min(.2*function(t,e,i){let n,o,r;if(t instanceof h.Z){const s=Math.tan(.5*t.fovy);return n=t.near,o=t.near*s,r=t.aspectRatio*o,Math.max(e*n/r,i*n/o)}return t instanceof d.Z?(n=t.near,o=t.top,r=t.right,Math.max(e*n/r,i*n/o)):Math.max(e,i)}(c,l,f),1e9)}if(c<s){const t=8,e=1e6,o=-Math.pow((s-i)*e,1/t),r=Math.pow((s-n)*e,1/t);return function(i){const n=i*(r-o)+o;return-Math.pow(n,t)/e+s}}return function(t){return l.Z.lerp(i,n,t)}}function y(t,e){return l.Z.equalsEpsilon(t,l.Z.TWO_PI,l.Z.EPSILON11)&&(t=0),e>t+Math.PI?t+=l.Z.TWO_PI:e<t-Math.PI&&(t-=l.Z.TWO_PI),t}const T=new o.Z;function b(t,e,i,r,s,a,c,u){const h=t.camera,d=o.Z.clone(h.position,T),f=h.pitch,_=y(h.heading,r),p=y(h.roll,a),Z=g(h,i,d.z,i.z,c),b=m(f,s,Z,u);return function(t){const o=t.time/e;h.setView({orientation:{heading:l.Z.lerp(_,r,o),pitch:b(o),roll:l.Z.lerp(p,a,o)}}),n.Z.lerp(d,i,o,h.position),h.position.z=Z(o)}}const x=new r.Z,C=new r.Z;function E(t,e,i,n,s,c,u,h,d,f){const _=t.camera,p=t.mapProjection.ellipsoid,Z=r.Z.clone(_.positionCartographic,x),T=_.pitch,b=y(_.heading,n),E=y(_.roll,c),w=p.cartesianToCartographic(i,C);Z.longitude=l.Z.zeroToTwoPi(Z.longitude),w.longitude=l.Z.zeroToTwoPi(w.longitude);let S=!1;if((0,a.Z)(h)){const t=l.Z.zeroToTwoPi(h),e=Math.min(Z.longitude,w.longitude),i=Math.max(Z.longitude,w.longitude),n=t>=e&&t<=i;if((0,a.Z)(d)){const t=Math.abs(Z.longitude-w.longitude),e=l.Z.TWO_PI-t;(n?t:e)<(n?e:t)*d&&!n&&(S=!0)}else n||(S=!0)}S?function(t,e){t.longitude<e.longitude?t.longitude+=l.Z.TWO_PI:e.longitude+=l.Z.TWO_PI}(Z,w):function(t,e){const i=t.longitude-e.longitude;i<-l.Z.PI?t.longitude+=l.Z.TWO_PI:i>l.Z.PI&&(e.longitude+=l.Z.TWO_PI)}(Z,w);const A=g(_,i,Z.height,w.height,u),D=m(T,s,A,f);return function(){const t=Z.longitude,i=w.longitude,r=Z.latitude,s=w.latitude;return function(a){const u=a.time/e,h=o.Z.fromRadians(l.Z.lerp(t,i,u),l.Z.lerp(r,s,u),A(u),p);_.setView({destination:h,orientation:{heading:l.Z.lerp(b,n,u),pitch:D(u),roll:l.Z.lerp(E,c,u)}})}}()}function w(t,e,i,r,s,a,c){const u=t.camera,h=o.Z.clone(u.position,T),d=y(u.heading,r),f=u.frustum.right-u.frustum.left,_=g(u,i,f,i.z,c);return function(t){const o=t.time/e;u.setView({orientation:{heading:l.Z.lerp(d,r,o)}}),n.Z.lerp(h,i,o,u.position);const s=_(o),a=u.frustum,c=a.top/a.right,f=.5*(s-(a.right-a.left));a.right+=f,a.left-=f,a.top=c*a.right,a.bottom=-a.top}}const S=new r.Z,A=new o.Z;function D(t,e){return{startObject:{},stopObject:{},duration:0,complete:t,cancel:e}}function I(t,e){return function(){"function"==typeof e&&e(),t.enableInputs=!0}}_.createTween=function(t,e){let i=(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT)).destination;if(!(0,a.Z)(t))throw new c.Z("scene is required.");if(!(0,a.Z)(i))throw new c.Z("destination is required.");const r=t.mode;if(r===f.Z.MORPHING)return D();const h=(0,s.Z)(e.convert,!0),d=t.mapProjection,_=d.ellipsoid,p=e.maximumHeight,Z=e.flyOverLongitude,m=e.flyOverLongitudeWeight,g=e.pitchAdjustHeight;let y=e.easingFunction;h&&r!==f.Z.SCENE3D&&(_.cartesianToCartographic(i,S),i=d.project(S,A));const T=t.camera,x=e.endTransform;(0,a.Z)(x)&&T._setTransform(x);let C=e.duration;(0,a.Z)(C)||(C=Math.ceil(o.Z.distance(T.position,i)/1e6)+2,C=Math.min(C,3));const O=(0,s.Z)(e.heading,0),v=(0,s.Z)(e.pitch,-l.Z.PI_OVER_TWO),P=(0,s.Z)(e.roll,0),N=t.screenSpaceCameraController;N.enableInputs=!1;const L=I(N,e.complete),R=I(N,e.cancel),M=T.frustum;let B=t.mode===f.Z.SCENE2D;if(B=B&&n.Z.equalsEpsilon(T.position,i,l.Z.EPSILON6),B=B&&l.Z.equalsEpsilon(Math.max(M.right-M.left,M.top-M.bottom),i.z,l.Z.EPSILON6),B=B||t.mode!==f.Z.SCENE2D&&o.Z.equalsEpsilon(i,T.position,l.Z.EPSILON10),B=B&&l.Z.equalsEpsilon(l.Z.negativePiToPi(O),l.Z.negativePiToPi(T.heading),l.Z.EPSILON10)&&l.Z.equalsEpsilon(l.Z.negativePiToPi(v),l.Z.negativePiToPi(T.pitch),l.Z.EPSILON10)&&l.Z.equalsEpsilon(l.Z.negativePiToPi(P),l.Z.negativePiToPi(T.roll),l.Z.EPSILON10),B)return D(L,R);const U=new Array(4);if(U[f.Z.SCENE2D]=w,U[f.Z.SCENE3D]=E,U[f.Z.COLUMBUS_VIEW]=b,C<=0){return D((function(){U[r](t,1,i,O,v,P,p,Z,m,g)({time:1}),"function"==typeof L&&L()}),R)}const F=U[r](t,C,i,O,v,P,p,Z,m,g);if(!(0,a.Z)(y)){const t=T.positionCartographic.height;y=t>(r===f.Z.SCENE3D?_.cartesianToCartographic(i).height:i.z)&&t>11500?u.Z.CUBIC_OUT:u.Z.QUINTIC_IN_OUT}return{duration:C,easingFunction:y,startObject:{time:0},stopObject:{time:C},update:F,complete:L,cancel:R}};const O=_},89297:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(17497),o=i(88779);function r(t){t=(0,o.Z)(t,o.Z.EMPTY_OBJECT),n.Z.typeOf.object("options.metadata",t.metadata),this._metadata=t.metadata}Object.defineProperties(r.prototype,{metadata:{get:function(){return this._metadata}}})},18272:(t,e,i)=>{i.d(e,{Z:()=>G});var n=i(59015),o=i(17497),r=i(55077),s=i(6785),a=i(51138),c=i(88779),u=i(54485),l=i(34971),h=i(90332),d=i(20176),f=i(22874),_=i(21514),p=i(85834),Z=i(71087),m=i(1577),g=i(74064),y=i(7048),T=i(66973),b=i(44674),x=i(995),C=i(40363),E=i(28075),w=i(52314),S=i(84067),A=i(88307),D=i(59215);const I=T.Z.DEFAULT_COLOR_VALUE,O=T.Z.DEFAULT_SHOW_VALUE;function v(t,e,i,n,o){let s;this.featuresLength=e,(0,u.Z)(i)&&(s=i.extensions),this._extensions=(0,c.Z)(s,{});const a=function(t){const e={};if(!(0,u.Z)(t))return e;for(const i in t)t.hasOwnProperty(i)&&"HIERARCHY"!==i&&"extensions"!==i&&"extras"!==i&&(e[i]=(0,r.Z)(t[i],!0));return e}(i);this._properties=a,this._batchTableHierarchy=function(t,e,i){if(!(0,u.Z)(e))return;let n=t._extensions["3DTILES_batch_table_hierarchy"];const o=e.HIERARCHY;(0,u.Z)(o)&&(v._deprecationWarning("batchTableHierarchyExtension","The batch table HIERARCHY property has been moved to an extension. Use extensions.3DTILES_batch_table_hierarchy instead."),t._extensions["3DTILES_batch_table_hierarchy"]=o,n=o);if(!(0,u.Z)(n))return;return new b.Z({extension:n,binaryBody:i})}(this,i,n),this._batchTableBinaryProperties=P(e,a,n),this._content=t,this._batchTexture=new T.Z({featuresLength:e,colorChangedCallback:o,owner:t,statistics:t.tileset.statistics})}function P(t,e,i){let n;for(const o in e)if(e.hasOwnProperty(o)){const r=e[o],s=r.byteOffset;if((0,u.Z)(s)){const e=r.componentType,a=r.type;if(!(0,u.Z)(e))throw new _.Z("componentType is required.");if(!(0,u.Z)(a))throw new _.Z("type is required.");if(!(0,u.Z)(i))throw new _.Z(`Property ${o} requires a batch table binary.`);const c=(0,w.Z)(r),l=c.componentsPerAttribute,h=c.classType,d=c.createArrayBufferView(i.buffer,i.byteOffset+s,t);(0,u.Z)(n)||(n={}),n[o]={typedArray:d,componentCount:l,type:h}}}return n}v._deprecationWarning=l.Z,Object.defineProperties(v.prototype,{memorySizeInBytes:{get:function(){return this._batchTexture.memorySizeInBytes}}}),v.getBinaryProperties=function(t,e,i){return P(t,e,i)},v.prototype.setShow=function(t,e){this._batchTexture.setShow(t,e)},v.prototype.setAllShow=function(t){this._batchTexture.setAllShow(t)},v.prototype.getShow=function(t){return this._batchTexture.getShow(t)},v.prototype.setColor=function(t,e){this._batchTexture.setColor(t,e)},v.prototype.setAllColor=function(t){this._batchTexture.setAllColor(t)},v.prototype.getColor=function(t,e){return this._batchTexture.getColor(t,e)},v.prototype.getPickColor=function(t){return this._batchTexture.getPickColor(t)};const N=new s.Z;function L(t,e){if(!(0,u.Z)(t)||t<0||t>=e)throw new d.Z(`batchId is required and between zero and featuresLength - 1 (${e}`-NaN)}function R(t,e){return t=y.Z.replaceMain(t,"tile_main"),e?`${t}uniform float tile_colorBlend; \nvoid tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n} \n`:`${t}void tile_color(vec4 tile_featureColor) \n{ \n    tile_main(); \n} \n`}function M(t,e,i){if(!(0,u.Z)(e))return R(t,i);let n=new RegExp(`(uniform|attribute|in)\\s+(vec[34]|sampler2D)\\s+${e};`);const o=t.match(n);if(!(0,u.Z)(o))return R(t,i);const r=o[0],s=o[2];t=(t=y.Z.replaceMain(t,"tile_main")).replace(r,"");let a;if("vec3"===s||"vec4"===s){const i="vec3"===s?`vec4(${e}, 1.0)`:e,o="vec3"===s?"tile_diffuse.xyz":"tile_diffuse";n=new RegExp(e,"g"),t=t.replace(n,o),a=`    vec4 source = ${i}; \n    tile_diffuse = tile_diffuse_final(source, tile_featureColor); \n    tile_main(); \n`}else"sampler2D"===s&&(t=function(t,e){const i=`texture2D(${e}`;let n,o=0,r=t.indexOf(i,o);for(;r>-1;){let e=0;for(let i=r;i<t.length;++i){const o=t.charAt(i);if("("===o)++e;else if(")"===o&&(--e,0===e)){n=i+1;break}}const s=`tile_diffuse_final(${t.slice(r,n)}, tile_diffuse)`;t=t.slice(0,r)+s+t.slice(n),o=r+s.length,r=t.indexOf(i,o)}return t}(t,e),a="    tile_diffuse = tile_featureColor; \n    tile_main(); \n");return t=`uniform float tile_colorBlend; \nvec4 tile_diffuse = vec4(1.0); \nbool isWhite(vec3 color) \n{ \n    return all(greaterThan(color, vec3(1.0 - czm_epsilon3))); \n} \nvec4 tile_diffuse_final(vec4 sourceDiffuse, vec4 tileDiffuse) \n{ \n    vec4 blendDiffuse = mix(sourceDiffuse, tileDiffuse, tile_colorBlend); \n    vec4 diffuse = isWhite(tileDiffuse.rgb) ? sourceDiffuse : blendDiffuse; \n    return vec4(diffuse.rgb, sourceDiffuse.a); \n} \n${r}\n${t}\nvoid tile_color(vec4 tile_featureColor) \n{ \n${a}`,i&&(t+="    tile_featureColor = czm_gammaCorrect(tile_featureColor); \n    gl_FragColor.a *= tile_featureColor.a; \n    float highlight = ceil(tile_colorBlend); \n    gl_FragColor.rgb *= mix(tile_featureColor.rgb, vec3(1.0), highlight); \n"),t+="} \n"}v.prototype.applyStyle=function(t){if(!(0,u.Z)(t))return this.setAllColor(I),void this.setAllShow(O);const e=this._content,i=this.featuresLength;for(let n=0;n<i;++n){const i=e.getFeature(n),o=(0,u.Z)(t.color)?(0,c.Z)(t.color.evaluateColor(i,N),I):I,r=(0,u.Z)(t.show)?(0,c.Z)(t.show.evaluate(i),O):O;this.setColor(n,o),this.setShow(n,r)}},v.prototype.isClass=function(t,e){L(t,this.featuresLength),o.Z.typeOf.string("className",e);const i=this._batchTableHierarchy;return!!(0,u.Z)(i)&&i.isClass(t,e)},v.prototype.isExactClass=function(t,e){return o.Z.typeOf.string("className",e),this.getExactClassName(t)===e},v.prototype.getExactClassName=function(t){L(t,this.featuresLength);const e=this._batchTableHierarchy;if((0,u.Z)(e))return e.getClassName(t)},v.prototype.hasProperty=function(t,e){return L(t,this.featuresLength),o.Z.typeOf.string("name",e),(0,u.Z)(this._properties[e])||(0,u.Z)(this._batchTableHierarchy)&&this._batchTableHierarchy.hasProperty(t,e)},v.prototype.hasPropertyBySemantic=function(){return!1},v.prototype.getPropertyNames=function(t,e){L(t,this.featuresLength),(e=(0,u.Z)(e)?e:[]).length=0;const i=Object.keys(this._properties);return e.push.apply(e,i),(0,u.Z)(this._batchTableHierarchy)&&e.push.apply(e,this._batchTableHierarchy.getPropertyIds(t,i)),e},v.prototype.getPropertyBySemantic=function(t,e){},v.prototype.getProperty=function(t,e){if(L(t,this.featuresLength),o.Z.typeOf.string("name",e),(0,u.Z)(this._batchTableBinaryProperties)){const i=this._batchTableBinaryProperties[e];if((0,u.Z)(i))return function(t,e){const i=t.typedArray,n=t.componentCount;return 1===n?i[e]:t.type.unpack(i,e*n)}(i,t)}const i=this._properties[e];if((0,u.Z)(i))return(0,r.Z)(i[t],!0);if((0,u.Z)(this._batchTableHierarchy)){const i=this._batchTableHierarchy.getProperty(t,e);if((0,u.Z)(i))return i}},v.prototype.setProperty=function(t,e,i){const n=this.featuresLength;if(L(t,n),o.Z.typeOf.string("name",e),(0,u.Z)(this._batchTableBinaryProperties)){const n=this._batchTableBinaryProperties[e];if((0,u.Z)(n))return void function(t,e,i){const n=t.typedArray,o=t.componentCount;1===o?n[e]=i:t.type.pack(i,n,e*o)}(n,t,i)}if((0,u.Z)(this._batchTableHierarchy)&&this._batchTableHierarchy.setProperty(t,e,i))return;let s=this._properties[e];(0,u.Z)(s)||(this._properties[e]=new Array(n),s=this._properties[e]),s[t]=(0,r.Z)(i,!0)},v.prototype.getVertexShaderCallback=function(t,e,i){if(0===this.featuresLength)return;const n=this;return function(o){const r=M(o,i,!1);let s;return p.Z.maximumVertexTextureImageUnits>0?(s="",t&&(s+="uniform bool tile_translucentCommand; \n"),s+=`uniform sampler2D tile_batchTexture; \nvarying vec4 tile_featureColor; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec2 st = computeSt(${e}); \n    vec4 featureProperties = texture2D(tile_batchTexture, st); \n    tile_color(featureProperties); \n    float show = ceil(featureProperties.a); \n    gl_Position *= show; \n`,t&&(s+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            gl_Position *= 0.0; \n        } \n    } \n"),s+="    tile_featureColor = featureProperties; \n    tile_featureSt = st; \n}"):s=`varying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_color(vec4(1.0)); \n    tile_featureSt = computeSt(${e}); \n}`,`${r}\n${a=n,1===a._batchTexture.textureDimensions.y?"uniform vec4 tile_textureStep; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    return vec2(centerX + (batchId * stepX), 0.5); \n} \n":"uniform vec4 tile_textureStep; \nuniform vec2 tile_textureDimensions; \nvec2 computeSt(float batchId) \n{ \n    float stepX = tile_textureStep.x; \n    float centerX = tile_textureStep.y; \n    float stepY = tile_textureStep.z; \n    float centerY = tile_textureStep.w; \n    float xId = mod(batchId, tile_textureDimensions.x); \n    float yId = floor(batchId / tile_textureDimensions.x); \n    return vec2(centerX + (xId * stepX), centerY + (yId * stepY)); \n} \n"}${s}`;var a}},v.prototype.getFragmentShaderCallback=function(t,e,i){if(0!==this.featuresLength)return function(n){return n=M(n,e,!0),p.Z.maximumVertexTextureImageUnits>0?(n+="uniform sampler2D tile_pickTexture; \nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_color(tile_featureColor); \n",i&&(n+="    gl_FragColor.rgb *= gl_FragColor.a; \n"),n+="}"):(t&&(n+="uniform bool tile_translucentCommand; \n"),n+="uniform sampler2D tile_pickTexture; \nuniform sampler2D tile_batchTexture; \nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n",t&&(n+="    bool isStyleTranslucent = (featureProperties.a != 1.0); \n    if (czm_pass == czm_passTranslucent) \n    { \n        if (!isStyleTranslucent && !tile_translucentCommand) \n        { \n            discard; \n        } \n    } \n    else \n    { \n        if (isStyleTranslucent) \n        { \n            discard; \n        } \n    } \n"),n+="    tile_color(featureProperties); \n",i&&(n+="    gl_FragColor.rgb *= gl_FragColor.a; \n"),n+="} \n"),n}},v.prototype.getClassificationFragmentShaderCallback=function(){if(0!==this.featuresLength)return function(t){return t=y.Z.replaceMain(t,"tile_main"),p.Z.maximumVertexTextureImageUnits>0?t+="uniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvarying vec4 tile_featureColor; \nvoid main() \n{ \n    tile_main(); \n    gl_FragColor = tile_featureColor; \n    gl_FragColor.rgb *= gl_FragColor.a; \n}":t+="uniform sampler2D tile_batchTexture; \nuniform sampler2D tile_pickTexture;\nvarying vec2 tile_featureSt; \nvoid main() \n{ \n    tile_main(); \n    vec4 featureProperties = texture2D(tile_batchTexture, tile_featureSt); \n    if (featureProperties.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = featureProperties; \n    gl_FragColor.rgb *= gl_FragColor.a; \n} \n",t}},v.prototype.getUniformMapCallback=function(){if(0===this.featuresLength)return;const t=this;return function(e){const i={tile_batchTexture:function(){return(0,c.Z)(t._batchTexture.batchTexture,t._batchTexture.defaultTexture)},tile_textureDimensions:function(){return t._batchTexture.textureDimensions},tile_textureStep:function(){return t._batchTexture.textureStep},tile_colorBlend:function(){return function(t){const e=t._content.tileset,i=e.colorBlendMode,n=e.colorBlendAmount;if(i===C.Z.HIGHLIGHT)return 0;if(i===C.Z.REPLACE)return 1;if(i===C.Z.MIX)return f.Z.clamp(n,f.Z.EPSILON4,1);throw new d.Z(`Invalid color blend mode "${i}".`)}(t)},tile_pickTexture:function(){return t._batchTexture.pickTexture}};return(0,a.Z)(e,i)}},v.prototype.getPickId=function(){return"texture2D(tile_pickTexture, tile_featureSt)"};const B=0,U=1,F=2;function W(t){const e=Z.Z.shallowClone(t),i=e.pass===m.Z.TRANSLUCENT;return e.uniformMap=(0,u.Z)(e.uniformMap)?e.uniformMap:{},e.uniformMap.tile_translucentCommand=function(){return i},e}function V(t){const e=Z.Z.shallowClone(t);return e.pass=m.Z.TRANSLUCENT,e.renderState=function(t){const e=(0,r.Z)(t,!0);return e.cull.enabled=!1,e.depthTest.enabled=!0,e.depthMask=!1,e.blending=x.Z.ALPHA_BLEND,e.stencilTest=S.Z.setCesium3DTileBit(),e.stencilMask=S.Z.CESIUM_3D_TILE_MASK,g.Z.fromCache(e)}(t.renderState),e}function k(t){const e=Z.Z.shallowClone(t);return e.renderState=function(t){const e=(0,r.Z)(t,!0);return e.stencilTest=S.Z.setCesium3DTileBit(),e.stencilMask=S.Z.CESIUM_3D_TILE_MASK,g.Z.fromCache(e)}(t.renderState),e}function H(t,e){const i=Z.Z.shallowClone(e),o=(0,r.Z)(i.renderState,!0);o.cull.enabled=!0,o.cull.face=E.Z.FRONT,o.colorMask={red:!1,green:!1,blue:!1,alpha:!1},o.polygonOffset={enabled:!0,factor:5,units:5},o.stencilTest=S.Z.setCesium3DTileBit(),o.stencilMask=S.Z.CESIUM_3D_TILE_MASK,i.renderState=g.Z.fromCache(o),i.castShadows=!1,i.receiveShadows=!1,i.uniformMap=(0,r.Z)(e.uniformMap);const s=new n.Z(5,5);return i.uniformMap.u_polygonOffset=function(){return s},i.shaderProgram=function(t,e){let i=t.shaderCache.getDerivedShaderProgram(e,"zBackfaceLogDepth");if(!(0,u.Z)(i)){const n=e.fragmentShaderSource.clone();n.defines=(0,u.Z)(n.defines)?n.defines.slice(0):[],n.defines.push("POLYGON_OFFSET"),n.sources.unshift("#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n"),i=t.shaderCache.createDerivedShaderProgram(e,"zBackfaceLogDepth",{vertexShaderSource:e.vertexShaderSource,fragmentShaderSource:n,attributeLocations:e._attributeLocations})}return i}(t,e.shaderProgram),i}function z(t,e){const i=Z.Z.shallowClone(t),n=(0,r.Z)(i.renderState,!0);return n.stencilTest.enabled=!0,n.stencilTest.mask=S.Z.SKIP_LOD_MASK,n.stencilTest.reference=S.Z.CESIUM_3D_TILE_MASK|e<<S.Z.SKIP_LOD_BIT_SHIFT,n.stencilTest.frontFunction=A.Z.GREATER_OR_EQUAL,n.stencilTest.frontOperation.zPass=D.Z.REPLACE,n.stencilTest.backFunction=A.Z.GREATER_OR_EQUAL,n.stencilTest.backOperation.zPass=D.Z.REPLACE,n.stencilMask=S.Z.CESIUM_3D_TILE_MASK|S.Z.SKIP_LOD_MASK,i.renderState=g.Z.fromCache(n),i}function q(t){return(t.renderState.stencilTest.reference&S.Z.SKIP_LOD_MASK)>>>S.Z.SKIP_LOD_BIT_SHIFT}v.prototype.addDerivedCommands=function(t,e){const i=t.commandList,n=i.length,o=this._content._tile,r=o._finalResolution,s=o.tileset,a=s._skipLevelOfDetail&&s._hasMixedContent&&t.context.stencilBuffer,c=function(t){const e=t._batchTexture.translucentFeaturesLength;if(0===e)return B;if(e===t.featuresLength)return U;return F}(this);for(let l=e;l<n;++l){const e=i[l];if(e.pass===m.Z.COMPUTE)continue;let n=e.derivedCommands.tileset;(0,u.Z)(n)&&!e.dirty||(n={},e.derivedCommands.tileset=n,n.originalCommand=W(e),e.dirty=!1);const h=n.originalCommand;c!==B&&e.pass!==m.Z.TRANSLUCENT&&((0,u.Z)(n.translucent)||(n.translucent=V(h))),c!==U&&e.pass!==m.Z.TRANSLUCENT&&((0,u.Z)(n.opaque)||(n.opaque=k(h)),a&&(r||((0,u.Z)(n.zback)||(n.zback=H(t.context,h)),s._backfaceCommands.push(n.zback)),(0,u.Z)(n.stencil)&&o._selectionDepth===q(n.stencil)||(e.renderState.depthMask?n.stencil=z(h,o._selectionDepth):n.stencil=n.opaque)));const d=a?n.stencil:n.opaque,f=n.translucent;e.pass!==m.Z.TRANSLUCENT?(c===B&&(i[l]=d),c===U&&(i[l]=f),c===F&&(i[l]=d,i.push(f))):i[l]=h}},v.prototype.update=function(t,e){this._batchTexture.update(t,e)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){return this._batchTexture=this._batchTexture&&this._batchTexture.destroy(),(0,h.Z)(this)};const G=v},40363:(t,e,i)=>{i.d(e,{Z:()=>n});const n=Object.freeze({HIGHLIGHT:0,REPLACE:1,MIX:2})},39140:(t,e,i)=>{i.d(e,{Z:()=>r});var n=i(20176);function o(){this.featurePropertiesDirty=!1}Object.defineProperties(o.prototype,{featuresLength:{get:function(){n.Z.throwInstantiationError()}},pointsLength:{get:function(){n.Z.throwInstantiationError()}},trianglesLength:{get:function(){n.Z.throwInstantiationError()}},geometryByteLength:{get:function(){n.Z.throwInstantiationError()}},texturesByteLength:{get:function(){n.Z.throwInstantiationError()}},batchTableByteLength:{get:function(){n.Z.throwInstantiationError()}},innerContents:{get:function(){n.Z.throwInstantiationError()}},readyPromise:{get:function(){n.Z.throwInstantiationError()}},tileset:{get:function(){n.Z.throwInstantiationError()}},tile:{get:function(){n.Z.throwInstantiationError()}},url:{get:function(){n.Z.throwInstantiationError()}},batchTable:{get:function(){n.Z.throwInstantiationError()}},metadata:{get:function(){n.Z.throwInstantiationError()},set:function(t){n.Z.throwInstantiationError()}},group:{get:function(){n.Z.throwInstantiationError()},set:function(t){n.Z.throwInstantiationError()}}}),o.prototype.hasProperty=function(t,e){n.Z.throwInstantiationError()},o.prototype.getFeature=function(t){n.Z.throwInstantiationError()},o.prototype.applyDebugSettings=function(t,e){n.Z.throwInstantiationError()},o.prototype.applyStyle=function(t){n.Z.throwInstantiationError()},o.prototype.update=function(t,e){n.Z.throwInstantiationError()},o.prototype.isDestroyed=function(){n.Z.throwInstantiationError()},o.prototype.destroy=function(){n.Z.throwInstantiationError()};const r=o},10147:(t,e,i)=>{i.d(e,{Z:()=>_});var n=i(64412),o=i(94416),r=i(20506),s=i(64142),a=i(73067),c=i(41614),u=i(87329),l=i(31937),h=i(21514),d=i(72190);const f={b3dm:function(t,e,i,o,r){return t.enableModelExperimental?d.Z.fromB3dm(t,e,i,o,r):new n.Z(t,e,i,o,r)},pnts:function(t,e,i,n,o){return t.enableModelExperimental?d.Z.fromPnts(t,e,i,n,o):new c.Z(t,e,i,n,o)},i3dm:function(t,e,i,n,o){return t.enableModelExperimental?d.Z.fromI3dm(t,e,i,n,o):new a.Z(t,e,i,n,o)},cmpt:function(t,e,i,n,r){return new o.Z(t,e,i,n,r,f)},externalTileset:function(t,e,i,n){return new u.Z(t,e,i,n)},geom:function(t,e,i,n,o){return new r.Z(t,e,i,n,o)},vctr:function(t,e,i,n,o){return new l.Z(t,e,i,n,o)},subt:function(t,e,i,n,o){return new s.Z(t,e,i,void 0,n,o)},subtreeJson:function(t,e,i,n){return new s.Z(t,e,i,n)},glb:function(t,e,i,n,o){if(n.byteLength<12)throw new h.Z("Invalid glb content");const r=new DataView(n,o).getUint32(8,!0),s=new Uint8Array(n,o,r);return d.Z.fromGltf(t,e,i,s)},gltf:function(t,e,i,n){return d.Z.fromGltf(t,e,i,n)},geoJson:function(t,e,i,n){return d.Z.fromGeoJson(t,e,i,n)}},_=f},42551:(t,e,i)=>{i.d(e,{Z:()=>n});const n=Object.freeze({UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5})},72060:(t,e,i)=>{i.d(e,{Z:()=>o});const n={BATCHED_3D_MODEL:"b3dm",INSTANCED_3D_MODEL:"i3dm",COMPOSITE:"cmpt",POINT_CLOUD:"pnts",VECTOR:"vctr",GEOMETRY:"geom",GLTF:"gltf",GLTF_BINARY:"glb",IMPLICIT_SUBTREE:"subt",IMPLICIT_SUBTREE_JSON:"subtreeJson",EXTERNAL_TILESET:"externalTileset",MULTIPLE_CONTENT:"multipleContent",GEOJSON:"geoJson",isBinaryFormat:function(t){switch(t){case n.BATCHED_3D_MODEL:case n.INSTANCED_3D_MODEL:case n.COMPOSITE:case n.POINT_CLOUD:case n.VECTOR:case n.GEOMETRY:case n.IMPLICIT_SUBTREE:case n.GLTF_BINARY:return!0;default:return!1}}},o=Object.freeze(n)},96059:(t,e,i)=>{i.d(e,{Z:()=>s});var n=i(6785),o=i(54485);function r(t,e){this._content=t,this._batchId=e,this._color=void 0}Object.defineProperties(r.prototype,{show:{get:function(){return this._content.batchTable.getShow(this._batchId)},set:function(t){this._content.batchTable.setShow(this._batchId,t)}},color:{get:function(){return(0,o.Z)(this._color)||(this._color=new n.Z),this._content.batchTable.getColor(this._batchId,this._color)},set:function(t){this._content.batchTable.setColor(this._batchId,t)}},polylinePositions:{get:function(){if((0,o.Z)(this._content.getPolylinePositions))return this._content.getPolylinePositions(this._batchId)}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},featureId:{get:function(){return this._batchId}},pickId:{get:function(){return this._content.batchTable.getPickColor(this._batchId)}}}),r.prototype.hasProperty=function(t){return this._content.batchTable.hasProperty(this._batchId,t)},r.prototype.getPropertyNames=function(t){return this._content.batchTable.getPropertyNames(this._batchId,t)},r.prototype.getProperty=function(t){return this._content.batchTable.getProperty(this._batchId,t)},r.getPropertyInherited=function(t,e,i){const n=t.batchTable;if((0,o.Z)(n)){if(n.hasPropertyBySemantic(e,i))return n.getPropertyBySemantic(e,i);if(n.hasProperty(e,i))return n.getProperty(e,i)}const r=t.metadata;if((0,o.Z)(r)){if(r.hasPropertyBySemantic(i))return r.getPropertyBySemantic(i);if(r.hasProperty(i))return r.getProperty(i)}const s=t.tile,a=s.metadata;if((0,o.Z)(a)){if(a.hasPropertyBySemantic(i))return a.getPropertyBySemantic(i);if(a.hasProperty(i))return a.getProperty(i)}let c;if((0,o.Z)(s.implicitSubtree)&&(c=s.implicitSubtree.metadata),(0,o.Z)(c)){if(c.hasPropertyBySemantic(i))return c.getPropertyBySemantic(i);if(c.hasProperty(i))return c.getProperty(i)}const u=(0,o.Z)(t.group)?t.group.metadata:void 0;if((0,o.Z)(u)){if(u.hasPropertyBySemantic(i))return u.getPropertyBySemantic(i);if(u.hasProperty(i))return u.getProperty(i)}const l=t.tileset.metadata;if((0,o.Z)(l)){if(l.hasPropertyBySemantic(i))return l.getPropertyBySemantic(i);if(l.hasProperty(i))return l.getProperty(i)}},r.prototype.getPropertyInherited=function(t){return r.getPropertyInherited(this._content,this._batchId,t)},r.prototype.setProperty=function(t,e){this._content.batchTable.setProperty(this._batchId,t,e),this._content.featurePropertiesDirty=!0},r.prototype.isExactClass=function(t){return this._content.batchTable.isExactClass(this._batchId,t)},r.prototype.isClass=function(t){return this._content.batchTable.isClass(this._batchId,t)},r.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};const s=r},73673:(t,e,i)=>{i.d(e,{Z:()=>c});var n=i(44990),o=i(88779),r=i(54485);function s(t,e){this.json=t,this.buffer=e,this._cachedTypedArrays={},this.featuresLength=0}function a(t,e,i,o,s,a){const c=t._cachedTypedArrays;let u=c[e];return(0,r.Z)(u)||(u=n.Z.createArrayBufferView(i,t.buffer.buffer,t.buffer.byteOffset+a,s*o),c[e]=u),u}s.prototype.getGlobalProperty=function(t,e,i){const s=this.json[t];if((0,r.Z)(s))return(0,r.Z)(s.byteOffset)?a(this,t,e=(0,o.Z)(e,n.Z.UNSIGNED_INT),i=(0,o.Z)(i,1),1,s.byteOffset):s},s.prototype.hasProperty=function(t){return(0,r.Z)(this.json[t])},s.prototype.getPropertyArray=function(t,e,i){const o=this.json[t];if((0,r.Z)(o))return(0,r.Z)(o.byteOffset)?((0,r.Z)(o.componentType)&&(e=n.Z.fromName(o.componentType)),a(this,t,e,i,this.featuresLength,o.byteOffset)):function(t,e,i,o){const s=t._cachedTypedArrays;let a=s[e];return(0,r.Z)(a)||(a=n.Z.createTypedArray(i,o),s[e]=a),a}(this,t,e,o)},s.prototype.getProperty=function(t,e,i,n,o){const s=this.json[t];if(!(0,r.Z)(s))return;const a=this.getPropertyArray(t,e,i);if(1===i)return a[n];for(let t=0;t<i;++t)o[t]=a[i*n+t];return o};const c=s}}]);