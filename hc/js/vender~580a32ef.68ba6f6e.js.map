{"version":3,"file":"js/vender~580a32ef.68ba6f6e.js","mappings":"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","sources":["webpack:///../../../node_modules/cesium/Source/Core/Ray.js","webpack:///../../../node_modules/cesium/Source/Core/Rectangle.js","webpack:///../../../node_modules/cesium/Source/Core/RectangleCollisionChecker.js","webpack:///../../../node_modules/cesium/Source/Core/RectangleGeometry.js","webpack:///../../../node_modules/cesium/Source/Core/RectangleGeometryLibrary.js","webpack:///../../../node_modules/cesium/Source/Core/RectangleOutlineGeometry.js","webpack:///../../../node_modules/cesium/Source/Core/ReferenceFrame.js","webpack:///../../../node_modules/cesium/Source/Core/Request.js","webpack:///../../../node_modules/cesium/Source/Core/RequestErrorEvent.js","webpack:///../../../node_modules/cesium/Source/Core/RequestScheduler.js","webpack:///../../../node_modules/cesium/Source/Core/RequestState.js","webpack:///../../../node_modules/cesium/Source/Core/RequestType.js","webpack:///../../../node_modules/cesium/Source/Core/Resource.js","webpack:///../../../node_modules/cesium/Source/Core/RuntimeError.js","webpack:///../../../node_modules/cesium/Source/Core/S2Cell.js","webpack:///../../../node_modules/cesium/Source/Core/ScreenSpaceEventHandler.js","webpack:///../../../node_modules/cesium/Source/Core/ScreenSpaceEventType.js","webpack:///../../../node_modules/cesium/Source/Core/ShowGeometryInstanceAttribute.js","webpack:///../../../node_modules/cesium/Source/Core/Simon1994PlanetaryPositions.js","webpack:///../../../node_modules/cesium/Source/Core/SimplePolylineGeometry.js","webpack:///../../../node_modules/cesium/Source/Core/SphereGeometry.js","webpack:///../../../node_modules/cesium/Source/Core/SphereOutlineGeometry.js","webpack:///../../../node_modules/cesium/Source/Core/Spherical.js","webpack:///../../../node_modules/cesium/Source/Core/Spline.js","webpack:///../../../node_modules/cesium/Source/Core/SteppedSpline.js","webpack:///../../../node_modules/cesium/Source/Core/TaskProcessor.js","webpack:///../../../node_modules/cesium/Source/Core/TerrainData.js","webpack:///../../../node_modules/cesium/Source/Core/TerrainEncoding.js","webpack:///../../../node_modules/cesium/Source/Core/TerrainExaggeration.js","webpack:///../../../node_modules/cesium/Source/Core/TerrainMesh.js","webpack:///../../../node_modules/cesium/Source/Core/TerrainProvider.js","webpack:///../../../node_modules/cesium/Source/Core/TerrainQuantization.js","webpack:///../../../node_modules/cesium/Source/Core/TileAvailability.js","webpack:///../../../node_modules/cesium/Source/Core/TileEdge.js","webpack:///../../../node_modules/cesium/Source/Core/TileProviderError.js","webpack:///../../../node_modules/cesium/Source/Core/TilingScheme.js","webpack:///../../../node_modules/cesium/Source/Core/TimeConstants.js","webpack:///../../../node_modules/cesium/Source/Core/TimeInterval.js","webpack:///../../../node_modules/cesium/Source/Core/TimeIntervalCollection.js","webpack:///../../../node_modules/cesium/Source/Core/TimeStandard.js","webpack:///../../../node_modules/cesium/Source/Core/Tipsify.js","webpack:///../../../node_modules/cesium/Source/Core/Transforms.js","webpack:///../../../node_modules/cesium/Source/Core/TranslationRotationScale.js","webpack:///../../../node_modules/cesium/Source/Core/TridiagonalSystemSolver.js","webpack:///../../../node_modules/cesium/Source/Core/TrustedServers.js","webpack:///../../../node_modules/cesium/Source/Core/VRTheWorldTerrainProvider.js","webpack:///../../../node_modules/cesium/Source/Core/VertexFormat.js","webpack:///../../../node_modules/cesium/Source/Core/VideoSynchronizer.js","webpack:///../../../node_modules/cesium/Source/Core/Visibility.js","webpack:///../../../node_modules/cesium/Source/Core/VulkanConstants.js","webpack:///../../../node_modules/cesium/Source/Core/WallGeometry.js","webpack:///../../../node_modules/cesium/Source/Core/WallGeometryLibrary.js","webpack:///../../../node_modules/cesium/Source/Core/WallOutlineGeometry.js","webpack:///../../../node_modules/cesium/Source/Core/WebGLConstants.js","webpack:///../../../node_modules/cesium/Source/Core/WebMercatorProjection.js","webpack:///../../../node_modules/cesium/Source/Core/WebMercatorTilingScheme.js","webpack:///../../../node_modules/cesium/Source/Core/WindingOrder.js","webpack:///../../../node_modules/cesium/Source/Core/WireframeIndexGenerator.js","webpack:///../../../node_modules/cesium/Source/Core/appendForwardSlash.js","webpack:///../../../node_modules/cesium/Source/Core/arrayFill.js","webpack:///../../../node_modules/cesium/Source/Core/arrayRemoveDuplicates.js","webpack:///../../../node_modules/cesium/Source/Core/arraySlice.js","webpack:///../../../node_modules/cesium/Source/Core/barycentricCoordinates.js","webpack:///../../../node_modules/cesium/Source/Core/binarySearch.js","webpack:///../../../node_modules/cesium/Source/Core/buildModuleUrl.js","webpack:///../../../node_modules/cesium/Source/Core/cancelAnimationFrame.js","webpack:///../../../node_modules/cesium/Source/Core/clone.js","webpack:///../../../node_modules/cesium/Source/Core/combine.js","webpack:///../../../node_modules/cesium/Source/Core/createGuid.js","webpack:///../../../node_modules/cesium/Source/Core/createWorldTerrain.js","webpack:///../../../node_modules/cesium/Source/Core/decodeGoogleEarthEnterpriseData.js","webpack:///../../../node_modules/cesium/Source/Core/decodeVectorPolylinePositions.js","webpack:///../../../node_modules/cesium/Source/Core/defaultValue.js","webpack:///../../../node_modules/cesium/Source/Core/defer.js","webpack:///../../../node_modules/cesium/Source/Core/defined.js","webpack:///../../../node_modules/cesium/Source/Core/deprecationWarning.js","webpack:///../../../node_modules/cesium/Source/Core/destroyObject.js","webpack:///../../../node_modules/cesium/Source/Core/formatError.js","webpack:///../../../node_modules/cesium/Source/Core/getAbsoluteUri.js","webpack:///../../../node_modules/cesium/Source/Core/getBaseUri.js","webpack:///../../../node_modules/cesium/Source/Core/getExtensionFromUri.js","webpack:///../../../node_modules/cesium/Source/Core/getFilenameFromUri.js","webpack:///../../../node_modules/cesium/Source/Core/getImagePixels.js","webpack:///../../../node_modules/cesium/Source/Core/getJsonFromTypedArray.js","webpack:///../../../node_modules/cesium/Source/Core/getMagic.js","webpack:///../../../node_modules/cesium/Source/Core/getStringFromTypedArray.js","webpack:///../../../node_modules/cesium/Source/Core/getTimestamp.js","webpack:///../../../node_modules/cesium/Source/Core/isBitSet.js","webpack:///../../../node_modules/cesium/Source/Core/isBlobUri.js","webpack:///../../../node_modules/cesium/Source/Core/isCrossOriginUrl.js","webpack:///../../../node_modules/cesium/Source/Core/isDataUri.js","webpack:///../../../node_modules/cesium/Source/Core/isLeapYear.js","webpack:///../../../node_modules/cesium/Source/Core/loadAndExecuteScript.js","webpack:///../../../node_modules/cesium/Source/Core/loadImageFromTypedArray.js","webpack:///../../../node_modules/cesium/Source/Core/loadKTX2.js","webpack:///../../../node_modules/cesium/Source/Core/mergeSort.js","webpack:///../../../node_modules/cesium/Source/Core/objectToQuery.js","webpack:///../../../node_modules/cesium/Source/Core/oneTimeWarning.js","webpack:///../../../node_modules/cesium/Source/Core/parseResponseHeaders.js","webpack:///../../../node_modules/cesium/Source/Core/pointInsideTriangle.js","webpack:///../../../node_modules/cesium/Source/Core/queryToObject.js","webpack:///../../../node_modules/cesium/Source/Core/requestAnimationFrame.js","webpack:///../../../node_modules/cesium/Source/Core/sampleTerrain.js","webpack:///../../../node_modules/cesium/Source/Core/sampleTerrainMostDetailed.js","webpack:///../../../node_modules/cesium/Source/Core/scaleToGeodeticSurface.js","webpack:///../../../node_modules/cesium/Source/Core/subdivideArray.js","webpack:///../../../node_modules/cesium/Source/Core/webGLConstantToGlslType.js","webpack:///../../../node_modules/cesium/Source/Core/wrapFunction.js","webpack:///../../../node_modules/cesium/Source/Core/writeTextToCanvas.js"],"sourcesContent":["import Cartesian3 from \"./Cartesian3.js\";\nimport Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\n\n/**\n * Represents a ray that extends infinitely from the provided origin in the provided direction.\n * @alias Ray\n * @constructor\n *\n * @param {Cartesian3} [origin=Cartesian3.ZERO] The origin of the ray.\n * @param {Cartesian3} [direction=Cartesian3.ZERO] The direction of the ray.\n */\nfunction Ray(origin, direction) {\n  direction = Cartesian3.clone(defaultValue(direction, Cartesian3.ZERO));\n  if (!Cartesian3.equals(direction, Cartesian3.ZERO)) {\n    Cartesian3.normalize(direction, direction);\n  }\n\n  /**\n   * The origin of the ray.\n   * @type {Cartesian3}\n   * @default {@link Cartesian3.ZERO}\n   */\n  this.origin = Cartesian3.clone(defaultValue(origin, Cartesian3.ZERO));\n\n  /**\n   * The direction of the ray.\n   * @type {Cartesian3}\n   */\n  this.direction = direction;\n}\n\n/**\n * Duplicates a Ray instance.\n *\n * @param {Ray} ray The ray to duplicate.\n * @param {Ray} [result] The object onto which to store the result.\n * @returns {Ray} The modified result parameter or a new Ray instance if one was not provided. (Returns undefined if ray is undefined)\n */\nRay.clone = function (ray, result) {\n  if (!defined(ray)) {\n    return undefined;\n  }\n  if (!defined(result)) {\n    return new Ray(ray.origin, ray.direction);\n  }\n  result.origin = Cartesian3.clone(ray.origin);\n  result.direction = Cartesian3.clone(ray.direction);\n  return result;\n};\n\n/**\n * Computes the point along the ray given by r(t) = o + t*d,\n * where o is the origin of the ray and d is the direction.\n *\n * @param {Ray} ray The ray.\n * @param {Number} t A scalar value.\n * @param {Cartesian3} [result] The object in which the result will be stored.\n * @returns {Cartesian3} The modified result parameter, or a new instance if none was provided.\n *\n * @example\n * //Get the first intersection point of a ray and an ellipsoid.\n * const intersection = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);\n * const point = Cesium.Ray.getPoint(ray, intersection.start);\n */\nRay.getPoint = function (ray, t, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"ray\", ray);\n  Check.typeOf.number(\"t\", t);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    result = new Cartesian3();\n  }\n\n  result = Cartesian3.multiplyByScalar(ray.direction, t, result);\n  return Cartesian3.add(ray.origin, result, result);\n};\nexport default Ray;\n","import Cartographic from \"./Cartographic.js\";\nimport Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport CesiumMath from \"./Math.js\";\n\n/**\n * A two dimensional region specified as longitude and latitude coordinates.\n *\n * @alias Rectangle\n * @constructor\n *\n * @param {Number} [west=0.0] The westernmost longitude, in radians, in the range [-Pi, Pi].\n * @param {Number} [south=0.0] The southernmost latitude, in radians, in the range [-Pi/2, Pi/2].\n * @param {Number} [east=0.0] The easternmost longitude, in radians, in the range [-Pi, Pi].\n * @param {Number} [north=0.0] The northernmost latitude, in radians, in the range [-Pi/2, Pi/2].\n *\n * @see Packable\n */\nfunction Rectangle(west, south, east, north) {\n  /**\n   * The westernmost longitude in radians in the range [-Pi, Pi].\n   *\n   * @type {Number}\n   * @default 0.0\n   */\n  this.west = defaultValue(west, 0.0);\n\n  /**\n   * The southernmost latitude in radians in the range [-Pi/2, Pi/2].\n   *\n   * @type {Number}\n   * @default 0.0\n   */\n  this.south = defaultValue(south, 0.0);\n\n  /**\n   * The easternmost longitude in radians in the range [-Pi, Pi].\n   *\n   * @type {Number}\n   * @default 0.0\n   */\n  this.east = defaultValue(east, 0.0);\n\n  /**\n   * The northernmost latitude in radians in the range [-Pi/2, Pi/2].\n   *\n   * @type {Number}\n   * @default 0.0\n   */\n  this.north = defaultValue(north, 0.0);\n}\n\nObject.defineProperties(Rectangle.prototype, {\n  /**\n   * Gets the width of the rectangle in radians.\n   * @memberof Rectangle.prototype\n   * @type {Number}\n   * @readonly\n   */\n  width: {\n    get: function () {\n      return Rectangle.computeWidth(this);\n    },\n  },\n\n  /**\n   * Gets the height of the rectangle in radians.\n   * @memberof Rectangle.prototype\n   * @type {Number}\n   * @readonly\n   */\n  height: {\n    get: function () {\n      return Rectangle.computeHeight(this);\n    },\n  },\n});\n\n/**\n * The number of elements used to pack the object into an array.\n * @type {Number}\n */\nRectangle.packedLength = 4;\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {Rectangle} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nRectangle.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"value\", value);\n  Check.defined(\"array\", array);\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  array[startingIndex++] = value.west;\n  array[startingIndex++] = value.south;\n  array[startingIndex++] = value.east;\n  array[startingIndex] = value.north;\n\n  return array;\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {Rectangle} [result] The object into which to store the result.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if one was not provided.\n */\nRectangle.unpack = function (array, startingIndex, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"array\", array);\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  if (!defined(result)) {\n    result = new Rectangle();\n  }\n\n  result.west = array[startingIndex++];\n  result.south = array[startingIndex++];\n  result.east = array[startingIndex++];\n  result.north = array[startingIndex];\n  return result;\n};\n\n/**\n * Computes the width of a rectangle in radians.\n * @param {Rectangle} rectangle The rectangle to compute the width of.\n * @returns {Number} The width.\n */\nRectangle.computeWidth = function (rectangle) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n  let east = rectangle.east;\n  const west = rectangle.west;\n  if (east < west) {\n    east += CesiumMath.TWO_PI;\n  }\n  return east - west;\n};\n\n/**\n * Computes the height of a rectangle in radians.\n * @param {Rectangle} rectangle The rectangle to compute the height of.\n * @returns {Number} The height.\n */\nRectangle.computeHeight = function (rectangle) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n  return rectangle.north - rectangle.south;\n};\n\n/**\n * Creates a rectangle given the boundary longitude and latitude in degrees.\n *\n * @param {Number} [west=0.0] The westernmost longitude in degrees in the range [-180.0, 180.0].\n * @param {Number} [south=0.0] The southernmost latitude in degrees in the range [-90.0, 90.0].\n * @param {Number} [east=0.0] The easternmost longitude in degrees in the range [-180.0, 180.0].\n * @param {Number} [north=0.0] The northernmost latitude in degrees in the range [-90.0, 90.0].\n * @param {Rectangle} [result] The object onto which to store the result, or undefined if a new instance should be created.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if none was provided.\n *\n * @example\n * const rectangle = Cesium.Rectangle.fromDegrees(0.0, 20.0, 10.0, 30.0);\n */\nRectangle.fromDegrees = function (west, south, east, north, result) {\n  west = CesiumMath.toRadians(defaultValue(west, 0.0));\n  south = CesiumMath.toRadians(defaultValue(south, 0.0));\n  east = CesiumMath.toRadians(defaultValue(east, 0.0));\n  north = CesiumMath.toRadians(defaultValue(north, 0.0));\n\n  if (!defined(result)) {\n    return new Rectangle(west, south, east, north);\n  }\n\n  result.west = west;\n  result.south = south;\n  result.east = east;\n  result.north = north;\n\n  return result;\n};\n\n/**\n * Creates a rectangle given the boundary longitude and latitude in radians.\n *\n * @param {Number} [west=0.0] The westernmost longitude in radians in the range [-Math.PI, Math.PI].\n * @param {Number} [south=0.0] The southernmost latitude in radians in the range [-Math.PI/2, Math.PI/2].\n * @param {Number} [east=0.0] The easternmost longitude in radians in the range [-Math.PI, Math.PI].\n * @param {Number} [north=0.0] The northernmost latitude in radians in the range [-Math.PI/2, Math.PI/2].\n * @param {Rectangle} [result] The object onto which to store the result, or undefined if a new instance should be created.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if none was provided.\n *\n * @example\n * const rectangle = Cesium.Rectangle.fromRadians(0.0, Math.PI/4, Math.PI/8, 3*Math.PI/4);\n */\nRectangle.fromRadians = function (west, south, east, north, result) {\n  if (!defined(result)) {\n    return new Rectangle(west, south, east, north);\n  }\n\n  result.west = defaultValue(west, 0.0);\n  result.south = defaultValue(south, 0.0);\n  result.east = defaultValue(east, 0.0);\n  result.north = defaultValue(north, 0.0);\n\n  return result;\n};\n\n/**\n * Creates the smallest possible Rectangle that encloses all positions in the provided array.\n *\n * @param {Cartographic[]} cartographics The list of Cartographic instances.\n * @param {Rectangle} [result] The object onto which to store the result, or undefined if a new instance should be created.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if none was provided.\n */\nRectangle.fromCartographicArray = function (cartographics, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"cartographics\", cartographics);\n  //>>includeEnd('debug');\n\n  let west = Number.MAX_VALUE;\n  let east = -Number.MAX_VALUE;\n  let westOverIDL = Number.MAX_VALUE;\n  let eastOverIDL = -Number.MAX_VALUE;\n  let south = Number.MAX_VALUE;\n  let north = -Number.MAX_VALUE;\n\n  for (let i = 0, len = cartographics.length; i < len; i++) {\n    const position = cartographics[i];\n    west = Math.min(west, position.longitude);\n    east = Math.max(east, position.longitude);\n    south = Math.min(south, position.latitude);\n    north = Math.max(north, position.latitude);\n\n    const lonAdjusted =\n      position.longitude >= 0\n        ? position.longitude\n        : position.longitude + CesiumMath.TWO_PI;\n    westOverIDL = Math.min(westOverIDL, lonAdjusted);\n    eastOverIDL = Math.max(eastOverIDL, lonAdjusted);\n  }\n\n  if (east - west > eastOverIDL - westOverIDL) {\n    west = westOverIDL;\n    east = eastOverIDL;\n\n    if (east > CesiumMath.PI) {\n      east = east - CesiumMath.TWO_PI;\n    }\n    if (west > CesiumMath.PI) {\n      west = west - CesiumMath.TWO_PI;\n    }\n  }\n\n  if (!defined(result)) {\n    return new Rectangle(west, south, east, north);\n  }\n\n  result.west = west;\n  result.south = south;\n  result.east = east;\n  result.north = north;\n  return result;\n};\n\n/**\n * Creates the smallest possible Rectangle that encloses all positions in the provided array.\n *\n * @param {Cartesian3[]} cartesians The list of Cartesian instances.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid the cartesians are on.\n * @param {Rectangle} [result] The object onto which to store the result, or undefined if a new instance should be created.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if none was provided.\n */\nRectangle.fromCartesianArray = function (cartesians, ellipsoid, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"cartesians\", cartesians);\n  //>>includeEnd('debug');\n  ellipsoid = defaultValue(ellipsoid, Ellipsoid.WGS84);\n\n  let west = Number.MAX_VALUE;\n  let east = -Number.MAX_VALUE;\n  let westOverIDL = Number.MAX_VALUE;\n  let eastOverIDL = -Number.MAX_VALUE;\n  let south = Number.MAX_VALUE;\n  let north = -Number.MAX_VALUE;\n\n  for (let i = 0, len = cartesians.length; i < len; i++) {\n    const position = ellipsoid.cartesianToCartographic(cartesians[i]);\n    west = Math.min(west, position.longitude);\n    east = Math.max(east, position.longitude);\n    south = Math.min(south, position.latitude);\n    north = Math.max(north, position.latitude);\n\n    const lonAdjusted =\n      position.longitude >= 0\n        ? position.longitude\n        : position.longitude + CesiumMath.TWO_PI;\n    westOverIDL = Math.min(westOverIDL, lonAdjusted);\n    eastOverIDL = Math.max(eastOverIDL, lonAdjusted);\n  }\n\n  if (east - west > eastOverIDL - westOverIDL) {\n    west = westOverIDL;\n    east = eastOverIDL;\n\n    if (east > CesiumMath.PI) {\n      east = east - CesiumMath.TWO_PI;\n    }\n    if (west > CesiumMath.PI) {\n      west = west - CesiumMath.TWO_PI;\n    }\n  }\n\n  if (!defined(result)) {\n    return new Rectangle(west, south, east, north);\n  }\n\n  result.west = west;\n  result.south = south;\n  result.east = east;\n  result.north = north;\n  return result;\n};\n\n/**\n * Duplicates a Rectangle.\n *\n * @param {Rectangle} rectangle The rectangle to clone.\n * @param {Rectangle} [result] The object onto which to store the result, or undefined if a new instance should be created.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if none was provided. (Returns undefined if rectangle is undefined)\n */\nRectangle.clone = function (rectangle, result) {\n  if (!defined(rectangle)) {\n    return undefined;\n  }\n\n  if (!defined(result)) {\n    return new Rectangle(\n      rectangle.west,\n      rectangle.south,\n      rectangle.east,\n      rectangle.north\n    );\n  }\n\n  result.west = rectangle.west;\n  result.south = rectangle.south;\n  result.east = rectangle.east;\n  result.north = rectangle.north;\n  return result;\n};\n\n/**\n * Compares the provided Rectangles componentwise and returns\n * <code>true</code> if they pass an absolute or relative tolerance test,\n * <code>false</code> otherwise.\n *\n * @param {Rectangle} [left] The first Rectangle.\n * @param {Rectangle} [right] The second Rectangle.\n * @param {Number} [absoluteEpsilon=0] The absolute epsilon tolerance to use for equality testing.\n * @returns {Boolean} <code>true</code> if left and right are within the provided epsilon, <code>false</code> otherwise.\n */\nRectangle.equalsEpsilon = function (left, right, absoluteEpsilon) {\n  absoluteEpsilon = defaultValue(absoluteEpsilon, 0);\n\n  return (\n    left === right ||\n    (defined(left) &&\n      defined(right) &&\n      Math.abs(left.west - right.west) <= absoluteEpsilon &&\n      Math.abs(left.south - right.south) <= absoluteEpsilon &&\n      Math.abs(left.east - right.east) <= absoluteEpsilon &&\n      Math.abs(left.north - right.north) <= absoluteEpsilon)\n  );\n};\n\n/**\n * Duplicates this Rectangle.\n *\n * @param {Rectangle} [result] The object onto which to store the result.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if none was provided.\n */\nRectangle.prototype.clone = function (result) {\n  return Rectangle.clone(this, result);\n};\n\n/**\n * Compares the provided Rectangle with this Rectangle componentwise and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {Rectangle} [other] The Rectangle to compare.\n * @returns {Boolean} <code>true</code> if the Rectangles are equal, <code>false</code> otherwise.\n */\nRectangle.prototype.equals = function (other) {\n  return Rectangle.equals(this, other);\n};\n\n/**\n * Compares the provided rectangles and returns <code>true</code> if they are equal,\n * <code>false</code> otherwise.\n *\n * @param {Rectangle} [left] The first Rectangle.\n * @param {Rectangle} [right] The second Rectangle.\n * @returns {Boolean} <code>true</code> if left and right are equal; otherwise <code>false</code>.\n */\nRectangle.equals = function (left, right) {\n  return (\n    left === right ||\n    (defined(left) &&\n      defined(right) &&\n      left.west === right.west &&\n      left.south === right.south &&\n      left.east === right.east &&\n      left.north === right.north)\n  );\n};\n\n/**\n * Compares the provided Rectangle with this Rectangle componentwise and returns\n * <code>true</code> if they are within the provided epsilon,\n * <code>false</code> otherwise.\n *\n * @param {Rectangle} [other] The Rectangle to compare.\n * @param {Number} [epsilon=0] The epsilon to use for equality testing.\n * @returns {Boolean} <code>true</code> if the Rectangles are within the provided epsilon, <code>false</code> otherwise.\n */\nRectangle.prototype.equalsEpsilon = function (other, epsilon) {\n  return Rectangle.equalsEpsilon(this, other, epsilon);\n};\n\n/**\n * Checks a Rectangle's properties and throws if they are not in valid ranges.\n *\n * @param {Rectangle} rectangle The rectangle to validate\n *\n * @exception {DeveloperError} <code>north</code> must be in the interval [<code>-Pi/2</code>, <code>Pi/2</code>].\n * @exception {DeveloperError} <code>south</code> must be in the interval [<code>-Pi/2</code>, <code>Pi/2</code>].\n * @exception {DeveloperError} <code>east</code> must be in the interval [<code>-Pi</code>, <code>Pi</code>].\n * @exception {DeveloperError} <code>west</code> must be in the interval [<code>-Pi</code>, <code>Pi</code>].\n */\nRectangle.validate = function (rectangle) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n\n  const north = rectangle.north;\n  Check.typeOf.number.greaterThanOrEquals(\n    \"north\",\n    north,\n    -CesiumMath.PI_OVER_TWO\n  );\n  Check.typeOf.number.lessThanOrEquals(\"north\", north, CesiumMath.PI_OVER_TWO);\n\n  const south = rectangle.south;\n  Check.typeOf.number.greaterThanOrEquals(\n    \"south\",\n    south,\n    -CesiumMath.PI_OVER_TWO\n  );\n  Check.typeOf.number.lessThanOrEquals(\"south\", south, CesiumMath.PI_OVER_TWO);\n\n  const west = rectangle.west;\n  Check.typeOf.number.greaterThanOrEquals(\"west\", west, -Math.PI);\n  Check.typeOf.number.lessThanOrEquals(\"west\", west, Math.PI);\n\n  const east = rectangle.east;\n  Check.typeOf.number.greaterThanOrEquals(\"east\", east, -Math.PI);\n  Check.typeOf.number.lessThanOrEquals(\"east\", east, Math.PI);\n  //>>includeEnd('debug');\n};\n\n/**\n * Computes the southwest corner of a rectangle.\n *\n * @param {Rectangle} rectangle The rectangle for which to find the corner\n * @param {Cartographic} [result] The object onto which to store the result.\n * @returns {Cartographic} The modified result parameter or a new Cartographic instance if none was provided.\n */\nRectangle.southwest = function (rectangle, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    return new Cartographic(rectangle.west, rectangle.south);\n  }\n  result.longitude = rectangle.west;\n  result.latitude = rectangle.south;\n  result.height = 0.0;\n  return result;\n};\n\n/**\n * Computes the northwest corner of a rectangle.\n *\n * @param {Rectangle} rectangle The rectangle for which to find the corner\n * @param {Cartographic} [result] The object onto which to store the result.\n * @returns {Cartographic} The modified result parameter or a new Cartographic instance if none was provided.\n */\nRectangle.northwest = function (rectangle, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    return new Cartographic(rectangle.west, rectangle.north);\n  }\n  result.longitude = rectangle.west;\n  result.latitude = rectangle.north;\n  result.height = 0.0;\n  return result;\n};\n\n/**\n * Computes the northeast corner of a rectangle.\n *\n * @param {Rectangle} rectangle The rectangle for which to find the corner\n * @param {Cartographic} [result] The object onto which to store the result.\n * @returns {Cartographic} The modified result parameter or a new Cartographic instance if none was provided.\n */\nRectangle.northeast = function (rectangle, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    return new Cartographic(rectangle.east, rectangle.north);\n  }\n  result.longitude = rectangle.east;\n  result.latitude = rectangle.north;\n  result.height = 0.0;\n  return result;\n};\n\n/**\n * Computes the southeast corner of a rectangle.\n *\n * @param {Rectangle} rectangle The rectangle for which to find the corner\n * @param {Cartographic} [result] The object onto which to store the result.\n * @returns {Cartographic} The modified result parameter or a new Cartographic instance if none was provided.\n */\nRectangle.southeast = function (rectangle, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    return new Cartographic(rectangle.east, rectangle.south);\n  }\n  result.longitude = rectangle.east;\n  result.latitude = rectangle.south;\n  result.height = 0.0;\n  return result;\n};\n\n/**\n * Computes the center of a rectangle.\n *\n * @param {Rectangle} rectangle The rectangle for which to find the center\n * @param {Cartographic} [result] The object onto which to store the result.\n * @returns {Cartographic} The modified result parameter or a new Cartographic instance if none was provided.\n */\nRectangle.center = function (rectangle, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  let east = rectangle.east;\n  const west = rectangle.west;\n\n  if (east < west) {\n    east += CesiumMath.TWO_PI;\n  }\n\n  const longitude = CesiumMath.negativePiToPi((west + east) * 0.5);\n  const latitude = (rectangle.south + rectangle.north) * 0.5;\n\n  if (!defined(result)) {\n    return new Cartographic(longitude, latitude);\n  }\n\n  result.longitude = longitude;\n  result.latitude = latitude;\n  result.height = 0.0;\n  return result;\n};\n\n/**\n * Computes the intersection of two rectangles.  This function assumes that the rectangle's coordinates are\n * latitude and longitude in radians and produces a correct intersection, taking into account the fact that\n * the same angle can be represented with multiple values as well as the wrapping of longitude at the\n * anti-meridian.  For a simple intersection that ignores these factors and can be used with projected\n * coordinates, see {@link Rectangle.simpleIntersection}.\n *\n * @param {Rectangle} rectangle On rectangle to find an intersection\n * @param {Rectangle} otherRectangle Another rectangle to find an intersection\n * @param {Rectangle} [result] The object onto which to store the result.\n * @returns {Rectangle|undefined} The modified result parameter, a new Rectangle instance if none was provided or undefined if there is no intersection.\n */\nRectangle.intersection = function (rectangle, otherRectangle, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  Check.typeOf.object(\"otherRectangle\", otherRectangle);\n  //>>includeEnd('debug');\n\n  let rectangleEast = rectangle.east;\n  let rectangleWest = rectangle.west;\n\n  let otherRectangleEast = otherRectangle.east;\n  let otherRectangleWest = otherRectangle.west;\n\n  if (rectangleEast < rectangleWest && otherRectangleEast > 0.0) {\n    rectangleEast += CesiumMath.TWO_PI;\n  } else if (otherRectangleEast < otherRectangleWest && rectangleEast > 0.0) {\n    otherRectangleEast += CesiumMath.TWO_PI;\n  }\n\n  if (rectangleEast < rectangleWest && otherRectangleWest < 0.0) {\n    otherRectangleWest += CesiumMath.TWO_PI;\n  } else if (otherRectangleEast < otherRectangleWest && rectangleWest < 0.0) {\n    rectangleWest += CesiumMath.TWO_PI;\n  }\n\n  const west = CesiumMath.negativePiToPi(\n    Math.max(rectangleWest, otherRectangleWest)\n  );\n  const east = CesiumMath.negativePiToPi(\n    Math.min(rectangleEast, otherRectangleEast)\n  );\n\n  if (\n    (rectangle.west < rectangle.east ||\n      otherRectangle.west < otherRectangle.east) &&\n    east <= west\n  ) {\n    return undefined;\n  }\n\n  const south = Math.max(rectangle.south, otherRectangle.south);\n  const north = Math.min(rectangle.north, otherRectangle.north);\n\n  if (south >= north) {\n    return undefined;\n  }\n\n  if (!defined(result)) {\n    return new Rectangle(west, south, east, north);\n  }\n  result.west = west;\n  result.south = south;\n  result.east = east;\n  result.north = north;\n  return result;\n};\n\n/**\n * Computes a simple intersection of two rectangles.  Unlike {@link Rectangle.intersection}, this function\n * does not attempt to put the angular coordinates into a consistent range or to account for crossing the\n * anti-meridian.  As such, it can be used for rectangles where the coordinates are not simply latitude\n * and longitude (i.e. projected coordinates).\n *\n * @param {Rectangle} rectangle On rectangle to find an intersection\n * @param {Rectangle} otherRectangle Another rectangle to find an intersection\n * @param {Rectangle} [result] The object onto which to store the result.\n * @returns {Rectangle|undefined} The modified result parameter, a new Rectangle instance if none was provided or undefined if there is no intersection.\n */\nRectangle.simpleIntersection = function (rectangle, otherRectangle, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  Check.typeOf.object(\"otherRectangle\", otherRectangle);\n  //>>includeEnd('debug');\n\n  const west = Math.max(rectangle.west, otherRectangle.west);\n  const south = Math.max(rectangle.south, otherRectangle.south);\n  const east = Math.min(rectangle.east, otherRectangle.east);\n  const north = Math.min(rectangle.north, otherRectangle.north);\n\n  if (south >= north || west >= east) {\n    return undefined;\n  }\n\n  if (!defined(result)) {\n    return new Rectangle(west, south, east, north);\n  }\n\n  result.west = west;\n  result.south = south;\n  result.east = east;\n  result.north = north;\n  return result;\n};\n\n/**\n * Computes a rectangle that is the union of two rectangles.\n *\n * @param {Rectangle} rectangle A rectangle to enclose in rectangle.\n * @param {Rectangle} otherRectangle A rectangle to enclose in a rectangle.\n * @param {Rectangle} [result] The object onto which to store the result.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if none was provided.\n */\nRectangle.union = function (rectangle, otherRectangle, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  Check.typeOf.object(\"otherRectangle\", otherRectangle);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    result = new Rectangle();\n  }\n\n  let rectangleEast = rectangle.east;\n  let rectangleWest = rectangle.west;\n\n  let otherRectangleEast = otherRectangle.east;\n  let otherRectangleWest = otherRectangle.west;\n\n  if (rectangleEast < rectangleWest && otherRectangleEast > 0.0) {\n    rectangleEast += CesiumMath.TWO_PI;\n  } else if (otherRectangleEast < otherRectangleWest && rectangleEast > 0.0) {\n    otherRectangleEast += CesiumMath.TWO_PI;\n  }\n\n  if (rectangleEast < rectangleWest && otherRectangleWest < 0.0) {\n    otherRectangleWest += CesiumMath.TWO_PI;\n  } else if (otherRectangleEast < otherRectangleWest && rectangleWest < 0.0) {\n    rectangleWest += CesiumMath.TWO_PI;\n  }\n\n  const west = CesiumMath.negativePiToPi(\n    Math.min(rectangleWest, otherRectangleWest)\n  );\n  const east = CesiumMath.negativePiToPi(\n    Math.max(rectangleEast, otherRectangleEast)\n  );\n\n  result.west = west;\n  result.south = Math.min(rectangle.south, otherRectangle.south);\n  result.east = east;\n  result.north = Math.max(rectangle.north, otherRectangle.north);\n\n  return result;\n};\n\n/**\n * Computes a rectangle by enlarging the provided rectangle until it contains the provided cartographic.\n *\n * @param {Rectangle} rectangle A rectangle to expand.\n * @param {Cartographic} cartographic A cartographic to enclose in a rectangle.\n * @param {Rectangle} [result] The object onto which to store the result.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if one was not provided.\n */\nRectangle.expand = function (rectangle, cartographic, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  Check.typeOf.object(\"cartographic\", cartographic);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    result = new Rectangle();\n  }\n\n  result.west = Math.min(rectangle.west, cartographic.longitude);\n  result.south = Math.min(rectangle.south, cartographic.latitude);\n  result.east = Math.max(rectangle.east, cartographic.longitude);\n  result.north = Math.max(rectangle.north, cartographic.latitude);\n\n  return result;\n};\n\n/**\n * Returns true if the cartographic is on or inside the rectangle, false otherwise.\n *\n * @param {Rectangle} rectangle The rectangle\n * @param {Cartographic} cartographic The cartographic to test.\n * @returns {Boolean} true if the provided cartographic is inside the rectangle, false otherwise.\n */\nRectangle.contains = function (rectangle, cartographic) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  Check.typeOf.object(\"cartographic\", cartographic);\n  //>>includeEnd('debug');\n\n  let longitude = cartographic.longitude;\n  const latitude = cartographic.latitude;\n\n  const west = rectangle.west;\n  let east = rectangle.east;\n\n  if (east < west) {\n    east += CesiumMath.TWO_PI;\n    if (longitude < 0.0) {\n      longitude += CesiumMath.TWO_PI;\n    }\n  }\n  return (\n    (longitude > west ||\n      CesiumMath.equalsEpsilon(longitude, west, CesiumMath.EPSILON14)) &&\n    (longitude < east ||\n      CesiumMath.equalsEpsilon(longitude, east, CesiumMath.EPSILON14)) &&\n    latitude >= rectangle.south &&\n    latitude <= rectangle.north\n  );\n};\n\nconst subsampleLlaScratch = new Cartographic();\n/**\n * Samples a rectangle so that it includes a list of Cartesian points suitable for passing to\n * {@link BoundingSphere#fromPoints}.  Sampling is necessary to account\n * for rectangles that cover the poles or cross the equator.\n *\n * @param {Rectangle} rectangle The rectangle to subsample.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid to use.\n * @param {Number} [surfaceHeight=0.0] The height of the rectangle above the ellipsoid.\n * @param {Cartesian3[]} [result] The array of Cartesians onto which to store the result.\n * @returns {Cartesian3[]} The modified result parameter or a new Array of Cartesians instances if none was provided.\n */\nRectangle.subsample = function (rectangle, ellipsoid, surfaceHeight, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  ellipsoid = defaultValue(ellipsoid, Ellipsoid.WGS84);\n  surfaceHeight = defaultValue(surfaceHeight, 0.0);\n\n  if (!defined(result)) {\n    result = [];\n  }\n  let length = 0;\n\n  const north = rectangle.north;\n  const south = rectangle.south;\n  const east = rectangle.east;\n  const west = rectangle.west;\n\n  const lla = subsampleLlaScratch;\n  lla.height = surfaceHeight;\n\n  lla.longitude = west;\n  lla.latitude = north;\n  result[length] = ellipsoid.cartographicToCartesian(lla, result[length]);\n  length++;\n\n  lla.longitude = east;\n  result[length] = ellipsoid.cartographicToCartesian(lla, result[length]);\n  length++;\n\n  lla.latitude = south;\n  result[length] = ellipsoid.cartographicToCartesian(lla, result[length]);\n  length++;\n\n  lla.longitude = west;\n  result[length] = ellipsoid.cartographicToCartesian(lla, result[length]);\n  length++;\n\n  if (north < 0.0) {\n    lla.latitude = north;\n  } else if (south > 0.0) {\n    lla.latitude = south;\n  } else {\n    lla.latitude = 0.0;\n  }\n\n  for (let i = 1; i < 8; ++i) {\n    lla.longitude = -Math.PI + i * CesiumMath.PI_OVER_TWO;\n    if (Rectangle.contains(rectangle, lla)) {\n      result[length] = ellipsoid.cartographicToCartesian(lla, result[length]);\n      length++;\n    }\n  }\n\n  if (lla.latitude === 0.0) {\n    lla.longitude = west;\n    result[length] = ellipsoid.cartographicToCartesian(lla, result[length]);\n    length++;\n    lla.longitude = east;\n    result[length] = ellipsoid.cartographicToCartesian(lla, result[length]);\n    length++;\n  }\n  result.length = length;\n  return result;\n};\n\n/**\n * Computes a subsection of a rectangle from normalized coordinates in the range [0.0, 1.0].\n *\n * @param {Rectangle} rectangle The rectangle to subsection.\n * @param {Number} westLerp The west interpolation factor in the range [0.0, 1.0]. Must be less than or equal to eastLerp.\n * @param {Number} southLerp The south interpolation factor in the range [0.0, 1.0]. Must be less than or equal to northLerp.\n * @param {Number} eastLerp The east interpolation factor in the range [0.0, 1.0]. Must be greater than or equal to westLerp.\n * @param {Number} northLerp The north interpolation factor in the range [0.0, 1.0]. Must be greater than or equal to southLerp.\n * @param {Rectangle} [result] The object onto which to store the result.\n * @returns {Rectangle} The modified result parameter or a new Rectangle instance if none was provided.\n */\nRectangle.subsection = function (\n  rectangle,\n  westLerp,\n  southLerp,\n  eastLerp,\n  northLerp,\n  result\n) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  Check.typeOf.number.greaterThanOrEquals(\"westLerp\", westLerp, 0.0);\n  Check.typeOf.number.lessThanOrEquals(\"westLerp\", westLerp, 1.0);\n  Check.typeOf.number.greaterThanOrEquals(\"southLerp\", southLerp, 0.0);\n  Check.typeOf.number.lessThanOrEquals(\"southLerp\", southLerp, 1.0);\n  Check.typeOf.number.greaterThanOrEquals(\"eastLerp\", eastLerp, 0.0);\n  Check.typeOf.number.lessThanOrEquals(\"eastLerp\", eastLerp, 1.0);\n  Check.typeOf.number.greaterThanOrEquals(\"northLerp\", northLerp, 0.0);\n  Check.typeOf.number.lessThanOrEquals(\"northLerp\", northLerp, 1.0);\n\n  Check.typeOf.number.lessThanOrEquals(\"westLerp\", westLerp, eastLerp);\n  Check.typeOf.number.lessThanOrEquals(\"southLerp\", southLerp, northLerp);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    result = new Rectangle();\n  }\n\n  // This function doesn't use CesiumMath.lerp because it has floating point precision problems\n  // when the start and end values are the same but the t changes.\n\n  if (rectangle.west <= rectangle.east) {\n    const width = rectangle.east - rectangle.west;\n    result.west = rectangle.west + westLerp * width;\n    result.east = rectangle.west + eastLerp * width;\n  } else {\n    const width = CesiumMath.TWO_PI + rectangle.east - rectangle.west;\n    result.west = CesiumMath.negativePiToPi(rectangle.west + westLerp * width);\n    result.east = CesiumMath.negativePiToPi(rectangle.west + eastLerp * width);\n  }\n  const height = rectangle.north - rectangle.south;\n  result.south = rectangle.south + southLerp * height;\n  result.north = rectangle.south + northLerp * height;\n\n  // Fix floating point precision problems when t = 1\n  if (westLerp === 1.0) {\n    result.west = rectangle.east;\n  }\n  if (eastLerp === 1.0) {\n    result.east = rectangle.east;\n  }\n  if (southLerp === 1.0) {\n    result.south = rectangle.north;\n  }\n  if (northLerp === 1.0) {\n    result.north = rectangle.north;\n  }\n\n  return result;\n};\n\n/**\n * The largest possible rectangle.\n *\n * @type {Rectangle}\n * @constant\n */\nRectangle.MAX_VALUE = Object.freeze(\n  new Rectangle(\n    -Math.PI,\n    -CesiumMath.PI_OVER_TWO,\n    Math.PI,\n    CesiumMath.PI_OVER_TWO\n  )\n);\nexport default Rectangle;\n","import RBush from \"../ThirdParty/rbush.js\";\nimport Check from \"./Check.js\";\n\n/**\n * Wrapper around rbush for use with Rectangle types.\n * @private\n */\nfunction RectangleCollisionChecker() {\n  this._tree = new RBush();\n}\n\nfunction RectangleWithId() {\n  this.minX = 0.0;\n  this.minY = 0.0;\n  this.maxX = 0.0;\n  this.maxY = 0.0;\n  this.id = \"\";\n}\n\nRectangleWithId.fromRectangleAndId = function (id, rectangle, result) {\n  result.minX = rectangle.west;\n  result.minY = rectangle.south;\n  result.maxX = rectangle.east;\n  result.maxY = rectangle.north;\n  result.id = id;\n  return result;\n};\n\n/**\n * Insert a rectangle into the collision checker.\n *\n * @param {String} id Unique string ID for the rectangle being inserted.\n * @param {Rectangle} rectangle A Rectangle\n * @private\n */\nRectangleCollisionChecker.prototype.insert = function (id, rectangle) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"id\", id);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  const withId = RectangleWithId.fromRectangleAndId(\n    id,\n    rectangle,\n    new RectangleWithId()\n  );\n  this._tree.insert(withId);\n};\n\nfunction idCompare(a, b) {\n  return a.id === b.id;\n}\n\nconst removalScratch = new RectangleWithId();\n/**\n * Remove a rectangle from the collision checker.\n *\n * @param {String} id Unique string ID for the rectangle being removed.\n * @param {Rectangle} rectangle A Rectangle\n * @private\n */\nRectangleCollisionChecker.prototype.remove = function (id, rectangle) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"id\", id);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  const withId = RectangleWithId.fromRectangleAndId(\n    id,\n    rectangle,\n    removalScratch\n  );\n  this._tree.remove(withId, idCompare);\n};\n\nconst collisionScratch = new RectangleWithId();\n/**\n * Checks if a given rectangle collides with any of the rectangles in the collection.\n *\n * @param {Rectangle} rectangle A Rectangle that should be checked against the rectangles in the collision checker.\n * @returns {Boolean} Whether the rectangle collides with any of the rectangles in the collision checker.\n */\nRectangleCollisionChecker.prototype.collides = function (rectangle) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  //>>includeEnd('debug');\n\n  const withId = RectangleWithId.fromRectangleAndId(\n    \"\",\n    rectangle,\n    collisionScratch\n  );\n  return this._tree.collides(withId);\n};\nexport default RectangleCollisionChecker;\n","import arrayFill from \"./arrayFill.js\";\nimport BoundingSphere from \"./BoundingSphere.js\";\nimport Cartesian2 from \"./Cartesian2.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport Check from \"./Check.js\";\nimport ComponentDatatype from \"./ComponentDatatype.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport Geometry from \"./Geometry.js\";\nimport GeometryAttribute from \"./GeometryAttribute.js\";\nimport GeometryAttributes from \"./GeometryAttributes.js\";\nimport GeometryInstance from \"./GeometryInstance.js\";\nimport GeometryOffsetAttribute from \"./GeometryOffsetAttribute.js\";\nimport GeometryPipeline from \"./GeometryPipeline.js\";\nimport IndexDatatype from \"./IndexDatatype.js\";\nimport CesiumMath from \"./Math.js\";\nimport Matrix2 from \"./Matrix2.js\";\nimport Matrix3 from \"./Matrix3.js\";\nimport PolygonPipeline from \"./PolygonPipeline.js\";\nimport PrimitiveType from \"./PrimitiveType.js\";\nimport Quaternion from \"./Quaternion.js\";\nimport Rectangle from \"./Rectangle.js\";\nimport RectangleGeometryLibrary from \"./RectangleGeometryLibrary.js\";\nimport VertexFormat from \"./VertexFormat.js\";\n\nconst positionScratch = new Cartesian3();\nconst normalScratch = new Cartesian3();\nconst tangentScratch = new Cartesian3();\nconst bitangentScratch = new Cartesian3();\nconst rectangleScratch = new Rectangle();\nconst stScratch = new Cartesian2();\nconst bottomBoundingSphere = new BoundingSphere();\nconst topBoundingSphere = new BoundingSphere();\n\nfunction createAttributes(vertexFormat, attributes) {\n  const geo = new Geometry({\n    attributes: new GeometryAttributes(),\n    primitiveType: PrimitiveType.TRIANGLES,\n  });\n\n  geo.attributes.position = new GeometryAttribute({\n    componentDatatype: ComponentDatatype.DOUBLE,\n    componentsPerAttribute: 3,\n    values: attributes.positions,\n  });\n  if (vertexFormat.normal) {\n    geo.attributes.normal = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 3,\n      values: attributes.normals,\n    });\n  }\n  if (vertexFormat.tangent) {\n    geo.attributes.tangent = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 3,\n      values: attributes.tangents,\n    });\n  }\n  if (vertexFormat.bitangent) {\n    geo.attributes.bitangent = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 3,\n      values: attributes.bitangents,\n    });\n  }\n  return geo;\n}\n\nfunction calculateAttributes(\n  positions,\n  vertexFormat,\n  ellipsoid,\n  tangentRotationMatrix\n) {\n  const length = positions.length;\n\n  const normals = vertexFormat.normal ? new Float32Array(length) : undefined;\n  const tangents = vertexFormat.tangent ? new Float32Array(length) : undefined;\n  const bitangents = vertexFormat.bitangent\n    ? new Float32Array(length)\n    : undefined;\n\n  let attrIndex = 0;\n  const bitangent = bitangentScratch;\n  const tangent = tangentScratch;\n  let normal = normalScratch;\n  if (vertexFormat.normal || vertexFormat.tangent || vertexFormat.bitangent) {\n    for (let i = 0; i < length; i += 3) {\n      const p = Cartesian3.fromArray(positions, i, positionScratch);\n      const attrIndex1 = attrIndex + 1;\n      const attrIndex2 = attrIndex + 2;\n\n      normal = ellipsoid.geodeticSurfaceNormal(p, normal);\n      if (vertexFormat.tangent || vertexFormat.bitangent) {\n        Cartesian3.cross(Cartesian3.UNIT_Z, normal, tangent);\n        Matrix3.multiplyByVector(tangentRotationMatrix, tangent, tangent);\n        Cartesian3.normalize(tangent, tangent);\n\n        if (vertexFormat.bitangent) {\n          Cartesian3.normalize(\n            Cartesian3.cross(normal, tangent, bitangent),\n            bitangent\n          );\n        }\n      }\n\n      if (vertexFormat.normal) {\n        normals[attrIndex] = normal.x;\n        normals[attrIndex1] = normal.y;\n        normals[attrIndex2] = normal.z;\n      }\n      if (vertexFormat.tangent) {\n        tangents[attrIndex] = tangent.x;\n        tangents[attrIndex1] = tangent.y;\n        tangents[attrIndex2] = tangent.z;\n      }\n      if (vertexFormat.bitangent) {\n        bitangents[attrIndex] = bitangent.x;\n        bitangents[attrIndex1] = bitangent.y;\n        bitangents[attrIndex2] = bitangent.z;\n      }\n      attrIndex += 3;\n    }\n  }\n  return createAttributes(vertexFormat, {\n    positions: positions,\n    normals: normals,\n    tangents: tangents,\n    bitangents: bitangents,\n  });\n}\n\nconst v1Scratch = new Cartesian3();\nconst v2Scratch = new Cartesian3();\n\nfunction calculateAttributesWall(positions, vertexFormat, ellipsoid) {\n  const length = positions.length;\n\n  const normals = vertexFormat.normal ? new Float32Array(length) : undefined;\n  const tangents = vertexFormat.tangent ? new Float32Array(length) : undefined;\n  const bitangents = vertexFormat.bitangent\n    ? new Float32Array(length)\n    : undefined;\n\n  let normalIndex = 0;\n  let tangentIndex = 0;\n  let bitangentIndex = 0;\n  let recomputeNormal = true;\n\n  let bitangent = bitangentScratch;\n  let tangent = tangentScratch;\n  let normal = normalScratch;\n  if (vertexFormat.normal || vertexFormat.tangent || vertexFormat.bitangent) {\n    for (let i = 0; i < length; i += 6) {\n      const p = Cartesian3.fromArray(positions, i, positionScratch);\n      const p1 = Cartesian3.fromArray(positions, (i + 6) % length, v1Scratch);\n      if (recomputeNormal) {\n        const p2 = Cartesian3.fromArray(positions, (i + 3) % length, v2Scratch);\n        Cartesian3.subtract(p1, p, p1);\n        Cartesian3.subtract(p2, p, p2);\n        normal = Cartesian3.normalize(Cartesian3.cross(p2, p1, normal), normal);\n        recomputeNormal = false;\n      }\n\n      if (Cartesian3.equalsEpsilon(p1, p, CesiumMath.EPSILON10)) {\n        // if we've reached a corner\n        recomputeNormal = true;\n      }\n\n      if (vertexFormat.tangent || vertexFormat.bitangent) {\n        bitangent = ellipsoid.geodeticSurfaceNormal(p, bitangent);\n        if (vertexFormat.tangent) {\n          tangent = Cartesian3.normalize(\n            Cartesian3.cross(bitangent, normal, tangent),\n            tangent\n          );\n        }\n      }\n\n      if (vertexFormat.normal) {\n        normals[normalIndex++] = normal.x;\n        normals[normalIndex++] = normal.y;\n        normals[normalIndex++] = normal.z;\n        normals[normalIndex++] = normal.x;\n        normals[normalIndex++] = normal.y;\n        normals[normalIndex++] = normal.z;\n      }\n\n      if (vertexFormat.tangent) {\n        tangents[tangentIndex++] = tangent.x;\n        tangents[tangentIndex++] = tangent.y;\n        tangents[tangentIndex++] = tangent.z;\n        tangents[tangentIndex++] = tangent.x;\n        tangents[tangentIndex++] = tangent.y;\n        tangents[tangentIndex++] = tangent.z;\n      }\n\n      if (vertexFormat.bitangent) {\n        bitangents[bitangentIndex++] = bitangent.x;\n        bitangents[bitangentIndex++] = bitangent.y;\n        bitangents[bitangentIndex++] = bitangent.z;\n        bitangents[bitangentIndex++] = bitangent.x;\n        bitangents[bitangentIndex++] = bitangent.y;\n        bitangents[bitangentIndex++] = bitangent.z;\n      }\n    }\n  }\n\n  return createAttributes(vertexFormat, {\n    positions: positions,\n    normals: normals,\n    tangents: tangents,\n    bitangents: bitangents,\n  });\n}\n\nfunction constructRectangle(rectangleGeometry, computedOptions) {\n  const vertexFormat = rectangleGeometry._vertexFormat;\n  const ellipsoid = rectangleGeometry._ellipsoid;\n  const height = computedOptions.height;\n  const width = computedOptions.width;\n  const northCap = computedOptions.northCap;\n  const southCap = computedOptions.southCap;\n\n  let rowStart = 0;\n  let rowEnd = height;\n  let rowHeight = height;\n  let size = 0;\n  if (northCap) {\n    rowStart = 1;\n    rowHeight -= 1;\n    size += 1;\n  }\n  if (southCap) {\n    rowEnd -= 1;\n    rowHeight -= 1;\n    size += 1;\n  }\n  size += width * rowHeight;\n\n  const positions = vertexFormat.position\n    ? new Float64Array(size * 3)\n    : undefined;\n  const textureCoordinates = vertexFormat.st\n    ? new Float32Array(size * 2)\n    : undefined;\n\n  let posIndex = 0;\n  let stIndex = 0;\n\n  const position = positionScratch;\n  const st = stScratch;\n\n  let minX = Number.MAX_VALUE;\n  let minY = Number.MAX_VALUE;\n  let maxX = -Number.MAX_VALUE;\n  let maxY = -Number.MAX_VALUE;\n\n  for (let row = rowStart; row < rowEnd; ++row) {\n    for (let col = 0; col < width; ++col) {\n      RectangleGeometryLibrary.computePosition(\n        computedOptions,\n        ellipsoid,\n        vertexFormat.st,\n        row,\n        col,\n        position,\n        st\n      );\n\n      positions[posIndex++] = position.x;\n      positions[posIndex++] = position.y;\n      positions[posIndex++] = position.z;\n\n      if (vertexFormat.st) {\n        textureCoordinates[stIndex++] = st.x;\n        textureCoordinates[stIndex++] = st.y;\n\n        minX = Math.min(minX, st.x);\n        minY = Math.min(minY, st.y);\n        maxX = Math.max(maxX, st.x);\n        maxY = Math.max(maxY, st.y);\n      }\n    }\n  }\n  if (northCap) {\n    RectangleGeometryLibrary.computePosition(\n      computedOptions,\n      ellipsoid,\n      vertexFormat.st,\n      0,\n      0,\n      position,\n      st\n    );\n\n    positions[posIndex++] = position.x;\n    positions[posIndex++] = position.y;\n    positions[posIndex++] = position.z;\n\n    if (vertexFormat.st) {\n      textureCoordinates[stIndex++] = st.x;\n      textureCoordinates[stIndex++] = st.y;\n\n      minX = st.x;\n      minY = st.y;\n      maxX = st.x;\n      maxY = st.y;\n    }\n  }\n  if (southCap) {\n    RectangleGeometryLibrary.computePosition(\n      computedOptions,\n      ellipsoid,\n      vertexFormat.st,\n      height - 1,\n      0,\n      position,\n      st\n    );\n\n    positions[posIndex++] = position.x;\n    positions[posIndex++] = position.y;\n    positions[posIndex] = position.z;\n\n    if (vertexFormat.st) {\n      textureCoordinates[stIndex++] = st.x;\n      textureCoordinates[stIndex] = st.y;\n\n      minX = Math.min(minX, st.x);\n      minY = Math.min(minY, st.y);\n      maxX = Math.max(maxX, st.x);\n      maxY = Math.max(maxY, st.y);\n    }\n  }\n\n  if (\n    vertexFormat.st &&\n    (minX < 0.0 || minY < 0.0 || maxX > 1.0 || maxY > 1.0)\n  ) {\n    for (let k = 0; k < textureCoordinates.length; k += 2) {\n      textureCoordinates[k] = (textureCoordinates[k] - minX) / (maxX - minX);\n      textureCoordinates[k + 1] =\n        (textureCoordinates[k + 1] - minY) / (maxY - minY);\n    }\n  }\n\n  const geo = calculateAttributes(\n    positions,\n    vertexFormat,\n    ellipsoid,\n    computedOptions.tangentRotationMatrix\n  );\n\n  let indicesSize = 6 * (width - 1) * (rowHeight - 1);\n  if (northCap) {\n    indicesSize += 3 * (width - 1);\n  }\n  if (southCap) {\n    indicesSize += 3 * (width - 1);\n  }\n  const indices = IndexDatatype.createTypedArray(size, indicesSize);\n  let index = 0;\n  let indicesIndex = 0;\n  let i;\n  for (i = 0; i < rowHeight - 1; ++i) {\n    for (let j = 0; j < width - 1; ++j) {\n      const upperLeft = index;\n      const lowerLeft = upperLeft + width;\n      const lowerRight = lowerLeft + 1;\n      const upperRight = upperLeft + 1;\n      indices[indicesIndex++] = upperLeft;\n      indices[indicesIndex++] = lowerLeft;\n      indices[indicesIndex++] = upperRight;\n      indices[indicesIndex++] = upperRight;\n      indices[indicesIndex++] = lowerLeft;\n      indices[indicesIndex++] = lowerRight;\n      ++index;\n    }\n    ++index;\n  }\n  if (northCap || southCap) {\n    let northIndex = size - 1;\n    const southIndex = size - 1;\n    if (northCap && southCap) {\n      northIndex = size - 2;\n    }\n\n    let p1;\n    let p2;\n    index = 0;\n\n    if (northCap) {\n      for (i = 0; i < width - 1; i++) {\n        p1 = index;\n        p2 = p1 + 1;\n        indices[indicesIndex++] = northIndex;\n        indices[indicesIndex++] = p1;\n        indices[indicesIndex++] = p2;\n        ++index;\n      }\n    }\n    if (southCap) {\n      index = (rowHeight - 1) * width;\n      for (i = 0; i < width - 1; i++) {\n        p1 = index;\n        p2 = p1 + 1;\n        indices[indicesIndex++] = p1;\n        indices[indicesIndex++] = southIndex;\n        indices[indicesIndex++] = p2;\n        ++index;\n      }\n    }\n  }\n\n  geo.indices = indices;\n  if (vertexFormat.st) {\n    geo.attributes.st = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 2,\n      values: textureCoordinates,\n    });\n  }\n\n  return geo;\n}\n\nfunction addWallPositions(\n  wallPositions,\n  posIndex,\n  i,\n  topPositions,\n  bottomPositions\n) {\n  wallPositions[posIndex++] = topPositions[i];\n  wallPositions[posIndex++] = topPositions[i + 1];\n  wallPositions[posIndex++] = topPositions[i + 2];\n  wallPositions[posIndex++] = bottomPositions[i];\n  wallPositions[posIndex++] = bottomPositions[i + 1];\n  wallPositions[posIndex] = bottomPositions[i + 2];\n  return wallPositions;\n}\n\nfunction addWallTextureCoordinates(wallTextures, stIndex, i, st) {\n  wallTextures[stIndex++] = st[i];\n  wallTextures[stIndex++] = st[i + 1];\n  wallTextures[stIndex++] = st[i];\n  wallTextures[stIndex] = st[i + 1];\n  return wallTextures;\n}\n\nconst scratchVertexFormat = new VertexFormat();\n\nfunction constructExtrudedRectangle(rectangleGeometry, computedOptions) {\n  const shadowVolume = rectangleGeometry._shadowVolume;\n  const offsetAttributeValue = rectangleGeometry._offsetAttribute;\n  const vertexFormat = rectangleGeometry._vertexFormat;\n  const minHeight = rectangleGeometry._extrudedHeight;\n  const maxHeight = rectangleGeometry._surfaceHeight;\n  const ellipsoid = rectangleGeometry._ellipsoid;\n\n  const height = computedOptions.height;\n  const width = computedOptions.width;\n\n  let i;\n\n  if (shadowVolume) {\n    const newVertexFormat = VertexFormat.clone(\n      vertexFormat,\n      scratchVertexFormat\n    );\n    newVertexFormat.normal = true;\n    rectangleGeometry._vertexFormat = newVertexFormat;\n  }\n\n  const topBottomGeo = constructRectangle(rectangleGeometry, computedOptions);\n\n  if (shadowVolume) {\n    rectangleGeometry._vertexFormat = vertexFormat;\n  }\n\n  let topPositions = PolygonPipeline.scaleToGeodeticHeight(\n    topBottomGeo.attributes.position.values,\n    maxHeight,\n    ellipsoid,\n    false\n  );\n  topPositions = new Float64Array(topPositions);\n  let length = topPositions.length;\n  const newLength = length * 2;\n  const positions = new Float64Array(newLength);\n  positions.set(topPositions);\n  const bottomPositions = PolygonPipeline.scaleToGeodeticHeight(\n    topBottomGeo.attributes.position.values,\n    minHeight,\n    ellipsoid\n  );\n  positions.set(bottomPositions, length);\n  topBottomGeo.attributes.position.values = positions;\n\n  const normals = vertexFormat.normal ? new Float32Array(newLength) : undefined;\n  const tangents = vertexFormat.tangent\n    ? new Float32Array(newLength)\n    : undefined;\n  const bitangents = vertexFormat.bitangent\n    ? new Float32Array(newLength)\n    : undefined;\n  const textures = vertexFormat.st\n    ? new Float32Array((newLength / 3) * 2)\n    : undefined;\n  let topSt;\n  let topNormals;\n  if (vertexFormat.normal) {\n    topNormals = topBottomGeo.attributes.normal.values;\n    normals.set(topNormals);\n    for (i = 0; i < length; i++) {\n      topNormals[i] = -topNormals[i];\n    }\n    normals.set(topNormals, length);\n    topBottomGeo.attributes.normal.values = normals;\n  }\n  if (shadowVolume) {\n    topNormals = topBottomGeo.attributes.normal.values;\n    if (!vertexFormat.normal) {\n      topBottomGeo.attributes.normal = undefined;\n    }\n    const extrudeNormals = new Float32Array(newLength);\n    for (i = 0; i < length; i++) {\n      topNormals[i] = -topNormals[i];\n    }\n    extrudeNormals.set(topNormals, length); //only get normals for bottom layer that's going to be pushed down\n    topBottomGeo.attributes.extrudeDirection = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 3,\n      values: extrudeNormals,\n    });\n  }\n\n  let offsetValue;\n  const hasOffsets = defined(offsetAttributeValue);\n  if (hasOffsets) {\n    const size = (length / 3) * 2;\n    let offsetAttribute = new Uint8Array(size);\n    if (offsetAttributeValue === GeometryOffsetAttribute.TOP) {\n      offsetAttribute = arrayFill(offsetAttribute, 1, 0, size / 2);\n    } else {\n      offsetValue =\n        offsetAttributeValue === GeometryOffsetAttribute.NONE ? 0 : 1;\n      offsetAttribute = arrayFill(offsetAttribute, offsetValue);\n    }\n\n    topBottomGeo.attributes.applyOffset = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.UNSIGNED_BYTE,\n      componentsPerAttribute: 1,\n      values: offsetAttribute,\n    });\n  }\n\n  if (vertexFormat.tangent) {\n    const topTangents = topBottomGeo.attributes.tangent.values;\n    tangents.set(topTangents);\n    for (i = 0; i < length; i++) {\n      topTangents[i] = -topTangents[i];\n    }\n    tangents.set(topTangents, length);\n    topBottomGeo.attributes.tangent.values = tangents;\n  }\n  if (vertexFormat.bitangent) {\n    const topBitangents = topBottomGeo.attributes.bitangent.values;\n    bitangents.set(topBitangents);\n    bitangents.set(topBitangents, length);\n    topBottomGeo.attributes.bitangent.values = bitangents;\n  }\n  if (vertexFormat.st) {\n    topSt = topBottomGeo.attributes.st.values;\n    textures.set(topSt);\n    textures.set(topSt, (length / 3) * 2);\n    topBottomGeo.attributes.st.values = textures;\n  }\n\n  const indices = topBottomGeo.indices;\n  const indicesLength = indices.length;\n  const posLength = length / 3;\n  const newIndices = IndexDatatype.createTypedArray(\n    newLength / 3,\n    indicesLength * 2\n  );\n  newIndices.set(indices);\n  for (i = 0; i < indicesLength; i += 3) {\n    newIndices[i + indicesLength] = indices[i + 2] + posLength;\n    newIndices[i + 1 + indicesLength] = indices[i + 1] + posLength;\n    newIndices[i + 2 + indicesLength] = indices[i] + posLength;\n  }\n  topBottomGeo.indices = newIndices;\n\n  const northCap = computedOptions.northCap;\n  const southCap = computedOptions.southCap;\n\n  let rowHeight = height;\n  let widthMultiplier = 2;\n  let perimeterPositions = 0;\n  let corners = 4;\n  let dupliateCorners = 4;\n  if (northCap) {\n    widthMultiplier -= 1;\n    rowHeight -= 1;\n    perimeterPositions += 1;\n    corners -= 2;\n    dupliateCorners -= 1;\n  }\n  if (southCap) {\n    widthMultiplier -= 1;\n    rowHeight -= 1;\n    perimeterPositions += 1;\n    corners -= 2;\n    dupliateCorners -= 1;\n  }\n  perimeterPositions += widthMultiplier * width + 2 * rowHeight - corners;\n\n  const wallCount = (perimeterPositions + dupliateCorners) * 2;\n\n  let wallPositions = new Float64Array(wallCount * 3);\n  const wallExtrudeNormals = shadowVolume\n    ? new Float32Array(wallCount * 3)\n    : undefined;\n  let wallOffsetAttribute = hasOffsets ? new Uint8Array(wallCount) : undefined;\n  let wallTextures = vertexFormat.st\n    ? new Float32Array(wallCount * 2)\n    : undefined;\n\n  const computeTopOffsets =\n    offsetAttributeValue === GeometryOffsetAttribute.TOP;\n  if (hasOffsets && !computeTopOffsets) {\n    offsetValue = offsetAttributeValue === GeometryOffsetAttribute.ALL ? 1 : 0;\n    wallOffsetAttribute = arrayFill(wallOffsetAttribute, offsetValue);\n  }\n\n  let posIndex = 0;\n  let stIndex = 0;\n  let extrudeNormalIndex = 0;\n  let wallOffsetIndex = 0;\n  const area = width * rowHeight;\n  let threeI;\n  for (i = 0; i < area; i += width) {\n    threeI = i * 3;\n    wallPositions = addWallPositions(\n      wallPositions,\n      posIndex,\n      threeI,\n      topPositions,\n      bottomPositions\n    );\n    posIndex += 6;\n    if (vertexFormat.st) {\n      wallTextures = addWallTextureCoordinates(\n        wallTextures,\n        stIndex,\n        i * 2,\n        topSt\n      );\n      stIndex += 4;\n    }\n    if (shadowVolume) {\n      extrudeNormalIndex += 3;\n      wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI];\n      wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 1];\n      wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 2];\n    }\n    if (computeTopOffsets) {\n      wallOffsetAttribute[wallOffsetIndex++] = 1;\n      wallOffsetIndex += 1;\n    }\n  }\n\n  if (!southCap) {\n    for (i = area - width; i < area; i++) {\n      threeI = i * 3;\n      wallPositions = addWallPositions(\n        wallPositions,\n        posIndex,\n        threeI,\n        topPositions,\n        bottomPositions\n      );\n      posIndex += 6;\n      if (vertexFormat.st) {\n        wallTextures = addWallTextureCoordinates(\n          wallTextures,\n          stIndex,\n          i * 2,\n          topSt\n        );\n        stIndex += 4;\n      }\n      if (shadowVolume) {\n        extrudeNormalIndex += 3;\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI];\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 1];\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 2];\n      }\n      if (computeTopOffsets) {\n        wallOffsetAttribute[wallOffsetIndex++] = 1;\n        wallOffsetIndex += 1;\n      }\n    }\n  } else {\n    const southIndex = northCap ? area + 1 : area;\n    threeI = southIndex * 3;\n\n    for (i = 0; i < 2; i++) {\n      // duplicate corner points\n      wallPositions = addWallPositions(\n        wallPositions,\n        posIndex,\n        threeI,\n        topPositions,\n        bottomPositions\n      );\n      posIndex += 6;\n      if (vertexFormat.st) {\n        wallTextures = addWallTextureCoordinates(\n          wallTextures,\n          stIndex,\n          southIndex * 2,\n          topSt\n        );\n        stIndex += 4;\n      }\n      if (shadowVolume) {\n        extrudeNormalIndex += 3;\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI];\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 1];\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 2];\n      }\n      if (computeTopOffsets) {\n        wallOffsetAttribute[wallOffsetIndex++] = 1;\n        wallOffsetIndex += 1;\n      }\n    }\n  }\n\n  for (i = area - 1; i > 0; i -= width) {\n    threeI = i * 3;\n    wallPositions = addWallPositions(\n      wallPositions,\n      posIndex,\n      threeI,\n      topPositions,\n      bottomPositions\n    );\n    posIndex += 6;\n    if (vertexFormat.st) {\n      wallTextures = addWallTextureCoordinates(\n        wallTextures,\n        stIndex,\n        i * 2,\n        topSt\n      );\n      stIndex += 4;\n    }\n    if (shadowVolume) {\n      extrudeNormalIndex += 3;\n      wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI];\n      wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 1];\n      wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 2];\n    }\n    if (computeTopOffsets) {\n      wallOffsetAttribute[wallOffsetIndex++] = 1;\n      wallOffsetIndex += 1;\n    }\n  }\n\n  if (!northCap) {\n    for (i = width - 1; i >= 0; i--) {\n      threeI = i * 3;\n      wallPositions = addWallPositions(\n        wallPositions,\n        posIndex,\n        threeI,\n        topPositions,\n        bottomPositions\n      );\n      posIndex += 6;\n      if (vertexFormat.st) {\n        wallTextures = addWallTextureCoordinates(\n          wallTextures,\n          stIndex,\n          i * 2,\n          topSt\n        );\n        stIndex += 4;\n      }\n      if (shadowVolume) {\n        extrudeNormalIndex += 3;\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI];\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 1];\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 2];\n      }\n      if (computeTopOffsets) {\n        wallOffsetAttribute[wallOffsetIndex++] = 1;\n        wallOffsetIndex += 1;\n      }\n    }\n  } else {\n    const northIndex = area;\n    threeI = northIndex * 3;\n\n    for (i = 0; i < 2; i++) {\n      // duplicate corner points\n      wallPositions = addWallPositions(\n        wallPositions,\n        posIndex,\n        threeI,\n        topPositions,\n        bottomPositions\n      );\n      posIndex += 6;\n      if (vertexFormat.st) {\n        wallTextures = addWallTextureCoordinates(\n          wallTextures,\n          stIndex,\n          northIndex * 2,\n          topSt\n        );\n        stIndex += 4;\n      }\n      if (shadowVolume) {\n        extrudeNormalIndex += 3;\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI];\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 1];\n        wallExtrudeNormals[extrudeNormalIndex++] = topNormals[threeI + 2];\n      }\n      if (computeTopOffsets) {\n        wallOffsetAttribute[wallOffsetIndex++] = 1;\n        wallOffsetIndex += 1;\n      }\n    }\n  }\n\n  let geo = calculateAttributesWall(wallPositions, vertexFormat, ellipsoid);\n\n  if (vertexFormat.st) {\n    geo.attributes.st = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 2,\n      values: wallTextures,\n    });\n  }\n  if (shadowVolume) {\n    geo.attributes.extrudeDirection = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 3,\n      values: wallExtrudeNormals,\n    });\n  }\n  if (hasOffsets) {\n    geo.attributes.applyOffset = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.UNSIGNED_BYTE,\n      componentsPerAttribute: 1,\n      values: wallOffsetAttribute,\n    });\n  }\n\n  const wallIndices = IndexDatatype.createTypedArray(\n    wallCount,\n    perimeterPositions * 6\n  );\n\n  let upperLeft;\n  let lowerLeft;\n  let lowerRight;\n  let upperRight;\n  length = wallPositions.length / 3;\n  let index = 0;\n  for (i = 0; i < length - 1; i += 2) {\n    upperLeft = i;\n    upperRight = (upperLeft + 2) % length;\n    const p1 = Cartesian3.fromArray(wallPositions, upperLeft * 3, v1Scratch);\n    const p2 = Cartesian3.fromArray(wallPositions, upperRight * 3, v2Scratch);\n    if (Cartesian3.equalsEpsilon(p1, p2, CesiumMath.EPSILON10)) {\n      continue;\n    }\n    lowerLeft = (upperLeft + 1) % length;\n    lowerRight = (lowerLeft + 2) % length;\n    wallIndices[index++] = upperLeft;\n    wallIndices[index++] = lowerLeft;\n    wallIndices[index++] = upperRight;\n    wallIndices[index++] = upperRight;\n    wallIndices[index++] = lowerLeft;\n    wallIndices[index++] = lowerRight;\n  }\n\n  geo.indices = wallIndices;\n\n  geo = GeometryPipeline.combineInstances([\n    new GeometryInstance({\n      geometry: topBottomGeo,\n    }),\n    new GeometryInstance({\n      geometry: geo,\n    }),\n  ]);\n\n  return geo[0];\n}\n\nconst scratchRectanglePoints = [\n  new Cartesian3(),\n  new Cartesian3(),\n  new Cartesian3(),\n  new Cartesian3(),\n];\nconst nwScratch = new Cartographic();\nconst stNwScratch = new Cartographic();\nfunction computeRectangle(rectangle, granularity, rotation, ellipsoid, result) {\n  if (rotation === 0.0) {\n    return Rectangle.clone(rectangle, result);\n  }\n\n  const computedOptions = RectangleGeometryLibrary.computeOptions(\n    rectangle,\n    granularity,\n    rotation,\n    0,\n    rectangleScratch,\n    nwScratch\n  );\n\n  const height = computedOptions.height;\n  const width = computedOptions.width;\n\n  const positions = scratchRectanglePoints;\n  RectangleGeometryLibrary.computePosition(\n    computedOptions,\n    ellipsoid,\n    false,\n    0,\n    0,\n    positions[0]\n  );\n  RectangleGeometryLibrary.computePosition(\n    computedOptions,\n    ellipsoid,\n    false,\n    0,\n    width - 1,\n    positions[1]\n  );\n  RectangleGeometryLibrary.computePosition(\n    computedOptions,\n    ellipsoid,\n    false,\n    height - 1,\n    0,\n    positions[2]\n  );\n  RectangleGeometryLibrary.computePosition(\n    computedOptions,\n    ellipsoid,\n    false,\n    height - 1,\n    width - 1,\n    positions[3]\n  );\n\n  return Rectangle.fromCartesianArray(positions, ellipsoid, result);\n}\n\n/**\n * A description of a cartographic rectangle on an ellipsoid centered at the origin. Rectangle geometry can be rendered with both {@link Primitive} and {@link GroundPrimitive}.\n *\n * @alias RectangleGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Rectangle} options.rectangle A cartographic rectangle with north, south, east and west properties in radians.\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid on which the rectangle lies.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Number} [options.height=0.0] The distance in meters between the rectangle and the ellipsoid surface.\n * @param {Number} [options.rotation=0.0] The rotation of the rectangle, in radians. A positive rotation is counter-clockwise.\n * @param {Number} [options.stRotation=0.0] The rotation of the texture coordinates, in radians. A positive rotation is counter-clockwise.\n * @param {Number} [options.extrudedHeight] The distance in meters between the rectangle's extruded face and the ellipsoid surface.\n *\n * @exception {DeveloperError} <code>options.rectangle.north</code> must be in the interval [<code>-Pi/2</code>, <code>Pi/2</code>].\n * @exception {DeveloperError} <code>options.rectangle.south</code> must be in the interval [<code>-Pi/2</code>, <code>Pi/2</code>].\n * @exception {DeveloperError} <code>options.rectangle.east</code> must be in the interval [<code>-Pi</code>, <code>Pi</code>].\n * @exception {DeveloperError} <code>options.rectangle.west</code> must be in the interval [<code>-Pi</code>, <code>Pi</code>].\n * @exception {DeveloperError} <code>options.rectangle.north</code> must be greater than <code>options.rectangle.south</code>.\n *\n * @see RectangleGeometry#createGeometry\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Rectangle.html|Cesium Sandcastle Rectangle Demo}\n *\n * @example\n * // 1. create a rectangle\n * const rectangle = new Cesium.RectangleGeometry({\n *   ellipsoid : Cesium.Ellipsoid.WGS84,\n *   rectangle : Cesium.Rectangle.fromDegrees(-80.0, 39.0, -74.0, 42.0),\n *   height : 10000.0\n * });\n * const geometry = Cesium.RectangleGeometry.createGeometry(rectangle);\n *\n * // 2. create an extruded rectangle without a top\n * const rectangle = new Cesium.RectangleGeometry({\n *   ellipsoid : Cesium.Ellipsoid.WGS84,\n *   rectangle : Cesium.Rectangle.fromDegrees(-80.0, 39.0, -74.0, 42.0),\n *   height : 10000.0,\n *   extrudedHeight: 300000\n * });\n * const geometry = Cesium.RectangleGeometry.createGeometry(rectangle);\n */\nfunction RectangleGeometry(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const rectangle = options.rectangle;\n\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  Rectangle.validate(rectangle);\n  if (rectangle.north < rectangle.south) {\n    throw new DeveloperError(\n      \"options.rectangle.north must be greater than or equal to options.rectangle.south\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  const height = defaultValue(options.height, 0.0);\n  const extrudedHeight = defaultValue(options.extrudedHeight, height);\n\n  this._rectangle = Rectangle.clone(rectangle);\n  this._granularity = defaultValue(\n    options.granularity,\n    CesiumMath.RADIANS_PER_DEGREE\n  );\n  this._ellipsoid = Ellipsoid.clone(\n    defaultValue(options.ellipsoid, Ellipsoid.WGS84)\n  );\n  this._surfaceHeight = Math.max(height, extrudedHeight);\n  this._rotation = defaultValue(options.rotation, 0.0);\n  this._stRotation = defaultValue(options.stRotation, 0.0);\n  this._vertexFormat = VertexFormat.clone(\n    defaultValue(options.vertexFormat, VertexFormat.DEFAULT)\n  );\n  this._extrudedHeight = Math.min(height, extrudedHeight);\n  this._shadowVolume = defaultValue(options.shadowVolume, false);\n  this._workerName = \"createRectangleGeometry\";\n  this._offsetAttribute = options.offsetAttribute;\n  this._rotatedRectangle = undefined;\n\n  this._textureCoordinateRotationPoints = undefined;\n}\n\n/**\n * The number of elements used to pack the object into an array.\n * @type {Number}\n */\nRectangleGeometry.packedLength =\n  Rectangle.packedLength +\n  Ellipsoid.packedLength +\n  VertexFormat.packedLength +\n  7;\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {RectangleGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nRectangleGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"value\", value);\n  Check.defined(\"array\", array);\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  Rectangle.pack(value._rectangle, array, startingIndex);\n  startingIndex += Rectangle.packedLength;\n\n  Ellipsoid.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += Ellipsoid.packedLength;\n\n  VertexFormat.pack(value._vertexFormat, array, startingIndex);\n  startingIndex += VertexFormat.packedLength;\n\n  array[startingIndex++] = value._granularity;\n  array[startingIndex++] = value._surfaceHeight;\n  array[startingIndex++] = value._rotation;\n  array[startingIndex++] = value._stRotation;\n  array[startingIndex++] = value._extrudedHeight;\n  array[startingIndex++] = value._shadowVolume ? 1.0 : 0.0;\n  array[startingIndex] = defaultValue(value._offsetAttribute, -1);\n\n  return array;\n};\n\nconst scratchRectangle = new Rectangle();\nconst scratchEllipsoid = Ellipsoid.clone(Ellipsoid.UNIT_SPHERE);\nconst scratchOptions = {\n  rectangle: scratchRectangle,\n  ellipsoid: scratchEllipsoid,\n  vertexFormat: scratchVertexFormat,\n  granularity: undefined,\n  height: undefined,\n  rotation: undefined,\n  stRotation: undefined,\n  extrudedHeight: undefined,\n  shadowVolume: undefined,\n  offsetAttribute: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {RectangleGeometry} [result] The object into which to store the result.\n * @returns {RectangleGeometry} The modified result parameter or a new RectangleGeometry instance if one was not provided.\n */\nRectangleGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"array\", array);\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  const rectangle = Rectangle.unpack(array, startingIndex, scratchRectangle);\n  startingIndex += Rectangle.packedLength;\n\n  const ellipsoid = Ellipsoid.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += Ellipsoid.packedLength;\n\n  const vertexFormat = VertexFormat.unpack(\n    array,\n    startingIndex,\n    scratchVertexFormat\n  );\n  startingIndex += VertexFormat.packedLength;\n\n  const granularity = array[startingIndex++];\n  const surfaceHeight = array[startingIndex++];\n  const rotation = array[startingIndex++];\n  const stRotation = array[startingIndex++];\n  const extrudedHeight = array[startingIndex++];\n  const shadowVolume = array[startingIndex++] === 1.0;\n  const offsetAttribute = array[startingIndex];\n\n  if (!defined(result)) {\n    scratchOptions.granularity = granularity;\n    scratchOptions.height = surfaceHeight;\n    scratchOptions.rotation = rotation;\n    scratchOptions.stRotation = stRotation;\n    scratchOptions.extrudedHeight = extrudedHeight;\n    scratchOptions.shadowVolume = shadowVolume;\n    scratchOptions.offsetAttribute =\n      offsetAttribute === -1 ? undefined : offsetAttribute;\n\n    return new RectangleGeometry(scratchOptions);\n  }\n\n  result._rectangle = Rectangle.clone(rectangle, result._rectangle);\n  result._ellipsoid = Ellipsoid.clone(ellipsoid, result._ellipsoid);\n  result._vertexFormat = VertexFormat.clone(vertexFormat, result._vertexFormat);\n  result._granularity = granularity;\n  result._surfaceHeight = surfaceHeight;\n  result._rotation = rotation;\n  result._stRotation = stRotation;\n  result._extrudedHeight = extrudedHeight;\n  result._shadowVolume = shadowVolume;\n  result._offsetAttribute =\n    offsetAttribute === -1 ? undefined : offsetAttribute;\n\n  return result;\n};\n\n/**\n * Computes the bounding rectangle based on the provided options\n *\n * @param {Object} options Object with the following properties:\n * @param {Rectangle} options.rectangle A cartographic rectangle with north, south, east and west properties in radians.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid on which the rectangle lies.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Number} [options.rotation=0.0] The rotation of the rectangle, in radians. A positive rotation is counter-clockwise.\n * @param {Rectangle} [result] An object in which to store the result.\n *\n * @returns {Rectangle} The result rectangle\n */\nRectangleGeometry.computeRectangle = function (options, result) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const rectangle = options.rectangle;\n\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"rectangle\", rectangle);\n  Rectangle.validate(rectangle);\n  if (rectangle.north < rectangle.south) {\n    throw new DeveloperError(\n      \"options.rectangle.north must be greater than or equal to options.rectangle.south\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  const granularity = defaultValue(\n    options.granularity,\n    CesiumMath.RADIANS_PER_DEGREE\n  );\n  const ellipsoid = defaultValue(options.ellipsoid, Ellipsoid.WGS84);\n  const rotation = defaultValue(options.rotation, 0.0);\n\n  return computeRectangle(rectangle, granularity, rotation, ellipsoid, result);\n};\n\nconst tangentRotationMatrixScratch = new Matrix3();\nconst quaternionScratch = new Quaternion();\nconst centerScratch = new Cartographic();\n/**\n * Computes the geometric representation of a rectangle, including its vertices, indices, and a bounding sphere.\n *\n * @param {RectangleGeometry} rectangleGeometry A description of the rectangle.\n * @returns {Geometry|undefined} The computed vertices and indices.\n *\n * @exception {DeveloperError} Rotated rectangle is invalid.\n */\nRectangleGeometry.createGeometry = function (rectangleGeometry) {\n  if (\n    CesiumMath.equalsEpsilon(\n      rectangleGeometry._rectangle.north,\n      rectangleGeometry._rectangle.south,\n      CesiumMath.EPSILON10\n    ) ||\n    CesiumMath.equalsEpsilon(\n      rectangleGeometry._rectangle.east,\n      rectangleGeometry._rectangle.west,\n      CesiumMath.EPSILON10\n    )\n  ) {\n    return undefined;\n  }\n\n  let rectangle = rectangleGeometry._rectangle;\n  const ellipsoid = rectangleGeometry._ellipsoid;\n  const rotation = rectangleGeometry._rotation;\n  const stRotation = rectangleGeometry._stRotation;\n  const vertexFormat = rectangleGeometry._vertexFormat;\n\n  const computedOptions = RectangleGeometryLibrary.computeOptions(\n    rectangle,\n    rectangleGeometry._granularity,\n    rotation,\n    stRotation,\n    rectangleScratch,\n    nwScratch,\n    stNwScratch\n  );\n\n  const tangentRotationMatrix = tangentRotationMatrixScratch;\n  if (stRotation !== 0 || rotation !== 0) {\n    const center = Rectangle.center(rectangle, centerScratch);\n    const axis = ellipsoid.geodeticSurfaceNormalCartographic(center, v1Scratch);\n    Quaternion.fromAxisAngle(axis, -stRotation, quaternionScratch);\n    Matrix3.fromQuaternion(quaternionScratch, tangentRotationMatrix);\n  } else {\n    Matrix3.clone(Matrix3.IDENTITY, tangentRotationMatrix);\n  }\n\n  const surfaceHeight = rectangleGeometry._surfaceHeight;\n  const extrudedHeight = rectangleGeometry._extrudedHeight;\n  const extrude = !CesiumMath.equalsEpsilon(\n    surfaceHeight,\n    extrudedHeight,\n    0,\n    CesiumMath.EPSILON2\n  );\n\n  computedOptions.lonScalar = 1.0 / rectangleGeometry._rectangle.width;\n  computedOptions.latScalar = 1.0 / rectangleGeometry._rectangle.height;\n  computedOptions.tangentRotationMatrix = tangentRotationMatrix;\n\n  let geometry;\n  let boundingSphere;\n  rectangle = rectangleGeometry._rectangle;\n  if (extrude) {\n    geometry = constructExtrudedRectangle(rectangleGeometry, computedOptions);\n    const topBS = BoundingSphere.fromRectangle3D(\n      rectangle,\n      ellipsoid,\n      surfaceHeight,\n      topBoundingSphere\n    );\n    const bottomBS = BoundingSphere.fromRectangle3D(\n      rectangle,\n      ellipsoid,\n      extrudedHeight,\n      bottomBoundingSphere\n    );\n    boundingSphere = BoundingSphere.union(topBS, bottomBS);\n  } else {\n    geometry = constructRectangle(rectangleGeometry, computedOptions);\n    geometry.attributes.position.values = PolygonPipeline.scaleToGeodeticHeight(\n      geometry.attributes.position.values,\n      surfaceHeight,\n      ellipsoid,\n      false\n    );\n\n    if (defined(rectangleGeometry._offsetAttribute)) {\n      const length = geometry.attributes.position.values.length;\n      const applyOffset = new Uint8Array(length / 3);\n      const offsetValue =\n        rectangleGeometry._offsetAttribute === GeometryOffsetAttribute.NONE\n          ? 0\n          : 1;\n      arrayFill(applyOffset, offsetValue);\n      geometry.attributes.applyOffset = new GeometryAttribute({\n        componentDatatype: ComponentDatatype.UNSIGNED_BYTE,\n        componentsPerAttribute: 1,\n        values: applyOffset,\n      });\n    }\n\n    boundingSphere = BoundingSphere.fromRectangle3D(\n      rectangle,\n      ellipsoid,\n      surfaceHeight\n    );\n  }\n\n  if (!vertexFormat.position) {\n    delete geometry.attributes.position;\n  }\n\n  return new Geometry({\n    attributes: geometry.attributes,\n    indices: geometry.indices,\n    primitiveType: geometry.primitiveType,\n    boundingSphere: boundingSphere,\n    offsetAttribute: rectangleGeometry._offsetAttribute,\n  });\n};\n\n/**\n * @private\n */\nRectangleGeometry.createShadowVolume = function (\n  rectangleGeometry,\n  minHeightFunc,\n  maxHeightFunc\n) {\n  const granularity = rectangleGeometry._granularity;\n  const ellipsoid = rectangleGeometry._ellipsoid;\n\n  const minHeight = minHeightFunc(granularity, ellipsoid);\n  const maxHeight = maxHeightFunc(granularity, ellipsoid);\n\n  return new RectangleGeometry({\n    rectangle: rectangleGeometry._rectangle,\n    rotation: rectangleGeometry._rotation,\n    ellipsoid: ellipsoid,\n    stRotation: rectangleGeometry._stRotation,\n    granularity: granularity,\n    extrudedHeight: maxHeight,\n    height: minHeight,\n    vertexFormat: VertexFormat.POSITION_ONLY,\n    shadowVolume: true,\n  });\n};\n\nconst unrotatedTextureRectangleScratch = new Rectangle();\nconst points2DScratch = [new Cartesian2(), new Cartesian2(), new Cartesian2()];\nconst rotation2DScratch = new Matrix2();\nconst rectangleCenterScratch = new Cartographic();\n\nfunction textureCoordinateRotationPoints(rectangleGeometry) {\n  if (rectangleGeometry._stRotation === 0.0) {\n    return [0, 0, 0, 1, 1, 0];\n  }\n\n  const rectangle = Rectangle.clone(\n    rectangleGeometry._rectangle,\n    unrotatedTextureRectangleScratch\n  );\n  const granularity = rectangleGeometry._granularity;\n  const ellipsoid = rectangleGeometry._ellipsoid;\n\n  // Rotate to align the texture coordinates with ENU\n  const rotation = rectangleGeometry._rotation - rectangleGeometry._stRotation;\n\n  const unrotatedTextureRectangle = computeRectangle(\n    rectangle,\n    granularity,\n    rotation,\n    ellipsoid,\n    unrotatedTextureRectangleScratch\n  );\n\n  // Assume a computed \"east-north\" texture coordinate system based on spherical or planar tricks, bounded by `boundingRectangle`.\n  // The \"desired\" texture coordinate system forms an oriented rectangle (un-oriented computed) around the geometry that completely and tightly bounds it.\n  // We want to map from the \"east-north\" texture coordinate system into the \"desired\" system using a pair of lines (analagous planes in 2D)\n  // Compute 3 corners of the \"desired\" texture coordinate system in \"east-north\" texture space by the following in cartographic space:\n  // - rotate 3 of the corners in unrotatedTextureRectangle by stRotation around the center of the bounding rectangle\n  // - apply the \"east-north\" system's normalization formula to the rotated cartographics, even though this is likely to produce values outside [0-1].\n  // This gives us a set of points in the \"east-north\" texture coordinate system that can be used to map \"east-north\" texture coordinates to \"desired.\"\n\n  const points2D = points2DScratch;\n  points2D[0].x = unrotatedTextureRectangle.west;\n  points2D[0].y = unrotatedTextureRectangle.south;\n\n  points2D[1].x = unrotatedTextureRectangle.west;\n  points2D[1].y = unrotatedTextureRectangle.north;\n\n  points2D[2].x = unrotatedTextureRectangle.east;\n  points2D[2].y = unrotatedTextureRectangle.south;\n\n  const boundingRectangle = rectangleGeometry.rectangle;\n  const toDesiredInComputed = Matrix2.fromRotation(\n    rectangleGeometry._stRotation,\n    rotation2DScratch\n  );\n  const boundingRectangleCenter = Rectangle.center(\n    boundingRectangle,\n    rectangleCenterScratch\n  );\n\n  for (let i = 0; i < 3; ++i) {\n    const point2D = points2D[i];\n    point2D.x -= boundingRectangleCenter.longitude;\n    point2D.y -= boundingRectangleCenter.latitude;\n    Matrix2.multiplyByVector(toDesiredInComputed, point2D, point2D);\n    point2D.x += boundingRectangleCenter.longitude;\n    point2D.y += boundingRectangleCenter.latitude;\n\n    // Convert point into east-north texture coordinate space\n    point2D.x = (point2D.x - boundingRectangle.west) / boundingRectangle.width;\n    point2D.y =\n      (point2D.y - boundingRectangle.south) / boundingRectangle.height;\n  }\n\n  const minXYCorner = points2D[0];\n  const maxYCorner = points2D[1];\n  const maxXCorner = points2D[2];\n  const result = new Array(6);\n  Cartesian2.pack(minXYCorner, result);\n  Cartesian2.pack(maxYCorner, result, 2);\n  Cartesian2.pack(maxXCorner, result, 4);\n  return result;\n}\n\nObject.defineProperties(RectangleGeometry.prototype, {\n  /**\n   * @private\n   */\n  rectangle: {\n    get: function () {\n      if (!defined(this._rotatedRectangle)) {\n        this._rotatedRectangle = computeRectangle(\n          this._rectangle,\n          this._granularity,\n          this._rotation,\n          this._ellipsoid\n        );\n      }\n      return this._rotatedRectangle;\n    },\n  },\n  /**\n   * For remapping texture coordinates when rendering RectangleGeometries as GroundPrimitives.\n   * This version permits skew in textures by computing offsets directly in cartographic space and\n   * more accurately approximates rendering RectangleGeometries with height as standard Primitives.\n   * @see Geometry#_textureCoordinateRotationPoints\n   * @private\n   */\n  textureCoordinateRotationPoints: {\n    get: function () {\n      if (!defined(this._textureCoordinateRotationPoints)) {\n        this._textureCoordinateRotationPoints = textureCoordinateRotationPoints(\n          this\n        );\n      }\n      return this._textureCoordinateRotationPoints;\n    },\n  },\n});\nexport default RectangleGeometry;\n","import Cartesian3 from \"./Cartesian3.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport GeographicProjection from \"./GeographicProjection.js\";\nimport CesiumMath from \"./Math.js\";\nimport Matrix2 from \"./Matrix2.js\";\nimport Rectangle from \"./Rectangle.js\";\n\nconst cos = Math.cos;\nconst sin = Math.sin;\nconst sqrt = Math.sqrt;\n\n/**\n * @private\n */\nconst RectangleGeometryLibrary = {};\n\n/**\n * @private\n */\nRectangleGeometryLibrary.computePosition = function (\n  computedOptions,\n  ellipsoid,\n  computeST,\n  row,\n  col,\n  position,\n  st\n) {\n  const radiiSquared = ellipsoid.radiiSquared;\n  const nwCorner = computedOptions.nwCorner;\n  const rectangle = computedOptions.boundingRectangle;\n\n  let stLatitude =\n    nwCorner.latitude -\n    computedOptions.granYCos * row +\n    col * computedOptions.granXSin;\n  const cosLatitude = cos(stLatitude);\n  const nZ = sin(stLatitude);\n  const kZ = radiiSquared.z * nZ;\n\n  let stLongitude =\n    nwCorner.longitude +\n    row * computedOptions.granYSin +\n    col * computedOptions.granXCos;\n  const nX = cosLatitude * cos(stLongitude);\n  const nY = cosLatitude * sin(stLongitude);\n\n  const kX = radiiSquared.x * nX;\n  const kY = radiiSquared.y * nY;\n\n  const gamma = sqrt(kX * nX + kY * nY + kZ * nZ);\n\n  position.x = kX / gamma;\n  position.y = kY / gamma;\n  position.z = kZ / gamma;\n\n  if (computeST) {\n    const stNwCorner = computedOptions.stNwCorner;\n    if (defined(stNwCorner)) {\n      stLatitude =\n        stNwCorner.latitude -\n        computedOptions.stGranYCos * row +\n        col * computedOptions.stGranXSin;\n      stLongitude =\n        stNwCorner.longitude +\n        row * computedOptions.stGranYSin +\n        col * computedOptions.stGranXCos;\n\n      st.x = (stLongitude - computedOptions.stWest) * computedOptions.lonScalar;\n      st.y = (stLatitude - computedOptions.stSouth) * computedOptions.latScalar;\n    } else {\n      st.x = (stLongitude - rectangle.west) * computedOptions.lonScalar;\n      st.y = (stLatitude - rectangle.south) * computedOptions.latScalar;\n    }\n  }\n};\n\nconst rotationMatrixScratch = new Matrix2();\nlet nwCartesian = new Cartesian3();\nconst centerScratch = new Cartographic();\nlet centerCartesian = new Cartesian3();\nconst proj = new GeographicProjection();\n\nfunction getRotationOptions(\n  nwCorner,\n  rotation,\n  granularityX,\n  granularityY,\n  center,\n  width,\n  height\n) {\n  const cosRotation = Math.cos(rotation);\n  const granYCos = granularityY * cosRotation;\n  const granXCos = granularityX * cosRotation;\n\n  const sinRotation = Math.sin(rotation);\n  const granYSin = granularityY * sinRotation;\n  const granXSin = granularityX * sinRotation;\n\n  nwCartesian = proj.project(nwCorner, nwCartesian);\n\n  nwCartesian = Cartesian3.subtract(nwCartesian, centerCartesian, nwCartesian);\n  const rotationMatrix = Matrix2.fromRotation(rotation, rotationMatrixScratch);\n  nwCartesian = Matrix2.multiplyByVector(\n    rotationMatrix,\n    nwCartesian,\n    nwCartesian\n  );\n  nwCartesian = Cartesian3.add(nwCartesian, centerCartesian, nwCartesian);\n  nwCorner = proj.unproject(nwCartesian, nwCorner);\n\n  width -= 1;\n  height -= 1;\n\n  const latitude = nwCorner.latitude;\n  const latitude0 = latitude + width * granXSin;\n  const latitude1 = latitude - granYCos * height;\n  const latitude2 = latitude - granYCos * height + width * granXSin;\n\n  const north = Math.max(latitude, latitude0, latitude1, latitude2);\n  const south = Math.min(latitude, latitude0, latitude1, latitude2);\n\n  const longitude = nwCorner.longitude;\n  const longitude0 = longitude + width * granXCos;\n  const longitude1 = longitude + height * granYSin;\n  const longitude2 = longitude + height * granYSin + width * granXCos;\n\n  const east = Math.max(longitude, longitude0, longitude1, longitude2);\n  const west = Math.min(longitude, longitude0, longitude1, longitude2);\n\n  return {\n    north: north,\n    south: south,\n    east: east,\n    west: west,\n    granYCos: granYCos,\n    granYSin: granYSin,\n    granXCos: granXCos,\n    granXSin: granXSin,\n    nwCorner: nwCorner,\n  };\n}\n\n/**\n * @private\n */\nRectangleGeometryLibrary.computeOptions = function (\n  rectangle,\n  granularity,\n  rotation,\n  stRotation,\n  boundingRectangleScratch,\n  nwCornerResult,\n  stNwCornerResult\n) {\n  let east = rectangle.east;\n  let west = rectangle.west;\n  let north = rectangle.north;\n  let south = rectangle.south;\n\n  let northCap = false;\n  let southCap = false;\n\n  if (north === CesiumMath.PI_OVER_TWO) {\n    northCap = true;\n  }\n  if (south === -CesiumMath.PI_OVER_TWO) {\n    southCap = true;\n  }\n\n  let dx;\n  const dy = north - south;\n  if (west > east) {\n    dx = CesiumMath.TWO_PI - west + east;\n  } else {\n    dx = east - west;\n  }\n\n  const width = Math.ceil(dx / granularity) + 1;\n  const height = Math.ceil(dy / granularity) + 1;\n  const granularityX = dx / (width - 1);\n  const granularityY = dy / (height - 1);\n\n  const nwCorner = Rectangle.northwest(rectangle, nwCornerResult);\n  const center = Rectangle.center(rectangle, centerScratch);\n  if (rotation !== 0 || stRotation !== 0) {\n    if (center.longitude < nwCorner.longitude) {\n      center.longitude += CesiumMath.TWO_PI;\n    }\n    centerCartesian = proj.project(center, centerCartesian);\n  }\n\n  const granYCos = granularityY;\n  const granXCos = granularityX;\n  const granYSin = 0.0;\n  const granXSin = 0.0;\n\n  const boundingRectangle = Rectangle.clone(\n    rectangle,\n    boundingRectangleScratch\n  );\n\n  const computedOptions = {\n    granYCos: granYCos,\n    granYSin: granYSin,\n    granXCos: granXCos,\n    granXSin: granXSin,\n    nwCorner: nwCorner,\n    boundingRectangle: boundingRectangle,\n    width: width,\n    height: height,\n    northCap: northCap,\n    southCap: southCap,\n  };\n\n  if (rotation !== 0) {\n    const rotationOptions = getRotationOptions(\n      nwCorner,\n      rotation,\n      granularityX,\n      granularityY,\n      center,\n      width,\n      height\n    );\n    north = rotationOptions.north;\n    south = rotationOptions.south;\n    east = rotationOptions.east;\n    west = rotationOptions.west;\n\n    //>>includeStart('debug', pragmas.debug);\n    if (\n      north < -CesiumMath.PI_OVER_TWO ||\n      north > CesiumMath.PI_OVER_TWO ||\n      south < -CesiumMath.PI_OVER_TWO ||\n      south > CesiumMath.PI_OVER_TWO\n    ) {\n      throw new DeveloperError(\n        \"Rotated rectangle is invalid.  It crosses over either the north or south pole.\"\n      );\n    }\n    //>>includeEnd('debug')\n\n    computedOptions.granYCos = rotationOptions.granYCos;\n    computedOptions.granYSin = rotationOptions.granYSin;\n    computedOptions.granXCos = rotationOptions.granXCos;\n    computedOptions.granXSin = rotationOptions.granXSin;\n\n    boundingRectangle.north = north;\n    boundingRectangle.south = south;\n    boundingRectangle.east = east;\n    boundingRectangle.west = west;\n  }\n\n  if (stRotation !== 0) {\n    rotation = rotation - stRotation;\n    const stNwCorner = Rectangle.northwest(boundingRectangle, stNwCornerResult);\n\n    const stRotationOptions = getRotationOptions(\n      stNwCorner,\n      rotation,\n      granularityX,\n      granularityY,\n      center,\n      width,\n      height\n    );\n\n    computedOptions.stGranYCos = stRotationOptions.granYCos;\n    computedOptions.stGranXCos = stRotationOptions.granXCos;\n    computedOptions.stGranYSin = stRotationOptions.granYSin;\n    computedOptions.stGranXSin = stRotationOptions.granXSin;\n    computedOptions.stNwCorner = stNwCorner;\n    computedOptions.stWest = stRotationOptions.west;\n    computedOptions.stSouth = stRotationOptions.south;\n  }\n\n  return computedOptions;\n};\nexport default RectangleGeometryLibrary;\n","import arrayFill from \"./arrayFill.js\";\nimport BoundingSphere from \"./BoundingSphere.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport ComponentDatatype from \"./ComponentDatatype.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport Geometry from \"./Geometry.js\";\nimport GeometryAttribute from \"./GeometryAttribute.js\";\nimport GeometryAttributes from \"./GeometryAttributes.js\";\nimport GeometryOffsetAttribute from \"./GeometryOffsetAttribute.js\";\nimport IndexDatatype from \"./IndexDatatype.js\";\nimport CesiumMath from \"./Math.js\";\nimport PolygonPipeline from \"./PolygonPipeline.js\";\nimport PrimitiveType from \"./PrimitiveType.js\";\nimport Rectangle from \"./Rectangle.js\";\nimport RectangleGeometryLibrary from \"./RectangleGeometryLibrary.js\";\n\nconst bottomBoundingSphere = new BoundingSphere();\nconst topBoundingSphere = new BoundingSphere();\nconst positionScratch = new Cartesian3();\nconst rectangleScratch = new Rectangle();\n\nfunction constructRectangle(geometry, computedOptions) {\n  const ellipsoid = geometry._ellipsoid;\n  const height = computedOptions.height;\n  const width = computedOptions.width;\n  const northCap = computedOptions.northCap;\n  const southCap = computedOptions.southCap;\n\n  let rowHeight = height;\n  let widthMultiplier = 2;\n  let size = 0;\n  let corners = 4;\n  if (northCap) {\n    widthMultiplier -= 1;\n    rowHeight -= 1;\n    size += 1;\n    corners -= 2;\n  }\n  if (southCap) {\n    widthMultiplier -= 1;\n    rowHeight -= 1;\n    size += 1;\n    corners -= 2;\n  }\n  size += widthMultiplier * width + 2 * rowHeight - corners;\n\n  const positions = new Float64Array(size * 3);\n\n  let posIndex = 0;\n  let row = 0;\n  let col;\n  const position = positionScratch;\n  if (northCap) {\n    RectangleGeometryLibrary.computePosition(\n      computedOptions,\n      ellipsoid,\n      false,\n      row,\n      0,\n      position\n    );\n    positions[posIndex++] = position.x;\n    positions[posIndex++] = position.y;\n    positions[posIndex++] = position.z;\n  } else {\n    for (col = 0; col < width; col++) {\n      RectangleGeometryLibrary.computePosition(\n        computedOptions,\n        ellipsoid,\n        false,\n        row,\n        col,\n        position\n      );\n      positions[posIndex++] = position.x;\n      positions[posIndex++] = position.y;\n      positions[posIndex++] = position.z;\n    }\n  }\n\n  col = width - 1;\n  for (row = 1; row < height; row++) {\n    RectangleGeometryLibrary.computePosition(\n      computedOptions,\n      ellipsoid,\n      false,\n      row,\n      col,\n      position\n    );\n    positions[posIndex++] = position.x;\n    positions[posIndex++] = position.y;\n    positions[posIndex++] = position.z;\n  }\n\n  row = height - 1;\n  if (!southCap) {\n    // if southCap is true, we dont need to add any more points because the south pole point was added by the iteration above\n    for (col = width - 2; col >= 0; col--) {\n      RectangleGeometryLibrary.computePosition(\n        computedOptions,\n        ellipsoid,\n        false,\n        row,\n        col,\n        position\n      );\n      positions[posIndex++] = position.x;\n      positions[posIndex++] = position.y;\n      positions[posIndex++] = position.z;\n    }\n  }\n\n  col = 0;\n  for (row = height - 2; row > 0; row--) {\n    RectangleGeometryLibrary.computePosition(\n      computedOptions,\n      ellipsoid,\n      false,\n      row,\n      col,\n      position\n    );\n    positions[posIndex++] = position.x;\n    positions[posIndex++] = position.y;\n    positions[posIndex++] = position.z;\n  }\n\n  const indicesSize = (positions.length / 3) * 2;\n  const indices = IndexDatatype.createTypedArray(\n    positions.length / 3,\n    indicesSize\n  );\n\n  let index = 0;\n  for (let i = 0; i < positions.length / 3 - 1; i++) {\n    indices[index++] = i;\n    indices[index++] = i + 1;\n  }\n  indices[index++] = positions.length / 3 - 1;\n  indices[index++] = 0;\n\n  const geo = new Geometry({\n    attributes: new GeometryAttributes(),\n    primitiveType: PrimitiveType.LINES,\n  });\n\n  geo.attributes.position = new GeometryAttribute({\n    componentDatatype: ComponentDatatype.DOUBLE,\n    componentsPerAttribute: 3,\n    values: positions,\n  });\n  geo.indices = indices;\n\n  return geo;\n}\n\nfunction constructExtrudedRectangle(rectangleGeometry, computedOptions) {\n  const surfaceHeight = rectangleGeometry._surfaceHeight;\n  const extrudedHeight = rectangleGeometry._extrudedHeight;\n  const ellipsoid = rectangleGeometry._ellipsoid;\n  const minHeight = extrudedHeight;\n  const maxHeight = surfaceHeight;\n  const geo = constructRectangle(rectangleGeometry, computedOptions);\n\n  const height = computedOptions.height;\n  const width = computedOptions.width;\n\n  const topPositions = PolygonPipeline.scaleToGeodeticHeight(\n    geo.attributes.position.values,\n    maxHeight,\n    ellipsoid,\n    false\n  );\n  let length = topPositions.length;\n  const positions = new Float64Array(length * 2);\n  positions.set(topPositions);\n  const bottomPositions = PolygonPipeline.scaleToGeodeticHeight(\n    geo.attributes.position.values,\n    minHeight,\n    ellipsoid\n  );\n  positions.set(bottomPositions, length);\n  geo.attributes.position.values = positions;\n\n  const northCap = computedOptions.northCap;\n  const southCap = computedOptions.southCap;\n  let corners = 4;\n  if (northCap) {\n    corners -= 1;\n  }\n  if (southCap) {\n    corners -= 1;\n  }\n\n  const indicesSize = (positions.length / 3 + corners) * 2;\n  const indices = IndexDatatype.createTypedArray(\n    positions.length / 3,\n    indicesSize\n  );\n  length = positions.length / 6;\n  let index = 0;\n  for (let i = 0; i < length - 1; i++) {\n    indices[index++] = i;\n    indices[index++] = i + 1;\n    indices[index++] = i + length;\n    indices[index++] = i + length + 1;\n  }\n  indices[index++] = length - 1;\n  indices[index++] = 0;\n  indices[index++] = length + length - 1;\n  indices[index++] = length;\n\n  indices[index++] = 0;\n  indices[index++] = length;\n\n  let bottomCorner;\n  if (northCap) {\n    bottomCorner = height - 1;\n  } else {\n    const topRightCorner = width - 1;\n    indices[index++] = topRightCorner;\n    indices[index++] = topRightCorner + length;\n    bottomCorner = width + height - 2;\n  }\n\n  indices[index++] = bottomCorner;\n  indices[index++] = bottomCorner + length;\n\n  if (!southCap) {\n    const bottomLeftCorner = width + bottomCorner - 1;\n    indices[index++] = bottomLeftCorner;\n    indices[index] = bottomLeftCorner + length;\n  }\n\n  geo.indices = indices;\n\n  return geo;\n}\n\n/**\n * A description of the outline of a a cartographic rectangle on an ellipsoid centered at the origin.\n *\n * @alias RectangleOutlineGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Rectangle} options.rectangle A cartographic rectangle with north, south, east and west properties in radians.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid on which the rectangle lies.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Number} [options.height=0.0] The distance in meters between the rectangle and the ellipsoid surface.\n * @param {Number} [options.rotation=0.0] The rotation of the rectangle, in radians. A positive rotation is counter-clockwise.\n * @param {Number} [options.extrudedHeight] The distance in meters between the rectangle's extruded face and the ellipsoid surface.\n *\n * @exception {DeveloperError} <code>options.rectangle.north</code> must be in the interval [<code>-Pi/2</code>, <code>Pi/2</code>].\n * @exception {DeveloperError} <code>options.rectangle.south</code> must be in the interval [<code>-Pi/2</code>, <code>Pi/2</code>].\n * @exception {DeveloperError} <code>options.rectangle.east</code> must be in the interval [<code>-Pi</code>, <code>Pi</code>].\n * @exception {DeveloperError} <code>options.rectangle.west</code> must be in the interval [<code>-Pi</code>, <code>Pi</code>].\n * @exception {DeveloperError} <code>options.rectangle.north</code> must be greater than <code>rectangle.south</code>.\n *\n * @see RectangleOutlineGeometry#createGeometry\n *\n * @example\n * const rectangle = new Cesium.RectangleOutlineGeometry({\n *   ellipsoid : Cesium.Ellipsoid.WGS84,\n *   rectangle : Cesium.Rectangle.fromDegrees(-80.0, 39.0, -74.0, 42.0),\n *   height : 10000.0\n * });\n * const geometry = Cesium.RectangleOutlineGeometry.createGeometry(rectangle);\n */\nfunction RectangleOutlineGeometry(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const rectangle = options.rectangle;\n  const granularity = defaultValue(\n    options.granularity,\n    CesiumMath.RADIANS_PER_DEGREE\n  );\n  const ellipsoid = defaultValue(options.ellipsoid, Ellipsoid.WGS84);\n  const rotation = defaultValue(options.rotation, 0.0);\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(rectangle)) {\n    throw new DeveloperError(\"rectangle is required.\");\n  }\n  Rectangle.validate(rectangle);\n  if (rectangle.north < rectangle.south) {\n    throw new DeveloperError(\n      \"options.rectangle.north must be greater than options.rectangle.south\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  const height = defaultValue(options.height, 0.0);\n  const extrudedHeight = defaultValue(options.extrudedHeight, height);\n\n  this._rectangle = Rectangle.clone(rectangle);\n  this._granularity = granularity;\n  this._ellipsoid = ellipsoid;\n  this._surfaceHeight = Math.max(height, extrudedHeight);\n  this._rotation = rotation;\n  this._extrudedHeight = Math.min(height, extrudedHeight);\n  this._offsetAttribute = options.offsetAttribute;\n  this._workerName = \"createRectangleOutlineGeometry\";\n}\n\n/**\n * The number of elements used to pack the object into an array.\n * @type {Number}\n */\nRectangleOutlineGeometry.packedLength =\n  Rectangle.packedLength + Ellipsoid.packedLength + 5;\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {RectangleOutlineGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nRectangleOutlineGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(value)) {\n    throw new DeveloperError(\"value is required\");\n  }\n\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  Rectangle.pack(value._rectangle, array, startingIndex);\n  startingIndex += Rectangle.packedLength;\n\n  Ellipsoid.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += Ellipsoid.packedLength;\n\n  array[startingIndex++] = value._granularity;\n  array[startingIndex++] = value._surfaceHeight;\n  array[startingIndex++] = value._rotation;\n  array[startingIndex++] = value._extrudedHeight;\n  array[startingIndex] = defaultValue(value._offsetAttribute, -1);\n\n  return array;\n};\n\nconst scratchRectangle = new Rectangle();\nconst scratchEllipsoid = Ellipsoid.clone(Ellipsoid.UNIT_SPHERE);\nconst scratchOptions = {\n  rectangle: scratchRectangle,\n  ellipsoid: scratchEllipsoid,\n  granularity: undefined,\n  height: undefined,\n  rotation: undefined,\n  extrudedHeight: undefined,\n  offsetAttribute: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {RectangleOutlineGeometry} [result] The object into which to store the result.\n * @returns {RectangleOutlineGeometry} The modified result parameter or a new Quaternion instance if one was not provided.\n */\nRectangleOutlineGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  const rectangle = Rectangle.unpack(array, startingIndex, scratchRectangle);\n  startingIndex += Rectangle.packedLength;\n\n  const ellipsoid = Ellipsoid.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += Ellipsoid.packedLength;\n\n  const granularity = array[startingIndex++];\n  const height = array[startingIndex++];\n  const rotation = array[startingIndex++];\n  const extrudedHeight = array[startingIndex++];\n  const offsetAttribute = array[startingIndex];\n\n  if (!defined(result)) {\n    scratchOptions.granularity = granularity;\n    scratchOptions.height = height;\n    scratchOptions.rotation = rotation;\n    scratchOptions.extrudedHeight = extrudedHeight;\n    scratchOptions.offsetAttribute =\n      offsetAttribute === -1 ? undefined : offsetAttribute;\n\n    return new RectangleOutlineGeometry(scratchOptions);\n  }\n\n  result._rectangle = Rectangle.clone(rectangle, result._rectangle);\n  result._ellipsoid = Ellipsoid.clone(ellipsoid, result._ellipsoid);\n  result._surfaceHeight = height;\n  result._rotation = rotation;\n  result._extrudedHeight = extrudedHeight;\n  result._offsetAttribute =\n    offsetAttribute === -1 ? undefined : offsetAttribute;\n\n  return result;\n};\n\nconst nwScratch = new Cartographic();\n/**\n * Computes the geometric representation of an outline of a rectangle, including its vertices, indices, and a bounding sphere.\n *\n * @param {RectangleOutlineGeometry} rectangleGeometry A description of the rectangle outline.\n * @returns {Geometry|undefined} The computed vertices and indices.\n *\n * @exception {DeveloperError} Rotated rectangle is invalid.\n */\nRectangleOutlineGeometry.createGeometry = function (rectangleGeometry) {\n  const rectangle = rectangleGeometry._rectangle;\n  const ellipsoid = rectangleGeometry._ellipsoid;\n  const computedOptions = RectangleGeometryLibrary.computeOptions(\n    rectangle,\n    rectangleGeometry._granularity,\n    rectangleGeometry._rotation,\n    0,\n    rectangleScratch,\n    nwScratch\n  );\n\n  let geometry;\n  let boundingSphere;\n\n  if (\n    CesiumMath.equalsEpsilon(\n      rectangle.north,\n      rectangle.south,\n      CesiumMath.EPSILON10\n    ) ||\n    CesiumMath.equalsEpsilon(\n      rectangle.east,\n      rectangle.west,\n      CesiumMath.EPSILON10\n    )\n  ) {\n    return undefined;\n  }\n\n  const surfaceHeight = rectangleGeometry._surfaceHeight;\n  const extrudedHeight = rectangleGeometry._extrudedHeight;\n  const extrude = !CesiumMath.equalsEpsilon(\n    surfaceHeight,\n    extrudedHeight,\n    0,\n    CesiumMath.EPSILON2\n  );\n  let offsetValue;\n  if (extrude) {\n    geometry = constructExtrudedRectangle(rectangleGeometry, computedOptions);\n    if (defined(rectangleGeometry._offsetAttribute)) {\n      const size = geometry.attributes.position.values.length / 3;\n      let offsetAttribute = new Uint8Array(size);\n      if (rectangleGeometry._offsetAttribute === GeometryOffsetAttribute.TOP) {\n        offsetAttribute = arrayFill(offsetAttribute, 1, 0, size / 2);\n      } else {\n        offsetValue =\n          rectangleGeometry._offsetAttribute === GeometryOffsetAttribute.NONE\n            ? 0\n            : 1;\n        offsetAttribute = arrayFill(offsetAttribute, offsetValue);\n      }\n\n      geometry.attributes.applyOffset = new GeometryAttribute({\n        componentDatatype: ComponentDatatype.UNSIGNED_BYTE,\n        componentsPerAttribute: 1,\n        values: offsetAttribute,\n      });\n    }\n    const topBS = BoundingSphere.fromRectangle3D(\n      rectangle,\n      ellipsoid,\n      surfaceHeight,\n      topBoundingSphere\n    );\n    const bottomBS = BoundingSphere.fromRectangle3D(\n      rectangle,\n      ellipsoid,\n      extrudedHeight,\n      bottomBoundingSphere\n    );\n    boundingSphere = BoundingSphere.union(topBS, bottomBS);\n  } else {\n    geometry = constructRectangle(rectangleGeometry, computedOptions);\n    geometry.attributes.position.values = PolygonPipeline.scaleToGeodeticHeight(\n      geometry.attributes.position.values,\n      surfaceHeight,\n      ellipsoid,\n      false\n    );\n\n    if (defined(rectangleGeometry._offsetAttribute)) {\n      const length = geometry.attributes.position.values.length;\n      const applyOffset = new Uint8Array(length / 3);\n      offsetValue =\n        rectangleGeometry._offsetAttribute === GeometryOffsetAttribute.NONE\n          ? 0\n          : 1;\n      arrayFill(applyOffset, offsetValue);\n      geometry.attributes.applyOffset = new GeometryAttribute({\n        componentDatatype: ComponentDatatype.UNSIGNED_BYTE,\n        componentsPerAttribute: 1,\n        values: applyOffset,\n      });\n    }\n\n    boundingSphere = BoundingSphere.fromRectangle3D(\n      rectangle,\n      ellipsoid,\n      surfaceHeight\n    );\n  }\n\n  return new Geometry({\n    attributes: geometry.attributes,\n    indices: geometry.indices,\n    primitiveType: PrimitiveType.LINES,\n    boundingSphere: boundingSphere,\n    offsetAttribute: rectangleGeometry._offsetAttribute,\n  });\n};\nexport default RectangleOutlineGeometry;\n","/**\n * Constants for identifying well-known reference frames.\n *\n * @enum {Number}\n */\nconst ReferenceFrame = {\n  /**\n   * The fixed frame.\n   *\n   * @type {Number}\n   * @constant\n   */\n  FIXED: 0,\n\n  /**\n   * The inertial frame.\n   *\n   * @type {Number}\n   * @constant\n   */\n  INERTIAL: 1,\n};\nexport default Object.freeze(ReferenceFrame);\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport RequestState from \"./RequestState.js\";\nimport RequestType from \"./RequestType.js\";\n\n/**\n * Stores information for making a request. In general this does not need to be constructed directly.\n *\n * @alias Request\n * @constructor\n\n * @param {Object} [options] An object with the following properties:\n * @param {String} [options.url] The url to request.\n * @param {Request.RequestCallback} [options.requestFunction] The function that makes the actual data request.\n * @param {Request.CancelCallback} [options.cancelFunction] The function that is called when the request is cancelled.\n * @param {Request.PriorityCallback} [options.priorityFunction] The function that is called to update the request's priority, which occurs once per frame.\n * @param {Number} [options.priority=0.0] The initial priority of the request.\n * @param {Boolean} [options.throttle=false] Whether to throttle and prioritize the request. If false, the request will be sent immediately. If true, the request will be throttled and sent based on priority.\n * @param {Boolean} [options.throttleByServer=false] Whether to throttle the request by server.\n * @param {RequestType} [options.type=RequestType.OTHER] The type of request.\n */\nfunction Request(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const throttleByServer = defaultValue(options.throttleByServer, false);\n  const throttle = defaultValue(options.throttle, false);\n\n  /**\n   * The URL to request.\n   *\n   * @type {String}\n   */\n  this.url = options.url;\n\n  /**\n   * The function that makes the actual data request.\n   *\n   * @type {Request.RequestCallback}\n   */\n  this.requestFunction = options.requestFunction;\n\n  /**\n   * The function that is called when the request is cancelled.\n   *\n   * @type {Request.CancelCallback}\n   */\n  this.cancelFunction = options.cancelFunction;\n\n  /**\n   * The function that is called to update the request's priority, which occurs once per frame.\n   *\n   * @type {Request.PriorityCallback}\n   */\n  this.priorityFunction = options.priorityFunction;\n\n  /**\n   * Priority is a unit-less value where lower values represent higher priority.\n   * For world-based objects, this is usually the distance from the camera.\n   * A request that does not have a priority function defaults to a priority of 0.\n   *\n   * If priorityFunction is defined, this value is updated every frame with the result of that call.\n   *\n   * @type {Number}\n   * @default 0.0\n   */\n  this.priority = defaultValue(options.priority, 0.0);\n\n  /**\n   * Whether to throttle and prioritize the request. If false, the request will be sent immediately. If true, the\n   * request will be throttled and sent based on priority.\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  this.throttle = throttle;\n\n  /**\n   * Whether to throttle the request by server. Browsers typically support about 6-8 parallel connections\n   * for HTTP/1 servers, and an unlimited amount of connections for HTTP/2 servers. Setting this value\n   * to <code>true</code> is preferable for requests going through HTTP/1 servers.\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default false\n   */\n  this.throttleByServer = throttleByServer;\n\n  /**\n   * Type of request.\n   *\n   * @type {RequestType}\n   * @readonly\n   *\n   * @default RequestType.OTHER\n   */\n  this.type = defaultValue(options.type, RequestType.OTHER);\n\n  /**\n   * A key used to identify the server that a request is going to. It is derived from the url's authority and scheme.\n   *\n   * @type {String}\n   *\n   * @private\n   */\n  this.serverKey = undefined;\n\n  /**\n   * The current state of the request.\n   *\n   * @type {RequestState}\n   * @readonly\n   */\n  this.state = RequestState.UNISSUED;\n\n  /**\n   * The requests's deferred promise.\n   *\n   * @type {Object}\n   *\n   * @private\n   */\n  this.deferred = undefined;\n\n  /**\n   * Whether the request was explicitly cancelled.\n   *\n   * @type {Boolean}\n   *\n   * @private\n   */\n  this.cancelled = false;\n}\n\n/**\n * Mark the request as cancelled.\n *\n * @private\n */\nRequest.prototype.cancel = function () {\n  this.cancelled = true;\n};\n\n/**\n * Duplicates a Request instance.\n *\n * @param {Request} [result] The object onto which to store the result.\n *\n * @returns {Request} The modified result parameter or a new Resource instance if one was not provided.\n */\nRequest.prototype.clone = function (result) {\n  if (!defined(result)) {\n    return new Request(this);\n  }\n\n  result.url = this.url;\n  result.requestFunction = this.requestFunction;\n  result.cancelFunction = this.cancelFunction;\n  result.priorityFunction = this.priorityFunction;\n  result.priority = this.priority;\n  result.throttle = this.throttle;\n  result.throttleByServer = this.throttleByServer;\n  result.type = this.type;\n  result.serverKey = this.serverKey;\n\n  // These get defaulted because the cloned request hasn't been issued\n  result.state = this.RequestState.UNISSUED;\n  result.deferred = undefined;\n  result.cancelled = false;\n\n  return result;\n};\n\n/**\n * The function that makes the actual data request.\n * @callback Request.RequestCallback\n * @returns {Promise<void>} A promise for the requested data.\n */\n\n/**\n * The function that is called when the request is cancelled.\n * @callback Request.CancelCallback\n */\n\n/**\n * The function that is called to update the request's priority, which occurs once per frame.\n * @callback Request.PriorityCallback\n * @returns {Number} The updated priority value.\n */\nexport default Request;\n","import defined from \"./defined.js\";\nimport parseResponseHeaders from \"./parseResponseHeaders.js\";\n\n/**\n * An event that is raised when a request encounters an error.\n *\n * @constructor\n * @alias RequestErrorEvent\n *\n * @param {Number} [statusCode] The HTTP error status code, such as 404.\n * @param {Object} [response] The response included along with the error.\n * @param {String|Object} [responseHeaders] The response headers, represented either as an object literal or as a\n *                        string in the format returned by XMLHttpRequest's getAllResponseHeaders() function.\n */\nfunction RequestErrorEvent(statusCode, response, responseHeaders) {\n  /**\n   * The HTTP error status code, such as 404.  If the error does not have a particular\n   * HTTP code, this property will be undefined.\n   *\n   * @type {Number}\n   */\n  this.statusCode = statusCode;\n\n  /**\n   * The response included along with the error.  If the error does not include a response,\n   * this property will be undefined.\n   *\n   * @type {Object}\n   */\n  this.response = response;\n\n  /**\n   * The headers included in the response, represented as an object literal of key/value pairs.\n   * If the error does not include any headers, this property will be undefined.\n   *\n   * @type {Object}\n   */\n  this.responseHeaders = responseHeaders;\n\n  if (typeof this.responseHeaders === \"string\") {\n    this.responseHeaders = parseResponseHeaders(this.responseHeaders);\n  }\n}\n\n/**\n * Creates a string representing this RequestErrorEvent.\n * @memberof RequestErrorEvent\n *\n * @returns {String} A string representing the provided RequestErrorEvent.\n */\nRequestErrorEvent.prototype.toString = function () {\n  let str = \"Request has failed.\";\n  if (defined(this.statusCode)) {\n    str += ` Status Code: ${this.statusCode}`;\n  }\n  return str;\n};\nexport default RequestErrorEvent;\n","import Uri from \"../ThirdParty/Uri.js\";\nimport Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defer from \"./defer.js\";\nimport defined from \"./defined.js\";\nimport Event from \"./Event.js\";\nimport Heap from \"./Heap.js\";\nimport isBlobUri from \"./isBlobUri.js\";\nimport isDataUri from \"./isDataUri.js\";\nimport RequestState from \"./RequestState.js\";\n\nfunction sortRequests(a, b) {\n  return a.priority - b.priority;\n}\n\nconst statistics = {\n  numberOfAttemptedRequests: 0,\n  numberOfActiveRequests: 0,\n  numberOfCancelledRequests: 0,\n  numberOfCancelledActiveRequests: 0,\n  numberOfFailedRequests: 0,\n  numberOfActiveRequestsEver: 0,\n  lastNumberOfActiveRequests: 0,\n};\n\nlet priorityHeapLength = 20;\nconst requestHeap = new Heap({\n  comparator: sortRequests,\n});\nrequestHeap.maximumLength = priorityHeapLength;\nrequestHeap.reserve(priorityHeapLength);\n\nconst activeRequests = [];\nlet numberOfActiveRequestsByServer = {};\n\nconst pageUri =\n  typeof document !== \"undefined\" ? new Uri(document.location.href) : new Uri();\n\nconst requestCompletedEvent = new Event();\n\n/**\n * The request scheduler is used to track and constrain the number of active requests in order to prioritize incoming requests. The ability\n * to retain control over the number of requests in CesiumJS is important because due to events such as changes in the camera position,\n * a lot of new requests may be generated and a lot of in-flight requests may become redundant. The request scheduler manually constrains the\n * number of requests so that newer requests wait in a shorter queue and don't have to compete for bandwidth with requests that have expired.\n *\n * @namespace RequestScheduler\n *\n */\nfunction RequestScheduler() {}\n\n/**\n * The maximum number of simultaneous active requests. Un-throttled requests do not observe this limit.\n * @type {Number}\n * @default 50\n */\nRequestScheduler.maximumRequests = 50;\n\n/**\n * The maximum number of simultaneous active requests per server. Un-throttled requests or servers specifically\n * listed in {@link requestsByServer} do not observe this limit.\n * @type {Number}\n * @default 6\n */\nRequestScheduler.maximumRequestsPerServer = 6;\n\n/**\n * A per server key list of overrides to use for throttling instead of <code>maximumRequestsPerServer</code>\n * @type {Object}\n *\n * @example\n * RequestScheduler.requestsByServer = {\n *   'api.cesium.com:443': 18,\n *   'assets.cesium.com:443': 18\n * };\n */\nRequestScheduler.requestsByServer = {\n  \"api.cesium.com:443\": 18,\n  \"assets.cesium.com:443\": 18,\n};\n\n/**\n * Specifies if the request scheduler should throttle incoming requests, or let the browser queue requests under its control.\n * @type {Boolean}\n * @default true\n */\nRequestScheduler.throttleRequests = true;\n\n/**\n * When true, log statistics to the console every frame\n * @type {Boolean}\n * @default false\n * @private\n */\nRequestScheduler.debugShowStatistics = false;\n\n/**\n * An event that's raised when a request is completed.  Event handlers are passed\n * the error object if the request fails.\n *\n * @type {Event}\n * @default Event()\n * @private\n */\nRequestScheduler.requestCompletedEvent = requestCompletedEvent;\n\nObject.defineProperties(RequestScheduler, {\n  /**\n   * Returns the statistics used by the request scheduler.\n   *\n   * @memberof RequestScheduler\n   *\n   * @type Object\n   * @readonly\n   * @private\n   */\n  statistics: {\n    get: function () {\n      return statistics;\n    },\n  },\n\n  /**\n   * The maximum size of the priority heap. This limits the number of requests that are sorted by priority. Only applies to requests that are not yet active.\n   *\n   * @memberof RequestScheduler\n   *\n   * @type {Number}\n   * @default 20\n   * @private\n   */\n  priorityHeapLength: {\n    get: function () {\n      return priorityHeapLength;\n    },\n    set: function (value) {\n      // If the new length shrinks the heap, need to cancel some of the requests.\n      // Since this value is not intended to be tweaked regularly it is fine to just cancel the high priority requests.\n      if (value < priorityHeapLength) {\n        while (requestHeap.length > value) {\n          const request = requestHeap.pop();\n          cancelRequest(request);\n        }\n      }\n      priorityHeapLength = value;\n      requestHeap.maximumLength = value;\n      requestHeap.reserve(value);\n    },\n  },\n});\n\nfunction updatePriority(request) {\n  if (defined(request.priorityFunction)) {\n    request.priority = request.priorityFunction();\n  }\n}\n\n/**\n * Check if there are open slots for a particular server key. If desiredRequests is greater than 1, this checks if the queue has room for scheduling multiple requests.\n * @param {String} serverKey The server key returned by {@link RequestScheduler.getServerKey}.\n * @param {Number} [desiredRequests=1] How many requests the caller plans to request\n * @return {Boolean} True if there are enough open slots for <code>desiredRequests</code> more requests.\n * @private\n */\nRequestScheduler.serverHasOpenSlots = function (serverKey, desiredRequests) {\n  desiredRequests = defaultValue(desiredRequests, 1);\n\n  const maxRequests = defaultValue(\n    RequestScheduler.requestsByServer[serverKey],\n    RequestScheduler.maximumRequestsPerServer\n  );\n  const hasOpenSlotsServer =\n    numberOfActiveRequestsByServer[serverKey] + desiredRequests <= maxRequests;\n\n  return hasOpenSlotsServer;\n};\n\n/**\n * Check if the priority heap has open slots, regardless of which server they\n * are from. This is used in {@link Multiple3DTileContent} for determining when\n * all requests can be scheduled\n * @param {Number} desiredRequests The number of requests the caller intends to make\n * @return {Boolean} <code>true</code> if the heap has enough available slots to meet the desiredRequests. <code>false</code> otherwise.\n *\n * @private\n */\nRequestScheduler.heapHasOpenSlots = function (desiredRequests) {\n  const hasOpenSlotsHeap =\n    requestHeap.length + desiredRequests <= priorityHeapLength;\n  return hasOpenSlotsHeap;\n};\n\nfunction issueRequest(request) {\n  if (request.state === RequestState.UNISSUED) {\n    request.state = RequestState.ISSUED;\n    request.deferred = defer();\n  }\n  return request.deferred.promise;\n}\n\nfunction getRequestReceivedFunction(request) {\n  return function (results) {\n    if (request.state === RequestState.CANCELLED) {\n      // If the data request comes back but the request is cancelled, ignore it.\n      return;\n    }\n    // explicitly set to undefined to ensure GC of request response data. See #8843\n    const deferred = request.deferred;\n\n    --statistics.numberOfActiveRequests;\n    --numberOfActiveRequestsByServer[request.serverKey];\n    requestCompletedEvent.raiseEvent();\n    request.state = RequestState.RECEIVED;\n    request.deferred = undefined;\n\n    deferred.resolve(results);\n  };\n}\n\nfunction getRequestFailedFunction(request) {\n  return function (error) {\n    if (request.state === RequestState.CANCELLED) {\n      // If the data request comes back but the request is cancelled, ignore it.\n      return;\n    }\n    ++statistics.numberOfFailedRequests;\n    --statistics.numberOfActiveRequests;\n    --numberOfActiveRequestsByServer[request.serverKey];\n    requestCompletedEvent.raiseEvent(error);\n    request.state = RequestState.FAILED;\n    request.deferred.reject(error);\n  };\n}\n\nfunction startRequest(request) {\n  const promise = issueRequest(request);\n  request.state = RequestState.ACTIVE;\n  activeRequests.push(request);\n  ++statistics.numberOfActiveRequests;\n  ++statistics.numberOfActiveRequestsEver;\n  ++numberOfActiveRequestsByServer[request.serverKey];\n  request\n    .requestFunction()\n    .then(getRequestReceivedFunction(request))\n    .catch(getRequestFailedFunction(request));\n  return promise;\n}\n\nfunction cancelRequest(request) {\n  const active = request.state === RequestState.ACTIVE;\n  request.state = RequestState.CANCELLED;\n  ++statistics.numberOfCancelledRequests;\n  // check that deferred has not been cleared since cancelRequest can be called\n  // on a finished request, e.g. by clearForSpecs during tests\n  if (defined(request.deferred)) {\n    const deferred = request.deferred;\n    request.deferred = undefined;\n    deferred.reject();\n  }\n\n  if (active) {\n    --statistics.numberOfActiveRequests;\n    --numberOfActiveRequestsByServer[request.serverKey];\n    ++statistics.numberOfCancelledActiveRequests;\n  }\n\n  if (defined(request.cancelFunction)) {\n    request.cancelFunction();\n  }\n}\n\n/**\n * Sort requests by priority and start requests.\n * @private\n */\nRequestScheduler.update = function () {\n  let i;\n  let request;\n\n  // Loop over all active requests. Cancelled, failed, or received requests are removed from the array to make room for new requests.\n  let removeCount = 0;\n  const activeLength = activeRequests.length;\n  for (i = 0; i < activeLength; ++i) {\n    request = activeRequests[i];\n    if (request.cancelled) {\n      // Request was explicitly cancelled\n      cancelRequest(request);\n    }\n    if (request.state !== RequestState.ACTIVE) {\n      // Request is no longer active, remove from array\n      ++removeCount;\n      continue;\n    }\n    if (removeCount > 0) {\n      // Shift back to fill in vacated slots from completed requests\n      activeRequests[i - removeCount] = request;\n    }\n  }\n  activeRequests.length -= removeCount;\n\n  // Update priority of issued requests and resort the heap\n  const issuedRequests = requestHeap.internalArray;\n  const issuedLength = requestHeap.length;\n  for (i = 0; i < issuedLength; ++i) {\n    updatePriority(issuedRequests[i]);\n  }\n  requestHeap.resort();\n\n  // Get the number of open slots and fill with the highest priority requests.\n  // Un-throttled requests are automatically added to activeRequests, so activeRequests.length may exceed maximumRequests\n  const openSlots = Math.max(\n    RequestScheduler.maximumRequests - activeRequests.length,\n    0\n  );\n  let filledSlots = 0;\n  while (filledSlots < openSlots && requestHeap.length > 0) {\n    // Loop until all open slots are filled or the heap becomes empty\n    request = requestHeap.pop();\n    if (request.cancelled) {\n      // Request was explicitly cancelled\n      cancelRequest(request);\n      continue;\n    }\n\n    if (\n      request.throttleByServer &&\n      !RequestScheduler.serverHasOpenSlots(request.serverKey)\n    ) {\n      // Open slots are available, but the request is throttled by its server. Cancel and try again later.\n      cancelRequest(request);\n      continue;\n    }\n\n    startRequest(request);\n    ++filledSlots;\n  }\n\n  updateStatistics();\n};\n\n/**\n * Get the server key from a given url.\n *\n * @param {String} url The url.\n * @returns {String} The server key.\n * @private\n */\nRequestScheduler.getServerKey = function (url) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"url\", url);\n  //>>includeEnd('debug');\n\n  let uri = new Uri(url);\n  if (uri.scheme() === \"\") {\n    uri = new Uri(url).absoluteTo(pageUri);\n    uri.normalize();\n  }\n\n  let serverKey = uri.authority();\n  if (!/:/.test(serverKey)) {\n    // If the authority does not contain a port number, add port 443 for https or port 80 for http\n    serverKey = `${serverKey}:${uri.scheme() === \"https\" ? \"443\" : \"80\"}`;\n  }\n\n  const length = numberOfActiveRequestsByServer[serverKey];\n  if (!defined(length)) {\n    numberOfActiveRequestsByServer[serverKey] = 0;\n  }\n\n  return serverKey;\n};\n\n/**\n * Issue a request. If request.throttle is false, the request is sent immediately. Otherwise the request will be\n * queued and sorted by priority before being sent.\n *\n * @param {Request} request The request object.\n *\n * @returns {Promise|undefined} A Promise for the requested data, or undefined if this request does not have high enough priority to be issued.\n *\n * @private\n */\nRequestScheduler.request = function (request) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"request\", request);\n  Check.typeOf.string(\"request.url\", request.url);\n  Check.typeOf.func(\"request.requestFunction\", request.requestFunction);\n  //>>includeEnd('debug');\n\n  if (isDataUri(request.url) || isBlobUri(request.url)) {\n    requestCompletedEvent.raiseEvent();\n    request.state = RequestState.RECEIVED;\n    return request.requestFunction();\n  }\n\n  ++statistics.numberOfAttemptedRequests;\n\n  if (!defined(request.serverKey)) {\n    request.serverKey = RequestScheduler.getServerKey(request.url);\n  }\n\n  if (\n    RequestScheduler.throttleRequests &&\n    request.throttleByServer &&\n    !RequestScheduler.serverHasOpenSlots(request.serverKey)\n  ) {\n    // Server is saturated. Try again later.\n    return undefined;\n  }\n\n  if (!RequestScheduler.throttleRequests || !request.throttle) {\n    return startRequest(request);\n  }\n\n  if (activeRequests.length >= RequestScheduler.maximumRequests) {\n    // Active requests are saturated. Try again later.\n    return undefined;\n  }\n\n  // Insert into the priority heap and see if a request was bumped off. If this request is the lowest\n  // priority it will be returned.\n  updatePriority(request);\n  const removedRequest = requestHeap.insert(request);\n\n  if (defined(removedRequest)) {\n    if (removedRequest === request) {\n      // Request does not have high enough priority to be issued\n      return undefined;\n    }\n    // A previously issued request has been bumped off the priority heap, so cancel it\n    cancelRequest(removedRequest);\n  }\n\n  return issueRequest(request);\n};\n\nfunction updateStatistics() {\n  if (!RequestScheduler.debugShowStatistics) {\n    return;\n  }\n\n  if (\n    statistics.numberOfActiveRequests === 0 &&\n    statistics.lastNumberOfActiveRequests > 0\n  ) {\n    if (statistics.numberOfAttemptedRequests > 0) {\n      console.log(\n        `Number of attempted requests: ${statistics.numberOfAttemptedRequests}`\n      );\n      statistics.numberOfAttemptedRequests = 0;\n    }\n\n    if (statistics.numberOfCancelledRequests > 0) {\n      console.log(\n        `Number of cancelled requests: ${statistics.numberOfCancelledRequests}`\n      );\n      statistics.numberOfCancelledRequests = 0;\n    }\n\n    if (statistics.numberOfCancelledActiveRequests > 0) {\n      console.log(\n        `Number of cancelled active requests: ${statistics.numberOfCancelledActiveRequests}`\n      );\n      statistics.numberOfCancelledActiveRequests = 0;\n    }\n\n    if (statistics.numberOfFailedRequests > 0) {\n      console.log(\n        `Number of failed requests: ${statistics.numberOfFailedRequests}`\n      );\n      statistics.numberOfFailedRequests = 0;\n    }\n  }\n\n  statistics.lastNumberOfActiveRequests = statistics.numberOfActiveRequests;\n}\n\n/**\n * For testing only. Clears any requests that may not have completed from previous tests.\n *\n * @private\n */\nRequestScheduler.clearForSpecs = function () {\n  while (requestHeap.length > 0) {\n    const request = requestHeap.pop();\n    cancelRequest(request);\n  }\n  const length = activeRequests.length;\n  for (let i = 0; i < length; ++i) {\n    cancelRequest(activeRequests[i]);\n  }\n  activeRequests.length = 0;\n  numberOfActiveRequestsByServer = {};\n\n  // Clear stats\n  statistics.numberOfAttemptedRequests = 0;\n  statistics.numberOfActiveRequests = 0;\n  statistics.numberOfCancelledRequests = 0;\n  statistics.numberOfCancelledActiveRequests = 0;\n  statistics.numberOfFailedRequests = 0;\n  statistics.numberOfActiveRequestsEver = 0;\n  statistics.lastNumberOfActiveRequests = 0;\n};\n\n/**\n * For testing only.\n *\n * @private\n */\nRequestScheduler.numberOfActiveRequestsByServer = function (serverKey) {\n  return numberOfActiveRequestsByServer[serverKey];\n};\n\n/**\n * For testing only.\n *\n * @private\n */\nRequestScheduler.requestHeap = requestHeap;\nexport default RequestScheduler;\n","/**\n * State of the request.\n *\n * @enum {Number}\n */\nconst RequestState = {\n  /**\n   * Initial unissued state.\n   *\n   * @type Number\n   * @constant\n   */\n  UNISSUED: 0,\n\n  /**\n   * Issued but not yet active. Will become active when open slots are available.\n   *\n   * @type Number\n   * @constant\n   */\n  ISSUED: 1,\n\n  /**\n   * Actual http request has been sent.\n   *\n   * @type Number\n   * @constant\n   */\n  ACTIVE: 2,\n\n  /**\n   * Request completed successfully.\n   *\n   * @type Number\n   * @constant\n   */\n  RECEIVED: 3,\n\n  /**\n   * Request was cancelled, either explicitly or automatically because of low priority.\n   *\n   * @type Number\n   * @constant\n   */\n  CANCELLED: 4,\n\n  /**\n   * Request failed.\n   *\n   * @type Number\n   * @constant\n   */\n  FAILED: 5,\n};\nexport default Object.freeze(RequestState);\n","/**\n * An enum identifying the type of request. Used for finer grained logging and priority sorting.\n *\n * @enum {Number}\n */\nconst RequestType = {\n  /**\n   * Terrain request.\n   *\n   * @type Number\n   * @constant\n   */\n  TERRAIN: 0,\n\n  /**\n   * Imagery request.\n   *\n   * @type Number\n   * @constant\n   */\n  IMAGERY: 1,\n\n  /**\n   * 3D Tiles request.\n   *\n   * @type Number\n   * @constant\n   */\n  TILES3D: 2,\n\n  /**\n   * Other request.\n   *\n   * @type Number\n   * @constant\n   */\n  OTHER: 3,\n};\nexport default Object.freeze(RequestType);\n","import Uri from \"../ThirdParty/Uri.js\";\nimport appendForwardSlash from \"./appendForwardSlash.js\";\nimport Check from \"./Check.js\";\nimport clone from \"./clone.js\";\nimport combine from \"./combine.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defer from \"./defer.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport getAbsoluteUri from \"./getAbsoluteUri.js\";\nimport getBaseUri from \"./getBaseUri.js\";\nimport getExtensionFromUri from \"./getExtensionFromUri.js\";\nimport getImagePixels from \"./getImagePixels.js\";\nimport isBlobUri from \"./isBlobUri.js\";\nimport isCrossOriginUrl from \"./isCrossOriginUrl.js\";\nimport isDataUri from \"./isDataUri.js\";\nimport loadAndExecuteScript from \"./loadAndExecuteScript.js\";\nimport CesiumMath from \"./Math.js\";\nimport objectToQuery from \"./objectToQuery.js\";\nimport queryToObject from \"./queryToObject.js\";\nimport Request from \"./Request.js\";\nimport RequestErrorEvent from \"./RequestErrorEvent.js\";\nimport RequestScheduler from \"./RequestScheduler.js\";\nimport RequestState from \"./RequestState.js\";\nimport RuntimeError from \"./RuntimeError.js\";\nimport TrustedServers from \"./TrustedServers.js\";\n\nconst xhrBlobSupported = (function () {\n  try {\n    const xhr = new XMLHttpRequest();\n    xhr.open(\"GET\", \"#\", true);\n    xhr.responseType = \"blob\";\n    return xhr.responseType === \"blob\";\n  } catch (e) {\n    return false;\n  }\n})();\n\n/**\n * Parses a query string and returns the object equivalent.\n *\n * @param {Uri} uri The Uri with a query object.\n * @param {Resource} resource The Resource that will be assigned queryParameters.\n * @param {Boolean} merge If true, we'll merge with the resource's existing queryParameters. Otherwise they will be replaced.\n * @param {Boolean} preserveQueryParameters If true duplicate parameters will be concatenated into an array. If false, keys in uri will take precedence.\n *\n * @private\n */\nfunction parseQuery(uri, resource, merge, preserveQueryParameters) {\n  const queryString = uri.query();\n  if (queryString.length === 0) {\n    return {};\n  }\n\n  let query;\n  // Special case we run into where the querystring is just a string, not key/value pairs\n  if (queryString.indexOf(\"=\") === -1) {\n    const result = {};\n    result[queryString] = undefined;\n    query = result;\n  } else {\n    query = queryToObject(queryString);\n  }\n\n  if (merge) {\n    resource._queryParameters = combineQueryParameters(\n      query,\n      resource._queryParameters,\n      preserveQueryParameters\n    );\n  } else {\n    resource._queryParameters = query;\n  }\n  uri.search(\"\");\n}\n\n/**\n * Converts a query object into a string.\n *\n * @param {Uri} uri The Uri object that will have the query object set.\n * @param {Resource} resource The resource that has queryParameters\n *\n * @private\n */\nfunction stringifyQuery(uri, resource) {\n  const queryObject = resource._queryParameters;\n\n  const keys = Object.keys(queryObject);\n\n  // We have 1 key with an undefined value, so this is just a string, not key/value pairs\n  if (keys.length === 1 && !defined(queryObject[keys[0]])) {\n    uri.search(keys[0]);\n  } else {\n    uri.search(objectToQuery(queryObject));\n  }\n}\n\n/**\n * Clones a value if it is defined, otherwise returns the default value\n *\n * @param {*} [val] The value to clone.\n * @param {*} [defaultVal] The default value.\n *\n * @returns {*} A clone of val or the defaultVal.\n *\n * @private\n */\nfunction defaultClone(val, defaultVal) {\n  if (!defined(val)) {\n    return defaultVal;\n  }\n\n  return defined(val.clone) ? val.clone() : clone(val);\n}\n\n/**\n * Checks to make sure the Resource isn't already being requested.\n *\n * @param {Request} request The request to check.\n *\n * @private\n */\nfunction checkAndResetRequest(request) {\n  if (\n    request.state === RequestState.ISSUED ||\n    request.state === RequestState.ACTIVE\n  ) {\n    throw new RuntimeError(\"The Resource is already being fetched.\");\n  }\n\n  request.state = RequestState.UNISSUED;\n  request.deferred = undefined;\n}\n\n/**\n * This combines a map of query parameters.\n *\n * @param {Object} q1 The first map of query parameters. Values in this map will take precedence if preserveQueryParameters is false.\n * @param {Object} q2 The second map of query parameters.\n * @param {Boolean} preserveQueryParameters If true duplicate parameters will be concatenated into an array. If false, keys in q1 will take precedence.\n *\n * @returns {Object} The combined map of query parameters.\n *\n * @example\n * const q1 = {\n *   a: 1,\n *   b: 2\n * };\n * const q2 = {\n *   a: 3,\n *   c: 4\n * };\n * const q3 = {\n *   b: [5, 6],\n *   d: 7\n * }\n *\n * // Returns\n * // {\n * //   a: [1, 3],\n * //   b: 2,\n * //   c: 4\n * // };\n * combineQueryParameters(q1, q2, true);\n *\n * // Returns\n * // {\n * //   a: 1,\n * //   b: 2,\n * //   c: 4\n * // };\n * combineQueryParameters(q1, q2, false);\n *\n * // Returns\n * // {\n * //   a: 1,\n * //   b: [2, 5, 6],\n * //   d: 7\n * // };\n * combineQueryParameters(q1, q3, true);\n *\n * // Returns\n * // {\n * //   a: 1,\n * //   b: 2,\n * //   d: 7\n * // };\n * combineQueryParameters(q1, q3, false);\n *\n * @private\n */\nfunction combineQueryParameters(q1, q2, preserveQueryParameters) {\n  if (!preserveQueryParameters) {\n    return combine(q1, q2);\n  }\n\n  const result = clone(q1, true);\n  for (const param in q2) {\n    if (q2.hasOwnProperty(param)) {\n      let value = result[param];\n      const q2Value = q2[param];\n      if (defined(value)) {\n        if (!Array.isArray(value)) {\n          value = result[param] = [value];\n        }\n\n        result[param] = value.concat(q2Value);\n      } else {\n        result[param] = Array.isArray(q2Value) ? q2Value.slice() : q2Value;\n      }\n    }\n  }\n\n  return result;\n}\n\n/**\n * @typedef {Object} Resource.ConstructorOptions\n *\n * Initialization options for the Resource constructor\n *\n * @property {String} url The url of the resource.\n * @property {Object} [queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @property {Object} [templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @property {Object} [headers={}] Additional HTTP headers that will be sent.\n * @property {Proxy} [proxy] A proxy to be used when loading the resource.\n * @property {Resource.RetryCallback} [retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @property {Number} [retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @property {Request} [request] A Request object that will be used. Intended for internal use only.\n */\n\n/**\n * A resource that includes the location and any other parameters we need to retrieve it or create derived resources. It also provides the ability to retry requests.\n *\n * @alias Resource\n * @constructor\n *\n * @param {String|Resource.ConstructorOptions} options A url or an object describing initialization options\n *\n * @example\n * function refreshTokenRetryCallback(resource, error) {\n *   if (error.statusCode === 403) {\n *     // 403 status code means a new token should be generated\n *     return getNewAccessToken()\n *       .then(function(token) {\n *         resource.queryParameters.access_token = token;\n *         return true;\n *       })\n *       .catch(function() {\n *         return false;\n *       });\n *   }\n *\n *   return false;\n * }\n *\n * const resource = new Resource({\n *    url: 'http://server.com/path/to/resource.json',\n *    proxy: new DefaultProxy('/proxy/'),\n *    headers: {\n *      'X-My-Header': 'valueOfHeader'\n *    },\n *    queryParameters: {\n *      'access_token': '123-435-456-000'\n *    },\n *    retryCallback: refreshTokenRetryCallback,\n *    retryAttempts: 1\n * });\n */\nfunction Resource(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  if (typeof options === \"string\") {\n    options = {\n      url: options,\n    };\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"options.url\", options.url);\n  //>>includeEnd('debug');\n\n  this._url = undefined;\n  this._templateValues = defaultClone(options.templateValues, {});\n  this._queryParameters = defaultClone(options.queryParameters, {});\n\n  /**\n   * Additional HTTP headers that will be sent with the request.\n   *\n   * @type {Object}\n   */\n  this.headers = defaultClone(options.headers, {});\n\n  /**\n   * A Request object that will be used. Intended for internal use only.\n   *\n   * @type {Request}\n   */\n  this.request = defaultValue(options.request, new Request());\n\n  /**\n   * A proxy to be used when loading the resource.\n   *\n   * @type {Proxy}\n   */\n  this.proxy = options.proxy;\n\n  /**\n   * Function to call when a request for this resource fails. If it returns true or a Promise that resolves to true, the request will be retried.\n   *\n   * @type {Function}\n   */\n  this.retryCallback = options.retryCallback;\n\n  /**\n   * The number of times the retryCallback should be called before giving up.\n   *\n   * @type {Number}\n   */\n  this.retryAttempts = defaultValue(options.retryAttempts, 0);\n  this._retryCount = 0;\n\n  const uri = new Uri(options.url);\n  parseQuery(uri, this, true, true);\n\n  // Remove the fragment as it's not sent with a request\n  uri.fragment(\"\");\n\n  this._url = uri.toString();\n}\n\n/**\n * A helper function to create a resource depending on whether we have a String or a Resource\n *\n * @param {Resource|String} resource A Resource or a String to use when creating a new Resource.\n *\n * @returns {Resource} If resource is a String, a Resource constructed with the url and options. Otherwise the resource parameter is returned.\n *\n * @private\n */\nResource.createIfNeeded = function (resource) {\n  if (resource instanceof Resource) {\n    // Keep existing request object. This function is used internally to duplicate a Resource, so that it can't\n    //  be modified outside of a class that holds it (eg. an imagery or terrain provider). Since the Request objects\n    //  are managed outside of the providers, by the tile loading code, we want to keep the request property the same so if it is changed\n    //  in the underlying tiling code the requests for this resource will use it.\n    return resource.getDerivedResource({\n      request: resource.request,\n    });\n  }\n\n  if (typeof resource !== \"string\") {\n    return resource;\n  }\n\n  return new Resource({\n    url: resource,\n  });\n};\n\nlet supportsImageBitmapOptionsPromise;\n/**\n * A helper function to check whether createImageBitmap supports passing ImageBitmapOptions.\n *\n * @returns {Promise<Boolean>} A promise that resolves to true if this browser supports creating an ImageBitmap with options.\n *\n * @private\n */\nResource.supportsImageBitmapOptions = function () {\n  // Until the HTML folks figure out what to do about this, we need to actually try loading an image to\n  // know if this browser supports passing options to the createImageBitmap function.\n  // https://github.com/whatwg/html/pull/4248\n  //\n  // We also need to check whether the colorSpaceConversion option is supported.\n  // We do this by loading a PNG with an embedded color profile, first with\n  // colorSpaceConversion: \"none\" and then with colorSpaceConversion: \"default\".\n  // If the pixel color is different then we know the option is working.\n  // As of Webkit 17612.3.6.1.6 the createImageBitmap promise resolves but the\n  // option is not actually supported.\n  if (defined(supportsImageBitmapOptionsPromise)) {\n    return supportsImageBitmapOptionsPromise;\n  }\n\n  if (typeof createImageBitmap !== \"function\") {\n    supportsImageBitmapOptionsPromise = Promise.resolve(false);\n    return supportsImageBitmapOptionsPromise;\n  }\n\n  const imageDataUri =\n    \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAABGdBTUEAAE4g3rEiDgAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADElEQVQI12Ng6GAAAAEUAIngE3ZiAAAAAElFTkSuQmCC\";\n\n  supportsImageBitmapOptionsPromise = Resource.fetchBlob({\n    url: imageDataUri,\n  })\n    .then(function (blob) {\n      const imageBitmapOptions = {\n        imageOrientation: \"flipY\", // default is \"none\"\n        premultiplyAlpha: \"none\", // default is \"default\"\n        colorSpaceConversion: \"none\", // default is \"default\"\n      };\n      return Promise.all([\n        createImageBitmap(blob, imageBitmapOptions),\n        createImageBitmap(blob),\n      ]);\n    })\n    .then(function (imageBitmaps) {\n      // Check whether the colorSpaceConversion option had any effect on the green channel\n      const colorWithOptions = getImagePixels(imageBitmaps[0]);\n      const colorWithDefaults = getImagePixels(imageBitmaps[1]);\n      return colorWithOptions[1] !== colorWithDefaults[1];\n    })\n    .catch(function () {\n      return false;\n    });\n\n  return supportsImageBitmapOptionsPromise;\n};\n\nObject.defineProperties(Resource, {\n  /**\n   * Returns true if blobs are supported.\n   *\n   * @memberof Resource\n   * @type {Boolean}\n   *\n   * @readonly\n   */\n  isBlobSupported: {\n    get: function () {\n      return xhrBlobSupported;\n    },\n  },\n});\n\nObject.defineProperties(Resource.prototype, {\n  /**\n   * Query parameters appended to the url.\n   *\n   * @memberof Resource.prototype\n   * @type {Object}\n   *\n   * @readonly\n   */\n  queryParameters: {\n    get: function () {\n      return this._queryParameters;\n    },\n  },\n\n  /**\n   * The key/value pairs used to replace template parameters in the url.\n   *\n   * @memberof Resource.prototype\n   * @type {Object}\n   *\n   * @readonly\n   */\n  templateValues: {\n    get: function () {\n      return this._templateValues;\n    },\n  },\n\n  /**\n   * The url to the resource with template values replaced, query string appended and encoded by proxy if one was set.\n   *\n   * @memberof Resource.prototype\n   * @type {String}\n   */\n  url: {\n    get: function () {\n      return this.getUrlComponent(true, true);\n    },\n    set: function (value) {\n      const uri = new Uri(value);\n\n      parseQuery(uri, this, false);\n\n      // Remove the fragment as it's not sent with a request\n      uri.fragment(\"\");\n\n      this._url = uri.toString();\n    },\n  },\n\n  /**\n   * The file extension of the resource.\n   *\n   * @memberof Resource.prototype\n   * @type {String}\n   *\n   * @readonly\n   */\n  extension: {\n    get: function () {\n      return getExtensionFromUri(this._url);\n    },\n  },\n\n  /**\n   * True if the Resource refers to a data URI.\n   *\n   * @memberof Resource.prototype\n   * @type {Boolean}\n   */\n  isDataUri: {\n    get: function () {\n      return isDataUri(this._url);\n    },\n  },\n\n  /**\n   * True if the Resource refers to a blob URI.\n   *\n   * @memberof Resource.prototype\n   * @type {Boolean}\n   */\n  isBlobUri: {\n    get: function () {\n      return isBlobUri(this._url);\n    },\n  },\n\n  /**\n   * True if the Resource refers to a cross origin URL.\n   *\n   * @memberof Resource.prototype\n   * @type {Boolean}\n   */\n  isCrossOriginUrl: {\n    get: function () {\n      return isCrossOriginUrl(this._url);\n    },\n  },\n\n  /**\n   * True if the Resource has request headers. This is equivalent to checking if the headers property has any keys.\n   *\n   * @memberof Resource.prototype\n   * @type {Boolean}\n   */\n  hasHeaders: {\n    get: function () {\n      return Object.keys(this.headers).length > 0;\n    },\n  },\n});\n\n/**\n * Override Object#toString so that implicit string conversion gives the\n * complete URL represented by this Resource.\n *\n * @returns {String} The URL represented by this Resource\n */\nResource.prototype.toString = function () {\n  return this.getUrlComponent(true, true);\n};\n\n/**\n * Returns the url, optional with the query string and processed by a proxy.\n *\n * @param {Boolean} [query=false] If true, the query string is included.\n * @param {Boolean} [proxy=false] If true, the url is processed by the proxy object, if defined.\n *\n * @returns {String} The url with all the requested components.\n */\nResource.prototype.getUrlComponent = function (query, proxy) {\n  if (this.isDataUri) {\n    return this._url;\n  }\n\n  const uri = new Uri(this._url);\n\n  if (query) {\n    stringifyQuery(uri, this);\n  }\n\n  // objectToQuery escapes the placeholders.  Undo that.\n  let url = uri.toString().replace(/%7B/g, \"{\").replace(/%7D/g, \"}\");\n\n  const templateValues = this._templateValues;\n  url = url.replace(/{(.*?)}/g, function (match, key) {\n    const replacement = templateValues[key];\n    if (defined(replacement)) {\n      // use the replacement value from templateValues if there is one...\n      return encodeURIComponent(replacement);\n    }\n    // otherwise leave it unchanged\n    return match;\n  });\n\n  if (proxy && defined(this.proxy)) {\n    url = this.proxy.getURL(url);\n  }\n  return url;\n};\n\n/**\n * Combines the specified object and the existing query parameters. This allows you to add many parameters at once,\n *  as opposed to adding them one at a time to the queryParameters property. If a value is already set, it will be replaced with the new value.\n *\n * @param {Object} params The query parameters\n * @param {Boolean} [useAsDefault=false] If true the params will be used as the default values, so they will only be set if they are undefined.\n */\nResource.prototype.setQueryParameters = function (params, useAsDefault) {\n  if (useAsDefault) {\n    this._queryParameters = combineQueryParameters(\n      this._queryParameters,\n      params,\n      false\n    );\n  } else {\n    this._queryParameters = combineQueryParameters(\n      params,\n      this._queryParameters,\n      false\n    );\n  }\n};\n\n/**\n * Combines the specified object and the existing query parameters. This allows you to add many parameters at once,\n *  as opposed to adding them one at a time to the queryParameters property.\n *\n * @param {Object} params The query parameters\n */\nResource.prototype.appendQueryParameters = function (params) {\n  this._queryParameters = combineQueryParameters(\n    params,\n    this._queryParameters,\n    true\n  );\n};\n\n/**\n * Combines the specified object and the existing template values. This allows you to add many values at once,\n *  as opposed to adding them one at a time to the templateValues property. If a value is already set, it will become an array and the new value will be appended.\n *\n * @param {Object} template The template values\n * @param {Boolean} [useAsDefault=false] If true the values will be used as the default values, so they will only be set if they are undefined.\n */\nResource.prototype.setTemplateValues = function (template, useAsDefault) {\n  if (useAsDefault) {\n    this._templateValues = combine(this._templateValues, template);\n  } else {\n    this._templateValues = combine(template, this._templateValues);\n  }\n};\n\n/**\n * Returns a resource relative to the current instance. All properties remain the same as the current instance unless overridden in options.\n *\n * @param {Object} options An object with the following properties\n * @param {String} [options.url]  The url that will be resolved relative to the url of the current instance.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be combined with those of the current instance.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}). These will be combined with those of the current instance.\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The function to call when loading the resource fails.\n * @param {Number} [options.retryAttempts] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {Boolean} [options.preserveQueryParameters=false] If true, this will keep all query parameters from the current resource and derived resource. If false, derived parameters will replace those of the current resource.\n *\n * @returns {Resource} The resource derived from the current one.\n */\nResource.prototype.getDerivedResource = function (options) {\n  const resource = this.clone();\n  resource._retryCount = 0;\n\n  if (defined(options.url)) {\n    const uri = new Uri(options.url);\n\n    const preserveQueryParameters = defaultValue(\n      options.preserveQueryParameters,\n      false\n    );\n    parseQuery(uri, resource, true, preserveQueryParameters);\n\n    // Remove the fragment as it's not sent with a request\n    uri.fragment(\"\");\n\n    if (uri.scheme() !== \"\") {\n      resource._url = uri.toString();\n    } else {\n      resource._url = uri\n        .absoluteTo(new Uri(getAbsoluteUri(this._url)))\n        .toString();\n    }\n  }\n\n  if (defined(options.queryParameters)) {\n    resource._queryParameters = combine(\n      options.queryParameters,\n      resource._queryParameters\n    );\n  }\n  if (defined(options.templateValues)) {\n    resource._templateValues = combine(\n      options.templateValues,\n      resource.templateValues\n    );\n  }\n  if (defined(options.headers)) {\n    resource.headers = combine(options.headers, resource.headers);\n  }\n  if (defined(options.proxy)) {\n    resource.proxy = options.proxy;\n  }\n  if (defined(options.request)) {\n    resource.request = options.request;\n  }\n  if (defined(options.retryCallback)) {\n    resource.retryCallback = options.retryCallback;\n  }\n  if (defined(options.retryAttempts)) {\n    resource.retryAttempts = options.retryAttempts;\n  }\n\n  return resource;\n};\n\n/**\n * Called when a resource fails to load. This will call the retryCallback function if defined until retryAttempts is reached.\n *\n * @param {Error} [error] The error that was encountered.\n *\n * @returns {Promise<Boolean>} A promise to a boolean, that if true will cause the resource request to be retried.\n *\n * @private\n */\nResource.prototype.retryOnError = function (error) {\n  const retryCallback = this.retryCallback;\n  if (\n    typeof retryCallback !== \"function\" ||\n    this._retryCount >= this.retryAttempts\n  ) {\n    return Promise.resolve(false);\n  }\n\n  const that = this;\n  return Promise.resolve(retryCallback(this, error)).then(function (result) {\n    ++that._retryCount;\n\n    return result;\n  });\n};\n\n/**\n * Duplicates a Resource instance.\n *\n * @param {Resource} [result] The object onto which to store the result.\n *\n * @returns {Resource} The modified result parameter or a new Resource instance if one was not provided.\n */\nResource.prototype.clone = function (result) {\n  if (!defined(result)) {\n    result = new Resource({\n      url: this._url,\n    });\n  }\n\n  result._url = this._url;\n  result._queryParameters = clone(this._queryParameters);\n  result._templateValues = clone(this._templateValues);\n  result.headers = clone(this.headers);\n  result.proxy = this.proxy;\n  result.retryCallback = this.retryCallback;\n  result.retryAttempts = this.retryAttempts;\n  result._retryCount = 0;\n  result.request = this.request.clone();\n\n  return result;\n};\n\n/**\n * Returns the base path of the Resource.\n *\n * @param {Boolean} [includeQuery = false] Whether or not to include the query string and fragment form the uri\n *\n * @returns {String} The base URI of the resource\n */\nResource.prototype.getBaseUri = function (includeQuery) {\n  return getBaseUri(this.getUrlComponent(includeQuery), includeQuery);\n};\n\n/**\n * Appends a forward slash to the URL.\n */\nResource.prototype.appendForwardSlash = function () {\n  this._url = appendForwardSlash(this._url);\n};\n\n/**\n * Asynchronously loads the resource as raw binary data.  Returns a promise that will resolve to\n * an ArrayBuffer once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @returns {Promise.<ArrayBuffer>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n * @example\n * // load a single URL asynchronously\n * resource.fetchArrayBuffer().then(function(arrayBuffer) {\n *     // use the data\n * }).catch(function(error) {\n *     // an error occurred\n * });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.fetchArrayBuffer = function () {\n  return this.fetch({\n    responseType: \"arraybuffer\",\n  });\n};\n\n/**\n * Creates a Resource and calls fetchArrayBuffer() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @returns {Promise.<ArrayBuffer>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.fetchArrayBuffer = function (options) {\n  const resource = new Resource(options);\n  return resource.fetchArrayBuffer();\n};\n\n/**\n * Asynchronously loads the given resource as a blob.  Returns a promise that will resolve to\n * a Blob once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @returns {Promise.<Blob>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n * @example\n * // load a single URL asynchronously\n * resource.fetchBlob().then(function(blob) {\n *     // use the data\n * }).catch(function(error) {\n *     // an error occurred\n * });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.fetchBlob = function () {\n  return this.fetch({\n    responseType: \"blob\",\n  });\n};\n\n/**\n * Creates a Resource and calls fetchBlob() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @returns {Promise.<Blob>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.fetchBlob = function (options) {\n  const resource = new Resource(options);\n  return resource.fetchBlob();\n};\n\n/**\n * Asynchronously loads the given image resource.  Returns a promise that will resolve to\n * an {@link https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap|ImageBitmap} if <code>preferImageBitmap</code> is true and the browser supports <code>createImageBitmap</code> or otherwise an\n * {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement|Image} once loaded, or reject if the image failed to load.\n *\n * @param {Object} [options] An object with the following properties.\n * @param {Boolean} [options.preferBlob=false] If true, we will load the image via a blob.\n * @param {Boolean} [options.preferImageBitmap=false] If true, image will be decoded during fetch and an <code>ImageBitmap</code> is returned.\n * @param {Boolean} [options.flipY=false] If true, image will be vertically flipped during decode. Only applies if the browser supports <code>createImageBitmap</code>.\n * @param {Boolean} [options.skipColorSpaceConversion=false] If true, any custom gamma or color profiles in the image will be ignored. Only applies if the browser supports <code>createImageBitmap</code>.\n * @returns {Promise.<ImageBitmap|HTMLImageElement>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * // load a single image asynchronously\n * resource.fetchImage().then(function(image) {\n *     // use the loaded image\n * }).catch(function(error) {\n *     // an error occurred\n * });\n *\n * // load several images in parallel\n * Promise.all([resource1.fetchImage(), resource2.fetchImage()]).then(function(images) {\n *     // images is an array containing all the loaded images\n * });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.fetchImage = function (options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const preferImageBitmap = defaultValue(options.preferImageBitmap, false);\n  const preferBlob = defaultValue(options.preferBlob, false);\n  const flipY = defaultValue(options.flipY, false);\n  const skipColorSpaceConversion = defaultValue(\n    options.skipColorSpaceConversion,\n    false\n  );\n\n  checkAndResetRequest(this.request);\n  // We try to load the image normally if\n  // 1. Blobs aren't supported\n  // 2. It's a data URI\n  // 3. It's a blob URI\n  // 4. It doesn't have request headers and we preferBlob is false\n  if (\n    !xhrBlobSupported ||\n    this.isDataUri ||\n    this.isBlobUri ||\n    (!this.hasHeaders && !preferBlob)\n  ) {\n    return fetchImage({\n      resource: this,\n      flipY: flipY,\n      skipColorSpaceConversion: skipColorSpaceConversion,\n      preferImageBitmap: preferImageBitmap,\n    });\n  }\n\n  const blobPromise = this.fetchBlob();\n  if (!defined(blobPromise)) {\n    return;\n  }\n\n  let supportsImageBitmap;\n  let useImageBitmap;\n  let generatedBlobResource;\n  let generatedBlob;\n  return Resource.supportsImageBitmapOptions()\n    .then(function (result) {\n      supportsImageBitmap = result;\n      useImageBitmap = supportsImageBitmap && preferImageBitmap;\n      return blobPromise;\n    })\n    .then(function (blob) {\n      if (!defined(blob)) {\n        return;\n      }\n      generatedBlob = blob;\n      if (useImageBitmap) {\n        return Resource.createImageBitmapFromBlob(blob, {\n          flipY: flipY,\n          premultiplyAlpha: false,\n          skipColorSpaceConversion: skipColorSpaceConversion,\n        });\n      }\n      const blobUrl = window.URL.createObjectURL(blob);\n      generatedBlobResource = new Resource({\n        url: blobUrl,\n      });\n\n      return fetchImage({\n        resource: generatedBlobResource,\n        flipY: flipY,\n        skipColorSpaceConversion: skipColorSpaceConversion,\n        preferImageBitmap: false,\n      });\n    })\n    .then(function (image) {\n      if (!defined(image)) {\n        return;\n      }\n\n      // The blob object may be needed for use by a TileDiscardPolicy,\n      // so attach it to the image.\n      image.blob = generatedBlob;\n\n      if (useImageBitmap) {\n        return image;\n      }\n\n      window.URL.revokeObjectURL(generatedBlobResource.url);\n      return image;\n    })\n    .catch(function (error) {\n      if (defined(generatedBlobResource)) {\n        window.URL.revokeObjectURL(generatedBlobResource.url);\n      }\n\n      // If the blob load succeeded but the image decode failed, attach the blob\n      // to the error object for use by a TileDiscardPolicy.\n      // In particular, BingMapsImageryProvider uses this to detect the\n      // zero-length response that is returned when a tile is not available.\n      error.blob = generatedBlob;\n\n      return Promise.reject(error);\n    });\n};\n\n/**\n * Fetches an image and returns a promise to it.\n *\n * @param {Object} [options] An object with the following properties.\n * @param {Resource} [options.resource] Resource object that points to an image to fetch.\n * @param {Boolean} [options.preferImageBitmap] If true, image will be decoded during fetch and an <code>ImageBitmap</code> is returned.\n * @param {Boolean} [options.flipY] If true, image will be vertically flipped during decode. Only applies if the browser supports <code>createImageBitmap</code>.\n * @param {Boolean} [options.skipColorSpaceConversion=false] If true, any custom gamma or color profiles in the image will be ignored. Only applies if the browser supports <code>createImageBitmap</code>.\n * @private\n */\nfunction fetchImage(options) {\n  const resource = options.resource;\n  const flipY = options.flipY;\n  const skipColorSpaceConversion = options.skipColorSpaceConversion;\n  const preferImageBitmap = options.preferImageBitmap;\n\n  const request = resource.request;\n  request.url = resource.url;\n  request.requestFunction = function () {\n    let crossOrigin = false;\n\n    // data URIs can't have crossorigin set.\n    if (!resource.isDataUri && !resource.isBlobUri) {\n      crossOrigin = resource.isCrossOriginUrl;\n    }\n\n    const deferred = defer();\n    Resource._Implementations.createImage(\n      request,\n      crossOrigin,\n      deferred,\n      flipY,\n      skipColorSpaceConversion,\n      preferImageBitmap\n    );\n\n    return deferred.promise;\n  };\n\n  const promise = RequestScheduler.request(request);\n  if (!defined(promise)) {\n    return;\n  }\n\n  return promise.catch(function (e) {\n    // Don't retry cancelled or otherwise aborted requests\n    if (request.state !== RequestState.FAILED) {\n      return Promise.reject(e);\n    }\n    return resource.retryOnError(e).then(function (retry) {\n      if (retry) {\n        // Reset request so it can try again\n        request.state = RequestState.UNISSUED;\n        request.deferred = undefined;\n\n        return fetchImage({\n          resource: resource,\n          flipY: flipY,\n          skipColorSpaceConversion: skipColorSpaceConversion,\n          preferImageBitmap: preferImageBitmap,\n        });\n      }\n      return Promise.reject(e);\n    });\n  });\n}\n\n/**\n * Creates a Resource and calls fetchImage() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Boolean} [options.flipY=false] Whether to vertically flip the image during fetch and decode. Only applies when requesting an image and the browser supports <code>createImageBitmap</code>.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {Boolean} [options.preferBlob=false]  If true, we will load the image via a blob.\n * @param {Boolean} [options.preferImageBitmap=false] If true, image will be decoded during fetch and an <code>ImageBitmap</code> is returned.\n * @param {Boolean} [options.skipColorSpaceConversion=false] If true, any custom gamma or color profiles in the image will be ignored. Only applies when requesting an image and the browser supports <code>createImageBitmap</code>.\n * @returns {Promise.<ImageBitmap|HTMLImageElement>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.fetchImage = function (options) {\n  const resource = new Resource(options);\n  return resource.fetchImage({\n    flipY: options.flipY,\n    skipColorSpaceConversion: options.skipColorSpaceConversion,\n    preferBlob: options.preferBlob,\n    preferImageBitmap: options.preferImageBitmap,\n  });\n};\n\n/**\n * Asynchronously loads the given resource as text.  Returns a promise that will resolve to\n * a String once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @returns {Promise.<String>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n * @example\n * // load text from a URL, setting a custom header\n * const resource = new Resource({\n *   url: 'http://someUrl.com/someJson.txt',\n *   headers: {\n *     'X-Custom-Header' : 'some value'\n *   }\n * });\n * resource.fetchText().then(function(text) {\n *     // Do something with the text\n * }).catch(function(error) {\n *     // an error occurred\n * });\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest|XMLHttpRequest}\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.fetchText = function () {\n  return this.fetch({\n    responseType: \"text\",\n  });\n};\n\n/**\n * Creates a Resource and calls fetchText() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @returns {Promise.<String>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.fetchText = function (options) {\n  const resource = new Resource(options);\n  return resource.fetchText();\n};\n\n// note: &#42;&#47;&#42; below is */* but that ends the comment block early\n/**\n * Asynchronously loads the given resource as JSON.  Returns a promise that will resolve to\n * a JSON object once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled. This function\n * adds 'Accept: application/json,&#42;&#47;&#42;;q=0.01' to the request headers, if not\n * already specified.\n *\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * resource.fetchJson().then(function(jsonData) {\n *     // Do something with the JSON object\n * }).catch(function(error) {\n *     // an error occurred\n * });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.fetchJson = function () {\n  const promise = this.fetch({\n    responseType: \"text\",\n    headers: {\n      Accept: \"application/json,*/*;q=0.01\",\n    },\n  });\n\n  if (!defined(promise)) {\n    return undefined;\n  }\n\n  return promise.then(function (value) {\n    if (!defined(value)) {\n      return;\n    }\n    return JSON.parse(value);\n  });\n};\n\n/**\n * Creates a Resource and calls fetchJson() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.fetchJson = function (options) {\n  const resource = new Resource(options);\n  return resource.fetchJson();\n};\n\n/**\n * Asynchronously loads the given resource as XML.  Returns a promise that will resolve to\n * an XML Document once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @returns {Promise.<XMLDocument>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * // load XML from a URL, setting a custom header\n * Cesium.loadXML('http://someUrl.com/someXML.xml', {\n *   'X-Custom-Header' : 'some value'\n * }).then(function(document) {\n *     // Do something with the document\n * }).catch(function(error) {\n *     // an error occurred\n * });\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest|XMLHttpRequest}\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.fetchXML = function () {\n  return this.fetch({\n    responseType: \"document\",\n    overrideMimeType: \"text/xml\",\n  });\n};\n\n/**\n * Creates a Resource and calls fetchXML() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @returns {Promise.<XMLDocument>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.fetchXML = function (options) {\n  const resource = new Resource(options);\n  return resource.fetchXML();\n};\n\n/**\n * Requests a resource using JSONP.\n *\n * @param {String} [callbackParameterName='callback'] The callback parameter name that the server expects.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * // load a data asynchronously\n * resource.fetchJsonp().then(function(data) {\n *     // use the loaded data\n * }).catch(function(error) {\n *     // an error occurred\n * });\n *\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.fetchJsonp = function (callbackParameterName) {\n  callbackParameterName = defaultValue(callbackParameterName, \"callback\");\n\n  checkAndResetRequest(this.request);\n\n  //generate a unique function name\n  let functionName;\n  do {\n    functionName = `loadJsonp${CesiumMath.nextRandomNumber()\n      .toString()\n      .substring(2, 8)}`;\n  } while (defined(window[functionName]));\n\n  return fetchJsonp(this, callbackParameterName, functionName);\n};\n\nfunction fetchJsonp(resource, callbackParameterName, functionName) {\n  const callbackQuery = {};\n  callbackQuery[callbackParameterName] = functionName;\n  resource.setQueryParameters(callbackQuery);\n\n  const request = resource.request;\n  request.url = resource.url;\n  request.requestFunction = function () {\n    const deferred = defer();\n\n    //assign a function with that name in the global scope\n    window[functionName] = function (data) {\n      deferred.resolve(data);\n\n      try {\n        delete window[functionName];\n      } catch (e) {\n        window[functionName] = undefined;\n      }\n    };\n\n    Resource._Implementations.loadAndExecuteScript(\n      resource.url,\n      functionName,\n      deferred\n    );\n    return deferred.promise;\n  };\n\n  const promise = RequestScheduler.request(request);\n  if (!defined(promise)) {\n    return;\n  }\n\n  return promise.catch(function (e) {\n    if (request.state !== RequestState.FAILED) {\n      return Promise.reject(e);\n    }\n\n    return resource.retryOnError(e).then(function (retry) {\n      if (retry) {\n        // Reset request so it can try again\n        request.state = RequestState.UNISSUED;\n        request.deferred = undefined;\n\n        return fetchJsonp(resource, callbackParameterName, functionName);\n      }\n\n      return Promise.reject(e);\n    });\n  });\n}\n\n/**\n * Creates a Resource from a URL and calls fetchJsonp() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {String} [options.callbackParameterName='callback'] The callback parameter name that the server expects.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.fetchJsonp = function (options) {\n  const resource = new Resource(options);\n  return resource.fetchJsonp(options.callbackParameterName);\n};\n\n/**\n * @private\n */\nResource.prototype._makeRequest = function (options) {\n  const resource = this;\n  checkAndResetRequest(resource.request);\n\n  const request = resource.request;\n  request.url = resource.url;\n\n  request.requestFunction = function () {\n    const responseType = options.responseType;\n    const headers = combine(options.headers, resource.headers);\n    const overrideMimeType = options.overrideMimeType;\n    const method = options.method;\n    const data = options.data;\n    const deferred = defer();\n    const xhr = Resource._Implementations.loadWithXhr(\n      resource.url,\n      responseType,\n      method,\n      data,\n      headers,\n      deferred,\n      overrideMimeType\n    );\n    if (defined(xhr) && defined(xhr.abort)) {\n      request.cancelFunction = function () {\n        xhr.abort();\n      };\n    }\n    return deferred.promise;\n  };\n\n  const promise = RequestScheduler.request(request);\n  if (!defined(promise)) {\n    return;\n  }\n\n  return promise\n    .then(function (data) {\n      // explicitly set to undefined to ensure GC of request response data. See #8843\n      request.cancelFunction = undefined;\n      return data;\n    })\n    .catch(function (e) {\n      request.cancelFunction = undefined;\n      if (request.state !== RequestState.FAILED) {\n        return Promise.reject(e);\n      }\n\n      return resource.retryOnError(e).then(function (retry) {\n        if (retry) {\n          // Reset request so it can try again\n          request.state = RequestState.UNISSUED;\n          request.deferred = undefined;\n\n          return resource.fetch(options);\n        }\n\n        return Promise.reject(e);\n      });\n    });\n};\n\nconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\nfunction decodeDataUriText(isBase64, data) {\n  const result = decodeURIComponent(data);\n  if (isBase64) {\n    return atob(result);\n  }\n  return result;\n}\n\nfunction decodeDataUriArrayBuffer(isBase64, data) {\n  const byteString = decodeDataUriText(isBase64, data);\n  const buffer = new ArrayBuffer(byteString.length);\n  const view = new Uint8Array(buffer);\n  for (let i = 0; i < byteString.length; i++) {\n    view[i] = byteString.charCodeAt(i);\n  }\n  return buffer;\n}\n\nfunction decodeDataUri(dataUriRegexResult, responseType) {\n  responseType = defaultValue(responseType, \"\");\n  const mimeType = dataUriRegexResult[1];\n  const isBase64 = !!dataUriRegexResult[2];\n  const data = dataUriRegexResult[3];\n  let buffer;\n  let parser;\n\n  switch (responseType) {\n    case \"\":\n    case \"text\":\n      return decodeDataUriText(isBase64, data);\n    case \"arraybuffer\":\n      return decodeDataUriArrayBuffer(isBase64, data);\n    case \"blob\":\n      buffer = decodeDataUriArrayBuffer(isBase64, data);\n      return new Blob([buffer], {\n        type: mimeType,\n      });\n    case \"document\":\n      parser = new DOMParser();\n      return parser.parseFromString(\n        decodeDataUriText(isBase64, data),\n        mimeType\n      );\n    case \"json\":\n      return JSON.parse(decodeDataUriText(isBase64, data));\n    default:\n      //>>includeStart('debug', pragmas.debug);\n      throw new DeveloperError(`Unhandled responseType: ${responseType}`);\n    //>>includeEnd('debug');\n  }\n}\n\n/**\n * Asynchronously loads the given resource.  Returns a promise that will resolve to\n * the result once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled. It's recommended that you use\n * the more specific functions eg. fetchJson, fetchBlob, etc.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {Object} [options.headers] Additional HTTP headers to send with the request, if any.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * resource.fetch()\n *   .then(function(body) {\n *       // use the data\n *   }).catch(function(error) {\n *       // an error occurred\n *   });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.fetch = function (options) {\n  options = defaultClone(options, {});\n  options.method = \"GET\";\n\n  return this._makeRequest(options);\n};\n\n/**\n * Creates a Resource from a URL and calls fetch() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.fetch = function (options) {\n  const resource = new Resource(options);\n  return resource.fetch({\n    // Make copy of just the needed fields because headers can be passed to both the constructor and to fetch\n    responseType: options.responseType,\n    overrideMimeType: options.overrideMimeType,\n  });\n};\n\n/**\n * Asynchronously deletes the given resource.  Returns a promise that will resolve to\n * the result once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {Object} [options.headers] Additional HTTP headers to send with the request, if any.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * resource.delete()\n *   .then(function(body) {\n *       // use the data\n *   }).catch(function(error) {\n *       // an error occurred\n *   });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.delete = function (options) {\n  options = defaultClone(options, {});\n  options.method = \"DELETE\";\n\n  return this._makeRequest(options);\n};\n\n/**\n * Creates a Resource from a URL and calls delete() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.data] Data that is posted with the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.delete = function (options) {\n  const resource = new Resource(options);\n  return resource.delete({\n    // Make copy of just the needed fields because headers can be passed to both the constructor and to fetch\n    responseType: options.responseType,\n    overrideMimeType: options.overrideMimeType,\n    data: options.data,\n  });\n};\n\n/**\n * Asynchronously gets headers the given resource.  Returns a promise that will resolve to\n * the result once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {Object} [options.headers] Additional HTTP headers to send with the request, if any.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * resource.head()\n *   .then(function(headers) {\n *       // use the data\n *   }).catch(function(error) {\n *       // an error occurred\n *   });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.head = function (options) {\n  options = defaultClone(options, {});\n  options.method = \"HEAD\";\n\n  return this._makeRequest(options);\n};\n\n/**\n * Creates a Resource from a URL and calls head() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.head = function (options) {\n  const resource = new Resource(options);\n  return resource.head({\n    // Make copy of just the needed fields because headers can be passed to both the constructor and to fetch\n    responseType: options.responseType,\n    overrideMimeType: options.overrideMimeType,\n  });\n};\n\n/**\n * Asynchronously gets options the given resource.  Returns a promise that will resolve to\n * the result once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {Object} [options.headers] Additional HTTP headers to send with the request, if any.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * resource.options()\n *   .then(function(headers) {\n *       // use the data\n *   }).catch(function(error) {\n *       // an error occurred\n *   });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.options = function (options) {\n  options = defaultClone(options, {});\n  options.method = \"OPTIONS\";\n\n  return this._makeRequest(options);\n};\n\n/**\n * Creates a Resource from a URL and calls options() on it.\n *\n * @param {String|Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.options = function (options) {\n  const resource = new Resource(options);\n  return resource.options({\n    // Make copy of just the needed fields because headers can be passed to both the constructor and to fetch\n    responseType: options.responseType,\n    overrideMimeType: options.overrideMimeType,\n  });\n};\n\n/**\n * Asynchronously posts data to the given resource.  Returns a promise that will resolve to\n * the result once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @param {Object} data Data that is posted with the resource.\n * @param {Object} [options] Object with the following properties:\n * @param {Object} [options.data] Data that is posted with the resource.\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {Object} [options.headers] Additional HTTP headers to send with the request, if any.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * resource.post(data)\n *   .then(function(result) {\n *       // use the result\n *   }).catch(function(error) {\n *       // an error occurred\n *   });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.post = function (data, options) {\n  Check.defined(\"data\", data);\n\n  options = defaultClone(options, {});\n  options.method = \"POST\";\n  options.data = data;\n\n  return this._makeRequest(options);\n};\n\n/**\n * Creates a Resource from a URL and calls post() on it.\n *\n * @param {Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} options.data Data that is posted with the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.post = function (options) {\n  const resource = new Resource(options);\n  return resource.post(options.data, {\n    // Make copy of just the needed fields because headers can be passed to both the constructor and to post\n    responseType: options.responseType,\n    overrideMimeType: options.overrideMimeType,\n  });\n};\n\n/**\n * Asynchronously puts data to the given resource.  Returns a promise that will resolve to\n * the result once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @param {Object} data Data that is posted with the resource.\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {Object} [options.headers] Additional HTTP headers to send with the request, if any.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * resource.put(data)\n *   .then(function(result) {\n *       // use the result\n *   }).catch(function(error) {\n *       // an error occurred\n *   });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.put = function (data, options) {\n  Check.defined(\"data\", data);\n\n  options = defaultClone(options, {});\n  options.method = \"PUT\";\n  options.data = data;\n\n  return this._makeRequest(options);\n};\n\n/**\n * Creates a Resource from a URL and calls put() on it.\n *\n * @param {Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} options.data Data that is posted with the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.put = function (options) {\n  const resource = new Resource(options);\n  return resource.put(options.data, {\n    // Make copy of just the needed fields because headers can be passed to both the constructor and to post\n    responseType: options.responseType,\n    overrideMimeType: options.overrideMimeType,\n  });\n};\n\n/**\n * Asynchronously patches data to the given resource.  Returns a promise that will resolve to\n * the result once loaded, or reject if the resource failed to load.  The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource Sharing (CORS) headers enabled.\n *\n * @param {Object} data Data that is posted with the resource.\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {Object} [options.headers] Additional HTTP headers to send with the request, if any.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n *\n * @example\n * resource.patch(data)\n *   .then(function(result) {\n *       // use the result\n *   }).catch(function(error) {\n *       // an error occurred\n *   });\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n */\nResource.prototype.patch = function (data, options) {\n  Check.defined(\"data\", data);\n\n  options = defaultClone(options, {});\n  options.method = \"PATCH\";\n  options.data = data;\n\n  return this._makeRequest(options);\n};\n\n/**\n * Creates a Resource from a URL and calls patch() on it.\n *\n * @param {Object} options A url or an object with the following properties\n * @param {String} options.url The url of the resource.\n * @param {Object} options.data Data that is posted with the resource.\n * @param {Object} [options.queryParameters] An object containing query parameters that will be sent when retrieving the resource.\n * @param {Object} [options.templateValues] Key/Value pairs that are used to replace template values (eg. {x}).\n * @param {Object} [options.headers={}] Additional HTTP headers that will be sent.\n * @param {Proxy} [options.proxy] A proxy to be used when loading the resource.\n * @param {Resource.RetryCallback} [options.retryCallback] The Function to call when a request for this resource fails. If it returns true, the request will be retried.\n * @param {Number} [options.retryAttempts=0] The number of times the retryCallback should be called before giving up.\n * @param {Request} [options.request] A Request object that will be used. Intended for internal use only.\n * @param {String} [options.responseType] The type of response.  This controls the type of item returned.\n * @param {String} [options.overrideMimeType] Overrides the MIME type returned by the server.\n * @returns {Promise.<*>|undefined} a promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n */\nResource.patch = function (options) {\n  const resource = new Resource(options);\n  return resource.patch(options.data, {\n    // Make copy of just the needed fields because headers can be passed to both the constructor and to post\n    responseType: options.responseType,\n    overrideMimeType: options.overrideMimeType,\n  });\n};\n\n/**\n * Contains implementations of functions that can be replaced for testing\n *\n * @private\n */\nResource._Implementations = {};\n\nResource._Implementations.loadImageElement = function (\n  url,\n  crossOrigin,\n  deferred\n) {\n  const image = new Image();\n\n  image.onload = function () {\n    // work-around a known issue with Firefox and dimensionless SVG, see:\n    //   - https://github.com/whatwg/html/issues/3510\n    //   - https://bugzilla.mozilla.org/show_bug.cgi?id=700533\n    if (\n      image.naturalWidth === 0 &&\n      image.naturalHeight === 0 &&\n      image.width === 0 &&\n      image.height === 0\n    ) {\n      // these values affect rasterization and will likely mar the content\n      // until Firefox takes a stance on the issue, marred content is better than no content\n      // Chromium uses a more refined heuristic about its choice given nil viewBox, and a better stance and solution is\n      // proposed later in the original issue thread:\n      //   - Chromium behavior: https://github.com/CesiumGS/cesium/issues/9188#issuecomment-704400825\n      //   - Cesium's stance/solve: https://github.com/CesiumGS/cesium/issues/9188#issuecomment-720645777\n      image.width = 300;\n      image.height = 150;\n    }\n    deferred.resolve(image);\n  };\n\n  image.onerror = function (e) {\n    deferred.reject(e);\n  };\n\n  if (crossOrigin) {\n    if (TrustedServers.contains(url)) {\n      image.crossOrigin = \"use-credentials\";\n    } else {\n      image.crossOrigin = \"\";\n    }\n  }\n\n  image.src = url;\n};\n\nResource._Implementations.createImage = function (\n  request,\n  crossOrigin,\n  deferred,\n  flipY,\n  skipColorSpaceConversion,\n  preferImageBitmap\n) {\n  const url = request.url;\n  // Passing an Image to createImageBitmap will force it to run on the main thread\n  // since DOM elements don't exist on workers. We convert it to a blob so it's non-blocking.\n  // See:\n  //    https://bugzilla.mozilla.org/show_bug.cgi?id=1044102#c38\n  //    https://bugs.chromium.org/p/chromium/issues/detail?id=580202#c10\n  Resource.supportsImageBitmapOptions()\n    .then(function (supportsImageBitmap) {\n      // We can only use ImageBitmap if we can flip on decode.\n      // See: https://github.com/CesiumGS/cesium/pull/7579#issuecomment-466146898\n      if (!(supportsImageBitmap && preferImageBitmap)) {\n        Resource._Implementations.loadImageElement(url, crossOrigin, deferred);\n        return;\n      }\n      const responseType = \"blob\";\n      const method = \"GET\";\n      const xhrDeferred = defer();\n      const xhr = Resource._Implementations.loadWithXhr(\n        url,\n        responseType,\n        method,\n        undefined,\n        undefined,\n        xhrDeferred,\n        undefined,\n        undefined,\n        undefined\n      );\n\n      if (defined(xhr) && defined(xhr.abort)) {\n        request.cancelFunction = function () {\n          xhr.abort();\n        };\n      }\n      return xhrDeferred.promise\n        .then(function (blob) {\n          if (!defined(blob)) {\n            deferred.reject(\n              new RuntimeError(\n                `Successfully retrieved ${url} but it contained no content.`\n              )\n            );\n            return;\n          }\n\n          return Resource.createImageBitmapFromBlob(blob, {\n            flipY: flipY,\n            premultiplyAlpha: false,\n            skipColorSpaceConversion: skipColorSpaceConversion,\n          });\n        })\n        .then(function (image) {\n          deferred.resolve(image);\n        });\n    })\n    .catch(function (e) {\n      deferred.reject(e);\n    });\n};\n\n/**\n * Wrapper for createImageBitmap\n *\n * @private\n */\nResource.createImageBitmapFromBlob = function (blob, options) {\n  Check.defined(\"options\", options);\n  Check.typeOf.bool(\"options.flipY\", options.flipY);\n  Check.typeOf.bool(\"options.premultiplyAlpha\", options.premultiplyAlpha);\n  Check.typeOf.bool(\n    \"options.skipColorSpaceConversion\",\n    options.skipColorSpaceConversion\n  );\n\n  return createImageBitmap(blob, {\n    imageOrientation: options.flipY ? \"flipY\" : \"none\",\n    premultiplyAlpha: options.premultiplyAlpha ? \"premultiply\" : \"none\",\n    colorSpaceConversion: options.skipColorSpaceConversion ? \"none\" : \"default\",\n  });\n};\n\nfunction decodeResponse(loadWithHttpResponse, responseType) {\n  switch (responseType) {\n    case \"text\":\n      return loadWithHttpResponse.toString(\"utf8\");\n    case \"json\":\n      return JSON.parse(loadWithHttpResponse.toString(\"utf8\"));\n    default:\n      return new Uint8Array(loadWithHttpResponse).buffer;\n  }\n}\n\nfunction loadWithHttpRequest(\n  url,\n  responseType,\n  method,\n  data,\n  headers,\n  deferred,\n  overrideMimeType\n) {\n  // Note: only the 'json' and 'text' responseTypes transforms the loaded buffer\n  /* eslint-disable no-undef */\n  const URL = require(\"url\").parse(url);\n  const http = URL.protocol === \"https:\" ? require(\"https\") : require(\"http\");\n  const zlib = require(\"zlib\");\n  /* eslint-enable no-undef */\n\n  const options = {\n    protocol: URL.protocol,\n    hostname: URL.hostname,\n    port: URL.port,\n    path: URL.path,\n    query: URL.query,\n    method: method,\n    headers: headers,\n  };\n\n  http\n    .request(options)\n    .on(\"response\", function (res) {\n      if (res.statusCode < 200 || res.statusCode >= 300) {\n        deferred.reject(\n          new RequestErrorEvent(res.statusCode, res, res.headers)\n        );\n        return;\n      }\n\n      const chunkArray = [];\n      res.on(\"data\", function (chunk) {\n        chunkArray.push(chunk);\n      });\n\n      res.on(\"end\", function () {\n        // eslint-disable-next-line no-undef\n        const result = Buffer.concat(chunkArray);\n        if (res.headers[\"content-encoding\"] === \"gzip\") {\n          zlib.gunzip(result, function (error, resultUnzipped) {\n            if (error) {\n              deferred.reject(\n                new RuntimeError(\"Error decompressing response.\")\n              );\n            } else {\n              deferred.resolve(decodeResponse(resultUnzipped, responseType));\n            }\n          });\n        } else {\n          deferred.resolve(decodeResponse(result, responseType));\n        }\n      });\n    })\n    .on(\"error\", function (e) {\n      deferred.reject(new RequestErrorEvent());\n    })\n    .end();\n}\n\nconst noXMLHttpRequest = typeof XMLHttpRequest === \"undefined\";\nResource._Implementations.loadWithXhr = function (\n  url,\n  responseType,\n  method,\n  data,\n  headers,\n  deferred,\n  overrideMimeType\n) {\n  const dataUriRegexResult = dataUriRegex.exec(url);\n  if (dataUriRegexResult !== null) {\n    deferred.resolve(decodeDataUri(dataUriRegexResult, responseType));\n    return;\n  }\n\n  if (noXMLHttpRequest) {\n    loadWithHttpRequest(\n      url,\n      responseType,\n      method,\n      data,\n      headers,\n      deferred,\n      overrideMimeType\n    );\n    return;\n  }\n\n  const xhr = new XMLHttpRequest();\n\n  if (TrustedServers.contains(url)) {\n    xhr.withCredentials = true;\n  }\n\n  xhr.open(method, url, true);\n\n  if (defined(overrideMimeType) && defined(xhr.overrideMimeType)) {\n    xhr.overrideMimeType(overrideMimeType);\n  }\n\n  if (defined(headers)) {\n    for (const key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key]);\n      }\n    }\n  }\n\n  if (defined(responseType)) {\n    xhr.responseType = responseType;\n  }\n\n  // While non-standard, file protocol always returns a status of 0 on success\n  let localFile = false;\n  if (typeof url === \"string\") {\n    localFile =\n      url.indexOf(\"file://\") === 0 ||\n      (typeof window !== \"undefined\" && window.location.origin === \"file://\");\n  }\n\n  xhr.onload = function () {\n    if (\n      (xhr.status < 200 || xhr.status >= 300) &&\n      !(localFile && xhr.status === 0)\n    ) {\n      deferred.reject(\n        new RequestErrorEvent(\n          xhr.status,\n          xhr.response,\n          xhr.getAllResponseHeaders()\n        )\n      );\n      return;\n    }\n\n    const response = xhr.response;\n    const browserResponseType = xhr.responseType;\n\n    if (method === \"HEAD\" || method === \"OPTIONS\") {\n      const responseHeaderString = xhr.getAllResponseHeaders();\n      const splitHeaders = responseHeaderString.trim().split(/[\\r\\n]+/);\n\n      const responseHeaders = {};\n      splitHeaders.forEach(function (line) {\n        const parts = line.split(\": \");\n        const header = parts.shift();\n        responseHeaders[header] = parts.join(\": \");\n      });\n\n      deferred.resolve(responseHeaders);\n      return;\n    }\n\n    //All modern browsers will go into either the first or second if block or last else block.\n    //Other code paths support older browsers that either do not support the supplied responseType\n    //or do not support the xhr.response property.\n    if (xhr.status === 204) {\n      // accept no content\n      deferred.resolve();\n    } else if (\n      defined(response) &&\n      (!defined(responseType) || browserResponseType === responseType)\n    ) {\n      deferred.resolve(response);\n    } else if (responseType === \"json\" && typeof response === \"string\") {\n      try {\n        deferred.resolve(JSON.parse(response));\n      } catch (e) {\n        deferred.reject(e);\n      }\n    } else if (\n      (browserResponseType === \"\" || browserResponseType === \"document\") &&\n      defined(xhr.responseXML) &&\n      xhr.responseXML.hasChildNodes()\n    ) {\n      deferred.resolve(xhr.responseXML);\n    } else if (\n      (browserResponseType === \"\" || browserResponseType === \"text\") &&\n      defined(xhr.responseText)\n    ) {\n      deferred.resolve(xhr.responseText);\n    } else {\n      deferred.reject(\n        new RuntimeError(\"Invalid XMLHttpRequest response type.\")\n      );\n    }\n  };\n\n  xhr.onerror = function (e) {\n    deferred.reject(new RequestErrorEvent());\n  };\n\n  xhr.send(data);\n\n  return xhr;\n};\n\nResource._Implementations.loadAndExecuteScript = function (\n  url,\n  functionName,\n  deferred\n) {\n  return loadAndExecuteScript(url, functionName).catch(function (e) {\n    deferred.reject(e);\n  });\n};\n\n/**\n * The default implementations\n *\n * @private\n */\nResource._DefaultImplementations = {};\nResource._DefaultImplementations.createImage =\n  Resource._Implementations.createImage;\nResource._DefaultImplementations.loadWithXhr =\n  Resource._Implementations.loadWithXhr;\nResource._DefaultImplementations.loadAndExecuteScript =\n  Resource._Implementations.loadAndExecuteScript;\n\n/**\n * A resource instance initialized to the current browser location\n *\n * @type {Resource}\n * @constant\n */\nResource.DEFAULT = Object.freeze(\n  new Resource({\n    url:\n      typeof document === \"undefined\"\n        ? \"\"\n        : document.location.href.split(\"?\")[0],\n  })\n);\n\n/**\n * A function that returns the value of the property.\n * @callback Resource.RetryCallback\n *\n * @param {Resource} [resource] The resource that failed to load.\n * @param {Error} [error] The error that occurred during the loading of the resource.\n * @returns {Boolean|Promise<Boolean>} If true or a promise that resolved to true, the resource will be retried. Otherwise the failure will be returned.\n */\nexport default Resource;\n","import defined from \"./defined.js\";\n\n/**\n * Constructs an exception object that is thrown due to an error that can occur at runtime, e.g.,\n * out of memory, could not compile shader, etc.  If a function may throw this\n * exception, the calling code should be prepared to catch it.\n * <br /><br />\n * On the other hand, a {@link DeveloperError} indicates an exception due\n * to a developer error, e.g., invalid argument, that usually indicates a bug in the\n * calling code.\n *\n * @alias RuntimeError\n * @constructor\n * @extends Error\n *\n * @param {String} [message] The error message for this exception.\n *\n * @see DeveloperError\n */\nfunction RuntimeError(message) {\n  /**\n   * 'RuntimeError' indicating that this exception was thrown due to a runtime error.\n   * @type {String}\n   * @readonly\n   */\n  this.name = \"RuntimeError\";\n\n  /**\n   * The explanation for why this exception was thrown.\n   * @type {String}\n   * @readonly\n   */\n  this.message = message;\n\n  //Browsers such as IE don't have a stack property until you actually throw the error.\n  let stack;\n  try {\n    throw new Error();\n  } catch (e) {\n    stack = e.stack;\n  }\n\n  /**\n   * The stack trace of this exception, if available.\n   * @type {String}\n   * @readonly\n   */\n  this.stack = stack;\n}\n\nif (defined(Object.create)) {\n  RuntimeError.prototype = Object.create(Error.prototype);\n  RuntimeError.prototype.constructor = RuntimeError;\n}\n\nRuntimeError.prototype.toString = function () {\n  let str = `${this.name}: ${this.message}`;\n\n  if (defined(this.stack)) {\n    str += `\\n${this.stack.toString()}`;\n  }\n\n  return str;\n};\nexport default RuntimeError;\n","/* eslint-disable new-cap */\nimport Cartesian3 from \"./Cartesian3.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport FeatureDetection from \"./FeatureDetection.js\";\nimport RuntimeError from \"./RuntimeError.js\";\n\n/**\n * S2\n * --\n *\n * This implementation is based on the S2 C++ reference implementation: https://github.com/google/s2geometry\n *\n *\n * Overview:\n * ---------\n * The S2 library decomposes the unit sphere into a hierarchy of cells. A cell is a quadrilateral bounded by 4 geodesics.\n * The 6 root cells are obtained by projecting the six faces of a cube on a unit sphere. Each root cell follows a quadtree\n * subdivision scheme, i.e. each cell subdivides into 4 smaller cells that cover the same area as the parent cell. The S2 cell\n * hierarchy extends from level 0 (root cells) to level 30 (leaf cells). The root cells are rotated to enable a continuous Hilbert\n * curve to map all 6 faces of the cube.\n *\n *\n * Cell ID:\n * --------\n * Each cell in S2 can be uniquely identified using a 64-bit unsigned integer, its cell ID. The first 3 bits of the cell ID are the face bits, i.e.\n * they indicate which of the 6 faces of the cube a cell lies on. After the face bits are the position bits, i.e. they indicate the position\n * of the cell along the Hilbert curve. After the positions bits is the sentinel bit, which is always set to 1, and it indicates the level of the\n * cell. Again, the level can be between 0 and 30 in S2.\n *\n *   Note: In the illustration below, the face bits are marked with 'f', the position bits are marked with 'p', the zero bits are marked with '-'.\n *\n *   Cell ID (base 10): 3170534137668829184\n *   Cell ID (base 2) : 0010110000000000000000000000000000000000000000000000000000000000\n *\n *   001 0110000000000000000000000000000000000000000000000000000000000\n *   fff pps----------------------------------------------------------\n *\n * For the cell above, we can see that it lies on face 1 (01), with a Hilbert index of 1 (1).\n *\n *\n * Cell Subdivision:\n * ------------------\n * Cells in S2 subdivide recursively using quadtree subdivision. For each cell, you can get a child of index [0-3]. To compute the child at index i,\n * insert the base 2 representation of i to the right of the parent's position bits. Ensure that the sentinel bit is also shifted two places to the right.\n *\n *   Parent Cell ID (base 10) : 3170534137668829184\n *   Parent Cell ID (base 2)  : 0010110000000000000000000000000000000000000000000000000000000000\n *\n *   001 0110000000000000000000000000000000000000000000000000000000000\n *   fff pps----------------------------------------------------------\n *\n *   To get the 3rd child of the cell above, we insert the binary representation of 3 to the right of the parent's position bits:\n *\n *   Note: In the illustration below, the bits to be added are highlighted with '^'.\n *\n *   001 0111100000000000000000000000000000000000000000000000000000000\n *   fff pppps--------------------------------------------------------\n *         ^^\n *\n *   Child(3) Cell ID (base 10) : 3386706919782612992\n *   Child(3) Cell ID (base 2)  : 0010111100000000000000000000000000000000000000000000000000000000\n *\n * Cell Token:\n * -----------\n * To provide a more concise representation of the S2 cell ID, we can use their hexadecimal representation.\n *\n *   Cell ID (base 10): 3170534137668829184\n *   Cell ID (base 2) : 0010110000000000000000000000000000000000000000000000000000000000\n *\n *   We remove all trailing zero bits, until we reach the nybble (4 bits) that contains the sentinel bit.\n *\n *   Note: In the illustration below, the bits to be removed are highlighted with 'X'.\n *\n *   0010110000000000000000000000000000000000000000000000000000000000\n *   fffpps--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n *\n *   We convert the remaining bits to their hexadecimal representation.\n *\n *   Base 2: 0010 1100\n *   Base 16: \"2\"  \"c\"\n *\n *   Cell Token: \"2c\"\n *\n * To compute the cell ID from the token, we simply add enough zeros to the right to make the ID span 64 bits.\n *\n * Coordinate Transforms:\n * ----------------------\n *\n * To go from a cell in S2 to a point on the ellipsoid, the following order of transforms is applied:\n *\n *   1. (Cell ID): S2 cell ID\n *   2. (Face, I, J): Leaf cell coordinates, where i and j are in range [0, 2^30 - 1]\n *   3. (Face, S, T): Cell space coordinates, where s and t are in range [0, 1].\n *   4. (Face, Si, Ti): Discrete cell space coordinates, where si and ti are in range [0, 2^31]\n *   5. (Face, U, V): Cube space coordinates, where u and v are in range [-1, 1]. We apply the non-linear quadratic transform here.\n *   6. (X, Y, Z): Direction vector, where vector may not be unit length. Can be normalized to obtain point on unit sphere\n *   7. (Latitude, Longitude): Direction vector, where latitude is in range [-90, 90] and longitude is in range [-180, 180]\n *\n * @ignore\n */\n\n// The maximum level supported within an S2 cell ID. Each level is represented by two bits in the final cell ID\nconst S2_MAX_LEVEL = 30;\n\n// The maximum index of a valid leaf cell plus one.  The range of valid leaf cell indices is [0..S2_LIMIT_IJ-1].\nconst S2_LIMIT_IJ = 1 << S2_MAX_LEVEL;\n\n// The maximum value of an si- or ti-coordinate.  The range of valid (si,ti) values is [0..S2_MAX_SITI].  Use `>>>` to convert to unsigned.\nconst S2_MAX_SITI = (1 << (S2_MAX_LEVEL + 1)) >>> 0;\n\n// The number of bits in a S2 cell ID used for specifying the position along the Hilbert curve\nconst S2_POSITION_BITS = 2 * S2_MAX_LEVEL + 1;\n\n// The number of bits per I and J in the lookup tables\nconst S2_LOOKUP_BITS = 4;\n\n// Lookup table for mapping 10 bits of IJ + orientation to 10 bits of Hilbert curve position + orientation.\nconst S2_LOOKUP_POSITIONS = [];\n\n// Lookup table for mapping 10 bits of IJ + orientation to 10 bits of Hilbert curve position + orientation.\nconst S2_LOOKUP_IJ = [];\n\n// Lookup table of two bits of IJ from two bits of curve position, based also on the current curve orientation from the swap and invert bits\nconst S2_POSITION_TO_IJ = [\n  [0, 1, 3, 2], // 0: Normal order, no swap or invert\n  [0, 2, 3, 1], // 1: Swap bit set, swap I and J bits\n  [3, 2, 0, 1], // 2: Invert bit set, invert bits\n  [3, 1, 0, 2], // 3: Swap and invert bits set\n];\n\n// Mask that specifies the swap orientation bit for the Hilbert curve\nconst S2_SWAP_MASK = 1;\n\n// Mask that specifies the invert orientation bit for the Hilbert curve\nconst S2_INVERT_MASK = 2;\n\n// Lookup for the orientation update mask of one of the four sub-cells within a higher level cell.\n// This mask is XOR'ed with the current orientation to get the sub-cell orientation.\nconst S2_POSITION_TO_ORIENTATION_MASK = [\n  S2_SWAP_MASK,\n  0,\n  0,\n  S2_SWAP_MASK | S2_INVERT_MASK,\n];\n\n/**\n * Represents a cell in the S2 geometry library.\n *\n * @alias S2Cell\n * @constructor\n *\n * @param {BigInt} [cellId] The 64-bit S2CellId.\n * @private\n */\nfunction S2Cell(cellId) {\n  if (!FeatureDetection.supportsBigInt()) {\n    throw new RuntimeError(\"S2 required BigInt support\");\n  }\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(cellId)) {\n    throw new DeveloperError(\"cell ID is required.\");\n  }\n  if (!S2Cell.isValidId(cellId)) {\n    throw new DeveloperError(\"cell ID is invalid.\");\n  }\n  //>>includeEnd('debug');\n\n  this._cellId = cellId;\n  this._level = S2Cell.getLevel(cellId);\n}\n\n/**\n * Creates a new S2Cell from a token. A token is a hexadecimal representation of the 64-bit S2CellId.\n *\n * @param {String} token The token for the S2 Cell.\n * @returns {S2Cell} Returns a new S2Cell.\n * @private\n */\nS2Cell.fromToken = function (token) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"token\", token);\n  if (!S2Cell.isValidToken(token)) {\n    throw new DeveloperError(\"token is invalid.\");\n  }\n  //>>includeEnd('debug');\n\n  return new S2Cell(S2Cell.getIdFromToken(token));\n};\n\n/**\n * Validates an S2 cell ID.\n *\n * @param {BigInt} [cellId] The S2CellId.\n * @returns {Boolean} Returns true if the cell ID is valid, returns false otherwise.\n * @private\n */\nS2Cell.isValidId = function (cellId) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.bigint(\"cellId\", cellId);\n  //>>includeEnd('debug');\n\n  // Check if sentinel bit is missing.\n  if (cellId <= 0) {\n    return false;\n  }\n\n  // Check if face bits indicate a valid value, in range [0-5].\n  // eslint-disable-next-line\n  if (cellId >> BigInt(S2_POSITION_BITS) > 5) {\n    return false;\n  }\n\n  // Check trailing 1 bit is in one of the even bit positions allowed for the 30 levels, using a bitmask.\n  // eslint-disable-next-line no-undef\n  const lowestSetBit = cellId & (~cellId + BigInt(1));\n  // eslint-disable-next-line\n  if (!(lowestSetBit & BigInt(\"0x1555555555555555\"))) {\n    return false;\n  }\n\n  return true;\n};\n\n/**\n * Validates an S2 cell token.\n *\n * @param {String} [token] The hexadecimal representation of an S2CellId.\n * @returns {Boolean} Returns true if the token is valid, returns false otherwise.\n * @private\n */\nS2Cell.isValidToken = function (token) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"token\", token);\n  //>>includeEnd('debug');\n\n  if (!/^[0-9a-fA-F]{1,16}$/.test(token)) {\n    return false;\n  }\n\n  return S2Cell.isValidId(S2Cell.getIdFromToken(token));\n};\n\n/**\n * Converts an S2 cell token to a 64-bit S2 cell ID.\n *\n * @param {String} [token] The hexadecimal representation of an S2CellId. Expected to be a valid S2 token.\n * @returns {BigInt} Returns the S2 cell ID.\n * @private\n */\nS2Cell.getIdFromToken = function (token) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"token\", token);\n  //>>includeEnd('debug');\n\n  return BigInt(\"0x\" + token + \"0\".repeat(16 - token.length)); // eslint-disable-line\n};\n\n/**\n * Converts a 64-bit S2 cell ID to an S2 cell token.\n *\n * @param {BigInt} [cellId] The S2 cell ID.\n * @returns {BigInt} Returns hexadecimal representation of an S2CellId.\n * @private\n */\nS2Cell.getTokenFromId = function (cellId) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.bigint(\"cellId\", cellId);\n  //>>includeEnd('debug');\n\n  const trailingZeroHexChars = Math.floor(countTrailingZeroBits(cellId) / 4);\n  const hexString = cellId.toString(16).replace(/0*$/, \"\");\n\n  const zeroString = Array(17 - trailingZeroHexChars - hexString.length).join(\n    \"0\"\n  );\n  return zeroString + hexString;\n};\n\n/**\n * Gets the level of the cell from the cell ID.\n *\n * @param {BigInt} [cellId] The S2 cell ID.\n * @returns {number} Returns the level of the cell.\n * @private\n */\nS2Cell.getLevel = function (cellId) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.bigint(\"cellId\", cellId);\n  if (!S2Cell.isValidId(cellId)) {\n    throw new DeveloperError();\n  }\n  //>>includeEnd('debug');\n\n  let lsbPosition = 0;\n  // eslint-disable-next-line\n  while (cellId !== BigInt(0)) {\n    // eslint-disable-next-line\n    if (cellId & BigInt(1)) {\n      break;\n    }\n    lsbPosition++;\n    cellId = cellId >> BigInt(1); // eslint-disable-line\n  }\n\n  // We use (>> 1) because there are 2 bits per level.\n  return S2_MAX_LEVEL - (lsbPosition >> 1);\n};\n\n/**\n * Gets the child cell of the cell at the given index.\n *\n * @param {Number} index An integer index of the child.\n * @returns {S2Cell} The child of the S2Cell.\n * @private\n */\nS2Cell.prototype.getChild = function (index) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.number(\"index\", index);\n  if (index < 0 || index > 3) {\n    throw new DeveloperError(\"child index must be in the range [0-3].\");\n  }\n  if (this._level === 30) {\n    throw new DeveloperError(\"cannot get child of leaf cell.\");\n  }\n  //>>includeEnd('debug');\n\n  // Shift sentinel bit 2 positions to the right.\n  // eslint-disable-next-line no-undef\n  const newLsb = lsb(this._cellId) >> BigInt(2);\n  // Insert child index before the sentinel bit.\n  // eslint-disable-next-line no-undef\n  const childCellId = this._cellId + BigInt(2 * index + 1 - 4) * newLsb;\n  return new S2Cell(childCellId);\n};\n\n/**\n * Gets the parent cell of an S2Cell.\n *\n * @returns {S2Cell} Returns the parent of the S2Cell.\n * @private\n */\nS2Cell.prototype.getParent = function () {\n  //>>includeStart('debug', pragmas.debug);\n  if (this._level === 0) {\n    throw new DeveloperError(\"cannot get parent of root cell.\");\n  }\n  //>>includeEnd('debug');\n  // Shift the sentinel bit 2 positions to the left.\n  // eslint-disable-next-line no-undef\n  const newLsb = lsb(this._cellId) << BigInt(2);\n  // Erase the left over bits to the right of the sentinel bit.\n  // eslint-disable-next-line no-undef\n  return new S2Cell((this._cellId & (~newLsb + BigInt(1))) | newLsb);\n};\n\n/**\n * Gets the parent cell at the given level.\n *\n * @returns {S2Cell} Returns the parent of the S2Cell.\n * @private\n */\nS2Cell.prototype.getParentAtLevel = function (level) {\n  //>>includeStart('debug', pragmas.debug);\n  if (this._level === 0 || level < 0 || this._level < level) {\n    throw new DeveloperError(\"cannot get parent at invalid level.\");\n  }\n  //>>includeEnd('debug');\n  const newLsb = lsbForLevel(level);\n  return new S2Cell((this._cellId & -newLsb) | newLsb);\n};\n\n/**\n * Get center of the S2 cell.\n *\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid.\n * @returns {Cartesian} The position of center of the S2 cell.\n * @private\n */\nS2Cell.prototype.getCenter = function (ellipsoid) {\n  ellipsoid = defaultValue(ellipsoid, Ellipsoid.WGS84);\n\n  let center = getS2Center(this._cellId, this._level);\n  // Normalize XYZ.\n  center = Cartesian3.normalize(center, center);\n  const cartographic = new Cartographic.fromCartesian(\n    center,\n    Ellipsoid.UNIT_SPHERE\n  );\n  // Interpret as geodetic coordinates on the ellipsoid.\n  return Cartographic.toCartesian(cartographic, ellipsoid, new Cartesian3());\n};\n\n/**\n * Get vertex of the S2 cell. Vertices are indexed in CCW order.\n *\n * @param {Number} index An integer index of the vertex. Must be in the range [0-3].\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid.\n * @returns {Cartesian} The position of the vertex of the S2 cell.\n * @private\n */\nS2Cell.prototype.getVertex = function (index, ellipsoid) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.number(\"index\", index);\n  if (index < 0 || index > 3) {\n    throw new DeveloperError(\"vertex index must be in the range [0-3].\");\n  }\n  //>>includeEnd('debug');\n\n  ellipsoid = defaultValue(ellipsoid, Ellipsoid.WGS84);\n\n  let vertex = getS2Vertex(this._cellId, this._level, index);\n  // Normalize XYZ.\n  vertex = Cartesian3.normalize(vertex, vertex);\n  const cartographic = new Cartographic.fromCartesian(\n    vertex,\n    Ellipsoid.UNIT_SPHERE\n  );\n  // Interpret as geodetic coordinates on the ellipsoid.\n  return Cartographic.toCartesian(cartographic, ellipsoid, new Cartesian3());\n};\n\n/**\n * Creates an S2Cell from its face, position along the Hilbert curve for a given level.\n *\n * @param {Number} face The root face of S2 this cell is on. Must be in the range [0-5].\n * @param {BigInt} position The position along the Hilbert curve. Must be in the range [0-4**level).\n * @param {Number} level The level of the S2 curve. Must be in the range [0-30].\n * @returns {S2Cell} A new S2Cell from the given parameters.\n * @private\n */\nS2Cell.fromFacePositionLevel = function (face, position, level) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.bigint(\"position\", position);\n  if (face < 0 || face > 5) {\n    throw new DeveloperError(\"Invalid S2 Face (must be within 0-5)\");\n  }\n\n  if (level < 0 || level > S2_MAX_LEVEL) {\n    throw new DeveloperError(\"Invalid level (must be within 0-30)\");\n  }\n  if (position < 0 || position >= Math.pow(4, level)) {\n    throw new DeveloperError(\"Invalid Hilbert position for level\");\n  }\n  //>>includeEnd('debug');\n\n  const faceBitString =\n    (face < 4 ? \"0\" : \"\") + (face < 2 ? \"0\" : \"\") + face.toString(2);\n  const positionBitString = position.toString(2);\n  const positionPrefixPadding = Array(\n    2 * level - positionBitString.length + 1\n  ).join(\"0\");\n  const positionSuffixPadding = Array(S2_POSITION_BITS - 2 * level).join(\"0\");\n\n  // eslint-disable-next-line no-undef\n  const cellId = BigInt(\n    `0b${faceBitString}${positionPrefixPadding}${positionBitString}1${\n      // Adding the sentinel bit that always follows the position bits.\n      positionSuffixPadding\n    }`\n  );\n  return new S2Cell(cellId);\n};\n\n/**\n * @private\n */\nfunction getS2Center(cellId, level) {\n  const faceSiTi = convertCellIdToFaceSiTi(cellId, level);\n  return convertFaceSiTitoXYZ(faceSiTi[0], faceSiTi[1], faceSiTi[2]);\n}\n/**\n * @private\n */\nfunction getS2Vertex(cellId, level, index) {\n  const faceIJ = convertCellIdToFaceIJ(cellId, level);\n  const uv = convertIJLeveltoBoundUV([faceIJ[1], faceIJ[2]], level);\n  // Handles CCW ordering of the vertices.\n  const y = (index >> 1) & 1;\n  return convertFaceUVtoXYZ(faceIJ[0], uv[0][y ^ (index & 1)], uv[1][y]);\n}\n\n// S2 Coordinate Conversions\n\n/**\n * @private\n */\nfunction convertCellIdToFaceSiTi(cellId, level) {\n  const faceIJ = convertCellIdToFaceIJ(cellId);\n  const face = faceIJ[0];\n  const i = faceIJ[1];\n  const j = faceIJ[2];\n\n  // We're resolving the center when we do the coordinate transform here. For the leaf cells, we're adding half the cell size\n  // (remember that this space has 31 levels - which allows us to pick center and edges of the leaf cells). For non leaf cells,\n  // we get one of either two cells diagonal to the cell center. The correction is used to make sure we pick the leaf cell edges\n  // that represent the parent cell center.\n  const isLeaf = level === 30;\n  const shouldCorrect =\n    !isLeaf && (BigInt(i) ^ (cellId >> BigInt(2))) & BigInt(1); // eslint-disable-line\n  const correction = isLeaf ? 1 : shouldCorrect ? 2 : 0;\n  const si = (i << 1) + correction;\n  const ti = (j << 1) + correction;\n  return [face, si, ti];\n}\n\n/**\n * @private\n */\nfunction convertCellIdToFaceIJ(cellId) {\n  if (S2_LOOKUP_POSITIONS.length === 0) {\n    generateLookupTable();\n  }\n\n  // eslint-disable-next-line no-undef\n  const face = Number(cellId >> BigInt(S2_POSITION_BITS));\n  let bits = face & S2_SWAP_MASK;\n  const lookupMask = (1 << S2_LOOKUP_BITS) - 1;\n\n  let i = 0;\n  let j = 0;\n\n  for (let k = 7; k >= 0; k--) {\n    const numberOfBits =\n      k === 7 ? S2_MAX_LEVEL - 7 * S2_LOOKUP_BITS : S2_LOOKUP_BITS;\n    const extractMask = (1 << (2 * numberOfBits)) - 1;\n    bits +=\n      Number(\n        (cellId >> BigInt(k * 2 * S2_LOOKUP_BITS + 1)) & BigInt(extractMask) // eslint-disable-line\n      ) << 2;\n\n    bits = S2_LOOKUP_IJ[bits];\n\n    const offset = k * S2_LOOKUP_BITS;\n    i += (bits >> (S2_LOOKUP_BITS + 2)) << offset;\n    j += ((bits >> 2) & lookupMask) << offset;\n\n    bits &= S2_SWAP_MASK | S2_INVERT_MASK;\n  }\n\n  return [face, i, j];\n}\n\n/**\n * @private\n */\nfunction convertFaceSiTitoXYZ(face, si, ti) {\n  const s = convertSiTitoST(si);\n  const t = convertSiTitoST(ti);\n\n  const u = convertSTtoUV(s);\n  const v = convertSTtoUV(t);\n  return convertFaceUVtoXYZ(face, u, v);\n}\n\n/**\n * @private\n */\nfunction convertFaceUVtoXYZ(face, u, v) {\n  switch (face) {\n    case 0:\n      return new Cartesian3(1, u, v);\n    case 1:\n      return new Cartesian3(-u, 1, v);\n    case 2:\n      return new Cartesian3(-u, -v, 1);\n    case 3:\n      return new Cartesian3(-1, -v, -u);\n    case 4:\n      return new Cartesian3(v, -1, -u);\n    default:\n      return new Cartesian3(v, u, -1);\n  }\n}\n\n/**\n * S2 provides 3 methods for the non-linear transform: linear, quadratic and tangential.\n * This implementation uses the quadratic method because it provides a good balance of\n * accuracy and speed.\n *\n * For a more detailed comparison of these transform methods, see\n * {@link https://github.com/google/s2geometry/blob/0c4c460bdfe696da303641771f9def900b3e440f/src/s2/s2metrics.cc}\n * @private\n */\nfunction convertSTtoUV(s) {\n  if (s >= 0.5) return (1 / 3) * (4 * s * s - 1);\n  return (1 / 3) * (1 - 4 * (1 - s) * (1 - s));\n}\n\n/**\n * @private\n */\nfunction convertSiTitoST(si) {\n  return (1.0 / S2_MAX_SITI) * si;\n}\n\n/**\n * @private\n */\nfunction convertIJLeveltoBoundUV(ij, level) {\n  const result = [[], []];\n  const cellSize = getSizeIJ(level);\n  for (let d = 0; d < 2; ++d) {\n    const ijLow = ij[d] & -cellSize;\n    const ijHigh = ijLow + cellSize;\n    result[d][0] = convertSTtoUV(convertIJtoSTMinimum(ijLow));\n    result[d][1] = convertSTtoUV(convertIJtoSTMinimum(ijHigh));\n  }\n  return result;\n}\n\n/**\n * @private\n */\nfunction getSizeIJ(level) {\n  return (1 << (S2_MAX_LEVEL - level)) >>> 0;\n}\n\n/**\n * @private\n */\nfunction convertIJtoSTMinimum(i) {\n  return (1.0 / S2_LIMIT_IJ) * i;\n}\n\n// Utility Functions\n\n/**\n * This function generates 4 variations of a Hilbert curve of level 4, based on the S2_POSITION_TO_IJ table, for fast lookups of (i, j)\n * to position along Hilbert curve. The reference C++ implementation uses an iterative approach, however, this function is implemented\n * recursively.\n *\n * See {@link https://github.com/google/s2geometry/blob/c59d0ca01ae3976db7f8abdc83fcc871a3a95186/src/s2/s2cell_id.cc#L75-L109}\n * @private\n */\nfunction generateLookupCell(\n  level,\n  i,\n  j,\n  originalOrientation,\n  position,\n  orientation\n) {\n  if (level === S2_LOOKUP_BITS) {\n    const ij = (i << S2_LOOKUP_BITS) + j;\n    S2_LOOKUP_POSITIONS[(ij << 2) + originalOrientation] =\n      (position << 2) + orientation;\n    S2_LOOKUP_IJ[(position << 2) + originalOrientation] =\n      (ij << 2) + orientation;\n  } else {\n    level++;\n    i <<= 1;\n    j <<= 1;\n    position <<= 2;\n    const r = S2_POSITION_TO_IJ[orientation];\n    generateLookupCell(\n      level,\n      i + (r[0] >> 1),\n      j + (r[0] & 1),\n      originalOrientation,\n      position,\n      orientation ^ S2_POSITION_TO_ORIENTATION_MASK[0]\n    );\n    generateLookupCell(\n      level,\n      i + (r[1] >> 1),\n      j + (r[1] & 1),\n      originalOrientation,\n      position + 1,\n      orientation ^ S2_POSITION_TO_ORIENTATION_MASK[1]\n    );\n    generateLookupCell(\n      level,\n      i + (r[2] >> 1),\n      j + (r[2] & 1),\n      originalOrientation,\n      position + 2,\n      orientation ^ S2_POSITION_TO_ORIENTATION_MASK[2]\n    );\n    generateLookupCell(\n      level,\n      i + (r[3] >> 1),\n      j + (r[3] & 1),\n      originalOrientation,\n      position + 3,\n      orientation ^ S2_POSITION_TO_ORIENTATION_MASK[3]\n    );\n  }\n}\n\n/**\n * @private\n */\nfunction generateLookupTable() {\n  generateLookupCell(0, 0, 0, 0, 0, 0);\n  generateLookupCell(0, 0, 0, S2_SWAP_MASK, 0, S2_SWAP_MASK);\n  generateLookupCell(0, 0, 0, S2_INVERT_MASK, 0, S2_INVERT_MASK);\n  generateLookupCell(\n    0,\n    0,\n    0,\n    S2_SWAP_MASK | S2_INVERT_MASK,\n    0,\n    S2_SWAP_MASK | S2_INVERT_MASK\n  );\n}\n\n/**\n * Return the lowest-numbered bit that is on for this cell id\n * @private\n */\nfunction lsb(cellId) {\n  return cellId & (~cellId + BigInt(1)); // eslint-disable-line\n}\n\n/**\n * Return the lowest-numbered bit that is on for cells at the given level.\n * @private\n */\nfunction lsbForLevel(level) {\n  return BigInt(1) << BigInt(2 * (S2_MAX_LEVEL - level)); // eslint-disable-line\n}\n\n// Lookup table for getting trailing zero bits.\n// https://graphics.stanford.edu/~seander/bithacks.html\nconst Mod67BitPosition = [\n  64,\n  0,\n  1,\n  39,\n  2,\n  15,\n  40,\n  23,\n  3,\n  12,\n  16,\n  59,\n  41,\n  19,\n  24,\n  54,\n  4,\n  64,\n  13,\n  10,\n  17,\n  62,\n  60,\n  28,\n  42,\n  30,\n  20,\n  51,\n  25,\n  44,\n  55,\n  47,\n  5,\n  32,\n  65,\n  38,\n  14,\n  22,\n  11,\n  58,\n  18,\n  53,\n  63,\n  9,\n  61,\n  27,\n  29,\n  50,\n  43,\n  46,\n  31,\n  37,\n  21,\n  57,\n  52,\n  8,\n  26,\n  49,\n  45,\n  36,\n  56,\n  7,\n  48,\n  35,\n  6,\n  34,\n  33,\n  0,\n];\n\n/**\n * Return the number of trailing zeros in number.\n * @private\n */\nfunction countTrailingZeroBits(x) {\n  return Mod67BitPosition[(-x & x) % BigInt(67)]; // eslint-disable-line\n}\n\nexport default S2Cell;\n","import AssociativeArray from \"./AssociativeArray.js\";\nimport Cartesian2 from \"./Cartesian2.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport destroyObject from \"./destroyObject.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport FeatureDetection from \"./FeatureDetection.js\";\nimport getTimestamp from \"./getTimestamp.js\";\nimport KeyboardEventModifier from \"./KeyboardEventModifier.js\";\nimport ScreenSpaceEventType from \"./ScreenSpaceEventType.js\";\n\nfunction getPosition(screenSpaceEventHandler, event, result) {\n  const element = screenSpaceEventHandler._element;\n  if (element === document) {\n    result.x = event.clientX;\n    result.y = event.clientY;\n    return result;\n  }\n\n  const rect = element.getBoundingClientRect();\n  result.x = event.clientX - rect.left;\n  result.y = event.clientY - rect.top;\n  return result;\n}\n\nfunction getInputEventKey(type, modifier) {\n  let key = type;\n  if (defined(modifier)) {\n    key += `+${modifier}`;\n  }\n  return key;\n}\n\nfunction getModifier(event) {\n  if (event.shiftKey) {\n    return KeyboardEventModifier.SHIFT;\n  } else if (event.ctrlKey) {\n    return KeyboardEventModifier.CTRL;\n  } else if (event.altKey) {\n    return KeyboardEventModifier.ALT;\n  }\n\n  return undefined;\n}\n\nconst MouseButton = {\n  LEFT: 0,\n  MIDDLE: 1,\n  RIGHT: 2,\n};\n\nfunction registerListener(screenSpaceEventHandler, domType, element, callback) {\n  function listener(e) {\n    callback(screenSpaceEventHandler, e);\n  }\n\n  if (FeatureDetection.isInternetExplorer()) {\n    element.addEventListener(domType, listener, false);\n  } else {\n    element.addEventListener(domType, listener, {\n      capture: false,\n      passive: false,\n    });\n  }\n\n  screenSpaceEventHandler._removalFunctions.push(function () {\n    element.removeEventListener(domType, listener, false);\n  });\n}\n\nfunction registerListeners(screenSpaceEventHandler) {\n  const element = screenSpaceEventHandler._element;\n\n  // some listeners may be registered on the document, so we still get events even after\n  // leaving the bounds of element.\n  // this is affected by the existence of an undocumented disableRootEvents property on element.\n  const alternateElement = !defined(element.disableRootEvents)\n    ? document\n    : element;\n\n  if (FeatureDetection.supportsPointerEvents()) {\n    registerListener(\n      screenSpaceEventHandler,\n      \"pointerdown\",\n      element,\n      handlePointerDown\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"pointerup\",\n      element,\n      handlePointerUp\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"pointermove\",\n      element,\n      handlePointerMove\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"pointercancel\",\n      element,\n      handlePointerUp\n    );\n  } else {\n    registerListener(\n      screenSpaceEventHandler,\n      \"mousedown\",\n      element,\n      handleMouseDown\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"mouseup\",\n      alternateElement,\n      handleMouseUp\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"mousemove\",\n      alternateElement,\n      handleMouseMove\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"touchstart\",\n      element,\n      handleTouchStart\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"touchend\",\n      alternateElement,\n      handleTouchEnd\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"touchmove\",\n      alternateElement,\n      handleTouchMove\n    );\n    registerListener(\n      screenSpaceEventHandler,\n      \"touchcancel\",\n      alternateElement,\n      handleTouchEnd\n    );\n  }\n\n  registerListener(\n    screenSpaceEventHandler,\n    \"dblclick\",\n    element,\n    handleDblClick\n  );\n\n  // detect available wheel event\n  let wheelEvent;\n  if (\"onwheel\" in element) {\n    // spec event type\n    wheelEvent = \"wheel\";\n  } else if (document.onmousewheel !== undefined) {\n    // legacy event type\n    wheelEvent = \"mousewheel\";\n  } else {\n    // older Firefox\n    wheelEvent = \"DOMMouseScroll\";\n  }\n\n  registerListener(screenSpaceEventHandler, wheelEvent, element, handleWheel);\n}\n\nfunction unregisterListeners(screenSpaceEventHandler) {\n  const removalFunctions = screenSpaceEventHandler._removalFunctions;\n  for (let i = 0; i < removalFunctions.length; ++i) {\n    removalFunctions[i]();\n  }\n}\n\nconst mouseDownEvent = {\n  position: new Cartesian2(),\n};\n\nfunction gotTouchEvent(screenSpaceEventHandler) {\n  screenSpaceEventHandler._lastSeenTouchEvent = getTimestamp();\n}\n\nfunction canProcessMouseEvent(screenSpaceEventHandler) {\n  return (\n    getTimestamp() - screenSpaceEventHandler._lastSeenTouchEvent >\n    ScreenSpaceEventHandler.mouseEmulationIgnoreMilliseconds\n  );\n}\n\nfunction checkPixelTolerance(startPosition, endPosition, pixelTolerance) {\n  const xDiff = startPosition.x - endPosition.x;\n  const yDiff = startPosition.y - endPosition.y;\n  const totalPixels = Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n\n  return totalPixels < pixelTolerance;\n}\n\nfunction handleMouseDown(screenSpaceEventHandler, event) {\n  if (!canProcessMouseEvent(screenSpaceEventHandler)) {\n    return;\n  }\n\n  const button = event.button;\n  screenSpaceEventHandler._buttonDown[button] = true;\n\n  let screenSpaceEventType;\n  if (button === MouseButton.LEFT) {\n    screenSpaceEventType = ScreenSpaceEventType.LEFT_DOWN;\n  } else if (button === MouseButton.MIDDLE) {\n    screenSpaceEventType = ScreenSpaceEventType.MIDDLE_DOWN;\n  } else if (button === MouseButton.RIGHT) {\n    screenSpaceEventType = ScreenSpaceEventType.RIGHT_DOWN;\n  } else {\n    return;\n  }\n\n  const position = getPosition(\n    screenSpaceEventHandler,\n    event,\n    screenSpaceEventHandler._primaryPosition\n  );\n  Cartesian2.clone(position, screenSpaceEventHandler._primaryStartPosition);\n  Cartesian2.clone(position, screenSpaceEventHandler._primaryPreviousPosition);\n\n  const modifier = getModifier(event);\n\n  const action = screenSpaceEventHandler.getInputAction(\n    screenSpaceEventType,\n    modifier\n  );\n\n  if (defined(action)) {\n    Cartesian2.clone(position, mouseDownEvent.position);\n\n    action(mouseDownEvent);\n\n    event.preventDefault();\n  }\n}\n\nconst mouseUpEvent = {\n  position: new Cartesian2(),\n};\nconst mouseClickEvent = {\n  position: new Cartesian2(),\n};\n\nfunction cancelMouseEvent(\n  screenSpaceEventHandler,\n  screenSpaceEventType,\n  clickScreenSpaceEventType,\n  event\n) {\n  const modifier = getModifier(event);\n\n  const action = screenSpaceEventHandler.getInputAction(\n    screenSpaceEventType,\n    modifier\n  );\n  const clickAction = screenSpaceEventHandler.getInputAction(\n    clickScreenSpaceEventType,\n    modifier\n  );\n\n  if (defined(action) || defined(clickAction)) {\n    const position = getPosition(\n      screenSpaceEventHandler,\n      event,\n      screenSpaceEventHandler._primaryPosition\n    );\n\n    if (defined(action)) {\n      Cartesian2.clone(position, mouseUpEvent.position);\n\n      action(mouseUpEvent);\n    }\n\n    if (defined(clickAction)) {\n      const startPosition = screenSpaceEventHandler._primaryStartPosition;\n      if (\n        checkPixelTolerance(\n          startPosition,\n          position,\n          screenSpaceEventHandler._clickPixelTolerance\n        )\n      ) {\n        Cartesian2.clone(position, mouseClickEvent.position);\n\n        clickAction(mouseClickEvent);\n      }\n    }\n  }\n}\n\nfunction handleMouseUp(screenSpaceEventHandler, event) {\n  if (!canProcessMouseEvent(screenSpaceEventHandler)) {\n    return;\n  }\n\n  const button = event.button;\n\n  if (\n    button !== MouseButton.LEFT &&\n    button !== MouseButton.MIDDLE &&\n    button !== MouseButton.RIGHT\n  ) {\n    return;\n  }\n\n  if (screenSpaceEventHandler._buttonDown[MouseButton.LEFT]) {\n    cancelMouseEvent(\n      screenSpaceEventHandler,\n      ScreenSpaceEventType.LEFT_UP,\n      ScreenSpaceEventType.LEFT_CLICK,\n      event\n    );\n    screenSpaceEventHandler._buttonDown[MouseButton.LEFT] = false;\n  }\n  if (screenSpaceEventHandler._buttonDown[MouseButton.MIDDLE]) {\n    cancelMouseEvent(\n      screenSpaceEventHandler,\n      ScreenSpaceEventType.MIDDLE_UP,\n      ScreenSpaceEventType.MIDDLE_CLICK,\n      event\n    );\n    screenSpaceEventHandler._buttonDown[MouseButton.MIDDLE] = false;\n  }\n  if (screenSpaceEventHandler._buttonDown[MouseButton.RIGHT]) {\n    cancelMouseEvent(\n      screenSpaceEventHandler,\n      ScreenSpaceEventType.RIGHT_UP,\n      ScreenSpaceEventType.RIGHT_CLICK,\n      event\n    );\n    screenSpaceEventHandler._buttonDown[MouseButton.RIGHT] = false;\n  }\n}\n\nconst mouseMoveEvent = {\n  startPosition: new Cartesian2(),\n  endPosition: new Cartesian2(),\n};\n\nfunction handleMouseMove(screenSpaceEventHandler, event) {\n  if (!canProcessMouseEvent(screenSpaceEventHandler)) {\n    return;\n  }\n\n  const modifier = getModifier(event);\n\n  const position = getPosition(\n    screenSpaceEventHandler,\n    event,\n    screenSpaceEventHandler._primaryPosition\n  );\n  const previousPosition = screenSpaceEventHandler._primaryPreviousPosition;\n\n  const action = screenSpaceEventHandler.getInputAction(\n    ScreenSpaceEventType.MOUSE_MOVE,\n    modifier\n  );\n\n  if (defined(action)) {\n    Cartesian2.clone(previousPosition, mouseMoveEvent.startPosition);\n    Cartesian2.clone(position, mouseMoveEvent.endPosition);\n\n    action(mouseMoveEvent);\n  }\n\n  Cartesian2.clone(position, previousPosition);\n\n  if (\n    screenSpaceEventHandler._buttonDown[MouseButton.LEFT] ||\n    screenSpaceEventHandler._buttonDown[MouseButton.MIDDLE] ||\n    screenSpaceEventHandler._buttonDown[MouseButton.RIGHT]\n  ) {\n    event.preventDefault();\n  }\n}\n\nconst mouseDblClickEvent = {\n  position: new Cartesian2(),\n};\n\nfunction handleDblClick(screenSpaceEventHandler, event) {\n  const button = event.button;\n\n  let screenSpaceEventType;\n  if (button === MouseButton.LEFT) {\n    screenSpaceEventType = ScreenSpaceEventType.LEFT_DOUBLE_CLICK;\n  } else {\n    return;\n  }\n\n  const modifier = getModifier(event);\n\n  const action = screenSpaceEventHandler.getInputAction(\n    screenSpaceEventType,\n    modifier\n  );\n\n  if (defined(action)) {\n    getPosition(screenSpaceEventHandler, event, mouseDblClickEvent.position);\n\n    action(mouseDblClickEvent);\n  }\n}\n\nfunction handleWheel(screenSpaceEventHandler, event) {\n  // currently this event exposes the delta value in terms of\n  // the obsolete mousewheel event type.  so, for now, we adapt the other\n  // values to that scheme.\n  let delta;\n\n  // standard wheel event uses deltaY.  sign is opposite wheelDelta.\n  // deltaMode indicates what unit it is in.\n  if (defined(event.deltaY)) {\n    const deltaMode = event.deltaMode;\n    if (deltaMode === event.DOM_DELTA_PIXEL) {\n      delta = -event.deltaY;\n    } else if (deltaMode === event.DOM_DELTA_LINE) {\n      delta = -event.deltaY * 40;\n    } else {\n      // DOM_DELTA_PAGE\n      delta = -event.deltaY * 120;\n    }\n  } else if (event.detail > 0) {\n    // old Firefox versions use event.detail to count the number of clicks. The sign\n    // of the integer is the direction the wheel is scrolled.\n    delta = event.detail * -120;\n  } else {\n    delta = event.wheelDelta;\n  }\n\n  if (!defined(delta)) {\n    return;\n  }\n\n  const modifier = getModifier(event);\n  const action = screenSpaceEventHandler.getInputAction(\n    ScreenSpaceEventType.WHEEL,\n    modifier\n  );\n\n  if (defined(action)) {\n    action(delta);\n\n    event.preventDefault();\n  }\n}\n\nfunction handleTouchStart(screenSpaceEventHandler, event) {\n  gotTouchEvent(screenSpaceEventHandler);\n\n  const changedTouches = event.changedTouches;\n\n  let i;\n  const length = changedTouches.length;\n  let touch;\n  let identifier;\n  const positions = screenSpaceEventHandler._positions;\n\n  for (i = 0; i < length; ++i) {\n    touch = changedTouches[i];\n    identifier = touch.identifier;\n    positions.set(\n      identifier,\n      getPosition(screenSpaceEventHandler, touch, new Cartesian2())\n    );\n  }\n\n  fireTouchEvents(screenSpaceEventHandler, event);\n\n  const previousPositions = screenSpaceEventHandler._previousPositions;\n\n  for (i = 0; i < length; ++i) {\n    touch = changedTouches[i];\n    identifier = touch.identifier;\n    previousPositions.set(\n      identifier,\n      Cartesian2.clone(positions.get(identifier))\n    );\n  }\n}\n\nfunction handleTouchEnd(screenSpaceEventHandler, event) {\n  gotTouchEvent(screenSpaceEventHandler);\n\n  const changedTouches = event.changedTouches;\n\n  let i;\n  const length = changedTouches.length;\n  let touch;\n  let identifier;\n  const positions = screenSpaceEventHandler._positions;\n\n  for (i = 0; i < length; ++i) {\n    touch = changedTouches[i];\n    identifier = touch.identifier;\n    positions.remove(identifier);\n  }\n\n  fireTouchEvents(screenSpaceEventHandler, event);\n\n  const previousPositions = screenSpaceEventHandler._previousPositions;\n\n  for (i = 0; i < length; ++i) {\n    touch = changedTouches[i];\n    identifier = touch.identifier;\n    previousPositions.remove(identifier);\n  }\n}\n\nconst touchStartEvent = {\n  position: new Cartesian2(),\n};\nconst touch2StartEvent = {\n  position1: new Cartesian2(),\n  position2: new Cartesian2(),\n};\nconst touchEndEvent = {\n  position: new Cartesian2(),\n};\nconst touchClickEvent = {\n  position: new Cartesian2(),\n};\nconst touchHoldEvent = {\n  position: new Cartesian2(),\n};\n\nfunction fireTouchEvents(screenSpaceEventHandler, event) {\n  const modifier = getModifier(event);\n  const positions = screenSpaceEventHandler._positions;\n  const numberOfTouches = positions.length;\n  let action;\n  let clickAction;\n  const pinching = screenSpaceEventHandler._isPinching;\n\n  if (\n    numberOfTouches !== 1 &&\n    screenSpaceEventHandler._buttonDown[MouseButton.LEFT]\n  ) {\n    // transitioning from single touch, trigger UP and might trigger CLICK\n    screenSpaceEventHandler._buttonDown[MouseButton.LEFT] = false;\n\n    if (defined(screenSpaceEventHandler._touchHoldTimer)) {\n      clearTimeout(screenSpaceEventHandler._touchHoldTimer);\n      screenSpaceEventHandler._touchHoldTimer = undefined;\n    }\n\n    action = screenSpaceEventHandler.getInputAction(\n      ScreenSpaceEventType.LEFT_UP,\n      modifier\n    );\n\n    if (defined(action)) {\n      Cartesian2.clone(\n        screenSpaceEventHandler._primaryPosition,\n        touchEndEvent.position\n      );\n\n      action(touchEndEvent);\n    }\n\n    if (numberOfTouches === 0 && !screenSpaceEventHandler._isTouchHolding) {\n      // releasing single touch, check for CLICK\n      clickAction = screenSpaceEventHandler.getInputAction(\n        ScreenSpaceEventType.LEFT_CLICK,\n        modifier\n      );\n\n      if (defined(clickAction)) {\n        const startPosition = screenSpaceEventHandler._primaryStartPosition;\n        const endPosition =\n          screenSpaceEventHandler._previousPositions.values[0];\n        if (\n          checkPixelTolerance(\n            startPosition,\n            endPosition,\n            screenSpaceEventHandler._clickPixelTolerance\n          )\n        ) {\n          Cartesian2.clone(\n            screenSpaceEventHandler._primaryPosition,\n            touchClickEvent.position\n          );\n\n          clickAction(touchClickEvent);\n        }\n      }\n    }\n\n    screenSpaceEventHandler._isTouchHolding = false;\n\n    // Otherwise don't trigger CLICK, because we are adding more touches.\n  }\n\n  if (numberOfTouches === 0 && pinching) {\n    // transitioning from pinch, trigger PINCH_END\n    screenSpaceEventHandler._isPinching = false;\n\n    action = screenSpaceEventHandler.getInputAction(\n      ScreenSpaceEventType.PINCH_END,\n      modifier\n    );\n\n    if (defined(action)) {\n      action();\n    }\n  }\n\n  if (numberOfTouches === 1 && !pinching) {\n    // transitioning to single touch, trigger DOWN\n    const position = positions.values[0];\n    Cartesian2.clone(position, screenSpaceEventHandler._primaryPosition);\n    Cartesian2.clone(position, screenSpaceEventHandler._primaryStartPosition);\n    Cartesian2.clone(\n      position,\n      screenSpaceEventHandler._primaryPreviousPosition\n    );\n\n    screenSpaceEventHandler._buttonDown[MouseButton.LEFT] = true;\n\n    action = screenSpaceEventHandler.getInputAction(\n      ScreenSpaceEventType.LEFT_DOWN,\n      modifier\n    );\n\n    if (defined(action)) {\n      Cartesian2.clone(position, touchStartEvent.position);\n\n      action(touchStartEvent);\n    }\n\n    screenSpaceEventHandler._touchHoldTimer = setTimeout(function () {\n      if (!screenSpaceEventHandler.isDestroyed()) {\n        screenSpaceEventHandler._touchHoldTimer = undefined;\n        screenSpaceEventHandler._isTouchHolding = true;\n\n        clickAction = screenSpaceEventHandler.getInputAction(\n          ScreenSpaceEventType.RIGHT_CLICK,\n          modifier\n        );\n\n        if (defined(clickAction)) {\n          const startPosition = screenSpaceEventHandler._primaryStartPosition;\n          const endPosition =\n            screenSpaceEventHandler._previousPositions.values[0];\n          if (\n            checkPixelTolerance(\n              startPosition,\n              endPosition,\n              screenSpaceEventHandler._holdPixelTolerance\n            )\n          ) {\n            Cartesian2.clone(\n              screenSpaceEventHandler._primaryPosition,\n              touchHoldEvent.position\n            );\n\n            clickAction(touchHoldEvent);\n          }\n        }\n      }\n    }, ScreenSpaceEventHandler.touchHoldDelayMilliseconds);\n\n    event.preventDefault();\n  }\n\n  if (numberOfTouches === 2 && !pinching) {\n    // transitioning to pinch, trigger PINCH_START\n    screenSpaceEventHandler._isPinching = true;\n\n    action = screenSpaceEventHandler.getInputAction(\n      ScreenSpaceEventType.PINCH_START,\n      modifier\n    );\n\n    if (defined(action)) {\n      Cartesian2.clone(positions.values[0], touch2StartEvent.position1);\n      Cartesian2.clone(positions.values[1], touch2StartEvent.position2);\n\n      action(touch2StartEvent);\n\n      // Touch-enabled devices, in particular iOS can have many default behaviours for\n      // \"pinch\" events, which can still be executed unless we prevent them here.\n      event.preventDefault();\n    }\n  }\n}\n\nfunction handleTouchMove(screenSpaceEventHandler, event) {\n  gotTouchEvent(screenSpaceEventHandler);\n\n  const changedTouches = event.changedTouches;\n\n  let i;\n  const length = changedTouches.length;\n  let touch;\n  let identifier;\n  const positions = screenSpaceEventHandler._positions;\n\n  for (i = 0; i < length; ++i) {\n    touch = changedTouches[i];\n    identifier = touch.identifier;\n    const position = positions.get(identifier);\n    if (defined(position)) {\n      getPosition(screenSpaceEventHandler, touch, position);\n    }\n  }\n\n  fireTouchMoveEvents(screenSpaceEventHandler, event);\n\n  const previousPositions = screenSpaceEventHandler._previousPositions;\n\n  for (i = 0; i < length; ++i) {\n    touch = changedTouches[i];\n    identifier = touch.identifier;\n    Cartesian2.clone(\n      positions.get(identifier),\n      previousPositions.get(identifier)\n    );\n  }\n}\n\nconst touchMoveEvent = {\n  startPosition: new Cartesian2(),\n  endPosition: new Cartesian2(),\n};\nconst touchPinchMovementEvent = {\n  distance: {\n    startPosition: new Cartesian2(),\n    endPosition: new Cartesian2(),\n  },\n  angleAndHeight: {\n    startPosition: new Cartesian2(),\n    endPosition: new Cartesian2(),\n  },\n};\n\nfunction fireTouchMoveEvents(screenSpaceEventHandler, event) {\n  const modifier = getModifier(event);\n  const positions = screenSpaceEventHandler._positions;\n  const previousPositions = screenSpaceEventHandler._previousPositions;\n  const numberOfTouches = positions.length;\n  let action;\n\n  if (\n    numberOfTouches === 1 &&\n    screenSpaceEventHandler._buttonDown[MouseButton.LEFT]\n  ) {\n    // moving single touch\n    const position = positions.values[0];\n    Cartesian2.clone(position, screenSpaceEventHandler._primaryPosition);\n\n    const previousPosition = screenSpaceEventHandler._primaryPreviousPosition;\n\n    action = screenSpaceEventHandler.getInputAction(\n      ScreenSpaceEventType.MOUSE_MOVE,\n      modifier\n    );\n\n    if (defined(action)) {\n      Cartesian2.clone(previousPosition, touchMoveEvent.startPosition);\n      Cartesian2.clone(position, touchMoveEvent.endPosition);\n\n      action(touchMoveEvent);\n    }\n\n    Cartesian2.clone(position, previousPosition);\n\n    event.preventDefault();\n  } else if (numberOfTouches === 2 && screenSpaceEventHandler._isPinching) {\n    // moving pinch\n\n    action = screenSpaceEventHandler.getInputAction(\n      ScreenSpaceEventType.PINCH_MOVE,\n      modifier\n    );\n    if (defined(action)) {\n      const position1 = positions.values[0];\n      const position2 = positions.values[1];\n      const previousPosition1 = previousPositions.values[0];\n      const previousPosition2 = previousPositions.values[1];\n\n      const dX = position2.x - position1.x;\n      const dY = position2.y - position1.y;\n      const dist = Math.sqrt(dX * dX + dY * dY) * 0.25;\n\n      const prevDX = previousPosition2.x - previousPosition1.x;\n      const prevDY = previousPosition2.y - previousPosition1.y;\n      const prevDist = Math.sqrt(prevDX * prevDX + prevDY * prevDY) * 0.25;\n\n      const cY = (position2.y + position1.y) * 0.125;\n      const prevCY = (previousPosition2.y + previousPosition1.y) * 0.125;\n      const angle = Math.atan2(dY, dX);\n      const prevAngle = Math.atan2(prevDY, prevDX);\n\n      Cartesian2.fromElements(\n        0.0,\n        prevDist,\n        touchPinchMovementEvent.distance.startPosition\n      );\n      Cartesian2.fromElements(\n        0.0,\n        dist,\n        touchPinchMovementEvent.distance.endPosition\n      );\n\n      Cartesian2.fromElements(\n        prevAngle,\n        prevCY,\n        touchPinchMovementEvent.angleAndHeight.startPosition\n      );\n      Cartesian2.fromElements(\n        angle,\n        cY,\n        touchPinchMovementEvent.angleAndHeight.endPosition\n      );\n\n      action(touchPinchMovementEvent);\n    }\n  }\n}\n\nfunction handlePointerDown(screenSpaceEventHandler, event) {\n  event.target.setPointerCapture(event.pointerId);\n\n  if (event.pointerType === \"touch\") {\n    const positions = screenSpaceEventHandler._positions;\n\n    const identifier = event.pointerId;\n    positions.set(\n      identifier,\n      getPosition(screenSpaceEventHandler, event, new Cartesian2())\n    );\n\n    fireTouchEvents(screenSpaceEventHandler, event);\n\n    const previousPositions = screenSpaceEventHandler._previousPositions;\n    previousPositions.set(\n      identifier,\n      Cartesian2.clone(positions.get(identifier))\n    );\n  } else {\n    handleMouseDown(screenSpaceEventHandler, event);\n  }\n}\n\nfunction handlePointerUp(screenSpaceEventHandler, event) {\n  if (event.pointerType === \"touch\") {\n    const positions = screenSpaceEventHandler._positions;\n\n    const identifier = event.pointerId;\n    positions.remove(identifier);\n\n    fireTouchEvents(screenSpaceEventHandler, event);\n\n    const previousPositions = screenSpaceEventHandler._previousPositions;\n    previousPositions.remove(identifier);\n  } else {\n    handleMouseUp(screenSpaceEventHandler, event);\n  }\n}\n\nfunction handlePointerMove(screenSpaceEventHandler, event) {\n  if (event.pointerType === \"touch\") {\n    const positions = screenSpaceEventHandler._positions;\n\n    const identifier = event.pointerId;\n    const position = positions.get(identifier);\n    if (!defined(position)) {\n      return;\n    }\n\n    getPosition(screenSpaceEventHandler, event, position);\n    fireTouchMoveEvents(screenSpaceEventHandler, event);\n\n    const previousPositions = screenSpaceEventHandler._previousPositions;\n    Cartesian2.clone(\n      positions.get(identifier),\n      previousPositions.get(identifier)\n    );\n  } else {\n    handleMouseMove(screenSpaceEventHandler, event);\n  }\n}\n\n/**\n * @typedef {Object} ScreenSpaceEventHandler.PositionedEvent\n *\n * An Event that occurs at a single position on screen.\n *\n * @property {Cartesian2} position\n */\n\n/**\n * @callback ScreenSpaceEventHandler.PositionedEventCallback\n *\n * The callback invoked when a positioned event triggers an event listener.\n *\n * @param {ScreenSpaceEventHandler.PositionedEvent} event The event which triggered the listener\n */\n\n/**\n * @typedef {Object} ScreenSpaceEventHandler.MotionEvent\n *\n * An Event that starts at one position and ends at another.\n *\n * @property {Cartesian2} startPosition\n * @property {Cartesian2} endPosition\n */\n\n/**\n * @callback ScreenSpaceEventHandler.MotionEventCallback\n *\n * The callback invoked when a motion event triggers an event listener.\n *\n * @param {ScreenSpaceEventHandler.MotionEvent} event The event which triggered the listener\n */\n\n/**\n * @typedef {Object} ScreenSpaceEventHandler.TwoPointEvent\n *\n * An Event that occurs at a two positions on screen.\n *\n * @property {Cartesian2} position1\n * @property {Cartesian2} position2\n */\n\n/**\n * @callback ScreenSpaceEventHandler.TwoPointEventCallback\n *\n * The callback invoked when a two-point event triggers an event listener.\n *\n * @param {ScreenSpaceEventHandler.TwoPointEvent} event The event which triggered the listener\n */\n\n/**\n * @typedef {Object} ScreenSpaceEventHandler.TwoPointMotionEvent\n *\n * An Event that starts at a two positions on screen and moves to two other positions.\n *\n * @property {Cartesian2} position1\n * @property {Cartesian2} position2\n * @property {Cartesian2} previousPosition1\n * @property {Cartesian2} previousPosition2\n */\n\n/**\n * @callback ScreenSpaceEventHandler.TwoPointMotionEventCallback\n *\n * The callback invoked when a two-point motion event triggers an event listener.\n *\n * @param {ScreenSpaceEventHandler.TwoPointMotionEvent} event The event which triggered the listener\n */\n\n/**\n * @callback ScreenSpaceEventHandler.WheelEventCallback\n *\n * The callback invoked when a mouse-wheel event triggers an event listener.\n *\n * @param {number} delta The amount that the mouse wheel moved\n */\n\n/**\n * Handles user input events. Custom functions can be added to be executed on\n * when the user enters input.\n *\n * @alias ScreenSpaceEventHandler\n *\n * @param {HTMLCanvasElement} [element=document] The element to add events to.\n *\n * @constructor\n */\nfunction ScreenSpaceEventHandler(element) {\n  this._inputEvents = {};\n  this._buttonDown = {\n    LEFT: false,\n    MIDDLE: false,\n    RIGHT: false,\n  };\n  this._isPinching = false;\n  this._isTouchHolding = false;\n  this._lastSeenTouchEvent = -ScreenSpaceEventHandler.mouseEmulationIgnoreMilliseconds;\n\n  this._primaryStartPosition = new Cartesian2();\n  this._primaryPosition = new Cartesian2();\n  this._primaryPreviousPosition = new Cartesian2();\n\n  this._positions = new AssociativeArray();\n  this._previousPositions = new AssociativeArray();\n\n  this._removalFunctions = [];\n\n  this._touchHoldTimer = undefined;\n\n  // TODO: Revisit when doing mobile development. May need to be configurable\n  // or determined based on the platform?\n  this._clickPixelTolerance = 5;\n  this._holdPixelTolerance = 25;\n\n  this._element = defaultValue(element, document);\n\n  registerListeners(this);\n}\n\n/**\n * Set a function to be executed on an input event.\n *\n * @param {ScreenSpaceEventHandler.PositionedEventCallback|ScreenSpaceEventHandler.MotionEventCallback|ScreenSpaceEventHandler.WheelEventCallback|ScreenSpaceEventHandler.TwoPointEventCallback|ScreenSpaceEventHandler.TwoPointMotionEventCallback} action Function to be executed when the input event occurs.\n * @param {ScreenSpaceEventType} type The ScreenSpaceEventType of input event.\n * @param {KeyboardEventModifier} [modifier] A KeyboardEventModifier key that is held when a <code>type</code>\n * event occurs.\n *\n * @see ScreenSpaceEventHandler#getInputAction\n * @see ScreenSpaceEventHandler#removeInputAction\n */\nScreenSpaceEventHandler.prototype.setInputAction = function (\n  action,\n  type,\n  modifier\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(action)) {\n    throw new DeveloperError(\"action is required.\");\n  }\n  if (!defined(type)) {\n    throw new DeveloperError(\"type is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const key = getInputEventKey(type, modifier);\n  this._inputEvents[key] = action;\n};\n\n/**\n * Returns the function to be executed on an input event.\n *\n * @param {ScreenSpaceEventType} type The ScreenSpaceEventType of input event.\n * @param {KeyboardEventModifier} [modifier] A KeyboardEventModifier key that is held when a <code>type</code>\n * event occurs.\n *\n * @returns {ScreenSpaceEventHandler.PositionedEventCallback|ScreenSpaceEventHandler.MotionEventCallback|ScreenSpaceEventHandler.WheelEventCallback|ScreenSpaceEventHandler.TwoPointEventCallback|ScreenSpaceEventHandler.TwoPointMotionEventCallback} The function to be executed on an input event.\n *\n * @see ScreenSpaceEventHandler#setInputAction\n * @see ScreenSpaceEventHandler#removeInputAction\n */\nScreenSpaceEventHandler.prototype.getInputAction = function (type, modifier) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(type)) {\n    throw new DeveloperError(\"type is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const key = getInputEventKey(type, modifier);\n  return this._inputEvents[key];\n};\n\n/**\n * Removes the function to be executed on an input event.\n *\n * @param {ScreenSpaceEventType} type The ScreenSpaceEventType of input event.\n * @param {KeyboardEventModifier} [modifier] A KeyboardEventModifier key that is held when a <code>type</code>\n * event occurs.\n *\n * @see ScreenSpaceEventHandler#getInputAction\n * @see ScreenSpaceEventHandler#setInputAction\n */\nScreenSpaceEventHandler.prototype.removeInputAction = function (\n  type,\n  modifier\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(type)) {\n    throw new DeveloperError(\"type is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const key = getInputEventKey(type, modifier);\n  delete this._inputEvents[key];\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.\n *\n * @see ScreenSpaceEventHandler#destroy\n */\nScreenSpaceEventHandler.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Removes listeners held by this object.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,\n * assign the return value (<code>undefined</code>) to the object as done in the example.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n *\n *\n * @example\n * handler = handler && handler.destroy();\n *\n * @see ScreenSpaceEventHandler#isDestroyed\n */\nScreenSpaceEventHandler.prototype.destroy = function () {\n  unregisterListeners(this);\n\n  return destroyObject(this);\n};\n\n/**\n * The amount of time, in milliseconds, that mouse events will be disabled after\n * receiving any touch events, such that any emulated mouse events will be ignored.\n * @type {Number}\n * @default 800\n */\nScreenSpaceEventHandler.mouseEmulationIgnoreMilliseconds = 800;\n\n/**\n * The amount of time, in milliseconds, before a touch on the screen becomes a\n * touch and hold.\n * @type {Number}\n * @default 1500\n */\nScreenSpaceEventHandler.touchHoldDelayMilliseconds = 1500;\nexport default ScreenSpaceEventHandler;\n","/**\n * This enumerated type is for classifying mouse events: down, up, click, double click, move and move while a button is held down.\n *\n * @enum {Number}\n */\nconst ScreenSpaceEventType = {\n  /**\n   * Represents a mouse left button down event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LEFT_DOWN: 0,\n\n  /**\n   * Represents a mouse left button up event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LEFT_UP: 1,\n\n  /**\n   * Represents a mouse left click event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LEFT_CLICK: 2,\n\n  /**\n   * Represents a mouse left double click event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  LEFT_DOUBLE_CLICK: 3,\n\n  /**\n   * Represents a mouse left button down event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  RIGHT_DOWN: 5,\n\n  /**\n   * Represents a mouse right button up event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  RIGHT_UP: 6,\n\n  /**\n   * Represents a mouse right click event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  RIGHT_CLICK: 7,\n\n  /**\n   * Represents a mouse middle button down event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  MIDDLE_DOWN: 10,\n\n  /**\n   * Represents a mouse middle button up event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  MIDDLE_UP: 11,\n\n  /**\n   * Represents a mouse middle click event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  MIDDLE_CLICK: 12,\n\n  /**\n   * Represents a mouse move event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  MOUSE_MOVE: 15,\n\n  /**\n   * Represents a mouse wheel event.\n   *\n   * @type {Number}\n   * @constant\n   */\n  WHEEL: 16,\n\n  /**\n   * Represents the start of a two-finger event on a touch surface.\n   *\n   * @type {Number}\n   * @constant\n   */\n  PINCH_START: 17,\n\n  /**\n   * Represents the end of a two-finger event on a touch surface.\n   *\n   * @type {Number}\n   * @constant\n   */\n  PINCH_END: 18,\n\n  /**\n   * Represents a change of a two-finger event on a touch surface.\n   *\n   * @type {Number}\n   * @constant\n   */\n  PINCH_MOVE: 19,\n};\nexport default Object.freeze(ScreenSpaceEventType);\n","import ComponentDatatype from \"./ComponentDatatype.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Value and type information for per-instance geometry attribute that determines if the geometry instance will be shown.\n *\n * @alias ShowGeometryInstanceAttribute\n * @constructor\n *\n * @param {Boolean} [show=true] Determines if the geometry instance will be shown.\n *\n *\n * @example\n * const instance = new Cesium.GeometryInstance({\n *   geometry : new Cesium.BoxGeometry({\n *     vertexFormat : Cesium.VertexFormat.POSITION_AND_NORMAL,\n *     minimum : new Cesium.Cartesian3(-250000.0, -250000.0, -250000.0),\n *     maximum : new Cesium.Cartesian3(250000.0, 250000.0, 250000.0)\n *   }),\n *   modelMatrix : Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(\n *     Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883)), new Cesium.Cartesian3(0.0, 0.0, 1000000.0), new Cesium.Matrix4()),\n *   id : 'box',\n *   attributes : {\n *     show : new Cesium.ShowGeometryInstanceAttribute(false)\n *   }\n * });\n *\n * @see GeometryInstance\n * @see GeometryInstanceAttribute\n */\nfunction ShowGeometryInstanceAttribute(show) {\n  show = defaultValue(show, true);\n\n  /**\n   * The values for the attributes stored in a typed array.\n   *\n   * @type Uint8Array\n   *\n   * @default [1.0]\n   */\n  this.value = ShowGeometryInstanceAttribute.toValue(show);\n}\n\nObject.defineProperties(ShowGeometryInstanceAttribute.prototype, {\n  /**\n   * The datatype of each component in the attribute, e.g., individual elements in\n   * {@link ColorGeometryInstanceAttribute#value}.\n   *\n   * @memberof ShowGeometryInstanceAttribute.prototype\n   *\n   * @type {ComponentDatatype}\n   * @readonly\n   *\n   * @default {@link ComponentDatatype.UNSIGNED_BYTE}\n   */\n  componentDatatype: {\n    get: function () {\n      return ComponentDatatype.UNSIGNED_BYTE;\n    },\n  },\n\n  /**\n   * The number of components in the attributes, i.e., {@link ColorGeometryInstanceAttribute#value}.\n   *\n   * @memberof ShowGeometryInstanceAttribute.prototype\n   *\n   * @type {Number}\n   * @readonly\n   *\n   * @default 1\n   */\n  componentsPerAttribute: {\n    get: function () {\n      return 1;\n    },\n  },\n\n  /**\n   * When <code>true</code> and <code>componentDatatype</code> is an integer format,\n   * indicate that the components should be mapped to the range [0, 1] (unsigned)\n   * or [-1, 1] (signed) when they are accessed as floating-point for rendering.\n   *\n   * @memberof ShowGeometryInstanceAttribute.prototype\n   *\n   * @type {Boolean}\n   * @readonly\n   *\n   * @default true\n   */\n  normalize: {\n    get: function () {\n      return false;\n    },\n  },\n});\n\n/**\n * Converts a boolean show to a typed array that can be used to assign a show attribute.\n *\n * @param {Boolean} show The show value.\n * @param {Uint8Array} [result] The array to store the result in, if undefined a new instance will be created.\n * @returns {Uint8Array} The modified result parameter or a new instance if result was undefined.\n *\n * @example\n * const attributes = primitive.getGeometryInstanceAttributes('an id');\n * attributes.show = Cesium.ShowGeometryInstanceAttribute.toValue(true, attributes.show);\n */\nShowGeometryInstanceAttribute.toValue = function (show, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(show)) {\n    throw new DeveloperError(\"show is required.\");\n  }\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    return new Uint8Array([show]);\n  }\n  result[0] = show;\n  return result;\n};\nexport default ShowGeometryInstanceAttribute;\n","import Cartesian3 from \"./Cartesian3.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport JulianDate from \"./JulianDate.js\";\nimport CesiumMath from \"./Math.js\";\nimport Matrix3 from \"./Matrix3.js\";\nimport TimeConstants from \"./TimeConstants.js\";\nimport TimeStandard from \"./TimeStandard.js\";\n\n/**\n * Contains functions for finding the Cartesian coordinates of the sun and the moon in the\n * Earth-centered inertial frame.\n *\n * @namespace Simon1994PlanetaryPositions\n */\nconst Simon1994PlanetaryPositions = {};\n\nfunction computeTdbMinusTtSpice(daysSinceJ2000InTerrestrialTime) {\n  /* STK Comments ------------------------------------------------------\n   * This function uses constants designed to be consistent with\n   * the SPICE Toolkit from JPL version N0051 (unitim.c)\n   * M0 = 6.239996\n   * M0Dot = 1.99096871e-7 rad/s = 0.01720197 rad/d\n   * EARTH_ECC = 1.671e-2\n   * TDB_AMPL = 1.657e-3 secs\n   *--------------------------------------------------------------------*/\n\n  //* Values taken as specified in STK Comments except: 0.01720197 rad/day = 1.99096871e-7 rad/sec\n  //* Here we use the more precise value taken from the SPICE value 1.99096871e-7 rad/sec converted to rad/day\n  //* All other constants are consistent with the SPICE implementation of the TDB conversion\n  //* except where we treat the independent time parameter to be in TT instead of TDB.\n  //* This is an approximation made to facilitate performance due to the higher prevalance of\n  //* the TT2TDB conversion over TDB2TT in order to avoid having to iterate when converting to TDB for the JPL ephemeris.\n  //* Days are used instead of seconds to provide a slight improvement in numerical precision.\n\n  //* For more information see:\n  //* http://www.cv.nrao.edu/~rfisher/Ephemerides/times.html#TDB\n  //* ftp://ssd.jpl.nasa.gov/pub/eph/planets/ioms/ExplSupplChap8.pdf\n\n  const g = 6.239996 + 0.0172019696544 * daysSinceJ2000InTerrestrialTime;\n  return 1.657e-3 * Math.sin(g + 1.671e-2 * Math.sin(g));\n}\n\nconst TdtMinusTai = 32.184;\nconst J2000d = 2451545;\nfunction taiToTdb(date, result) {\n  //Converts TAI to TT\n  result = JulianDate.addSeconds(date, TdtMinusTai, result);\n\n  //Converts TT to TDB\n  const days = JulianDate.totalDays(result) - J2000d;\n  result = JulianDate.addSeconds(result, computeTdbMinusTtSpice(days), result);\n\n  return result;\n}\n\nconst epoch = new JulianDate(2451545, 0, TimeStandard.TAI); //Actually TDB (not TAI)\nconst MetersPerKilometer = 1000.0;\nconst RadiansPerDegree = CesiumMath.RADIANS_PER_DEGREE;\nconst RadiansPerArcSecond = CesiumMath.RADIANS_PER_ARCSECOND;\nconst MetersPerAstronomicalUnit = 1.4959787e11; // IAU 1976 value\n\nconst perifocalToEquatorial = new Matrix3();\nfunction elementsToCartesian(\n  semimajorAxis,\n  eccentricity,\n  inclination,\n  longitudeOfPerigee,\n  longitudeOfNode,\n  meanLongitude,\n  result\n) {\n  if (inclination < 0.0) {\n    inclination = -inclination;\n    longitudeOfNode += CesiumMath.PI;\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  if (inclination < 0 || inclination > CesiumMath.PI) {\n    throw new DeveloperError(\n      \"The inclination is out of range. Inclination must be greater than or equal to zero and less than or equal to Pi radians.\"\n    );\n  }\n  //>>includeEnd('debug')\n\n  const radiusOfPeriapsis = semimajorAxis * (1.0 - eccentricity);\n  const argumentOfPeriapsis = longitudeOfPerigee - longitudeOfNode;\n  const rightAscensionOfAscendingNode = longitudeOfNode;\n  const trueAnomaly = meanAnomalyToTrueAnomaly(\n    meanLongitude - longitudeOfPerigee,\n    eccentricity\n  );\n  const type = chooseOrbit(eccentricity, 0.0);\n\n  //>>includeStart('debug', pragmas.debug);\n  if (\n    type === \"Hyperbolic\" &&\n    Math.abs(CesiumMath.negativePiToPi(trueAnomaly)) >=\n      Math.acos(-1.0 / eccentricity)\n  ) {\n    throw new DeveloperError(\n      \"The true anomaly of the hyperbolic orbit lies outside of the bounds of the hyperbola.\"\n    );\n  }\n  //>>includeEnd('debug')\n\n  perifocalToCartesianMatrix(\n    argumentOfPeriapsis,\n    inclination,\n    rightAscensionOfAscendingNode,\n    perifocalToEquatorial\n  );\n  const semilatus = radiusOfPeriapsis * (1.0 + eccentricity);\n  const costheta = Math.cos(trueAnomaly);\n  const sintheta = Math.sin(trueAnomaly);\n\n  const denom = 1.0 + eccentricity * costheta;\n\n  //>>includeStart('debug', pragmas.debug);\n  if (denom <= CesiumMath.Epsilon10) {\n    throw new DeveloperError(\"elements cannot be converted to cartesian\");\n  }\n  //>>includeEnd('debug')\n\n  const radius = semilatus / denom;\n  if (!defined(result)) {\n    result = new Cartesian3(radius * costheta, radius * sintheta, 0.0);\n  } else {\n    result.x = radius * costheta;\n    result.y = radius * sintheta;\n    result.z = 0.0;\n  }\n\n  return Matrix3.multiplyByVector(perifocalToEquatorial, result, result);\n}\n\nfunction chooseOrbit(eccentricity, tolerance) {\n  //>>includeStart('debug', pragmas.debug);\n  if (eccentricity < 0) {\n    throw new DeveloperError(\"eccentricity cannot be negative.\");\n  }\n  //>>includeEnd('debug')\n\n  if (eccentricity <= tolerance) {\n    return \"Circular\";\n  } else if (eccentricity < 1.0 - tolerance) {\n    return \"Elliptical\";\n  } else if (eccentricity <= 1.0 + tolerance) {\n    return \"Parabolic\";\n  }\n  return \"Hyperbolic\";\n}\n\n// Calculates the true anomaly given the mean anomaly and the eccentricity.\nfunction meanAnomalyToTrueAnomaly(meanAnomaly, eccentricity) {\n  //>>includeStart('debug', pragmas.debug);\n  if (eccentricity < 0.0 || eccentricity >= 1.0) {\n    throw new DeveloperError(\"eccentricity out of range.\");\n  }\n  //>>includeEnd('debug')\n\n  const eccentricAnomaly = meanAnomalyToEccentricAnomaly(\n    meanAnomaly,\n    eccentricity\n  );\n  return eccentricAnomalyToTrueAnomaly(eccentricAnomaly, eccentricity);\n}\n\nconst maxIterationCount = 50;\nconst keplerEqConvergence = CesiumMath.EPSILON8;\n// Calculates the eccentric anomaly given the mean anomaly and the eccentricity.\nfunction meanAnomalyToEccentricAnomaly(meanAnomaly, eccentricity) {\n  //>>includeStart('debug', pragmas.debug);\n  if (eccentricity < 0.0 || eccentricity >= 1.0) {\n    throw new DeveloperError(\"eccentricity out of range.\");\n  }\n  //>>includeEnd('debug')\n\n  const revs = Math.floor(meanAnomaly / CesiumMath.TWO_PI);\n\n  // Find angle in current revolution\n  meanAnomaly -= revs * CesiumMath.TWO_PI;\n\n  // calculate starting value for iteration sequence\n  let iterationValue =\n    meanAnomaly +\n    (eccentricity * Math.sin(meanAnomaly)) /\n      (1.0 - Math.sin(meanAnomaly + eccentricity) + Math.sin(meanAnomaly));\n\n  // Perform Newton-Raphson iteration on Kepler's equation\n  let eccentricAnomaly = Number.MAX_VALUE;\n\n  let count;\n  for (\n    count = 0;\n    count < maxIterationCount &&\n    Math.abs(eccentricAnomaly - iterationValue) > keplerEqConvergence;\n    ++count\n  ) {\n    eccentricAnomaly = iterationValue;\n    const NRfunction =\n      eccentricAnomaly -\n      eccentricity * Math.sin(eccentricAnomaly) -\n      meanAnomaly;\n    const dNRfunction = 1 - eccentricity * Math.cos(eccentricAnomaly);\n    iterationValue = eccentricAnomaly - NRfunction / dNRfunction;\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  if (count >= maxIterationCount) {\n    throw new DeveloperError(\"Kepler equation did not converge\");\n    // STK Components uses a numerical method to find the eccentric anomaly in the case that Kepler's\n    // equation does not converge. We don't expect that to ever be necessary for the reasonable orbits used here.\n  }\n  //>>includeEnd('debug')\n\n  eccentricAnomaly = iterationValue + revs * CesiumMath.TWO_PI;\n  return eccentricAnomaly;\n}\n\n// Calculates the true anomaly given the eccentric anomaly and the eccentricity.\nfunction eccentricAnomalyToTrueAnomaly(eccentricAnomaly, eccentricity) {\n  //>>includeStart('debug', pragmas.debug);\n  if (eccentricity < 0.0 || eccentricity >= 1.0) {\n    throw new DeveloperError(\"eccentricity out of range.\");\n  }\n  //>>includeEnd('debug')\n\n  // Calculate the number of previous revolutions\n  const revs = Math.floor(eccentricAnomaly / CesiumMath.TWO_PI);\n\n  // Find angle in current revolution\n  eccentricAnomaly -= revs * CesiumMath.TWO_PI;\n\n  // Calculate true anomaly from eccentric anomaly\n  const trueAnomalyX = Math.cos(eccentricAnomaly) - eccentricity;\n  const trueAnomalyY =\n    Math.sin(eccentricAnomaly) * Math.sqrt(1 - eccentricity * eccentricity);\n\n  let trueAnomaly = Math.atan2(trueAnomalyY, trueAnomalyX);\n\n  // Ensure the correct quadrant\n  trueAnomaly = CesiumMath.zeroToTwoPi(trueAnomaly);\n  if (eccentricAnomaly < 0) {\n    trueAnomaly -= CesiumMath.TWO_PI;\n  }\n\n  // Add on previous revolutions\n  trueAnomaly += revs * CesiumMath.TWO_PI;\n\n  return trueAnomaly;\n}\n\n// Calculates the transformation matrix to convert from the perifocal (PQW) coordinate\n// system to inertial cartesian coordinates.\nfunction perifocalToCartesianMatrix(\n  argumentOfPeriapsis,\n  inclination,\n  rightAscension,\n  result\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (inclination < 0 || inclination > CesiumMath.PI) {\n    throw new DeveloperError(\"inclination out of range\");\n  }\n  //>>includeEnd('debug')\n\n  const cosap = Math.cos(argumentOfPeriapsis);\n  const sinap = Math.sin(argumentOfPeriapsis);\n\n  const cosi = Math.cos(inclination);\n  const sini = Math.sin(inclination);\n\n  const cosraan = Math.cos(rightAscension);\n  const sinraan = Math.sin(rightAscension);\n  if (!defined(result)) {\n    result = new Matrix3(\n      cosraan * cosap - sinraan * sinap * cosi,\n      -cosraan * sinap - sinraan * cosap * cosi,\n      sinraan * sini,\n\n      sinraan * cosap + cosraan * sinap * cosi,\n      -sinraan * sinap + cosraan * cosap * cosi,\n      -cosraan * sini,\n\n      sinap * sini,\n      cosap * sini,\n      cosi\n    );\n  } else {\n    result[0] = cosraan * cosap - sinraan * sinap * cosi;\n    result[1] = sinraan * cosap + cosraan * sinap * cosi;\n    result[2] = sinap * sini;\n    result[3] = -cosraan * sinap - sinraan * cosap * cosi;\n    result[4] = -sinraan * sinap + cosraan * cosap * cosi;\n    result[5] = cosap * sini;\n    result[6] = sinraan * sini;\n    result[7] = -cosraan * sini;\n    result[8] = cosi;\n  }\n  return result;\n}\n\n// From section 5.8\nconst semiMajorAxis0 = 1.0000010178 * MetersPerAstronomicalUnit;\nconst meanLongitude0 = 100.46645683 * RadiansPerDegree;\nconst meanLongitude1 = 1295977422.83429 * RadiansPerArcSecond;\n\n// From table 6\nconst p1u = 16002;\nconst p2u = 21863;\nconst p3u = 32004;\nconst p4u = 10931;\nconst p5u = 14529;\nconst p6u = 16368;\nconst p7u = 15318;\nconst p8u = 32794;\n\nconst Ca1 = 64 * 1e-7 * MetersPerAstronomicalUnit;\nconst Ca2 = -152 * 1e-7 * MetersPerAstronomicalUnit;\nconst Ca3 = 62 * 1e-7 * MetersPerAstronomicalUnit;\nconst Ca4 = -8 * 1e-7 * MetersPerAstronomicalUnit;\nconst Ca5 = 32 * 1e-7 * MetersPerAstronomicalUnit;\nconst Ca6 = -41 * 1e-7 * MetersPerAstronomicalUnit;\nconst Ca7 = 19 * 1e-7 * MetersPerAstronomicalUnit;\nconst Ca8 = -11 * 1e-7 * MetersPerAstronomicalUnit;\n\nconst Sa1 = -150 * 1e-7 * MetersPerAstronomicalUnit;\nconst Sa2 = -46 * 1e-7 * MetersPerAstronomicalUnit;\nconst Sa3 = 68 * 1e-7 * MetersPerAstronomicalUnit;\nconst Sa4 = 54 * 1e-7 * MetersPerAstronomicalUnit;\nconst Sa5 = 14 * 1e-7 * MetersPerAstronomicalUnit;\nconst Sa6 = 24 * 1e-7 * MetersPerAstronomicalUnit;\nconst Sa7 = -28 * 1e-7 * MetersPerAstronomicalUnit;\nconst Sa8 = 22 * 1e-7 * MetersPerAstronomicalUnit;\n\nconst q1u = 10;\nconst q2u = 16002;\nconst q3u = 21863;\nconst q4u = 10931;\nconst q5u = 1473;\nconst q6u = 32004;\nconst q7u = 4387;\nconst q8u = 73;\n\nconst Cl1 = -325 * 1e-7;\nconst Cl2 = -322 * 1e-7;\nconst Cl3 = -79 * 1e-7;\nconst Cl4 = 232 * 1e-7;\nconst Cl5 = -52 * 1e-7;\nconst Cl6 = 97 * 1e-7;\nconst Cl7 = 55 * 1e-7;\nconst Cl8 = -41 * 1e-7;\n\nconst Sl1 = -105 * 1e-7;\nconst Sl2 = -137 * 1e-7;\nconst Sl3 = 258 * 1e-7;\nconst Sl4 = 35 * 1e-7;\nconst Sl5 = -116 * 1e-7;\nconst Sl6 = -88 * 1e-7;\nconst Sl7 = -112 * 1e-7;\nconst Sl8 = -80 * 1e-7;\n\nconst scratchDate = new JulianDate(0, 0.0, TimeStandard.TAI);\n// Gets a point describing the motion of the Earth-Moon barycenter according to the equations described in section 6.\nfunction computeSimonEarthMoonBarycenter(date, result) {\n  // t is thousands of years from J2000 TDB\n  taiToTdb(date, scratchDate);\n  const x =\n    scratchDate.dayNumber -\n    epoch.dayNumber +\n    (scratchDate.secondsOfDay - epoch.secondsOfDay) /\n      TimeConstants.SECONDS_PER_DAY;\n  const t = x / (TimeConstants.DAYS_PER_JULIAN_CENTURY * 10.0);\n\n  const u = 0.3595362 * t;\n  const semimajorAxis =\n    semiMajorAxis0 +\n    Ca1 * Math.cos(p1u * u) +\n    Sa1 * Math.sin(p1u * u) +\n    Ca2 * Math.cos(p2u * u) +\n    Sa2 * Math.sin(p2u * u) +\n    Ca3 * Math.cos(p3u * u) +\n    Sa3 * Math.sin(p3u * u) +\n    Ca4 * Math.cos(p4u * u) +\n    Sa4 * Math.sin(p4u * u) +\n    Ca5 * Math.cos(p5u * u) +\n    Sa5 * Math.sin(p5u * u) +\n    Ca6 * Math.cos(p6u * u) +\n    Sa6 * Math.sin(p6u * u) +\n    Ca7 * Math.cos(p7u * u) +\n    Sa7 * Math.sin(p7u * u) +\n    Ca8 * Math.cos(p8u * u) +\n    Sa8 * Math.sin(p8u * u);\n  const meanLongitude =\n    meanLongitude0 +\n    meanLongitude1 * t +\n    Cl1 * Math.cos(q1u * u) +\n    Sl1 * Math.sin(q1u * u) +\n    Cl2 * Math.cos(q2u * u) +\n    Sl2 * Math.sin(q2u * u) +\n    Cl3 * Math.cos(q3u * u) +\n    Sl3 * Math.sin(q3u * u) +\n    Cl4 * Math.cos(q4u * u) +\n    Sl4 * Math.sin(q4u * u) +\n    Cl5 * Math.cos(q5u * u) +\n    Sl5 * Math.sin(q5u * u) +\n    Cl6 * Math.cos(q6u * u) +\n    Sl6 * Math.sin(q6u * u) +\n    Cl7 * Math.cos(q7u * u) +\n    Sl7 * Math.sin(q7u * u) +\n    Cl8 * Math.cos(q8u * u) +\n    Sl8 * Math.sin(q8u * u);\n\n  // All constants in this part are from section 5.8\n  const eccentricity = 0.0167086342 - 0.0004203654 * t;\n  const longitudeOfPerigee =\n    102.93734808 * RadiansPerDegree + 11612.3529 * RadiansPerArcSecond * t;\n  const inclination = 469.97289 * RadiansPerArcSecond * t;\n  const longitudeOfNode =\n    174.87317577 * RadiansPerDegree - 8679.27034 * RadiansPerArcSecond * t;\n\n  return elementsToCartesian(\n    semimajorAxis,\n    eccentricity,\n    inclination,\n    longitudeOfPerigee,\n    longitudeOfNode,\n    meanLongitude,\n    result\n  );\n}\n\n// Gets a point describing the position of the moon according to the equations described in section 4.\nfunction computeSimonMoon(date, result) {\n  taiToTdb(date, scratchDate);\n  const x =\n    scratchDate.dayNumber -\n    epoch.dayNumber +\n    (scratchDate.secondsOfDay - epoch.secondsOfDay) /\n      TimeConstants.SECONDS_PER_DAY;\n  const t = x / TimeConstants.DAYS_PER_JULIAN_CENTURY;\n  const t2 = t * t;\n  const t3 = t2 * t;\n  const t4 = t3 * t;\n\n  // Terms from section 3.4 (b.1)\n  let semimajorAxis = 383397.7725 + 0.004 * t;\n  let eccentricity = 0.055545526 - 0.000000016 * t;\n  const inclinationConstant = 5.15668983 * RadiansPerDegree;\n  let inclinationSecPart =\n    -0.00008 * t + 0.02966 * t2 - 0.000042 * t3 - 0.00000013 * t4;\n  const longitudeOfPerigeeConstant = 83.35324312 * RadiansPerDegree;\n  let longitudeOfPerigeeSecPart =\n    14643420.2669 * t - 38.2702 * t2 - 0.045047 * t3 + 0.00021301 * t4;\n  const longitudeOfNodeConstant = 125.04455501 * RadiansPerDegree;\n  let longitudeOfNodeSecPart =\n    -6967919.3631 * t + 6.3602 * t2 + 0.007625 * t3 - 0.00003586 * t4;\n  const meanLongitudeConstant = 218.31664563 * RadiansPerDegree;\n  let meanLongitudeSecPart =\n    1732559343.4847 * t - 6.391 * t2 + 0.006588 * t3 - 0.00003169 * t4;\n\n  // Delaunay arguments from section 3.5 b\n  const D =\n    297.85019547 * RadiansPerDegree +\n    RadiansPerArcSecond *\n      (1602961601.209 * t - 6.3706 * t2 + 0.006593 * t3 - 0.00003169 * t4);\n  const F =\n    93.27209062 * RadiansPerDegree +\n    RadiansPerArcSecond *\n      (1739527262.8478 * t - 12.7512 * t2 - 0.001037 * t3 + 0.00000417 * t4);\n  const l =\n    134.96340251 * RadiansPerDegree +\n    RadiansPerArcSecond *\n      (1717915923.2178 * t + 31.8792 * t2 + 0.051635 * t3 - 0.0002447 * t4);\n  const lprime =\n    357.52910918 * RadiansPerDegree +\n    RadiansPerArcSecond *\n      (129596581.0481 * t - 0.5532 * t2 + 0.000136 * t3 - 0.00001149 * t4);\n  const psi =\n    310.17137918 * RadiansPerDegree -\n    RadiansPerArcSecond *\n      (6967051.436 * t + 6.2068 * t2 + 0.007618 * t3 - 0.00003219 * t4);\n\n  // Add terms from Table 4\n  const twoD = 2.0 * D;\n  const fourD = 4.0 * D;\n  const sixD = 6.0 * D;\n  const twol = 2.0 * l;\n  const threel = 3.0 * l;\n  const fourl = 4.0 * l;\n  const twoF = 2.0 * F;\n  semimajorAxis +=\n    3400.4 * Math.cos(twoD) -\n    635.6 * Math.cos(twoD - l) -\n    235.6 * Math.cos(l) +\n    218.1 * Math.cos(twoD - lprime) +\n    181.0 * Math.cos(twoD + l);\n  eccentricity +=\n    0.014216 * Math.cos(twoD - l) +\n    0.008551 * Math.cos(twoD - twol) -\n    0.001383 * Math.cos(l) +\n    0.001356 * Math.cos(twoD + l) -\n    0.001147 * Math.cos(fourD - threel) -\n    0.000914 * Math.cos(fourD - twol) +\n    0.000869 * Math.cos(twoD - lprime - l) -\n    0.000627 * Math.cos(twoD) -\n    0.000394 * Math.cos(fourD - fourl) +\n    0.000282 * Math.cos(twoD - lprime - twol) -\n    0.000279 * Math.cos(D - l) -\n    0.000236 * Math.cos(twol) +\n    0.000231 * Math.cos(fourD) +\n    0.000229 * Math.cos(sixD - fourl) -\n    0.000201 * Math.cos(twol - twoF);\n  inclinationSecPart +=\n    486.26 * Math.cos(twoD - twoF) -\n    40.13 * Math.cos(twoD) +\n    37.51 * Math.cos(twoF) +\n    25.73 * Math.cos(twol - twoF) +\n    19.97 * Math.cos(twoD - lprime - twoF);\n  longitudeOfPerigeeSecPart +=\n    -55609 * Math.sin(twoD - l) -\n    34711 * Math.sin(twoD - twol) -\n    9792 * Math.sin(l) +\n    9385 * Math.sin(fourD - threel) +\n    7505 * Math.sin(fourD - twol) +\n    5318 * Math.sin(twoD + l) +\n    3484 * Math.sin(fourD - fourl) -\n    3417 * Math.sin(twoD - lprime - l) -\n    2530 * Math.sin(sixD - fourl) -\n    2376 * Math.sin(twoD) -\n    2075 * Math.sin(twoD - threel) -\n    1883 * Math.sin(twol) -\n    1736 * Math.sin(sixD - 5.0 * l) +\n    1626 * Math.sin(lprime) -\n    1370 * Math.sin(sixD - threel);\n  longitudeOfNodeSecPart +=\n    -5392 * Math.sin(twoD - twoF) -\n    540 * Math.sin(lprime) -\n    441 * Math.sin(twoD) +\n    423 * Math.sin(twoF) -\n    288 * Math.sin(twol - twoF);\n  meanLongitudeSecPart +=\n    -3332.9 * Math.sin(twoD) +\n    1197.4 * Math.sin(twoD - l) -\n    662.5 * Math.sin(lprime) +\n    396.3 * Math.sin(l) -\n    218.0 * Math.sin(twoD - lprime);\n\n  // Add terms from Table 5\n  const twoPsi = 2.0 * psi;\n  const threePsi = 3.0 * psi;\n  inclinationSecPart +=\n    46.997 * Math.cos(psi) * t -\n    0.614 * Math.cos(twoD - twoF + psi) * t +\n    0.614 * Math.cos(twoD - twoF - psi) * t -\n    0.0297 * Math.cos(twoPsi) * t2 -\n    0.0335 * Math.cos(psi) * t2 +\n    0.0012 * Math.cos(twoD - twoF + twoPsi) * t2 -\n    0.00016 * Math.cos(psi) * t3 +\n    0.00004 * Math.cos(threePsi) * t3 +\n    0.00004 * Math.cos(twoPsi) * t3;\n  const perigeeAndMean =\n    2.116 * Math.sin(psi) * t -\n    0.111 * Math.sin(twoD - twoF - psi) * t -\n    0.0015 * Math.sin(psi) * t2;\n  longitudeOfPerigeeSecPart += perigeeAndMean;\n  meanLongitudeSecPart += perigeeAndMean;\n  longitudeOfNodeSecPart +=\n    -520.77 * Math.sin(psi) * t +\n    13.66 * Math.sin(twoD - twoF + psi) * t +\n    1.12 * Math.sin(twoD - psi) * t -\n    1.06 * Math.sin(twoF - psi) * t +\n    0.66 * Math.sin(twoPsi) * t2 +\n    0.371 * Math.sin(psi) * t2 -\n    0.035 * Math.sin(twoD - twoF + twoPsi) * t2 -\n    0.015 * Math.sin(twoD - twoF + psi) * t2 +\n    0.0014 * Math.sin(psi) * t3 -\n    0.0011 * Math.sin(threePsi) * t3 -\n    0.0009 * Math.sin(twoPsi) * t3;\n\n  // Add constants and convert units\n  semimajorAxis *= MetersPerKilometer;\n  const inclination =\n    inclinationConstant + inclinationSecPart * RadiansPerArcSecond;\n  const longitudeOfPerigee =\n    longitudeOfPerigeeConstant +\n    longitudeOfPerigeeSecPart * RadiansPerArcSecond;\n  const meanLongitude =\n    meanLongitudeConstant + meanLongitudeSecPart * RadiansPerArcSecond;\n  const longitudeOfNode =\n    longitudeOfNodeConstant + longitudeOfNodeSecPart * RadiansPerArcSecond;\n\n  return elementsToCartesian(\n    semimajorAxis,\n    eccentricity,\n    inclination,\n    longitudeOfPerigee,\n    longitudeOfNode,\n    meanLongitude,\n    result\n  );\n}\n\n// Gets a point describing the motion of the Earth.  This point uses the Moon point and\n// the 1992 mu value (ratio between Moon and Earth masses) in Table 2 of the paper in order\n// to determine the position of the Earth relative to the Earth-Moon barycenter.\nconst moonEarthMassRatio = 0.012300034; // From 1992 mu value in Table 2\nconst factor = (moonEarthMassRatio / (moonEarthMassRatio + 1.0)) * -1;\nfunction computeSimonEarth(date, result) {\n  result = computeSimonMoon(date, result);\n  return Cartesian3.multiplyByScalar(result, factor, result);\n}\n\n// Values for the <code>axesTransformation</code> needed for the rotation were found using the STK Components\n// GreographicTransformer on the position of the sun center of mass point and the earth J2000 frame.\n\nconst axesTransformation = new Matrix3(\n  1.0000000000000002,\n  5.619723173785822e-16,\n  4.690511510146299e-19,\n  -5.154129427414611e-16,\n  0.9174820620691819,\n  -0.39777715593191376,\n  -2.23970096136568e-16,\n  0.39777715593191376,\n  0.9174820620691819\n);\nlet translation = new Cartesian3();\n/**\n * Computes the position of the Sun in the Earth-centered inertial frame\n *\n * @param {JulianDate} [julianDate] The time at which to compute the Sun's position, if not provided the current system time is used.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3} Calculated sun position\n */\nSimon1994PlanetaryPositions.computeSunPositionInEarthInertialFrame = function (\n  julianDate,\n  result\n) {\n  if (!defined(julianDate)) {\n    julianDate = JulianDate.now();\n  }\n\n  if (!defined(result)) {\n    result = new Cartesian3();\n  }\n\n  //first forward transformation\n  translation = computeSimonEarthMoonBarycenter(julianDate, translation);\n  result = Cartesian3.negate(translation, result);\n\n  //second forward transformation\n  computeSimonEarth(julianDate, translation);\n\n  Cartesian3.subtract(result, translation, result);\n  Matrix3.multiplyByVector(axesTransformation, result, result);\n\n  return result;\n};\n\n/**\n * Computes the position of the Moon in the Earth-centered inertial frame\n *\n * @param {JulianDate} [julianDate] The time at which to compute the Sun's position, if not provided the current system time is used.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3} Calculated moon position\n */\nSimon1994PlanetaryPositions.computeMoonPositionInEarthInertialFrame = function (\n  julianDate,\n  result\n) {\n  if (!defined(julianDate)) {\n    julianDate = JulianDate.now();\n  }\n\n  result = computeSimonMoon(julianDate, result);\n  Matrix3.multiplyByVector(axesTransformation, result, result);\n\n  return result;\n};\nexport default Simon1994PlanetaryPositions;\n","import ArcType from \"./ArcType.js\";\nimport BoundingSphere from \"./BoundingSphere.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport Color from \"./Color.js\";\nimport ComponentDatatype from \"./ComponentDatatype.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport Geometry from \"./Geometry.js\";\nimport GeometryAttribute from \"./GeometryAttribute.js\";\nimport GeometryAttributes from \"./GeometryAttributes.js\";\nimport IndexDatatype from \"./IndexDatatype.js\";\nimport CesiumMath from \"./Math.js\";\nimport PolylinePipeline from \"./PolylinePipeline.js\";\nimport PrimitiveType from \"./PrimitiveType.js\";\n\nfunction interpolateColors(p0, p1, color0, color1, minDistance, array, offset) {\n  const numPoints = PolylinePipeline.numberOfPoints(p0, p1, minDistance);\n  let i;\n\n  const r0 = color0.red;\n  const g0 = color0.green;\n  const b0 = color0.blue;\n  const a0 = color0.alpha;\n\n  const r1 = color1.red;\n  const g1 = color1.green;\n  const b1 = color1.blue;\n  const a1 = color1.alpha;\n\n  if (Color.equals(color0, color1)) {\n    for (i = 0; i < numPoints; i++) {\n      array[offset++] = Color.floatToByte(r0);\n      array[offset++] = Color.floatToByte(g0);\n      array[offset++] = Color.floatToByte(b0);\n      array[offset++] = Color.floatToByte(a0);\n    }\n    return offset;\n  }\n\n  const redPerVertex = (r1 - r0) / numPoints;\n  const greenPerVertex = (g1 - g0) / numPoints;\n  const bluePerVertex = (b1 - b0) / numPoints;\n  const alphaPerVertex = (a1 - a0) / numPoints;\n\n  let index = offset;\n  for (i = 0; i < numPoints; i++) {\n    array[index++] = Color.floatToByte(r0 + i * redPerVertex);\n    array[index++] = Color.floatToByte(g0 + i * greenPerVertex);\n    array[index++] = Color.floatToByte(b0 + i * bluePerVertex);\n    array[index++] = Color.floatToByte(a0 + i * alphaPerVertex);\n  }\n\n  return index;\n}\n\n/**\n * A description of a polyline modeled as a line strip; the first two positions define a line segment,\n * and each additional position defines a line segment from the previous position.\n *\n * @alias SimplePolylineGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions An array of {@link Cartesian3} defining the positions in the polyline as a line strip.\n * @param {Color[]} [options.colors] An Array of {@link Color} defining the per vertex or per segment colors.\n * @param {Boolean} [options.colorsPerVertex=false] A boolean that determines whether the colors will be flat across each segment of the line or interpolated across the vertices.\n * @param {ArcType} [options.arcType=ArcType.GEODESIC] The type of line the polyline segments must follow.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude if options.arcType is not ArcType.NONE. Determines the number of positions in the buffer.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid to be used as a reference.\n *\n * @exception {DeveloperError} At least two positions are required.\n * @exception {DeveloperError} colors has an invalid length.\n *\n * @see SimplePolylineGeometry#createGeometry\n *\n * @example\n * // A polyline with two connected line segments\n * const polyline = new Cesium.SimplePolylineGeometry({\n *   positions : Cesium.Cartesian3.fromDegreesArray([\n *     0.0, 0.0,\n *     5.0, 0.0,\n *     5.0, 5.0\n *   ])\n * });\n * const geometry = Cesium.SimplePolylineGeometry.createGeometry(polyline);\n */\nfunction SimplePolylineGeometry(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const positions = options.positions;\n  const colors = options.colors;\n  const colorsPerVertex = defaultValue(options.colorsPerVertex, false);\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(positions) || positions.length < 2) {\n    throw new DeveloperError(\"At least two positions are required.\");\n  }\n  if (\n    defined(colors) &&\n    ((colorsPerVertex && colors.length < positions.length) ||\n      (!colorsPerVertex && colors.length < positions.length - 1))\n  ) {\n    throw new DeveloperError(\"colors has an invalid length.\");\n  }\n  //>>includeEnd('debug');\n\n  this._positions = positions;\n  this._colors = colors;\n  this._colorsPerVertex = colorsPerVertex;\n\n  this._arcType = defaultValue(options.arcType, ArcType.GEODESIC);\n  this._granularity = defaultValue(\n    options.granularity,\n    CesiumMath.RADIANS_PER_DEGREE\n  );\n  this._ellipsoid = defaultValue(options.ellipsoid, Ellipsoid.WGS84);\n  this._workerName = \"createSimplePolylineGeometry\";\n\n  let numComponents = 1 + positions.length * Cartesian3.packedLength;\n  numComponents += defined(colors) ? 1 + colors.length * Color.packedLength : 1;\n\n  /**\n   * The number of elements used to pack the object into an array.\n   * @type {Number}\n   */\n  this.packedLength = numComponents + Ellipsoid.packedLength + 3;\n}\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {SimplePolylineGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nSimplePolylineGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(value)) {\n    throw new DeveloperError(\"value is required\");\n  }\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  let i;\n\n  const positions = value._positions;\n  let length = positions.length;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += Cartesian3.packedLength) {\n    Cartesian3.pack(positions[i], array, startingIndex);\n  }\n\n  const colors = value._colors;\n  length = defined(colors) ? colors.length : 0.0;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += Color.packedLength) {\n    Color.pack(colors[i], array, startingIndex);\n  }\n\n  Ellipsoid.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += Ellipsoid.packedLength;\n\n  array[startingIndex++] = value._colorsPerVertex ? 1.0 : 0.0;\n  array[startingIndex++] = value._arcType;\n  array[startingIndex] = value._granularity;\n\n  return array;\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {SimplePolylineGeometry} [result] The object into which to store the result.\n * @returns {SimplePolylineGeometry} The modified result parameter or a new SimplePolylineGeometry instance if one was not provided.\n */\nSimplePolylineGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  let i;\n\n  let length = array[startingIndex++];\n  const positions = new Array(length);\n\n  for (i = 0; i < length; ++i, startingIndex += Cartesian3.packedLength) {\n    positions[i] = Cartesian3.unpack(array, startingIndex);\n  }\n\n  length = array[startingIndex++];\n  const colors = length > 0 ? new Array(length) : undefined;\n\n  for (i = 0; i < length; ++i, startingIndex += Color.packedLength) {\n    colors[i] = Color.unpack(array, startingIndex);\n  }\n\n  const ellipsoid = Ellipsoid.unpack(array, startingIndex);\n  startingIndex += Ellipsoid.packedLength;\n\n  const colorsPerVertex = array[startingIndex++] === 1.0;\n  const arcType = array[startingIndex++];\n  const granularity = array[startingIndex];\n\n  if (!defined(result)) {\n    return new SimplePolylineGeometry({\n      positions: positions,\n      colors: colors,\n      ellipsoid: ellipsoid,\n      colorsPerVertex: colorsPerVertex,\n      arcType: arcType,\n      granularity: granularity,\n    });\n  }\n\n  result._positions = positions;\n  result._colors = colors;\n  result._ellipsoid = ellipsoid;\n  result._colorsPerVertex = colorsPerVertex;\n  result._arcType = arcType;\n  result._granularity = granularity;\n\n  return result;\n};\n\nconst scratchArray1 = new Array(2);\nconst scratchArray2 = new Array(2);\nconst generateArcOptionsScratch = {\n  positions: scratchArray1,\n  height: scratchArray2,\n  ellipsoid: undefined,\n  minDistance: undefined,\n  granularity: undefined,\n};\n\n/**\n * Computes the geometric representation of a simple polyline, including its vertices, indices, and a bounding sphere.\n *\n * @param {SimplePolylineGeometry} simplePolylineGeometry A description of the polyline.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nSimplePolylineGeometry.createGeometry = function (simplePolylineGeometry) {\n  const positions = simplePolylineGeometry._positions;\n  const colors = simplePolylineGeometry._colors;\n  const colorsPerVertex = simplePolylineGeometry._colorsPerVertex;\n  const arcType = simplePolylineGeometry._arcType;\n  const granularity = simplePolylineGeometry._granularity;\n  const ellipsoid = simplePolylineGeometry._ellipsoid;\n\n  const minDistance = CesiumMath.chordLength(\n    granularity,\n    ellipsoid.maximumRadius\n  );\n  const perSegmentColors = defined(colors) && !colorsPerVertex;\n\n  let i;\n  const length = positions.length;\n\n  let positionValues;\n  let numberOfPositions;\n  let colorValues;\n  let color;\n  let offset = 0;\n\n  if (arcType === ArcType.GEODESIC || arcType === ArcType.RHUMB) {\n    let subdivisionSize;\n    let numberOfPointsFunction;\n    let generateArcFunction;\n    if (arcType === ArcType.GEODESIC) {\n      subdivisionSize = CesiumMath.chordLength(\n        granularity,\n        ellipsoid.maximumRadius\n      );\n      numberOfPointsFunction = PolylinePipeline.numberOfPoints;\n      generateArcFunction = PolylinePipeline.generateArc;\n    } else {\n      subdivisionSize = granularity;\n      numberOfPointsFunction = PolylinePipeline.numberOfPointsRhumbLine;\n      generateArcFunction = PolylinePipeline.generateRhumbArc;\n    }\n\n    const heights = PolylinePipeline.extractHeights(positions, ellipsoid);\n\n    const generateArcOptions = generateArcOptionsScratch;\n    if (arcType === ArcType.GEODESIC) {\n      generateArcOptions.minDistance = minDistance;\n    } else {\n      generateArcOptions.granularity = granularity;\n    }\n    generateArcOptions.ellipsoid = ellipsoid;\n\n    if (perSegmentColors) {\n      let positionCount = 0;\n      for (i = 0; i < length - 1; i++) {\n        positionCount +=\n          numberOfPointsFunction(\n            positions[i],\n            positions[i + 1],\n            subdivisionSize\n          ) + 1;\n      }\n\n      positionValues = new Float64Array(positionCount * 3);\n      colorValues = new Uint8Array(positionCount * 4);\n\n      generateArcOptions.positions = scratchArray1;\n      generateArcOptions.height = scratchArray2;\n\n      let ci = 0;\n      for (i = 0; i < length - 1; ++i) {\n        scratchArray1[0] = positions[i];\n        scratchArray1[1] = positions[i + 1];\n\n        scratchArray2[0] = heights[i];\n        scratchArray2[1] = heights[i + 1];\n\n        const pos = generateArcFunction(generateArcOptions);\n\n        if (defined(colors)) {\n          const segLen = pos.length / 3;\n          color = colors[i];\n          for (let k = 0; k < segLen; ++k) {\n            colorValues[ci++] = Color.floatToByte(color.red);\n            colorValues[ci++] = Color.floatToByte(color.green);\n            colorValues[ci++] = Color.floatToByte(color.blue);\n            colorValues[ci++] = Color.floatToByte(color.alpha);\n          }\n        }\n\n        positionValues.set(pos, offset);\n        offset += pos.length;\n      }\n    } else {\n      generateArcOptions.positions = positions;\n      generateArcOptions.height = heights;\n      positionValues = new Float64Array(\n        generateArcFunction(generateArcOptions)\n      );\n\n      if (defined(colors)) {\n        colorValues = new Uint8Array((positionValues.length / 3) * 4);\n\n        for (i = 0; i < length - 1; ++i) {\n          const p0 = positions[i];\n          const p1 = positions[i + 1];\n          const c0 = colors[i];\n          const c1 = colors[i + 1];\n          offset = interpolateColors(\n            p0,\n            p1,\n            c0,\n            c1,\n            minDistance,\n            colorValues,\n            offset\n          );\n        }\n\n        const lastColor = colors[length - 1];\n        colorValues[offset++] = Color.floatToByte(lastColor.red);\n        colorValues[offset++] = Color.floatToByte(lastColor.green);\n        colorValues[offset++] = Color.floatToByte(lastColor.blue);\n        colorValues[offset++] = Color.floatToByte(lastColor.alpha);\n      }\n    }\n  } else {\n    numberOfPositions = perSegmentColors ? length * 2 - 2 : length;\n    positionValues = new Float64Array(numberOfPositions * 3);\n    colorValues = defined(colors)\n      ? new Uint8Array(numberOfPositions * 4)\n      : undefined;\n\n    let positionIndex = 0;\n    let colorIndex = 0;\n\n    for (i = 0; i < length; ++i) {\n      const p = positions[i];\n\n      if (perSegmentColors && i > 0) {\n        Cartesian3.pack(p, positionValues, positionIndex);\n        positionIndex += 3;\n\n        color = colors[i - 1];\n        colorValues[colorIndex++] = Color.floatToByte(color.red);\n        colorValues[colorIndex++] = Color.floatToByte(color.green);\n        colorValues[colorIndex++] = Color.floatToByte(color.blue);\n        colorValues[colorIndex++] = Color.floatToByte(color.alpha);\n      }\n\n      if (perSegmentColors && i === length - 1) {\n        break;\n      }\n\n      Cartesian3.pack(p, positionValues, positionIndex);\n      positionIndex += 3;\n\n      if (defined(colors)) {\n        color = colors[i];\n        colorValues[colorIndex++] = Color.floatToByte(color.red);\n        colorValues[colorIndex++] = Color.floatToByte(color.green);\n        colorValues[colorIndex++] = Color.floatToByte(color.blue);\n        colorValues[colorIndex++] = Color.floatToByte(color.alpha);\n      }\n    }\n  }\n\n  const attributes = new GeometryAttributes();\n  attributes.position = new GeometryAttribute({\n    componentDatatype: ComponentDatatype.DOUBLE,\n    componentsPerAttribute: 3,\n    values: positionValues,\n  });\n\n  if (defined(colors)) {\n    attributes.color = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.UNSIGNED_BYTE,\n      componentsPerAttribute: 4,\n      values: colorValues,\n      normalize: true,\n    });\n  }\n\n  numberOfPositions = positionValues.length / 3;\n  const numberOfIndices = (numberOfPositions - 1) * 2;\n  const indices = IndexDatatype.createTypedArray(\n    numberOfPositions,\n    numberOfIndices\n  );\n\n  let index = 0;\n  for (i = 0; i < numberOfPositions - 1; ++i) {\n    indices[index++] = i;\n    indices[index++] = i + 1;\n  }\n\n  return new Geometry({\n    attributes: attributes,\n    indices: indices,\n    primitiveType: PrimitiveType.LINES,\n    boundingSphere: BoundingSphere.fromPoints(positions),\n  });\n};\nexport default SimplePolylineGeometry;\n","import Cartesian3 from \"./Cartesian3.js\";\nimport Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport EllipsoidGeometry from \"./EllipsoidGeometry.js\";\nimport VertexFormat from \"./VertexFormat.js\";\n\n/**\n * A description of a sphere centered at the origin.\n *\n * @alias SphereGeometry\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Number} [options.radius=1.0] The radius of the sphere.\n * @param {Number} [options.stackPartitions=64] The number of times to partition the ellipsoid into stacks.\n * @param {Number} [options.slicePartitions=64] The number of times to partition the ellipsoid into radial slices.\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n *\n * @exception {DeveloperError} options.slicePartitions cannot be less than three.\n * @exception {DeveloperError} options.stackPartitions cannot be less than three.\n *\n * @see SphereGeometry#createGeometry\n *\n * @example\n * const sphere = new Cesium.SphereGeometry({\n *   radius : 100.0,\n *   vertexFormat : Cesium.VertexFormat.POSITION_ONLY\n * });\n * const geometry = Cesium.SphereGeometry.createGeometry(sphere);\n */\nfunction SphereGeometry(options) {\n  const radius = defaultValue(options.radius, 1.0);\n  const radii = new Cartesian3(radius, radius, radius);\n  const ellipsoidOptions = {\n    radii: radii,\n    stackPartitions: options.stackPartitions,\n    slicePartitions: options.slicePartitions,\n    vertexFormat: options.vertexFormat,\n  };\n\n  this._ellipsoidGeometry = new EllipsoidGeometry(ellipsoidOptions);\n  this._workerName = \"createSphereGeometry\";\n}\n\n/**\n * The number of elements used to pack the object into an array.\n * @type {Number}\n */\nSphereGeometry.packedLength = EllipsoidGeometry.packedLength;\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {SphereGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nSphereGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"value\", value);\n  //>>includeEnd('debug');\n\n  return EllipsoidGeometry.pack(value._ellipsoidGeometry, array, startingIndex);\n};\n\nconst scratchEllipsoidGeometry = new EllipsoidGeometry();\nconst scratchOptions = {\n  radius: undefined,\n  radii: new Cartesian3(),\n  vertexFormat: new VertexFormat(),\n  stackPartitions: undefined,\n  slicePartitions: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {SphereGeometry} [result] The object into which to store the result.\n * @returns {SphereGeometry} The modified result parameter or a new SphereGeometry instance if one was not provided.\n */\nSphereGeometry.unpack = function (array, startingIndex, result) {\n  const ellipsoidGeometry = EllipsoidGeometry.unpack(\n    array,\n    startingIndex,\n    scratchEllipsoidGeometry\n  );\n  scratchOptions.vertexFormat = VertexFormat.clone(\n    ellipsoidGeometry._vertexFormat,\n    scratchOptions.vertexFormat\n  );\n  scratchOptions.stackPartitions = ellipsoidGeometry._stackPartitions;\n  scratchOptions.slicePartitions = ellipsoidGeometry._slicePartitions;\n\n  if (!defined(result)) {\n    scratchOptions.radius = ellipsoidGeometry._radii.x;\n    return new SphereGeometry(scratchOptions);\n  }\n\n  Cartesian3.clone(ellipsoidGeometry._radii, scratchOptions.radii);\n  result._ellipsoidGeometry = new EllipsoidGeometry(scratchOptions);\n  return result;\n};\n\n/**\n * Computes the geometric representation of a sphere, including its vertices, indices, and a bounding sphere.\n *\n * @param {SphereGeometry} sphereGeometry A description of the sphere.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nSphereGeometry.createGeometry = function (sphereGeometry) {\n  return EllipsoidGeometry.createGeometry(sphereGeometry._ellipsoidGeometry);\n};\nexport default SphereGeometry;\n","import Cartesian3 from \"./Cartesian3.js\";\nimport Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport EllipsoidOutlineGeometry from \"./EllipsoidOutlineGeometry.js\";\n\n/**\n * A description of the outline of a sphere.\n *\n * @alias SphereOutlineGeometry\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Number} [options.radius=1.0] The radius of the sphere.\n * @param {Number} [options.stackPartitions=10] The count of stacks for the sphere (1 greater than the number of parallel lines).\n * @param {Number} [options.slicePartitions=8] The count of slices for the sphere (Equal to the number of radial lines).\n * @param {Number} [options.subdivisions=200] The number of points per line, determining the granularity of the curvature .\n *\n * @exception {DeveloperError} options.stackPartitions must be greater than or equal to one.\n * @exception {DeveloperError} options.slicePartitions must be greater than or equal to zero.\n * @exception {DeveloperError} options.subdivisions must be greater than or equal to zero.\n *\n * @example\n * const sphere = new Cesium.SphereOutlineGeometry({\n *   radius : 100.0,\n *   stackPartitions : 6,\n *   slicePartitions: 5\n * });\n * const geometry = Cesium.SphereOutlineGeometry.createGeometry(sphere);\n */\nfunction SphereOutlineGeometry(options) {\n  const radius = defaultValue(options.radius, 1.0);\n  const radii = new Cartesian3(radius, radius, radius);\n  const ellipsoidOptions = {\n    radii: radii,\n    stackPartitions: options.stackPartitions,\n    slicePartitions: options.slicePartitions,\n    subdivisions: options.subdivisions,\n  };\n\n  this._ellipsoidGeometry = new EllipsoidOutlineGeometry(ellipsoidOptions);\n  this._workerName = \"createSphereOutlineGeometry\";\n}\n\n/**\n * The number of elements used to pack the object into an array.\n * @type {Number}\n */\nSphereOutlineGeometry.packedLength = EllipsoidOutlineGeometry.packedLength;\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {SphereOutlineGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nSphereOutlineGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"value\", value);\n  //>>includeEnd('debug');\n\n  return EllipsoidOutlineGeometry.pack(\n    value._ellipsoidGeometry,\n    array,\n    startingIndex\n  );\n};\n\nconst scratchEllipsoidGeometry = new EllipsoidOutlineGeometry();\nconst scratchOptions = {\n  radius: undefined,\n  radii: new Cartesian3(),\n  stackPartitions: undefined,\n  slicePartitions: undefined,\n  subdivisions: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {SphereOutlineGeometry} [result] The object into which to store the result.\n * @returns {SphereOutlineGeometry} The modified result parameter or a new SphereOutlineGeometry instance if one was not provided.\n */\nSphereOutlineGeometry.unpack = function (array, startingIndex, result) {\n  const ellipsoidGeometry = EllipsoidOutlineGeometry.unpack(\n    array,\n    startingIndex,\n    scratchEllipsoidGeometry\n  );\n  scratchOptions.stackPartitions = ellipsoidGeometry._stackPartitions;\n  scratchOptions.slicePartitions = ellipsoidGeometry._slicePartitions;\n  scratchOptions.subdivisions = ellipsoidGeometry._subdivisions;\n\n  if (!defined(result)) {\n    scratchOptions.radius = ellipsoidGeometry._radii.x;\n    return new SphereOutlineGeometry(scratchOptions);\n  }\n\n  Cartesian3.clone(ellipsoidGeometry._radii, scratchOptions.radii);\n  result._ellipsoidGeometry = new EllipsoidOutlineGeometry(scratchOptions);\n  return result;\n};\n\n/**\n * Computes the geometric representation of an outline of a sphere, including its vertices, indices, and a bounding sphere.\n *\n * @param {SphereOutlineGeometry} sphereGeometry A description of the sphere outline.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nSphereOutlineGeometry.createGeometry = function (sphereGeometry) {\n  return EllipsoidOutlineGeometry.createGeometry(\n    sphereGeometry._ellipsoidGeometry\n  );\n};\nexport default SphereOutlineGeometry;\n","import Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\n\n/**\n * A set of curvilinear 3-dimensional coordinates.\n *\n * @alias Spherical\n * @constructor\n *\n * @param {Number} [clock=0.0] The angular coordinate lying in the xy-plane measured from the positive x-axis and toward the positive y-axis.\n * @param {Number} [cone=0.0] The angular coordinate measured from the positive z-axis and toward the negative z-axis.\n * @param {Number} [magnitude=1.0] The linear coordinate measured from the origin.\n */\nfunction Spherical(clock, cone, magnitude) {\n  /**\n   * The clock component.\n   * @type {Number}\n   * @default 0.0\n   */\n  this.clock = defaultValue(clock, 0.0);\n  /**\n   * The cone component.\n   * @type {Number}\n   * @default 0.0\n   */\n  this.cone = defaultValue(cone, 0.0);\n  /**\n   * The magnitude component.\n   * @type {Number}\n   * @default 1.0\n   */\n  this.magnitude = defaultValue(magnitude, 1.0);\n}\n\n/**\n * Converts the provided Cartesian3 into Spherical coordinates.\n *\n * @param {Cartesian3} cartesian3 The Cartesian3 to be converted to Spherical.\n * @param {Spherical} [result] The object in which the result will be stored, if undefined a new instance will be created.\n * @returns {Spherical} The modified result parameter, or a new instance if one was not provided.\n */\nSpherical.fromCartesian3 = function (cartesian3, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"cartesian3\", cartesian3);\n  //>>includeEnd('debug');\n\n  const x = cartesian3.x;\n  const y = cartesian3.y;\n  const z = cartesian3.z;\n  const radialSquared = x * x + y * y;\n\n  if (!defined(result)) {\n    result = new Spherical();\n  }\n\n  result.clock = Math.atan2(y, x);\n  result.cone = Math.atan2(Math.sqrt(radialSquared), z);\n  result.magnitude = Math.sqrt(radialSquared + z * z);\n  return result;\n};\n\n/**\n * Creates a duplicate of a Spherical.\n *\n * @param {Spherical} spherical The spherical to clone.\n * @param {Spherical} [result] The object to store the result into, if undefined a new instance will be created.\n * @returns {Spherical} The modified result parameter or a new instance if result was undefined. (Returns undefined if spherical is undefined)\n */\nSpherical.clone = function (spherical, result) {\n  if (!defined(spherical)) {\n    return undefined;\n  }\n\n  if (!defined(result)) {\n    return new Spherical(spherical.clock, spherical.cone, spherical.magnitude);\n  }\n\n  result.clock = spherical.clock;\n  result.cone = spherical.cone;\n  result.magnitude = spherical.magnitude;\n  return result;\n};\n\n/**\n * Computes the normalized version of the provided spherical.\n *\n * @param {Spherical} spherical The spherical to be normalized.\n * @param {Spherical} [result] The object to store the result into, if undefined a new instance will be created.\n * @returns {Spherical} The modified result parameter or a new instance if result was undefined.\n */\nSpherical.normalize = function (spherical, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"spherical\", spherical);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    return new Spherical(spherical.clock, spherical.cone, 1.0);\n  }\n\n  result.clock = spherical.clock;\n  result.cone = spherical.cone;\n  result.magnitude = 1.0;\n  return result;\n};\n\n/**\n * Returns true if the first spherical is equal to the second spherical, false otherwise.\n *\n * @param {Spherical} left The first Spherical to be compared.\n * @param {Spherical} right The second Spherical to be compared.\n * @returns {Boolean} true if the first spherical is equal to the second spherical, false otherwise.\n */\nSpherical.equals = function (left, right) {\n  return (\n    left === right ||\n    (defined(left) &&\n      defined(right) &&\n      left.clock === right.clock &&\n      left.cone === right.cone &&\n      left.magnitude === right.magnitude)\n  );\n};\n\n/**\n * Returns true if the first spherical is within the provided epsilon of the second spherical, false otherwise.\n *\n * @param {Spherical} left The first Spherical to be compared.\n * @param {Spherical} right The second Spherical to be compared.\n * @param {Number} [epsilon=0.0] The epsilon to compare against.\n * @returns {Boolean} true if the first spherical is within the provided epsilon of the second spherical, false otherwise.\n */\nSpherical.equalsEpsilon = function (left, right, epsilon) {\n  epsilon = defaultValue(epsilon, 0.0);\n  return (\n    left === right ||\n    (defined(left) &&\n      defined(right) &&\n      Math.abs(left.clock - right.clock) <= epsilon &&\n      Math.abs(left.cone - right.cone) <= epsilon &&\n      Math.abs(left.magnitude - right.magnitude) <= epsilon)\n  );\n};\n\n/**\n * Returns true if this spherical is equal to the provided spherical, false otherwise.\n *\n * @param {Spherical} other The Spherical to be compared.\n * @returns {Boolean} true if this spherical is equal to the provided spherical, false otherwise.\n */\nSpherical.prototype.equals = function (other) {\n  return Spherical.equals(this, other);\n};\n\n/**\n * Creates a duplicate of this Spherical.\n *\n * @param {Spherical} [result] The object to store the result into, if undefined a new instance will be created.\n * @returns {Spherical} The modified result parameter or a new instance if result was undefined.\n */\nSpherical.prototype.clone = function (result) {\n  return Spherical.clone(this, result);\n};\n\n/**\n * Returns true if this spherical is within the provided epsilon of the provided spherical, false otherwise.\n *\n * @param {Spherical} other The Spherical to be compared.\n * @param {Number} epsilon The epsilon to compare against.\n * @returns {Boolean} true if this spherical is within the provided epsilon of the provided spherical, false otherwise.\n */\nSpherical.prototype.equalsEpsilon = function (other, epsilon) {\n  return Spherical.equalsEpsilon(this, other, epsilon);\n};\n\n/**\n * Returns a string representing this instance in the format (clock, cone, magnitude).\n *\n * @returns {String} A string representing this instance.\n */\nSpherical.prototype.toString = function () {\n  return `(${this.clock}, ${this.cone}, ${this.magnitude})`;\n};\nexport default Spherical;\n","import Cartesian3 from \"./Cartesian3.js\";\nimport Check from \"./Check.js\";\nimport CesiumMath from \"./Math.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Quaternion from \"./Quaternion.js\";\n\n/**\n * Creates a curve parameterized and evaluated by time. This type describes an interface\n * and is not intended to be instantiated directly.\n *\n * @alias Spline\n * @constructor\n *\n * @see CatmullRomSpline\n * @see LinearSpline\n * @see HermiteSpline\n * @see QuaternionSpline\n * @see MorphWeightSpline\n */\nfunction Spline() {\n  /**\n   * An array of times for the control points.\n   * @type {Number[]}\n   * @default undefined\n   */\n  this.times = undefined;\n\n  /**\n   * An array of control points.\n   * @type {Cartesian3[]|Quaternion[]}\n   * @default undefined\n   */\n  this.points = undefined;\n\n  DeveloperError.throwInstantiationError();\n}\n\n/**\n * Gets the type of the point. This helps a spline determine how to interpolate\n * and return its values.\n *\n * @param {Number|Cartesian3|Quaternion} point\n * @returns {*} The type of the point.\n *\n * @exception {DeveloperError} value must be a Cartesian3, Quaternion, or Number.\n *\n * @private\n */\nSpline.getPointType = function (point) {\n  if (typeof point === \"number\") {\n    return Number;\n  }\n  if (point instanceof Cartesian3) {\n    return Cartesian3;\n  }\n  if (point instanceof Quaternion) {\n    return Quaternion;\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  throw new DeveloperError(\n    \"point must be a Cartesian3, Quaternion, or Number.\"\n  );\n  //>>includeEnd('debug');\n};\n\n/**\n * Evaluates the curve at a given time.\n * @function\n *\n * @param {Number} time The time at which to evaluate the curve.\n * @param {Cartesian3|Quaternion|Number[]} [result] The object onto which to store the result.\n * @returns {Cartesian3|Quaternion|Number[]} The modified result parameter or a new instance of the point on the curve at the given time.\n *\n * @exception {DeveloperError} time must be in the range <code>[t<sub>0</sub>, t<sub>n</sub>]</code>, where <code>t<sub>0</sub></code>\n *                             is the first element in the array <code>times</code> and <code>t<sub>n</sub></code> is the last element\n *                             in the array <code>times</code>.\n */\nSpline.prototype.evaluate = DeveloperError.throwInstantiationError;\n\n/**\n * Finds an index <code>i</code> in <code>times</code> such that the parameter\n * <code>time</code> is in the interval <code>[times[i], times[i + 1]]</code>.\n *\n * @param {Number} time The time.\n * @param {Number} startIndex The index from which to start the search.\n * @returns {Number} The index for the element at the start of the interval.\n *\n * @exception {DeveloperError} time must be in the range <code>[t<sub>0</sub>, t<sub>n</sub>]</code>, where <code>t<sub>0</sub></code>\n *                             is the first element in the array <code>times</code> and <code>t<sub>n</sub></code> is the last element\n *                             in the array <code>times</code>.\n */\nSpline.prototype.findTimeInterval = function (time, startIndex) {\n  const times = this.times;\n  const length = times.length;\n\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.number(\"time\", time);\n  if (time < times[0] || time > times[length - 1]) {\n    throw new DeveloperError(\"time is out of range.\");\n  }\n  //>>includeEnd('debug');\n\n  // Take advantage of temporal coherence by checking current, next and previous intervals\n  // for containment of time.\n  startIndex = defaultValue(startIndex, 0);\n\n  if (time >= times[startIndex]) {\n    if (startIndex + 1 < length && time < times[startIndex + 1]) {\n      return startIndex;\n    } else if (startIndex + 2 < length && time < times[startIndex + 2]) {\n      return startIndex + 1;\n    }\n  } else if (startIndex - 1 >= 0 && time >= times[startIndex - 1]) {\n    return startIndex - 1;\n  }\n\n  // The above failed so do a linear search. For the use cases so far, the\n  // length of the list is less than 10. In the future, if there is a bottle neck,\n  // it might be here.\n\n  let i;\n  if (time > times[startIndex]) {\n    for (i = startIndex; i < length - 1; ++i) {\n      if (time >= times[i] && time < times[i + 1]) {\n        break;\n      }\n    }\n  } else {\n    for (i = startIndex - 1; i >= 0; --i) {\n      if (time >= times[i] && time < times[i + 1]) {\n        break;\n      }\n    }\n  }\n\n  if (i === length - 1) {\n    i = length - 2;\n  }\n\n  return i;\n};\n\n/**\n * Wraps the given time to the period covered by the spline.\n * @function\n *\n * @param {Number} time The time.\n * @return {Number} The time, wrapped around the animation period.\n */\nSpline.prototype.wrapTime = function (time) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.number(\"time\", time);\n  //>>includeEnd('debug');\n\n  const times = this.times;\n  const timeEnd = times[times.length - 1];\n  const timeStart = times[0];\n  const timeStretch = timeEnd - timeStart;\n  let divs;\n  if (time < timeStart) {\n    divs = Math.floor((timeStart - time) / timeStretch) + 1;\n    time += divs * timeStretch;\n  }\n  if (time > timeEnd) {\n    divs = Math.floor((time - timeEnd) / timeStretch) + 1;\n    time -= divs * timeStretch;\n  }\n  return time;\n};\n\n/**\n * Clamps the given time to the period covered by the spline.\n * @function\n *\n * @param {Number} time The time.\n * @return {Number} The time, clamped to the animation period.\n */\nSpline.prototype.clampTime = function (time) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.number(\"time\", time);\n  //>>includeEnd('debug');\n\n  const times = this.times;\n  return CesiumMath.clamp(time, times[0], times[times.length - 1]);\n};\n\nexport default Spline;\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Spline from \"./Spline.js\";\n\n/**\n * A spline that is composed of piecewise constants representing a step function.\n *\n * @alias SteppedSpline\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Number[]} options.times An array of strictly increasing, unit-less, floating-point times at each point. The values are in no way connected to the clock time. They are the parameterization for the curve.\n * @param {Number[]|Cartesian3[]|Quaternion[]} options.points The array of control points.\n *\n * @exception {DeveloperError} points.length must be greater than or equal to 2.\n * @exception {DeveloperError} times.length must be equal to points.length.\n *\n * @example\n * const times = [ 0.0, 1.5, 3.0, 4.5, 6.0 ];\n * const spline = new Cesium.SteppedSpline({\n *     times : times,\n *     points : [\n *         new Cesium.Cartesian3(1235398.0, -4810983.0, 4146266.0),\n *         new Cesium.Cartesian3(1372574.0, -5345182.0, 4606657.0),\n *         new Cesium.Cartesian3(-757983.0, -5542796.0, 4514323.0),\n *         new Cesium.Cartesian3(-2821260.0, -5248423.0, 4021290.0),\n *         new Cesium.Cartesian3(-2539788.0, -4724797.0, 3620093.0)\n *     ]\n * });\n *\n * const p0 = spline.evaluate(times[0]);\n *\n * @see ConstantSpline\n * @see CatmullRomSpline\n * @see HermiteSpline\n * @see LinearSpline\n * @see QuaternionSpline\n * @see MorphWeightSpline\n */\nfunction SteppedSpline(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const points = options.points;\n  const times = options.times;\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(points) || !defined(times)) {\n    throw new DeveloperError(\"points and times are required.\");\n  }\n  if (points.length < 2) {\n    throw new DeveloperError(\n      \"points.length must be greater than or equal to 2.\"\n    );\n  }\n  if (times.length !== points.length) {\n    throw new DeveloperError(\"times.length must be equal to points.length.\");\n  }\n  //>>includeEnd('debug');\n\n  this._times = times;\n  this._points = points;\n  this._pointType = Spline.getPointType(points[0]);\n\n  this._lastTimeIndex = 0;\n}\n\nObject.defineProperties(SteppedSpline.prototype, {\n  /**\n   * An array of times for the control points.\n   *\n   * @memberof SteppedSpline.prototype\n   *\n   * @type {Number[]}\n   * @readonly\n   */\n  times: {\n    get: function () {\n      return this._times;\n    },\n  },\n\n  /**\n   * An array of control points.\n   *\n   * @memberof SteppedSpline.prototype\n   *\n   * @type {Number[]|Cartesian3[]|Quaternion[]}\n   * @readonly\n   */\n  points: {\n    get: function () {\n      return this._points;\n    },\n  },\n});\n\n/**\n * Finds an index <code>i</code> in <code>times</code> such that the parameter\n * <code>time</code> is in the interval <code>[times[i], times[i + 1]]</code>.\n * @function\n *\n * @param {Number} time The time.\n * @param {Number} startIndex The index from which to start the search.\n * @returns {Number} The index for the element at the start of the interval.\n *\n * @exception {DeveloperError} time must be in the range <code>[t<sub>0</sub>, t<sub>n</sub>]</code>, where <code>t<sub>0</sub></code>\n *                             is the first element in the array <code>times</code> and <code>t<sub>n</sub></code> is the last element\n *                             in the array <code>times</code>.\n */\nSteppedSpline.prototype.findTimeInterval = Spline.prototype.findTimeInterval;\n\n/**\n * Wraps the given time to the period covered by the spline.\n * @function\n *\n * @param {Number} time The time.\n * @return {Number} The time, wrapped around to the updated animation.\n */\nSteppedSpline.prototype.wrapTime = Spline.prototype.wrapTime;\n\n/**\n * Clamps the given time to the period covered by the spline.\n * @function\n *\n * @param {Number} time The time.\n * @return {Number} The time, clamped to the animation period.\n */\nSteppedSpline.prototype.clampTime = Spline.prototype.clampTime;\n\n/**\n * Evaluates the curve at a given time.\n *\n * @param {Number} time The time at which to evaluate the curve.\n * @param {Cartesian3|Quaternion} [result] The object onto which to store the result.\n * @returns {Number|Cartesian3|Quaternion} The modified result parameter or a new instance of the point on the curve at the given time.\n *\n * @exception {DeveloperError} time must be in the range <code>[t<sub>0</sub>, t<sub>n</sub>]</code>, where <code>t<sub>0</sub></code>\n *                             is the first element in the array <code>times</code> and <code>t<sub>n</sub></code> is the last element\n *                             in the array <code>times</code>.\n */\nSteppedSpline.prototype.evaluate = function (time, result) {\n  const points = this.points;\n\n  this._lastTimeIndex = this.findTimeInterval(time, this._lastTimeIndex);\n  const i = this._lastTimeIndex;\n\n  const PointType = this._pointType;\n  if (PointType === Number) {\n    return points[i];\n  }\n\n  if (!defined(result)) {\n    result = new PointType();\n  }\n\n  return PointType.clone(points[i], result);\n};\n\nexport default SteppedSpline;\n","import Uri from \"../ThirdParty/Uri.js\";\nimport buildModuleUrl from \"./buildModuleUrl.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defer from \"./defer.js\";\nimport defined from \"./defined.js\";\nimport destroyObject from \"./destroyObject.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Event from \"./Event.js\";\nimport FeatureDetection from \"./FeatureDetection.js\";\nimport isCrossOriginUrl from \"./isCrossOriginUrl.js\";\nimport Resource from \"./Resource.js\";\nimport RuntimeError from \"./RuntimeError.js\";\n\nfunction canTransferArrayBuffer() {\n  if (!defined(TaskProcessor._canTransferArrayBuffer)) {\n    const worker = new Worker(\n      getWorkerUrl(\"Workers/transferTypedArrayTest.js\")\n    );\n    worker.postMessage = defaultValue(\n      worker.webkitPostMessage,\n      worker.postMessage\n    );\n\n    const value = 99;\n    const array = new Int8Array([value]);\n\n    try {\n      // postMessage might fail with a DataCloneError\n      // if transferring array buffers is not supported.\n      worker.postMessage(\n        {\n          array: array,\n        },\n        [array.buffer]\n      );\n    } catch (e) {\n      TaskProcessor._canTransferArrayBuffer = false;\n      return TaskProcessor._canTransferArrayBuffer;\n    }\n\n    const deferred = defer();\n\n    worker.onmessage = function (event) {\n      const array = event.data.array;\n\n      // some versions of Firefox silently fail to transfer typed arrays.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=841904\n      // Check to make sure the value round-trips successfully.\n      const result = defined(array) && array[0] === value;\n      deferred.resolve(result);\n\n      worker.terminate();\n\n      TaskProcessor._canTransferArrayBuffer = result;\n    };\n\n    TaskProcessor._canTransferArrayBuffer = deferred.promise;\n  }\n\n  return TaskProcessor._canTransferArrayBuffer;\n}\n\nconst taskCompletedEvent = new Event();\n\nfunction completeTask(processor, data) {\n  --processor._activeTasks;\n\n  const id = data.id;\n  if (!defined(id)) {\n    // This is not one of ours.\n    return;\n  }\n\n  const deferreds = processor._deferreds;\n  const deferred = deferreds[id];\n\n  if (defined(data.error)) {\n    let error = data.error;\n    if (error.name === \"RuntimeError\") {\n      error = new RuntimeError(data.error.message);\n      error.stack = data.error.stack;\n    } else if (error.name === \"DeveloperError\") {\n      error = new DeveloperError(data.error.message);\n      error.stack = data.error.stack;\n    }\n    taskCompletedEvent.raiseEvent(error);\n    deferred.reject(error);\n  } else {\n    taskCompletedEvent.raiseEvent();\n    deferred.resolve(data.result);\n  }\n\n  delete deferreds[id];\n}\n\nfunction getWorkerUrl(moduleID) {\n  let url = buildModuleUrl(moduleID);\n\n  if (isCrossOriginUrl(url)) {\n    //to load cross-origin, create a shim worker from a blob URL\n    const script = `importScripts(\"${url}\");`;\n\n    let blob;\n    try {\n      blob = new Blob([script], {\n        type: \"application/javascript\",\n      });\n    } catch (e) {\n      const BlobBuilder =\n        window.BlobBuilder ||\n        window.WebKitBlobBuilder ||\n        window.MozBlobBuilder ||\n        window.MSBlobBuilder;\n      const blobBuilder = new BlobBuilder();\n      blobBuilder.append(script);\n      blob = blobBuilder.getBlob(\"application/javascript\");\n    }\n\n    const URL = window.URL || window.webkitURL;\n    url = URL.createObjectURL(blob);\n  }\n\n  return url;\n}\n\nlet bootstrapperUrlResult;\nfunction getBootstrapperUrl() {\n  if (!defined(bootstrapperUrlResult)) {\n    bootstrapperUrlResult = getWorkerUrl(\"Workers/cesiumWorkerBootstrapper.js\");\n  }\n  return bootstrapperUrlResult;\n}\n\nfunction createWorker(processor) {\n  const worker = new Worker(getBootstrapperUrl());\n  worker.postMessage = defaultValue(\n    worker.webkitPostMessage,\n    worker.postMessage\n  );\n\n  const bootstrapMessage = {\n    loaderConfig: {\n      paths: {\n        Workers: buildModuleUrl(\"Workers\"),\n      },\n      baseUrl: buildModuleUrl.getCesiumBaseUrl().url,\n    },\n    workerModule: processor._workerPath,\n  };\n\n  worker.postMessage(bootstrapMessage);\n  worker.onmessage = function (event) {\n    completeTask(processor, event.data);\n  };\n\n  return worker;\n}\n\nfunction getWebAssemblyLoaderConfig(processor, wasmOptions) {\n  const config = {\n    modulePath: undefined,\n    wasmBinaryFile: undefined,\n    wasmBinary: undefined,\n  };\n\n  // Web assembly not supported, use fallback js module if provided\n  if (!FeatureDetection.supportsWebAssembly()) {\n    if (!defined(wasmOptions.fallbackModulePath)) {\n      throw new RuntimeError(\n        `This browser does not support Web Assembly, and no backup module was provided for ${processor._workerPath}`\n      );\n    }\n\n    config.modulePath = buildModuleUrl(wasmOptions.fallbackModulePath);\n    return Promise.resolve(config);\n  }\n\n  config.modulePath = buildModuleUrl(wasmOptions.modulePath);\n  config.wasmBinaryFile = buildModuleUrl(wasmOptions.wasmBinaryFile);\n\n  return Resource.fetchArrayBuffer({\n    url: config.wasmBinaryFile,\n  }).then(function (arrayBuffer) {\n    config.wasmBinary = arrayBuffer;\n    return config;\n  });\n}\n\n/**\n * A wrapper around a web worker that allows scheduling tasks for a given worker,\n * returning results asynchronously via a promise.\n *\n * The Worker is not constructed until a task is scheduled.\n *\n * @alias TaskProcessor\n * @constructor\n *\n * @param {String} workerPath The Url to the worker. This can either be an absolute path or relative to the Cesium Workers folder.\n * @param {Number} [maximumActiveTasks=Number.POSITIVE_INFINITY] The maximum number of active tasks.  Once exceeded,\n *                                        scheduleTask will not queue any more tasks, allowing\n *                                        work to be rescheduled in future frames.\n */\nfunction TaskProcessor(workerPath, maximumActiveTasks) {\n  const uri = new Uri(workerPath);\n  this._workerPath =\n    uri.scheme().length !== 0 && uri.fragment().length === 0\n      ? workerPath\n      : TaskProcessor._workerModulePrefix + workerPath;\n  this._maximumActiveTasks = defaultValue(\n    maximumActiveTasks,\n    Number.POSITIVE_INFINITY\n  );\n  this._activeTasks = 0;\n  this._deferreds = {};\n  this._nextID = 0;\n}\n\nconst emptyTransferableObjectArray = [];\n\n/**\n * Schedule a task to be processed by the web worker asynchronously.  If there are currently more\n * tasks active than the maximum set by the constructor, will immediately return undefined.\n * Otherwise, returns a promise that will resolve to the result posted back by the worker when\n * finished.\n *\n * @param {Object} parameters Any input data that will be posted to the worker.\n * @param {Object[]} [transferableObjects] An array of objects contained in parameters that should be\n *                                      transferred to the worker instead of copied.\n * @returns {Promise.<Object>|undefined} Either a promise that will resolve to the result when available, or undefined\n *                    if there are too many active tasks,\n *\n * @example\n * const taskProcessor = new Cesium.TaskProcessor('myWorkerPath');\n * const promise = taskProcessor.scheduleTask({\n *     someParameter : true,\n *     another : 'hello'\n * });\n * if (!Cesium.defined(promise)) {\n *     // too many active tasks - try again later\n * } else {\n *     promise.then(function(result) {\n *         // use the result of the task\n *     });\n * }\n */\nTaskProcessor.prototype.scheduleTask = function (\n  parameters,\n  transferableObjects\n) {\n  if (!defined(this._worker)) {\n    this._worker = createWorker(this);\n  }\n\n  if (this._activeTasks >= this._maximumActiveTasks) {\n    return undefined;\n  }\n\n  ++this._activeTasks;\n\n  const processor = this;\n  return Promise.resolve(canTransferArrayBuffer()).then(function (\n    canTransferArrayBuffer\n  ) {\n    if (!defined(transferableObjects)) {\n      transferableObjects = emptyTransferableObjectArray;\n    } else if (!canTransferArrayBuffer) {\n      transferableObjects.length = 0;\n    }\n\n    const id = processor._nextID++;\n    const deferred = defer();\n    processor._deferreds[id] = deferred;\n\n    processor._worker.postMessage(\n      {\n        id: id,\n        parameters: parameters,\n        canTransferArrayBuffer: canTransferArrayBuffer,\n      },\n      transferableObjects\n    );\n\n    return deferred.promise;\n  });\n};\n\n/**\n * Posts a message to a web worker with configuration to initialize loading\n * and compiling a web assembly module asychronously, as well as an optional\n * fallback JavaScript module to use if Web Assembly is not supported.\n *\n * @param {Object} [webAssemblyOptions] An object with the following properties:\n * @param {String} [webAssemblyOptions.modulePath] The path of the web assembly JavaScript wrapper module.\n * @param {String} [webAssemblyOptions.wasmBinaryFile] The path of the web assembly binary file.\n * @param {String} [webAssemblyOptions.fallbackModulePath] The path of the fallback JavaScript module to use if web assembly is not supported.\n * @returns {Promise.<Object>} A promise that resolves to the result when the web worker has loaded and compiled the web assembly module and is ready to process tasks.\n */\nTaskProcessor.prototype.initWebAssemblyModule = function (webAssemblyOptions) {\n  if (!defined(this._worker)) {\n    this._worker = createWorker(this);\n  }\n\n  const deferred = defer();\n  const processor = this;\n  const worker = this._worker;\n  getWebAssemblyLoaderConfig(this, webAssemblyOptions).then(function (\n    wasmConfig\n  ) {\n    return Promise.resolve(canTransferArrayBuffer()).then(function (\n      canTransferArrayBuffer\n    ) {\n      let transferableObjects;\n      const binary = wasmConfig.wasmBinary;\n      if (defined(binary) && canTransferArrayBuffer) {\n        transferableObjects = [binary];\n      }\n\n      worker.onmessage = function (event) {\n        worker.onmessage = function (event) {\n          completeTask(processor, event.data);\n        };\n\n        deferred.resolve(event.data);\n      };\n\n      worker.postMessage(\n        { webAssemblyConfig: wasmConfig },\n        transferableObjects\n      );\n    });\n  });\n\n  return deferred.promise;\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n * <br /><br />\n * If this object was destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n *\n * @see TaskProcessor#destroy\n */\nTaskProcessor.prototype.isDestroyed = function () {\n  return false;\n};\n\n/**\n * Destroys this object.  This will immediately terminate the Worker.\n * <br /><br />\n * Once an object is destroyed, it should not be used; calling any function other than\n * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.\n */\nTaskProcessor.prototype.destroy = function () {\n  if (defined(this._worker)) {\n    this._worker.terminate();\n  }\n  return destroyObject(this);\n};\n\n/**\n * An event that's raised when a task is completed successfully.  Event handlers are passed\n * the error object is a task fails.\n *\n * @type {Event}\n *\n * @private\n */\nTaskProcessor.taskCompletedEvent = taskCompletedEvent;\n\n// exposed for testing purposes\nTaskProcessor._defaultWorkerModulePrefix = \"Workers/\";\nTaskProcessor._workerModulePrefix = TaskProcessor._defaultWorkerModulePrefix;\nTaskProcessor._canTransferArrayBuffer = undefined;\nexport default TaskProcessor;\n","import DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Terrain data for a single tile.  This type describes an\n * interface and is not intended to be instantiated directly.\n *\n * @alias TerrainData\n * @constructor\n *\n * @see HeightmapTerrainData\n * @see QuantizedMeshTerrainData\n * @see GoogleEarthEnterpriseTerrainData\n */\nfunction TerrainData() {\n  DeveloperError.throwInstantiationError();\n}\n\nObject.defineProperties(TerrainData.prototype, {\n  /**\n   * An array of credits for this tile.\n   * @memberof TerrainData.prototype\n   * @type {Credit[]}\n   */\n  credits: {\n    get: DeveloperError.throwInstantiationError,\n  },\n  /**\n   * The water mask included in this terrain data, if any.  A water mask is a rectangular\n   * Uint8Array or image where a value of 255 indicates water and a value of 0 indicates land.\n   * Values in between 0 and 255 are allowed as well to smoothly blend between land and water.\n   * @memberof TerrainData.prototype\n   * @type {Uint8Array|HTMLImageElement|HTMLCanvasElement}\n   */\n  waterMask: {\n    get: DeveloperError.throwInstantiationError,\n  },\n});\n\n/**\n * Computes the terrain height at a specified longitude and latitude.\n * @function\n *\n * @param {Rectangle} rectangle The rectangle covered by this terrain data.\n * @param {Number} longitude The longitude in radians.\n * @param {Number} latitude The latitude in radians.\n * @returns {Number} The terrain height at the specified position.  If the position\n *          is outside the rectangle, this method will extrapolate the height, which is likely to be wildly\n *          incorrect for positions far outside the rectangle.\n */\nTerrainData.prototype.interpolateHeight =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Determines if a given child tile is available, based on the\n * {@link TerrainData#childTileMask}.  The given child tile coordinates are assumed\n * to be one of the four children of this tile.  If non-child tile coordinates are\n * given, the availability of the southeast child tile is returned.\n * @function\n *\n * @param {Number} thisX The tile X coordinate of this (the parent) tile.\n * @param {Number} thisY The tile Y coordinate of this (the parent) tile.\n * @param {Number} childX The tile X coordinate of the child tile to check for availability.\n * @param {Number} childY The tile Y coordinate of the child tile to check for availability.\n * @returns {Boolean} True if the child tile is available; otherwise, false.\n */\nTerrainData.prototype.isChildAvailable = DeveloperError.throwInstantiationError;\n\n/**\n * Creates a {@link TerrainMesh} from this terrain data.\n * @function\n *\n * @private\n *\n * @param {Object} options Object with the following properties:\n * @param {TilingScheme} options.tilingScheme The tiling scheme to which this tile belongs.\n * @param {Number} options.x The X coordinate of the tile for which to create the terrain data.\n * @param {Number} options.y The Y coordinate of the tile for which to create the terrain data.\n * @param {Number} options.level The level of the tile for which to create the terrain data.\n * @param {Number} [options.exaggeration=1.0] The scale used to exaggerate the terrain.\n * @param {Number} [options.exaggerationRelativeHeight=0.0] The height relative to which terrain is exaggerated.\n * @param {Boolean} [options.throttle=true] If true, indicates that this operation will need to be retried if too many asynchronous mesh creations are already in progress.\n * @returns {Promise.<TerrainMesh>|undefined} A promise for the terrain mesh, or undefined if too many\n *          asynchronous mesh creations are already in progress and the operation should\n *          be retried later.\n */\nTerrainData.prototype.createMesh = DeveloperError.throwInstantiationError;\n\n/**\n * Upsamples this terrain data for use by a descendant tile.\n * @function\n *\n * @param {TilingScheme} tilingScheme The tiling scheme of this terrain data.\n * @param {Number} thisX The X coordinate of this tile in the tiling scheme.\n * @param {Number} thisY The Y coordinate of this tile in the tiling scheme.\n * @param {Number} thisLevel The level of this tile in the tiling scheme.\n * @param {Number} descendantX The X coordinate within the tiling scheme of the descendant tile for which we are upsampling.\n * @param {Number} descendantY The Y coordinate within the tiling scheme of the descendant tile for which we are upsampling.\n * @param {Number} descendantLevel The level within the tiling scheme of the descendant tile for which we are upsampling.\n * @returns {Promise.<TerrainData>|undefined} A promise for upsampled terrain data for the descendant tile,\n *          or undefined if too many asynchronous upsample operations are in progress and the request has been\n *          deferred.\n */\nTerrainData.prototype.upsample = DeveloperError.throwInstantiationError;\n\n/**\n * Gets a value indicating whether or not this terrain data was created by upsampling lower resolution\n * terrain data.  If this value is false, the data was obtained from some other source, such\n * as by downloading it from a remote server.  This method should return true for instances\n * returned from a call to {@link TerrainData#upsample}.\n * @function\n *\n * @returns {Boolean} True if this instance was created by upsampling; otherwise, false.\n */\nTerrainData.prototype.wasCreatedByUpsampling =\n  DeveloperError.throwInstantiationError;\n\n/**\n * The maximum number of asynchronous tasks used for terrain processing.\n *\n * @type {Number}\n * @private\n */\nTerrainData.maximumAsynchronousTasks = 5;\n\nexport default TerrainData;\n","import AttributeCompression from \"./AttributeCompression.js\";\nimport Cartesian2 from \"./Cartesian2.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport ComponentDatatype from \"./ComponentDatatype.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport CesiumMath from \"./Math.js\";\nimport Matrix4 from \"./Matrix4.js\";\nimport TerrainExaggeration from \"./TerrainExaggeration.js\";\nimport TerrainQuantization from \"./TerrainQuantization.js\";\n\nconst cartesian3Scratch = new Cartesian3();\nconst cartesian3DimScratch = new Cartesian3();\nconst cartesian2Scratch = new Cartesian2();\nconst matrix4Scratch = new Matrix4();\nconst matrix4Scratch2 = new Matrix4();\n\nconst SHIFT_LEFT_12 = Math.pow(2.0, 12.0);\n\n/**\n * Data used to quantize and pack the terrain mesh. The position can be unpacked for picking and all attributes\n * are unpacked in the vertex shader.\n *\n * @alias TerrainEncoding\n * @constructor\n *\n * @param {Cartesian3} center The center point of the vertices.\n * @param {AxisAlignedBoundingBox} axisAlignedBoundingBox The bounds of the tile in the east-north-up coordinates at the tiles center.\n * @param {Number} minimumHeight The minimum height.\n * @param {Number} maximumHeight The maximum height.\n * @param {Matrix4} fromENU The east-north-up to fixed frame matrix at the center of the terrain mesh.\n * @param {Boolean} hasVertexNormals If the mesh has vertex normals.\n * @param {Boolean} [hasWebMercatorT=false] true if the terrain data includes a Web Mercator texture coordinate; otherwise, false.\n * @param {Boolean} [hasGeodeticSurfaceNormals=false] true if the terrain data includes geodetic surface normals; otherwise, false.\n * @param {Number} [exaggeration=1.0] A scalar used to exaggerate terrain.\n * @param {Number} [exaggerationRelativeHeight=0.0] The relative height from which terrain is exaggerated.\n *\n * @private\n */\nfunction TerrainEncoding(\n  center,\n  axisAlignedBoundingBox,\n  minimumHeight,\n  maximumHeight,\n  fromENU,\n  hasVertexNormals,\n  hasWebMercatorT,\n  hasGeodeticSurfaceNormals,\n  exaggeration,\n  exaggerationRelativeHeight\n) {\n  let quantization = TerrainQuantization.NONE;\n  let toENU;\n  let matrix;\n\n  if (\n    defined(axisAlignedBoundingBox) &&\n    defined(minimumHeight) &&\n    defined(maximumHeight) &&\n    defined(fromENU)\n  ) {\n    const minimum = axisAlignedBoundingBox.minimum;\n    const maximum = axisAlignedBoundingBox.maximum;\n\n    const dimensions = Cartesian3.subtract(\n      maximum,\n      minimum,\n      cartesian3DimScratch\n    );\n    const hDim = maximumHeight - minimumHeight;\n    const maxDim = Math.max(Cartesian3.maximumComponent(dimensions), hDim);\n\n    if (maxDim < SHIFT_LEFT_12 - 1.0) {\n      quantization = TerrainQuantization.BITS12;\n    } else {\n      quantization = TerrainQuantization.NONE;\n    }\n\n    toENU = Matrix4.inverseTransformation(fromENU, new Matrix4());\n\n    const translation = Cartesian3.negate(minimum, cartesian3Scratch);\n    Matrix4.multiply(\n      Matrix4.fromTranslation(translation, matrix4Scratch),\n      toENU,\n      toENU\n    );\n\n    const scale = cartesian3Scratch;\n    scale.x = 1.0 / dimensions.x;\n    scale.y = 1.0 / dimensions.y;\n    scale.z = 1.0 / dimensions.z;\n    Matrix4.multiply(Matrix4.fromScale(scale, matrix4Scratch), toENU, toENU);\n\n    matrix = Matrix4.clone(fromENU);\n    Matrix4.setTranslation(matrix, Cartesian3.ZERO, matrix);\n\n    fromENU = Matrix4.clone(fromENU, new Matrix4());\n\n    const translationMatrix = Matrix4.fromTranslation(minimum, matrix4Scratch);\n    const scaleMatrix = Matrix4.fromScale(dimensions, matrix4Scratch2);\n    const st = Matrix4.multiply(translationMatrix, scaleMatrix, matrix4Scratch);\n\n    Matrix4.multiply(fromENU, st, fromENU);\n    Matrix4.multiply(matrix, st, matrix);\n  }\n\n  /**\n   * How the vertices of the mesh were compressed.\n   * @type {TerrainQuantization}\n   */\n  this.quantization = quantization;\n\n  /**\n   * The minimum height of the tile including the skirts.\n   * @type {Number}\n   */\n  this.minimumHeight = minimumHeight;\n\n  /**\n   * The maximum height of the tile.\n   * @type {Number}\n   */\n  this.maximumHeight = maximumHeight;\n\n  /**\n   * The center of the tile.\n   * @type {Cartesian3}\n   */\n  this.center = Cartesian3.clone(center);\n\n  /**\n   * A matrix that takes a vertex from the tile, transforms it to east-north-up at the center and scales\n   * it so each component is in the [0, 1] range.\n   * @type {Matrix4}\n   */\n  this.toScaledENU = toENU;\n\n  /**\n   * A matrix that restores a vertex transformed with toScaledENU back to the earth fixed reference frame\n   * @type {Matrix4}\n   */\n  this.fromScaledENU = fromENU;\n\n  /**\n   * The matrix used to decompress the terrain vertices in the shader for RTE rendering.\n   * @type {Matrix4}\n   */\n  this.matrix = matrix;\n\n  /**\n   * The terrain mesh contains normals.\n   * @type {Boolean}\n   */\n  this.hasVertexNormals = hasVertexNormals;\n\n  /**\n   * The terrain mesh contains a vertical texture coordinate following the Web Mercator projection.\n   * @type {Boolean}\n   */\n  this.hasWebMercatorT = defaultValue(hasWebMercatorT, false);\n\n  /**\n   * The terrain mesh contains geodetic surface normals, used for terrain exaggeration.\n   * @type {Boolean}\n   */\n  this.hasGeodeticSurfaceNormals = defaultValue(\n    hasGeodeticSurfaceNormals,\n    false\n  );\n\n  /**\n   * A scalar used to exaggerate terrain.\n   * @type {Number}\n   */\n  this.exaggeration = defaultValue(exaggeration, 1.0);\n\n  /**\n   * The relative height from which terrain is exaggerated.\n   */\n  this.exaggerationRelativeHeight = defaultValue(\n    exaggerationRelativeHeight,\n    0.0\n  );\n\n  /**\n   * The number of components in each vertex. This value can differ with different quantizations.\n   * @type {Number}\n   */\n  this.stride = 0;\n\n  this._offsetGeodeticSurfaceNormal = 0;\n  this._offsetVertexNormal = 0;\n\n  // Calculate the stride and offsets declared above\n  this._calculateStrideAndOffsets();\n}\n\nTerrainEncoding.prototype.encode = function (\n  vertexBuffer,\n  bufferIndex,\n  position,\n  uv,\n  height,\n  normalToPack,\n  webMercatorT,\n  geodeticSurfaceNormal\n) {\n  const u = uv.x;\n  const v = uv.y;\n\n  if (this.quantization === TerrainQuantization.BITS12) {\n    position = Matrix4.multiplyByPoint(\n      this.toScaledENU,\n      position,\n      cartesian3Scratch\n    );\n\n    position.x = CesiumMath.clamp(position.x, 0.0, 1.0);\n    position.y = CesiumMath.clamp(position.y, 0.0, 1.0);\n    position.z = CesiumMath.clamp(position.z, 0.0, 1.0);\n\n    const hDim = this.maximumHeight - this.minimumHeight;\n    const h = CesiumMath.clamp((height - this.minimumHeight) / hDim, 0.0, 1.0);\n\n    Cartesian2.fromElements(position.x, position.y, cartesian2Scratch);\n    const compressed0 = AttributeCompression.compressTextureCoordinates(\n      cartesian2Scratch\n    );\n\n    Cartesian2.fromElements(position.z, h, cartesian2Scratch);\n    const compressed1 = AttributeCompression.compressTextureCoordinates(\n      cartesian2Scratch\n    );\n\n    Cartesian2.fromElements(u, v, cartesian2Scratch);\n    const compressed2 = AttributeCompression.compressTextureCoordinates(\n      cartesian2Scratch\n    );\n\n    vertexBuffer[bufferIndex++] = compressed0;\n    vertexBuffer[bufferIndex++] = compressed1;\n    vertexBuffer[bufferIndex++] = compressed2;\n\n    if (this.hasWebMercatorT) {\n      Cartesian2.fromElements(webMercatorT, 0.0, cartesian2Scratch);\n      const compressed3 = AttributeCompression.compressTextureCoordinates(\n        cartesian2Scratch\n      );\n      vertexBuffer[bufferIndex++] = compressed3;\n    }\n  } else {\n    Cartesian3.subtract(position, this.center, cartesian3Scratch);\n\n    vertexBuffer[bufferIndex++] = cartesian3Scratch.x;\n    vertexBuffer[bufferIndex++] = cartesian3Scratch.y;\n    vertexBuffer[bufferIndex++] = cartesian3Scratch.z;\n    vertexBuffer[bufferIndex++] = height;\n    vertexBuffer[bufferIndex++] = u;\n    vertexBuffer[bufferIndex++] = v;\n\n    if (this.hasWebMercatorT) {\n      vertexBuffer[bufferIndex++] = webMercatorT;\n    }\n  }\n\n  if (this.hasVertexNormals) {\n    vertexBuffer[bufferIndex++] = AttributeCompression.octPackFloat(\n      normalToPack\n    );\n  }\n\n  if (this.hasGeodeticSurfaceNormals) {\n    vertexBuffer[bufferIndex++] = geodeticSurfaceNormal.x;\n    vertexBuffer[bufferIndex++] = geodeticSurfaceNormal.y;\n    vertexBuffer[bufferIndex++] = geodeticSurfaceNormal.z;\n  }\n\n  return bufferIndex;\n};\n\nconst scratchPosition = new Cartesian3();\nconst scratchGeodeticSurfaceNormal = new Cartesian3();\n\nTerrainEncoding.prototype.addGeodeticSurfaceNormals = function (\n  oldBuffer,\n  newBuffer,\n  ellipsoid\n) {\n  if (this.hasGeodeticSurfaceNormals) {\n    return;\n  }\n\n  const oldStride = this.stride;\n  const vertexCount = oldBuffer.length / oldStride;\n  this.hasGeodeticSurfaceNormals = true;\n  this._calculateStrideAndOffsets();\n  const newStride = this.stride;\n\n  for (let index = 0; index < vertexCount; index++) {\n    for (let offset = 0; offset < oldStride; offset++) {\n      const oldIndex = index * oldStride + offset;\n      const newIndex = index * newStride + offset;\n      newBuffer[newIndex] = oldBuffer[oldIndex];\n    }\n    const position = this.decodePosition(newBuffer, index, scratchPosition);\n    const geodeticSurfaceNormal = ellipsoid.geodeticSurfaceNormal(\n      position,\n      scratchGeodeticSurfaceNormal\n    );\n\n    const bufferIndex = index * newStride + this._offsetGeodeticSurfaceNormal;\n    newBuffer[bufferIndex] = geodeticSurfaceNormal.x;\n    newBuffer[bufferIndex + 1] = geodeticSurfaceNormal.y;\n    newBuffer[bufferIndex + 2] = geodeticSurfaceNormal.z;\n  }\n};\n\nTerrainEncoding.prototype.removeGeodeticSurfaceNormals = function (\n  oldBuffer,\n  newBuffer\n) {\n  if (!this.hasGeodeticSurfaceNormals) {\n    return;\n  }\n\n  const oldStride = this.stride;\n  const vertexCount = oldBuffer.length / oldStride;\n  this.hasGeodeticSurfaceNormals = false;\n  this._calculateStrideAndOffsets();\n  const newStride = this.stride;\n\n  for (let index = 0; index < vertexCount; index++) {\n    for (let offset = 0; offset < newStride; offset++) {\n      const oldIndex = index * oldStride + offset;\n      const newIndex = index * newStride + offset;\n      newBuffer[newIndex] = oldBuffer[oldIndex];\n    }\n  }\n};\n\nTerrainEncoding.prototype.decodePosition = function (buffer, index, result) {\n  if (!defined(result)) {\n    result = new Cartesian3();\n  }\n\n  index *= this.stride;\n\n  if (this.quantization === TerrainQuantization.BITS12) {\n    const xy = AttributeCompression.decompressTextureCoordinates(\n      buffer[index],\n      cartesian2Scratch\n    );\n    result.x = xy.x;\n    result.y = xy.y;\n\n    const zh = AttributeCompression.decompressTextureCoordinates(\n      buffer[index + 1],\n      cartesian2Scratch\n    );\n    result.z = zh.x;\n\n    return Matrix4.multiplyByPoint(this.fromScaledENU, result, result);\n  }\n\n  result.x = buffer[index];\n  result.y = buffer[index + 1];\n  result.z = buffer[index + 2];\n  return Cartesian3.add(result, this.center, result);\n};\n\nTerrainEncoding.prototype.getExaggeratedPosition = function (\n  buffer,\n  index,\n  result\n) {\n  result = this.decodePosition(buffer, index, result);\n\n  const exaggeration = this.exaggeration;\n  const exaggerationRelativeHeight = this.exaggerationRelativeHeight;\n  const hasExaggeration = exaggeration !== 1.0;\n  if (hasExaggeration && this.hasGeodeticSurfaceNormals) {\n    const geodeticSurfaceNormal = this.decodeGeodeticSurfaceNormal(\n      buffer,\n      index,\n      scratchGeodeticSurfaceNormal\n    );\n    const rawHeight = this.decodeHeight(buffer, index);\n    const heightDifference =\n      TerrainExaggeration.getHeight(\n        rawHeight,\n        exaggeration,\n        exaggerationRelativeHeight\n      ) - rawHeight;\n\n    // some math is unrolled for better performance\n    result.x += geodeticSurfaceNormal.x * heightDifference;\n    result.y += geodeticSurfaceNormal.y * heightDifference;\n    result.z += geodeticSurfaceNormal.z * heightDifference;\n  }\n\n  return result;\n};\n\nTerrainEncoding.prototype.decodeTextureCoordinates = function (\n  buffer,\n  index,\n  result\n) {\n  if (!defined(result)) {\n    result = new Cartesian2();\n  }\n\n  index *= this.stride;\n\n  if (this.quantization === TerrainQuantization.BITS12) {\n    return AttributeCompression.decompressTextureCoordinates(\n      buffer[index + 2],\n      result\n    );\n  }\n\n  return Cartesian2.fromElements(buffer[index + 4], buffer[index + 5], result);\n};\n\nTerrainEncoding.prototype.decodeHeight = function (buffer, index) {\n  index *= this.stride;\n\n  if (this.quantization === TerrainQuantization.BITS12) {\n    const zh = AttributeCompression.decompressTextureCoordinates(\n      buffer[index + 1],\n      cartesian2Scratch\n    );\n    return (\n      zh.y * (this.maximumHeight - this.minimumHeight) + this.minimumHeight\n    );\n  }\n\n  return buffer[index + 3];\n};\n\nTerrainEncoding.prototype.decodeWebMercatorT = function (buffer, index) {\n  index *= this.stride;\n\n  if (this.quantization === TerrainQuantization.BITS12) {\n    return AttributeCompression.decompressTextureCoordinates(\n      buffer[index + 3],\n      cartesian2Scratch\n    ).x;\n  }\n\n  return buffer[index + 6];\n};\n\nTerrainEncoding.prototype.getOctEncodedNormal = function (\n  buffer,\n  index,\n  result\n) {\n  index = index * this.stride + this._offsetVertexNormal;\n\n  const temp = buffer[index] / 256.0;\n  const x = Math.floor(temp);\n  const y = (temp - x) * 256.0;\n\n  return Cartesian2.fromElements(x, y, result);\n};\n\nTerrainEncoding.prototype.decodeGeodeticSurfaceNormal = function (\n  buffer,\n  index,\n  result\n) {\n  index = index * this.stride + this._offsetGeodeticSurfaceNormal;\n\n  result.x = buffer[index];\n  result.y = buffer[index + 1];\n  result.z = buffer[index + 2];\n  return result;\n};\n\nTerrainEncoding.prototype._calculateStrideAndOffsets = function () {\n  let vertexStride = 0;\n\n  switch (this.quantization) {\n    case TerrainQuantization.BITS12:\n      vertexStride += 3;\n      break;\n    default:\n      vertexStride += 6;\n  }\n  if (this.hasWebMercatorT) {\n    vertexStride += 1;\n  }\n  if (this.hasVertexNormals) {\n    this._offsetVertexNormal = vertexStride;\n    vertexStride += 1;\n  }\n  if (this.hasGeodeticSurfaceNormals) {\n    this._offsetGeodeticSurfaceNormal = vertexStride;\n    vertexStride += 3;\n  }\n\n  this.stride = vertexStride;\n};\n\nconst attributesIndicesNone = {\n  position3DAndHeight: 0,\n  textureCoordAndEncodedNormals: 1,\n  geodeticSurfaceNormal: 2,\n};\nconst attributesIndicesBits12 = {\n  compressed0: 0,\n  compressed1: 1,\n  geodeticSurfaceNormal: 2,\n};\n\nTerrainEncoding.prototype.getAttributes = function (buffer) {\n  const datatype = ComponentDatatype.FLOAT;\n  const sizeInBytes = ComponentDatatype.getSizeInBytes(datatype);\n  const strideInBytes = this.stride * sizeInBytes;\n  let offsetInBytes = 0;\n\n  const attributes = [];\n  function addAttribute(index, componentsPerAttribute) {\n    attributes.push({\n      index: index,\n      vertexBuffer: buffer,\n      componentDatatype: datatype,\n      componentsPerAttribute: componentsPerAttribute,\n      offsetInBytes: offsetInBytes,\n      strideInBytes: strideInBytes,\n    });\n    offsetInBytes += componentsPerAttribute * sizeInBytes;\n  }\n\n  if (this.quantization === TerrainQuantization.NONE) {\n    addAttribute(attributesIndicesNone.position3DAndHeight, 4);\n\n    let componentsTexCoordAndNormals = 2;\n    componentsTexCoordAndNormals += this.hasWebMercatorT ? 1 : 0;\n    componentsTexCoordAndNormals += this.hasVertexNormals ? 1 : 0;\n    addAttribute(\n      attributesIndicesNone.textureCoordAndEncodedNormals,\n      componentsTexCoordAndNormals\n    );\n\n    if (this.hasGeodeticSurfaceNormals) {\n      addAttribute(attributesIndicesNone.geodeticSurfaceNormal, 3);\n    }\n  } else {\n    // When there is no webMercatorT or vertex normals, the attribute only needs 3 components: x/y, z/h, u/v.\n    // WebMercatorT and vertex normals each take up one component, so if only one of them is present the first\n    // attribute gets a 4th component. If both are present, we need an additional attribute that has 1 component.\n    const usingAttribute0Component4 =\n      this.hasWebMercatorT || this.hasVertexNormals;\n    const usingAttribute1Component1 =\n      this.hasWebMercatorT && this.hasVertexNormals;\n    addAttribute(\n      attributesIndicesBits12.compressed0,\n      usingAttribute0Component4 ? 4 : 3\n    );\n\n    if (usingAttribute1Component1) {\n      addAttribute(attributesIndicesBits12.compressed1, 1);\n    }\n\n    if (this.hasGeodeticSurfaceNormals) {\n      addAttribute(attributesIndicesBits12.geodeticSurfaceNormal, 3);\n    }\n  }\n\n  return attributes;\n};\n\nTerrainEncoding.prototype.getAttributeLocations = function () {\n  if (this.quantization === TerrainQuantization.NONE) {\n    return attributesIndicesNone;\n  }\n  return attributesIndicesBits12;\n};\n\nTerrainEncoding.clone = function (encoding, result) {\n  if (!defined(encoding)) {\n    return undefined;\n  }\n  if (!defined(result)) {\n    result = new TerrainEncoding();\n  }\n\n  result.quantization = encoding.quantization;\n  result.minimumHeight = encoding.minimumHeight;\n  result.maximumHeight = encoding.maximumHeight;\n  result.center = Cartesian3.clone(encoding.center);\n  result.toScaledENU = Matrix4.clone(encoding.toScaledENU);\n  result.fromScaledENU = Matrix4.clone(encoding.fromScaledENU);\n  result.matrix = Matrix4.clone(encoding.matrix);\n  result.hasVertexNormals = encoding.hasVertexNormals;\n  result.hasWebMercatorT = encoding.hasWebMercatorT;\n  result.hasGeodeticSurfaceNormals = encoding.hasGeodeticSurfaceNormals;\n  result.exaggeration = encoding.exaggeration;\n  result.exaggerationRelativeHeight = encoding.exaggerationRelativeHeight;\n\n  result._calculateStrideAndOffsets();\n\n  return result;\n};\nexport default TerrainEncoding;\n","import Cartesian3 from \"./Cartesian3.js\";\n\n/**\n * @private\n */\nconst TerrainExaggeration = {};\n\n/**\n * Scales a height relative to an offset.\n *\n * @param {Number} height The height.\n * @param {Number} scale A scalar used to exaggerate the terrain. If the value is 1.0 there will be no effect.\n * @param {Number} relativeHeight The height relative to which terrain is exaggerated. If the value is 0.0 terrain will be exaggerated relative to the ellipsoid surface.\n */\nTerrainExaggeration.getHeight = function (height, scale, relativeHeight) {\n  return (height - relativeHeight) * scale + relativeHeight;\n};\n\nconst scratchCartographic = new Cartesian3();\n\n/**\n * Scales a position by exaggeration.\n */\nTerrainExaggeration.getPosition = function (\n  position,\n  ellipsoid,\n  terrainExaggeration,\n  terrainExaggerationRelativeHeight,\n  result\n) {\n  const cartographic = ellipsoid.cartesianToCartographic(\n    position,\n    scratchCartographic\n  );\n  const newHeight = TerrainExaggeration.getHeight(\n    cartographic.height,\n    terrainExaggeration,\n    terrainExaggerationRelativeHeight\n  );\n  return Cartesian3.fromRadians(\n    cartographic.longitude,\n    cartographic.latitude,\n    newHeight,\n    ellipsoid,\n    result\n  );\n};\n\nexport default TerrainExaggeration;\n","import defaultValue from \"./defaultValue.js\";\n\n/**\n * A mesh plus related metadata for a single tile of terrain.  Instances of this type are\n * usually created from raw {@link TerrainData}.\n *\n * @alias TerrainMesh\n * @constructor\n *\n * @param {Cartesian3} center The center of the tile.  Vertex positions are specified relative to this center.\n * @param {Float32Array} vertices The vertex data, including positions, texture coordinates, and heights.\n *                       The vertex data is in the order [X, Y, Z, H, U, V], where X, Y, and Z represent\n *                       the Cartesian position of the vertex, H is the height above the ellipsoid, and\n *                       U and V are the texture coordinates.\n * @param {Uint8Array|Uint16Array|Uint32Array} indices The indices describing how the vertices are connected to form triangles.\n * @param {Number} indexCountWithoutSkirts The index count of the mesh not including skirts.\n * @param {Number} vertexCountWithoutSkirts The vertex count of the mesh not including skirts.\n * @param {Number} minimumHeight The lowest height in the tile, in meters above the ellipsoid.\n * @param {Number} maximumHeight The highest height in the tile, in meters above the ellipsoid.\n * @param {BoundingSphere} boundingSphere3D A bounding sphere that completely contains the tile.\n * @param {Cartesian3} occludeePointInScaledSpace The occludee point of the tile, represented in ellipsoid-\n *                     scaled space, and used for horizon culling.  If this point is below the horizon,\n *                     the tile is considered to be entirely below the horizon.\n * @param {Number} [vertexStride=6] The number of components in each vertex.\n * @param {OrientedBoundingBox} [orientedBoundingBox] A bounding box that completely contains the tile.\n * @param {TerrainEncoding} encoding Information used to decode the mesh.\n * @param {Number[]} westIndicesSouthToNorth The indices of the vertices on the Western edge of the tile, ordered from South to North (clockwise).\n * @param {Number[]} southIndicesEastToWest The indices of the vertices on the Southern edge of the tile, ordered from East to West (clockwise).\n * @param {Number[]} eastIndicesNorthToSouth The indices of the vertices on the Eastern edge of the tile, ordered from North to South (clockwise).\n * @param {Number[]} northIndicesWestToEast The indices of the vertices on the Northern edge of the tile, ordered from West to East (clockwise).\n *\n * @private\n */\nfunction TerrainMesh(\n  center,\n  vertices,\n  indices,\n  indexCountWithoutSkirts,\n  vertexCountWithoutSkirts,\n  minimumHeight,\n  maximumHeight,\n  boundingSphere3D,\n  occludeePointInScaledSpace,\n  vertexStride,\n  orientedBoundingBox,\n  encoding,\n  westIndicesSouthToNorth,\n  southIndicesEastToWest,\n  eastIndicesNorthToSouth,\n  northIndicesWestToEast\n) {\n  /**\n   * The center of the tile.  Vertex positions are specified relative to this center.\n   * @type {Cartesian3}\n   */\n  this.center = center;\n\n  /**\n   * The vertex data, including positions, texture coordinates, and heights.\n   * The vertex data is in the order [X, Y, Z, H, U, V], where X, Y, and Z represent\n   * the Cartesian position of the vertex, H is the height above the ellipsoid, and\n   * U and V are the texture coordinates.  The vertex data may have additional attributes after those\n   * mentioned above when the {@link TerrainMesh#stride} is greater than 6.\n   * @type {Float32Array}\n   */\n  this.vertices = vertices;\n\n  /**\n   * The number of components in each vertex.  Typically this is 6 for the 6 components\n   * [X, Y, Z, H, U, V], but if each vertex has additional data (such as a vertex normal), this value\n   * may be higher.\n   * @type {Number}\n   */\n  this.stride = defaultValue(vertexStride, 6);\n\n  /**\n   * The indices describing how the vertices are connected to form triangles.\n   * @type {Uint8Array|Uint16Array|Uint32Array}\n   */\n  this.indices = indices;\n\n  /**\n   * The index count of the mesh not including skirts.\n   * @type {Number}\n   */\n  this.indexCountWithoutSkirts = indexCountWithoutSkirts;\n\n  /**\n   * The vertex count of the mesh not including skirts.\n   * @type {Number}\n   */\n  this.vertexCountWithoutSkirts = vertexCountWithoutSkirts;\n\n  /**\n   * The lowest height in the tile, in meters above the ellipsoid.\n   * @type {Number}\n   */\n  this.minimumHeight = minimumHeight;\n\n  /**\n   * The highest height in the tile, in meters above the ellipsoid.\n   * @type {Number}\n   */\n  this.maximumHeight = maximumHeight;\n\n  /**\n   * A bounding sphere that completely contains the tile.\n   * @type {BoundingSphere}\n   */\n  this.boundingSphere3D = boundingSphere3D;\n\n  /**\n   * The occludee point of the tile, represented in ellipsoid-\n   * scaled space, and used for horizon culling.  If this point is below the horizon,\n   * the tile is considered to be entirely below the horizon.\n   * @type {Cartesian3}\n   */\n  this.occludeePointInScaledSpace = occludeePointInScaledSpace;\n\n  /**\n   * A bounding box that completely contains the tile.\n   * @type {OrientedBoundingBox}\n   */\n  this.orientedBoundingBox = orientedBoundingBox;\n\n  /**\n   * Information for decoding the mesh vertices.\n   * @type {TerrainEncoding}\n   */\n  this.encoding = encoding;\n\n  /**\n   * The indices of the vertices on the Western edge of the tile, ordered from South to North (clockwise).\n   * @type {Number[]}\n   */\n  this.westIndicesSouthToNorth = westIndicesSouthToNorth;\n\n  /**\n   * The indices of the vertices on the Southern edge of the tile, ordered from East to West (clockwise).\n   * @type {Number[]}\n   */\n  this.southIndicesEastToWest = southIndicesEastToWest;\n\n  /**\n   * The indices of the vertices on the Eastern edge of the tile, ordered from North to South (clockwise).\n   * @type {Number[]}\n   */\n  this.eastIndicesNorthToSouth = eastIndicesNorthToSouth;\n\n  /**\n   * The indices of the vertices on the Northern edge of the tile, ordered from West to East (clockwise).\n   * @type {Number[]}\n   */\n  this.northIndicesWestToEast = northIndicesWestToEast;\n}\nexport default TerrainMesh;\n","import defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport IndexDatatype from \"./IndexDatatype.js\";\nimport CesiumMath from \"./Math.js\";\n\n/**\n * Provides terrain or other geometry for the surface of an ellipsoid.  The surface geometry is\n * organized into a pyramid of tiles according to a {@link TilingScheme}.  This type describes an\n * interface and is not intended to be instantiated directly.\n *\n * @alias TerrainProvider\n * @constructor\n *\n * @see EllipsoidTerrainProvider\n * @see CesiumTerrainProvider\n * @see VRTheWorldTerrainProvider\n * @see GoogleEarthEnterpriseTerrainProvider\n */\nfunction TerrainProvider() {\n  DeveloperError.throwInstantiationError();\n}\n\nObject.defineProperties(TerrainProvider.prototype, {\n  /**\n   * Gets an event that is raised when the terrain provider encounters an asynchronous error..  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof TerrainProvider.prototype\n   * @type {Event<TerrainProvider.ErrorEvent>}\n   * @readonly\n   */\n  errorEvent: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets the credit to display when this terrain provider is active.  Typically this is used to credit\n   * the source of the terrain. This function should\n   * not be called before {@link TerrainProvider#ready} returns true.\n   * @memberof TerrainProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets the tiling scheme used by the provider.  This function should\n   * not be called before {@link TerrainProvider#ready} returns true.\n   * @memberof TerrainProvider.prototype\n   * @type {TilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof TerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof TerrainProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider includes a water mask.  The water mask\n   * indicates which areas of the globe are water rather than land, so they can be rendered\n   * as a reflective surface with animated waves.  This function should not be\n   * called before {@link TerrainProvider#ready} returns true.\n   * @memberof TerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasWaterMask: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets a value indicating whether or not the requested tiles include vertex normals.\n   * This function should not be called before {@link TerrainProvider#ready} returns true.\n   * @memberof TerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasVertexNormals: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets an object that can be used to determine availability of terrain from this provider, such as\n   * at points and in rectangles.  This function should not be called before\n   * {@link TerrainProvider#ready} returns true.  This property may be undefined if availability\n   * information is not available.\n   * @memberof TerrainProvider.prototype\n   * @type {TileAvailability}\n   * @readonly\n   */\n  availability: {\n    get: DeveloperError.throwInstantiationError,\n  },\n});\n\nconst regularGridIndicesCache = [];\n\n/**\n * Gets a list of indices for a triangle mesh representing a regular grid.  Calling\n * this function multiple times with the same grid width and height returns the\n * same list of indices.  The total number of vertices must be less than or equal\n * to 65536.\n *\n * @param {Number} width The number of vertices in the regular grid in the horizontal direction.\n * @param {Number} height The number of vertices in the regular grid in the vertical direction.\n * @returns {Uint16Array|Uint32Array} The list of indices. Uint16Array gets returned for 64KB or less and Uint32Array for 4GB or less.\n */\nTerrainProvider.getRegularGridIndices = function (width, height) {\n  //>>includeStart('debug', pragmas.debug);\n  if (width * height >= CesiumMath.FOUR_GIGABYTES) {\n    throw new DeveloperError(\n      \"The total number of vertices (width * height) must be less than 4,294,967,296.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  let byWidth = regularGridIndicesCache[width];\n  if (!defined(byWidth)) {\n    regularGridIndicesCache[width] = byWidth = [];\n  }\n\n  let indices = byWidth[height];\n  if (!defined(indices)) {\n    if (width * height < CesiumMath.SIXTY_FOUR_KILOBYTES) {\n      indices = byWidth[height] = new Uint16Array(\n        (width - 1) * (height - 1) * 6\n      );\n    } else {\n      indices = byWidth[height] = new Uint32Array(\n        (width - 1) * (height - 1) * 6\n      );\n    }\n    addRegularGridIndices(width, height, indices, 0);\n  }\n\n  return indices;\n};\n\nconst regularGridAndEdgeIndicesCache = [];\n\n/**\n * @private\n */\nTerrainProvider.getRegularGridIndicesAndEdgeIndices = function (width, height) {\n  //>>includeStart('debug', pragmas.debug);\n  if (width * height >= CesiumMath.FOUR_GIGABYTES) {\n    throw new DeveloperError(\n      \"The total number of vertices (width * height) must be less than 4,294,967,296.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  let byWidth = regularGridAndEdgeIndicesCache[width];\n  if (!defined(byWidth)) {\n    regularGridAndEdgeIndicesCache[width] = byWidth = [];\n  }\n\n  let indicesAndEdges = byWidth[height];\n  if (!defined(indicesAndEdges)) {\n    const indices = TerrainProvider.getRegularGridIndices(width, height);\n\n    const edgeIndices = getEdgeIndices(width, height);\n    const westIndicesSouthToNorth = edgeIndices.westIndicesSouthToNorth;\n    const southIndicesEastToWest = edgeIndices.southIndicesEastToWest;\n    const eastIndicesNorthToSouth = edgeIndices.eastIndicesNorthToSouth;\n    const northIndicesWestToEast = edgeIndices.northIndicesWestToEast;\n\n    indicesAndEdges = byWidth[height] = {\n      indices: indices,\n      westIndicesSouthToNorth: westIndicesSouthToNorth,\n      southIndicesEastToWest: southIndicesEastToWest,\n      eastIndicesNorthToSouth: eastIndicesNorthToSouth,\n      northIndicesWestToEast: northIndicesWestToEast,\n    };\n  }\n\n  return indicesAndEdges;\n};\n\nconst regularGridAndSkirtAndEdgeIndicesCache = [];\n\n/**\n * @private\n */\nTerrainProvider.getRegularGridAndSkirtIndicesAndEdgeIndices = function (\n  width,\n  height\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (width * height >= CesiumMath.FOUR_GIGABYTES) {\n    throw new DeveloperError(\n      \"The total number of vertices (width * height) must be less than 4,294,967,296.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  let byWidth = regularGridAndSkirtAndEdgeIndicesCache[width];\n  if (!defined(byWidth)) {\n    regularGridAndSkirtAndEdgeIndicesCache[width] = byWidth = [];\n  }\n\n  let indicesAndEdges = byWidth[height];\n  if (!defined(indicesAndEdges)) {\n    const gridVertexCount = width * height;\n    const gridIndexCount = (width - 1) * (height - 1) * 6;\n    const edgeVertexCount = width * 2 + height * 2;\n    const edgeIndexCount = Math.max(0, edgeVertexCount - 4) * 6;\n    const vertexCount = gridVertexCount + edgeVertexCount;\n    const indexCount = gridIndexCount + edgeIndexCount;\n\n    const edgeIndices = getEdgeIndices(width, height);\n    const westIndicesSouthToNorth = edgeIndices.westIndicesSouthToNorth;\n    const southIndicesEastToWest = edgeIndices.southIndicesEastToWest;\n    const eastIndicesNorthToSouth = edgeIndices.eastIndicesNorthToSouth;\n    const northIndicesWestToEast = edgeIndices.northIndicesWestToEast;\n\n    const indices = IndexDatatype.createTypedArray(vertexCount, indexCount);\n    addRegularGridIndices(width, height, indices, 0);\n    TerrainProvider.addSkirtIndices(\n      westIndicesSouthToNorth,\n      southIndicesEastToWest,\n      eastIndicesNorthToSouth,\n      northIndicesWestToEast,\n      gridVertexCount,\n      indices,\n      gridIndexCount\n    );\n\n    indicesAndEdges = byWidth[height] = {\n      indices: indices,\n      westIndicesSouthToNorth: westIndicesSouthToNorth,\n      southIndicesEastToWest: southIndicesEastToWest,\n      eastIndicesNorthToSouth: eastIndicesNorthToSouth,\n      northIndicesWestToEast: northIndicesWestToEast,\n      indexCountWithoutSkirts: gridIndexCount,\n    };\n  }\n\n  return indicesAndEdges;\n};\n\n/**\n * @private\n */\nTerrainProvider.addSkirtIndices = function (\n  westIndicesSouthToNorth,\n  southIndicesEastToWest,\n  eastIndicesNorthToSouth,\n  northIndicesWestToEast,\n  vertexCount,\n  indices,\n  offset\n) {\n  let vertexIndex = vertexCount;\n  offset = addSkirtIndices(\n    westIndicesSouthToNorth,\n    vertexIndex,\n    indices,\n    offset\n  );\n  vertexIndex += westIndicesSouthToNorth.length;\n  offset = addSkirtIndices(\n    southIndicesEastToWest,\n    vertexIndex,\n    indices,\n    offset\n  );\n  vertexIndex += southIndicesEastToWest.length;\n  offset = addSkirtIndices(\n    eastIndicesNorthToSouth,\n    vertexIndex,\n    indices,\n    offset\n  );\n  vertexIndex += eastIndicesNorthToSouth.length;\n  addSkirtIndices(northIndicesWestToEast, vertexIndex, indices, offset);\n};\n\nfunction getEdgeIndices(width, height) {\n  const westIndicesSouthToNorth = new Array(height);\n  const southIndicesEastToWest = new Array(width);\n  const eastIndicesNorthToSouth = new Array(height);\n  const northIndicesWestToEast = new Array(width);\n\n  let i;\n  for (i = 0; i < width; ++i) {\n    northIndicesWestToEast[i] = i;\n    southIndicesEastToWest[i] = width * height - 1 - i;\n  }\n\n  for (i = 0; i < height; ++i) {\n    eastIndicesNorthToSouth[i] = (i + 1) * width - 1;\n    westIndicesSouthToNorth[i] = (height - i - 1) * width;\n  }\n\n  return {\n    westIndicesSouthToNorth: westIndicesSouthToNorth,\n    southIndicesEastToWest: southIndicesEastToWest,\n    eastIndicesNorthToSouth: eastIndicesNorthToSouth,\n    northIndicesWestToEast: northIndicesWestToEast,\n  };\n}\n\nfunction addRegularGridIndices(width, height, indices, offset) {\n  let index = 0;\n  for (let j = 0; j < height - 1; ++j) {\n    for (let i = 0; i < width - 1; ++i) {\n      const upperLeft = index;\n      const lowerLeft = upperLeft + width;\n      const lowerRight = lowerLeft + 1;\n      const upperRight = upperLeft + 1;\n\n      indices[offset++] = upperLeft;\n      indices[offset++] = lowerLeft;\n      indices[offset++] = upperRight;\n      indices[offset++] = upperRight;\n      indices[offset++] = lowerLeft;\n      indices[offset++] = lowerRight;\n\n      ++index;\n    }\n    ++index;\n  }\n}\n\nfunction addSkirtIndices(edgeIndices, vertexIndex, indices, offset) {\n  let previousIndex = edgeIndices[0];\n\n  const length = edgeIndices.length;\n  for (let i = 1; i < length; ++i) {\n    const index = edgeIndices[i];\n\n    indices[offset++] = previousIndex;\n    indices[offset++] = index;\n    indices[offset++] = vertexIndex;\n\n    indices[offset++] = vertexIndex;\n    indices[offset++] = index;\n    indices[offset++] = vertexIndex + 1;\n\n    previousIndex = index;\n    ++vertexIndex;\n  }\n\n  return offset;\n}\n\n/**\n * Specifies the quality of terrain created from heightmaps.  A value of 1.0 will\n * ensure that adjacent heightmap vertices are separated by no more than\n * {@link Globe.maximumScreenSpaceError} screen pixels and will probably go very slowly.\n * A value of 0.5 will cut the estimated level zero geometric error in half, allowing twice the\n * screen pixels between adjacent heightmap vertices and thus rendering more quickly.\n * @type {Number}\n */\nTerrainProvider.heightmapTerrainQuality = 0.25;\n\n/**\n * Determines an appropriate geometric error estimate when the geometry comes from a heightmap.\n *\n * @param {Ellipsoid} ellipsoid The ellipsoid to which the terrain is attached.\n * @param {Number} tileImageWidth The width, in pixels, of the heightmap associated with a single tile.\n * @param {Number} numberOfTilesAtLevelZero The number of tiles in the horizontal direction at tile level zero.\n * @returns {Number} An estimated geometric error.\n */\nTerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap = function (\n  ellipsoid,\n  tileImageWidth,\n  numberOfTilesAtLevelZero\n) {\n  return (\n    (ellipsoid.maximumRadius *\n      2 *\n      Math.PI *\n      TerrainProvider.heightmapTerrainQuality) /\n    (tileImageWidth * numberOfTilesAtLevelZero)\n  );\n};\n\n/**\n * Requests the geometry for a given tile.  This function should not be called before\n * {@link TerrainProvider#ready} returns true.  The result must include terrain data and\n * may optionally include a water mask and an indication of which child tiles are available.\n * @function\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @param {Request} [request] The request object. Intended for internal use only.\n *\n * @returns {Promise.<TerrainData>|undefined} A promise for the requested geometry.  If this method\n *          returns undefined instead of a promise, it is an indication that too many requests are already\n *          pending and the request will be retried later.\n */\nTerrainProvider.prototype.requestTileGeometry =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Gets the maximum geometric error allowed in a tile at a given level.  This function should not be\n * called before {@link TerrainProvider#ready} returns true.\n * @function\n *\n * @param {Number} level The tile level for which to get the maximum geometric error.\n * @returns {Number} The maximum geometric error.\n */\nTerrainProvider.prototype.getLevelMaximumGeometricError =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Determines whether data for a tile is available to be loaded.\n * @function\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @returns {Boolean|undefined} Undefined if not supported by the terrain provider, otherwise true or false.\n */\nTerrainProvider.prototype.getTileDataAvailable =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Makes sure we load availability data for a tile\n * @function\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @returns {undefined|Promise<void>} Undefined if nothing need to be loaded or a Promise that resolves when all required tiles are loaded\n */\nTerrainProvider.prototype.loadTileDataAvailability =\n  DeveloperError.throwInstantiationError;\nexport default TerrainProvider;\n\n/**\n * A function that is called when an error occurs.\n * @callback TerrainProvider.ErrorEvent\n *\n * @this TerrainProvider\n * @param {TileProviderError} err An object holding details about the error that occurred.\n */\n","/**\n * This enumerated type is used to determine how the vertices of the terrain mesh are compressed.\n *\n * @enum {Number}\n *\n * @private\n */\nconst TerrainQuantization = {\n  /**\n   * The vertices are not compressed.\n   *\n   * @type {Number}\n   * @constant\n   */\n  NONE: 0,\n\n  /**\n   * The vertices are compressed to 12 bits.\n   *\n   * @type {Number}\n   * @constant\n   */\n  BITS12: 1,\n};\nexport default Object.freeze(TerrainQuantization);\n","import binarySearch from \"./binarySearch.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport defined from \"./defined.js\";\nimport Rectangle from \"./Rectangle.js\";\n\n/**\n * Reports the availability of tiles in a {@link TilingScheme}.\n *\n * @alias TileAvailability\n * @constructor\n *\n * @param {TilingScheme} tilingScheme The tiling scheme in which to report availability.\n * @param {Number} maximumLevel The maximum tile level that is potentially available.\n */\nfunction TileAvailability(tilingScheme, maximumLevel) {\n  this._tilingScheme = tilingScheme;\n  this._maximumLevel = maximumLevel;\n\n  this._rootNodes = [];\n}\n\nconst rectangleScratch = new Rectangle();\n\nfunction findNode(level, x, y, nodes) {\n  const count = nodes.length;\n  for (let i = 0; i < count; ++i) {\n    const node = nodes[i];\n    if (node.x === x && node.y === y && node.level === level) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * Marks a rectangular range of tiles in a particular level as being available.  For best performance,\n * add your ranges in order of increasing level.\n *\n * @param {Number} level The level.\n * @param {Number} startX The X coordinate of the first available tiles at the level.\n * @param {Number} startY The Y coordinate of the first available tiles at the level.\n * @param {Number} endX The X coordinate of the last available tiles at the level.\n * @param {Number} endY The Y coordinate of the last available tiles at the level.\n */\nTileAvailability.prototype.addAvailableTileRange = function (\n  level,\n  startX,\n  startY,\n  endX,\n  endY\n) {\n  const tilingScheme = this._tilingScheme;\n\n  const rootNodes = this._rootNodes;\n  if (level === 0) {\n    for (let y = startY; y <= endY; ++y) {\n      for (let x = startX; x <= endX; ++x) {\n        if (!findNode(level, x, y, rootNodes)) {\n          rootNodes.push(new QuadtreeNode(tilingScheme, undefined, 0, x, y));\n        }\n      }\n    }\n  }\n\n  tilingScheme.tileXYToRectangle(startX, startY, level, rectangleScratch);\n  const west = rectangleScratch.west;\n  const north = rectangleScratch.north;\n\n  tilingScheme.tileXYToRectangle(endX, endY, level, rectangleScratch);\n  const east = rectangleScratch.east;\n  const south = rectangleScratch.south;\n\n  const rectangleWithLevel = new RectangleWithLevel(\n    level,\n    west,\n    south,\n    east,\n    north\n  );\n\n  for (let i = 0; i < rootNodes.length; ++i) {\n    const rootNode = rootNodes[i];\n    if (rectanglesOverlap(rootNode.extent, rectangleWithLevel)) {\n      putRectangleInQuadtree(this._maximumLevel, rootNode, rectangleWithLevel);\n    }\n  }\n};\n\n/**\n * Determines the level of the most detailed tile covering the position.  This function\n * usually completes in time logarithmic to the number of rectangles added with\n * {@link TileAvailability#addAvailableTileRange}.\n *\n * @param {Cartographic} position The position for which to determine the maximum available level.  The height component is ignored.\n * @return {Number} The level of the most detailed tile covering the position.\n * @throws {DeveloperError} If position is outside any tile according to the tiling scheme.\n */\nTileAvailability.prototype.computeMaximumLevelAtPosition = function (position) {\n  // Find the root node that contains this position.\n  let node;\n  for (let nodeIndex = 0; nodeIndex < this._rootNodes.length; ++nodeIndex) {\n    const rootNode = this._rootNodes[nodeIndex];\n    if (rectangleContainsPosition(rootNode.extent, position)) {\n      node = rootNode;\n      break;\n    }\n  }\n\n  if (!defined(node)) {\n    return -1;\n  }\n\n  return findMaxLevelFromNode(undefined, node, position);\n};\n\nconst rectanglesScratch = [];\nconst remainingToCoverByLevelScratch = [];\nconst westScratch = new Rectangle();\nconst eastScratch = new Rectangle();\n\n/**\n * Finds the most detailed level that is available _everywhere_ within a given rectangle.  More detailed\n * tiles may be available in parts of the rectangle, but not the whole thing.  The return value of this\n * function may be safely passed to {@link sampleTerrain} for any position within the rectangle.  This function\n * usually completes in time logarithmic to the number of rectangles added with\n * {@link TileAvailability#addAvailableTileRange}.\n *\n * @param {Rectangle} rectangle The rectangle.\n * @return {Number} The best available level for the entire rectangle.\n */\nTileAvailability.prototype.computeBestAvailableLevelOverRectangle = function (\n  rectangle\n) {\n  const rectangles = rectanglesScratch;\n  rectangles.length = 0;\n\n  if (rectangle.east < rectangle.west) {\n    // Rectangle crosses the IDL, make it two rectangles.\n    rectangles.push(\n      Rectangle.fromRadians(\n        -Math.PI,\n        rectangle.south,\n        rectangle.east,\n        rectangle.north,\n        westScratch\n      )\n    );\n    rectangles.push(\n      Rectangle.fromRadians(\n        rectangle.west,\n        rectangle.south,\n        Math.PI,\n        rectangle.north,\n        eastScratch\n      )\n    );\n  } else {\n    rectangles.push(rectangle);\n  }\n\n  const remainingToCoverByLevel = remainingToCoverByLevelScratch;\n  remainingToCoverByLevel.length = 0;\n\n  let i;\n  for (i = 0; i < this._rootNodes.length; ++i) {\n    updateCoverageWithNode(\n      remainingToCoverByLevel,\n      this._rootNodes[i],\n      rectangles\n    );\n  }\n\n  for (i = remainingToCoverByLevel.length - 1; i >= 0; --i) {\n    if (\n      defined(remainingToCoverByLevel[i]) &&\n      remainingToCoverByLevel[i].length === 0\n    ) {\n      return i;\n    }\n  }\n\n  return 0;\n};\n\nconst cartographicScratch = new Cartographic();\n\n/**\n * Determines if a particular tile is available.\n * @param {Number} level The tile level to check.\n * @param {Number} x The X coordinate of the tile to check.\n * @param {Number} y The Y coordinate of the tile to check.\n * @return {Boolean} True if the tile is available; otherwise, false.\n */\nTileAvailability.prototype.isTileAvailable = function (level, x, y) {\n  // Get the center of the tile and find the maximum level at that position.\n  // Because availability is by tile, if the level is available at that point, it\n  // is sure to be available for the whole tile.  We assume that if a tile at level n exists,\n  // then all its parent tiles back to level 0 exist too.  This isn't really enforced\n  // anywhere, but Cesium would never load a tile for which this is not true.\n  const rectangle = this._tilingScheme.tileXYToRectangle(\n    x,\n    y,\n    level,\n    rectangleScratch\n  );\n  Rectangle.center(rectangle, cartographicScratch);\n  return this.computeMaximumLevelAtPosition(cartographicScratch) >= level;\n};\n\n/**\n * Computes a bit mask indicating which of a tile's four children exist.\n * If a child's bit is set, a tile is available for that child.  If it is cleared,\n * the tile is not available.  The bit values are as follows:\n * <table>\n *     <tr><th>Bit Position</th><th>Bit Value</th><th>Child Tile</th></tr>\n *     <tr><td>0</td><td>1</td><td>Southwest</td></tr>\n *     <tr><td>1</td><td>2</td><td>Southeast</td></tr>\n *     <tr><td>2</td><td>4</td><td>Northwest</td></tr>\n *     <tr><td>3</td><td>8</td><td>Northeast</td></tr>\n * </table>\n *\n * @param {Number} level The level of the parent tile.\n * @param {Number} x The X coordinate of the parent tile.\n * @param {Number} y The Y coordinate of the parent tile.\n * @return {Number} The bit mask indicating child availability.\n */\nTileAvailability.prototype.computeChildMaskForTile = function (level, x, y) {\n  const childLevel = level + 1;\n  if (childLevel >= this._maximumLevel) {\n    return 0;\n  }\n\n  let mask = 0;\n\n  mask |= this.isTileAvailable(childLevel, 2 * x, 2 * y + 1) ? 1 : 0;\n  mask |= this.isTileAvailable(childLevel, 2 * x + 1, 2 * y + 1) ? 2 : 0;\n  mask |= this.isTileAvailable(childLevel, 2 * x, 2 * y) ? 4 : 0;\n  mask |= this.isTileAvailable(childLevel, 2 * x + 1, 2 * y) ? 8 : 0;\n\n  return mask;\n};\n\nfunction QuadtreeNode(tilingScheme, parent, level, x, y) {\n  this.tilingScheme = tilingScheme;\n  this.parent = parent;\n  this.level = level;\n  this.x = x;\n  this.y = y;\n  this.extent = tilingScheme.tileXYToRectangle(x, y, level);\n\n  this.rectangles = [];\n  this._sw = undefined;\n  this._se = undefined;\n  this._nw = undefined;\n  this._ne = undefined;\n}\n\nObject.defineProperties(QuadtreeNode.prototype, {\n  nw: {\n    get: function () {\n      if (!this._nw) {\n        this._nw = new QuadtreeNode(\n          this.tilingScheme,\n          this,\n          this.level + 1,\n          this.x * 2,\n          this.y * 2\n        );\n      }\n      return this._nw;\n    },\n  },\n\n  ne: {\n    get: function () {\n      if (!this._ne) {\n        this._ne = new QuadtreeNode(\n          this.tilingScheme,\n          this,\n          this.level + 1,\n          this.x * 2 + 1,\n          this.y * 2\n        );\n      }\n      return this._ne;\n    },\n  },\n\n  sw: {\n    get: function () {\n      if (!this._sw) {\n        this._sw = new QuadtreeNode(\n          this.tilingScheme,\n          this,\n          this.level + 1,\n          this.x * 2,\n          this.y * 2 + 1\n        );\n      }\n      return this._sw;\n    },\n  },\n\n  se: {\n    get: function () {\n      if (!this._se) {\n        this._se = new QuadtreeNode(\n          this.tilingScheme,\n          this,\n          this.level + 1,\n          this.x * 2 + 1,\n          this.y * 2 + 1\n        );\n      }\n      return this._se;\n    },\n  },\n});\n\nfunction RectangleWithLevel(level, west, south, east, north) {\n  this.level = level;\n  this.west = west;\n  this.south = south;\n  this.east = east;\n  this.north = north;\n}\n\nfunction rectanglesOverlap(rectangle1, rectangle2) {\n  const west = Math.max(rectangle1.west, rectangle2.west);\n  const south = Math.max(rectangle1.south, rectangle2.south);\n  const east = Math.min(rectangle1.east, rectangle2.east);\n  const north = Math.min(rectangle1.north, rectangle2.north);\n  return south < north && west < east;\n}\n\nfunction putRectangleInQuadtree(maxDepth, node, rectangle) {\n  while (node.level < maxDepth) {\n    if (rectangleFullyContainsRectangle(node.nw.extent, rectangle)) {\n      node = node.nw;\n    } else if (rectangleFullyContainsRectangle(node.ne.extent, rectangle)) {\n      node = node.ne;\n    } else if (rectangleFullyContainsRectangle(node.sw.extent, rectangle)) {\n      node = node.sw;\n    } else if (rectangleFullyContainsRectangle(node.se.extent, rectangle)) {\n      node = node.se;\n    } else {\n      break;\n    }\n  }\n\n  if (\n    node.rectangles.length === 0 ||\n    node.rectangles[node.rectangles.length - 1].level <= rectangle.level\n  ) {\n    node.rectangles.push(rectangle);\n  } else {\n    // Maintain ordering by level when inserting.\n    let index = binarySearch(\n      node.rectangles,\n      rectangle.level,\n      rectangleLevelComparator\n    );\n    if (index < 0) {\n      index = ~index;\n    }\n    node.rectangles.splice(index, 0, rectangle);\n  }\n}\n\nfunction rectangleLevelComparator(a, b) {\n  return a.level - b;\n}\n\nfunction rectangleFullyContainsRectangle(potentialContainer, rectangleToTest) {\n  return (\n    rectangleToTest.west >= potentialContainer.west &&\n    rectangleToTest.east <= potentialContainer.east &&\n    rectangleToTest.south >= potentialContainer.south &&\n    rectangleToTest.north <= potentialContainer.north\n  );\n}\n\nfunction rectangleContainsPosition(potentialContainer, positionToTest) {\n  return (\n    positionToTest.longitude >= potentialContainer.west &&\n    positionToTest.longitude <= potentialContainer.east &&\n    positionToTest.latitude >= potentialContainer.south &&\n    positionToTest.latitude <= potentialContainer.north\n  );\n}\n\nfunction findMaxLevelFromNode(stopNode, node, position) {\n  let maxLevel = 0;\n\n  // Find the deepest quadtree node containing this point.\n  let found = false;\n  while (!found) {\n    const nw = node._nw && rectangleContainsPosition(node._nw.extent, position);\n    const ne = node._ne && rectangleContainsPosition(node._ne.extent, position);\n    const sw = node._sw && rectangleContainsPosition(node._sw.extent, position);\n    const se = node._se && rectangleContainsPosition(node._se.extent, position);\n\n    // The common scenario is that the point is in only one quadrant and we can simply\n    // iterate down the tree.  But if the point is on a boundary between tiles, it is\n    // in multiple tiles and we need to check all of them, so use recursion.\n    if (nw + ne + sw + se > 1) {\n      if (nw) {\n        maxLevel = Math.max(\n          maxLevel,\n          findMaxLevelFromNode(node, node._nw, position)\n        );\n      }\n      if (ne) {\n        maxLevel = Math.max(\n          maxLevel,\n          findMaxLevelFromNode(node, node._ne, position)\n        );\n      }\n      if (sw) {\n        maxLevel = Math.max(\n          maxLevel,\n          findMaxLevelFromNode(node, node._sw, position)\n        );\n      }\n      if (se) {\n        maxLevel = Math.max(\n          maxLevel,\n          findMaxLevelFromNode(node, node._se, position)\n        );\n      }\n      break;\n    } else if (nw) {\n      node = node._nw;\n    } else if (ne) {\n      node = node._ne;\n    } else if (sw) {\n      node = node._sw;\n    } else if (se) {\n      node = node._se;\n    } else {\n      found = true;\n    }\n  }\n\n  // Work up the tree until we find a rectangle that contains this point.\n  while (node !== stopNode) {\n    const rectangles = node.rectangles;\n\n    // Rectangles are sorted by level, lowest first.\n    for (\n      let i = rectangles.length - 1;\n      i >= 0 && rectangles[i].level > maxLevel;\n      --i\n    ) {\n      const rectangle = rectangles[i];\n      if (rectangleContainsPosition(rectangle, position)) {\n        maxLevel = rectangle.level;\n      }\n    }\n\n    node = node.parent;\n  }\n\n  return maxLevel;\n}\n\nfunction updateCoverageWithNode(\n  remainingToCoverByLevel,\n  node,\n  rectanglesToCover\n) {\n  if (!node) {\n    return;\n  }\n\n  let i;\n  let anyOverlap = false;\n  for (i = 0; i < rectanglesToCover.length; ++i) {\n    anyOverlap =\n      anyOverlap || rectanglesOverlap(node.extent, rectanglesToCover[i]);\n  }\n\n  if (!anyOverlap) {\n    // This node is not applicable to the rectangle(s).\n    return;\n  }\n\n  const rectangles = node.rectangles;\n  for (i = 0; i < rectangles.length; ++i) {\n    const rectangle = rectangles[i];\n\n    if (!remainingToCoverByLevel[rectangle.level]) {\n      remainingToCoverByLevel[rectangle.level] = rectanglesToCover;\n    }\n\n    remainingToCoverByLevel[rectangle.level] = subtractRectangle(\n      remainingToCoverByLevel[rectangle.level],\n      rectangle\n    );\n  }\n\n  // Update with child nodes.\n  updateCoverageWithNode(remainingToCoverByLevel, node._nw, rectanglesToCover);\n  updateCoverageWithNode(remainingToCoverByLevel, node._ne, rectanglesToCover);\n  updateCoverageWithNode(remainingToCoverByLevel, node._sw, rectanglesToCover);\n  updateCoverageWithNode(remainingToCoverByLevel, node._se, rectanglesToCover);\n}\n\nfunction subtractRectangle(rectangleList, rectangleToSubtract) {\n  const result = [];\n  for (let i = 0; i < rectangleList.length; ++i) {\n    const rectangle = rectangleList[i];\n    if (!rectanglesOverlap(rectangle, rectangleToSubtract)) {\n      // Disjoint rectangles.  Original rectangle is unmodified.\n      result.push(rectangle);\n    } else {\n      // rectangleToSubtract partially or completely overlaps rectangle.\n      if (rectangle.west < rectangleToSubtract.west) {\n        result.push(\n          new Rectangle(\n            rectangle.west,\n            rectangle.south,\n            rectangleToSubtract.west,\n            rectangle.north\n          )\n        );\n      }\n      if (rectangle.east > rectangleToSubtract.east) {\n        result.push(\n          new Rectangle(\n            rectangleToSubtract.east,\n            rectangle.south,\n            rectangle.east,\n            rectangle.north\n          )\n        );\n      }\n      if (rectangle.south < rectangleToSubtract.south) {\n        result.push(\n          new Rectangle(\n            Math.max(rectangleToSubtract.west, rectangle.west),\n            rectangle.south,\n            Math.min(rectangleToSubtract.east, rectangle.east),\n            rectangleToSubtract.south\n          )\n        );\n      }\n      if (rectangle.north > rectangleToSubtract.north) {\n        result.push(\n          new Rectangle(\n            Math.max(rectangleToSubtract.west, rectangle.west),\n            rectangleToSubtract.north,\n            Math.min(rectangleToSubtract.east, rectangle.east),\n            rectangle.north\n          )\n        );\n      }\n    }\n  }\n\n  return result;\n}\nexport default TileAvailability;\n","/**\n * @private\n */\nconst TileEdge = {\n  WEST: 0,\n  NORTH: 1,\n  EAST: 2,\n  SOUTH: 3,\n  NORTHWEST: 4,\n  NORTHEAST: 5,\n  SOUTHWEST: 6,\n  SOUTHEAST: 7,\n};\nexport default TileEdge;\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport formatError from \"./formatError.js\";\n\n/**\n * Provides details about an error that occurred in an {@link ImageryProvider} or a {@link TerrainProvider}.\n *\n * @alias TileProviderError\n * @constructor\n *\n * @param {ImageryProvider|TerrainProvider} provider The imagery or terrain provider that experienced the error.\n * @param {String} message A message describing the error.\n * @param {Number} [x] The X coordinate of the tile that experienced the error, or undefined if the error\n *        is not specific to a particular tile.\n * @param {Number} [y] The Y coordinate of the tile that experienced the error, or undefined if the error\n *        is not specific to a particular tile.\n * @param {Number} [level] The level of the tile that experienced the error, or undefined if the error\n *        is not specific to a particular tile.\n * @param {Number} [timesRetried=0] The number of times this operation has been retried.\n * @param {Error} [error] The error or exception that occurred, if any.\n */\nfunction TileProviderError(\n  provider,\n  message,\n  x,\n  y,\n  level,\n  timesRetried,\n  error\n) {\n  /**\n   * The {@link ImageryProvider} or {@link TerrainProvider} that experienced the error.\n   * @type {ImageryProvider|TerrainProvider}\n   */\n  this.provider = provider;\n\n  /**\n   * The message describing the error.\n   * @type {String}\n   */\n  this.message = message;\n\n  /**\n   * The X coordinate of the tile that experienced the error.  If the error is not specific\n   * to a particular tile, this property will be undefined.\n   * @type {Number}\n   */\n  this.x = x;\n\n  /**\n   * The Y coordinate of the tile that experienced the error.  If the error is not specific\n   * to a particular tile, this property will be undefined.\n   * @type {Number}\n   */\n  this.y = y;\n\n  /**\n   * The level-of-detail of the tile that experienced the error.  If the error is not specific\n   * to a particular tile, this property will be undefined.\n   * @type {Number}\n   */\n  this.level = level;\n\n  /**\n   * The number of times this operation has been retried.\n   * @type {Number}\n   * @default 0\n   */\n  this.timesRetried = defaultValue(timesRetried, 0);\n\n  /**\n   * True if the failed operation should be retried; otherwise, false.  The imagery or terrain provider\n   * will set the initial value of this property before raising the event, but any listeners\n   * can change it.  The value after the last listener is invoked will be acted upon.\n   * @type {Boolean}\n   * @default false\n   */\n  this.retry = false;\n\n  /**\n   * The error or exception that occurred, if any.\n   * @type {Error}\n   */\n  this.error = error;\n}\n\n/**\n * Handles an error in an {@link ImageryProvider} or {@link TerrainProvider} by raising an event if it has any listeners, or by\n * logging the error to the console if the event has no listeners.  This method also tracks the number\n * of times the operation has been retried and will automatically retry if requested to do so by the\n * event listeners.\n *\n * @param {TileProviderError} previousError The error instance returned by this function the last\n *        time it was called for this error, or undefined if this is the first time this error has\n *        occurred.\n * @param {ImageryProvider|TerrainProvider} provider The imagery or terrain provider that encountered the error.\n * @param {Event} event The event to raise to inform listeners of the error.\n * @param {String} message The message describing the error.\n * @param {Number} x The X coordinate of the tile that experienced the error, or undefined if the\n *        error is not specific to a particular tile.\n * @param {Number} y The Y coordinate of the tile that experienced the error, or undefined if the\n *        error is not specific to a particular tile.\n * @param {Number} level The level-of-detail of the tile that experienced the error, or undefined if the\n *        error is not specific to a particular tile.\n * @param {TileProviderError.RetryFunction} retryFunction The function to call to retry the operation.  If undefined, the\n *        operation will not be retried.\n * @param {Error} [errorDetails] The error or exception that occurred, if any.\n * @returns {TileProviderError} The error instance that was passed to the event listeners and that\n *          should be passed to this function the next time it is called for the same error in order\n *          to track retry counts.\n */\nTileProviderError.handleError = function (\n  previousError,\n  provider,\n  event,\n  message,\n  x,\n  y,\n  level,\n  retryFunction,\n  errorDetails\n) {\n  let error = previousError;\n  if (!defined(previousError)) {\n    error = new TileProviderError(\n      provider,\n      message,\n      x,\n      y,\n      level,\n      0,\n      errorDetails\n    );\n  } else {\n    error.provider = provider;\n    error.message = message;\n    error.x = x;\n    error.y = y;\n    error.level = level;\n    error.retry = false;\n    error.error = errorDetails;\n    ++error.timesRetried;\n  }\n\n  if (event.numberOfListeners > 0) {\n    event.raiseEvent(error);\n  } else {\n    console.log(\n      `An error occurred in \"${provider.constructor.name}\": ${formatError(\n        message\n      )}`\n    );\n  }\n\n  if (error.retry && defined(retryFunction)) {\n    retryFunction();\n  }\n\n  return error;\n};\n\n/**\n * Handles success of an operation by resetting the retry count of a previous error, if any.  This way,\n * if the error occurs again in the future, the listeners will be informed that it has not yet been retried.\n *\n * @param {TileProviderError} previousError The previous error, or undefined if this operation has\n *        not previously resulted in an error.\n */\nTileProviderError.handleSuccess = function (previousError) {\n  if (defined(previousError)) {\n    previousError.timesRetried = -1;\n  }\n};\n\n/**\n * A function that will be called to retry the operation.\n * @callback TileProviderError.RetryFunction\n */\nexport default TileProviderError;\n","import DeveloperError from \"./DeveloperError.js\";\n\n/**\n * A tiling scheme for geometry or imagery on the surface of an ellipsoid.  At level-of-detail zero,\n * the coarsest, least-detailed level, the number of tiles is configurable.\n * At level of detail one, each of the level zero tiles has four children, two in each direction.\n * At level of detail two, each of the level one tiles has four children, two in each direction.\n * This continues for as many levels as are present in the geometry or imagery source.\n *\n * @alias TilingScheme\n * @constructor\n *\n * @see WebMercatorTilingScheme\n * @see GeographicTilingScheme\n */\nfunction TilingScheme(options) {\n  //>>includeStart('debug', pragmas.debug);\n  throw new DeveloperError(\n    \"This type should not be instantiated directly.  Instead, use WebMercatorTilingScheme or GeographicTilingScheme.\"\n  );\n  //>>includeEnd('debug');\n}\n\nObject.defineProperties(TilingScheme.prototype, {\n  /**\n   * Gets the ellipsoid that is tiled by the tiling scheme.\n   * @memberof TilingScheme.prototype\n   * @type {Ellipsoid}\n   */\n  ellipsoid: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets the rectangle, in radians, covered by this tiling scheme.\n   * @memberof TilingScheme.prototype\n   * @type {Rectangle}\n   */\n  rectangle: {\n    get: DeveloperError.throwInstantiationError,\n  },\n\n  /**\n   * Gets the map projection used by the tiling scheme.\n   * @memberof TilingScheme.prototype\n   * @type {MapProjection}\n   */\n  projection: {\n    get: DeveloperError.throwInstantiationError,\n  },\n});\n\n/**\n * Gets the total number of tiles in the X direction at a specified level-of-detail.\n * @function\n *\n * @param {Number} level The level-of-detail.\n * @returns {Number} The number of tiles in the X direction at the given level.\n */\nTilingScheme.prototype.getNumberOfXTilesAtLevel =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Gets the total number of tiles in the Y direction at a specified level-of-detail.\n * @function\n *\n * @param {Number} level The level-of-detail.\n * @returns {Number} The number of tiles in the Y direction at the given level.\n */\nTilingScheme.prototype.getNumberOfYTilesAtLevel =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Transforms a rectangle specified in geodetic radians to the native coordinate system\n * of this tiling scheme.\n * @function\n *\n * @param {Rectangle} rectangle The rectangle to transform.\n * @param {Rectangle} [result] The instance to which to copy the result, or undefined if a new instance\n *        should be created.\n * @returns {Rectangle} The specified 'result', or a new object containing the native rectangle if 'result'\n *          is undefined.\n */\nTilingScheme.prototype.rectangleToNativeRectangle =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Converts tile x, y coordinates and level to a rectangle expressed in the native coordinates\n * of the tiling scheme.\n * @function\n *\n * @param {Number} x The integer x coordinate of the tile.\n * @param {Number} y The integer y coordinate of the tile.\n * @param {Number} level The tile level-of-detail.  Zero is the least detailed.\n * @param {Object} [result] The instance to which to copy the result, or undefined if a new instance\n *        should be created.\n * @returns {Rectangle} The specified 'result', or a new object containing the rectangle\n *          if 'result' is undefined.\n */\nTilingScheme.prototype.tileXYToNativeRectangle =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Converts tile x, y coordinates and level to a cartographic rectangle in radians.\n * @function\n *\n * @param {Number} x The integer x coordinate of the tile.\n * @param {Number} y The integer y coordinate of the tile.\n * @param {Number} level The tile level-of-detail.  Zero is the least detailed.\n * @param {Object} [result] The instance to which to copy the result, or undefined if a new instance\n *        should be created.\n * @returns {Rectangle} The specified 'result', or a new object containing the rectangle\n *          if 'result' is undefined.\n */\nTilingScheme.prototype.tileXYToRectangle =\n  DeveloperError.throwInstantiationError;\n\n/**\n * Calculates the tile x, y coordinates of the tile containing\n * a given cartographic position.\n * @function\n *\n * @param {Cartographic} position The position.\n * @param {Number} level The tile level-of-detail.  Zero is the least detailed.\n * @param {Cartesian2} [result] The instance to which to copy the result, or undefined if a new instance\n *        should be created.\n * @returns {Cartesian2} The specified 'result', or a new object containing the tile x, y coordinates\n *          if 'result' is undefined.\n */\nTilingScheme.prototype.positionToTileXY =\n  DeveloperError.throwInstantiationError;\nexport default TilingScheme;\n","/**\n * Constants for time conversions like those done by {@link JulianDate}.\n *\n * @namespace TimeConstants\n *\n * @see JulianDate\n *\n * @private\n */\nconst TimeConstants = {\n  /**\n   * The number of seconds in one millisecond: <code>0.001</code>\n   * @type {Number}\n   * @constant\n   */\n  SECONDS_PER_MILLISECOND: 0.001,\n\n  /**\n   * The number of seconds in one minute: <code>60</code>.\n   * @type {Number}\n   * @constant\n   */\n  SECONDS_PER_MINUTE: 60.0,\n\n  /**\n   * The number of minutes in one hour: <code>60</code>.\n   * @type {Number}\n   * @constant\n   */\n  MINUTES_PER_HOUR: 60.0,\n\n  /**\n   * The number of hours in one day: <code>24</code>.\n   * @type {Number}\n   * @constant\n   */\n  HOURS_PER_DAY: 24.0,\n\n  /**\n   * The number of seconds in one hour: <code>3600</code>.\n   * @type {Number}\n   * @constant\n   */\n  SECONDS_PER_HOUR: 3600.0,\n\n  /**\n   * The number of minutes in one day: <code>1440</code>.\n   * @type {Number}\n   * @constant\n   */\n  MINUTES_PER_DAY: 1440.0,\n\n  /**\n   * The number of seconds in one day, ignoring leap seconds: <code>86400</code>.\n   * @type {Number}\n   * @constant\n   */\n  SECONDS_PER_DAY: 86400.0,\n\n  /**\n   * The number of days in one Julian century: <code>36525</code>.\n   * @type {Number}\n   * @constant\n   */\n  DAYS_PER_JULIAN_CENTURY: 36525.0,\n\n  /**\n   * One trillionth of a second.\n   * @type {Number}\n   * @constant\n   */\n  PICOSECOND: 0.000000001,\n\n  /**\n   * The number of days to subtract from a Julian date to determine the\n   * modified Julian date, which gives the number of days since midnight\n   * on November 17, 1858.\n   * @type {Number}\n   * @constant\n   */\n  MODIFIED_JULIAN_DATE_DIFFERENCE: 2400000.5,\n};\nexport default Object.freeze(TimeConstants);\n","import Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport JulianDate from \"./JulianDate.js\";\n\n/**\n * An interval defined by a start and a stop time; optionally including those times as part of the interval.\n * Arbitrary data can optionally be associated with each instance for used with {@link TimeIntervalCollection}.\n *\n * @alias TimeInterval\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {JulianDate} [options.start=new JulianDate()] The start time of the interval.\n * @param {JulianDate} [options.stop=new JulianDate()] The stop time of the interval.\n * @param {Boolean} [options.isStartIncluded=true] <code>true</code> if <code>options.start</code> is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.isStopIncluded=true] <code>true</code> if <code>options.stop</code> is included in the interval, <code>false</code> otherwise.\n * @param {Object} [options.data] Arbitrary data associated with this interval.\n *\n * @example\n * // Create an instance that spans August 1st, 1980 and is associated\n * // with a Cartesian position.\n * const timeInterval = new Cesium.TimeInterval({\n *     start : Cesium.JulianDate.fromIso8601('1980-08-01T00:00:00Z'),\n *     stop : Cesium.JulianDate.fromIso8601('1980-08-02T00:00:00Z'),\n *     isStartIncluded : true,\n *     isStopIncluded : false,\n *     data : Cesium.Cartesian3.fromDegrees(39.921037, -75.170082)\n * });\n *\n * @example\n * // Create two instances from ISO 8601 intervals with associated numeric data\n * // then compute their intersection, summing the data they contain.\n * const left = Cesium.TimeInterval.fromIso8601({\n *     iso8601 : '2000/2010',\n *     data : 2\n * });\n *\n * const right = Cesium.TimeInterval.fromIso8601({\n *     iso8601 : '1995/2005',\n *     data : 3\n * });\n *\n * //The result of the below intersection will be an interval equivalent to\n * //const intersection = Cesium.TimeInterval.fromIso8601({\n * //  iso8601 : '2000/2005',\n * //  data : 5\n * //});\n * const intersection = new Cesium.TimeInterval();\n * Cesium.TimeInterval.intersect(left, right, intersection, function(leftData, rightData) {\n *     return leftData + rightData;\n * });\n *\n * @example\n * // Check if an interval contains a specific time.\n * const dateToCheck = Cesium.JulianDate.fromIso8601('1982-09-08T11:30:00Z');\n * const containsDate = Cesium.TimeInterval.contains(timeInterval, dateToCheck);\n */\nfunction TimeInterval(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  /**\n   * Gets or sets the start time of this interval.\n   * @type {JulianDate}\n   */\n  this.start = defined(options.start)\n    ? JulianDate.clone(options.start)\n    : new JulianDate();\n\n  /**\n   * Gets or sets the stop time of this interval.\n   * @type {JulianDate}\n   */\n  this.stop = defined(options.stop)\n    ? JulianDate.clone(options.stop)\n    : new JulianDate();\n\n  /**\n   * Gets or sets the data associated with this interval.\n   * @type {*}\n   */\n  this.data = options.data;\n\n  /**\n   * Gets or sets whether or not the start time is included in this interval.\n   * @type {Boolean}\n   * @default true\n   */\n  this.isStartIncluded = defaultValue(options.isStartIncluded, true);\n\n  /**\n   * Gets or sets whether or not the stop time is included in this interval.\n   * @type {Boolean}\n   * @default true\n   */\n  this.isStopIncluded = defaultValue(options.isStopIncluded, true);\n}\n\nObject.defineProperties(TimeInterval.prototype, {\n  /**\n   * Gets whether or not this interval is empty.\n   * @memberof TimeInterval.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  isEmpty: {\n    get: function () {\n      const stopComparedToStart = JulianDate.compare(this.stop, this.start);\n      return (\n        stopComparedToStart < 0 ||\n        (stopComparedToStart === 0 &&\n          (!this.isStartIncluded || !this.isStopIncluded))\n      );\n    },\n  },\n});\n\nconst scratchInterval = {\n  start: undefined,\n  stop: undefined,\n  isStartIncluded: undefined,\n  isStopIncluded: undefined,\n  data: undefined,\n};\n\n/**\n * Creates a new instance from a {@link http://en.wikipedia.org/wiki/ISO_8601|ISO 8601} interval.\n *\n * @throws DeveloperError if options.iso8601 does not match proper formatting.\n *\n * @param {Object} options Object with the following properties:\n * @param {String} options.iso8601 An ISO 8601 interval.\n * @param {Boolean} [options.isStartIncluded=true] <code>true</code> if <code>options.start</code> is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.isStopIncluded=true] <code>true</code> if <code>options.stop</code> is included in the interval, <code>false</code> otherwise.\n * @param {Object} [options.data] Arbitrary data associated with this interval.\n * @param {TimeInterval} [result] An existing instance to use for the result.\n * @returns {TimeInterval} The modified result parameter or a new instance if none was provided.\n */\nTimeInterval.fromIso8601 = function (options, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"options\", options);\n  Check.typeOf.string(\"options.iso8601\", options.iso8601);\n  //>>includeEnd('debug');\n\n  const dates = options.iso8601.split(\"/\");\n  if (dates.length !== 2) {\n    throw new DeveloperError(\n      \"options.iso8601 is an invalid ISO 8601 interval.\"\n    );\n  }\n  const start = JulianDate.fromIso8601(dates[0]);\n  const stop = JulianDate.fromIso8601(dates[1]);\n  const isStartIncluded = defaultValue(options.isStartIncluded, true);\n  const isStopIncluded = defaultValue(options.isStopIncluded, true);\n  const data = options.data;\n\n  if (!defined(result)) {\n    scratchInterval.start = start;\n    scratchInterval.stop = stop;\n    scratchInterval.isStartIncluded = isStartIncluded;\n    scratchInterval.isStopIncluded = isStopIncluded;\n    scratchInterval.data = data;\n    return new TimeInterval(scratchInterval);\n  }\n\n  result.start = start;\n  result.stop = stop;\n  result.isStartIncluded = isStartIncluded;\n  result.isStopIncluded = isStopIncluded;\n  result.data = data;\n  return result;\n};\n\n/**\n * Creates an ISO8601 representation of the provided interval.\n *\n * @param {TimeInterval} timeInterval The interval to be converted.\n * @param {Number} [precision] The number of fractional digits used to represent the seconds component.  By default, the most precise representation is used.\n * @returns {String} The ISO8601 representation of the provided interval.\n */\nTimeInterval.toIso8601 = function (timeInterval, precision) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"timeInterval\", timeInterval);\n  //>>includeEnd('debug');\n\n  return `${JulianDate.toIso8601(\n    timeInterval.start,\n    precision\n  )}/${JulianDate.toIso8601(timeInterval.stop, precision)}`;\n};\n\n/**\n * Duplicates the provided instance.\n *\n * @param {TimeInterval} [timeInterval] The instance to clone.\n * @param {TimeInterval} [result] An existing instance to use for the result.\n * @returns {TimeInterval} The modified result parameter or a new instance if none was provided.\n */\nTimeInterval.clone = function (timeInterval, result) {\n  if (!defined(timeInterval)) {\n    return undefined;\n  }\n  if (!defined(result)) {\n    return new TimeInterval(timeInterval);\n  }\n  result.start = timeInterval.start;\n  result.stop = timeInterval.stop;\n  result.isStartIncluded = timeInterval.isStartIncluded;\n  result.isStopIncluded = timeInterval.isStopIncluded;\n  result.data = timeInterval.data;\n  return result;\n};\n\n/**\n * Compares two instances and returns <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {TimeInterval} [left] The first instance.\n * @param {TimeInterval} [right] The second instance.\n * @param {TimeInterval.DataComparer} [dataComparer] A function which compares the data of the two intervals.  If omitted, reference equality is used.\n * @returns {Boolean} <code>true</code> if the dates are equal; otherwise, <code>false</code>.\n */\nTimeInterval.equals = function (left, right, dataComparer) {\n  return (\n    left === right ||\n    (defined(left) &&\n      defined(right) &&\n      ((left.isEmpty && right.isEmpty) ||\n        (left.isStartIncluded === right.isStartIncluded &&\n          left.isStopIncluded === right.isStopIncluded &&\n          JulianDate.equals(left.start, right.start) &&\n          JulianDate.equals(left.stop, right.stop) &&\n          (left.data === right.data ||\n            (defined(dataComparer) && dataComparer(left.data, right.data))))))\n  );\n};\n\n/**\n * Compares two instances and returns <code>true</code> if they are within <code>epsilon</code> seconds of\n * each other.  That is, in order for the dates to be considered equal (and for\n * this function to return <code>true</code>), the absolute value of the difference between them, in\n * seconds, must be less than <code>epsilon</code>.\n *\n * @param {TimeInterval} [left] The first instance.\n * @param {TimeInterval} [right] The second instance.\n * @param {Number} [epsilon=0] The maximum number of seconds that should separate the two instances.\n * @param {TimeInterval.DataComparer} [dataComparer] A function which compares the data of the two intervals.  If omitted, reference equality is used.\n * @returns {Boolean} <code>true</code> if the two dates are within <code>epsilon</code> seconds of each other; otherwise <code>false</code>.\n */\nTimeInterval.equalsEpsilon = function (left, right, epsilon, dataComparer) {\n  epsilon = defaultValue(epsilon, 0);\n\n  return (\n    left === right ||\n    (defined(left) &&\n      defined(right) &&\n      ((left.isEmpty && right.isEmpty) ||\n        (left.isStartIncluded === right.isStartIncluded &&\n          left.isStopIncluded === right.isStopIncluded &&\n          JulianDate.equalsEpsilon(left.start, right.start, epsilon) &&\n          JulianDate.equalsEpsilon(left.stop, right.stop, epsilon) &&\n          (left.data === right.data ||\n            (defined(dataComparer) && dataComparer(left.data, right.data))))))\n  );\n};\n\n/**\n * Computes the intersection of two intervals, optionally merging their data.\n *\n * @param {TimeInterval} left The first interval.\n * @param {TimeInterval} [right] The second interval.\n * @param {TimeInterval} [result] An existing instance to use for the result.\n * @param {TimeInterval.MergeCallback} [mergeCallback] A function which merges the data of the two intervals. If omitted, the data from the left interval will be used.\n * @returns {TimeInterval} The modified result parameter.\n */\nTimeInterval.intersect = function (left, right, result, mergeCallback) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"left\", left);\n  //>>includeEnd('debug');\n\n  if (!defined(right)) {\n    return TimeInterval.clone(TimeInterval.EMPTY, result);\n  }\n\n  const leftStart = left.start;\n  const leftStop = left.stop;\n\n  const rightStart = right.start;\n  const rightStop = right.stop;\n\n  const intersectsStartRight =\n    JulianDate.greaterThanOrEquals(rightStart, leftStart) &&\n    JulianDate.greaterThanOrEquals(leftStop, rightStart);\n  const intersectsStartLeft =\n    !intersectsStartRight &&\n    JulianDate.lessThanOrEquals(rightStart, leftStart) &&\n    JulianDate.lessThanOrEquals(leftStart, rightStop);\n\n  if (!intersectsStartRight && !intersectsStartLeft) {\n    return TimeInterval.clone(TimeInterval.EMPTY, result);\n  }\n\n  const leftIsStartIncluded = left.isStartIncluded;\n  const leftIsStopIncluded = left.isStopIncluded;\n  const rightIsStartIncluded = right.isStartIncluded;\n  const rightIsStopIncluded = right.isStopIncluded;\n  const leftLessThanRight = JulianDate.lessThan(leftStop, rightStop);\n\n  if (!defined(result)) {\n    result = new TimeInterval();\n  }\n\n  result.start = intersectsStartRight ? rightStart : leftStart;\n  result.isStartIncluded =\n    (leftIsStartIncluded && rightIsStartIncluded) ||\n    (!JulianDate.equals(rightStart, leftStart) &&\n      ((intersectsStartRight && rightIsStartIncluded) ||\n        (intersectsStartLeft && leftIsStartIncluded)));\n  result.stop = leftLessThanRight ? leftStop : rightStop;\n  result.isStopIncluded = leftLessThanRight\n    ? leftIsStopIncluded\n    : (leftIsStopIncluded && rightIsStopIncluded) ||\n      (!JulianDate.equals(rightStop, leftStop) && rightIsStopIncluded);\n  result.data = defined(mergeCallback)\n    ? mergeCallback(left.data, right.data)\n    : left.data;\n  return result;\n};\n\n/**\n * Checks if the specified date is inside the provided interval.\n *\n * @param {TimeInterval} timeInterval The interval.\n * @param {JulianDate} julianDate The date to check.\n * @returns {Boolean} <code>true</code> if the interval contains the specified date, <code>false</code> otherwise.\n */\nTimeInterval.contains = function (timeInterval, julianDate) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"timeInterval\", timeInterval);\n  Check.typeOf.object(\"julianDate\", julianDate);\n  //>>includeEnd('debug');\n\n  if (timeInterval.isEmpty) {\n    return false;\n  }\n\n  const startComparedToDate = JulianDate.compare(\n    timeInterval.start,\n    julianDate\n  );\n  if (startComparedToDate === 0) {\n    return timeInterval.isStartIncluded;\n  }\n\n  const dateComparedToStop = JulianDate.compare(julianDate, timeInterval.stop);\n  if (dateComparedToStop === 0) {\n    return timeInterval.isStopIncluded;\n  }\n\n  return startComparedToDate < 0 && dateComparedToStop < 0;\n};\n\n/**\n * Duplicates this instance.\n *\n * @param {TimeInterval} [result] An existing instance to use for the result.\n * @returns {TimeInterval} The modified result parameter or a new instance if none was provided.\n */\nTimeInterval.prototype.clone = function (result) {\n  return TimeInterval.clone(this, result);\n};\n\n/**\n * Compares this instance against the provided instance componentwise and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {TimeInterval} [right] The right hand side interval.\n * @param {TimeInterval.DataComparer} [dataComparer] A function which compares the data of the two intervals.  If omitted, reference equality is used.\n * @returns {Boolean} <code>true</code> if they are equal, <code>false</code> otherwise.\n */\nTimeInterval.prototype.equals = function (right, dataComparer) {\n  return TimeInterval.equals(this, right, dataComparer);\n};\n\n/**\n * Compares this instance against the provided instance componentwise and returns\n * <code>true</code> if they are within the provided epsilon,\n * <code>false</code> otherwise.\n *\n * @param {TimeInterval} [right] The right hand side interval.\n * @param {Number} [epsilon=0] The epsilon to use for equality testing.\n * @param {TimeInterval.DataComparer} [dataComparer] A function which compares the data of the two intervals.  If omitted, reference equality is used.\n * @returns {Boolean} <code>true</code> if they are within the provided epsilon, <code>false</code> otherwise.\n */\nTimeInterval.prototype.equalsEpsilon = function (right, epsilon, dataComparer) {\n  return TimeInterval.equalsEpsilon(this, right, epsilon, dataComparer);\n};\n\n/**\n * Creates a string representing this TimeInterval in ISO8601 format.\n *\n * @returns {String} A string representing this TimeInterval in ISO8601 format.\n */\nTimeInterval.prototype.toString = function () {\n  return TimeInterval.toIso8601(this);\n};\n\n/**\n * An immutable empty interval.\n *\n * @type {TimeInterval}\n * @constant\n */\nTimeInterval.EMPTY = Object.freeze(\n  new TimeInterval({\n    start: new JulianDate(),\n    stop: new JulianDate(),\n    isStartIncluded: false,\n    isStopIncluded: false,\n  })\n);\n\n/**\n * Function interface for merging interval data.\n * @callback TimeInterval.MergeCallback\n *\n * @param {*} leftData The first data instance.\n * @param {*} rightData The second data instance.\n * @returns {*} The result of merging the two data instances.\n */\n\n/**\n * Function interface for comparing interval data.\n * @callback TimeInterval.DataComparer\n * @param {*} leftData The first data instance.\n * @param {*} rightData The second data instance.\n * @returns {Boolean} <code>true</code> if the provided instances are equal, <code>false</code> otherwise.\n */\nexport default TimeInterval;\n","import binarySearch from \"./binarySearch.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Event from \"./Event.js\";\nimport GregorianDate from \"./GregorianDate.js\";\nimport isLeapYear from \"./isLeapYear.js\";\nimport Iso8601 from \"./Iso8601.js\";\nimport JulianDate from \"./JulianDate.js\";\nimport TimeInterval from \"./TimeInterval.js\";\n\nfunction compareIntervalStartTimes(left, right) {\n  return JulianDate.compare(left.start, right.start);\n}\n\n/**\n * A non-overlapping collection of {@link TimeInterval} instances sorted by start time.\n * @alias TimeIntervalCollection\n * @constructor\n *\n * @param {TimeInterval[]} [intervals] An array of intervals to add to the collection.\n */\nfunction TimeIntervalCollection(intervals) {\n  this._intervals = [];\n  this._changedEvent = new Event();\n\n  if (defined(intervals)) {\n    const length = intervals.length;\n    for (let i = 0; i < length; i++) {\n      this.addInterval(intervals[i]);\n    }\n  }\n}\n\nObject.defineProperties(TimeIntervalCollection.prototype, {\n  /**\n   * Gets an event that is raised whenever the collection of intervals change.\n   * @memberof TimeIntervalCollection.prototype\n   * @type {Event}\n   * @readonly\n   */\n  changedEvent: {\n    get: function () {\n      return this._changedEvent;\n    },\n  },\n\n  /**\n   * Gets the start time of the collection.\n   * @memberof TimeIntervalCollection.prototype\n   * @type {JulianDate}\n   * @readonly\n   */\n  start: {\n    get: function () {\n      const intervals = this._intervals;\n      return intervals.length === 0 ? undefined : intervals[0].start;\n    },\n  },\n\n  /**\n   * Gets whether or not the start time is included in the collection.\n   * @memberof TimeIntervalCollection.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  isStartIncluded: {\n    get: function () {\n      const intervals = this._intervals;\n      return intervals.length === 0 ? false : intervals[0].isStartIncluded;\n    },\n  },\n\n  /**\n   * Gets the stop time of the collection.\n   * @memberof TimeIntervalCollection.prototype\n   * @type {JulianDate}\n   * @readonly\n   */\n  stop: {\n    get: function () {\n      const intervals = this._intervals;\n      const length = intervals.length;\n      return length === 0 ? undefined : intervals[length - 1].stop;\n    },\n  },\n\n  /**\n   * Gets whether or not the stop time is included in the collection.\n   * @memberof TimeIntervalCollection.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  isStopIncluded: {\n    get: function () {\n      const intervals = this._intervals;\n      const length = intervals.length;\n      return length === 0 ? false : intervals[length - 1].isStopIncluded;\n    },\n  },\n\n  /**\n   * Gets the number of intervals in the collection.\n   * @memberof TimeIntervalCollection.prototype\n   * @type {Number}\n   * @readonly\n   */\n  length: {\n    get: function () {\n      return this._intervals.length;\n    },\n  },\n\n  /**\n   * Gets whether or not the collection is empty.\n   * @memberof TimeIntervalCollection.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  isEmpty: {\n    get: function () {\n      return this._intervals.length === 0;\n    },\n  },\n});\n\n/**\n * Compares this instance against the provided instance componentwise and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {TimeIntervalCollection} [right] The right hand side collection.\n * @param {TimeInterval.DataComparer} [dataComparer] A function which compares the data of the two intervals.  If omitted, reference equality is used.\n * @returns {Boolean} <code>true</code> if they are equal, <code>false</code> otherwise.\n */\nTimeIntervalCollection.prototype.equals = function (right, dataComparer) {\n  if (this === right) {\n    return true;\n  }\n  if (!(right instanceof TimeIntervalCollection)) {\n    return false;\n  }\n  const intervals = this._intervals;\n  const rightIntervals = right._intervals;\n  const length = intervals.length;\n  if (length !== rightIntervals.length) {\n    return false;\n  }\n  for (let i = 0; i < length; i++) {\n    if (!TimeInterval.equals(intervals[i], rightIntervals[i], dataComparer)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Gets the interval at the specified index.\n *\n * @param {Number} index The index of the interval to retrieve.\n * @returns {TimeInterval|undefined} The interval at the specified index, or <code>undefined</code> if no interval exists as that index.\n */\nTimeIntervalCollection.prototype.get = function (index) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(index)) {\n    throw new DeveloperError(\"index is required.\");\n  }\n  //>>includeEnd('debug');\n\n  return this._intervals[index];\n};\n\n/**\n * Removes all intervals from the collection.\n */\nTimeIntervalCollection.prototype.removeAll = function () {\n  if (this._intervals.length > 0) {\n    this._intervals.length = 0;\n    this._changedEvent.raiseEvent(this);\n  }\n};\n\n/**\n * Finds and returns the interval that contains the specified date.\n *\n * @param {JulianDate} date The date to search for.\n * @returns {TimeInterval|undefined} The interval containing the specified date, <code>undefined</code> if no such interval exists.\n */\nTimeIntervalCollection.prototype.findIntervalContainingDate = function (date) {\n  const index = this.indexOf(date);\n  return index >= 0 ? this._intervals[index] : undefined;\n};\n\n/**\n * Finds and returns the data for the interval that contains the specified date.\n *\n * @param {JulianDate} date The date to search for.\n * @returns {Object} The data for the interval containing the specified date, or <code>undefined</code> if no such interval exists.\n */\nTimeIntervalCollection.prototype.findDataForIntervalContainingDate = function (\n  date\n) {\n  const index = this.indexOf(date);\n  return index >= 0 ? this._intervals[index].data : undefined;\n};\n\n/**\n * Checks if the specified date is inside this collection.\n *\n * @param {JulianDate} julianDate The date to check.\n * @returns {Boolean} <code>true</code> if the collection contains the specified date, <code>false</code> otherwise.\n */\nTimeIntervalCollection.prototype.contains = function (julianDate) {\n  return this.indexOf(julianDate) >= 0;\n};\n\nconst indexOfScratch = new TimeInterval();\n\n/**\n * Finds and returns the index of the interval in the collection that contains the specified date.\n *\n * @param {JulianDate} date The date to search for.\n * @returns {Number} The index of the interval that contains the specified date, if no such interval exists,\n * it returns a negative number which is the bitwise complement of the index of the next interval that\n * starts after the date, or if no interval starts after the specified date, the bitwise complement of\n * the length of the collection.\n */\nTimeIntervalCollection.prototype.indexOf = function (date) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(date)) {\n    throw new DeveloperError(\"date is required\");\n  }\n  //>>includeEnd('debug');\n\n  const intervals = this._intervals;\n  indexOfScratch.start = date;\n  indexOfScratch.stop = date;\n  let index = binarySearch(\n    intervals,\n    indexOfScratch,\n    compareIntervalStartTimes\n  );\n  if (index >= 0) {\n    if (intervals[index].isStartIncluded) {\n      return index;\n    }\n\n    if (\n      index > 0 &&\n      intervals[index - 1].stop.equals(date) &&\n      intervals[index - 1].isStopIncluded\n    ) {\n      return index - 1;\n    }\n    return ~index;\n  }\n\n  index = ~index;\n  if (\n    index > 0 &&\n    index - 1 < intervals.length &&\n    TimeInterval.contains(intervals[index - 1], date)\n  ) {\n    return index - 1;\n  }\n  return ~index;\n};\n\n/**\n * Returns the first interval in the collection that matches the specified parameters.\n * All parameters are optional and <code>undefined</code> parameters are treated as a don't care condition.\n *\n * @param {Object} [options] Object with the following properties:\n * @param {JulianDate} [options.start] The start time of the interval.\n * @param {JulianDate} [options.stop] The stop time of the interval.\n * @param {Boolean} [options.isStartIncluded] <code>true</code> if <code>options.start</code> is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.isStopIncluded] <code>true</code> if <code>options.stop</code> is included in the interval, <code>false</code> otherwise.\n * @returns {TimeInterval|undefined} The first interval in the collection that matches the specified parameters.\n */\nTimeIntervalCollection.prototype.findInterval = function (options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const start = options.start;\n  const stop = options.stop;\n  const isStartIncluded = options.isStartIncluded;\n  const isStopIncluded = options.isStopIncluded;\n\n  const intervals = this._intervals;\n  for (let i = 0, len = intervals.length; i < len; i++) {\n    const interval = intervals[i];\n    if (\n      (!defined(start) || interval.start.equals(start)) &&\n      (!defined(stop) || interval.stop.equals(stop)) &&\n      (!defined(isStartIncluded) ||\n        interval.isStartIncluded === isStartIncluded) &&\n      (!defined(isStopIncluded) || interval.isStopIncluded === isStopIncluded)\n    ) {\n      return intervals[i];\n    }\n  }\n  return undefined;\n};\n\n/**\n * Adds an interval to the collection, merging intervals that contain the same data and\n * splitting intervals of different data as needed in order to maintain a non-overlapping collection.\n * The data in the new interval takes precedence over any existing intervals in the collection.\n *\n * @param {TimeInterval} interval The interval to add.\n * @param {TimeInterval.DataComparer} [dataComparer] A function which compares the data of the two intervals.  If omitted, reference equality is used.\n */\nTimeIntervalCollection.prototype.addInterval = function (\n  interval,\n  dataComparer\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(interval)) {\n    throw new DeveloperError(\"interval is required\");\n  }\n  //>>includeEnd('debug');\n\n  if (interval.isEmpty) {\n    return;\n  }\n\n  const intervals = this._intervals;\n\n  // Handle the common case quickly: we're adding a new interval which is after all existing intervals.\n  if (\n    intervals.length === 0 ||\n    JulianDate.greaterThan(interval.start, intervals[intervals.length - 1].stop)\n  ) {\n    intervals.push(interval);\n    this._changedEvent.raiseEvent(this);\n    return;\n  }\n\n  // Keep the list sorted by the start date\n  let index = binarySearch(intervals, interval, compareIntervalStartTimes);\n  if (index < 0) {\n    index = ~index;\n  } else {\n    // interval's start date exactly equals the start date of at least one interval in the collection.\n    // It could actually equal the start date of two intervals if one of them does not actually\n    // include the date.  In that case, the binary search could have found either.  We need to\n    // look at the surrounding intervals and their IsStartIncluded properties in order to make sure\n    // we're working with the correct interval.\n\n    // eslint-disable-next-line no-lonely-if\n    if (\n      index > 0 &&\n      interval.isStartIncluded &&\n      intervals[index - 1].isStartIncluded &&\n      intervals[index - 1].start.equals(interval.start)\n    ) {\n      --index;\n    } else if (\n      index < intervals.length &&\n      !interval.isStartIncluded &&\n      intervals[index].isStartIncluded &&\n      intervals[index].start.equals(interval.start)\n    ) {\n      ++index;\n    }\n  }\n\n  let comparison;\n  if (index > 0) {\n    // Not the first thing in the list, so see if the interval before this one\n    // overlaps this one.\n\n    comparison = JulianDate.compare(intervals[index - 1].stop, interval.start);\n    if (\n      comparison > 0 ||\n      (comparison === 0 &&\n        (intervals[index - 1].isStopIncluded || interval.isStartIncluded))\n    ) {\n      // There is an overlap\n      if (\n        defined(dataComparer)\n          ? dataComparer(intervals[index - 1].data, interval.data)\n          : intervals[index - 1].data === interval.data\n      ) {\n        // Overlapping intervals have the same data, so combine them\n        if (JulianDate.greaterThan(interval.stop, intervals[index - 1].stop)) {\n          interval = new TimeInterval({\n            start: intervals[index - 1].start,\n            stop: interval.stop,\n            isStartIncluded: intervals[index - 1].isStartIncluded,\n            isStopIncluded: interval.isStopIncluded,\n            data: interval.data,\n          });\n        } else {\n          interval = new TimeInterval({\n            start: intervals[index - 1].start,\n            stop: intervals[index - 1].stop,\n            isStartIncluded: intervals[index - 1].isStartIncluded,\n            isStopIncluded:\n              intervals[index - 1].isStopIncluded ||\n              (interval.stop.equals(intervals[index - 1].stop) &&\n                interval.isStopIncluded),\n            data: interval.data,\n          });\n        }\n        intervals.splice(index - 1, 1);\n        --index;\n      } else {\n        // Overlapping intervals have different data.  The new interval\n        // being added 'wins' so truncate the previous interval.\n        // If the existing interval extends past the end of the new one,\n        // split the existing interval into two intervals.\n        comparison = JulianDate.compare(\n          intervals[index - 1].stop,\n          interval.stop\n        );\n        if (\n          comparison > 0 ||\n          (comparison === 0 &&\n            intervals[index - 1].isStopIncluded &&\n            !interval.isStopIncluded)\n        ) {\n          intervals.splice(\n            index,\n            0,\n            new TimeInterval({\n              start: interval.stop,\n              stop: intervals[index - 1].stop,\n              isStartIncluded: !interval.isStopIncluded,\n              isStopIncluded: intervals[index - 1].isStopIncluded,\n              data: intervals[index - 1].data,\n            })\n          );\n        }\n        intervals[index - 1] = new TimeInterval({\n          start: intervals[index - 1].start,\n          stop: interval.start,\n          isStartIncluded: intervals[index - 1].isStartIncluded,\n          isStopIncluded: !interval.isStartIncluded,\n          data: intervals[index - 1].data,\n        });\n      }\n    }\n  }\n\n  while (index < intervals.length) {\n    // Not the last thing in the list, so see if the intervals after this one overlap this one.\n    comparison = JulianDate.compare(interval.stop, intervals[index].start);\n    if (\n      comparison > 0 ||\n      (comparison === 0 &&\n        (interval.isStopIncluded || intervals[index].isStartIncluded))\n    ) {\n      // There is an overlap\n      if (\n        defined(dataComparer)\n          ? dataComparer(intervals[index].data, interval.data)\n          : intervals[index].data === interval.data\n      ) {\n        // Overlapping intervals have the same data, so combine them\n        interval = new TimeInterval({\n          start: interval.start,\n          stop: JulianDate.greaterThan(intervals[index].stop, interval.stop)\n            ? intervals[index].stop\n            : interval.stop,\n          isStartIncluded: interval.isStartIncluded,\n          isStopIncluded: JulianDate.greaterThan(\n            intervals[index].stop,\n            interval.stop\n          )\n            ? intervals[index].isStopIncluded\n            : interval.isStopIncluded,\n          data: interval.data,\n        });\n        intervals.splice(index, 1);\n      } else {\n        // Overlapping intervals have different data.  The new interval\n        // being added 'wins' so truncate the next interval.\n        intervals[index] = new TimeInterval({\n          start: interval.stop,\n          stop: intervals[index].stop,\n          isStartIncluded: !interval.isStopIncluded,\n          isStopIncluded: intervals[index].isStopIncluded,\n          data: intervals[index].data,\n        });\n\n        if (intervals[index].isEmpty) {\n          intervals.splice(index, 1);\n        } else {\n          // Found a partial span, so it is not possible for the next\n          // interval to be spanned at all.  Stop looking.\n          break;\n        }\n      }\n    } else {\n      // Found the last one we're spanning, so stop looking.\n      break;\n    }\n  }\n\n  // Add the new interval\n  intervals.splice(index, 0, interval);\n  this._changedEvent.raiseEvent(this);\n};\n\n/**\n * Removes the specified interval from this interval collection, creating a hole over the specified interval.\n * The data property of the input interval is ignored.\n *\n * @param {TimeInterval} interval The interval to remove.\n * @returns {Boolean} <code>true</code> if the interval was removed, <code>false</code> if no part of the interval was in the collection.\n */\nTimeIntervalCollection.prototype.removeInterval = function (interval) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(interval)) {\n    throw new DeveloperError(\"interval is required\");\n  }\n  //>>includeEnd('debug');\n\n  if (interval.isEmpty) {\n    return false;\n  }\n\n  const intervals = this._intervals;\n\n  let index = binarySearch(intervals, interval, compareIntervalStartTimes);\n  if (index < 0) {\n    index = ~index;\n  }\n\n  let result = false;\n\n  // Check for truncation of the end of the previous interval.\n  if (\n    index > 0 &&\n    (JulianDate.greaterThan(intervals[index - 1].stop, interval.start) ||\n      (intervals[index - 1].stop.equals(interval.start) &&\n        intervals[index - 1].isStopIncluded &&\n        interval.isStartIncluded))\n  ) {\n    result = true;\n\n    if (\n      JulianDate.greaterThan(intervals[index - 1].stop, interval.stop) ||\n      (intervals[index - 1].isStopIncluded &&\n        !interval.isStopIncluded &&\n        intervals[index - 1].stop.equals(interval.stop))\n    ) {\n      // Break the existing interval into two pieces\n      intervals.splice(\n        index,\n        0,\n        new TimeInterval({\n          start: interval.stop,\n          stop: intervals[index - 1].stop,\n          isStartIncluded: !interval.isStopIncluded,\n          isStopIncluded: intervals[index - 1].isStopIncluded,\n          data: intervals[index - 1].data,\n        })\n      );\n    }\n    intervals[index - 1] = new TimeInterval({\n      start: intervals[index - 1].start,\n      stop: interval.start,\n      isStartIncluded: intervals[index - 1].isStartIncluded,\n      isStopIncluded: !interval.isStartIncluded,\n      data: intervals[index - 1].data,\n    });\n  }\n\n  // Check if the Start of the current interval should remain because interval.start is the same but\n  // it is not included.\n  if (\n    index < intervals.length &&\n    !interval.isStartIncluded &&\n    intervals[index].isStartIncluded &&\n    interval.start.equals(intervals[index].start)\n  ) {\n    result = true;\n\n    intervals.splice(\n      index,\n      0,\n      new TimeInterval({\n        start: intervals[index].start,\n        stop: intervals[index].start,\n        isStartIncluded: true,\n        isStopIncluded: true,\n        data: intervals[index].data,\n      })\n    );\n    ++index;\n  }\n\n  // Remove any intervals that are completely overlapped by the input interval.\n  while (\n    index < intervals.length &&\n    JulianDate.greaterThan(interval.stop, intervals[index].stop)\n  ) {\n    result = true;\n    intervals.splice(index, 1);\n  }\n\n  // Check for the case where the input interval ends on the same date\n  // as an existing interval.\n  if (index < intervals.length && interval.stop.equals(intervals[index].stop)) {\n    result = true;\n\n    if (!interval.isStopIncluded && intervals[index].isStopIncluded) {\n      // Last point of interval should remain because the stop date is included in\n      // the existing interval but is not included in the input interval.\n      if (\n        index + 1 < intervals.length &&\n        intervals[index + 1].start.equals(interval.stop) &&\n        intervals[index].data === intervals[index + 1].data\n      ) {\n        // Combine single point with the next interval\n        intervals.splice(index, 1);\n        intervals[index] = new TimeInterval({\n          start: intervals[index].start,\n          stop: intervals[index].stop,\n          isStartIncluded: true,\n          isStopIncluded: intervals[index].isStopIncluded,\n          data: intervals[index].data,\n        });\n      } else {\n        intervals[index] = new TimeInterval({\n          start: interval.stop,\n          stop: interval.stop,\n          isStartIncluded: true,\n          isStopIncluded: true,\n          data: intervals[index].data,\n        });\n      }\n    } else {\n      // Interval is completely overlapped\n      intervals.splice(index, 1);\n    }\n  }\n\n  // Truncate any partially-overlapped intervals.\n  if (\n    index < intervals.length &&\n    (JulianDate.greaterThan(interval.stop, intervals[index].start) ||\n      (interval.stop.equals(intervals[index].start) &&\n        interval.isStopIncluded &&\n        intervals[index].isStartIncluded))\n  ) {\n    result = true;\n    intervals[index] = new TimeInterval({\n      start: interval.stop,\n      stop: intervals[index].stop,\n      isStartIncluded: !interval.isStopIncluded,\n      isStopIncluded: intervals[index].isStopIncluded,\n      data: intervals[index].data,\n    });\n  }\n\n  if (result) {\n    this._changedEvent.raiseEvent(this);\n  }\n\n  return result;\n};\n\n/**\n * Creates a new instance that is the intersection of this collection and the provided collection.\n *\n * @param {TimeIntervalCollection} other The collection to intersect with.\n * @param {TimeInterval.DataComparer} [dataComparer] A function which compares the data of the two intervals.  If omitted, reference equality is used.\n * @param {TimeInterval.MergeCallback} [mergeCallback] A function which merges the data of the two intervals. If omitted, the data from the left interval will be used.\n * @returns {TimeIntervalCollection} A new TimeIntervalCollection which is the intersection of this collection and the provided collection.\n */\nTimeIntervalCollection.prototype.intersect = function (\n  other,\n  dataComparer,\n  mergeCallback\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(other)) {\n    throw new DeveloperError(\"other is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const result = new TimeIntervalCollection();\n  let left = 0;\n  let right = 0;\n  const intervals = this._intervals;\n  const otherIntervals = other._intervals;\n\n  while (left < intervals.length && right < otherIntervals.length) {\n    const leftInterval = intervals[left];\n    const rightInterval = otherIntervals[right];\n    if (JulianDate.lessThan(leftInterval.stop, rightInterval.start)) {\n      ++left;\n    } else if (JulianDate.lessThan(rightInterval.stop, leftInterval.start)) {\n      ++right;\n    } else {\n      // The following will return an intersection whose data is 'merged' if the callback is defined\n      if (\n        defined(mergeCallback) ||\n        (defined(dataComparer) &&\n          dataComparer(leftInterval.data, rightInterval.data)) ||\n        (!defined(dataComparer) && rightInterval.data === leftInterval.data)\n      ) {\n        const intersection = TimeInterval.intersect(\n          leftInterval,\n          rightInterval,\n          new TimeInterval(),\n          mergeCallback\n        );\n        if (!intersection.isEmpty) {\n          // Since we start with an empty collection for 'result', and there are no overlapping intervals in 'this' (as a rule),\n          // the 'intersection' will never overlap with a previous interval in 'result'.  So, no need to do any additional 'merging'.\n          result.addInterval(intersection, dataComparer);\n        }\n      }\n\n      if (\n        JulianDate.lessThan(leftInterval.stop, rightInterval.stop) ||\n        (leftInterval.stop.equals(rightInterval.stop) &&\n          !leftInterval.isStopIncluded &&\n          rightInterval.isStopIncluded)\n      ) {\n        ++left;\n      } else {\n        ++right;\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Creates a new instance from a JulianDate array.\n *\n * @param {Object} options Object with the following properties:\n * @param {JulianDate[]} options.julianDates An array of ISO 8601 dates.\n * @param {Boolean} [options.isStartIncluded=true] <code>true</code> if start time is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.isStopIncluded=true] <code>true</code> if stop time is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.leadingInterval=false] <code>true</code> if you want to add a interval from Iso8601.MINIMUM_VALUE to start time,  <code>false</code> otherwise.\n * @param {Boolean} [options.trailingInterval=false] <code>true</code> if you want to add a interval from stop time to Iso8601.MAXIMUM_VALUE,  <code>false</code> otherwise.\n * @param {Function} [options.dataCallback] A function that will be return the data that is called with each interval before it is added to the collection. If unspecified, the data will be the index in the collection.\n * @param {TimeIntervalCollection} [result] An existing instance to use for the result.\n * @returns {TimeIntervalCollection} The modified result parameter or a new instance if none was provided.\n */\nTimeIntervalCollection.fromJulianDateArray = function (options, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n  if (!defined(options.julianDates)) {\n    throw new DeveloperError(\"options.iso8601Array is required.\");\n  }\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    result = new TimeIntervalCollection();\n  }\n\n  const julianDates = options.julianDates;\n  const length = julianDates.length;\n  const dataCallback = options.dataCallback;\n\n  const isStartIncluded = defaultValue(options.isStartIncluded, true);\n  const isStopIncluded = defaultValue(options.isStopIncluded, true);\n  const leadingInterval = defaultValue(options.leadingInterval, false);\n  const trailingInterval = defaultValue(options.trailingInterval, false);\n  let interval;\n\n  // Add a default interval, which will only end up being used up to first interval\n  let startIndex = 0;\n  if (leadingInterval) {\n    ++startIndex;\n    interval = new TimeInterval({\n      start: Iso8601.MINIMUM_VALUE,\n      stop: julianDates[0],\n      isStartIncluded: true,\n      isStopIncluded: !isStartIncluded,\n    });\n    interval.data = defined(dataCallback)\n      ? dataCallback(interval, result.length)\n      : result.length;\n    result.addInterval(interval);\n  }\n\n  for (let i = 0; i < length - 1; ++i) {\n    let startDate = julianDates[i];\n    const endDate = julianDates[i + 1];\n\n    interval = new TimeInterval({\n      start: startDate,\n      stop: endDate,\n      isStartIncluded: result.length === startIndex ? isStartIncluded : true,\n      isStopIncluded: i === length - 2 ? isStopIncluded : false,\n    });\n    interval.data = defined(dataCallback)\n      ? dataCallback(interval, result.length)\n      : result.length;\n    result.addInterval(interval);\n\n    startDate = endDate;\n  }\n\n  if (trailingInterval) {\n    interval = new TimeInterval({\n      start: julianDates[length - 1],\n      stop: Iso8601.MAXIMUM_VALUE,\n      isStartIncluded: !isStopIncluded,\n      isStopIncluded: true,\n    });\n    interval.data = defined(dataCallback)\n      ? dataCallback(interval, result.length)\n      : result.length;\n    result.addInterval(interval);\n  }\n\n  return result;\n};\n\nconst scratchGregorianDate = new GregorianDate();\nconst monthLengths = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n/**\n * Adds duration represented as a GregorianDate to a JulianDate\n *\n * @param {JulianDate} julianDate The date.\n * @param {GregorianDate} duration An duration represented as a GregorianDate.\n * @param {JulianDate} result An existing instance to use for the result.\n * @returns {JulianDate} The modified result parameter.\n *\n * @private\n */\nfunction addToDate(julianDate, duration, result) {\n  if (!defined(result)) {\n    result = new JulianDate();\n  }\n  JulianDate.toGregorianDate(julianDate, scratchGregorianDate);\n\n  let millisecond = scratchGregorianDate.millisecond + duration.millisecond;\n  let second = scratchGregorianDate.second + duration.second;\n  let minute = scratchGregorianDate.minute + duration.minute;\n  let hour = scratchGregorianDate.hour + duration.hour;\n  let day = scratchGregorianDate.day + duration.day;\n  let month = scratchGregorianDate.month + duration.month;\n  let year = scratchGregorianDate.year + duration.year;\n\n  if (millisecond >= 1000) {\n    second += Math.floor(millisecond / 1000);\n    millisecond = millisecond % 1000;\n  }\n\n  if (second >= 60) {\n    minute += Math.floor(second / 60);\n    second = second % 60;\n  }\n\n  if (minute >= 60) {\n    hour += Math.floor(minute / 60);\n    minute = minute % 60;\n  }\n\n  if (hour >= 24) {\n    day += Math.floor(hour / 24);\n    hour = hour % 24;\n  }\n\n  // If days is greater than the month's length we need to remove those number of days,\n  //  readjust month and year and repeat until days is less than the month's length.\n  monthLengths[2] = isLeapYear(year) ? 29 : 28;\n  while (day > monthLengths[month] || month >= 13) {\n    if (day > monthLengths[month]) {\n      day -= monthLengths[month];\n      ++month;\n    }\n\n    if (month >= 13) {\n      --month;\n      year += Math.floor(month / 12);\n      month = month % 12;\n      ++month;\n    }\n\n    monthLengths[2] = isLeapYear(year) ? 29 : 28;\n  }\n\n  scratchGregorianDate.millisecond = millisecond;\n  scratchGregorianDate.second = second;\n  scratchGregorianDate.minute = minute;\n  scratchGregorianDate.hour = hour;\n  scratchGregorianDate.day = day;\n  scratchGregorianDate.month = month;\n  scratchGregorianDate.year = year;\n\n  return JulianDate.fromGregorianDate(scratchGregorianDate, result);\n}\n\nconst scratchJulianDate = new JulianDate();\nconst durationRegex = /P(?:([\\d.,]+)Y)?(?:([\\d.,]+)M)?(?:([\\d.,]+)W)?(?:([\\d.,]+)D)?(?:T(?:([\\d.,]+)H)?(?:([\\d.,]+)M)?(?:([\\d.,]+)S)?)?/;\n\n/**\n * Parses ISO8601 duration string\n *\n * @param {String} iso8601 An ISO 8601 duration.\n * @param {GregorianDate} result An existing instance to use for the result.\n * @returns {Boolean} True is parsing succeeded, false otherwise\n *\n * @private\n */\nfunction parseDuration(iso8601, result) {\n  if (!defined(iso8601) || iso8601.length === 0) {\n    return false;\n  }\n\n  // Reset object\n  result.year = 0;\n  result.month = 0;\n  result.day = 0;\n  result.hour = 0;\n  result.minute = 0;\n  result.second = 0;\n  result.millisecond = 0;\n\n  if (iso8601[0] === \"P\") {\n    const matches = iso8601.match(durationRegex);\n    if (!defined(matches)) {\n      return false;\n    }\n    if (defined(matches[1])) {\n      // Years\n      result.year = Number(matches[1].replace(\",\", \".\"));\n    }\n    if (defined(matches[2])) {\n      // Months\n      result.month = Number(matches[2].replace(\",\", \".\"));\n    }\n    if (defined(matches[3])) {\n      // Weeks\n      result.day = Number(matches[3].replace(\",\", \".\")) * 7;\n    }\n    if (defined(matches[4])) {\n      // Days\n      result.day += Number(matches[4].replace(\",\", \".\"));\n    }\n    if (defined(matches[5])) {\n      // Hours\n      result.hour = Number(matches[5].replace(\",\", \".\"));\n    }\n    if (defined(matches[6])) {\n      // Weeks\n      result.minute = Number(matches[6].replace(\",\", \".\"));\n    }\n    if (defined(matches[7])) {\n      // Seconds\n      const seconds = Number(matches[7].replace(\",\", \".\"));\n      result.second = Math.floor(seconds);\n      result.millisecond = (seconds % 1) * 1000;\n    }\n  } else {\n    // They can technically specify the duration as a normal date with some caveats. Try our best to load it.\n    if (iso8601[iso8601.length - 1] !== \"Z\") {\n      // It's not a date, its a duration, so it always has to be UTC\n      iso8601 += \"Z\";\n    }\n    JulianDate.toGregorianDate(\n      JulianDate.fromIso8601(iso8601, scratchJulianDate),\n      result\n    );\n  }\n\n  // A duration of 0 will cause an infinite loop, so just make sure something is non-zero\n  return (\n    result.year ||\n    result.month ||\n    result.day ||\n    result.hour ||\n    result.minute ||\n    result.second ||\n    result.millisecond\n  );\n}\n\nconst scratchDuration = new GregorianDate();\n/**\n * Creates a new instance from an {@link http://en.wikipedia.org/wiki/ISO_8601|ISO 8601} time interval (start/end/duration).\n *\n * @param {Object} options Object with the following properties:\n * @param {String} options.iso8601 An ISO 8601 interval.\n * @param {Boolean} [options.isStartIncluded=true] <code>true</code> if start time is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.isStopIncluded=true] <code>true</code> if stop time is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.leadingInterval=false] <code>true</code> if you want to add a interval from Iso8601.MINIMUM_VALUE to start time,  <code>false</code> otherwise.\n * @param {Boolean} [options.trailingInterval=false] <code>true</code> if you want to add a interval from stop time to Iso8601.MAXIMUM_VALUE,  <code>false</code> otherwise.\n * @param {Function} [options.dataCallback] A function that will be return the data that is called with each interval before it is added to the collection. If unspecified, the data will be the index in the collection.\n * @param {TimeIntervalCollection} [result] An existing instance to use for the result.\n * @returns {TimeIntervalCollection} The modified result parameter or a new instance if none was provided.\n */\nTimeIntervalCollection.fromIso8601 = function (options, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n  if (!defined(options.iso8601)) {\n    throw new DeveloperError(\"options.iso8601 is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const dates = options.iso8601.split(\"/\");\n  const start = JulianDate.fromIso8601(dates[0]);\n  const stop = JulianDate.fromIso8601(dates[1]);\n  const julianDates = [];\n\n  if (!parseDuration(dates[2], scratchDuration)) {\n    julianDates.push(start, stop);\n  } else {\n    let date = JulianDate.clone(start);\n    julianDates.push(date);\n    while (JulianDate.compare(date, stop) < 0) {\n      date = addToDate(date, scratchDuration);\n      const afterStop = JulianDate.compare(stop, date) <= 0;\n      if (afterStop) {\n        JulianDate.clone(stop, date);\n      }\n\n      julianDates.push(date);\n    }\n  }\n\n  return TimeIntervalCollection.fromJulianDateArray(\n    {\n      julianDates: julianDates,\n      isStartIncluded: options.isStartIncluded,\n      isStopIncluded: options.isStopIncluded,\n      leadingInterval: options.leadingInterval,\n      trailingInterval: options.trailingInterval,\n      dataCallback: options.dataCallback,\n    },\n    result\n  );\n};\n\n/**\n * Creates a new instance from a {@link http://en.wikipedia.org/wiki/ISO_8601|ISO 8601} date array.\n *\n * @param {Object} options Object with the following properties:\n * @param {String[]} options.iso8601Dates An array of ISO 8601 dates.\n * @param {Boolean} [options.isStartIncluded=true] <code>true</code> if start time is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.isStopIncluded=true] <code>true</code> if stop time is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.leadingInterval=false] <code>true</code> if you want to add a interval from Iso8601.MINIMUM_VALUE to start time,  <code>false</code> otherwise.\n * @param {Boolean} [options.trailingInterval=false] <code>true</code> if you want to add a interval from stop time to Iso8601.MAXIMUM_VALUE,  <code>false</code> otherwise.\n * @param {Function} [options.dataCallback] A function that will be return the data that is called with each interval before it is added to the collection. If unspecified, the data will be the index in the collection.\n * @param {TimeIntervalCollection} [result] An existing instance to use for the result.\n * @returns {TimeIntervalCollection} The modified result parameter or a new instance if none was provided.\n */\nTimeIntervalCollection.fromIso8601DateArray = function (options, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n  if (!defined(options.iso8601Dates)) {\n    throw new DeveloperError(\"options.iso8601Dates is required.\");\n  }\n  //>>includeEnd('debug');\n\n  return TimeIntervalCollection.fromJulianDateArray(\n    {\n      julianDates: options.iso8601Dates.map(function (date) {\n        return JulianDate.fromIso8601(date);\n      }),\n      isStartIncluded: options.isStartIncluded,\n      isStopIncluded: options.isStopIncluded,\n      leadingInterval: options.leadingInterval,\n      trailingInterval: options.trailingInterval,\n      dataCallback: options.dataCallback,\n    },\n    result\n  );\n};\n\n/**\n * Creates a new instance from a {@link http://en.wikipedia.org/wiki/ISO_8601|ISO 8601} duration array.\n *\n * @param {Object} options Object with the following properties:\n * @param {JulianDate} options.epoch An date that the durations are relative to.\n * @param {String} options.iso8601Durations An array of ISO 8601 durations.\n * @param {Boolean} [options.relativeToPrevious=false] <code>true</code> if durations are relative to previous date, <code>false</code> if always relative to the epoch.\n * @param {Boolean} [options.isStartIncluded=true] <code>true</code> if start time is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.isStopIncluded=true] <code>true</code> if stop time is included in the interval, <code>false</code> otherwise.\n * @param {Boolean} [options.leadingInterval=false] <code>true</code> if you want to add a interval from Iso8601.MINIMUM_VALUE to start time,  <code>false</code> otherwise.\n * @param {Boolean} [options.trailingInterval=false] <code>true</code> if you want to add a interval from stop time to Iso8601.MAXIMUM_VALUE,  <code>false</code> otherwise.\n * @param {Function} [options.dataCallback] A function that will be return the data that is called with each interval before it is added to the collection. If unspecified, the data will be the index in the collection.\n * @param {TimeIntervalCollection} [result] An existing instance to use for the result.\n * @returns {TimeIntervalCollection} The modified result parameter or a new instance if none was provided.\n */\nTimeIntervalCollection.fromIso8601DurationArray = function (options, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n  if (!defined(options.epoch)) {\n    throw new DeveloperError(\"options.epoch is required.\");\n  }\n  if (!defined(options.iso8601Durations)) {\n    throw new DeveloperError(\"options.iso8601Durations is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const epoch = options.epoch;\n  const iso8601Durations = options.iso8601Durations;\n  const relativeToPrevious = defaultValue(options.relativeToPrevious, false);\n  const julianDates = [];\n  let date, previousDate;\n\n  const length = iso8601Durations.length;\n  for (let i = 0; i < length; ++i) {\n    // Allow a duration of 0 on the first iteration, because then it is just the epoch\n    if (parseDuration(iso8601Durations[i], scratchDuration) || i === 0) {\n      if (relativeToPrevious && defined(previousDate)) {\n        date = addToDate(previousDate, scratchDuration);\n      } else {\n        date = addToDate(epoch, scratchDuration);\n      }\n      julianDates.push(date);\n      previousDate = date;\n    }\n  }\n\n  return TimeIntervalCollection.fromJulianDateArray(\n    {\n      julianDates: julianDates,\n      isStartIncluded: options.isStartIncluded,\n      isStopIncluded: options.isStopIncluded,\n      leadingInterval: options.leadingInterval,\n      trailingInterval: options.trailingInterval,\n      dataCallback: options.dataCallback,\n    },\n    result\n  );\n};\nexport default TimeIntervalCollection;\n","/**\n * Provides the type of time standards which JulianDate can take as input.\n *\n * @enum {Number}\n *\n * @see JulianDate\n */\nconst TimeStandard = {\n  /**\n   * Represents the coordinated Universal Time (UTC) time standard.\n   *\n   * UTC is related to TAI according to the relationship\n   * <code>UTC = TAI - deltaT</code> where <code>deltaT</code> is the number of leap\n   * seconds which have been introduced as of the time in TAI.\n   *\n   * @type {Number}\n   * @constant\n   */\n  UTC: 0,\n\n  /**\n   * Represents the International Atomic Time (TAI) time standard.\n   * TAI is the principal time standard to which the other time standards are related.\n   *\n   * @type {Number}\n   * @constant\n   */\n  TAI: 1,\n};\nexport default Object.freeze(TimeStandard);\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Encapsulates an algorithm to optimize triangles for the post\n * vertex-shader cache.  This is based on the 2007 SIGGRAPH paper\n * 'Fast Triangle Reordering for Vertex Locality and Reduced Overdraw.'\n * The runtime is linear but several passes are made.\n *\n * @namespace Tipsify\n *\n * @see <a href='http://gfx.cs.princeton.edu/pubs/Sander_2007_%3ETR/tipsy.pdf'>\n * Fast Triangle Reordering for Vertex Locality and Reduced Overdraw</a>\n * by Sander, Nehab, and Barczak\n *\n * @private\n */\nconst Tipsify = {};\n\n/**\n * Calculates the average cache miss ratio (ACMR) for a given set of indices.\n *\n * @param {Object} options Object with the following properties:\n * @param {Number[]} options.indices Lists triads of numbers corresponding to the indices of the vertices\n *                        in the vertex buffer that define the geometry's triangles.\n * @param {Number} [options.maximumIndex] The maximum value of the elements in <code>args.indices</code>.\n *                                     If not supplied, this value will be computed.\n * @param {Number} [options.cacheSize=24] The number of vertices that can be stored in the cache at any one time.\n * @returns {Number} The average cache miss ratio (ACMR).\n *\n * @exception {DeveloperError} indices length must be a multiple of three.\n * @exception {DeveloperError} cacheSize must be greater than two.\n *\n * @example\n * const indices = [0, 1, 2, 3, 4, 5];\n * const maxIndex = 5;\n * const cacheSize = 3;\n * const acmr = Cesium.Tipsify.calculateACMR({indices : indices, maxIndex : maxIndex, cacheSize : cacheSize});\n */\nTipsify.calculateACMR = function (options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const indices = options.indices;\n  let maximumIndex = options.maximumIndex;\n  const cacheSize = defaultValue(options.cacheSize, 24);\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(indices)) {\n    throw new DeveloperError(\"indices is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const numIndices = indices.length;\n\n  //>>includeStart('debug', pragmas.debug);\n  if (numIndices < 3 || numIndices % 3 !== 0) {\n    throw new DeveloperError(\"indices length must be a multiple of three.\");\n  }\n  if (maximumIndex <= 0) {\n    throw new DeveloperError(\"maximumIndex must be greater than zero.\");\n  }\n  if (cacheSize < 3) {\n    throw new DeveloperError(\"cacheSize must be greater than two.\");\n  }\n  //>>includeEnd('debug');\n\n  // Compute the maximumIndex if not given\n  if (!defined(maximumIndex)) {\n    maximumIndex = 0;\n    let currentIndex = 0;\n    let intoIndices = indices[currentIndex];\n    while (currentIndex < numIndices) {\n      if (intoIndices > maximumIndex) {\n        maximumIndex = intoIndices;\n      }\n      ++currentIndex;\n      intoIndices = indices[currentIndex];\n    }\n  }\n\n  // Vertex time stamps\n  const vertexTimeStamps = [];\n  for (let i = 0; i < maximumIndex + 1; i++) {\n    vertexTimeStamps[i] = 0;\n  }\n\n  // Cache processing\n  let s = cacheSize + 1;\n  for (let j = 0; j < numIndices; ++j) {\n    if (s - vertexTimeStamps[indices[j]] > cacheSize) {\n      vertexTimeStamps[indices[j]] = s;\n      ++s;\n    }\n  }\n\n  return (s - cacheSize + 1) / (numIndices / 3);\n};\n\n/**\n * Optimizes triangles for the post-vertex shader cache.\n *\n * @param {Object} options Object with the following properties:\n * @param {Number[]} options.indices Lists triads of numbers corresponding to the indices of the vertices\n *                        in the vertex buffer that define the geometry's triangles.\n * @param {Number} [options.maximumIndex] The maximum value of the elements in <code>args.indices</code>.\n *                                     If not supplied, this value will be computed.\n * @param {Number} [options.cacheSize=24] The number of vertices that can be stored in the cache at any one time.\n * @returns {Number[]} A list of the input indices in an optimized order.\n *\n * @exception {DeveloperError} indices length must be a multiple of three.\n * @exception {DeveloperError} cacheSize must be greater than two.\n *\n * @example\n * const indices = [0, 1, 2, 3, 4, 5];\n * const maxIndex = 5;\n * const cacheSize = 3;\n * const reorderedIndices = Cesium.Tipsify.tipsify({indices : indices, maxIndex : maxIndex, cacheSize : cacheSize});\n */\nTipsify.tipsify = function (options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const indices = options.indices;\n  const maximumIndex = options.maximumIndex;\n  const cacheSize = defaultValue(options.cacheSize, 24);\n\n  let cursor;\n\n  function skipDeadEnd(vertices, deadEnd, indices, maximumIndexPlusOne) {\n    while (deadEnd.length >= 1) {\n      // while the stack is not empty\n      const d = deadEnd[deadEnd.length - 1]; // top of the stack\n      deadEnd.splice(deadEnd.length - 1, 1); // pop the stack\n\n      if (vertices[d].numLiveTriangles > 0) {\n        return d;\n      }\n    }\n\n    while (cursor < maximumIndexPlusOne) {\n      if (vertices[cursor].numLiveTriangles > 0) {\n        ++cursor;\n        return cursor - 1;\n      }\n      ++cursor;\n    }\n    return -1;\n  }\n\n  function getNextVertex(\n    indices,\n    cacheSize,\n    oneRing,\n    vertices,\n    s,\n    deadEnd,\n    maximumIndexPlusOne\n  ) {\n    let n = -1;\n    let p;\n    let m = -1;\n    let itOneRing = 0;\n    while (itOneRing < oneRing.length) {\n      const index = oneRing[itOneRing];\n      if (vertices[index].numLiveTriangles) {\n        p = 0;\n        if (\n          s -\n            vertices[index].timeStamp +\n            2 * vertices[index].numLiveTriangles <=\n          cacheSize\n        ) {\n          p = s - vertices[index].timeStamp;\n        }\n        if (p > m || m === -1) {\n          m = p;\n          n = index;\n        }\n      }\n      ++itOneRing;\n    }\n    if (n === -1) {\n      return skipDeadEnd(vertices, deadEnd, indices, maximumIndexPlusOne);\n    }\n    return n;\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(indices)) {\n    throw new DeveloperError(\"indices is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const numIndices = indices.length;\n\n  //>>includeStart('debug', pragmas.debug);\n  if (numIndices < 3 || numIndices % 3 !== 0) {\n    throw new DeveloperError(\"indices length must be a multiple of three.\");\n  }\n  if (maximumIndex <= 0) {\n    throw new DeveloperError(\"maximumIndex must be greater than zero.\");\n  }\n  if (cacheSize < 3) {\n    throw new DeveloperError(\"cacheSize must be greater than two.\");\n  }\n  //>>includeEnd('debug');\n\n  // Determine maximum index\n  let maximumIndexPlusOne = 0;\n  let currentIndex = 0;\n  let intoIndices = indices[currentIndex];\n  const endIndex = numIndices;\n  if (defined(maximumIndex)) {\n    maximumIndexPlusOne = maximumIndex + 1;\n  } else {\n    while (currentIndex < endIndex) {\n      if (intoIndices > maximumIndexPlusOne) {\n        maximumIndexPlusOne = intoIndices;\n      }\n      ++currentIndex;\n      intoIndices = indices[currentIndex];\n    }\n    if (maximumIndexPlusOne === -1) {\n      return 0;\n    }\n    ++maximumIndexPlusOne;\n  }\n\n  // Vertices\n  const vertices = [];\n  let i;\n  for (i = 0; i < maximumIndexPlusOne; i++) {\n    vertices[i] = {\n      numLiveTriangles: 0,\n      timeStamp: 0,\n      vertexTriangles: [],\n    };\n  }\n  currentIndex = 0;\n  let triangle = 0;\n  while (currentIndex < endIndex) {\n    vertices[indices[currentIndex]].vertexTriangles.push(triangle);\n    ++vertices[indices[currentIndex]].numLiveTriangles;\n    vertices[indices[currentIndex + 1]].vertexTriangles.push(triangle);\n    ++vertices[indices[currentIndex + 1]].numLiveTriangles;\n    vertices[indices[currentIndex + 2]].vertexTriangles.push(triangle);\n    ++vertices[indices[currentIndex + 2]].numLiveTriangles;\n    ++triangle;\n    currentIndex += 3;\n  }\n\n  // Starting index\n  let f = 0;\n\n  // Time Stamp\n  let s = cacheSize + 1;\n  cursor = 1;\n\n  // Process\n  let oneRing = [];\n  const deadEnd = []; //Stack\n  let vertex;\n  let intoVertices;\n  let currentOutputIndex = 0;\n  const outputIndices = [];\n  const numTriangles = numIndices / 3;\n  const triangleEmitted = [];\n  for (i = 0; i < numTriangles; i++) {\n    triangleEmitted[i] = false;\n  }\n  let index;\n  let limit;\n  while (f !== -1) {\n    oneRing = [];\n    intoVertices = vertices[f];\n    limit = intoVertices.vertexTriangles.length;\n    for (let k = 0; k < limit; ++k) {\n      triangle = intoVertices.vertexTriangles[k];\n      if (!triangleEmitted[triangle]) {\n        triangleEmitted[triangle] = true;\n        currentIndex = triangle + triangle + triangle;\n        for (let j = 0; j < 3; ++j) {\n          // Set this index as a possible next index\n          index = indices[currentIndex];\n          oneRing.push(index);\n          deadEnd.push(index);\n\n          // Output index\n          outputIndices[currentOutputIndex] = index;\n          ++currentOutputIndex;\n\n          // Cache processing\n          vertex = vertices[index];\n          --vertex.numLiveTriangles;\n          if (s - vertex.timeStamp > cacheSize) {\n            vertex.timeStamp = s;\n            ++s;\n          }\n          ++currentIndex;\n        }\n      }\n    }\n    f = getNextVertex(\n      indices,\n      cacheSize,\n      oneRing,\n      vertices,\n      s,\n      deadEnd,\n      maximumIndexPlusOne\n    );\n  }\n\n  return outputIndices;\n};\nexport default Tipsify;\n","import Cartesian2 from \"./Cartesian2.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport Cartesian4 from \"./Cartesian4.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport EarthOrientationParameters from \"./EarthOrientationParameters.js\";\nimport EarthOrientationParametersSample from \"./EarthOrientationParametersSample.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport HeadingPitchRoll from \"./HeadingPitchRoll.js\";\nimport Iau2006XysData from \"./Iau2006XysData.js\";\nimport Iau2006XysSample from \"./Iau2006XysSample.js\";\nimport JulianDate from \"./JulianDate.js\";\nimport CesiumMath from \"./Math.js\";\nimport Matrix3 from \"./Matrix3.js\";\nimport Matrix4 from \"./Matrix4.js\";\nimport Quaternion from \"./Quaternion.js\";\nimport TimeConstants from \"./TimeConstants.js\";\n\n/**\n * Contains functions for transforming positions to various reference frames.\n *\n * @namespace Transforms\n */\nconst Transforms = {};\n\nconst vectorProductLocalFrame = {\n  up: {\n    south: \"east\",\n    north: \"west\",\n    west: \"south\",\n    east: \"north\",\n  },\n  down: {\n    south: \"west\",\n    north: \"east\",\n    west: \"north\",\n    east: \"south\",\n  },\n  south: {\n    up: \"west\",\n    down: \"east\",\n    west: \"down\",\n    east: \"up\",\n  },\n  north: {\n    up: \"east\",\n    down: \"west\",\n    west: \"up\",\n    east: \"down\",\n  },\n  west: {\n    up: \"north\",\n    down: \"south\",\n    north: \"down\",\n    south: \"up\",\n  },\n  east: {\n    up: \"south\",\n    down: \"north\",\n    north: \"up\",\n    south: \"down\",\n  },\n};\n\nconst degeneratePositionLocalFrame = {\n  north: [-1, 0, 0],\n  east: [0, 1, 0],\n  up: [0, 0, 1],\n  south: [1, 0, 0],\n  west: [0, -1, 0],\n  down: [0, 0, -1],\n};\n\nconst localFrameToFixedFrameCache = {};\n\nconst scratchCalculateCartesian = {\n  east: new Cartesian3(),\n  north: new Cartesian3(),\n  up: new Cartesian3(),\n  west: new Cartesian3(),\n  south: new Cartesian3(),\n  down: new Cartesian3(),\n};\nlet scratchFirstCartesian = new Cartesian3();\nlet scratchSecondCartesian = new Cartesian3();\nlet scratchThirdCartesian = new Cartesian3();\n/**\n * Generates a function that computes a 4x4 transformation matrix from a reference frame\n * centered at the provided origin to the provided ellipsoid's fixed reference frame.\n * @param  {String} firstAxis  name of the first axis of the local reference frame. Must be\n *  'east', 'north', 'up', 'west', 'south' or 'down'.\n * @param  {String} secondAxis  name of the second axis of the local reference frame. Must be\n *  'east', 'north', 'up', 'west', 'south' or 'down'.\n * @return {Transforms.LocalFrameToFixedFrame} The function that will computes a\n * 4x4 transformation matrix from a reference frame, with first axis and second axis compliant with the parameters,\n */\nTransforms.localFrameToFixedFrameGenerator = function (firstAxis, secondAxis) {\n  if (\n    !vectorProductLocalFrame.hasOwnProperty(firstAxis) ||\n    !vectorProductLocalFrame[firstAxis].hasOwnProperty(secondAxis)\n  ) {\n    throw new DeveloperError(\n      \"firstAxis and secondAxis must be east, north, up, west, south or down.\"\n    );\n  }\n  const thirdAxis = vectorProductLocalFrame[firstAxis][secondAxis];\n\n  /**\n   * Computes a 4x4 transformation matrix from a reference frame\n   * centered at the provided origin to the provided ellipsoid's fixed reference frame.\n   * @callback Transforms.LocalFrameToFixedFrame\n   * @param {Cartesian3} origin The center point of the local reference frame.\n   * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n   * @param {Matrix4} [result] The object onto which to store the result.\n   * @returns {Matrix4} The modified result parameter or a new Matrix4 instance if none was provided.\n   */\n  let resultat;\n  const hashAxis = firstAxis + secondAxis;\n  if (defined(localFrameToFixedFrameCache[hashAxis])) {\n    resultat = localFrameToFixedFrameCache[hashAxis];\n  } else {\n    resultat = function (origin, ellipsoid, result) {\n      //>>includeStart('debug', pragmas.debug);\n      if (!defined(origin)) {\n        throw new DeveloperError(\"origin is required.\");\n      }\n      //>>includeEnd('debug');\n      if (!defined(result)) {\n        result = new Matrix4();\n      }\n      if (\n        Cartesian3.equalsEpsilon(origin, Cartesian3.ZERO, CesiumMath.EPSILON14)\n      ) {\n        // If x, y, and z are zero, use the degenerate local frame, which is a special case\n        Cartesian3.unpack(\n          degeneratePositionLocalFrame[firstAxis],\n          0,\n          scratchFirstCartesian\n        );\n        Cartesian3.unpack(\n          degeneratePositionLocalFrame[secondAxis],\n          0,\n          scratchSecondCartesian\n        );\n        Cartesian3.unpack(\n          degeneratePositionLocalFrame[thirdAxis],\n          0,\n          scratchThirdCartesian\n        );\n      } else if (\n        CesiumMath.equalsEpsilon(origin.x, 0.0, CesiumMath.EPSILON14) &&\n        CesiumMath.equalsEpsilon(origin.y, 0.0, CesiumMath.EPSILON14)\n      ) {\n        // If x and y are zero, assume origin is at a pole, which is a special case.\n        const sign = CesiumMath.sign(origin.z);\n\n        Cartesian3.unpack(\n          degeneratePositionLocalFrame[firstAxis],\n          0,\n          scratchFirstCartesian\n        );\n        if (firstAxis !== \"east\" && firstAxis !== \"west\") {\n          Cartesian3.multiplyByScalar(\n            scratchFirstCartesian,\n            sign,\n            scratchFirstCartesian\n          );\n        }\n\n        Cartesian3.unpack(\n          degeneratePositionLocalFrame[secondAxis],\n          0,\n          scratchSecondCartesian\n        );\n        if (secondAxis !== \"east\" && secondAxis !== \"west\") {\n          Cartesian3.multiplyByScalar(\n            scratchSecondCartesian,\n            sign,\n            scratchSecondCartesian\n          );\n        }\n\n        Cartesian3.unpack(\n          degeneratePositionLocalFrame[thirdAxis],\n          0,\n          scratchThirdCartesian\n        );\n        if (thirdAxis !== \"east\" && thirdAxis !== \"west\") {\n          Cartesian3.multiplyByScalar(\n            scratchThirdCartesian,\n            sign,\n            scratchThirdCartesian\n          );\n        }\n      } else {\n        ellipsoid = defaultValue(ellipsoid, Ellipsoid.WGS84);\n        ellipsoid.geodeticSurfaceNormal(origin, scratchCalculateCartesian.up);\n\n        const up = scratchCalculateCartesian.up;\n        const east = scratchCalculateCartesian.east;\n        east.x = -origin.y;\n        east.y = origin.x;\n        east.z = 0.0;\n        Cartesian3.normalize(east, scratchCalculateCartesian.east);\n        Cartesian3.cross(up, east, scratchCalculateCartesian.north);\n\n        Cartesian3.multiplyByScalar(\n          scratchCalculateCartesian.up,\n          -1,\n          scratchCalculateCartesian.down\n        );\n        Cartesian3.multiplyByScalar(\n          scratchCalculateCartesian.east,\n          -1,\n          scratchCalculateCartesian.west\n        );\n        Cartesian3.multiplyByScalar(\n          scratchCalculateCartesian.north,\n          -1,\n          scratchCalculateCartesian.south\n        );\n\n        scratchFirstCartesian = scratchCalculateCartesian[firstAxis];\n        scratchSecondCartesian = scratchCalculateCartesian[secondAxis];\n        scratchThirdCartesian = scratchCalculateCartesian[thirdAxis];\n      }\n      result[0] = scratchFirstCartesian.x;\n      result[1] = scratchFirstCartesian.y;\n      result[2] = scratchFirstCartesian.z;\n      result[3] = 0.0;\n      result[4] = scratchSecondCartesian.x;\n      result[5] = scratchSecondCartesian.y;\n      result[6] = scratchSecondCartesian.z;\n      result[7] = 0.0;\n      result[8] = scratchThirdCartesian.x;\n      result[9] = scratchThirdCartesian.y;\n      result[10] = scratchThirdCartesian.z;\n      result[11] = 0.0;\n      result[12] = origin.x;\n      result[13] = origin.y;\n      result[14] = origin.z;\n      result[15] = 1.0;\n      return result;\n    };\n    localFrameToFixedFrameCache[hashAxis] = resultat;\n  }\n  return resultat;\n};\n\n/**\n * Computes a 4x4 transformation matrix from a reference frame with an east-north-up axes\n * centered at the provided origin to the provided ellipsoid's fixed reference frame.\n * The local axes are defined as:\n * <ul>\n * <li>The <code>x</code> axis points in the local east direction.</li>\n * <li>The <code>y</code> axis points in the local north direction.</li>\n * <li>The <code>z</code> axis points in the direction of the ellipsoid surface normal which passes through the position.</li>\n * </ul>\n *\n * @function\n * @param {Cartesian3} origin The center point of the local reference frame.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n * @param {Matrix4} [result] The object onto which to store the result.\n * @returns {Matrix4} The modified result parameter or a new Matrix4 instance if none was provided.\n *\n * @example\n * // Get the transform from local east-north-up at cartographic (0.0, 0.0) to Earth's fixed frame.\n * const center = Cesium.Cartesian3.fromDegrees(0.0, 0.0);\n * const transform = Cesium.Transforms.eastNorthUpToFixedFrame(center);\n */\nTransforms.eastNorthUpToFixedFrame = Transforms.localFrameToFixedFrameGenerator(\n  \"east\",\n  \"north\"\n);\n\n/**\n * Computes a 4x4 transformation matrix from a reference frame with an north-east-down axes\n * centered at the provided origin to the provided ellipsoid's fixed reference frame.\n * The local axes are defined as:\n * <ul>\n * <li>The <code>x</code> axis points in the local north direction.</li>\n * <li>The <code>y</code> axis points in the local east direction.</li>\n * <li>The <code>z</code> axis points in the opposite direction of the ellipsoid surface normal which passes through the position.</li>\n * </ul>\n *\n * @function\n * @param {Cartesian3} origin The center point of the local reference frame.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n * @param {Matrix4} [result] The object onto which to store the result.\n * @returns {Matrix4} The modified result parameter or a new Matrix4 instance if none was provided.\n *\n * @example\n * // Get the transform from local north-east-down at cartographic (0.0, 0.0) to Earth's fixed frame.\n * const center = Cesium.Cartesian3.fromDegrees(0.0, 0.0);\n * const transform = Cesium.Transforms.northEastDownToFixedFrame(center);\n */\nTransforms.northEastDownToFixedFrame = Transforms.localFrameToFixedFrameGenerator(\n  \"north\",\n  \"east\"\n);\n\n/**\n * Computes a 4x4 transformation matrix from a reference frame with an north-up-east axes\n * centered at the provided origin to the provided ellipsoid's fixed reference frame.\n * The local axes are defined as:\n * <ul>\n * <li>The <code>x</code> axis points in the local north direction.</li>\n * <li>The <code>y</code> axis points in the direction of the ellipsoid surface normal which passes through the position.</li>\n * <li>The <code>z</code> axis points in the local east direction.</li>\n * </ul>\n *\n * @function\n * @param {Cartesian3} origin The center point of the local reference frame.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n * @param {Matrix4} [result] The object onto which to store the result.\n * @returns {Matrix4} The modified result parameter or a new Matrix4 instance if none was provided.\n *\n * @example\n * // Get the transform from local north-up-east at cartographic (0.0, 0.0) to Earth's fixed frame.\n * const center = Cesium.Cartesian3.fromDegrees(0.0, 0.0);\n * const transform = Cesium.Transforms.northUpEastToFixedFrame(center);\n */\nTransforms.northUpEastToFixedFrame = Transforms.localFrameToFixedFrameGenerator(\n  \"north\",\n  \"up\"\n);\n\n/**\n * Computes a 4x4 transformation matrix from a reference frame with an north-west-up axes\n * centered at the provided origin to the provided ellipsoid's fixed reference frame.\n * The local axes are defined as:\n * <ul>\n * <li>The <code>x</code> axis points in the local north direction.</li>\n * <li>The <code>y</code> axis points in the local west direction.</li>\n * <li>The <code>z</code> axis points in the direction of the ellipsoid surface normal which passes through the position.</li>\n * </ul>\n *\n * @function\n * @param {Cartesian3} origin The center point of the local reference frame.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n * @param {Matrix4} [result] The object onto which to store the result.\n * @returns {Matrix4} The modified result parameter or a new Matrix4 instance if none was provided.\n *\n * @example\n * // Get the transform from local north-West-Up at cartographic (0.0, 0.0) to Earth's fixed frame.\n * const center = Cesium.Cartesian3.fromDegrees(0.0, 0.0);\n * const transform = Cesium.Transforms.northWestUpToFixedFrame(center);\n */\nTransforms.northWestUpToFixedFrame = Transforms.localFrameToFixedFrameGenerator(\n  \"north\",\n  \"west\"\n);\n\nconst scratchHPRQuaternion = new Quaternion();\nconst scratchScale = new Cartesian3(1.0, 1.0, 1.0);\nconst scratchHPRMatrix4 = new Matrix4();\n\n/**\n * Computes a 4x4 transformation matrix from a reference frame with axes computed from the heading-pitch-roll angles\n * centered at the provided origin to the provided ellipsoid's fixed reference frame. Heading is the rotation from the local north\n * direction where a positive angle is increasing eastward. Pitch is the rotation from the local east-north plane. Positive pitch angles\n * are above the plane. Negative pitch angles are below the plane. Roll is the first rotation applied about the local east axis.\n *\n * @param {Cartesian3} origin The center point of the local reference frame.\n * @param {HeadingPitchRoll} headingPitchRoll The heading, pitch, and roll.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n * @param {Transforms.LocalFrameToFixedFrame} [fixedFrameTransform=Transforms.eastNorthUpToFixedFrame] A 4x4 transformation\n *  matrix from a reference frame to the provided ellipsoid's fixed reference frame\n * @param {Matrix4} [result] The object onto which to store the result.\n * @returns {Matrix4} The modified result parameter or a new Matrix4 instance if none was provided.\n *\n * @example\n * // Get the transform from local heading-pitch-roll at cartographic (0.0, 0.0) to Earth's fixed frame.\n * const center = Cesium.Cartesian3.fromDegrees(0.0, 0.0);\n * const heading = -Cesium.Math.PI_OVER_TWO;\n * const pitch = Cesium.Math.PI_OVER_FOUR;\n * const roll = 0.0;\n * const hpr = new Cesium.HeadingPitchRoll(heading, pitch, roll);\n * const transform = Cesium.Transforms.headingPitchRollToFixedFrame(center, hpr);\n */\nTransforms.headingPitchRollToFixedFrame = function (\n  origin,\n  headingPitchRoll,\n  ellipsoid,\n  fixedFrameTransform,\n  result\n) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"HeadingPitchRoll\", headingPitchRoll);\n  //>>includeEnd('debug');\n\n  fixedFrameTransform = defaultValue(\n    fixedFrameTransform,\n    Transforms.eastNorthUpToFixedFrame\n  );\n  const hprQuaternion = Quaternion.fromHeadingPitchRoll(\n    headingPitchRoll,\n    scratchHPRQuaternion\n  );\n  const hprMatrix = Matrix4.fromTranslationQuaternionRotationScale(\n    Cartesian3.ZERO,\n    hprQuaternion,\n    scratchScale,\n    scratchHPRMatrix4\n  );\n  result = fixedFrameTransform(origin, ellipsoid, result);\n  return Matrix4.multiply(result, hprMatrix, result);\n};\n\nconst scratchENUMatrix4 = new Matrix4();\nconst scratchHPRMatrix3 = new Matrix3();\n\n/**\n * Computes a quaternion from a reference frame with axes computed from the heading-pitch-roll angles\n * centered at the provided origin. Heading is the rotation from the local north\n * direction where a positive angle is increasing eastward. Pitch is the rotation from the local east-north plane. Positive pitch angles\n * are above the plane. Negative pitch angles are below the plane. Roll is the first rotation applied about the local east axis.\n *\n * @param {Cartesian3} origin The center point of the local reference frame.\n * @param {HeadingPitchRoll} headingPitchRoll The heading, pitch, and roll.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n * @param {Transforms.LocalFrameToFixedFrame} [fixedFrameTransform=Transforms.eastNorthUpToFixedFrame] A 4x4 transformation\n *  matrix from a reference frame to the provided ellipsoid's fixed reference frame\n * @param {Quaternion} [result] The object onto which to store the result.\n * @returns {Quaternion} The modified result parameter or a new Quaternion instance if none was provided.\n *\n * @example\n * // Get the quaternion from local heading-pitch-roll at cartographic (0.0, 0.0) to Earth's fixed frame.\n * const center = Cesium.Cartesian3.fromDegrees(0.0, 0.0);\n * const heading = -Cesium.Math.PI_OVER_TWO;\n * const pitch = Cesium.Math.PI_OVER_FOUR;\n * const roll = 0.0;\n * const hpr = new HeadingPitchRoll(heading, pitch, roll);\n * const quaternion = Cesium.Transforms.headingPitchRollQuaternion(center, hpr);\n */\nTransforms.headingPitchRollQuaternion = function (\n  origin,\n  headingPitchRoll,\n  ellipsoid,\n  fixedFrameTransform,\n  result\n) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"HeadingPitchRoll\", headingPitchRoll);\n  //>>includeEnd('debug');\n\n  const transform = Transforms.headingPitchRollToFixedFrame(\n    origin,\n    headingPitchRoll,\n    ellipsoid,\n    fixedFrameTransform,\n    scratchENUMatrix4\n  );\n  const rotation = Matrix4.getMatrix3(transform, scratchHPRMatrix3);\n  return Quaternion.fromRotationMatrix(rotation, result);\n};\n\nconst noScale = new Cartesian3(1.0, 1.0, 1.0);\nconst hprCenterScratch = new Cartesian3();\nconst ffScratch = new Matrix4();\nconst hprTransformScratch = new Matrix4();\nconst hprRotationScratch = new Matrix3();\nconst hprQuaternionScratch = new Quaternion();\n/**\n * Computes heading-pitch-roll angles from a transform in a particular reference frame. Heading is the rotation from the local north\n * direction where a positive angle is increasing eastward. Pitch is the rotation from the local east-north plane. Positive pitch angles\n * are above the plane. Negative pitch angles are below the plane. Roll is the first rotation applied about the local east axis.\n *\n * @param {Matrix4} transform The transform\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n * @param {Transforms.LocalFrameToFixedFrame} [fixedFrameTransform=Transforms.eastNorthUpToFixedFrame] A 4x4 transformation\n *  matrix from a reference frame to the provided ellipsoid's fixed reference frame\n * @param {HeadingPitchRoll} [result] The object onto which to store the result.\n * @returns {HeadingPitchRoll} The modified result parameter or a new HeadingPitchRoll instance if none was provided.\n */\nTransforms.fixedFrameToHeadingPitchRoll = function (\n  transform,\n  ellipsoid,\n  fixedFrameTransform,\n  result\n) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"transform\", transform);\n  //>>includeEnd('debug');\n\n  ellipsoid = defaultValue(ellipsoid, Ellipsoid.WGS84);\n  fixedFrameTransform = defaultValue(\n    fixedFrameTransform,\n    Transforms.eastNorthUpToFixedFrame\n  );\n  if (!defined(result)) {\n    result = new HeadingPitchRoll();\n  }\n\n  const center = Matrix4.getTranslation(transform, hprCenterScratch);\n  if (Cartesian3.equals(center, Cartesian3.ZERO)) {\n    result.heading = 0;\n    result.pitch = 0;\n    result.roll = 0;\n    return result;\n  }\n  let toFixedFrame = Matrix4.inverseTransformation(\n    fixedFrameTransform(center, ellipsoid, ffScratch),\n    ffScratch\n  );\n  let transformCopy = Matrix4.setScale(transform, noScale, hprTransformScratch);\n  transformCopy = Matrix4.setTranslation(\n    transformCopy,\n    Cartesian3.ZERO,\n    transformCopy\n  );\n\n  toFixedFrame = Matrix4.multiply(toFixedFrame, transformCopy, toFixedFrame);\n  let quaternionRotation = Quaternion.fromRotationMatrix(\n    Matrix4.getMatrix3(toFixedFrame, hprRotationScratch),\n    hprQuaternionScratch\n  );\n  quaternionRotation = Quaternion.normalize(\n    quaternionRotation,\n    quaternionRotation\n  );\n\n  return HeadingPitchRoll.fromQuaternion(quaternionRotation, result);\n};\n\nconst gmstConstant0 = 6 * 3600 + 41 * 60 + 50.54841;\nconst gmstConstant1 = 8640184.812866;\nconst gmstConstant2 = 0.093104;\nconst gmstConstant3 = -6.2e-6;\nconst rateCoef = 1.1772758384668e-19;\nconst wgs84WRPrecessing = 7.2921158553e-5;\nconst twoPiOverSecondsInDay = CesiumMath.TWO_PI / 86400.0;\nlet dateInUtc = new JulianDate();\n\n/**\n * Computes a rotation matrix to transform a point or vector from True Equator Mean Equinox (TEME) axes to the\n * pseudo-fixed axes at a given time.  This method treats the UT1 time standard as equivalent to UTC.\n *\n * @param {JulianDate} date The time at which to compute the rotation matrix.\n * @param {Matrix3} [result] The object onto which to store the result.\n * @returns {Matrix3} The modified result parameter or a new Matrix3 instance if none was provided.\n *\n * @example\n * //Set the view to the inertial frame.\n * scene.postUpdate.addEventListener(function(scene, time) {\n *    const now = Cesium.JulianDate.now();\n *    const offset = Cesium.Matrix4.multiplyByPoint(camera.transform, camera.position, new Cesium.Cartesian3());\n *    const transform = Cesium.Matrix4.fromRotationTranslation(Cesium.Transforms.computeTemeToPseudoFixedMatrix(now));\n *    const inverseTransform = Cesium.Matrix4.inverseTransformation(transform, new Cesium.Matrix4());\n *    Cesium.Matrix4.multiplyByPoint(inverseTransform, offset, offset);\n *    camera.lookAtTransform(transform, offset);\n * });\n */\nTransforms.computeTemeToPseudoFixedMatrix = function (date, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(date)) {\n    throw new DeveloperError(\"date is required.\");\n  }\n  //>>includeEnd('debug');\n\n  // GMST is actually computed using UT1.  We're using UTC as an approximation of UT1.\n  // We do not want to use the function like convertTaiToUtc in JulianDate because\n  // we explicitly do not want to fail when inside the leap second.\n\n  dateInUtc = JulianDate.addSeconds(\n    date,\n    -JulianDate.computeTaiMinusUtc(date),\n    dateInUtc\n  );\n  const utcDayNumber = dateInUtc.dayNumber;\n  const utcSecondsIntoDay = dateInUtc.secondsOfDay;\n\n  let t;\n  const diffDays = utcDayNumber - 2451545;\n  if (utcSecondsIntoDay >= 43200.0) {\n    t = (diffDays + 0.5) / TimeConstants.DAYS_PER_JULIAN_CENTURY;\n  } else {\n    t = (diffDays - 0.5) / TimeConstants.DAYS_PER_JULIAN_CENTURY;\n  }\n\n  const gmst0 =\n    gmstConstant0 +\n    t * (gmstConstant1 + t * (gmstConstant2 + t * gmstConstant3));\n  const angle = (gmst0 * twoPiOverSecondsInDay) % CesiumMath.TWO_PI;\n  const ratio = wgs84WRPrecessing + rateCoef * (utcDayNumber - 2451545.5);\n  const secondsSinceMidnight =\n    (utcSecondsIntoDay + TimeConstants.SECONDS_PER_DAY * 0.5) %\n    TimeConstants.SECONDS_PER_DAY;\n  const gha = angle + ratio * secondsSinceMidnight;\n  const cosGha = Math.cos(gha);\n  const sinGha = Math.sin(gha);\n\n  if (!defined(result)) {\n    return new Matrix3(\n      cosGha,\n      sinGha,\n      0.0,\n      -sinGha,\n      cosGha,\n      0.0,\n      0.0,\n      0.0,\n      1.0\n    );\n  }\n  result[0] = cosGha;\n  result[1] = -sinGha;\n  result[2] = 0.0;\n  result[3] = sinGha;\n  result[4] = cosGha;\n  result[5] = 0.0;\n  result[6] = 0.0;\n  result[7] = 0.0;\n  result[8] = 1.0;\n  return result;\n};\n\n/**\n * The source of IAU 2006 XYS data, used for computing the transformation between the\n * Fixed and ICRF axes.\n * @type {Iau2006XysData}\n *\n * @see Transforms.computeIcrfToFixedMatrix\n * @see Transforms.computeFixedToIcrfMatrix\n *\n * @private\n */\nTransforms.iau2006XysData = new Iau2006XysData();\n\n/**\n * The source of Earth Orientation Parameters (EOP) data, used for computing the transformation\n * between the Fixed and ICRF axes.  By default, zero values are used for all EOP values,\n * yielding a reasonable but not completely accurate representation of the ICRF axes.\n * @type {EarthOrientationParameters}\n *\n * @see Transforms.computeIcrfToFixedMatrix\n * @see Transforms.computeFixedToIcrfMatrix\n *\n * @private\n */\nTransforms.earthOrientationParameters = EarthOrientationParameters.NONE;\n\nconst ttMinusTai = 32.184;\nconst j2000ttDays = 2451545.0;\n\n/**\n * Preloads the data necessary to transform between the ICRF and Fixed axes, in either\n * direction, over a given interval.  This function returns a promise that, when resolved,\n * indicates that the preload has completed.\n *\n * @param {TimeInterval} timeInterval The interval to preload.\n * @returns {Promise<void>} A promise that, when resolved, indicates that the preload has completed\n *          and evaluation of the transformation between the fixed and ICRF axes will\n *          no longer return undefined for a time inside the interval.\n *\n *\n * @example\n * const interval = new Cesium.TimeInterval(...);\n * Promise.resolve(Cesium.Transforms.preloadIcrfFixed(interval)).then(function() {\n *     // the data is now loaded\n * });\n *\n * @see Transforms.computeIcrfToFixedMatrix\n * @see Transforms.computeFixedToIcrfMatrix\n */\nTransforms.preloadIcrfFixed = function (timeInterval) {\n  const startDayTT = timeInterval.start.dayNumber;\n  const startSecondTT = timeInterval.start.secondsOfDay + ttMinusTai;\n  const stopDayTT = timeInterval.stop.dayNumber;\n  const stopSecondTT = timeInterval.stop.secondsOfDay + ttMinusTai;\n\n  const xysPromise = Transforms.iau2006XysData.preload(\n    startDayTT,\n    startSecondTT,\n    stopDayTT,\n    stopSecondTT\n  );\n  const eopPromise = Transforms.earthOrientationParameters.getPromiseToLoad();\n\n  return Promise.all([xysPromise, eopPromise]);\n};\n\n/**\n * Computes a rotation matrix to transform a point or vector from the International Celestial\n * Reference Frame (GCRF/ICRF) inertial frame axes to the Earth-Fixed frame axes (ITRF)\n * at a given time.  This function may return undefined if the data necessary to\n * do the transformation is not yet loaded.\n *\n * @param {JulianDate} date The time at which to compute the rotation matrix.\n * @param {Matrix3} [result] The object onto which to store the result.  If this parameter is\n *                  not specified, a new instance is created and returned.\n * @returns {Matrix3} The rotation matrix, or undefined if the data necessary to do the\n *                   transformation is not yet loaded.\n *\n *\n * @example\n * scene.postUpdate.addEventListener(function(scene, time) {\n *   // View in ICRF.\n *   const icrfToFixed = Cesium.Transforms.computeIcrfToFixedMatrix(time);\n *   if (Cesium.defined(icrfToFixed)) {\n *     const offset = Cesium.Cartesian3.clone(camera.position);\n *     const transform = Cesium.Matrix4.fromRotationTranslation(icrfToFixed);\n *     camera.lookAtTransform(transform, offset);\n *   }\n * });\n *\n * @see Transforms.preloadIcrfFixed\n */\nTransforms.computeIcrfToFixedMatrix = function (date, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(date)) {\n    throw new DeveloperError(\"date is required.\");\n  }\n  //>>includeEnd('debug');\n  if (!defined(result)) {\n    result = new Matrix3();\n  }\n\n  const fixedToIcrfMtx = Transforms.computeFixedToIcrfMatrix(date, result);\n  if (!defined(fixedToIcrfMtx)) {\n    return undefined;\n  }\n\n  return Matrix3.transpose(fixedToIcrfMtx, result);\n};\n\nconst xysScratch = new Iau2006XysSample(0.0, 0.0, 0.0);\nconst eopScratch = new EarthOrientationParametersSample(\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0\n);\nconst rotation1Scratch = new Matrix3();\nconst rotation2Scratch = new Matrix3();\n\n/**\n * Computes a rotation matrix to transform a point or vector from the Earth-Fixed frame axes (ITRF)\n * to the International Celestial Reference Frame (GCRF/ICRF) inertial frame axes\n * at a given time.  This function may return undefined if the data necessary to\n * do the transformation is not yet loaded.\n *\n * @param {JulianDate} date The time at which to compute the rotation matrix.\n * @param {Matrix3} [result] The object onto which to store the result.  If this parameter is\n *                  not specified, a new instance is created and returned.\n * @returns {Matrix3} The rotation matrix, or undefined if the data necessary to do the\n *                   transformation is not yet loaded.\n *\n *\n * @example\n * // Transform a point from the ICRF axes to the Fixed axes.\n * const now = Cesium.JulianDate.now();\n * const pointInFixed = Cesium.Cartesian3.fromDegrees(0.0, 0.0);\n * const fixedToIcrf = Cesium.Transforms.computeIcrfToFixedMatrix(now);\n * let pointInInertial = new Cesium.Cartesian3();\n * if (Cesium.defined(fixedToIcrf)) {\n *     pointInInertial = Cesium.Matrix3.multiplyByVector(fixedToIcrf, pointInFixed, pointInInertial);\n * }\n *\n * @see Transforms.preloadIcrfFixed\n */\nTransforms.computeFixedToIcrfMatrix = function (date, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(date)) {\n    throw new DeveloperError(\"date is required.\");\n  }\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    result = new Matrix3();\n  }\n\n  // Compute pole wander\n  const eop = Transforms.earthOrientationParameters.compute(date, eopScratch);\n  if (!defined(eop)) {\n    return undefined;\n  }\n\n  // There is no external conversion to Terrestrial Time (TT).\n  // So use International Atomic Time (TAI) and convert using offsets.\n  // Here we are assuming that dayTT and secondTT are positive\n  const dayTT = date.dayNumber;\n  // It's possible here that secondTT could roll over 86400\n  // This does not seem to affect the precision (unit tests check for this)\n  const secondTT = date.secondsOfDay + ttMinusTai;\n\n  const xys = Transforms.iau2006XysData.computeXysRadians(\n    dayTT,\n    secondTT,\n    xysScratch\n  );\n  if (!defined(xys)) {\n    return undefined;\n  }\n\n  const x = xys.x + eop.xPoleOffset;\n  const y = xys.y + eop.yPoleOffset;\n\n  // Compute XYS rotation\n  const a = 1.0 / (1.0 + Math.sqrt(1.0 - x * x - y * y));\n\n  const rotation1 = rotation1Scratch;\n  rotation1[0] = 1.0 - a * x * x;\n  rotation1[3] = -a * x * y;\n  rotation1[6] = x;\n  rotation1[1] = -a * x * y;\n  rotation1[4] = 1 - a * y * y;\n  rotation1[7] = y;\n  rotation1[2] = -x;\n  rotation1[5] = -y;\n  rotation1[8] = 1 - a * (x * x + y * y);\n\n  const rotation2 = Matrix3.fromRotationZ(-xys.s, rotation2Scratch);\n  const matrixQ = Matrix3.multiply(rotation1, rotation2, rotation1Scratch);\n\n  // Similar to TT conversions above\n  // It's possible here that secondTT could roll over 86400\n  // This does not seem to affect the precision (unit tests check for this)\n  const dateUt1day = date.dayNumber;\n  const dateUt1sec =\n    date.secondsOfDay - JulianDate.computeTaiMinusUtc(date) + eop.ut1MinusUtc;\n\n  // Compute Earth rotation angle\n  // The IERS standard for era is\n  //    era = 0.7790572732640 + 1.00273781191135448 * Tu\n  // where\n  //    Tu = JulianDateInUt1 - 2451545.0\n  // However, you get much more precision if you make the following simplification\n  //    era = a + (1 + b) * (JulianDayNumber + FractionOfDay - 2451545)\n  //    era = a + (JulianDayNumber - 2451545) + FractionOfDay + b (JulianDayNumber - 2451545 + FractionOfDay)\n  //    era = a + FractionOfDay + b (JulianDayNumber - 2451545 + FractionOfDay)\n  // since (JulianDayNumber - 2451545) represents an integer number of revolutions which will be discarded anyway.\n  const daysSinceJ2000 = dateUt1day - 2451545;\n  const fractionOfDay = dateUt1sec / TimeConstants.SECONDS_PER_DAY;\n  let era =\n    0.779057273264 +\n    fractionOfDay +\n    0.00273781191135448 * (daysSinceJ2000 + fractionOfDay);\n  era = (era % 1.0) * CesiumMath.TWO_PI;\n\n  const earthRotation = Matrix3.fromRotationZ(era, rotation2Scratch);\n\n  // pseudoFixed to ICRF\n  const pfToIcrf = Matrix3.multiply(matrixQ, earthRotation, rotation1Scratch);\n\n  // Compute pole wander matrix\n  const cosxp = Math.cos(eop.xPoleWander);\n  const cosyp = Math.cos(eop.yPoleWander);\n  const sinxp = Math.sin(eop.xPoleWander);\n  const sinyp = Math.sin(eop.yPoleWander);\n\n  let ttt = dayTT - j2000ttDays + secondTT / TimeConstants.SECONDS_PER_DAY;\n  ttt /= 36525.0;\n\n  // approximate sp value in rad\n  const sp = (-47.0e-6 * ttt * CesiumMath.RADIANS_PER_DEGREE) / 3600.0;\n  const cossp = Math.cos(sp);\n  const sinsp = Math.sin(sp);\n\n  const fToPfMtx = rotation2Scratch;\n  fToPfMtx[0] = cosxp * cossp;\n  fToPfMtx[1] = cosxp * sinsp;\n  fToPfMtx[2] = sinxp;\n  fToPfMtx[3] = -cosyp * sinsp + sinyp * sinxp * cossp;\n  fToPfMtx[4] = cosyp * cossp + sinyp * sinxp * sinsp;\n  fToPfMtx[5] = -sinyp * cosxp;\n  fToPfMtx[6] = -sinyp * sinsp - cosyp * sinxp * cossp;\n  fToPfMtx[7] = sinyp * cossp - cosyp * sinxp * sinsp;\n  fToPfMtx[8] = cosyp * cosxp;\n\n  return Matrix3.multiply(pfToIcrf, fToPfMtx, result);\n};\n\nconst pointToWindowCoordinatesTemp = new Cartesian4();\n\n/**\n * Transform a point from model coordinates to window coordinates.\n *\n * @param {Matrix4} modelViewProjectionMatrix The 4x4 model-view-projection matrix.\n * @param {Matrix4} viewportTransformation The 4x4 viewport transformation.\n * @param {Cartesian3} point The point to transform.\n * @param {Cartesian2} [result] The object onto which to store the result.\n * @returns {Cartesian2} The modified result parameter or a new Cartesian2 instance if none was provided.\n */\nTransforms.pointToWindowCoordinates = function (\n  modelViewProjectionMatrix,\n  viewportTransformation,\n  point,\n  result\n) {\n  result = Transforms.pointToGLWindowCoordinates(\n    modelViewProjectionMatrix,\n    viewportTransformation,\n    point,\n    result\n  );\n  result.y = 2.0 * viewportTransformation[5] - result.y;\n  return result;\n};\n\n/**\n * @private\n */\nTransforms.pointToGLWindowCoordinates = function (\n  modelViewProjectionMatrix,\n  viewportTransformation,\n  point,\n  result\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(modelViewProjectionMatrix)) {\n    throw new DeveloperError(\"modelViewProjectionMatrix is required.\");\n  }\n\n  if (!defined(viewportTransformation)) {\n    throw new DeveloperError(\"viewportTransformation is required.\");\n  }\n\n  if (!defined(point)) {\n    throw new DeveloperError(\"point is required.\");\n  }\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    result = new Cartesian2();\n  }\n\n  const tmp = pointToWindowCoordinatesTemp;\n\n  Matrix4.multiplyByVector(\n    modelViewProjectionMatrix,\n    Cartesian4.fromElements(point.x, point.y, point.z, 1, tmp),\n    tmp\n  );\n  Cartesian4.multiplyByScalar(tmp, 1.0 / tmp.w, tmp);\n  Matrix4.multiplyByVector(viewportTransformation, tmp, tmp);\n  return Cartesian2.fromCartesian4(tmp, result);\n};\n\nconst normalScratch = new Cartesian3();\nconst rightScratch = new Cartesian3();\nconst upScratch = new Cartesian3();\n\n/**\n * Transform a position and velocity to a rotation matrix.\n *\n * @param {Cartesian3} position The position to transform.\n * @param {Cartesian3} velocity The velocity vector to transform.\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid whose fixed frame is used in the transformation.\n * @param {Matrix3} [result] The object onto which to store the result.\n * @returns {Matrix3} The modified result parameter or a new Matrix3 instance if none was provided.\n */\nTransforms.rotationMatrixFromPositionVelocity = function (\n  position,\n  velocity,\n  ellipsoid,\n  result\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(position)) {\n    throw new DeveloperError(\"position is required.\");\n  }\n\n  if (!defined(velocity)) {\n    throw new DeveloperError(\"velocity is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const normal = defaultValue(ellipsoid, Ellipsoid.WGS84).geodeticSurfaceNormal(\n    position,\n    normalScratch\n  );\n  let right = Cartesian3.cross(velocity, normal, rightScratch);\n\n  if (Cartesian3.equalsEpsilon(right, Cartesian3.ZERO, CesiumMath.EPSILON6)) {\n    right = Cartesian3.clone(Cartesian3.UNIT_X, right);\n  }\n\n  const up = Cartesian3.cross(right, velocity, upScratch);\n  Cartesian3.normalize(up, up);\n  Cartesian3.cross(velocity, up, right);\n  Cartesian3.negate(right, right);\n  Cartesian3.normalize(right, right);\n\n  if (!defined(result)) {\n    result = new Matrix3();\n  }\n\n  result[0] = velocity.x;\n  result[1] = velocity.y;\n  result[2] = velocity.z;\n  result[3] = right.x;\n  result[4] = right.y;\n  result[5] = right.z;\n  result[6] = up.x;\n  result[7] = up.y;\n  result[8] = up.z;\n\n  return result;\n};\n\nconst swizzleMatrix = new Matrix4(\n  0.0,\n  0.0,\n  1.0,\n  0.0,\n  1.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  1.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  0.0,\n  1.0\n);\n\nconst scratchCartographic = new Cartographic();\nconst scratchCartesian3Projection = new Cartesian3();\nconst scratchCenter = new Cartesian3();\nconst scratchRotation = new Matrix3();\nconst scratchFromENU = new Matrix4();\nconst scratchToENU = new Matrix4();\n\n/**\n * @private\n */\nTransforms.basisTo2D = function (projection, matrix, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(projection)) {\n    throw new DeveloperError(\"projection is required.\");\n  }\n  if (!defined(matrix)) {\n    throw new DeveloperError(\"matrix is required.\");\n  }\n  if (!defined(result)) {\n    throw new DeveloperError(\"result is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const rtcCenter = Matrix4.getTranslation(matrix, scratchCenter);\n  const ellipsoid = projection.ellipsoid;\n\n  // Get the 2D Center\n  const cartographic = ellipsoid.cartesianToCartographic(\n    rtcCenter,\n    scratchCartographic\n  );\n  const projectedPosition = projection.project(\n    cartographic,\n    scratchCartesian3Projection\n  );\n  Cartesian3.fromElements(\n    projectedPosition.z,\n    projectedPosition.x,\n    projectedPosition.y,\n    projectedPosition\n  );\n\n  // Assuming the instance are positioned in WGS84, invert the WGS84 transform to get the local transform and then convert to 2D\n  const fromENU = Transforms.eastNorthUpToFixedFrame(\n    rtcCenter,\n    ellipsoid,\n    scratchFromENU\n  );\n  const toENU = Matrix4.inverseTransformation(fromENU, scratchToENU);\n  const rotation = Matrix4.getMatrix3(matrix, scratchRotation);\n  const local = Matrix4.multiplyByMatrix3(toENU, rotation, result);\n  Matrix4.multiply(swizzleMatrix, local, result); // Swap x, y, z for 2D\n  Matrix4.setTranslation(result, projectedPosition, result); // Use the projected center\n\n  return result;\n};\n\n/**\n * @private\n */\nTransforms.wgs84To2DModelMatrix = function (projection, center, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(projection)) {\n    throw new DeveloperError(\"projection is required.\");\n  }\n  if (!defined(center)) {\n    throw new DeveloperError(\"center is required.\");\n  }\n  if (!defined(result)) {\n    throw new DeveloperError(\"result is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const ellipsoid = projection.ellipsoid;\n\n  const fromENU = Transforms.eastNorthUpToFixedFrame(\n    center,\n    ellipsoid,\n    scratchFromENU\n  );\n  const toENU = Matrix4.inverseTransformation(fromENU, scratchToENU);\n\n  const cartographic = ellipsoid.cartesianToCartographic(\n    center,\n    scratchCartographic\n  );\n  const projectedPosition = projection.project(\n    cartographic,\n    scratchCartesian3Projection\n  );\n  Cartesian3.fromElements(\n    projectedPosition.z,\n    projectedPosition.x,\n    projectedPosition.y,\n    projectedPosition\n  );\n\n  const translation = Matrix4.fromTranslation(\n    projectedPosition,\n    scratchFromENU\n  );\n  Matrix4.multiply(swizzleMatrix, toENU, result);\n  Matrix4.multiply(translation, result, result);\n\n  return result;\n};\nexport default Transforms;\n","import Cartesian3 from \"./Cartesian3.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport Quaternion from \"./Quaternion.js\";\n\nconst defaultScale = new Cartesian3(1.0, 1.0, 1.0);\nconst defaultTranslation = Cartesian3.ZERO;\nconst defaultRotation = Quaternion.IDENTITY;\n\n/**\n * An affine transformation defined by a translation, rotation, and scale.\n * @alias TranslationRotationScale\n * @constructor\n *\n * @param {Cartesian3} [translation=Cartesian3.ZERO] A {@link Cartesian3} specifying the (x, y, z) translation to apply to the node.\n * @param {Quaternion} [rotation=Quaternion.IDENTITY] A {@link Quaternion} specifying the (x, y, z, w) rotation to apply to the node.\n * @param {Cartesian3} [scale=new Cartesian3(1.0, 1.0, 1.0)] A {@link Cartesian3} specifying the (x, y, z) scaling to apply to the node.\n */\nfunction TranslationRotationScale(translation, rotation, scale) {\n  /**\n   * Gets or sets the (x, y, z) translation to apply to the node.\n   * @type {Cartesian3}\n   * @default Cartesian3.ZERO\n   */\n  this.translation = Cartesian3.clone(\n    defaultValue(translation, defaultTranslation)\n  );\n\n  /**\n   * Gets or sets the (x, y, z, w) rotation to apply to the node.\n   * @type {Quaternion}\n   * @default Quaternion.IDENTITY\n   */\n  this.rotation = Quaternion.clone(defaultValue(rotation, defaultRotation));\n\n  /**\n   * Gets or sets the (x, y, z) scaling to apply to the node.\n   * @type {Cartesian3}\n   * @default new Cartesian3(1.0, 1.0, 1.0)\n   */\n  this.scale = Cartesian3.clone(defaultValue(scale, defaultScale));\n}\n\n/**\n * Compares this instance against the provided instance and returns\n * <code>true</code> if they are equal, <code>false</code> otherwise.\n *\n * @param {TranslationRotationScale} [right] The right hand side TranslationRotationScale.\n * @returns {Boolean} <code>true</code> if they are equal, <code>false</code> otherwise.\n */\nTranslationRotationScale.prototype.equals = function (right) {\n  return (\n    this === right ||\n    (defined(right) &&\n      Cartesian3.equals(this.translation, right.translation) &&\n      Quaternion.equals(this.rotation, right.rotation) &&\n      Cartesian3.equals(this.scale, right.scale))\n  );\n};\nexport default TranslationRotationScale;\n","import Cartesian3 from \"./Cartesian3.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Uses the Tridiagonal Matrix Algorithm, also known as the Thomas Algorithm, to solve\n * a system of linear equations where the coefficient matrix is a tridiagonal matrix.\n *\n * @namespace TridiagonalSystemSolver\n */\nconst TridiagonalSystemSolver = {};\n\n/**\n * Solves a tridiagonal system of linear equations.\n *\n * @param {Number[]} diagonal An array with length <code>n</code> that contains the diagonal of the coefficient matrix.\n * @param {Number[]} lower An array with length <code>n - 1</code> that contains the lower diagonal of the coefficient matrix.\n * @param {Number[]} upper An array with length <code>n - 1</code> that contains the upper diagonal of the coefficient matrix.\n * @param {Cartesian3[]} right An array of Cartesians with length <code>n</code> that is the right side of the system of equations.\n *\n * @exception {DeveloperError} diagonal and right must have the same lengths.\n * @exception {DeveloperError} lower and upper must have the same lengths.\n * @exception {DeveloperError} lower and upper must be one less than the length of diagonal.\n *\n * @performance Linear time.\n *\n * @example\n * const lowerDiagonal = [1.0, 1.0, 1.0, 1.0];\n * const diagonal = [2.0, 4.0, 4.0, 4.0, 2.0];\n * const upperDiagonal = [1.0, 1.0, 1.0, 1.0];\n * const rightHandSide = [\n *     new Cesium.Cartesian3(410757.0, -1595711.0, 1375302.0),\n *     new Cesium.Cartesian3(-5986705.0, -2190640.0, 1099600.0),\n *     new Cesium.Cartesian3(-12593180.0, 288588.0, -1755549.0),\n *     new Cesium.Cartesian3(-5349898.0, 2457005.0, -2685438.0),\n *     new Cesium.Cartesian3(845820.0, 1573488.0, -1205591.0)\n * ];\n *\n * const solution = Cesium.TridiagonalSystemSolver.solve(lowerDiagonal, diagonal, upperDiagonal, rightHandSide);\n *\n * @returns {Cartesian3[]} An array of Cartesians with length <code>n</code> that is the solution to the tridiagonal system of equations.\n */\nTridiagonalSystemSolver.solve = function (lower, diagonal, upper, right) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(lower) || !(lower instanceof Array)) {\n    throw new DeveloperError(\"The array lower is required.\");\n  }\n  if (!defined(diagonal) || !(diagonal instanceof Array)) {\n    throw new DeveloperError(\"The array diagonal is required.\");\n  }\n  if (!defined(upper) || !(upper instanceof Array)) {\n    throw new DeveloperError(\"The array upper is required.\");\n  }\n  if (!defined(right) || !(right instanceof Array)) {\n    throw new DeveloperError(\"The array right is required.\");\n  }\n  if (diagonal.length !== right.length) {\n    throw new DeveloperError(\"diagonal and right must have the same lengths.\");\n  }\n  if (lower.length !== upper.length) {\n    throw new DeveloperError(\"lower and upper must have the same lengths.\");\n  } else if (lower.length !== diagonal.length - 1) {\n    throw new DeveloperError(\n      \"lower and upper must be one less than the length of diagonal.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  const c = new Array(upper.length);\n  const d = new Array(right.length);\n  const x = new Array(right.length);\n\n  let i;\n  for (i = 0; i < d.length; i++) {\n    d[i] = new Cartesian3();\n    x[i] = new Cartesian3();\n  }\n\n  c[0] = upper[0] / diagonal[0];\n  d[0] = Cartesian3.multiplyByScalar(right[0], 1.0 / diagonal[0], d[0]);\n\n  let scalar;\n  for (i = 1; i < c.length; ++i) {\n    scalar = 1.0 / (diagonal[i] - c[i - 1] * lower[i - 1]);\n    c[i] = upper[i] * scalar;\n    d[i] = Cartesian3.subtract(\n      right[i],\n      Cartesian3.multiplyByScalar(d[i - 1], lower[i - 1], d[i]),\n      d[i]\n    );\n    d[i] = Cartesian3.multiplyByScalar(d[i], scalar, d[i]);\n  }\n\n  scalar = 1.0 / (diagonal[i] - c[i - 1] * lower[i - 1]);\n  d[i] = Cartesian3.subtract(\n    right[i],\n    Cartesian3.multiplyByScalar(d[i - 1], lower[i - 1], d[i]),\n    d[i]\n  );\n  d[i] = Cartesian3.multiplyByScalar(d[i], scalar, d[i]);\n\n  x[x.length - 1] = d[d.length - 1];\n  for (i = x.length - 2; i >= 0; --i) {\n    x[i] = Cartesian3.subtract(\n      d[i],\n      Cartesian3.multiplyByScalar(x[i + 1], c[i], x[i]),\n      x[i]\n    );\n  }\n\n  return x;\n};\nexport default TridiagonalSystemSolver;\n","import Uri from \"../ThirdParty/Uri.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * A singleton that contains all of the servers that are trusted. Credentials will be sent with\n * any requests to these servers.\n *\n * @namespace TrustedServers\n *\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n */\nconst TrustedServers = {};\nlet _servers = {};\n\n/**\n * Adds a trusted server to the registry\n *\n * @param {String} host The host to be added.\n * @param {Number} port The port used to access the host.\n *\n * @example\n * // Add a trusted server\n * TrustedServers.add('my.server.com', 80);\n */\nTrustedServers.add = function (host, port) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(host)) {\n    throw new DeveloperError(\"host is required.\");\n  }\n  if (!defined(port) || port <= 0) {\n    throw new DeveloperError(\"port is required to be greater than 0.\");\n  }\n  //>>includeEnd('debug');\n\n  const authority = `${host.toLowerCase()}:${port}`;\n  if (!defined(_servers[authority])) {\n    _servers[authority] = true;\n  }\n};\n\n/**\n * Removes a trusted server from the registry\n *\n * @param {String} host The host to be removed.\n * @param {Number} port The port used to access the host.\n *\n * @example\n * // Remove a trusted server\n * TrustedServers.remove('my.server.com', 80);\n */\nTrustedServers.remove = function (host, port) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(host)) {\n    throw new DeveloperError(\"host is required.\");\n  }\n  if (!defined(port) || port <= 0) {\n    throw new DeveloperError(\"port is required to be greater than 0.\");\n  }\n  //>>includeEnd('debug');\n\n  const authority = `${host.toLowerCase()}:${port}`;\n  if (defined(_servers[authority])) {\n    delete _servers[authority];\n  }\n};\n\nfunction getAuthority(url) {\n  const uri = new Uri(url);\n  uri.normalize();\n\n  // Removes username:password@ so we just have host[:port]\n  let authority = uri.authority();\n  if (authority.length === 0) {\n    return undefined; // Relative URL\n  }\n  uri.authority(authority);\n\n  if (authority.indexOf(\"@\") !== -1) {\n    const parts = authority.split(\"@\");\n    authority = parts[1];\n  }\n\n  // If the port is missing add one based on the scheme\n  if (authority.indexOf(\":\") === -1) {\n    let scheme = uri.scheme();\n    if (scheme.length === 0) {\n      scheme = window.location.protocol;\n      scheme = scheme.substring(0, scheme.length - 1);\n    }\n    if (scheme === \"http\") {\n      authority += \":80\";\n    } else if (scheme === \"https\") {\n      authority += \":443\";\n    } else {\n      return undefined;\n    }\n  }\n\n  return authority;\n}\n\n/**\n * Tests whether a server is trusted or not. The server must have been added with the port if it is included in the url.\n *\n * @param {String} url The url to be tested against the trusted list\n *\n * @returns {boolean} Returns true if url is trusted, false otherwise.\n *\n * @example\n * // Add server\n * TrustedServers.add('my.server.com', 81);\n *\n * // Check if server is trusted\n * if (TrustedServers.contains('https://my.server.com:81/path/to/file.png')) {\n *     // my.server.com:81 is trusted\n * }\n * if (TrustedServers.contains('https://my.server.com/path/to/file.png')) {\n *     // my.server.com isn't trusted\n * }\n */\nTrustedServers.contains = function (url) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(url)) {\n    throw new DeveloperError(\"url is required.\");\n  }\n  //>>includeEnd('debug');\n  const authority = getAuthority(url);\n  if (defined(authority) && defined(_servers[authority])) {\n    return true;\n  }\n\n  return false;\n};\n\n/**\n * Clears the registry\n *\n * @example\n * // Remove a trusted server\n * TrustedServers.clear();\n */\nTrustedServers.clear = function () {\n  _servers = {};\n};\nexport default TrustedServers;\n","import Credit from \"./Credit.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defer from \"./defer.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport Event from \"./Event.js\";\nimport GeographicTilingScheme from \"./GeographicTilingScheme.js\";\nimport getImagePixels from \"./getImagePixels.js\";\nimport HeightmapTerrainData from \"./HeightmapTerrainData.js\";\nimport CesiumMath from \"./Math.js\";\nimport Rectangle from \"./Rectangle.js\";\nimport Resource from \"./Resource.js\";\nimport TerrainProvider from \"./TerrainProvider.js\";\nimport TileProviderError from \"./TileProviderError.js\";\n\nfunction DataRectangle(rectangle, maxLevel) {\n  this.rectangle = rectangle;\n  this.maxLevel = maxLevel;\n}\n\n/**\n * A {@link TerrainProvider} that produces terrain geometry by tessellating height maps\n * retrieved from a {@link http://vr-theworld.com/|VT MK VR-TheWorld server}.\n *\n * @alias VRTheWorldTerrainProvider\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Resource|String} options.url The URL of the VR-TheWorld TileMap.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid.  If this parameter is not\n *                    specified, the WGS84 ellipsoid is used.\n * @param {Credit|String} [options.credit] A credit for the data source, which is displayed on the canvas.\n *\n *\n * @example\n * const terrainProvider = new Cesium.VRTheWorldTerrainProvider({\n *   url : 'https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/'\n * });\n * viewer.terrainProvider = terrainProvider;\n *\n * @see TerrainProvider\n */\nfunction VRTheWorldTerrainProvider(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options.url)) {\n    throw new DeveloperError(\"options.url is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const resource = Resource.createIfNeeded(options.url);\n\n  this._resource = resource;\n\n  this._errorEvent = new Event();\n  this._ready = false;\n  this._readyPromise = defer();\n\n  this._terrainDataStructure = {\n    heightScale: 1.0 / 1000.0,\n    heightOffset: -1000.0,\n    elementsPerHeight: 3,\n    stride: 4,\n    elementMultiplier: 256.0,\n    isBigEndian: true,\n    lowestEncodedHeight: 0,\n    highestEncodedHeight: 256 * 256 * 256 - 1,\n  };\n\n  let credit = options.credit;\n  if (typeof credit === \"string\") {\n    credit = new Credit(credit);\n  }\n  this._credit = credit;\n\n  this._tilingScheme = undefined;\n  this._rectangles = [];\n\n  const that = this;\n  let metadataError;\n  const ellipsoid = defaultValue(options.ellipsoid, Ellipsoid.WGS84);\n\n  function metadataSuccess(xml) {\n    const srs = xml.getElementsByTagName(\"SRS\")[0].textContent;\n    if (srs === \"EPSG:4326\") {\n      that._tilingScheme = new GeographicTilingScheme({ ellipsoid: ellipsoid });\n    } else {\n      metadataFailure(`SRS ${srs} is not supported.`);\n      return;\n    }\n\n    const tileFormat = xml.getElementsByTagName(\"TileFormat\")[0];\n    that._heightmapWidth = parseInt(tileFormat.getAttribute(\"width\"), 10);\n    that._heightmapHeight = parseInt(tileFormat.getAttribute(\"height\"), 10);\n    that._levelZeroMaximumGeometricError = TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(\n      ellipsoid,\n      Math.min(that._heightmapWidth, that._heightmapHeight),\n      that._tilingScheme.getNumberOfXTilesAtLevel(0)\n    );\n\n    const dataRectangles = xml.getElementsByTagName(\"DataExtent\");\n\n    for (let i = 0; i < dataRectangles.length; ++i) {\n      const dataRectangle = dataRectangles[i];\n\n      const west = CesiumMath.toRadians(\n        parseFloat(dataRectangle.getAttribute(\"minx\"))\n      );\n      const south = CesiumMath.toRadians(\n        parseFloat(dataRectangle.getAttribute(\"miny\"))\n      );\n      const east = CesiumMath.toRadians(\n        parseFloat(dataRectangle.getAttribute(\"maxx\"))\n      );\n      const north = CesiumMath.toRadians(\n        parseFloat(dataRectangle.getAttribute(\"maxy\"))\n      );\n      const maxLevel = parseInt(dataRectangle.getAttribute(\"maxlevel\"), 10);\n\n      that._rectangles.push(\n        new DataRectangle(new Rectangle(west, south, east, north), maxLevel)\n      );\n    }\n\n    that._ready = true;\n    that._readyPromise.resolve(true);\n  }\n\n  function metadataFailure(e) {\n    const message = defaultValue(\n      e,\n      `An error occurred while accessing ${that._resource.url}.`\n    );\n    metadataError = TileProviderError.handleError(\n      metadataError,\n      that,\n      that._errorEvent,\n      message,\n      undefined,\n      undefined,\n      undefined,\n      requestMetadata\n    );\n  }\n\n  function requestMetadata() {\n    that._resource.fetchXML().then(metadataSuccess).catch(metadataFailure);\n  }\n\n  requestMetadata();\n}\n\nObject.defineProperties(VRTheWorldTerrainProvider.prototype, {\n  /**\n   * Gets an event that is raised when the terrain provider encounters an asynchronous error.  By subscribing\n   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners\n   * are passed an instance of {@link TileProviderError}.\n   * @memberof VRTheWorldTerrainProvider.prototype\n   * @type {Event}\n   * @readonly\n   */\n  errorEvent: {\n    get: function () {\n      return this._errorEvent;\n    },\n  },\n\n  /**\n   * Gets the credit to display when this terrain provider is active.  Typically this is used to credit\n   * the source of the terrain.  This function should not be called before {@link VRTheWorldTerrainProvider#ready} returns true.\n   * @memberof VRTheWorldTerrainProvider.prototype\n   * @type {Credit}\n   * @readonly\n   */\n  credit: {\n    get: function () {\n      return this._credit;\n    },\n  },\n\n  /**\n   * Gets the tiling scheme used by this provider.  This function should\n   * not be called before {@link VRTheWorldTerrainProvider#ready} returns true.\n   * @memberof VRTheWorldTerrainProvider.prototype\n   * @type {GeographicTilingScheme}\n   * @readonly\n   */\n  tilingScheme: {\n    get: function () {\n      //>>includeStart('debug', pragmas.debug);\n      if (!this.ready) {\n        throw new DeveloperError(\n          \"requestTileGeometry must not be called before ready returns true.\"\n        );\n      }\n      //>>includeEnd('debug');\n\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider is ready for use.\n   * @memberof VRTheWorldTerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  ready: {\n    get: function () {\n      return this._ready;\n    },\n  },\n\n  /**\n   * Gets a promise that resolves to true when the provider is ready for use.\n   * @memberof VRTheWorldTerrainProvider.prototype\n   * @type {Promise.<Boolean>}\n   * @readonly\n   */\n  readyPromise: {\n    get: function () {\n      return this._readyPromise.promise;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the provider includes a water mask.  The water mask\n   * indicates which areas of the globe are water rather than land, so they can be rendered\n   * as a reflective surface with animated waves.  This function should not be\n   * called before {@link VRTheWorldTerrainProvider#ready} returns true.\n   * @memberof VRTheWorldTerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasWaterMask: {\n    get: function () {\n      return false;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not the requested tiles include vertex normals.\n   * This function should not be called before {@link VRTheWorldTerrainProvider#ready} returns true.\n   * @memberof VRTheWorldTerrainProvider.prototype\n   * @type {Boolean}\n   * @readonly\n   */\n  hasVertexNormals: {\n    get: function () {\n      return false;\n    },\n  },\n  /**\n   * Gets an object that can be used to determine availability of terrain from this provider, such as\n   * at points and in rectangles.  This function should not be called before\n   * {@link TerrainProvider#ready} returns true.  This property may be undefined if availability\n   * information is not available.\n   * @memberof VRTheWorldTerrainProvider.prototype\n   * @type {TileAvailability}\n   * @readonly\n   */\n  availability: {\n    get: function () {\n      return undefined;\n    },\n  },\n});\n\n/**\n * Requests the geometry for a given tile.  This function should not be called before\n * {@link VRTheWorldTerrainProvider#ready} returns true.  The result includes terrain\n * data and indicates that all child tiles are available.\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @param {Request} [request] The request object. Intended for internal use only.\n * @returns {Promise.<TerrainData>|undefined} A promise for the requested geometry.  If this method\n *          returns undefined instead of a promise, it is an indication that too many requests are already\n *          pending and the request will be retried later.\n */\nVRTheWorldTerrainProvider.prototype.requestTileGeometry = function (\n  x,\n  y,\n  level,\n  request\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!this.ready) {\n    throw new DeveloperError(\n      \"requestTileGeometry must not be called before ready returns true.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  const yTiles = this._tilingScheme.getNumberOfYTilesAtLevel(level);\n  const resource = this._resource.getDerivedResource({\n    url: `${level}/${x}/${yTiles - y - 1}.tif`,\n    queryParameters: {\n      cesium: true,\n    },\n    request: request,\n  });\n  const promise = resource.fetchImage({\n    preferImageBitmap: true,\n  });\n  if (!defined(promise)) {\n    return undefined;\n  }\n\n  const that = this;\n  return Promise.resolve(promise).then(function (image) {\n    return new HeightmapTerrainData({\n      buffer: getImagePixels(image),\n      width: that._heightmapWidth,\n      height: that._heightmapHeight,\n      childTileMask: getChildMask(that, x, y, level),\n      structure: that._terrainDataStructure,\n    });\n  });\n};\n\n/**\n * Gets the maximum geometric error allowed in a tile at a given level.\n *\n * @param {Number} level The tile level for which to get the maximum geometric error.\n * @returns {Number} The maximum geometric error.\n */\nVRTheWorldTerrainProvider.prototype.getLevelMaximumGeometricError = function (\n  level\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!this.ready) {\n    throw new DeveloperError(\n      \"requestTileGeometry must not be called before ready returns true.\"\n    );\n  }\n  //>>includeEnd('debug');\n  return this._levelZeroMaximumGeometricError / (1 << level);\n};\n\nconst rectangleScratch = new Rectangle();\n\nfunction getChildMask(provider, x, y, level) {\n  const tilingScheme = provider._tilingScheme;\n  const rectangles = provider._rectangles;\n  const parentRectangle = tilingScheme.tileXYToRectangle(x, y, level);\n\n  let childMask = 0;\n\n  for (let i = 0; i < rectangles.length && childMask !== 15; ++i) {\n    const rectangle = rectangles[i];\n    if (rectangle.maxLevel <= level) {\n      continue;\n    }\n\n    const testRectangle = rectangle.rectangle;\n\n    const intersection = Rectangle.intersection(\n      testRectangle,\n      parentRectangle,\n      rectangleScratch\n    );\n    if (defined(intersection)) {\n      // Parent tile is inside this rectangle, so at least one child is, too.\n      if (\n        isTileInRectangle(tilingScheme, testRectangle, x * 2, y * 2, level + 1)\n      ) {\n        childMask |= 4; // northwest\n      }\n      if (\n        isTileInRectangle(\n          tilingScheme,\n          testRectangle,\n          x * 2 + 1,\n          y * 2,\n          level + 1\n        )\n      ) {\n        childMask |= 8; // northeast\n      }\n      if (\n        isTileInRectangle(\n          tilingScheme,\n          testRectangle,\n          x * 2,\n          y * 2 + 1,\n          level + 1\n        )\n      ) {\n        childMask |= 1; // southwest\n      }\n      if (\n        isTileInRectangle(\n          tilingScheme,\n          testRectangle,\n          x * 2 + 1,\n          y * 2 + 1,\n          level + 1\n        )\n      ) {\n        childMask |= 2; // southeast\n      }\n    }\n  }\n\n  return childMask;\n}\n\nfunction isTileInRectangle(tilingScheme, rectangle, x, y, level) {\n  const tileRectangle = tilingScheme.tileXYToRectangle(x, y, level);\n  return defined(\n    Rectangle.intersection(tileRectangle, rectangle, rectangleScratch)\n  );\n}\n\n/**\n * Determines whether data for a tile is available to be loaded.\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @returns {Boolean|undefined} Undefined if not supported, otherwise true or false.\n */\nVRTheWorldTerrainProvider.prototype.getTileDataAvailable = function (\n  x,\n  y,\n  level\n) {\n  return undefined;\n};\n\n/**\n * Makes sure we load availability data for a tile\n *\n * @param {Number} x The X coordinate of the tile for which to request geometry.\n * @param {Number} y The Y coordinate of the tile for which to request geometry.\n * @param {Number} level The level of the tile for which to request geometry.\n * @returns {undefined|Promise<void>} Undefined if nothing need to be loaded or a Promise that resolves when all required tiles are loaded\n */\nVRTheWorldTerrainProvider.prototype.loadTileDataAvailability = function (\n  x,\n  y,\n  level\n) {\n  return undefined;\n};\nexport default VRTheWorldTerrainProvider;\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * A vertex format defines what attributes make up a vertex.  A VertexFormat can be provided\n * to a {@link Geometry} to request that certain properties be computed, e.g., just position,\n * position and normal, etc.\n *\n * @param {Object} [options] An object with boolean properties corresponding to VertexFormat properties as shown in the code example.\n *\n * @alias VertexFormat\n * @constructor\n *\n * @example\n * // Create a vertex format with position and 2D texture coordinate attributes.\n * const format = new Cesium.VertexFormat({\n *   position : true,\n *   st : true\n * });\n *\n * @see Geometry#attributes\n * @see Packable\n */\nfunction VertexFormat(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  /**\n   * When <code>true</code>, the vertex has a 3D position attribute.\n   * <p>\n   * 64-bit floating-point (for precision).  3 components per attribute.\n   * </p>\n   *\n   * @type Boolean\n   *\n   * @default false\n   */\n  this.position = defaultValue(options.position, false);\n\n  /**\n   * When <code>true</code>, the vertex has a normal attribute (normalized), which is commonly used for lighting.\n   * <p>\n   * 32-bit floating-point.  3 components per attribute.\n   * </p>\n   *\n   * @type Boolean\n   *\n   * @default false\n   */\n  this.normal = defaultValue(options.normal, false);\n\n  /**\n   * When <code>true</code>, the vertex has a 2D texture coordinate attribute.\n   * <p>\n   * 32-bit floating-point.  2 components per attribute\n   * </p>\n   *\n   * @type Boolean\n   *\n   * @default false\n   */\n  this.st = defaultValue(options.st, false);\n\n  /**\n   * When <code>true</code>, the vertex has a bitangent attribute (normalized), which is used for tangent-space effects like bump mapping.\n   * <p>\n   * 32-bit floating-point.  3 components per attribute.\n   * </p>\n   *\n   * @type Boolean\n   *\n   * @default false\n   */\n  this.bitangent = defaultValue(options.bitangent, false);\n\n  /**\n   * When <code>true</code>, the vertex has a tangent attribute (normalized), which is used for tangent-space effects like bump mapping.\n   * <p>\n   * 32-bit floating-point.  3 components per attribute.\n   * </p>\n   *\n   * @type Boolean\n   *\n   * @default false\n   */\n  this.tangent = defaultValue(options.tangent, false);\n\n  /**\n   * When <code>true</code>, the vertex has an RGB color attribute.\n   * <p>\n   * 8-bit unsigned byte.  3 components per attribute.\n   * </p>\n   *\n   * @type Boolean\n   *\n   * @default false\n   */\n  this.color = defaultValue(options.color, false);\n}\n\n/**\n * An immutable vertex format with only a position attribute.\n *\n * @type {VertexFormat}\n * @constant\n *\n * @see VertexFormat#position\n */\nVertexFormat.POSITION_ONLY = Object.freeze(\n  new VertexFormat({\n    position: true,\n  })\n);\n\n/**\n * An immutable vertex format with position and normal attributes.\n * This is compatible with per-instance color appearances like {@link PerInstanceColorAppearance}.\n *\n * @type {VertexFormat}\n * @constant\n *\n * @see VertexFormat#position\n * @see VertexFormat#normal\n */\nVertexFormat.POSITION_AND_NORMAL = Object.freeze(\n  new VertexFormat({\n    position: true,\n    normal: true,\n  })\n);\n\n/**\n * An immutable vertex format with position, normal, and st attributes.\n * This is compatible with {@link MaterialAppearance} when {@link MaterialAppearance#materialSupport}\n * is <code>TEXTURED/code>.\n *\n * @type {VertexFormat}\n * @constant\n *\n * @see VertexFormat#position\n * @see VertexFormat#normal\n * @see VertexFormat#st\n */\nVertexFormat.POSITION_NORMAL_AND_ST = Object.freeze(\n  new VertexFormat({\n    position: true,\n    normal: true,\n    st: true,\n  })\n);\n\n/**\n * An immutable vertex format with position and st attributes.\n * This is compatible with {@link EllipsoidSurfaceAppearance}.\n *\n * @type {VertexFormat}\n * @constant\n *\n * @see VertexFormat#position\n * @see VertexFormat#st\n */\nVertexFormat.POSITION_AND_ST = Object.freeze(\n  new VertexFormat({\n    position: true,\n    st: true,\n  })\n);\n\n/**\n * An immutable vertex format with position and color attributes.\n *\n * @type {VertexFormat}\n * @constant\n *\n * @see VertexFormat#position\n * @see VertexFormat#color\n */\nVertexFormat.POSITION_AND_COLOR = Object.freeze(\n  new VertexFormat({\n    position: true,\n    color: true,\n  })\n);\n\n/**\n * An immutable vertex format with well-known attributes: position, normal, st, tangent, and bitangent.\n *\n * @type {VertexFormat}\n * @constant\n *\n * @see VertexFormat#position\n * @see VertexFormat#normal\n * @see VertexFormat#st\n * @see VertexFormat#tangent\n * @see VertexFormat#bitangent\n */\nVertexFormat.ALL = Object.freeze(\n  new VertexFormat({\n    position: true,\n    normal: true,\n    st: true,\n    tangent: true,\n    bitangent: true,\n  })\n);\n\n/**\n * An immutable vertex format with position, normal, and st attributes.\n * This is compatible with most appearances and materials; however\n * normal and st attributes are not always required.  When this is\n * known in advance, another <code>VertexFormat</code> should be used.\n *\n * @type {VertexFormat}\n * @constant\n *\n * @see VertexFormat#position\n * @see VertexFormat#normal\n */\nVertexFormat.DEFAULT = VertexFormat.POSITION_NORMAL_AND_ST;\n\n/**\n * The number of elements used to pack the object into an array.\n * @type {Number}\n */\nVertexFormat.packedLength = 6;\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {VertexFormat} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nVertexFormat.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(value)) {\n    throw new DeveloperError(\"value is required\");\n  }\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  array[startingIndex++] = value.position ? 1.0 : 0.0;\n  array[startingIndex++] = value.normal ? 1.0 : 0.0;\n  array[startingIndex++] = value.st ? 1.0 : 0.0;\n  array[startingIndex++] = value.tangent ? 1.0 : 0.0;\n  array[startingIndex++] = value.bitangent ? 1.0 : 0.0;\n  array[startingIndex] = value.color ? 1.0 : 0.0;\n\n  return array;\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {VertexFormat} [result] The object into which to store the result.\n * @returns {VertexFormat} The modified result parameter or a new VertexFormat instance if one was not provided.\n */\nVertexFormat.unpack = function (array, startingIndex, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  if (!defined(result)) {\n    result = new VertexFormat();\n  }\n\n  result.position = array[startingIndex++] === 1.0;\n  result.normal = array[startingIndex++] === 1.0;\n  result.st = array[startingIndex++] === 1.0;\n  result.tangent = array[startingIndex++] === 1.0;\n  result.bitangent = array[startingIndex++] === 1.0;\n  result.color = array[startingIndex] === 1.0;\n  return result;\n};\n\n/**\n * Duplicates a VertexFormat instance.\n *\n * @param {VertexFormat} vertexFormat The vertex format to duplicate.\n * @param {VertexFormat} [result] The object onto which to store the result.\n * @returns {VertexFormat} The modified result parameter or a new VertexFormat instance if one was not provided. (Returns undefined if vertexFormat is undefined)\n */\nVertexFormat.clone = function (vertexFormat, result) {\n  if (!defined(vertexFormat)) {\n    return undefined;\n  }\n  if (!defined(result)) {\n    result = new VertexFormat();\n  }\n\n  result.position = vertexFormat.position;\n  result.normal = vertexFormat.normal;\n  result.st = vertexFormat.st;\n  result.tangent = vertexFormat.tangent;\n  result.bitangent = vertexFormat.bitangent;\n  result.color = vertexFormat.color;\n  return result;\n};\nexport default VertexFormat;\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport destroyObject from \"./destroyObject.js\";\nimport Iso8601 from \"./Iso8601.js\";\nimport JulianDate from \"./JulianDate.js\";\n\n/**\n * Synchronizes a video element with a simulation clock.\n *\n * @alias VideoSynchronizer\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Clock} [options.clock] The clock instance used to drive the video.\n * @param {HTMLVideoElement} [options.element] The video element to be synchronized.\n * @param {JulianDate} [options.epoch=Iso8601.MINIMUM_VALUE] The simulation time that marks the start of the video.\n * @param {Number} [options.tolerance=1.0] The maximum amount of time, in seconds, that the clock and video can diverge.\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Video.html|Video Material Demo}\n */\nfunction VideoSynchronizer(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  this._clock = undefined;\n  this._element = undefined;\n  this._clockSubscription = undefined;\n  this._seekFunction = undefined;\n  this._lastPlaybackRate = undefined;\n\n  this.clock = options.clock;\n  this.element = options.element;\n\n  /**\n   * Gets or sets the simulation time that marks the start of the video.\n   * @type {JulianDate}\n   * @default Iso8601.MINIMUM_VALUE\n   */\n  this.epoch = defaultValue(options.epoch, Iso8601.MINIMUM_VALUE);\n\n  /**\n   * Gets or sets the amount of time in seconds the video's currentTime\n   * and the clock's currentTime can diverge before a video seek is performed.\n   * Lower values make the synchronization more accurate but video\n   * performance might suffer.  Higher values provide better performance\n   * but at the cost of accuracy.\n   * @type {Number}\n   * @default 1.0\n   */\n  this.tolerance = defaultValue(options.tolerance, 1.0);\n\n  this._seeking = false;\n  this._seekFunction = undefined;\n  this._firstTickAfterSeek = false;\n}\n\nObject.defineProperties(VideoSynchronizer.prototype, {\n  /**\n   * Gets or sets the clock used to drive the video element.\n   *\n   * @memberof VideoSynchronizer.prototype\n   * @type {Clock}\n   */\n  clock: {\n    get: function () {\n      return this._clock;\n    },\n    set: function (value) {\n      const oldValue = this._clock;\n\n      if (oldValue === value) {\n        return;\n      }\n\n      if (defined(oldValue)) {\n        this._clockSubscription();\n        this._clockSubscription = undefined;\n      }\n\n      if (defined(value)) {\n        this._clockSubscription = value.onTick.addEventListener(\n          VideoSynchronizer.prototype._onTick,\n          this\n        );\n      }\n\n      this._clock = value;\n    },\n  },\n  /**\n   * Gets or sets the video element to synchronize.\n   *\n   * @memberof VideoSynchronizer.prototype\n   * @type {HTMLVideoElement}\n   */\n  element: {\n    get: function () {\n      return this._element;\n    },\n    set: function (value) {\n      const oldValue = this._element;\n\n      if (oldValue === value) {\n        return;\n      }\n\n      if (defined(oldValue)) {\n        oldValue.removeEventListener(\"seeked\", this._seekFunction, false);\n      }\n\n      if (defined(value)) {\n        this._seeking = false;\n        this._seekFunction = createSeekFunction(this);\n        value.addEventListener(\"seeked\", this._seekFunction, false);\n      }\n\n      this._element = value;\n      this._seeking = false;\n      this._firstTickAfterSeek = false;\n    },\n  },\n});\n\n/**\n * Destroys and resources used by the object.  Once an object is destroyed, it should not be used.\n *\n * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.\n */\nVideoSynchronizer.prototype.destroy = function () {\n  this.element = undefined;\n  this.clock = undefined;\n  return destroyObject(this);\n};\n\n/**\n * Returns true if this object was destroyed; otherwise, false.\n *\n * @returns {Boolean} True if this object was destroyed; otherwise, false.\n */\nVideoSynchronizer.prototype.isDestroyed = function () {\n  return false;\n};\n\nVideoSynchronizer.prototype._trySetPlaybackRate = function (clock) {\n  if (this._lastPlaybackRate === clock.multiplier) {\n    return;\n  }\n\n  const element = this._element;\n  try {\n    element.playbackRate = clock.multiplier;\n  } catch (error) {\n    // Seek manually for unsupported playbackRates.\n    element.playbackRate = 0.0;\n  }\n  this._lastPlaybackRate = clock.multiplier;\n};\n\nVideoSynchronizer.prototype._onTick = function (clock) {\n  const element = this._element;\n  if (!defined(element) || element.readyState < 2) {\n    return;\n  }\n\n  const paused = element.paused;\n  const shouldAnimate = clock.shouldAnimate;\n  if (shouldAnimate === paused) {\n    if (shouldAnimate) {\n      element.play();\n    } else {\n      element.pause();\n    }\n  }\n\n  //We need to avoid constant seeking or the video will\n  //never contain a complete frame for us to render.\n  //So don't do anything if we're seeing or on the first\n  //tick after a seek (the latter of which allows the frame\n  //to actually be rendered.\n  if (this._seeking || this._firstTickAfterSeek) {\n    this._firstTickAfterSeek = false;\n    return;\n  }\n\n  this._trySetPlaybackRate(clock);\n\n  const clockTime = clock.currentTime;\n  const epoch = defaultValue(this.epoch, Iso8601.MINIMUM_VALUE);\n  let videoTime = JulianDate.secondsDifference(clockTime, epoch);\n\n  const duration = element.duration;\n  let desiredTime;\n  const currentTime = element.currentTime;\n  if (element.loop) {\n    videoTime = videoTime % duration;\n    if (videoTime < 0.0) {\n      videoTime = duration - videoTime;\n    }\n    desiredTime = videoTime;\n  } else if (videoTime > duration) {\n    desiredTime = duration;\n  } else if (videoTime < 0.0) {\n    desiredTime = 0.0;\n  } else {\n    desiredTime = videoTime;\n  }\n\n  //If the playing video's time and the scene's clock time\n  //ever drift too far apart, we want to set the video to match\n  const tolerance = shouldAnimate ? defaultValue(this.tolerance, 1.0) : 0.001;\n  if (Math.abs(desiredTime - currentTime) > tolerance) {\n    this._seeking = true;\n    element.currentTime = desiredTime;\n  }\n};\n\nfunction createSeekFunction(that) {\n  return function () {\n    that._seeking = false;\n    that._firstTickAfterSeek = true;\n  };\n}\nexport default VideoSynchronizer;\n","/**\n * This enumerated type is used in determining to what extent an object, the occludee,\n * is visible during horizon culling. An occluder may fully block an occludee, in which case\n * it has no visibility, may partially block an occludee from view, or may not block it at all,\n * leading to full visibility.\n *\n * @enum {Number}\n */\nconst Visibility = {\n  /**\n   * Represents that no part of an object is visible.\n   *\n   * @type {Number}\n   * @constant\n   */\n  NONE: -1,\n\n  /**\n   * Represents that part, but not all, of an object is visible\n   *\n   * @type {Number}\n   * @constant\n   */\n  PARTIAL: 0,\n\n  /**\n   * Represents that an object is visible in its entirety.\n   *\n   * @type {Number}\n   * @constant\n   */\n  FULL: 1,\n};\nexport default Object.freeze(Visibility);\n","/**\n * Enum containing Vulkan Constant values by name.\n *\n * These match the constants from the {@link https://www.khronos.org/registry/vulkan/specs/1.2-extensions/html/vkspec.html#formats-definition|Vulkan 1.2 specification}.\n *\n * @enum {Number}\n * @private\n */\nconst VulkanConstants = {\n  VK_FORMAT_UNDEFINED: 0,\n  VK_FORMAT_R4G4_UNORM_PACK8: 1,\n  VK_FORMAT_R4G4B4A4_UNORM_PACK16: 2,\n  VK_FORMAT_B4G4R4A4_UNORM_PACK16: 3,\n  VK_FORMAT_R5G6B5_UNORM_PACK16: 4,\n  VK_FORMAT_B5G6R5_UNORM_PACK16: 5,\n  VK_FORMAT_R5G5B5A1_UNORM_PACK16: 6,\n  VK_FORMAT_B5G5R5A1_UNORM_PACK16: 7,\n  VK_FORMAT_A1R5G5B5_UNORM_PACK16: 8,\n  VK_FORMAT_R8_UNORM: 9,\n  VK_FORMAT_R8_SNORM: 10,\n  VK_FORMAT_R8_USCALED: 11,\n  VK_FORMAT_R8_SSCALED: 12,\n  VK_FORMAT_R8_UINT: 13,\n  VK_FORMAT_R8_SINT: 14,\n  VK_FORMAT_R8_SRGB: 15,\n  VK_FORMAT_R8G8_UNORM: 16,\n  VK_FORMAT_R8G8_SNORM: 17,\n  VK_FORMAT_R8G8_USCALED: 18,\n  VK_FORMAT_R8G8_SSCALED: 19,\n  VK_FORMAT_R8G8_UINT: 20,\n  VK_FORMAT_R8G8_SINT: 21,\n  VK_FORMAT_R8G8_SRGB: 22,\n  VK_FORMAT_R8G8B8_UNORM: 23,\n  VK_FORMAT_R8G8B8_SNORM: 24,\n  VK_FORMAT_R8G8B8_USCALED: 25,\n  VK_FORMAT_R8G8B8_SSCALED: 26,\n  VK_FORMAT_R8G8B8_UINT: 27,\n  VK_FORMAT_R8G8B8_SINT: 28,\n  VK_FORMAT_R8G8B8_SRGB: 29,\n  VK_FORMAT_B8G8R8_UNORM: 30,\n  VK_FORMAT_B8G8R8_SNORM: 31,\n  VK_FORMAT_B8G8R8_USCALED: 32,\n  VK_FORMAT_B8G8R8_SSCALED: 33,\n  VK_FORMAT_B8G8R8_UINT: 34,\n  VK_FORMAT_B8G8R8_SINT: 35,\n  VK_FORMAT_B8G8R8_SRGB: 36,\n  VK_FORMAT_R8G8B8A8_UNORM: 37,\n  VK_FORMAT_R8G8B8A8_SNORM: 38,\n  VK_FORMAT_R8G8B8A8_USCALED: 39,\n  VK_FORMAT_R8G8B8A8_SSCALED: 40,\n  VK_FORMAT_R8G8B8A8_UINT: 41,\n  VK_FORMAT_R8G8B8A8_SINT: 42,\n  VK_FORMAT_R8G8B8A8_SRGB: 43,\n  VK_FORMAT_B8G8R8A8_UNORM: 44,\n  VK_FORMAT_B8G8R8A8_SNORM: 45,\n  VK_FORMAT_B8G8R8A8_USCALED: 46,\n  VK_FORMAT_B8G8R8A8_SSCALED: 47,\n  VK_FORMAT_B8G8R8A8_UINT: 48,\n  VK_FORMAT_B8G8R8A8_SINT: 49,\n  VK_FORMAT_B8G8R8A8_SRGB: 50,\n  VK_FORMAT_A8B8G8R8_UNORM_PACK32: 51,\n  VK_FORMAT_A8B8G8R8_SNORM_PACK32: 52,\n  VK_FORMAT_A8B8G8R8_USCALED_PACK32: 53,\n  VK_FORMAT_A8B8G8R8_SSCALED_PACK32: 54,\n  VK_FORMAT_A8B8G8R8_UINT_PACK32: 55,\n  VK_FORMAT_A8B8G8R8_SINT_PACK32: 56,\n  VK_FORMAT_A8B8G8R8_SRGB_PACK32: 57,\n  VK_FORMAT_A2R10G10B10_UNORM_PACK32: 58,\n  VK_FORMAT_A2R10G10B10_SNORM_PACK32: 59,\n  VK_FORMAT_A2R10G10B10_USCALED_PACK32: 60,\n  VK_FORMAT_A2R10G10B10_SSCALED_PACK32: 61,\n  VK_FORMAT_A2R10G10B10_UINT_PACK32: 62,\n  VK_FORMAT_A2R10G10B10_SINT_PACK32: 63,\n  VK_FORMAT_A2B10G10R10_UNORM_PACK32: 64,\n  VK_FORMAT_A2B10G10R10_SNORM_PACK32: 65,\n  VK_FORMAT_A2B10G10R10_USCALED_PACK32: 66,\n  VK_FORMAT_A2B10G10R10_SSCALED_PACK32: 67,\n  VK_FORMAT_A2B10G10R10_UINT_PACK32: 68,\n  VK_FORMAT_A2B10G10R10_SINT_PACK32: 69,\n  VK_FORMAT_R16_UNORM: 70,\n  VK_FORMAT_R16_SNORM: 71,\n  VK_FORMAT_R16_USCALED: 72,\n  VK_FORMAT_R16_SSCALED: 73,\n  VK_FORMAT_R16_UINT: 74,\n  VK_FORMAT_R16_SINT: 75,\n  VK_FORMAT_R16_SFLOAT: 76,\n  VK_FORMAT_R16G16_UNORM: 77,\n  VK_FORMAT_R16G16_SNORM: 78,\n  VK_FORMAT_R16G16_USCALED: 79,\n  VK_FORMAT_R16G16_SSCALED: 80,\n  VK_FORMAT_R16G16_UINT: 81,\n  VK_FORMAT_R16G16_SINT: 82,\n  VK_FORMAT_R16G16_SFLOAT: 83,\n  VK_FORMAT_R16G16B16_UNORM: 84,\n  VK_FORMAT_R16G16B16_SNORM: 85,\n  VK_FORMAT_R16G16B16_USCALED: 86,\n  VK_FORMAT_R16G16B16_SSCALED: 87,\n  VK_FORMAT_R16G16B16_UINT: 88,\n  VK_FORMAT_R16G16B16_SINT: 89,\n  VK_FORMAT_R16G16B16_SFLOAT: 90,\n  VK_FORMAT_R16G16B16A16_UNORM: 91,\n  VK_FORMAT_R16G16B16A16_SNORM: 92,\n  VK_FORMAT_R16G16B16A16_USCALED: 93,\n  VK_FORMAT_R16G16B16A16_SSCALED: 94,\n  VK_FORMAT_R16G16B16A16_UINT: 95,\n  VK_FORMAT_R16G16B16A16_SINT: 96,\n  VK_FORMAT_R16G16B16A16_SFLOAT: 97,\n  VK_FORMAT_R32_UINT: 98,\n  VK_FORMAT_R32_SINT: 99,\n  VK_FORMAT_R32_SFLOAT: 100,\n  VK_FORMAT_R32G32_UINT: 101,\n  VK_FORMAT_R32G32_SINT: 102,\n  VK_FORMAT_R32G32_SFLOAT: 103,\n  VK_FORMAT_R32G32B32_UINT: 104,\n  VK_FORMAT_R32G32B32_SINT: 105,\n  VK_FORMAT_R32G32B32_SFLOAT: 106,\n  VK_FORMAT_R32G32B32A32_UINT: 107,\n  VK_FORMAT_R32G32B32A32_SINT: 108,\n  VK_FORMAT_R32G32B32A32_SFLOAT: 109,\n  VK_FORMAT_R64_UINT: 110,\n  VK_FORMAT_R64_SINT: 111,\n  VK_FORMAT_R64_SFLOAT: 112,\n  VK_FORMAT_R64G64_UINT: 113,\n  VK_FORMAT_R64G64_SINT: 114,\n  VK_FORMAT_R64G64_SFLOAT: 115,\n  VK_FORMAT_R64G64B64_UINT: 116,\n  VK_FORMAT_R64G64B64_SINT: 117,\n  VK_FORMAT_R64G64B64_SFLOAT: 118,\n  VK_FORMAT_R64G64B64A64_UINT: 119,\n  VK_FORMAT_R64G64B64A64_SINT: 120,\n  VK_FORMAT_R64G64B64A64_SFLOAT: 121,\n  VK_FORMAT_B10G11R11_UFLOAT_PACK32: 122,\n  VK_FORMAT_E5B9G9R9_UFLOAT_PACK32: 123,\n  VK_FORMAT_D16_UNORM: 124,\n  VK_FORMAT_X8_D24_UNORM_PACK32: 125,\n  VK_FORMAT_D32_SFLOAT: 126,\n  VK_FORMAT_S8_UINT: 127,\n  VK_FORMAT_D16_UNORM_S8_UINT: 128,\n  VK_FORMAT_D24_UNORM_S8_UINT: 129,\n  VK_FORMAT_D32_SFLOAT_S8_UINT: 130,\n  VK_FORMAT_BC1_RGB_UNORM_BLOCK: 131,\n  VK_FORMAT_BC1_RGB_SRGB_BLOCK: 132,\n  VK_FORMAT_BC1_RGBA_UNORM_BLOCK: 133,\n  VK_FORMAT_BC1_RGBA_SRGB_BLOCK: 134,\n  VK_FORMAT_BC2_UNORM_BLOCK: 135,\n  VK_FORMAT_BC2_SRGB_BLOCK: 136,\n  VK_FORMAT_BC3_UNORM_BLOCK: 137,\n  VK_FORMAT_BC3_SRGB_BLOCK: 138,\n  VK_FORMAT_BC4_UNORM_BLOCK: 139,\n  VK_FORMAT_BC4_SNORM_BLOCK: 140,\n  VK_FORMAT_BC5_UNORM_BLOCK: 141,\n  VK_FORMAT_BC5_SNORM_BLOCK: 142,\n  VK_FORMAT_BC6H_UFLOAT_BLOCK: 143,\n  VK_FORMAT_BC6H_SFLOAT_BLOCK: 144,\n  VK_FORMAT_BC7_UNORM_BLOCK: 145,\n  VK_FORMAT_BC7_SRGB_BLOCK: 146,\n  VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK: 147,\n  VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK: 148,\n  VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK: 149,\n  VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK: 150,\n  VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK: 151,\n  VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK: 152,\n  VK_FORMAT_EAC_R11_UNORM_BLOCK: 153,\n  VK_FORMAT_EAC_R11_SNORM_BLOCK: 154,\n  VK_FORMAT_EAC_R11G11_UNORM_BLOCK: 155,\n  VK_FORMAT_EAC_R11G11_SNORM_BLOCK: 156,\n  VK_FORMAT_ASTC_4x4_UNORM_BLOCK: 157,\n  VK_FORMAT_ASTC_4x4_SRGB_BLOCK: 158,\n  VK_FORMAT_ASTC_5x4_UNORM_BLOCK: 159,\n  VK_FORMAT_ASTC_5x4_SRGB_BLOCK: 160,\n  VK_FORMAT_ASTC_5x5_UNORM_BLOCK: 161,\n  VK_FORMAT_ASTC_5x5_SRGB_BLOCK: 162,\n  VK_FORMAT_ASTC_6x5_UNORM_BLOCK: 163,\n  VK_FORMAT_ASTC_6x5_SRGB_BLOCK: 164,\n  VK_FORMAT_ASTC_6x6_UNORM_BLOCK: 165,\n  VK_FORMAT_ASTC_6x6_SRGB_BLOCK: 166,\n  VK_FORMAT_ASTC_8x5_UNORM_BLOCK: 167,\n  VK_FORMAT_ASTC_8x5_SRGB_BLOCK: 168,\n  VK_FORMAT_ASTC_8x6_UNORM_BLOCK: 169,\n  VK_FORMAT_ASTC_8x6_SRGB_BLOCK: 170,\n  VK_FORMAT_ASTC_8x8_UNORM_BLOCK: 171,\n  VK_FORMAT_ASTC_8x8_SRGB_BLOCK: 172,\n  VK_FORMAT_ASTC_10x5_UNORM_BLOCK: 173,\n  VK_FORMAT_ASTC_10x5_SRGB_BLOCK: 174,\n  VK_FORMAT_ASTC_10x6_UNORM_BLOCK: 175,\n  VK_FORMAT_ASTC_10x6_SRGB_BLOCK: 176,\n  VK_FORMAT_ASTC_10x8_UNORM_BLOCK: 177,\n  VK_FORMAT_ASTC_10x8_SRGB_BLOCK: 178,\n  VK_FORMAT_ASTC_10x10_UNORM_BLOCK: 179,\n  VK_FORMAT_ASTC_10x10_SRGB_BLOCK: 180,\n  VK_FORMAT_ASTC_12x10_UNORM_BLOCK: 181,\n  VK_FORMAT_ASTC_12x10_SRGB_BLOCK: 182,\n  VK_FORMAT_ASTC_12x12_UNORM_BLOCK: 183,\n  VK_FORMAT_ASTC_12x12_SRGB_BLOCK: 184,\n  VK_FORMAT_G8B8G8R8_422_UNORM: 1000156000,\n  VK_FORMAT_B8G8R8G8_422_UNORM: 1000156001,\n  VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM: 1000156002,\n  VK_FORMAT_G8_B8R8_2PLANE_420_UNORM: 1000156003,\n  VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM: 1000156004,\n  VK_FORMAT_G8_B8R8_2PLANE_422_UNORM: 1000156005,\n  VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM: 1000156006,\n  VK_FORMAT_R10X6_UNORM_PACK16: 1000156007,\n  VK_FORMAT_R10X6G10X6_UNORM_2PACK16: 1000156008,\n  VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16: 1000156009,\n  VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16: 1000156010,\n  VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16: 1000156011,\n  VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16: 1000156012,\n  VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16: 1000156013,\n  VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16: 1000156014,\n  VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16: 1000156015,\n  VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16: 1000156016,\n  VK_FORMAT_R12X4_UNORM_PACK16: 1000156017,\n  VK_FORMAT_R12X4G12X4_UNORM_2PACK16: 1000156018,\n  VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16: 1000156019,\n  VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16: 1000156020,\n  VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16: 1000156021,\n  VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16: 1000156022,\n  VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16: 1000156023,\n  VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16: 1000156024,\n  VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16: 1000156025,\n  VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16: 1000156026,\n  VK_FORMAT_G16B16G16R16_422_UNORM: 1000156027,\n  VK_FORMAT_B16G16R16G16_422_UNORM: 1000156028,\n  VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM: 1000156029,\n  VK_FORMAT_G16_B16R16_2PLANE_420_UNORM: 1000156030,\n  VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM: 1000156031,\n  VK_FORMAT_G16_B16R16_2PLANE_422_UNORM: 1000156032,\n  VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM: 1000156033,\n  VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG: 1000054000,\n  VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG: 1000054001,\n  VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG: 1000054002,\n  VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG: 1000054003,\n  VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG: 1000054004,\n  VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG: 1000054005,\n  VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG: 1000054006,\n  VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG: 1000054007,\n  VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT: 1000066000,\n  VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT: 1000066001,\n  VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT: 1000066002,\n  VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT: 1000066003,\n  VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT: 1000066004,\n  VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT: 1000066005,\n  VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT: 1000066006,\n  VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT: 1000066007,\n  VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT: 1000066008,\n  VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT: 1000066009,\n  VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT: 1000066010,\n  VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT: 1000066011,\n  VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT: 1000066012,\n  VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT: 1000066013,\n  VK_FORMAT_G8B8G8R8_422_UNORM_KHR: 1000156000,\n  VK_FORMAT_B8G8R8G8_422_UNORM_KHR: 1000156001,\n  VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR: 1000156002,\n  VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR: 1000156003,\n  VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR: 1000156004,\n  VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR: 1000156005,\n  VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR: 1000156006,\n  VK_FORMAT_R10X6_UNORM_PACK16_KHR: 1000156007,\n  VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR: 1000156008,\n  VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR: 1000156009,\n  VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR: 1000156010,\n  VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR: 1000156011,\n  VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR: 1000156012,\n  VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR: 1000156013,\n  VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR: 1000156014,\n  VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR: 1000156015,\n  VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR: 1000156016,\n  VK_FORMAT_R12X4_UNORM_PACK16_KHR: 1000156017,\n  VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR: 1000156018,\n  VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR: 1000156019,\n  VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR: 1000156020,\n  VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR: 1000156021,\n  VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR: 1000156022,\n  VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR: 1000156023,\n  VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR: 1000156024,\n  VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR: 1000156025,\n  VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR: 1000156026,\n  VK_FORMAT_G16B16G16R16_422_UNORM_KHR: 1000156027,\n  VK_FORMAT_B16G16R16G16_422_UNORM_KHR: 1000156028,\n  VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR: 1000156029,\n  VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR: 1000156030,\n  VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR: 1000156031,\n  VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR: 1000156032,\n  VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR: 1000156033,\n};\nexport default Object.freeze(VulkanConstants);\n","import BoundingSphere from \"./BoundingSphere.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport ComponentDatatype from \"./ComponentDatatype.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport Geometry from \"./Geometry.js\";\nimport GeometryAttribute from \"./GeometryAttribute.js\";\nimport GeometryAttributes from \"./GeometryAttributes.js\";\nimport IndexDatatype from \"./IndexDatatype.js\";\nimport CesiumMath from \"./Math.js\";\nimport PrimitiveType from \"./PrimitiveType.js\";\nimport VertexFormat from \"./VertexFormat.js\";\nimport WallGeometryLibrary from \"./WallGeometryLibrary.js\";\n\nconst scratchCartesian3Position1 = new Cartesian3();\nconst scratchCartesian3Position2 = new Cartesian3();\nconst scratchCartesian3Position4 = new Cartesian3();\nconst scratchCartesian3Position5 = new Cartesian3();\nconst scratchBitangent = new Cartesian3();\nconst scratchTangent = new Cartesian3();\nconst scratchNormal = new Cartesian3();\n\n/**\n * A description of a wall, which is similar to a KML line string. A wall is defined by a series of points,\n * which extrude down to the ground. Optionally, they can extrude downwards to a specified height.\n *\n * @alias WallGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions An array of Cartesian objects, which are the points of the wall.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Number[]} [options.maximumHeights] An array parallel to <code>positions</code> that give the maximum height of the\n *        wall at <code>positions</code>. If undefined, the height of each position in used.\n * @param {Number[]} [options.minimumHeights] An array parallel to <code>positions</code> that give the minimum height of the\n *        wall at <code>positions</code>. If undefined, the height at each position is 0.0.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid for coordinate manipulation\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n *\n * @exception {DeveloperError} positions length must be greater than or equal to 2.\n * @exception {DeveloperError} positions and maximumHeights must have the same length.\n * @exception {DeveloperError} positions and minimumHeights must have the same length.\n *\n * @see WallGeometry#createGeometry\n * @see WallGeometry#fromConstantHeight\n *\n * @demo {@link https://sandcastle.cesium.com/index.html?src=Wall.html|Cesium Sandcastle Wall Demo}\n *\n * @example\n * // create a wall that spans from ground level to 10000 meters\n * const wall = new Cesium.WallGeometry({\n *   positions : Cesium.Cartesian3.fromDegreesArrayHeights([\n *     19.0, 47.0, 10000.0,\n *     19.0, 48.0, 10000.0,\n *     20.0, 48.0, 10000.0,\n *     20.0, 47.0, 10000.0,\n *     19.0, 47.0, 10000.0\n *   ])\n * });\n * const geometry = Cesium.WallGeometry.createGeometry(wall);\n */\nfunction WallGeometry(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const wallPositions = options.positions;\n  const maximumHeights = options.maximumHeights;\n  const minimumHeights = options.minimumHeights;\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(wallPositions)) {\n    throw new DeveloperError(\"options.positions is required.\");\n  }\n  if (\n    defined(maximumHeights) &&\n    maximumHeights.length !== wallPositions.length\n  ) {\n    throw new DeveloperError(\n      \"options.positions and options.maximumHeights must have the same length.\"\n    );\n  }\n  if (\n    defined(minimumHeights) &&\n    minimumHeights.length !== wallPositions.length\n  ) {\n    throw new DeveloperError(\n      \"options.positions and options.minimumHeights must have the same length.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  const vertexFormat = defaultValue(options.vertexFormat, VertexFormat.DEFAULT);\n  const granularity = defaultValue(\n    options.granularity,\n    CesiumMath.RADIANS_PER_DEGREE\n  );\n  const ellipsoid = defaultValue(options.ellipsoid, Ellipsoid.WGS84);\n\n  this._positions = wallPositions;\n  this._minimumHeights = minimumHeights;\n  this._maximumHeights = maximumHeights;\n  this._vertexFormat = VertexFormat.clone(vertexFormat);\n  this._granularity = granularity;\n  this._ellipsoid = Ellipsoid.clone(ellipsoid);\n  this._workerName = \"createWallGeometry\";\n\n  let numComponents = 1 + wallPositions.length * Cartesian3.packedLength + 2;\n  if (defined(minimumHeights)) {\n    numComponents += minimumHeights.length;\n  }\n  if (defined(maximumHeights)) {\n    numComponents += maximumHeights.length;\n  }\n\n  /**\n   * The number of elements used to pack the object into an array.\n   * @type {Number}\n   */\n  this.packedLength =\n    numComponents + Ellipsoid.packedLength + VertexFormat.packedLength + 1;\n}\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {WallGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nWallGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(value)) {\n    throw new DeveloperError(\"value is required\");\n  }\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  let i;\n\n  const positions = value._positions;\n  let length = positions.length;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += Cartesian3.packedLength) {\n    Cartesian3.pack(positions[i], array, startingIndex);\n  }\n\n  const minimumHeights = value._minimumHeights;\n  length = defined(minimumHeights) ? minimumHeights.length : 0;\n  array[startingIndex++] = length;\n\n  if (defined(minimumHeights)) {\n    for (i = 0; i < length; ++i) {\n      array[startingIndex++] = minimumHeights[i];\n    }\n  }\n\n  const maximumHeights = value._maximumHeights;\n  length = defined(maximumHeights) ? maximumHeights.length : 0;\n  array[startingIndex++] = length;\n\n  if (defined(maximumHeights)) {\n    for (i = 0; i < length; ++i) {\n      array[startingIndex++] = maximumHeights[i];\n    }\n  }\n\n  Ellipsoid.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += Ellipsoid.packedLength;\n\n  VertexFormat.pack(value._vertexFormat, array, startingIndex);\n  startingIndex += VertexFormat.packedLength;\n\n  array[startingIndex] = value._granularity;\n\n  return array;\n};\n\nconst scratchEllipsoid = Ellipsoid.clone(Ellipsoid.UNIT_SPHERE);\nconst scratchVertexFormat = new VertexFormat();\nconst scratchOptions = {\n  positions: undefined,\n  minimumHeights: undefined,\n  maximumHeights: undefined,\n  ellipsoid: scratchEllipsoid,\n  vertexFormat: scratchVertexFormat,\n  granularity: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {WallGeometry} [result] The object into which to store the result.\n * @returns {WallGeometry} The modified result parameter or a new WallGeometry instance if one was not provided.\n */\nWallGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  let i;\n\n  let length = array[startingIndex++];\n  const positions = new Array(length);\n\n  for (i = 0; i < length; ++i, startingIndex += Cartesian3.packedLength) {\n    positions[i] = Cartesian3.unpack(array, startingIndex);\n  }\n\n  length = array[startingIndex++];\n  let minimumHeights;\n\n  if (length > 0) {\n    minimumHeights = new Array(length);\n    for (i = 0; i < length; ++i) {\n      minimumHeights[i] = array[startingIndex++];\n    }\n  }\n\n  length = array[startingIndex++];\n  let maximumHeights;\n\n  if (length > 0) {\n    maximumHeights = new Array(length);\n    for (i = 0; i < length; ++i) {\n      maximumHeights[i] = array[startingIndex++];\n    }\n  }\n\n  const ellipsoid = Ellipsoid.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += Ellipsoid.packedLength;\n\n  const vertexFormat = VertexFormat.unpack(\n    array,\n    startingIndex,\n    scratchVertexFormat\n  );\n  startingIndex += VertexFormat.packedLength;\n\n  const granularity = array[startingIndex];\n\n  if (!defined(result)) {\n    scratchOptions.positions = positions;\n    scratchOptions.minimumHeights = minimumHeights;\n    scratchOptions.maximumHeights = maximumHeights;\n    scratchOptions.granularity = granularity;\n    return new WallGeometry(scratchOptions);\n  }\n\n  result._positions = positions;\n  result._minimumHeights = minimumHeights;\n  result._maximumHeights = maximumHeights;\n  result._ellipsoid = Ellipsoid.clone(ellipsoid, result._ellipsoid);\n  result._vertexFormat = VertexFormat.clone(vertexFormat, result._vertexFormat);\n  result._granularity = granularity;\n\n  return result;\n};\n\n/**\n * A description of a wall, which is similar to a KML line string. A wall is defined by a series of points,\n * which extrude down to the ground. Optionally, they can extrude downwards to a specified height.\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions An array of Cartesian objects, which are the points of the wall.\n * @param {Number} [options.maximumHeight] A constant that defines the maximum height of the\n *        wall at <code>positions</code>. If undefined, the height of each position in used.\n * @param {Number} [options.minimumHeight] A constant that defines the minimum height of the\n *        wall at <code>positions</code>. If undefined, the height at each position is 0.0.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid for coordinate manipulation\n * @param {VertexFormat} [options.vertexFormat=VertexFormat.DEFAULT] The vertex attributes to be computed.\n * @returns {WallGeometry}\n *\n *\n * @example\n * // create a wall that spans from 10000 meters to 20000 meters\n * const wall = Cesium.WallGeometry.fromConstantHeights({\n *   positions : Cesium.Cartesian3.fromDegreesArray([\n *     19.0, 47.0,\n *     19.0, 48.0,\n *     20.0, 48.0,\n *     20.0, 47.0,\n *     19.0, 47.0,\n *   ]),\n *   minimumHeight : 20000.0,\n *   maximumHeight : 10000.0\n * });\n * const geometry = Cesium.WallGeometry.createGeometry(wall);\n *\n * @see WallGeometry#createGeometry\n */\nWallGeometry.fromConstantHeights = function (options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const positions = options.positions;\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(positions)) {\n    throw new DeveloperError(\"options.positions is required.\");\n  }\n  //>>includeEnd('debug');\n\n  let minHeights;\n  let maxHeights;\n\n  const min = options.minimumHeight;\n  const max = options.maximumHeight;\n\n  const doMin = defined(min);\n  const doMax = defined(max);\n  if (doMin || doMax) {\n    const length = positions.length;\n    minHeights = doMin ? new Array(length) : undefined;\n    maxHeights = doMax ? new Array(length) : undefined;\n\n    for (let i = 0; i < length; ++i) {\n      if (doMin) {\n        minHeights[i] = min;\n      }\n\n      if (doMax) {\n        maxHeights[i] = max;\n      }\n    }\n  }\n\n  const newOptions = {\n    positions: positions,\n    maximumHeights: maxHeights,\n    minimumHeights: minHeights,\n    ellipsoid: options.ellipsoid,\n    vertexFormat: options.vertexFormat,\n  };\n  return new WallGeometry(newOptions);\n};\n\n/**\n * Computes the geometric representation of a wall, including its vertices, indices, and a bounding sphere.\n *\n * @param {WallGeometry} wallGeometry A description of the wall.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nWallGeometry.createGeometry = function (wallGeometry) {\n  const wallPositions = wallGeometry._positions;\n  const minimumHeights = wallGeometry._minimumHeights;\n  const maximumHeights = wallGeometry._maximumHeights;\n  const vertexFormat = wallGeometry._vertexFormat;\n  const granularity = wallGeometry._granularity;\n  const ellipsoid = wallGeometry._ellipsoid;\n\n  const pos = WallGeometryLibrary.computePositions(\n    ellipsoid,\n    wallPositions,\n    maximumHeights,\n    minimumHeights,\n    granularity,\n    true\n  );\n  if (!defined(pos)) {\n    return;\n  }\n\n  const bottomPositions = pos.bottomPositions;\n  const topPositions = pos.topPositions;\n  const numCorners = pos.numCorners;\n\n  let length = topPositions.length;\n  let size = length * 2;\n\n  const positions = vertexFormat.position ? new Float64Array(size) : undefined;\n  const normals = vertexFormat.normal ? new Float32Array(size) : undefined;\n  const tangents = vertexFormat.tangent ? new Float32Array(size) : undefined;\n  const bitangents = vertexFormat.bitangent\n    ? new Float32Array(size)\n    : undefined;\n  const textureCoordinates = vertexFormat.st\n    ? new Float32Array((size / 3) * 2)\n    : undefined;\n\n  let positionIndex = 0;\n  let normalIndex = 0;\n  let bitangentIndex = 0;\n  let tangentIndex = 0;\n  let stIndex = 0;\n\n  // add lower and upper points one after the other, lower\n  // points being even and upper points being odd\n  let normal = scratchNormal;\n  let tangent = scratchTangent;\n  let bitangent = scratchBitangent;\n  let recomputeNormal = true;\n  length /= 3;\n  let i;\n  let s = 0;\n  const ds = 1 / (length - numCorners - 1);\n  for (i = 0; i < length; ++i) {\n    const i3 = i * 3;\n    const topPosition = Cartesian3.fromArray(\n      topPositions,\n      i3,\n      scratchCartesian3Position1\n    );\n    const bottomPosition = Cartesian3.fromArray(\n      bottomPositions,\n      i3,\n      scratchCartesian3Position2\n    );\n    if (vertexFormat.position) {\n      // insert the lower point\n      positions[positionIndex++] = bottomPosition.x;\n      positions[positionIndex++] = bottomPosition.y;\n      positions[positionIndex++] = bottomPosition.z;\n\n      // insert the upper point\n      positions[positionIndex++] = topPosition.x;\n      positions[positionIndex++] = topPosition.y;\n      positions[positionIndex++] = topPosition.z;\n    }\n\n    if (vertexFormat.st) {\n      textureCoordinates[stIndex++] = s;\n      textureCoordinates[stIndex++] = 0.0;\n\n      textureCoordinates[stIndex++] = s;\n      textureCoordinates[stIndex++] = 1.0;\n    }\n\n    if (vertexFormat.normal || vertexFormat.tangent || vertexFormat.bitangent) {\n      let nextTop = Cartesian3.clone(\n        Cartesian3.ZERO,\n        scratchCartesian3Position5\n      );\n      const groundPosition = Cartesian3.subtract(\n        topPosition,\n        ellipsoid.geodeticSurfaceNormal(\n          topPosition,\n          scratchCartesian3Position2\n        ),\n        scratchCartesian3Position2\n      );\n      if (i + 1 < length) {\n        nextTop = Cartesian3.fromArray(\n          topPositions,\n          i3 + 3,\n          scratchCartesian3Position5\n        );\n      }\n\n      if (recomputeNormal) {\n        const scalednextPosition = Cartesian3.subtract(\n          nextTop,\n          topPosition,\n          scratchCartesian3Position4\n        );\n        const scaledGroundPosition = Cartesian3.subtract(\n          groundPosition,\n          topPosition,\n          scratchCartesian3Position1\n        );\n        normal = Cartesian3.normalize(\n          Cartesian3.cross(scaledGroundPosition, scalednextPosition, normal),\n          normal\n        );\n        recomputeNormal = false;\n      }\n\n      if (\n        Cartesian3.equalsEpsilon(topPosition, nextTop, CesiumMath.EPSILON10)\n      ) {\n        recomputeNormal = true;\n      } else {\n        s += ds;\n        if (vertexFormat.tangent) {\n          tangent = Cartesian3.normalize(\n            Cartesian3.subtract(nextTop, topPosition, tangent),\n            tangent\n          );\n        }\n        if (vertexFormat.bitangent) {\n          bitangent = Cartesian3.normalize(\n            Cartesian3.cross(normal, tangent, bitangent),\n            bitangent\n          );\n        }\n      }\n\n      if (vertexFormat.normal) {\n        normals[normalIndex++] = normal.x;\n        normals[normalIndex++] = normal.y;\n        normals[normalIndex++] = normal.z;\n\n        normals[normalIndex++] = normal.x;\n        normals[normalIndex++] = normal.y;\n        normals[normalIndex++] = normal.z;\n      }\n\n      if (vertexFormat.tangent) {\n        tangents[tangentIndex++] = tangent.x;\n        tangents[tangentIndex++] = tangent.y;\n        tangents[tangentIndex++] = tangent.z;\n\n        tangents[tangentIndex++] = tangent.x;\n        tangents[tangentIndex++] = tangent.y;\n        tangents[tangentIndex++] = tangent.z;\n      }\n\n      if (vertexFormat.bitangent) {\n        bitangents[bitangentIndex++] = bitangent.x;\n        bitangents[bitangentIndex++] = bitangent.y;\n        bitangents[bitangentIndex++] = bitangent.z;\n\n        bitangents[bitangentIndex++] = bitangent.x;\n        bitangents[bitangentIndex++] = bitangent.y;\n        bitangents[bitangentIndex++] = bitangent.z;\n      }\n    }\n  }\n\n  const attributes = new GeometryAttributes();\n\n  if (vertexFormat.position) {\n    attributes.position = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.DOUBLE,\n      componentsPerAttribute: 3,\n      values: positions,\n    });\n  }\n\n  if (vertexFormat.normal) {\n    attributes.normal = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 3,\n      values: normals,\n    });\n  }\n\n  if (vertexFormat.tangent) {\n    attributes.tangent = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 3,\n      values: tangents,\n    });\n  }\n\n  if (vertexFormat.bitangent) {\n    attributes.bitangent = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 3,\n      values: bitangents,\n    });\n  }\n\n  if (vertexFormat.st) {\n    attributes.st = new GeometryAttribute({\n      componentDatatype: ComponentDatatype.FLOAT,\n      componentsPerAttribute: 2,\n      values: textureCoordinates,\n    });\n  }\n\n  // prepare the side walls, two triangles for each wall\n  //\n  //    A (i+1)  B (i+3) E\n  //    +--------+-------+\n  //    |      / |      /|    triangles:  A C B\n  //    |     /  |     / |                B C D\n  //    |    /   |    /  |\n  //    |   /    |   /   |\n  //    |  /     |  /    |\n  //    | /      | /     |\n  //    +--------+-------+\n  //    C (i)    D (i+2) F\n  //\n\n  const numVertices = size / 3;\n  size -= 6 * (numCorners + 1);\n  const indices = IndexDatatype.createTypedArray(numVertices, size);\n\n  let edgeIndex = 0;\n  for (i = 0; i < numVertices - 2; i += 2) {\n    const LL = i;\n    const LR = i + 2;\n    const pl = Cartesian3.fromArray(\n      positions,\n      LL * 3,\n      scratchCartesian3Position1\n    );\n    const pr = Cartesian3.fromArray(\n      positions,\n      LR * 3,\n      scratchCartesian3Position2\n    );\n    if (Cartesian3.equalsEpsilon(pl, pr, CesiumMath.EPSILON10)) {\n      continue;\n    }\n    const UL = i + 1;\n    const UR = i + 3;\n\n    indices[edgeIndex++] = UL;\n    indices[edgeIndex++] = LL;\n    indices[edgeIndex++] = UR;\n    indices[edgeIndex++] = UR;\n    indices[edgeIndex++] = LL;\n    indices[edgeIndex++] = LR;\n  }\n\n  return new Geometry({\n    attributes: attributes,\n    indices: indices,\n    primitiveType: PrimitiveType.TRIANGLES,\n    boundingSphere: new BoundingSphere.fromVertices(positions),\n  });\n};\nexport default WallGeometry;\n","import arrayRemoveDuplicates from \"./arrayRemoveDuplicates.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport defined from \"./defined.js\";\nimport CesiumMath from \"./Math.js\";\nimport PolylinePipeline from \"./PolylinePipeline.js\";\n\n/**\n * @private\n */\nconst WallGeometryLibrary = {};\n\nfunction latLonEquals(c0, c1) {\n  return (\n    CesiumMath.equalsEpsilon(c0.latitude, c1.latitude, CesiumMath.EPSILON10) &&\n    CesiumMath.equalsEpsilon(c0.longitude, c1.longitude, CesiumMath.EPSILON10)\n  );\n}\n\nconst scratchCartographic1 = new Cartographic();\nconst scratchCartographic2 = new Cartographic();\nfunction removeDuplicates(ellipsoid, positions, topHeights, bottomHeights) {\n  positions = arrayRemoveDuplicates(positions, Cartesian3.equalsEpsilon);\n\n  const length = positions.length;\n  if (length < 2) {\n    return;\n  }\n\n  const hasBottomHeights = defined(bottomHeights);\n  const hasTopHeights = defined(topHeights);\n\n  const cleanedPositions = new Array(length);\n  const cleanedTopHeights = new Array(length);\n  const cleanedBottomHeights = new Array(length);\n\n  const v0 = positions[0];\n  cleanedPositions[0] = v0;\n\n  const c0 = ellipsoid.cartesianToCartographic(v0, scratchCartographic1);\n  if (hasTopHeights) {\n    c0.height = topHeights[0];\n  }\n\n  cleanedTopHeights[0] = c0.height;\n\n  if (hasBottomHeights) {\n    cleanedBottomHeights[0] = bottomHeights[0];\n  } else {\n    cleanedBottomHeights[0] = 0.0;\n  }\n\n  const startTopHeight = cleanedTopHeights[0];\n  const startBottomHeight = cleanedBottomHeights[0];\n  let hasAllSameHeights = startTopHeight === startBottomHeight;\n\n  let index = 1;\n  for (let i = 1; i < length; ++i) {\n    const v1 = positions[i];\n    const c1 = ellipsoid.cartesianToCartographic(v1, scratchCartographic2);\n    if (hasTopHeights) {\n      c1.height = topHeights[i];\n    }\n    hasAllSameHeights = hasAllSameHeights && c1.height === 0;\n\n    if (!latLonEquals(c0, c1)) {\n      cleanedPositions[index] = v1; // Shallow copy!\n      cleanedTopHeights[index] = c1.height;\n\n      if (hasBottomHeights) {\n        cleanedBottomHeights[index] = bottomHeights[i];\n      } else {\n        cleanedBottomHeights[index] = 0.0;\n      }\n      hasAllSameHeights =\n        hasAllSameHeights &&\n        cleanedTopHeights[index] === cleanedBottomHeights[index];\n\n      Cartographic.clone(c1, c0);\n      ++index;\n    } else if (c0.height < c1.height) {\n      // two adjacent positions are the same, so use whichever has the greater height\n      cleanedTopHeights[index - 1] = c1.height;\n    }\n  }\n\n  if (hasAllSameHeights || index < 2) {\n    return;\n  }\n\n  cleanedPositions.length = index;\n  cleanedTopHeights.length = index;\n  cleanedBottomHeights.length = index;\n\n  return {\n    positions: cleanedPositions,\n    topHeights: cleanedTopHeights,\n    bottomHeights: cleanedBottomHeights,\n  };\n}\n\nconst positionsArrayScratch = new Array(2);\nconst heightsArrayScratch = new Array(2);\nconst generateArcOptionsScratch = {\n  positions: undefined,\n  height: undefined,\n  granularity: undefined,\n  ellipsoid: undefined,\n};\n\n/**\n * @private\n */\nWallGeometryLibrary.computePositions = function (\n  ellipsoid,\n  wallPositions,\n  maximumHeights,\n  minimumHeights,\n  granularity,\n  duplicateCorners\n) {\n  const o = removeDuplicates(\n    ellipsoid,\n    wallPositions,\n    maximumHeights,\n    minimumHeights\n  );\n\n  if (!defined(o)) {\n    return;\n  }\n\n  wallPositions = o.positions;\n  maximumHeights = o.topHeights;\n  minimumHeights = o.bottomHeights;\n\n  const length = wallPositions.length;\n  const numCorners = length - 2;\n  let topPositions;\n  let bottomPositions;\n\n  const minDistance = CesiumMath.chordLength(\n    granularity,\n    ellipsoid.maximumRadius\n  );\n\n  const generateArcOptions = generateArcOptionsScratch;\n  generateArcOptions.minDistance = minDistance;\n  generateArcOptions.ellipsoid = ellipsoid;\n\n  if (duplicateCorners) {\n    let count = 0;\n    let i;\n\n    for (i = 0; i < length - 1; i++) {\n      count +=\n        PolylinePipeline.numberOfPoints(\n          wallPositions[i],\n          wallPositions[i + 1],\n          minDistance\n        ) + 1;\n    }\n\n    topPositions = new Float64Array(count * 3);\n    bottomPositions = new Float64Array(count * 3);\n\n    const generateArcPositions = positionsArrayScratch;\n    const generateArcHeights = heightsArrayScratch;\n    generateArcOptions.positions = generateArcPositions;\n    generateArcOptions.height = generateArcHeights;\n\n    let offset = 0;\n    for (i = 0; i < length - 1; i++) {\n      generateArcPositions[0] = wallPositions[i];\n      generateArcPositions[1] = wallPositions[i + 1];\n\n      generateArcHeights[0] = maximumHeights[i];\n      generateArcHeights[1] = maximumHeights[i + 1];\n\n      const pos = PolylinePipeline.generateArc(generateArcOptions);\n      topPositions.set(pos, offset);\n\n      generateArcHeights[0] = minimumHeights[i];\n      generateArcHeights[1] = minimumHeights[i + 1];\n\n      bottomPositions.set(\n        PolylinePipeline.generateArc(generateArcOptions),\n        offset\n      );\n\n      offset += pos.length;\n    }\n  } else {\n    generateArcOptions.positions = wallPositions;\n    generateArcOptions.height = maximumHeights;\n    topPositions = new Float64Array(\n      PolylinePipeline.generateArc(generateArcOptions)\n    );\n\n    generateArcOptions.height = minimumHeights;\n    bottomPositions = new Float64Array(\n      PolylinePipeline.generateArc(generateArcOptions)\n    );\n  }\n\n  return {\n    bottomPositions: bottomPositions,\n    topPositions: topPositions,\n    numCorners: numCorners,\n  };\n};\nexport default WallGeometryLibrary;\n","import BoundingSphere from \"./BoundingSphere.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport ComponentDatatype from \"./ComponentDatatype.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport Geometry from \"./Geometry.js\";\nimport GeometryAttribute from \"./GeometryAttribute.js\";\nimport GeometryAttributes from \"./GeometryAttributes.js\";\nimport IndexDatatype from \"./IndexDatatype.js\";\nimport CesiumMath from \"./Math.js\";\nimport PrimitiveType from \"./PrimitiveType.js\";\nimport WallGeometryLibrary from \"./WallGeometryLibrary.js\";\n\nconst scratchCartesian3Position1 = new Cartesian3();\nconst scratchCartesian3Position2 = new Cartesian3();\n\n/**\n * A description of a wall outline. A wall is defined by a series of points,\n * which extrude down to the ground. Optionally, they can extrude downwards to a specified height.\n *\n * @alias WallOutlineGeometry\n * @constructor\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions An array of Cartesian objects, which are the points of the wall.\n * @param {Number} [options.granularity=CesiumMath.RADIANS_PER_DEGREE] The distance, in radians, between each latitude and longitude. Determines the number of positions in the buffer.\n * @param {Number[]} [options.maximumHeights] An array parallel to <code>positions</code> that give the maximum height of the\n *        wall at <code>positions</code>. If undefined, the height of each position in used.\n * @param {Number[]} [options.minimumHeights] An array parallel to <code>positions</code> that give the minimum height of the\n *        wall at <code>positions</code>. If undefined, the height at each position is 0.0.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid for coordinate manipulation\n *\n * @exception {DeveloperError} positions length must be greater than or equal to 2.\n * @exception {DeveloperError} positions and maximumHeights must have the same length.\n * @exception {DeveloperError} positions and minimumHeights must have the same length.\n *\n * @see WallGeometry#createGeometry\n * @see WallGeometry#fromConstantHeight\n *\n * @example\n * // create a wall outline that spans from ground level to 10000 meters\n * const wall = new Cesium.WallOutlineGeometry({\n *   positions : Cesium.Cartesian3.fromDegreesArrayHeights([\n *     19.0, 47.0, 10000.0,\n *     19.0, 48.0, 10000.0,\n *     20.0, 48.0, 10000.0,\n *     20.0, 47.0, 10000.0,\n *     19.0, 47.0, 10000.0\n *   ])\n * });\n * const geometry = Cesium.WallOutlineGeometry.createGeometry(wall);\n */\nfunction WallOutlineGeometry(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const wallPositions = options.positions;\n  const maximumHeights = options.maximumHeights;\n  const minimumHeights = options.minimumHeights;\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(wallPositions)) {\n    throw new DeveloperError(\"options.positions is required.\");\n  }\n  if (\n    defined(maximumHeights) &&\n    maximumHeights.length !== wallPositions.length\n  ) {\n    throw new DeveloperError(\n      \"options.positions and options.maximumHeights must have the same length.\"\n    );\n  }\n  if (\n    defined(minimumHeights) &&\n    minimumHeights.length !== wallPositions.length\n  ) {\n    throw new DeveloperError(\n      \"options.positions and options.minimumHeights must have the same length.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  const granularity = defaultValue(\n    options.granularity,\n    CesiumMath.RADIANS_PER_DEGREE\n  );\n  const ellipsoid = defaultValue(options.ellipsoid, Ellipsoid.WGS84);\n\n  this._positions = wallPositions;\n  this._minimumHeights = minimumHeights;\n  this._maximumHeights = maximumHeights;\n  this._granularity = granularity;\n  this._ellipsoid = Ellipsoid.clone(ellipsoid);\n  this._workerName = \"createWallOutlineGeometry\";\n\n  let numComponents = 1 + wallPositions.length * Cartesian3.packedLength + 2;\n  if (defined(minimumHeights)) {\n    numComponents += minimumHeights.length;\n  }\n  if (defined(maximumHeights)) {\n    numComponents += maximumHeights.length;\n  }\n\n  /**\n   * The number of elements used to pack the object into an array.\n   * @type {Number}\n   */\n  this.packedLength = numComponents + Ellipsoid.packedLength + 1;\n}\n\n/**\n * Stores the provided instance into the provided array.\n *\n * @param {WallOutlineGeometry} value The value to pack.\n * @param {Number[]} array The array to pack into.\n * @param {Number} [startingIndex=0] The index into the array at which to start packing the elements.\n *\n * @returns {Number[]} The array that was packed into\n */\nWallOutlineGeometry.pack = function (value, array, startingIndex) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(value)) {\n    throw new DeveloperError(\"value is required\");\n  }\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  let i;\n\n  const positions = value._positions;\n  let length = positions.length;\n  array[startingIndex++] = length;\n\n  for (i = 0; i < length; ++i, startingIndex += Cartesian3.packedLength) {\n    Cartesian3.pack(positions[i], array, startingIndex);\n  }\n\n  const minimumHeights = value._minimumHeights;\n  length = defined(minimumHeights) ? minimumHeights.length : 0;\n  array[startingIndex++] = length;\n\n  if (defined(minimumHeights)) {\n    for (i = 0; i < length; ++i) {\n      array[startingIndex++] = minimumHeights[i];\n    }\n  }\n\n  const maximumHeights = value._maximumHeights;\n  length = defined(maximumHeights) ? maximumHeights.length : 0;\n  array[startingIndex++] = length;\n\n  if (defined(maximumHeights)) {\n    for (i = 0; i < length; ++i) {\n      array[startingIndex++] = maximumHeights[i];\n    }\n  }\n\n  Ellipsoid.pack(value._ellipsoid, array, startingIndex);\n  startingIndex += Ellipsoid.packedLength;\n\n  array[startingIndex] = value._granularity;\n\n  return array;\n};\n\nconst scratchEllipsoid = Ellipsoid.clone(Ellipsoid.UNIT_SPHERE);\nconst scratchOptions = {\n  positions: undefined,\n  minimumHeights: undefined,\n  maximumHeights: undefined,\n  ellipsoid: scratchEllipsoid,\n  granularity: undefined,\n};\n\n/**\n * Retrieves an instance from a packed array.\n *\n * @param {Number[]} array The packed array.\n * @param {Number} [startingIndex=0] The starting index of the element to be unpacked.\n * @param {WallOutlineGeometry} [result] The object into which to store the result.\n * @returns {WallOutlineGeometry} The modified result parameter or a new WallOutlineGeometry instance if one was not provided.\n */\nWallOutlineGeometry.unpack = function (array, startingIndex, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required\");\n  }\n  //>>includeEnd('debug');\n\n  startingIndex = defaultValue(startingIndex, 0);\n\n  let i;\n\n  let length = array[startingIndex++];\n  const positions = new Array(length);\n\n  for (i = 0; i < length; ++i, startingIndex += Cartesian3.packedLength) {\n    positions[i] = Cartesian3.unpack(array, startingIndex);\n  }\n\n  length = array[startingIndex++];\n  let minimumHeights;\n\n  if (length > 0) {\n    minimumHeights = new Array(length);\n    for (i = 0; i < length; ++i) {\n      minimumHeights[i] = array[startingIndex++];\n    }\n  }\n\n  length = array[startingIndex++];\n  let maximumHeights;\n\n  if (length > 0) {\n    maximumHeights = new Array(length);\n    for (i = 0; i < length; ++i) {\n      maximumHeights[i] = array[startingIndex++];\n    }\n  }\n\n  const ellipsoid = Ellipsoid.unpack(array, startingIndex, scratchEllipsoid);\n  startingIndex += Ellipsoid.packedLength;\n\n  const granularity = array[startingIndex];\n\n  if (!defined(result)) {\n    scratchOptions.positions = positions;\n    scratchOptions.minimumHeights = minimumHeights;\n    scratchOptions.maximumHeights = maximumHeights;\n    scratchOptions.granularity = granularity;\n    return new WallOutlineGeometry(scratchOptions);\n  }\n\n  result._positions = positions;\n  result._minimumHeights = minimumHeights;\n  result._maximumHeights = maximumHeights;\n  result._ellipsoid = Ellipsoid.clone(ellipsoid, result._ellipsoid);\n  result._granularity = granularity;\n\n  return result;\n};\n\n/**\n * A description of a walloutline. A wall is defined by a series of points,\n * which extrude down to the ground. Optionally, they can extrude downwards to a specified height.\n *\n * @param {Object} options Object with the following properties:\n * @param {Cartesian3[]} options.positions An array of Cartesian objects, which are the points of the wall.\n * @param {Number} [options.maximumHeight] A constant that defines the maximum height of the\n *        wall at <code>positions</code>. If undefined, the height of each position in used.\n * @param {Number} [options.minimumHeight] A constant that defines the minimum height of the\n *        wall at <code>positions</code>. If undefined, the height at each position is 0.0.\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid for coordinate manipulation\n * @returns {WallOutlineGeometry}\n *\n *\n * @example\n * // create a wall that spans from 10000 meters to 20000 meters\n * const wall = Cesium.WallOutlineGeometry.fromConstantHeights({\n *   positions : Cesium.Cartesian3.fromDegreesArray([\n *     19.0, 47.0,\n *     19.0, 48.0,\n *     20.0, 48.0,\n *     20.0, 47.0,\n *     19.0, 47.0,\n *   ]),\n *   minimumHeight : 20000.0,\n *   maximumHeight : 10000.0\n * });\n * const geometry = Cesium.WallOutlineGeometry.createGeometry(wall);\n *\n * @see WallOutlineGeometry#createGeometry\n */\nWallOutlineGeometry.fromConstantHeights = function (options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const positions = options.positions;\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(positions)) {\n    throw new DeveloperError(\"options.positions is required.\");\n  }\n  //>>includeEnd('debug');\n\n  let minHeights;\n  let maxHeights;\n\n  const min = options.minimumHeight;\n  const max = options.maximumHeight;\n\n  const doMin = defined(min);\n  const doMax = defined(max);\n  if (doMin || doMax) {\n    const length = positions.length;\n    minHeights = doMin ? new Array(length) : undefined;\n    maxHeights = doMax ? new Array(length) : undefined;\n\n    for (let i = 0; i < length; ++i) {\n      if (doMin) {\n        minHeights[i] = min;\n      }\n\n      if (doMax) {\n        maxHeights[i] = max;\n      }\n    }\n  }\n\n  const newOptions = {\n    positions: positions,\n    maximumHeights: maxHeights,\n    minimumHeights: minHeights,\n    ellipsoid: options.ellipsoid,\n  };\n  return new WallOutlineGeometry(newOptions);\n};\n\n/**\n * Computes the geometric representation of a wall outline, including its vertices, indices, and a bounding sphere.\n *\n * @param {WallOutlineGeometry} wallGeometry A description of the wall outline.\n * @returns {Geometry|undefined} The computed vertices and indices.\n */\nWallOutlineGeometry.createGeometry = function (wallGeometry) {\n  const wallPositions = wallGeometry._positions;\n  const minimumHeights = wallGeometry._minimumHeights;\n  const maximumHeights = wallGeometry._maximumHeights;\n  const granularity = wallGeometry._granularity;\n  const ellipsoid = wallGeometry._ellipsoid;\n\n  const pos = WallGeometryLibrary.computePositions(\n    ellipsoid,\n    wallPositions,\n    maximumHeights,\n    minimumHeights,\n    granularity,\n    false\n  );\n  if (!defined(pos)) {\n    return;\n  }\n\n  const bottomPositions = pos.bottomPositions;\n  const topPositions = pos.topPositions;\n\n  let length = topPositions.length;\n  let size = length * 2;\n\n  const positions = new Float64Array(size);\n  let positionIndex = 0;\n\n  // add lower and upper points one after the other, lower\n  // points being even and upper points being odd\n  length /= 3;\n  let i;\n  for (i = 0; i < length; ++i) {\n    const i3 = i * 3;\n    const topPosition = Cartesian3.fromArray(\n      topPositions,\n      i3,\n      scratchCartesian3Position1\n    );\n    const bottomPosition = Cartesian3.fromArray(\n      bottomPositions,\n      i3,\n      scratchCartesian3Position2\n    );\n\n    // insert the lower point\n    positions[positionIndex++] = bottomPosition.x;\n    positions[positionIndex++] = bottomPosition.y;\n    positions[positionIndex++] = bottomPosition.z;\n\n    // insert the upper point\n    positions[positionIndex++] = topPosition.x;\n    positions[positionIndex++] = topPosition.y;\n    positions[positionIndex++] = topPosition.z;\n  }\n\n  const attributes = new GeometryAttributes({\n    position: new GeometryAttribute({\n      componentDatatype: ComponentDatatype.DOUBLE,\n      componentsPerAttribute: 3,\n      values: positions,\n    }),\n  });\n\n  const numVertices = size / 3;\n  size = 2 * numVertices - 4 + numVertices;\n  const indices = IndexDatatype.createTypedArray(numVertices, size);\n\n  let edgeIndex = 0;\n  for (i = 0; i < numVertices - 2; i += 2) {\n    const LL = i;\n    const LR = i + 2;\n    const pl = Cartesian3.fromArray(\n      positions,\n      LL * 3,\n      scratchCartesian3Position1\n    );\n    const pr = Cartesian3.fromArray(\n      positions,\n      LR * 3,\n      scratchCartesian3Position2\n    );\n    if (Cartesian3.equalsEpsilon(pl, pr, CesiumMath.EPSILON10)) {\n      continue;\n    }\n    const UL = i + 1;\n    const UR = i + 3;\n\n    indices[edgeIndex++] = UL;\n    indices[edgeIndex++] = LL;\n    indices[edgeIndex++] = UL;\n    indices[edgeIndex++] = UR;\n    indices[edgeIndex++] = LL;\n    indices[edgeIndex++] = LR;\n  }\n\n  indices[edgeIndex++] = numVertices - 2;\n  indices[edgeIndex++] = numVertices - 1;\n\n  return new Geometry({\n    attributes: attributes,\n    indices: indices,\n    primitiveType: PrimitiveType.LINES,\n    boundingSphere: new BoundingSphere.fromVertices(positions),\n  });\n};\nexport default WallOutlineGeometry;\n","/**\n * Enum containing WebGL Constant values by name.\n * for use without an active WebGL context, or in cases where certain constants are unavailable using the WebGL context\n * (For example, in [Safari 9]{@link https://github.com/CesiumGS/cesium/issues/2989}).\n *\n * These match the constants from the [WebGL 1.0]{@link https://www.khronos.org/registry/webgl/specs/latest/1.0/}\n * and [WebGL 2.0]{@link https://www.khronos.org/registry/webgl/specs/latest/2.0/}\n * specifications.\n *\n * @enum {Number}\n */\nconst WebGLConstants = {\n  DEPTH_BUFFER_BIT: 0x00000100,\n  STENCIL_BUFFER_BIT: 0x00000400,\n  COLOR_BUFFER_BIT: 0x00004000,\n  POINTS: 0x0000,\n  LINES: 0x0001,\n  LINE_LOOP: 0x0002,\n  LINE_STRIP: 0x0003,\n  TRIANGLES: 0x0004,\n  TRIANGLE_STRIP: 0x0005,\n  TRIANGLE_FAN: 0x0006,\n  ZERO: 0,\n  ONE: 1,\n  SRC_COLOR: 0x0300,\n  ONE_MINUS_SRC_COLOR: 0x0301,\n  SRC_ALPHA: 0x0302,\n  ONE_MINUS_SRC_ALPHA: 0x0303,\n  DST_ALPHA: 0x0304,\n  ONE_MINUS_DST_ALPHA: 0x0305,\n  DST_COLOR: 0x0306,\n  ONE_MINUS_DST_COLOR: 0x0307,\n  SRC_ALPHA_SATURATE: 0x0308,\n  FUNC_ADD: 0x8006,\n  BLEND_EQUATION: 0x8009,\n  BLEND_EQUATION_RGB: 0x8009, // same as BLEND_EQUATION\n  BLEND_EQUATION_ALPHA: 0x883d,\n  FUNC_SUBTRACT: 0x800a,\n  FUNC_REVERSE_SUBTRACT: 0x800b,\n  BLEND_DST_RGB: 0x80c8,\n  BLEND_SRC_RGB: 0x80c9,\n  BLEND_DST_ALPHA: 0x80ca,\n  BLEND_SRC_ALPHA: 0x80cb,\n  CONSTANT_COLOR: 0x8001,\n  ONE_MINUS_CONSTANT_COLOR: 0x8002,\n  CONSTANT_ALPHA: 0x8003,\n  ONE_MINUS_CONSTANT_ALPHA: 0x8004,\n  BLEND_COLOR: 0x8005,\n  ARRAY_BUFFER: 0x8892,\n  ELEMENT_ARRAY_BUFFER: 0x8893,\n  ARRAY_BUFFER_BINDING: 0x8894,\n  ELEMENT_ARRAY_BUFFER_BINDING: 0x8895,\n  STREAM_DRAW: 0x88e0,\n  STATIC_DRAW: 0x88e4,\n  DYNAMIC_DRAW: 0x88e8,\n  BUFFER_SIZE: 0x8764,\n  BUFFER_USAGE: 0x8765,\n  CURRENT_VERTEX_ATTRIB: 0x8626,\n  FRONT: 0x0404,\n  BACK: 0x0405,\n  FRONT_AND_BACK: 0x0408,\n  CULL_FACE: 0x0b44,\n  BLEND: 0x0be2,\n  DITHER: 0x0bd0,\n  STENCIL_TEST: 0x0b90,\n  DEPTH_TEST: 0x0b71,\n  SCISSOR_TEST: 0x0c11,\n  POLYGON_OFFSET_FILL: 0x8037,\n  SAMPLE_ALPHA_TO_COVERAGE: 0x809e,\n  SAMPLE_COVERAGE: 0x80a0,\n  NO_ERROR: 0,\n  INVALID_ENUM: 0x0500,\n  INVALID_VALUE: 0x0501,\n  INVALID_OPERATION: 0x0502,\n  OUT_OF_MEMORY: 0x0505,\n  CW: 0x0900,\n  CCW: 0x0901,\n  LINE_WIDTH: 0x0b21,\n  ALIASED_POINT_SIZE_RANGE: 0x846d,\n  ALIASED_LINE_WIDTH_RANGE: 0x846e,\n  CULL_FACE_MODE: 0x0b45,\n  FRONT_FACE: 0x0b46,\n  DEPTH_RANGE: 0x0b70,\n  DEPTH_WRITEMASK: 0x0b72,\n  DEPTH_CLEAR_VALUE: 0x0b73,\n  DEPTH_FUNC: 0x0b74,\n  STENCIL_CLEAR_VALUE: 0x0b91,\n  STENCIL_FUNC: 0x0b92,\n  STENCIL_FAIL: 0x0b94,\n  STENCIL_PASS_DEPTH_FAIL: 0x0b95,\n  STENCIL_PASS_DEPTH_PASS: 0x0b96,\n  STENCIL_REF: 0x0b97,\n  STENCIL_VALUE_MASK: 0x0b93,\n  STENCIL_WRITEMASK: 0x0b98,\n  STENCIL_BACK_FUNC: 0x8800,\n  STENCIL_BACK_FAIL: 0x8801,\n  STENCIL_BACK_PASS_DEPTH_FAIL: 0x8802,\n  STENCIL_BACK_PASS_DEPTH_PASS: 0x8803,\n  STENCIL_BACK_REF: 0x8ca3,\n  STENCIL_BACK_VALUE_MASK: 0x8ca4,\n  STENCIL_BACK_WRITEMASK: 0x8ca5,\n  VIEWPORT: 0x0ba2,\n  SCISSOR_BOX: 0x0c10,\n  COLOR_CLEAR_VALUE: 0x0c22,\n  COLOR_WRITEMASK: 0x0c23,\n  UNPACK_ALIGNMENT: 0x0cf5,\n  PACK_ALIGNMENT: 0x0d05,\n  MAX_TEXTURE_SIZE: 0x0d33,\n  MAX_VIEWPORT_DIMS: 0x0d3a,\n  SUBPIXEL_BITS: 0x0d50,\n  RED_BITS: 0x0d52,\n  GREEN_BITS: 0x0d53,\n  BLUE_BITS: 0x0d54,\n  ALPHA_BITS: 0x0d55,\n  DEPTH_BITS: 0x0d56,\n  STENCIL_BITS: 0x0d57,\n  POLYGON_OFFSET_UNITS: 0x2a00,\n  POLYGON_OFFSET_FACTOR: 0x8038,\n  TEXTURE_BINDING_2D: 0x8069,\n  SAMPLE_BUFFERS: 0x80a8,\n  SAMPLES: 0x80a9,\n  SAMPLE_COVERAGE_VALUE: 0x80aa,\n  SAMPLE_COVERAGE_INVERT: 0x80ab,\n  COMPRESSED_TEXTURE_FORMATS: 0x86a3,\n  DONT_CARE: 0x1100,\n  FASTEST: 0x1101,\n  NICEST: 0x1102,\n  GENERATE_MIPMAP_HINT: 0x8192,\n  BYTE: 0x1400,\n  UNSIGNED_BYTE: 0x1401,\n  SHORT: 0x1402,\n  UNSIGNED_SHORT: 0x1403,\n  INT: 0x1404,\n  UNSIGNED_INT: 0x1405,\n  FLOAT: 0x1406,\n  DEPTH_COMPONENT: 0x1902,\n  ALPHA: 0x1906,\n  RGB: 0x1907,\n  RGBA: 0x1908,\n  LUMINANCE: 0x1909,\n  LUMINANCE_ALPHA: 0x190a,\n  UNSIGNED_SHORT_4_4_4_4: 0x8033,\n  UNSIGNED_SHORT_5_5_5_1: 0x8034,\n  UNSIGNED_SHORT_5_6_5: 0x8363,\n  FRAGMENT_SHADER: 0x8b30,\n  VERTEX_SHADER: 0x8b31,\n  MAX_VERTEX_ATTRIBS: 0x8869,\n  MAX_VERTEX_UNIFORM_VECTORS: 0x8dfb,\n  MAX_VARYING_VECTORS: 0x8dfc,\n  MAX_COMBINED_TEXTURE_IMAGE_UNITS: 0x8b4d,\n  MAX_VERTEX_TEXTURE_IMAGE_UNITS: 0x8b4c,\n  MAX_TEXTURE_IMAGE_UNITS: 0x8872,\n  MAX_FRAGMENT_UNIFORM_VECTORS: 0x8dfd,\n  SHADER_TYPE: 0x8b4f,\n  DELETE_STATUS: 0x8b80,\n  LINK_STATUS: 0x8b82,\n  VALIDATE_STATUS: 0x8b83,\n  ATTACHED_SHADERS: 0x8b85,\n  ACTIVE_UNIFORMS: 0x8b86,\n  ACTIVE_ATTRIBUTES: 0x8b89,\n  SHADING_LANGUAGE_VERSION: 0x8b8c,\n  CURRENT_PROGRAM: 0x8b8d,\n  NEVER: 0x0200,\n  LESS: 0x0201,\n  EQUAL: 0x0202,\n  LEQUAL: 0x0203,\n  GREATER: 0x0204,\n  NOTEQUAL: 0x0205,\n  GEQUAL: 0x0206,\n  ALWAYS: 0x0207,\n  KEEP: 0x1e00,\n  REPLACE: 0x1e01,\n  INCR: 0x1e02,\n  DECR: 0x1e03,\n  INVERT: 0x150a,\n  INCR_WRAP: 0x8507,\n  DECR_WRAP: 0x8508,\n  VENDOR: 0x1f00,\n  RENDERER: 0x1f01,\n  VERSION: 0x1f02,\n  NEAREST: 0x2600,\n  LINEAR: 0x2601,\n  NEAREST_MIPMAP_NEAREST: 0x2700,\n  LINEAR_MIPMAP_NEAREST: 0x2701,\n  NEAREST_MIPMAP_LINEAR: 0x2702,\n  LINEAR_MIPMAP_LINEAR: 0x2703,\n  TEXTURE_MAG_FILTER: 0x2800,\n  TEXTURE_MIN_FILTER: 0x2801,\n  TEXTURE_WRAP_S: 0x2802,\n  TEXTURE_WRAP_T: 0x2803,\n  TEXTURE_2D: 0x0de1,\n  TEXTURE: 0x1702,\n  TEXTURE_CUBE_MAP: 0x8513,\n  TEXTURE_BINDING_CUBE_MAP: 0x8514,\n  TEXTURE_CUBE_MAP_POSITIVE_X: 0x8515,\n  TEXTURE_CUBE_MAP_NEGATIVE_X: 0x8516,\n  TEXTURE_CUBE_MAP_POSITIVE_Y: 0x8517,\n  TEXTURE_CUBE_MAP_NEGATIVE_Y: 0x8518,\n  TEXTURE_CUBE_MAP_POSITIVE_Z: 0x8519,\n  TEXTURE_CUBE_MAP_NEGATIVE_Z: 0x851a,\n  MAX_CUBE_MAP_TEXTURE_SIZE: 0x851c,\n  TEXTURE0: 0x84c0,\n  TEXTURE1: 0x84c1,\n  TEXTURE2: 0x84c2,\n  TEXTURE3: 0x84c3,\n  TEXTURE4: 0x84c4,\n  TEXTURE5: 0x84c5,\n  TEXTURE6: 0x84c6,\n  TEXTURE7: 0x84c7,\n  TEXTURE8: 0x84c8,\n  TEXTURE9: 0x84c9,\n  TEXTURE10: 0x84ca,\n  TEXTURE11: 0x84cb,\n  TEXTURE12: 0x84cc,\n  TEXTURE13: 0x84cd,\n  TEXTURE14: 0x84ce,\n  TEXTURE15: 0x84cf,\n  TEXTURE16: 0x84d0,\n  TEXTURE17: 0x84d1,\n  TEXTURE18: 0x84d2,\n  TEXTURE19: 0x84d3,\n  TEXTURE20: 0x84d4,\n  TEXTURE21: 0x84d5,\n  TEXTURE22: 0x84d6,\n  TEXTURE23: 0x84d7,\n  TEXTURE24: 0x84d8,\n  TEXTURE25: 0x84d9,\n  TEXTURE26: 0x84da,\n  TEXTURE27: 0x84db,\n  TEXTURE28: 0x84dc,\n  TEXTURE29: 0x84dd,\n  TEXTURE30: 0x84de,\n  TEXTURE31: 0x84df,\n  ACTIVE_TEXTURE: 0x84e0,\n  REPEAT: 0x2901,\n  CLAMP_TO_EDGE: 0x812f,\n  MIRRORED_REPEAT: 0x8370,\n  FLOAT_VEC2: 0x8b50,\n  FLOAT_VEC3: 0x8b51,\n  FLOAT_VEC4: 0x8b52,\n  INT_VEC2: 0x8b53,\n  INT_VEC3: 0x8b54,\n  INT_VEC4: 0x8b55,\n  BOOL: 0x8b56,\n  BOOL_VEC2: 0x8b57,\n  BOOL_VEC3: 0x8b58,\n  BOOL_VEC4: 0x8b59,\n  FLOAT_MAT2: 0x8b5a,\n  FLOAT_MAT3: 0x8b5b,\n  FLOAT_MAT4: 0x8b5c,\n  SAMPLER_2D: 0x8b5e,\n  SAMPLER_CUBE: 0x8b60,\n  VERTEX_ATTRIB_ARRAY_ENABLED: 0x8622,\n  VERTEX_ATTRIB_ARRAY_SIZE: 0x8623,\n  VERTEX_ATTRIB_ARRAY_STRIDE: 0x8624,\n  VERTEX_ATTRIB_ARRAY_TYPE: 0x8625,\n  VERTEX_ATTRIB_ARRAY_NORMALIZED: 0x886a,\n  VERTEX_ATTRIB_ARRAY_POINTER: 0x8645,\n  VERTEX_ATTRIB_ARRAY_BUFFER_BINDING: 0x889f,\n  IMPLEMENTATION_COLOR_READ_TYPE: 0x8b9a,\n  IMPLEMENTATION_COLOR_READ_FORMAT: 0x8b9b,\n  COMPILE_STATUS: 0x8b81,\n  LOW_FLOAT: 0x8df0,\n  MEDIUM_FLOAT: 0x8df1,\n  HIGH_FLOAT: 0x8df2,\n  LOW_INT: 0x8df3,\n  MEDIUM_INT: 0x8df4,\n  HIGH_INT: 0x8df5,\n  FRAMEBUFFER: 0x8d40,\n  RENDERBUFFER: 0x8d41,\n  RGBA4: 0x8056,\n  RGB5_A1: 0x8057,\n  RGB565: 0x8d62,\n  DEPTH_COMPONENT16: 0x81a5,\n  STENCIL_INDEX: 0x1901,\n  STENCIL_INDEX8: 0x8d48,\n  DEPTH_STENCIL: 0x84f9,\n  RENDERBUFFER_WIDTH: 0x8d42,\n  RENDERBUFFER_HEIGHT: 0x8d43,\n  RENDERBUFFER_INTERNAL_FORMAT: 0x8d44,\n  RENDERBUFFER_RED_SIZE: 0x8d50,\n  RENDERBUFFER_GREEN_SIZE: 0x8d51,\n  RENDERBUFFER_BLUE_SIZE: 0x8d52,\n  RENDERBUFFER_ALPHA_SIZE: 0x8d53,\n  RENDERBUFFER_DEPTH_SIZE: 0x8d54,\n  RENDERBUFFER_STENCIL_SIZE: 0x8d55,\n  FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE: 0x8cd0,\n  FRAMEBUFFER_ATTACHMENT_OBJECT_NAME: 0x8cd1,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL: 0x8cd2,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE: 0x8cd3,\n  COLOR_ATTACHMENT0: 0x8ce0,\n  DEPTH_ATTACHMENT: 0x8d00,\n  STENCIL_ATTACHMENT: 0x8d20,\n  DEPTH_STENCIL_ATTACHMENT: 0x821a,\n  NONE: 0,\n  FRAMEBUFFER_COMPLETE: 0x8cd5,\n  FRAMEBUFFER_INCOMPLETE_ATTACHMENT: 0x8cd6,\n  FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: 0x8cd7,\n  FRAMEBUFFER_INCOMPLETE_DIMENSIONS: 0x8cd9,\n  FRAMEBUFFER_UNSUPPORTED: 0x8cdd,\n  FRAMEBUFFER_BINDING: 0x8ca6,\n  RENDERBUFFER_BINDING: 0x8ca7,\n  MAX_RENDERBUFFER_SIZE: 0x84e8,\n  INVALID_FRAMEBUFFER_OPERATION: 0x0506,\n  UNPACK_FLIP_Y_WEBGL: 0x9240,\n  UNPACK_PREMULTIPLY_ALPHA_WEBGL: 0x9241,\n  CONTEXT_LOST_WEBGL: 0x9242,\n  UNPACK_COLORSPACE_CONVERSION_WEBGL: 0x9243,\n  BROWSER_DEFAULT_WEBGL: 0x9244,\n\n  // WEBGL_compressed_texture_s3tc\n  COMPRESSED_RGB_S3TC_DXT1_EXT: 0x83f0,\n  COMPRESSED_RGBA_S3TC_DXT1_EXT: 0x83f1,\n  COMPRESSED_RGBA_S3TC_DXT3_EXT: 0x83f2,\n  COMPRESSED_RGBA_S3TC_DXT5_EXT: 0x83f3,\n\n  // WEBGL_compressed_texture_pvrtc\n  COMPRESSED_RGB_PVRTC_4BPPV1_IMG: 0x8c00,\n  COMPRESSED_RGB_PVRTC_2BPPV1_IMG: 0x8c01,\n  COMPRESSED_RGBA_PVRTC_4BPPV1_IMG: 0x8c02,\n  COMPRESSED_RGBA_PVRTC_2BPPV1_IMG: 0x8c03,\n\n  // WEBGL_compressed_texture_astc\n  COMPRESSED_RGBA_ASTC_4x4_WEBGL: 0x93b0,\n\n  // WEBGL_compressed_texture_etc1\n  COMPRESSED_RGB_ETC1_WEBGL: 0x8d64,\n\n  // EXT_texture_compression_bptc\n  COMPRESSED_RGBA_BPTC_UNORM: 0x8e8c,\n\n  // EXT_color_buffer_half_float\n  HALF_FLOAT_OES: 0x8d61,\n\n  // Desktop OpenGL\n  DOUBLE: 0x140a,\n\n  // WebGL 2\n  READ_BUFFER: 0x0c02,\n  UNPACK_ROW_LENGTH: 0x0cf2,\n  UNPACK_SKIP_ROWS: 0x0cf3,\n  UNPACK_SKIP_PIXELS: 0x0cf4,\n  PACK_ROW_LENGTH: 0x0d02,\n  PACK_SKIP_ROWS: 0x0d03,\n  PACK_SKIP_PIXELS: 0x0d04,\n  COLOR: 0x1800,\n  DEPTH: 0x1801,\n  STENCIL: 0x1802,\n  RED: 0x1903,\n  RGB8: 0x8051,\n  RGBA8: 0x8058,\n  RGB10_A2: 0x8059,\n  TEXTURE_BINDING_3D: 0x806a,\n  UNPACK_SKIP_IMAGES: 0x806d,\n  UNPACK_IMAGE_HEIGHT: 0x806e,\n  TEXTURE_3D: 0x806f,\n  TEXTURE_WRAP_R: 0x8072,\n  MAX_3D_TEXTURE_SIZE: 0x8073,\n  UNSIGNED_INT_2_10_10_10_REV: 0x8368,\n  MAX_ELEMENTS_VERTICES: 0x80e8,\n  MAX_ELEMENTS_INDICES: 0x80e9,\n  TEXTURE_MIN_LOD: 0x813a,\n  TEXTURE_MAX_LOD: 0x813b,\n  TEXTURE_BASE_LEVEL: 0x813c,\n  TEXTURE_MAX_LEVEL: 0x813d,\n  MIN: 0x8007,\n  MAX: 0x8008,\n  DEPTH_COMPONENT24: 0x81a6,\n  MAX_TEXTURE_LOD_BIAS: 0x84fd,\n  TEXTURE_COMPARE_MODE: 0x884c,\n  TEXTURE_COMPARE_FUNC: 0x884d,\n  CURRENT_QUERY: 0x8865,\n  QUERY_RESULT: 0x8866,\n  QUERY_RESULT_AVAILABLE: 0x8867,\n  STREAM_READ: 0x88e1,\n  STREAM_COPY: 0x88e2,\n  STATIC_READ: 0x88e5,\n  STATIC_COPY: 0x88e6,\n  DYNAMIC_READ: 0x88e9,\n  DYNAMIC_COPY: 0x88ea,\n  MAX_DRAW_BUFFERS: 0x8824,\n  DRAW_BUFFER0: 0x8825,\n  DRAW_BUFFER1: 0x8826,\n  DRAW_BUFFER2: 0x8827,\n  DRAW_BUFFER3: 0x8828,\n  DRAW_BUFFER4: 0x8829,\n  DRAW_BUFFER5: 0x882a,\n  DRAW_BUFFER6: 0x882b,\n  DRAW_BUFFER7: 0x882c,\n  DRAW_BUFFER8: 0x882d,\n  DRAW_BUFFER9: 0x882e,\n  DRAW_BUFFER10: 0x882f,\n  DRAW_BUFFER11: 0x8830,\n  DRAW_BUFFER12: 0x8831,\n  DRAW_BUFFER13: 0x8832,\n  DRAW_BUFFER14: 0x8833,\n  DRAW_BUFFER15: 0x8834,\n  MAX_FRAGMENT_UNIFORM_COMPONENTS: 0x8b49,\n  MAX_VERTEX_UNIFORM_COMPONENTS: 0x8b4a,\n  SAMPLER_3D: 0x8b5f,\n  SAMPLER_2D_SHADOW: 0x8b62,\n  FRAGMENT_SHADER_DERIVATIVE_HINT: 0x8b8b,\n  PIXEL_PACK_BUFFER: 0x88eb,\n  PIXEL_UNPACK_BUFFER: 0x88ec,\n  PIXEL_PACK_BUFFER_BINDING: 0x88ed,\n  PIXEL_UNPACK_BUFFER_BINDING: 0x88ef,\n  FLOAT_MAT2x3: 0x8b65,\n  FLOAT_MAT2x4: 0x8b66,\n  FLOAT_MAT3x2: 0x8b67,\n  FLOAT_MAT3x4: 0x8b68,\n  FLOAT_MAT4x2: 0x8b69,\n  FLOAT_MAT4x3: 0x8b6a,\n  SRGB: 0x8c40,\n  SRGB8: 0x8c41,\n  SRGB8_ALPHA8: 0x8c43,\n  COMPARE_REF_TO_TEXTURE: 0x884e,\n  RGBA32F: 0x8814,\n  RGB32F: 0x8815,\n  RGBA16F: 0x881a,\n  RGB16F: 0x881b,\n  VERTEX_ATTRIB_ARRAY_INTEGER: 0x88fd,\n  MAX_ARRAY_TEXTURE_LAYERS: 0x88ff,\n  MIN_PROGRAM_TEXEL_OFFSET: 0x8904,\n  MAX_PROGRAM_TEXEL_OFFSET: 0x8905,\n  MAX_VARYING_COMPONENTS: 0x8b4b,\n  TEXTURE_2D_ARRAY: 0x8c1a,\n  TEXTURE_BINDING_2D_ARRAY: 0x8c1d,\n  R11F_G11F_B10F: 0x8c3a,\n  UNSIGNED_INT_10F_11F_11F_REV: 0x8c3b,\n  RGB9_E5: 0x8c3d,\n  UNSIGNED_INT_5_9_9_9_REV: 0x8c3e,\n  TRANSFORM_FEEDBACK_BUFFER_MODE: 0x8c7f,\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS: 0x8c80,\n  TRANSFORM_FEEDBACK_VARYINGS: 0x8c83,\n  TRANSFORM_FEEDBACK_BUFFER_START: 0x8c84,\n  TRANSFORM_FEEDBACK_BUFFER_SIZE: 0x8c85,\n  TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN: 0x8c88,\n  RASTERIZER_DISCARD: 0x8c89,\n  MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS: 0x8c8a,\n  MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS: 0x8c8b,\n  INTERLEAVED_ATTRIBS: 0x8c8c,\n  SEPARATE_ATTRIBS: 0x8c8d,\n  TRANSFORM_FEEDBACK_BUFFER: 0x8c8e,\n  TRANSFORM_FEEDBACK_BUFFER_BINDING: 0x8c8f,\n  RGBA32UI: 0x8d70,\n  RGB32UI: 0x8d71,\n  RGBA16UI: 0x8d76,\n  RGB16UI: 0x8d77,\n  RGBA8UI: 0x8d7c,\n  RGB8UI: 0x8d7d,\n  RGBA32I: 0x8d82,\n  RGB32I: 0x8d83,\n  RGBA16I: 0x8d88,\n  RGB16I: 0x8d89,\n  RGBA8I: 0x8d8e,\n  RGB8I: 0x8d8f,\n  RED_INTEGER: 0x8d94,\n  RGB_INTEGER: 0x8d98,\n  RGBA_INTEGER: 0x8d99,\n  SAMPLER_2D_ARRAY: 0x8dc1,\n  SAMPLER_2D_ARRAY_SHADOW: 0x8dc4,\n  SAMPLER_CUBE_SHADOW: 0x8dc5,\n  UNSIGNED_INT_VEC2: 0x8dc6,\n  UNSIGNED_INT_VEC3: 0x8dc7,\n  UNSIGNED_INT_VEC4: 0x8dc8,\n  INT_SAMPLER_2D: 0x8dca,\n  INT_SAMPLER_3D: 0x8dcb,\n  INT_SAMPLER_CUBE: 0x8dcc,\n  INT_SAMPLER_2D_ARRAY: 0x8dcf,\n  UNSIGNED_INT_SAMPLER_2D: 0x8dd2,\n  UNSIGNED_INT_SAMPLER_3D: 0x8dd3,\n  UNSIGNED_INT_SAMPLER_CUBE: 0x8dd4,\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: 0x8dd7,\n  DEPTH_COMPONENT32F: 0x8cac,\n  DEPTH32F_STENCIL8: 0x8cad,\n  FLOAT_32_UNSIGNED_INT_24_8_REV: 0x8dad,\n  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: 0x8210,\n  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: 0x8211,\n  FRAMEBUFFER_ATTACHMENT_RED_SIZE: 0x8212,\n  FRAMEBUFFER_ATTACHMENT_GREEN_SIZE: 0x8213,\n  FRAMEBUFFER_ATTACHMENT_BLUE_SIZE: 0x8214,\n  FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE: 0x8215,\n  FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE: 0x8216,\n  FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE: 0x8217,\n  FRAMEBUFFER_DEFAULT: 0x8218,\n  UNSIGNED_INT_24_8: 0x84fa,\n  DEPTH24_STENCIL8: 0x88f0,\n  UNSIGNED_NORMALIZED: 0x8c17,\n  DRAW_FRAMEBUFFER_BINDING: 0x8ca6, // Same as FRAMEBUFFER_BINDING\n  READ_FRAMEBUFFER: 0x8ca8,\n  DRAW_FRAMEBUFFER: 0x8ca9,\n  READ_FRAMEBUFFER_BINDING: 0x8caa,\n  RENDERBUFFER_SAMPLES: 0x8cab,\n  FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER: 0x8cd4,\n  MAX_COLOR_ATTACHMENTS: 0x8cdf,\n  COLOR_ATTACHMENT1: 0x8ce1,\n  COLOR_ATTACHMENT2: 0x8ce2,\n  COLOR_ATTACHMENT3: 0x8ce3,\n  COLOR_ATTACHMENT4: 0x8ce4,\n  COLOR_ATTACHMENT5: 0x8ce5,\n  COLOR_ATTACHMENT6: 0x8ce6,\n  COLOR_ATTACHMENT7: 0x8ce7,\n  COLOR_ATTACHMENT8: 0x8ce8,\n  COLOR_ATTACHMENT9: 0x8ce9,\n  COLOR_ATTACHMENT10: 0x8cea,\n  COLOR_ATTACHMENT11: 0x8ceb,\n  COLOR_ATTACHMENT12: 0x8cec,\n  COLOR_ATTACHMENT13: 0x8ced,\n  COLOR_ATTACHMENT14: 0x8cee,\n  COLOR_ATTACHMENT15: 0x8cef,\n  FRAMEBUFFER_INCOMPLETE_MULTISAMPLE: 0x8d56,\n  MAX_SAMPLES: 0x8d57,\n  HALF_FLOAT: 0x140b,\n  RG: 0x8227,\n  RG_INTEGER: 0x8228,\n  R8: 0x8229,\n  RG8: 0x822b,\n  R16F: 0x822d,\n  R32F: 0x822e,\n  RG16F: 0x822f,\n  RG32F: 0x8230,\n  R8I: 0x8231,\n  R8UI: 0x8232,\n  R16I: 0x8233,\n  R16UI: 0x8234,\n  R32I: 0x8235,\n  R32UI: 0x8236,\n  RG8I: 0x8237,\n  RG8UI: 0x8238,\n  RG16I: 0x8239,\n  RG16UI: 0x823a,\n  RG32I: 0x823b,\n  RG32UI: 0x823c,\n  VERTEX_ARRAY_BINDING: 0x85b5,\n  R8_SNORM: 0x8f94,\n  RG8_SNORM: 0x8f95,\n  RGB8_SNORM: 0x8f96,\n  RGBA8_SNORM: 0x8f97,\n  SIGNED_NORMALIZED: 0x8f9c,\n  COPY_READ_BUFFER: 0x8f36,\n  COPY_WRITE_BUFFER: 0x8f37,\n  COPY_READ_BUFFER_BINDING: 0x8f36, // Same as COPY_READ_BUFFER\n  COPY_WRITE_BUFFER_BINDING: 0x8f37, // Same as COPY_WRITE_BUFFER\n  UNIFORM_BUFFER: 0x8a11,\n  UNIFORM_BUFFER_BINDING: 0x8a28,\n  UNIFORM_BUFFER_START: 0x8a29,\n  UNIFORM_BUFFER_SIZE: 0x8a2a,\n  MAX_VERTEX_UNIFORM_BLOCKS: 0x8a2b,\n  MAX_FRAGMENT_UNIFORM_BLOCKS: 0x8a2d,\n  MAX_COMBINED_UNIFORM_BLOCKS: 0x8a2e,\n  MAX_UNIFORM_BUFFER_BINDINGS: 0x8a2f,\n  MAX_UNIFORM_BLOCK_SIZE: 0x8a30,\n  MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS: 0x8a31,\n  MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS: 0x8a33,\n  UNIFORM_BUFFER_OFFSET_ALIGNMENT: 0x8a34,\n  ACTIVE_UNIFORM_BLOCKS: 0x8a36,\n  UNIFORM_TYPE: 0x8a37,\n  UNIFORM_SIZE: 0x8a38,\n  UNIFORM_BLOCK_INDEX: 0x8a3a,\n  UNIFORM_OFFSET: 0x8a3b,\n  UNIFORM_ARRAY_STRIDE: 0x8a3c,\n  UNIFORM_MATRIX_STRIDE: 0x8a3d,\n  UNIFORM_IS_ROW_MAJOR: 0x8a3e,\n  UNIFORM_BLOCK_BINDING: 0x8a3f,\n  UNIFORM_BLOCK_DATA_SIZE: 0x8a40,\n  UNIFORM_BLOCK_ACTIVE_UNIFORMS: 0x8a42,\n  UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES: 0x8a43,\n  UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER: 0x8a44,\n  UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER: 0x8a46,\n  INVALID_INDEX: 0xffffffff,\n  MAX_VERTEX_OUTPUT_COMPONENTS: 0x9122,\n  MAX_FRAGMENT_INPUT_COMPONENTS: 0x9125,\n  MAX_SERVER_WAIT_TIMEOUT: 0x9111,\n  OBJECT_TYPE: 0x9112,\n  SYNC_CONDITION: 0x9113,\n  SYNC_STATUS: 0x9114,\n  SYNC_FLAGS: 0x9115,\n  SYNC_FENCE: 0x9116,\n  SYNC_GPU_COMMANDS_COMPLETE: 0x9117,\n  UNSIGNALED: 0x9118,\n  SIGNALED: 0x9119,\n  ALREADY_SIGNALED: 0x911a,\n  TIMEOUT_EXPIRED: 0x911b,\n  CONDITION_SATISFIED: 0x911c,\n  WAIT_FAILED: 0x911d,\n  SYNC_FLUSH_COMMANDS_BIT: 0x00000001,\n  VERTEX_ATTRIB_ARRAY_DIVISOR: 0x88fe,\n  ANY_SAMPLES_PASSED: 0x8c2f,\n  ANY_SAMPLES_PASSED_CONSERVATIVE: 0x8d6a,\n  SAMPLER_BINDING: 0x8919,\n  RGB10_A2UI: 0x906f,\n  INT_2_10_10_10_REV: 0x8d9f,\n  TRANSFORM_FEEDBACK: 0x8e22,\n  TRANSFORM_FEEDBACK_PAUSED: 0x8e23,\n  TRANSFORM_FEEDBACK_ACTIVE: 0x8e24,\n  TRANSFORM_FEEDBACK_BINDING: 0x8e25,\n  COMPRESSED_R11_EAC: 0x9270,\n  COMPRESSED_SIGNED_R11_EAC: 0x9271,\n  COMPRESSED_RG11_EAC: 0x9272,\n  COMPRESSED_SIGNED_RG11_EAC: 0x9273,\n  COMPRESSED_RGB8_ETC2: 0x9274,\n  COMPRESSED_SRGB8_ETC2: 0x9275,\n  COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9276,\n  COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2: 0x9277,\n  COMPRESSED_RGBA8_ETC2_EAC: 0x9278,\n  COMPRESSED_SRGB8_ALPHA8_ETC2_EAC: 0x9279,\n  TEXTURE_IMMUTABLE_FORMAT: 0x912f,\n  MAX_ELEMENT_INDEX: 0x8d6b,\n  TEXTURE_IMMUTABLE_LEVELS: 0x82df,\n\n  // Extensions\n  MAX_TEXTURE_MAX_ANISOTROPY_EXT: 0x84ff,\n};\nexport default Object.freeze(WebGLConstants);\n","import Cartesian3 from \"./Cartesian3.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport CesiumMath from \"./Math.js\";\n\n/**\n * The map projection used by Google Maps, Bing Maps, and most of ArcGIS Online, EPSG:3857.  This\n * projection use longitude and latitude expressed with the WGS84 and transforms them to Mercator using\n * the spherical (rather than ellipsoidal) equations.\n *\n * @alias WebMercatorProjection\n * @constructor\n *\n * @param {Ellipsoid} [ellipsoid=Ellipsoid.WGS84] The ellipsoid.\n *\n * @see GeographicProjection\n */\nfunction WebMercatorProjection(ellipsoid) {\n  this._ellipsoid = defaultValue(ellipsoid, Ellipsoid.WGS84);\n  this._semimajorAxis = this._ellipsoid.maximumRadius;\n  this._oneOverSemimajorAxis = 1.0 / this._semimajorAxis;\n}\n\nObject.defineProperties(WebMercatorProjection.prototype, {\n  /**\n   * Gets the {@link Ellipsoid}.\n   *\n   * @memberof WebMercatorProjection.prototype\n   *\n   * @type {Ellipsoid}\n   * @readonly\n   */\n  ellipsoid: {\n    get: function () {\n      return this._ellipsoid;\n    },\n  },\n});\n\n/**\n * Converts a Mercator angle, in the range -PI to PI, to a geodetic latitude\n * in the range -PI/2 to PI/2.\n *\n * @param {Number} mercatorAngle The angle to convert.\n * @returns {Number} The geodetic latitude in radians.\n */\nWebMercatorProjection.mercatorAngleToGeodeticLatitude = function (\n  mercatorAngle\n) {\n  return CesiumMath.PI_OVER_TWO - 2.0 * Math.atan(Math.exp(-mercatorAngle));\n};\n\n/**\n * Converts a geodetic latitude in radians, in the range -PI/2 to PI/2, to a Mercator\n * angle in the range -PI to PI.\n *\n * @param {Number} latitude The geodetic latitude in radians.\n * @returns {Number} The Mercator angle.\n */\nWebMercatorProjection.geodeticLatitudeToMercatorAngle = function (latitude) {\n  // Clamp the latitude coordinate to the valid Mercator bounds.\n  if (latitude > WebMercatorProjection.MaximumLatitude) {\n    latitude = WebMercatorProjection.MaximumLatitude;\n  } else if (latitude < -WebMercatorProjection.MaximumLatitude) {\n    latitude = -WebMercatorProjection.MaximumLatitude;\n  }\n  const sinLatitude = Math.sin(latitude);\n  return 0.5 * Math.log((1.0 + sinLatitude) / (1.0 - sinLatitude));\n};\n\n/**\n * The maximum latitude (both North and South) supported by a Web Mercator\n * (EPSG:3857) projection.  Technically, the Mercator projection is defined\n * for any latitude up to (but not including) 90 degrees, but it makes sense\n * to cut it off sooner because it grows exponentially with increasing latitude.\n * The logic behind this particular cutoff value, which is the one used by\n * Google Maps, Bing Maps, and Esri, is that it makes the projection\n * square.  That is, the rectangle is equal in the X and Y directions.\n *\n * The constant value is computed by calling:\n *    WebMercatorProjection.mercatorAngleToGeodeticLatitude(Math.PI)\n *\n * @type {Number}\n */\nWebMercatorProjection.MaximumLatitude = WebMercatorProjection.mercatorAngleToGeodeticLatitude(\n  Math.PI\n);\n\n/**\n * Converts geodetic ellipsoid coordinates, in radians, to the equivalent Web Mercator\n * X, Y, Z coordinates expressed in meters and returned in a {@link Cartesian3}.  The height\n * is copied unmodified to the Z coordinate.\n *\n * @param {Cartographic} cartographic The cartographic coordinates in radians.\n * @param {Cartesian3} [result] The instance to which to copy the result, or undefined if a\n *        new instance should be created.\n * @returns {Cartesian3} The equivalent web mercator X, Y, Z coordinates, in meters.\n */\nWebMercatorProjection.prototype.project = function (cartographic, result) {\n  const semimajorAxis = this._semimajorAxis;\n  const x = cartographic.longitude * semimajorAxis;\n  const y =\n    WebMercatorProjection.geodeticLatitudeToMercatorAngle(\n      cartographic.latitude\n    ) * semimajorAxis;\n  const z = cartographic.height;\n\n  if (!defined(result)) {\n    return new Cartesian3(x, y, z);\n  }\n\n  result.x = x;\n  result.y = y;\n  result.z = z;\n  return result;\n};\n\n/**\n * Converts Web Mercator X, Y coordinates, expressed in meters, to a {@link Cartographic}\n * containing geodetic ellipsoid coordinates.  The Z coordinate is copied unmodified to the\n * height.\n *\n * @param {Cartesian3} cartesian The web mercator Cartesian position to unrproject with height (z) in meters.\n * @param {Cartographic} [result] The instance to which to copy the result, or undefined if a\n *        new instance should be created.\n * @returns {Cartographic} The equivalent cartographic coordinates.\n */\nWebMercatorProjection.prototype.unproject = function (cartesian, result) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(cartesian)) {\n    throw new DeveloperError(\"cartesian is required\");\n  }\n  //>>includeEnd('debug');\n\n  const oneOverEarthSemimajorAxis = this._oneOverSemimajorAxis;\n  const longitude = cartesian.x * oneOverEarthSemimajorAxis;\n  const latitude = WebMercatorProjection.mercatorAngleToGeodeticLatitude(\n    cartesian.y * oneOverEarthSemimajorAxis\n  );\n  const height = cartesian.z;\n\n  if (!defined(result)) {\n    return new Cartographic(longitude, latitude, height);\n  }\n\n  result.longitude = longitude;\n  result.latitude = latitude;\n  result.height = height;\n  return result;\n};\nexport default WebMercatorProjection;\n","import Cartesian2 from \"./Cartesian2.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport Ellipsoid from \"./Ellipsoid.js\";\nimport Rectangle from \"./Rectangle.js\";\nimport WebMercatorProjection from \"./WebMercatorProjection.js\";\n\n/**\n * A tiling scheme for geometry referenced to a {@link WebMercatorProjection}, EPSG:3857.  This is\n * the tiling scheme used by Google Maps, Microsoft Bing Maps, and most of ESRI ArcGIS Online.\n *\n * @alias WebMercatorTilingScheme\n * @constructor\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Ellipsoid} [options.ellipsoid=Ellipsoid.WGS84] The ellipsoid whose surface is being tiled. Defaults to\n * the WGS84 ellipsoid.\n * @param {Number} [options.numberOfLevelZeroTilesX=1] The number of tiles in the X direction at level zero of\n *        the tile tree.\n * @param {Number} [options.numberOfLevelZeroTilesY=1] The number of tiles in the Y direction at level zero of\n *        the tile tree.\n * @param {Cartesian2} [options.rectangleSouthwestInMeters] The southwest corner of the rectangle covered by the\n *        tiling scheme, in meters.  If this parameter or rectangleNortheastInMeters is not specified, the entire\n *        globe is covered in the longitude direction and an equal distance is covered in the latitude\n *        direction, resulting in a square projection.\n * @param {Cartesian2} [options.rectangleNortheastInMeters] The northeast corner of the rectangle covered by the\n *        tiling scheme, in meters.  If this parameter or rectangleSouthwestInMeters is not specified, the entire\n *        globe is covered in the longitude direction and an equal distance is covered in the latitude\n *        direction, resulting in a square projection.\n */\nfunction WebMercatorTilingScheme(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  this._ellipsoid = defaultValue(options.ellipsoid, Ellipsoid.WGS84);\n  this._numberOfLevelZeroTilesX = defaultValue(\n    options.numberOfLevelZeroTilesX,\n    1\n  );\n  this._numberOfLevelZeroTilesY = defaultValue(\n    options.numberOfLevelZeroTilesY,\n    1\n  );\n\n  this._projection = new WebMercatorProjection(this._ellipsoid);\n\n  if (\n    defined(options.rectangleSouthwestInMeters) &&\n    defined(options.rectangleNortheastInMeters)\n  ) {\n    this._rectangleSouthwestInMeters = options.rectangleSouthwestInMeters;\n    this._rectangleNortheastInMeters = options.rectangleNortheastInMeters;\n  } else {\n    const semimajorAxisTimesPi = this._ellipsoid.maximumRadius * Math.PI;\n    this._rectangleSouthwestInMeters = new Cartesian2(\n      -semimajorAxisTimesPi,\n      -semimajorAxisTimesPi\n    );\n    this._rectangleNortheastInMeters = new Cartesian2(\n      semimajorAxisTimesPi,\n      semimajorAxisTimesPi\n    );\n  }\n\n  const southwest = this._projection.unproject(\n    this._rectangleSouthwestInMeters\n  );\n  const northeast = this._projection.unproject(\n    this._rectangleNortheastInMeters\n  );\n  this._rectangle = new Rectangle(\n    southwest.longitude,\n    southwest.latitude,\n    northeast.longitude,\n    northeast.latitude\n  );\n}\n\nObject.defineProperties(WebMercatorTilingScheme.prototype, {\n  /**\n   * Gets the ellipsoid that is tiled by this tiling scheme.\n   * @memberof WebMercatorTilingScheme.prototype\n   * @type {Ellipsoid}\n   */\n  ellipsoid: {\n    get: function () {\n      return this._ellipsoid;\n    },\n  },\n\n  /**\n   * Gets the rectangle, in radians, covered by this tiling scheme.\n   * @memberof WebMercatorTilingScheme.prototype\n   * @type {Rectangle}\n   */\n  rectangle: {\n    get: function () {\n      return this._rectangle;\n    },\n  },\n\n  /**\n   * Gets the map projection used by this tiling scheme.\n   * @memberof WebMercatorTilingScheme.prototype\n   * @type {MapProjection}\n   */\n  projection: {\n    get: function () {\n      return this._projection;\n    },\n  },\n});\n\n/**\n * Gets the total number of tiles in the X direction at a specified level-of-detail.\n *\n * @param {Number} level The level-of-detail.\n * @returns {Number} The number of tiles in the X direction at the given level.\n */\nWebMercatorTilingScheme.prototype.getNumberOfXTilesAtLevel = function (level) {\n  return this._numberOfLevelZeroTilesX << level;\n};\n\n/**\n * Gets the total number of tiles in the Y direction at a specified level-of-detail.\n *\n * @param {Number} level The level-of-detail.\n * @returns {Number} The number of tiles in the Y direction at the given level.\n */\nWebMercatorTilingScheme.prototype.getNumberOfYTilesAtLevel = function (level) {\n  return this._numberOfLevelZeroTilesY << level;\n};\n\n/**\n * Transforms a rectangle specified in geodetic radians to the native coordinate system\n * of this tiling scheme.\n *\n * @param {Rectangle} rectangle The rectangle to transform.\n * @param {Rectangle} [result] The instance to which to copy the result, or undefined if a new instance\n *        should be created.\n * @returns {Rectangle} The specified 'result', or a new object containing the native rectangle if 'result'\n *          is undefined.\n */\nWebMercatorTilingScheme.prototype.rectangleToNativeRectangle = function (\n  rectangle,\n  result\n) {\n  const projection = this._projection;\n  const southwest = projection.project(Rectangle.southwest(rectangle));\n  const northeast = projection.project(Rectangle.northeast(rectangle));\n\n  if (!defined(result)) {\n    return new Rectangle(southwest.x, southwest.y, northeast.x, northeast.y);\n  }\n\n  result.west = southwest.x;\n  result.south = southwest.y;\n  result.east = northeast.x;\n  result.north = northeast.y;\n  return result;\n};\n\n/**\n * Converts tile x, y coordinates and level to a rectangle expressed in the native coordinates\n * of the tiling scheme.\n *\n * @param {Number} x The integer x coordinate of the tile.\n * @param {Number} y The integer y coordinate of the tile.\n * @param {Number} level The tile level-of-detail.  Zero is the least detailed.\n * @param {Object} [result] The instance to which to copy the result, or undefined if a new instance\n *        should be created.\n * @returns {Rectangle} The specified 'result', or a new object containing the rectangle\n *          if 'result' is undefined.\n */\nWebMercatorTilingScheme.prototype.tileXYToNativeRectangle = function (\n  x,\n  y,\n  level,\n  result\n) {\n  const xTiles = this.getNumberOfXTilesAtLevel(level);\n  const yTiles = this.getNumberOfYTilesAtLevel(level);\n\n  const xTileWidth =\n    (this._rectangleNortheastInMeters.x - this._rectangleSouthwestInMeters.x) /\n    xTiles;\n  const west = this._rectangleSouthwestInMeters.x + x * xTileWidth;\n  const east = this._rectangleSouthwestInMeters.x + (x + 1) * xTileWidth;\n\n  const yTileHeight =\n    (this._rectangleNortheastInMeters.y - this._rectangleSouthwestInMeters.y) /\n    yTiles;\n  const north = this._rectangleNortheastInMeters.y - y * yTileHeight;\n  const south = this._rectangleNortheastInMeters.y - (y + 1) * yTileHeight;\n\n  if (!defined(result)) {\n    return new Rectangle(west, south, east, north);\n  }\n\n  result.west = west;\n  result.south = south;\n  result.east = east;\n  result.north = north;\n  return result;\n};\n\n/**\n * Converts tile x, y coordinates and level to a cartographic rectangle in radians.\n *\n * @param {Number} x The integer x coordinate of the tile.\n * @param {Number} y The integer y coordinate of the tile.\n * @param {Number} level The tile level-of-detail.  Zero is the least detailed.\n * @param {Object} [result] The instance to which to copy the result, or undefined if a new instance\n *        should be created.\n * @returns {Rectangle} The specified 'result', or a new object containing the rectangle\n *          if 'result' is undefined.\n */\nWebMercatorTilingScheme.prototype.tileXYToRectangle = function (\n  x,\n  y,\n  level,\n  result\n) {\n  const nativeRectangle = this.tileXYToNativeRectangle(x, y, level, result);\n\n  const projection = this._projection;\n  const southwest = projection.unproject(\n    new Cartesian2(nativeRectangle.west, nativeRectangle.south)\n  );\n  const northeast = projection.unproject(\n    new Cartesian2(nativeRectangle.east, nativeRectangle.north)\n  );\n\n  nativeRectangle.west = southwest.longitude;\n  nativeRectangle.south = southwest.latitude;\n  nativeRectangle.east = northeast.longitude;\n  nativeRectangle.north = northeast.latitude;\n  return nativeRectangle;\n};\n\n/**\n * Calculates the tile x, y coordinates of the tile containing\n * a given cartographic position.\n *\n * @param {Cartographic} position The position.\n * @param {Number} level The tile level-of-detail.  Zero is the least detailed.\n * @param {Cartesian2} [result] The instance to which to copy the result, or undefined if a new instance\n *        should be created.\n * @returns {Cartesian2} The specified 'result', or a new object containing the tile x, y coordinates\n *          if 'result' is undefined.\n */\nWebMercatorTilingScheme.prototype.positionToTileXY = function (\n  position,\n  level,\n  result\n) {\n  const rectangle = this._rectangle;\n  if (!Rectangle.contains(rectangle, position)) {\n    // outside the bounds of the tiling scheme\n    return undefined;\n  }\n\n  const xTiles = this.getNumberOfXTilesAtLevel(level);\n  const yTiles = this.getNumberOfYTilesAtLevel(level);\n\n  const overallWidth =\n    this._rectangleNortheastInMeters.x - this._rectangleSouthwestInMeters.x;\n  const xTileWidth = overallWidth / xTiles;\n  const overallHeight =\n    this._rectangleNortheastInMeters.y - this._rectangleSouthwestInMeters.y;\n  const yTileHeight = overallHeight / yTiles;\n\n  const projection = this._projection;\n\n  const webMercatorPosition = projection.project(position);\n  const distanceFromWest =\n    webMercatorPosition.x - this._rectangleSouthwestInMeters.x;\n  const distanceFromNorth =\n    this._rectangleNortheastInMeters.y - webMercatorPosition.y;\n\n  let xTileCoordinate = (distanceFromWest / xTileWidth) | 0;\n  if (xTileCoordinate >= xTiles) {\n    xTileCoordinate = xTiles - 1;\n  }\n  let yTileCoordinate = (distanceFromNorth / yTileHeight) | 0;\n  if (yTileCoordinate >= yTiles) {\n    yTileCoordinate = yTiles - 1;\n  }\n\n  if (!defined(result)) {\n    return new Cartesian2(xTileCoordinate, yTileCoordinate);\n  }\n\n  result.x = xTileCoordinate;\n  result.y = yTileCoordinate;\n  return result;\n};\nexport default WebMercatorTilingScheme;\n","import WebGLConstants from \"./WebGLConstants.js\";\n\n/**\n * Winding order defines the order of vertices for a triangle to be considered front-facing.\n *\n * @enum {Number}\n */\nconst WindingOrder = {\n  /**\n   * Vertices are in clockwise order.\n   *\n   * @type {Number}\n   * @constant\n   */\n  CLOCKWISE: WebGLConstants.CW,\n\n  /**\n   * Vertices are in counter-clockwise order.\n   *\n   * @type {Number}\n   * @constant\n   */\n  COUNTER_CLOCKWISE: WebGLConstants.CCW,\n};\n\n/**\n * @private\n */\nWindingOrder.validate = function (windingOrder) {\n  return (\n    windingOrder === WindingOrder.CLOCKWISE ||\n    windingOrder === WindingOrder.COUNTER_CLOCKWISE\n  );\n};\n\nexport default Object.freeze(WindingOrder);\n","import defined from \"./defined.js\";\nimport IndexDatatype from \"./IndexDatatype.js\";\nimport PrimitiveType from \"./PrimitiveType.js\";\n\n/**\n * Functions for generating indices for model wireframes. The indices are\n * outputted as typed arrays, which can then be put into buffers for rendering.\n *\n * @namespace WireframeIndexGenerator\n * @private\n */\nconst WireframeIndexGenerator = {};\n\nfunction createWireframeFromTriangles(vertexCount) {\n  const wireframeIndices = IndexDatatype.createTypedArray(\n    vertexCount,\n    vertexCount * 2\n  );\n  const length = vertexCount;\n  let index = 0;\n  for (let i = 0; i < length; i += 3) {\n    wireframeIndices[index++] = i;\n    wireframeIndices[index++] = i + 1;\n    wireframeIndices[index++] = i + 1;\n    wireframeIndices[index++] = i + 2;\n    wireframeIndices[index++] = i + 2;\n    wireframeIndices[index++] = i;\n  }\n\n  return wireframeIndices;\n}\n\nfunction createWireframeFromTriangleIndices(vertexCount, originalIndices) {\n  const originalIndicesCount = originalIndices.length;\n  const wireframeIndices = IndexDatatype.createTypedArray(\n    vertexCount,\n    originalIndicesCount * 2\n  );\n  let index = 0;\n  for (let i = 0; i < originalIndicesCount; i += 3) {\n    const point0 = originalIndices[i];\n    const point1 = originalIndices[i + 1];\n    const point2 = originalIndices[i + 2];\n\n    wireframeIndices[index++] = point0;\n    wireframeIndices[index++] = point1;\n    wireframeIndices[index++] = point1;\n    wireframeIndices[index++] = point2;\n    wireframeIndices[index++] = point2;\n    wireframeIndices[index++] = point0;\n  }\n\n  return wireframeIndices;\n}\n\nfunction createWireframeFromTriangleStrip(vertexCount) {\n  const numberOfTriangles = vertexCount - 2;\n  const wireframeIndicesCount = 2 + numberOfTriangles * 4;\n  const wireframeIndices = IndexDatatype.createTypedArray(\n    vertexCount,\n    wireframeIndicesCount\n  );\n  let index = 0;\n\n  // Handle the first edge\n  wireframeIndices[index++] = 0;\n  wireframeIndices[index++] = 1;\n\n  // Add two edges for every triangle in the strip\n  for (let i = 0; i < numberOfTriangles; i++) {\n    wireframeIndices[index++] = i + 1;\n    wireframeIndices[index++] = i + 2;\n    wireframeIndices[index++] = i + 2;\n    wireframeIndices[index++] = i;\n  }\n\n  return wireframeIndices;\n}\n\nfunction createWireframeFromTriangleStripIndices(vertexCount, originalIndices) {\n  const originalIndicesCount = originalIndices.length;\n  const numberOfTriangles = originalIndicesCount - 2;\n  const wireframeIndicesCount = 2 + numberOfTriangles * 4;\n  const wireframeIndices = IndexDatatype.createTypedArray(\n    vertexCount,\n    wireframeIndicesCount\n  );\n  let index = 0;\n\n  // Handle the first edge\n  wireframeIndices[index++] = originalIndices[0];\n  wireframeIndices[index++] = originalIndices[1];\n\n  // Add two edges for every triangle in the strip\n  for (let i = 0; i < numberOfTriangles; i++) {\n    const point0 = originalIndices[i];\n    const point1 = originalIndices[i + 1];\n    const point2 = originalIndices[i + 2];\n\n    wireframeIndices[index++] = point1;\n    wireframeIndices[index++] = point2;\n    wireframeIndices[index++] = point2;\n    wireframeIndices[index++] = point0;\n  }\n\n  return wireframeIndices;\n}\n\nfunction createWireframeFromTriangleFan(vertexCount) {\n  const numberOfTriangles = vertexCount - 2;\n  const wireframeIndicesCount = 2 + numberOfTriangles * 4;\n  const wireframeIndices = IndexDatatype.createTypedArray(\n    vertexCount,\n    wireframeIndicesCount\n  );\n  let index = 0;\n\n  // Handle the first edge\n  wireframeIndices[index++] = 0;\n  wireframeIndices[index++] = 1;\n\n  // Add two edges for every triangle in the fan\n  for (let i = 0; i < numberOfTriangles; i++) {\n    wireframeIndices[index++] = i + 1;\n    wireframeIndices[index++] = i + 2;\n    wireframeIndices[index++] = i + 2;\n    wireframeIndices[index++] = 0;\n  }\n\n  return wireframeIndices;\n}\n\nfunction createWireframeFromTriangleFanIndices(vertexCount, originalIndices) {\n  const originalIndicesCount = originalIndices.length;\n  const numberOfTriangles = originalIndicesCount - 2;\n  const wireframeIndicesCount = 2 + numberOfTriangles * 4;\n  const wireframeIndices = IndexDatatype.createTypedArray(\n    vertexCount,\n    wireframeIndicesCount\n  );\n  let index = 0;\n\n  // Handle the first edge\n  const firstPoint = originalIndices[0];\n  wireframeIndices[index++] = firstPoint;\n  wireframeIndices[index++] = originalIndices[1];\n\n  // Add two edges for every triangle in the fan\n  for (let i = 0; i < numberOfTriangles; i++) {\n    const point1 = originalIndices[i + 1];\n    const point2 = originalIndices[i + 2];\n\n    wireframeIndices[index++] = point1;\n    wireframeIndices[index++] = point2;\n    wireframeIndices[index++] = point2;\n    wireframeIndices[index++] = firstPoint;\n  }\n\n  return wireframeIndices;\n}\n\n/**\n * Generates a wireframe index buffer for a primitive, either by reindexing the existing indices\n * or creating them from scratch if the model had none.\n *\n * @param {PrimitiveType} primitiveType The primitive type.\n * @param {Number} vertexCount The number of vertices in the primitive.\n * @param {Uint8Array|Uint16Array|Uint32Array} [originalIndices] A typed array containing the original indices of the primitive.\n *\n * @return {Uint16Array|Uint32Array} A typed array with the wireframe indices, or undefined if the primitive type does not use triangles.\n *\n * @private\n */\nWireframeIndexGenerator.createWireframeIndices = function (\n  primitiveType,\n  vertexCount,\n  originalIndices\n) {\n  const hasOriginalIndices = defined(originalIndices);\n  if (primitiveType === PrimitiveType.TRIANGLES) {\n    return hasOriginalIndices\n      ? createWireframeFromTriangleIndices(vertexCount, originalIndices)\n      : createWireframeFromTriangles(vertexCount);\n  }\n\n  if (primitiveType === PrimitiveType.TRIANGLE_STRIP) {\n    return hasOriginalIndices\n      ? createWireframeFromTriangleStripIndices(vertexCount, originalIndices)\n      : createWireframeFromTriangleStrip(vertexCount);\n  }\n\n  if (primitiveType === PrimitiveType.TRIANGLE_FAN) {\n    return hasOriginalIndices\n      ? createWireframeFromTriangleFanIndices(vertexCount, originalIndices)\n      : createWireframeFromTriangleFan(vertexCount);\n  }\n\n  return undefined;\n};\n\n/**\n * Gets the number of indices in the wireframe index buffer of a primitive type.\n *\n * @param {PrimitiveType} primitiveType The primitive type.\n * @param {Number} originalCount The original number of vertices or indices in the primitive.\n * @return {Number} The number of indices in the primitive's wireframe.\n *\n * @private\n */\nWireframeIndexGenerator.getWireframeIndicesCount = function (\n  primitiveType,\n  originalCount\n) {\n  // For TRIANGLES, the wireframe takes every triangle (i.e. three of the original\n  // indices) and turns it into lines. Each triangle has three lines, and each line\n  // requires two indices, so the final count is twice the original.\n  if (primitiveType === PrimitiveType.TRIANGLES) {\n    return originalCount * 2;\n  }\n\n  // For TRIANGLE_STRIP and TRIANGLE_FAN, the number of triangles in the primitive\n  // is equal to the total number of vertices minus two. This is because after the\n  // first edge is specified by the first two indices, every point afterwards\n  // contributes two more edges with two of the previous points, forming a new triangle.\n  // Each of these edges requires two indices, so each triangle in the primitive\n  // results in four indices in addition to the first two.\n  if (\n    primitiveType === PrimitiveType.TRIANGLE_STRIP ||\n    primitiveType === PrimitiveType.TRIANGLE_FAN\n  ) {\n    const numberOfTriangles = originalCount - 2;\n    return 2 + numberOfTriangles * 4;\n  }\n\n  return originalCount;\n};\n\nexport default WireframeIndexGenerator;\n","/**\n * @private\n */\nfunction appendForwardSlash(url) {\n  if (url.length === 0 || url[url.length - 1] !== \"/\") {\n    url = `${url}/`;\n  }\n  return url;\n}\nexport default appendForwardSlash;\n","import Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\n\n/**\n * Fill an array or a portion of an array with a given value.\n *\n * @param {Array} array The array to fill.\n * @param {*} value The value to fill the array with.\n * @param {Number} [start=0] The index to start filling at.\n * @param {Number} [end=array.length] The index to end stop at.\n *\n * @returns {Array} The resulting array.\n * @private\n */\nfunction arrayFill(array, value, start, end) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"array\", array);\n  Check.defined(\"value\", value);\n  if (defined(start)) {\n    Check.typeOf.number(\"start\", start);\n  }\n  if (defined(end)) {\n    Check.typeOf.number(\"end\", end);\n  }\n  //>>includeEnd('debug');\n\n  if (typeof array.fill === \"function\") {\n    return array.fill(value, start, end);\n  }\n\n  const length = array.length >>> 0;\n  const relativeStart = defaultValue(start, 0);\n  // If negative, find wrap around position\n  let k =\n    relativeStart < 0\n      ? Math.max(length + relativeStart, 0)\n      : Math.min(relativeStart, length);\n  const relativeEnd = defaultValue(end, length);\n  // If negative, find wrap around position\n  const last =\n    relativeEnd < 0\n      ? Math.max(length + relativeEnd, 0)\n      : Math.min(relativeEnd, length);\n\n  // Fill array accordingly\n  while (k < last) {\n    array[k] = value;\n    k++;\n  }\n  return array;\n}\nexport default arrayFill;\n","import Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport CesiumMath from \"./Math.js\";\n\nconst removeDuplicatesEpsilon = CesiumMath.EPSILON10;\n\n/**\n * Removes adjacent duplicate values in an array of values.\n *\n * @param {Array.<*>} [values] The array of values.\n * @param {Function} equalsEpsilon Function to compare values with an epsilon. Boolean equalsEpsilon(left, right, epsilon).\n * @param {Boolean} [wrapAround=false] Compare the last value in the array against the first value. If they are equal, the last value is removed.\n * @param {Array.<Number>} [removedIndices=undefined] Store the indices that correspond to the duplicate items removed from the array, if there were any.\n * @returns {Array.<*>|undefined} A new array of values with no adjacent duplicate values or the input array if no duplicates were found.\n *\n * @example\n * // Returns [(1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0, 3.0, 3.0), (1.0, 1.0, 1.0)]\n * const values = [\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\n *     new Cesium.Cartesian3(2.0, 2.0, 2.0),\n *     new Cesium.Cartesian3(3.0, 3.0, 3.0),\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0)];\n * const nonDuplicatevalues = Cesium.PolylinePipeline.removeDuplicates(values, Cartesian3.equalsEpsilon);\n *\n * @example\n * // Returns [(1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0, 3.0, 3.0)]\n * const values = [\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\n *     new Cesium.Cartesian3(2.0, 2.0, 2.0),\n *     new Cesium.Cartesian3(3.0, 3.0, 3.0),\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0)];\n * const nonDuplicatevalues = Cesium.PolylinePipeline.removeDuplicates(values, Cartesian3.equalsEpsilon, true);\n *\n * @example\n * // Returns [(1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0, 3.0, 3.0)]\n * // removedIndices will be equal to [1, 3, 5]\n * const values = [\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0),\n *     new Cesium.Cartesian3(2.0, 2.0, 2.0),\n *     new Cesium.Cartesian3(2.0, 2.0, 2.0),\n *     new Cesium.Cartesian3(3.0, 3.0, 3.0),\n *     new Cesium.Cartesian3(1.0, 1.0, 1.0)];\n * const nonDuplicatevalues = Cesium.PolylinePipeline.removeDuplicates(values, Cartesian3.equalsEpsilon, true);\n * @private\n */\nfunction arrayRemoveDuplicates(\n  values,\n  equalsEpsilon,\n  wrapAround,\n  removedIndices\n) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"equalsEpsilon\", equalsEpsilon);\n  //>>includeEnd('debug');\n\n  if (!defined(values)) {\n    return undefined;\n  }\n\n  wrapAround = defaultValue(wrapAround, false);\n  const storeRemovedIndices = defined(removedIndices);\n\n  const length = values.length;\n  if (length < 2) {\n    return values;\n  }\n\n  let i;\n  let v0 = values[0];\n  let v1;\n\n  // We only want to create a new array if there are duplicates in the array.\n  // As such, cleanedValues is undefined until it encounters the first duplicate, if it exists.\n  let cleanedValues;\n  let lastCleanIndex = 0;\n\n  // removedIndexLCI keeps track of where lastCleanIndex would be if it were sorted into the removedIndices array.\n  // In case of arrays such as [A, B, C, ..., A, A, A], removedIndices will not be sorted properly without this.\n  let removedIndexLCI = -1;\n\n  for (i = 1; i < length; ++i) {\n    v1 = values[i];\n    if (equalsEpsilon(v0, v1, removeDuplicatesEpsilon)) {\n      if (!defined(cleanedValues)) {\n        cleanedValues = values.slice(0, i);\n        lastCleanIndex = i - 1;\n        removedIndexLCI = 0;\n      }\n      if (storeRemovedIndices) {\n        removedIndices.push(i);\n      }\n    } else {\n      if (defined(cleanedValues)) {\n        cleanedValues.push(v1);\n        lastCleanIndex = i;\n        if (storeRemovedIndices) {\n          removedIndexLCI = removedIndices.length;\n        }\n      }\n      v0 = v1;\n    }\n  }\n\n  if (\n    wrapAround &&\n    equalsEpsilon(values[0], values[length - 1], removeDuplicatesEpsilon)\n  ) {\n    if (storeRemovedIndices) {\n      if (defined(cleanedValues)) {\n        removedIndices.splice(removedIndexLCI, 0, lastCleanIndex);\n      } else {\n        removedIndices.push(length - 1);\n      }\n    }\n\n    if (defined(cleanedValues)) {\n      cleanedValues.length -= 1;\n    } else {\n      cleanedValues = values.slice(0, -1);\n    }\n  }\n\n  return defined(cleanedValues) ? cleanedValues : values;\n}\n\nexport default arrayRemoveDuplicates;\n","import Check from \"./Check.js\";\nimport defined from \"./defined.js\";\nimport FeatureDetection from \"./FeatureDetection.js\";\n\n/**\n * Create a shallow copy of an array from begin to end.\n *\n * @param {Array} array The array to fill.\n * @param {Number} [begin=0] The index to start at.\n * @param {Number} [end=array.length] The index to end at which is not included.\n *\n * @returns {Array} The resulting array.\n * @private\n */\nfunction arraySlice(array, begin, end) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"array\", array);\n  if (defined(begin)) {\n    Check.typeOf.number(\"begin\", begin);\n  }\n  if (defined(end)) {\n    Check.typeOf.number(\"end\", end);\n  }\n  //>>includeEnd('debug');\n\n  if (typeof array.slice === \"function\") {\n    return array.slice(begin, end);\n  }\n\n  let copy = Array.prototype.slice.call(array, begin, end);\n  const typedArrayTypes = FeatureDetection.typedArrayTypes;\n  const length = typedArrayTypes.length;\n  for (let i = 0; i < length; ++i) {\n    if (array instanceof typedArrayTypes[i]) {\n      copy = new typedArrayTypes[i](copy);\n      break;\n    }\n  }\n\n  return copy;\n}\nexport default arraySlice;\n","import Cartesian2 from \"./Cartesian2.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport Check from \"./Check.js\";\nimport defined from \"./defined.js\";\nimport CesiumMath from \"./Math.js\";\n\nconst scratchCartesian1 = new Cartesian3();\nconst scratchCartesian2 = new Cartesian3();\nconst scratchCartesian3 = new Cartesian3();\n\n/**\n * Computes the barycentric coordinates for a point with respect to a triangle.\n *\n * @function\n *\n * @param {Cartesian2|Cartesian3} point The point to test.\n * @param {Cartesian2|Cartesian3} p0 The first point of the triangle, corresponding to the barycentric x-axis.\n * @param {Cartesian2|Cartesian3} p1 The second point of the triangle, corresponding to the barycentric y-axis.\n * @param {Cartesian2|Cartesian3} p2 The third point of the triangle, corresponding to the barycentric z-axis.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3|undefined} The modified result parameter or a new Cartesian3 instance if one was not provided. If the triangle is degenerate the function will return undefined.\n *\n * @example\n * // Returns Cartesian3.UNIT_X\n * const p = new Cesium.Cartesian3(-1.0, 0.0, 0.0);\n * const b = Cesium.barycentricCoordinates(p,\n *   new Cesium.Cartesian3(-1.0, 0.0, 0.0),\n *   new Cesium.Cartesian3( 1.0, 0.0, 0.0),\n *   new Cesium.Cartesian3( 0.0, 1.0, 1.0));\n */\nfunction barycentricCoordinates(point, p0, p1, p2, result) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"point\", point);\n  Check.defined(\"p0\", p0);\n  Check.defined(\"p1\", p1);\n  Check.defined(\"p2\", p2);\n  //>>includeEnd('debug');\n\n  if (!defined(result)) {\n    result = new Cartesian3();\n  }\n\n  // Implementation based on http://www.blackpawn.com/texts/pointinpoly/default.html.\n  let v0;\n  let v1;\n  let v2;\n  let dot00;\n  let dot01;\n  let dot02;\n  let dot11;\n  let dot12;\n\n  if (!defined(p0.z)) {\n    if (Cartesian2.equalsEpsilon(point, p0, CesiumMath.EPSILON14)) {\n      return Cartesian3.clone(Cartesian3.UNIT_X, result);\n    }\n    if (Cartesian2.equalsEpsilon(point, p1, CesiumMath.EPSILON14)) {\n      return Cartesian3.clone(Cartesian3.UNIT_Y, result);\n    }\n    if (Cartesian2.equalsEpsilon(point, p2, CesiumMath.EPSILON14)) {\n      return Cartesian3.clone(Cartesian3.UNIT_Z, result);\n    }\n\n    v0 = Cartesian2.subtract(p1, p0, scratchCartesian1);\n    v1 = Cartesian2.subtract(p2, p0, scratchCartesian2);\n    v2 = Cartesian2.subtract(point, p0, scratchCartesian3);\n\n    dot00 = Cartesian2.dot(v0, v0);\n    dot01 = Cartesian2.dot(v0, v1);\n    dot02 = Cartesian2.dot(v0, v2);\n    dot11 = Cartesian2.dot(v1, v1);\n    dot12 = Cartesian2.dot(v1, v2);\n  } else {\n    if (Cartesian3.equalsEpsilon(point, p0, CesiumMath.EPSILON14)) {\n      return Cartesian3.clone(Cartesian3.UNIT_X, result);\n    }\n    if (Cartesian3.equalsEpsilon(point, p1, CesiumMath.EPSILON14)) {\n      return Cartesian3.clone(Cartesian3.UNIT_Y, result);\n    }\n    if (Cartesian3.equalsEpsilon(point, p2, CesiumMath.EPSILON14)) {\n      return Cartesian3.clone(Cartesian3.UNIT_Z, result);\n    }\n\n    v0 = Cartesian3.subtract(p1, p0, scratchCartesian1);\n    v1 = Cartesian3.subtract(p2, p0, scratchCartesian2);\n    v2 = Cartesian3.subtract(point, p0, scratchCartesian3);\n\n    dot00 = Cartesian3.dot(v0, v0);\n    dot01 = Cartesian3.dot(v0, v1);\n    dot02 = Cartesian3.dot(v0, v2);\n    dot11 = Cartesian3.dot(v1, v1);\n    dot12 = Cartesian3.dot(v1, v2);\n  }\n\n  result.y = dot11 * dot02 - dot01 * dot12;\n  result.z = dot00 * dot12 - dot01 * dot02;\n  const q = dot00 * dot11 - dot01 * dot01;\n\n  // Triangle is degenerate\n  if (q === 0) {\n    return undefined;\n  }\n\n  result.y /= q;\n  result.z /= q;\n  result.x = 1.0 - result.y - result.z;\n  return result;\n}\nexport default barycentricCoordinates;\n","import Check from \"./Check.js\";\n\n/**\n * Finds an item in a sorted array.\n *\n * @function\n * @param {Array} array The sorted array to search.\n * @param {*} itemToFind The item to find in the array.\n * @param {binarySearchComparator} comparator The function to use to compare the item to\n *        elements in the array.\n * @returns {Number} The index of <code>itemToFind</code> in the array, if it exists.  If <code>itemToFind</code>\n *        does not exist, the return value is a negative number which is the bitwise complement (~)\n *        of the index before which the itemToFind should be inserted in order to maintain the\n *        sorted order of the array.\n *\n * @example\n * // Create a comparator function to search through an array of numbers.\n * function comparator(a, b) {\n *     return a - b;\n * };\n * const numbers = [0, 2, 4, 6, 8];\n * const index = Cesium.binarySearch(numbers, 6, comparator); // 3\n */\nfunction binarySearch(array, itemToFind, comparator) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"array\", array);\n  Check.defined(\"itemToFind\", itemToFind);\n  Check.defined(\"comparator\", comparator);\n  //>>includeEnd('debug');\n\n  let low = 0;\n  let high = array.length - 1;\n  let i;\n  let comparison;\n\n  while (low <= high) {\n    i = ~~((low + high) / 2);\n    comparison = comparator(array[i], itemToFind);\n    if (comparison < 0) {\n      low = i + 1;\n      continue;\n    }\n    if (comparison > 0) {\n      high = i - 1;\n      continue;\n    }\n    return i;\n  }\n  return ~(high + 1);\n}\n\n/**\n * A function used to compare two items while performing a binary search.\n * @callback binarySearchComparator\n *\n * @param {*} a An item in the array.\n * @param {*} b The item being searched for.\n * @returns {Number} Returns a negative value if <code>a</code> is less than <code>b</code>,\n *          a positive value if <code>a</code> is greater than <code>b</code>, or\n *          0 if <code>a</code> is equal to <code>b</code>.\n *\n * @example\n * function compareNumbers(a, b) {\n *     return a - b;\n * }\n */\nexport default binarySearch;\n","import defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport getAbsoluteUri from \"./getAbsoluteUri.js\";\nimport Resource from \"./Resource.js\";\n\n/*global CESIUM_BASE_URL,define,require*/\n\nconst cesiumScriptRegex = /((?:.*\\/)|^)Cesium\\.js(?:\\?|\\#|$)/;\nfunction getBaseUrlFromCesiumScript() {\n  const scripts = document.getElementsByTagName(\"script\");\n  for (let i = 0, len = scripts.length; i < len; ++i) {\n    const src = scripts[i].getAttribute(\"src\");\n    const result = cesiumScriptRegex.exec(src);\n    if (result !== null) {\n      return result[1];\n    }\n  }\n  return undefined;\n}\n\nlet a;\nfunction tryMakeAbsolute(url) {\n  if (typeof document === \"undefined\") {\n    //Node.js and Web Workers. In both cases, the URL will already be absolute.\n    return url;\n  }\n\n  if (!defined(a)) {\n    a = document.createElement(\"a\");\n  }\n  a.href = url;\n\n  // IE only absolutizes href on get, not set\n  // eslint-disable-next-line no-self-assign\n  a.href = a.href;\n  return a.href;\n}\n\nlet baseResource;\nfunction getCesiumBaseUrl() {\n  if (defined(baseResource)) {\n    return baseResource;\n  }\n\n  let baseUrlString;\n  if (typeof CESIUM_BASE_URL !== \"undefined\") {\n    baseUrlString = CESIUM_BASE_URL;\n  } else if (\n    typeof define === \"object\" &&\n    defined(define.amd) &&\n    !define.amd.toUrlUndefined &&\n    defined(require.toUrl)\n  ) {\n    baseUrlString = getAbsoluteUri(\n      \"..\",\n      buildModuleUrl(\"Core/buildModuleUrl.js\")\n    );\n  } else {\n    baseUrlString = getBaseUrlFromCesiumScript();\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(baseUrlString)) {\n    throw new DeveloperError(\n      \"Unable to determine Cesium base URL automatically, try defining a global variable called CESIUM_BASE_URL.\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  baseResource = new Resource({\n    url: tryMakeAbsolute(baseUrlString),\n  });\n  baseResource.appendForwardSlash();\n\n  return baseResource;\n}\n\nfunction buildModuleUrlFromRequireToUrl(moduleID) {\n  //moduleID will be non-relative, so require it relative to this module, in Core.\n  return tryMakeAbsolute(require.toUrl(`../${moduleID}`));\n}\n\nfunction buildModuleUrlFromBaseUrl(moduleID) {\n  const resource = getCesiumBaseUrl().getDerivedResource({\n    url: moduleID,\n  });\n  return resource.url;\n}\n\nlet implementation;\n\n/**\n * Given a relative URL under the Cesium base URL, returns an absolute URL.\n * @function\n *\n * @param {String} relativeUrl The relative path.\n * @returns {String} The absolutely URL representation of the provided path.\n *\n * @example\n * const viewer = new Cesium.Viewer(\"cesiumContainer\", {\n *   imageryProvider: new Cesium.TileMapServiceImageryProvider({\n *   url: Cesium.buildModuleUrl(\"Assets/Textures/NaturalEarthII\"),\n *   }),\n *   baseLayerPicker: false,\n * });\n */\nfunction buildModuleUrl(relativeUrl) {\n  if (!defined(implementation)) {\n    //select implementation\n    if (\n      typeof define === \"object\" &&\n      defined(define.amd) &&\n      !define.amd.toUrlUndefined &&\n      defined(require.toUrl)\n    ) {\n      implementation = buildModuleUrlFromRequireToUrl;\n    } else {\n      implementation = buildModuleUrlFromBaseUrl;\n    }\n  }\n\n  const url = implementation(relativeUrl);\n  return url;\n}\n\n// exposed for testing\nbuildModuleUrl._cesiumScriptRegex = cesiumScriptRegex;\nbuildModuleUrl._buildModuleUrlFromBaseUrl = buildModuleUrlFromBaseUrl;\nbuildModuleUrl._clearBaseResource = function () {\n  baseResource = undefined;\n};\n\n/**\n * Sets the base URL for resolving modules.\n * @param {String} value The new base URL.\n */\nbuildModuleUrl.setBaseUrl = function (value) {\n  baseResource = Resource.DEFAULT.getDerivedResource({\n    url: value,\n  });\n};\n\n/**\n * Gets the base URL for resolving modules.\n *\n * @function\n * @returns {String} The configured base URL\n */\nbuildModuleUrl.getCesiumBaseUrl = getCesiumBaseUrl;\n\nexport default buildModuleUrl;\n","import defined from \"./defined.js\";\n\nlet implementation;\nif (typeof cancelAnimationFrame !== \"undefined\") {\n  implementation = cancelAnimationFrame;\n}\n\n(function () {\n  // look for vendor prefixed function\n  if (!defined(implementation) && typeof window !== \"undefined\") {\n    const vendors = [\"webkit\", \"moz\", \"ms\", \"o\"];\n    let i = 0;\n    const len = vendors.length;\n    while (i < len && !defined(implementation)) {\n      implementation = window[`${vendors[i]}CancelAnimationFrame`];\n      if (!defined(implementation)) {\n        implementation = window[`${vendors[i]}CancelRequestAnimationFrame`];\n      }\n      ++i;\n    }\n  }\n\n  // otherwise, assume requestAnimationFrame is based on setTimeout, so use clearTimeout\n  if (!defined(implementation)) {\n    implementation = clearTimeout;\n  }\n})();\n\n/**\n * A browser-independent function to cancel an animation frame requested using {@link requestAnimationFrame}.\n *\n * @function cancelAnimationFrame\n *\n * @param {Number} requestID The value returned by {@link requestAnimationFrame}.\n *\n * @see {@link http://www.w3.org/TR/animation-timing/#the-WindowAnimationTiming-interface|The WindowAnimationTiming interface}\n */\nfunction cancelAnimationFramePolyfill(requestID) {\n  // we need this extra wrapper function because the native cancelAnimationFrame\n  // functions must be invoked on the global scope (window), which is not the case\n  // if invoked as Cesium.cancelAnimationFrame(requestID)\n  implementation(requestID);\n}\nexport default cancelAnimationFramePolyfill;\n","import defaultValue from \"./defaultValue.js\";\n\n/**\n * Clones an object, returning a new object containing the same properties.\n *\n * @function\n *\n * @param {Object} object The object to clone.\n * @param {Boolean} [deep=false] If true, all properties will be deep cloned recursively.\n * @returns {Object} The cloned object.\n */\nfunction clone(object, deep) {\n  if (object === null || typeof object !== \"object\") {\n    return object;\n  }\n\n  deep = defaultValue(deep, false);\n\n  const result = new object.constructor();\n  for (const propertyName in object) {\n    if (object.hasOwnProperty(propertyName)) {\n      let value = object[propertyName];\n      if (deep) {\n        value = clone(value, deep);\n      }\n      result[propertyName] = value;\n    }\n  }\n\n  return result;\n}\nexport default clone;\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\n\n/**\n * Merges two objects, copying their properties onto a new combined object. When two objects have the same\n * property, the value of the property on the first object is used.  If either object is undefined,\n * it will be treated as an empty object.\n *\n * @example\n * const object1 = {\n *     propOne : 1,\n *     propTwo : {\n *         value1 : 10\n *     }\n * }\n * const object2 = {\n *     propTwo : 2\n * }\n * const final = Cesium.combine(object1, object2);\n *\n * // final === {\n * //     propOne : 1,\n * //     propTwo : {\n * //         value1 : 10\n * //     }\n * // }\n *\n * @param {Object} [object1] The first object to merge.\n * @param {Object} [object2] The second object to merge.\n * @param {Boolean} [deep=false] Perform a recursive merge.\n * @returns {Object} The combined object containing all properties from both objects.\n *\n * @function\n */\nfunction combine(object1, object2, deep) {\n  deep = defaultValue(deep, false);\n\n  const result = {};\n\n  const object1Defined = defined(object1);\n  const object2Defined = defined(object2);\n  let property;\n  let object1Value;\n  let object2Value;\n  if (object1Defined) {\n    for (property in object1) {\n      if (object1.hasOwnProperty(property)) {\n        object1Value = object1[property];\n        if (\n          object2Defined &&\n          deep &&\n          typeof object1Value === \"object\" &&\n          object2.hasOwnProperty(property)\n        ) {\n          object2Value = object2[property];\n          if (typeof object2Value === \"object\") {\n            result[property] = combine(object1Value, object2Value, deep);\n          } else {\n            result[property] = object1Value;\n          }\n        } else {\n          result[property] = object1Value;\n        }\n      }\n    }\n  }\n  if (object2Defined) {\n    for (property in object2) {\n      if (\n        object2.hasOwnProperty(property) &&\n        !result.hasOwnProperty(property)\n      ) {\n        object2Value = object2[property];\n        result[property] = object2Value;\n      }\n    }\n  }\n  return result;\n}\nexport default combine;\n","/**\n * Creates a Globally unique identifier (GUID) string.  A GUID is 128 bits long, and can guarantee uniqueness across space and time.\n *\n * @function\n *\n * @returns {String}\n *\n *\n * @example\n * this.guid = Cesium.createGuid();\n *\n * @see {@link http://www.ietf.org/rfc/rfc4122.txt|RFC 4122 A Universally Unique IDentifier (UUID) URN Namespace}\n */\nfunction createGuid() {\n  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0;\n    const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\nexport default createGuid;\n","import CesiumTerrainProvider from \"./CesiumTerrainProvider.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport IonResource from \"./IonResource.js\";\n\n/**\n * Creates a {@link CesiumTerrainProvider} instance for the {@link https://cesium.com/content/#cesium-world-terrain|Cesium World Terrain}.\n *\n * @function\n *\n * @param {Object} [options] Object with the following properties:\n * @param {Boolean} [options.requestVertexNormals=false] Flag that indicates if the client should request additional lighting information from the server if available.\n * @param {Boolean} [options.requestWaterMask=false] Flag that indicates if the client should request per tile water masks from the server if available.\n * @returns {CesiumTerrainProvider}\n *\n * @see Ion\n *\n * @example\n * // Create Cesium World Terrain with default settings\n * const viewer = new Cesium.Viewer('cesiumContainer', {\n *     terrainProvider : Cesium.createWorldTerrain();\n * });\n *\n * @example\n * // Create Cesium World Terrain with water and normals.\n * const viewer1 = new Cesium.Viewer('cesiumContainer', {\n *     terrainProvider : Cesium.createWorldTerrain({\n *         requestWaterMask : true,\n *         requestVertexNormals : true\n *     });\n * });\n *\n */\nfunction createWorldTerrain(options) {\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  return new CesiumTerrainProvider({\n    url: IonResource.fromAssetId(1),\n    requestVertexNormals: defaultValue(options.requestVertexNormals, false),\n    requestWaterMask: defaultValue(options.requestWaterMask, false),\n  });\n}\nexport default createWorldTerrain;\n","import Check from \"./Check.js\";\nimport RuntimeError from \"./RuntimeError.js\";\n\nconst compressedMagic = 0x7468dead;\nconst compressedMagicSwap = 0xadde6874;\n\n/**\n * Decodes data that is received from the Google Earth Enterprise server.\n *\n * @param {ArrayBuffer} key The key used during decoding.\n * @param {ArrayBuffer} data The data to be decoded.\n *\n * @private\n */\nfunction decodeGoogleEarthEnterpriseData(key, data) {\n  if (decodeGoogleEarthEnterpriseData.passThroughDataForTesting) {\n    return data;\n  }\n\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"key\", key);\n  Check.typeOf.object(\"data\", data);\n  //>>includeEnd('debug');\n\n  const keyLength = key.byteLength;\n  if (keyLength === 0 || keyLength % 4 !== 0) {\n    throw new RuntimeError(\n      \"The length of key must be greater than 0 and a multiple of 4.\"\n    );\n  }\n\n  const dataView = new DataView(data);\n  const magic = dataView.getUint32(0, true);\n  if (magic === compressedMagic || magic === compressedMagicSwap) {\n    // Occasionally packets don't come back encoded, so just return\n    return data;\n  }\n\n  const keyView = new DataView(key);\n\n  let dp = 0;\n  const dpend = data.byteLength;\n  const dpend64 = dpend - (dpend % 8);\n  const kpend = keyLength;\n  let kp;\n  let off = 8;\n\n  // This algorithm is intentionally asymmetric to make it more difficult to\n  // guess. Security through obscurity. :-(\n\n  // while we have a full uint64 (8 bytes) left to do\n  // assumes buffer is 64bit aligned (or processor doesn't care)\n  while (dp < dpend64) {\n    // rotate the key each time through by using the offets 16,0,8,16,0,8,...\n    off = (off + 8) % 24;\n    kp = off;\n\n    // run through one key length xor'ing one uint64 at a time\n    // then drop out to rotate the key for the next bit\n    while (dp < dpend64 && kp < kpend) {\n      dataView.setUint32(\n        dp,\n        dataView.getUint32(dp, true) ^ keyView.getUint32(kp, true),\n        true\n      );\n      dataView.setUint32(\n        dp + 4,\n        dataView.getUint32(dp + 4, true) ^ keyView.getUint32(kp + 4, true),\n        true\n      );\n      dp += 8;\n      kp += 24;\n    }\n  }\n\n  // now the remaining 1 to 7 bytes\n  if (dp < dpend) {\n    if (kp >= kpend) {\n      // rotate the key one last time (if necessary)\n      off = (off + 8) % 24;\n      kp = off;\n    }\n\n    while (dp < dpend) {\n      dataView.setUint8(dp, dataView.getUint8(dp) ^ keyView.getUint8(kp));\n      dp++;\n      kp++;\n    }\n  }\n}\n\ndecodeGoogleEarthEnterpriseData.passThroughDataForTesting = false;\nexport default decodeGoogleEarthEnterpriseData;\n","import AttributeCompression from \"./AttributeCompression.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport Cartographic from \"./Cartographic.js\";\nimport CesiumMath from \"./Math.js\";\n\nconst maxShort = 32767;\n\nconst scratchBVCartographic = new Cartographic();\nconst scratchEncodedPosition = new Cartesian3();\n\nfunction decodeVectorPolylinePositions(\n  positions,\n  rectangle,\n  minimumHeight,\n  maximumHeight,\n  ellipsoid\n) {\n  const positionsLength = positions.length / 3;\n  const uBuffer = positions.subarray(0, positionsLength);\n  const vBuffer = positions.subarray(positionsLength, 2 * positionsLength);\n  const heightBuffer = positions.subarray(\n    2 * positionsLength,\n    3 * positionsLength\n  );\n  AttributeCompression.zigZagDeltaDecode(uBuffer, vBuffer, heightBuffer);\n\n  const decoded = new Float64Array(positions.length);\n  for (let i = 0; i < positionsLength; ++i) {\n    const u = uBuffer[i];\n    const v = vBuffer[i];\n    const h = heightBuffer[i];\n\n    const lon = CesiumMath.lerp(rectangle.west, rectangle.east, u / maxShort);\n    const lat = CesiumMath.lerp(rectangle.south, rectangle.north, v / maxShort);\n    const alt = CesiumMath.lerp(minimumHeight, maximumHeight, h / maxShort);\n\n    const cartographic = Cartographic.fromRadians(\n      lon,\n      lat,\n      alt,\n      scratchBVCartographic\n    );\n    const decodedPosition = ellipsoid.cartographicToCartesian(\n      cartographic,\n      scratchEncodedPosition\n    );\n    Cartesian3.pack(decodedPosition, decoded, i * 3);\n  }\n  return decoded;\n}\nexport default decodeVectorPolylinePositions;\n","/**\n * Returns the first parameter if not undefined, otherwise the second parameter.\n * Useful for setting a default value for a parameter.\n *\n * @function\n *\n * @param {*} a\n * @param {*} b\n * @returns {*} Returns the first parameter if not undefined, otherwise the second parameter.\n *\n * @example\n * param = Cesium.defaultValue(param, 'default');\n */\nfunction defaultValue(a, b) {\n  if (a !== undefined && a !== null) {\n    return a;\n  }\n  return b;\n}\n\n/**\n * A frozen empty object that can be used as the default value for options passed as\n * an object literal.\n * @type {Object}\n * @memberof defaultValue\n */\ndefaultValue.EMPTY_OBJECT = Object.freeze({});\n\nexport default defaultValue;\n","/**\n * A function used to resolve a promise upon completion .\n * @callback defer.resolve\n *\n * @param {*} value The resulting value.\n */\n\n/**\n * A function used to reject a promise upon failure.\n * @callback defer.reject\n *\n * @param {*} error The error.\n */\n\n/**\n * An object which contains a promise object, and functions to resolve or reject the promise.\n *\n * @typedef {Object} defer.deferred\n * @property {defer.resolve} resolve Resolves the promise when called.\n * @property {defer.reject} reject Rejects the promise when called.\n * @property {Promise} promise Promise object.\n */\n\n/**\n * Creates a deferred object, containing a promise object, and functions to resolve or reject the promise.\n * @returns {defer.deferred}\n * @private\n */\nfunction defer() {\n  let resolve;\n  let reject;\n  const promise = new Promise(function (res, rej) {\n    resolve = res;\n    reject = rej;\n  });\n\n  return {\n    resolve: resolve,\n    reject: reject,\n    promise: promise,\n  };\n}\n\nexport default defer;\n","/**\n * @function\n *\n * @param {*} value The object.\n * @returns {Boolean} Returns true if the object is defined, returns false otherwise.\n *\n * @example\n * if (Cesium.defined(positions)) {\n *      doSomething();\n * } else {\n *      doSomethingElse();\n * }\n */\nfunction defined(value) {\n  return value !== undefined && value !== null;\n}\nexport default defined;\n","import defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport oneTimeWarning from \"./oneTimeWarning.js\";\n\n/**\n * Logs a deprecation message to the console.  Use this function instead of\n * <code>console.log</code> directly since this does not log duplicate messages\n * unless it is called from multiple workers.\n *\n * @function deprecationWarning\n *\n * @param {String} identifier The unique identifier for this deprecated API.\n * @param {String} message The message to log to the console.\n *\n * @example\n * // Deprecated function or class\n * function Foo() {\n *    deprecationWarning('Foo', 'Foo was deprecated in Cesium 1.01.  It will be removed in 1.03.  Use newFoo instead.');\n *    // ...\n * }\n *\n * // Deprecated function\n * Bar.prototype.func = function() {\n *    deprecationWarning('Bar.func', 'Bar.func() was deprecated in Cesium 1.01.  It will be removed in 1.03.  Use Bar.newFunc() instead.');\n *    // ...\n * };\n *\n * // Deprecated property\n * Object.defineProperties(Bar.prototype, {\n *     prop : {\n *         get : function() {\n *             deprecationWarning('Bar.prop', 'Bar.prop was deprecated in Cesium 1.01.  It will be removed in 1.03.  Use Bar.newProp instead.');\n *             // ...\n *         },\n *         set : function(value) {\n *             deprecationWarning('Bar.prop', 'Bar.prop was deprecated in Cesium 1.01.  It will be removed in 1.03.  Use Bar.newProp instead.');\n *             // ...\n *         }\n *     }\n * });\n *\n * @private\n */\nfunction deprecationWarning(identifier, message) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(identifier) || !defined(message)) {\n    throw new DeveloperError(\"identifier and message are required.\");\n  }\n  //>>includeEnd('debug');\n\n  oneTimeWarning(identifier, message);\n}\nexport default deprecationWarning;\n","import defaultValue from \"./defaultValue.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\nfunction returnTrue() {\n  return true;\n}\n\n/**\n * Destroys an object.  Each of the object's functions, including functions in its prototype,\n * is replaced with a function that throws a {@link DeveloperError}, except for the object's\n * <code>isDestroyed</code> function, which is set to a function that returns <code>true</code>.\n * The object's properties are removed with <code>delete</code>.\n * <br /><br />\n * This function is used by objects that hold native resources, e.g., WebGL resources, which\n * need to be explicitly released.  Client code calls an object's <code>destroy</code> function,\n * which then releases the native resource and calls <code>destroyObject</code> to put itself\n * in a destroyed state.\n *\n * @function\n *\n * @param {Object} object The object to destroy.\n * @param {String} [message] The message to include in the exception that is thrown if\n *                           a destroyed object's function is called.\n *\n *\n * @example\n * // How a texture would destroy itself.\n * this.destroy = function () {\n *     _gl.deleteTexture(_texture);\n *     return Cesium.destroyObject(this);\n * };\n *\n * @see DeveloperError\n */\nfunction destroyObject(object, message) {\n  message = defaultValue(\n    message,\n    \"This object was destroyed, i.e., destroy() was called.\"\n  );\n\n  function throwOnDestroyed() {\n    //>>includeStart('debug', pragmas.debug);\n    throw new DeveloperError(message);\n    //>>includeEnd('debug');\n  }\n\n  for (const key in object) {\n    if (typeof object[key] === \"function\") {\n      object[key] = throwOnDestroyed;\n    }\n  }\n\n  object.isDestroyed = returnTrue;\n\n  return undefined;\n}\nexport default destroyObject;\n","import defined from \"./defined.js\";\n\n/**\n * Formats an error object into a String.  If available, uses name, message, and stack\n * properties, otherwise, falls back on toString().\n *\n * @function\n *\n * @param {*} object The item to find in the array.\n * @returns {String} A string containing the formatted error.\n */\nfunction formatError(object) {\n  let result;\n\n  const name = object.name;\n  const message = object.message;\n  if (defined(name) && defined(message)) {\n    result = `${name}: ${message}`;\n  } else {\n    result = object.toString();\n  }\n\n  const stack = object.stack;\n  if (defined(stack)) {\n    result += `\\n${stack}`;\n  }\n\n  return result;\n}\nexport default formatError;\n","import Uri from \"../ThirdParty/Uri.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Given a relative Uri and a base Uri, returns the absolute Uri of the relative Uri.\n * @function\n *\n * @param {String} relative The relative Uri.\n * @param {String} [base] The base Uri.\n * @returns {String} The absolute Uri of the given relative Uri.\n *\n * @example\n * //absolute Uri will be \"https://test.com/awesome.png\";\n * const absoluteUri = Cesium.getAbsoluteUri('awesome.png', 'https://test.com');\n */\nfunction getAbsoluteUri(relative, base) {\n  let documentObject;\n  if (typeof document !== \"undefined\") {\n    documentObject = document;\n  }\n\n  return getAbsoluteUri._implementation(relative, base, documentObject);\n}\n\ngetAbsoluteUri._implementation = function (relative, base, documentObject) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(relative)) {\n    throw new DeveloperError(\"relative uri is required.\");\n  }\n  //>>includeEnd('debug');\n\n  if (!defined(base)) {\n    if (typeof documentObject === \"undefined\") {\n      return relative;\n    }\n    base = defaultValue(documentObject.baseURI, documentObject.location.href);\n  }\n\n  const relativeUri = new Uri(relative);\n  if (relativeUri.scheme() !== \"\") {\n    return relativeUri.toString();\n  }\n  return relativeUri.absoluteTo(base).toString();\n};\nexport default getAbsoluteUri;\n","import Uri from \"../ThirdParty/Uri.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Given a URI, returns the base path of the URI.\n * @function\n *\n * @param {String} uri The Uri.\n * @param {Boolean} [includeQuery = false] Whether or not to include the query string and fragment form the uri\n * @returns {String} The base path of the Uri.\n *\n * @example\n * // basePath will be \"/Gallery/\";\n * const basePath = Cesium.getBaseUri('/Gallery/simple.czml?value=true&example=false');\n *\n * // basePath will be \"/Gallery/?value=true&example=false\";\n * const basePath = Cesium.getBaseUri('/Gallery/simple.czml?value=true&example=false', true);\n */\nfunction getBaseUri(uri, includeQuery) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(uri)) {\n    throw new DeveloperError(\"uri is required.\");\n  }\n  //>>includeEnd('debug');\n\n  let basePath = \"\";\n  const i = uri.lastIndexOf(\"/\");\n  if (i !== -1) {\n    basePath = uri.substring(0, i + 1);\n  }\n\n  if (!includeQuery) {\n    return basePath;\n  }\n\n  uri = new Uri(uri);\n  if (uri.query().length !== 0) {\n    basePath += `?${uri.query()}`;\n  }\n  if (uri.fragment().length !== 0) {\n    basePath += `#${uri.fragment()}`;\n  }\n\n  return basePath;\n}\nexport default getBaseUri;\n","import Uri from \"../ThirdParty/Uri.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Given a URI, returns the extension of the URI.\n * @function getExtensionFromUri\n *\n * @param {String} uri The Uri.\n * @returns {String} The extension of the Uri.\n *\n * @example\n * //extension will be \"czml\";\n * const extension = Cesium.getExtensionFromUri('/Gallery/simple.czml?value=true&example=false');\n */\nfunction getExtensionFromUri(uri) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(uri)) {\n    throw new DeveloperError(\"uri is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const uriObject = new Uri(uri);\n  uriObject.normalize();\n  let path = uriObject.path();\n  let index = path.lastIndexOf(\"/\");\n  if (index !== -1) {\n    path = path.substr(index + 1);\n  }\n  index = path.lastIndexOf(\".\");\n  if (index === -1) {\n    path = \"\";\n  } else {\n    path = path.substr(index + 1);\n  }\n  return path;\n}\nexport default getExtensionFromUri;\n","import Uri from \"../ThirdParty/Uri.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Given a URI, returns the last segment of the URI, removing any path or query information.\n * @function getFilenameFromUri\n *\n * @param {String} uri The Uri.\n * @returns {String} The last segment of the Uri.\n *\n * @example\n * //fileName will be\"simple.czml\";\n * const fileName = Cesium.getFilenameFromUri('/Gallery/simple.czml?value=true&example=false');\n */\nfunction getFilenameFromUri(uri) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(uri)) {\n    throw new DeveloperError(\"uri is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const uriObject = new Uri(uri);\n  uriObject.normalize();\n  let path = uriObject.path();\n  const index = path.lastIndexOf(\"/\");\n  if (index !== -1) {\n    path = path.substr(index + 1);\n  }\n  return path;\n}\nexport default getFilenameFromUri;\n","import defined from \"./defined.js\";\n\nconst context2DsByWidthAndHeight = {};\n\n/**\n * Extract a pixel array from a loaded image.  Draws the image\n * into a canvas so it can read the pixels back.\n *\n * @function getImagePixels\n *\n * @param {HTMLImageElement|ImageBitmap} image The image to extract pixels from.\n * @param {Number} width The width of the image. If not defined, then image.width is assigned.\n * @param {Number} height The height of the image. If not defined, then image.height is assigned.\n * @returns {ImageData} The pixels of the image.\n */\nfunction getImagePixels(image, width, height) {\n  if (!defined(width)) {\n    width = image.width;\n  }\n  if (!defined(height)) {\n    height = image.height;\n  }\n\n  let context2DsByHeight = context2DsByWidthAndHeight[width];\n  if (!defined(context2DsByHeight)) {\n    context2DsByHeight = {};\n    context2DsByWidthAndHeight[width] = context2DsByHeight;\n  }\n\n  let context2d = context2DsByHeight[height];\n  if (!defined(context2d)) {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    context2d = canvas.getContext(\"2d\");\n    context2d.globalCompositeOperation = \"copy\";\n    context2DsByHeight[height] = context2d;\n  }\n\n  context2d.drawImage(image, 0, 0, width, height);\n  return context2d.getImageData(0, 0, width, height).data;\n}\nexport default getImagePixels;\n","import getStringFromTypedArray from \"./getStringFromTypedArray.js\";\n\n/**\n * Parses JSON from a Uint8Array.\n *\n * @function\n *\n * @param {Uint8Array} uint8Array The Uint8Array to read from.\n * @param {Number} [byteOffset=0] The byte offset to start reading from.\n * @param {Number} [byteLength] The byte length to read. If byteLength is omitted the remainder of the buffer is read.\n * @returns {Object} An object containing the parsed JSON.\n *\n * @private\n */\nfunction getJsonFromTypedArray(uint8Array, byteOffset, byteLength) {\n  return JSON.parse(\n    getStringFromTypedArray(uint8Array, byteOffset, byteLength)\n  );\n}\n\nexport default getJsonFromTypedArray;\n","import defaultValue from \"./defaultValue.js\";\nimport getStringFromTypedArray from \"./getStringFromTypedArray.js\";\n\n/**\n * @private\n */\nfunction getMagic(uint8Array, byteOffset) {\n  byteOffset = defaultValue(byteOffset, 0);\n  return getStringFromTypedArray(\n    uint8Array,\n    byteOffset,\n    Math.min(4, uint8Array.length)\n  );\n}\nexport default getMagic;\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport RuntimeError from \"./RuntimeError.js\";\n\n/**\n * Reads a string from a Uint8Array.\n *\n * @function\n *\n * @param {Uint8Array} uint8Array The Uint8Array to read from.\n * @param {Number} [byteOffset=0] The byte offset to start reading from.\n * @param {Number} [byteLength] The byte length to read. If byteLength is omitted the remainder of the buffer is read.\n * @returns {String} The string.\n *\n * @private\n */\nfunction getStringFromTypedArray(uint8Array, byteOffset, byteLength) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(uint8Array)) {\n    throw new DeveloperError(\"uint8Array is required.\");\n  }\n  if (byteOffset < 0) {\n    throw new DeveloperError(\"byteOffset cannot be negative.\");\n  }\n  if (byteLength < 0) {\n    throw new DeveloperError(\"byteLength cannot be negative.\");\n  }\n  if (byteOffset + byteLength > uint8Array.byteLength) {\n    throw new DeveloperError(\"sub-region exceeds array bounds.\");\n  }\n  //>>includeEnd('debug');\n\n  byteOffset = defaultValue(byteOffset, 0);\n  byteLength = defaultValue(byteLength, uint8Array.byteLength - byteOffset);\n\n  uint8Array = uint8Array.subarray(byteOffset, byteOffset + byteLength);\n\n  return getStringFromTypedArray.decode(uint8Array);\n}\n\n// Exposed functions for testing\ngetStringFromTypedArray.decodeWithTextDecoder = function (view) {\n  const decoder = new TextDecoder(\"utf-8\");\n  return decoder.decode(view);\n};\n\ngetStringFromTypedArray.decodeWithFromCharCode = function (view) {\n  let result = \"\";\n  const codePoints = utf8Handler(view);\n  const length = codePoints.length;\n  for (let i = 0; i < length; ++i) {\n    let cp = codePoints[i];\n    if (cp <= 0xffff) {\n      result += String.fromCharCode(cp);\n    } else {\n      cp -= 0x10000;\n      result += String.fromCharCode((cp >> 10) + 0xd800, (cp & 0x3ff) + 0xdc00);\n    }\n  }\n  return result;\n};\n\nfunction inRange(a, min, max) {\n  return min <= a && a <= max;\n}\n\n// This code is inspired by public domain code found here: https://github.com/inexorabletash/text-encoding\nfunction utf8Handler(utfBytes) {\n  let codePoint = 0;\n  let bytesSeen = 0;\n  let bytesNeeded = 0;\n  let lowerBoundary = 0x80;\n  let upperBoundary = 0xbf;\n\n  const codePoints = [];\n  const length = utfBytes.length;\n  for (let i = 0; i < length; ++i) {\n    const currentByte = utfBytes[i];\n\n    // If bytesNeeded = 0, then we are starting a new character\n    if (bytesNeeded === 0) {\n      // 1 Byte Ascii character\n      if (inRange(currentByte, 0x00, 0x7f)) {\n        // Return a code point whose value is byte.\n        codePoints.push(currentByte);\n        continue;\n      }\n\n      // 2 Byte character\n      if (inRange(currentByte, 0xc2, 0xdf)) {\n        bytesNeeded = 1;\n        codePoint = currentByte & 0x1f;\n        continue;\n      }\n\n      // 3 Byte character\n      if (inRange(currentByte, 0xe0, 0xef)) {\n        // If byte is 0xE0, set utf-8 lower boundary to 0xA0.\n        if (currentByte === 0xe0) {\n          lowerBoundary = 0xa0;\n        }\n        // If byte is 0xED, set utf-8 upper boundary to 0x9F.\n        if (currentByte === 0xed) {\n          upperBoundary = 0x9f;\n        }\n\n        bytesNeeded = 2;\n        codePoint = currentByte & 0xf;\n        continue;\n      }\n\n      // 4 Byte character\n      if (inRange(currentByte, 0xf0, 0xf4)) {\n        // If byte is 0xF0, set utf-8 lower boundary to 0x90.\n        if (currentByte === 0xf0) {\n          lowerBoundary = 0x90;\n        }\n        // If byte is 0xF4, set utf-8 upper boundary to 0x8F.\n        if (currentByte === 0xf4) {\n          upperBoundary = 0x8f;\n        }\n\n        bytesNeeded = 3;\n        codePoint = currentByte & 0x7;\n        continue;\n      }\n\n      throw new RuntimeError(\"String decoding failed.\");\n    }\n\n    // Out of range, so ignore the first part(s) of the character and continue with this byte on its own\n    if (!inRange(currentByte, lowerBoundary, upperBoundary)) {\n      codePoint = bytesNeeded = bytesSeen = 0;\n      lowerBoundary = 0x80;\n      upperBoundary = 0xbf;\n      --i;\n      continue;\n    }\n\n    // Set appropriate boundaries, since we've now checked byte 2 of a potential longer character\n    lowerBoundary = 0x80;\n    upperBoundary = 0xbf;\n\n    // Add byte to code point\n    codePoint = (codePoint << 6) | (currentByte & 0x3f);\n\n    // We have the correct number of bytes, so push and reset for next character\n    ++bytesSeen;\n    if (bytesSeen === bytesNeeded) {\n      codePoints.push(codePoint);\n      codePoint = bytesNeeded = bytesSeen = 0;\n    }\n  }\n\n  return codePoints;\n}\n\nif (typeof TextDecoder !== \"undefined\") {\n  getStringFromTypedArray.decode =\n    getStringFromTypedArray.decodeWithTextDecoder;\n} else {\n  getStringFromTypedArray.decode =\n    getStringFromTypedArray.decodeWithFromCharCode;\n}\nexport default getStringFromTypedArray;\n","/**\n * Gets a timestamp that can be used in measuring the time between events.  Timestamps\n * are expressed in milliseconds, but it is not specified what the milliseconds are\n * measured from.  This function uses performance.now() if it is available, or Date.now()\n * otherwise.\n *\n * @function getTimestamp\n *\n * @returns {Number} The timestamp in milliseconds since some unspecified reference time.\n */\nlet getTimestamp;\n\nif (\n  typeof performance !== \"undefined\" &&\n  typeof performance.now === \"function\" &&\n  isFinite(performance.now())\n) {\n  getTimestamp = function () {\n    return performance.now();\n  };\n} else {\n  getTimestamp = function () {\n    return Date.now();\n  };\n}\nexport default getTimestamp;\n","/**\n * @private\n */\nfunction isBitSet(bits, mask) {\n  return (bits & mask) !== 0;\n}\nexport default isBitSet;\n","import Check from \"./Check.js\";\n\nconst blobUriRegex = /^blob:/i;\n\n/**\n * Determines if the specified uri is a blob uri.\n *\n * @function isBlobUri\n *\n * @param {String} uri The uri to test.\n * @returns {Boolean} true when the uri is a blob uri; otherwise, false.\n *\n * @private\n */\nfunction isBlobUri(uri) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"uri\", uri);\n  //>>includeEnd('debug');\n\n  return blobUriRegex.test(uri);\n}\nexport default isBlobUri;\n","import defined from \"./defined.js\";\n\nlet a;\n\n/**\n * Given a URL, determine whether that URL is considered cross-origin to the current page.\n *\n * @private\n */\nfunction isCrossOriginUrl(url) {\n  if (!defined(a)) {\n    a = document.createElement(\"a\");\n  }\n\n  // copy window location into the anchor to get consistent results\n  // when the port is default for the protocol (e.g. 80 for HTTP)\n  a.href = window.location.href;\n\n  // host includes both hostname and port if the port is not standard\n  const host = a.host;\n  const protocol = a.protocol;\n\n  a.href = url;\n  // IE only absolutizes href on get, not set\n  // eslint-disable-next-line no-self-assign\n  a.href = a.href;\n\n  return protocol !== a.protocol || host !== a.host;\n}\nexport default isCrossOriginUrl;\n","import Check from \"./Check.js\";\n\nconst dataUriRegex = /^data:/i;\n\n/**\n * Determines if the specified uri is a data uri.\n *\n * @function isDataUri\n *\n * @param {String} uri The uri to test.\n * @returns {Boolean} true when the uri is a data uri; otherwise, false.\n *\n * @private\n */\nfunction isDataUri(uri) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.string(\"uri\", uri);\n  //>>includeEnd('debug');\n\n  return dataUriRegex.test(uri);\n}\nexport default isDataUri;\n","import DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Determines if a given date is a leap year.\n *\n * @function isLeapYear\n *\n * @param {Number} year The year to be tested.\n * @returns {Boolean} True if <code>year</code> is a leap year.\n *\n * @example\n * const leapYear = Cesium.isLeapYear(2000); // true\n */\nfunction isLeapYear(year) {\n  //>>includeStart('debug', pragmas.debug);\n  if (year === null || isNaN(year)) {\n    throw new DeveloperError(\"year is required and must be a number.\");\n  }\n  //>>includeEnd('debug');\n\n  return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n}\nexport default isLeapYear;\n","import defer from \"./defer.js\";\n\n/**\n * @private\n */\nfunction loadAndExecuteScript(url) {\n  const deferred = defer();\n  const script = document.createElement(\"script\");\n  script.async = true;\n  script.src = url;\n\n  const head = document.getElementsByTagName(\"head\")[0];\n  script.onload = function () {\n    script.onload = undefined;\n    head.removeChild(script);\n    deferred.resolve();\n  };\n  script.onerror = function (e) {\n    deferred.reject(e);\n  };\n\n  head.appendChild(script);\n\n  return deferred.promise;\n}\nexport default loadAndExecuteScript;\n","import Check from \"./Check.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport Resource from \"./Resource.js\";\n\n/**\n * @private\n */\nfunction loadImageFromTypedArray(options) {\n  const uint8Array = options.uint8Array;\n  const format = options.format;\n  const request = options.request;\n  const flipY = defaultValue(options.flipY, false);\n  const skipColorSpaceConversion = defaultValue(\n    options.skipColorSpaceConversion,\n    false\n  );\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"uint8Array\", uint8Array);\n  Check.typeOf.string(\"format\", format);\n  //>>includeEnd('debug');\n\n  const blob = new Blob([uint8Array], {\n    type: format,\n  });\n\n  let blobUrl;\n  return Resource.supportsImageBitmapOptions()\n    .then(function (result) {\n      if (result) {\n        return Promise.resolve(\n          Resource.createImageBitmapFromBlob(blob, {\n            flipY: flipY,\n            premultiplyAlpha: false,\n            skipColorSpaceConversion: skipColorSpaceConversion,\n          })\n        );\n      }\n\n      blobUrl = window.URL.createObjectURL(blob);\n      const resource = new Resource({\n        url: blobUrl,\n        request: request,\n      });\n\n      return resource.fetchImage({\n        flipY: flipY,\n        skipColorSpaceConversion: skipColorSpaceConversion,\n      });\n    })\n    .then(function (result) {\n      if (defined(blobUrl)) {\n        window.URL.revokeObjectURL(blobUrl);\n      }\n      return result;\n    })\n    .catch(function (error) {\n      if (defined(blobUrl)) {\n        window.URL.revokeObjectURL(blobUrl);\n      }\n      return Promise.reject(error);\n    });\n}\nexport default loadImageFromTypedArray;\n","import Check from \"./Check.js\";\nimport Resource from \"./Resource.js\";\nimport KTX2Transcoder from \"./KTX2Transcoder.js\";\n\n/**\n * Stores the supported formats that KTX2 can transcode to. Called during context creation.\n *\n * @param {Boolean} s3tc Whether or not S3TC is supported\n * @param {Boolean} pvrtc Whether or not PVRTC is supported\n * @param {Boolean} astc Whether or not ASTC is supported\n * @param {Boolean} etc Whether or not ETC is supported\n * @param {Boolean} etc1 Whether or not ETC1 is supported\n * @param {Boolean} bc7 Whether or not BC7 is supported\n * @private\n */\nlet supportedTranscoderFormats;\n\nloadKTX2.setKTX2SupportedFormats = function (\n  s3tc,\n  pvrtc,\n  astc,\n  etc,\n  etc1,\n  bc7\n) {\n  supportedTranscoderFormats = {\n    s3tc: s3tc,\n    pvrtc: pvrtc,\n    astc: astc,\n    etc: etc,\n    etc1: etc1,\n    bc7: bc7,\n  };\n};\n\n/**\n * Asynchronously loads and parses the given URL to a KTX2 file or parses the raw binary data of a KTX2 file.\n * Returns a promise that will resolve to an object containing the image buffer, width, height, and format once loaded,\n * or reject if the URL failed to load or failed to parse the data. The data is loaded\n * using XMLHttpRequest, which means that in order to make requests to another origin,\n * the server must have Cross-Origin Resource sharing (CORS) headers enabled.\n * <p>\n * The following are part of the KTX2 format specification but are not supported:\n * <ul>\n *     <li>Metadata</li>\n *     <li>3D textures</li>\n *     <li>Texture Arrays</li>\n *     <li>Video</li>\n * </ul>\n * </p>\n *\n * @function loadKTX2\n *\n * @param {Resource|String|ArrayBuffer} resourceOrUrlOrBuffer The URL of the binary data or an ArrayBuffer.\n * @returns {Promise.<CompressedTextureBuffer>|undefined} A promise that will resolve to the requested data when loaded. Returns undefined if <code>request.throttle</code> is true and the request does not have high enough priority.\n *\n * @exception {RuntimeError} Invalid KTX2 file.\n * @exception {RuntimeError} KTX2 texture arrays are not supported.\n * @exception {RuntimeError} KTX2 3D textures are unsupported.\n * @exception {RuntimeError} No transcoding format target available for ETC1S compressed ktx2s.\n * @exception {RuntimeError} No transcoding format target available for UASTC compressed ktx2s.\n * @exception {RuntimeError} startTranscoding() failed.\n * @exception {RuntimeError} transcodeImage() failed.\n *\n * @example\n * // load a single URL asynchronously\n * Cesium.loadKTX2('some/url').then(function (ktx2Data) {\n *     const width = ktx2Data.width;\n *     const height = ktx2Data.height;\n *     const format = ktx2Data.internalFormat;\n *     const arrayBufferView = ktx2Data.bufferView;\n *     // use the data to create a texture\n * }).catch(function (error) {\n *     // an error occurred.\n * });\n *\n * @see {@link https://github.com/KhronosGroup/KTX-Specification|KTX file format}\n * @see {@link http://www.w3.org/TR/cors/|Cross-Origin Resource Sharing}\n * @see {@link http://wiki.commonjs.org/wiki/Promises/A|CommonJS Promises/A}\n * @private\n */\nfunction loadKTX2(resourceOrUrlOrBuffer) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.defined(\"resourceOrUrlOrBuffer\", resourceOrUrlOrBuffer);\n  //>>includeEnd('debug');\n\n  let loadPromise;\n  if (\n    resourceOrUrlOrBuffer instanceof ArrayBuffer ||\n    ArrayBuffer.isView(resourceOrUrlOrBuffer)\n  ) {\n    loadPromise = Promise.resolve(resourceOrUrlOrBuffer);\n  } else {\n    const resource = Resource.createIfNeeded(resourceOrUrlOrBuffer);\n    loadPromise = resource.fetchArrayBuffer();\n  }\n\n  // load module then return\n  return loadPromise.then(function (data) {\n    return KTX2Transcoder.transcode(data, supportedTranscoderFormats);\n  });\n}\n\nexport default loadKTX2;\n","import defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\nconst leftScratchArray = [];\nconst rightScratchArray = [];\n\nfunction merge(array, compare, userDefinedObject, start, middle, end) {\n  const leftLength = middle - start + 1;\n  const rightLength = end - middle;\n\n  const left = leftScratchArray;\n  const right = rightScratchArray;\n\n  let i;\n  let j;\n\n  for (i = 0; i < leftLength; ++i) {\n    left[i] = array[start + i];\n  }\n\n  for (j = 0; j < rightLength; ++j) {\n    right[j] = array[middle + j + 1];\n  }\n\n  i = 0;\n  j = 0;\n  for (let k = start; k <= end; ++k) {\n    const leftElement = left[i];\n    const rightElement = right[j];\n    if (\n      i < leftLength &&\n      (j >= rightLength ||\n        compare(leftElement, rightElement, userDefinedObject) <= 0)\n    ) {\n      array[k] = leftElement;\n      ++i;\n    } else if (j < rightLength) {\n      array[k] = rightElement;\n      ++j;\n    }\n  }\n}\n\nfunction sort(array, compare, userDefinedObject, start, end) {\n  if (start >= end) {\n    return;\n  }\n\n  const middle = Math.floor((start + end) * 0.5);\n  sort(array, compare, userDefinedObject, start, middle);\n  sort(array, compare, userDefinedObject, middle + 1, end);\n  merge(array, compare, userDefinedObject, start, middle, end);\n}\n\n/**\n * A stable merge sort.\n *\n * @function mergeSort\n * @param {Array} array The array to sort.\n * @param {mergeSortComparator} comparator The function to use to compare elements in the array.\n * @param {*} [userDefinedObject] Any item to pass as the third parameter to <code>comparator</code>.\n *\n * @example\n * // Assume array contains BoundingSpheres in world coordinates.\n * // Sort them in ascending order of distance from the camera.\n * const position = camera.positionWC;\n * Cesium.mergeSort(array, function(a, b, position) {\n *     return Cesium.BoundingSphere.distanceSquaredTo(b, position) - Cesium.BoundingSphere.distanceSquaredTo(a, position);\n * }, position);\n */\nfunction mergeSort(array, comparator, userDefinedObject) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required.\");\n  }\n  if (!defined(comparator)) {\n    throw new DeveloperError(\"comparator is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const length = array.length;\n  const scratchLength = Math.ceil(length * 0.5);\n\n  // preallocate space in scratch arrays\n  leftScratchArray.length = scratchLength;\n  rightScratchArray.length = scratchLength;\n\n  sort(array, comparator, userDefinedObject, 0, length - 1);\n\n  // trim scratch arrays\n  leftScratchArray.length = 0;\n  rightScratchArray.length = 0;\n}\n\n/**\n * A function used to compare two items while performing a merge sort.\n * @callback mergeSortComparator\n *\n * @param {*} a An item in the array.\n * @param {*} b An item in the array.\n * @param {*} [userDefinedObject] An object that was passed to {@link mergeSort}.\n * @returns {Number} Returns a negative value if <code>a</code> is less than <code>b</code>,\n *          a positive value if <code>a</code> is greater than <code>b</code>, or\n *          0 if <code>a</code> is equal to <code>b</code>.\n *\n * @example\n * function compareNumbers(a, b, userDefinedObject) {\n *     return a - b;\n * }\n */\nexport default mergeSort;\n","import defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Converts an object representing a set of name/value pairs into a query string,\n * with names and values encoded properly for use in a URL.  Values that are arrays\n * will produce multiple values with the same name.\n * @function objectToQuery\n *\n * @param {Object} obj The object containing data to encode.\n * @returns {String} An encoded query string.\n *\n *\n * @example\n * const str = Cesium.objectToQuery({\n *     key1 : 'some value',\n *     key2 : 'a/b',\n *     key3 : ['x', 'y']\n * });\n *\n * @see queryToObject\n * // str will be:\n * // 'key1=some%20value&key2=a%2Fb&key3=x&key3=y'\n */\nfunction objectToQuery(obj) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(obj)) {\n    throw new DeveloperError(\"obj is required.\");\n  }\n  //>>includeEnd('debug');\n\n  let result = \"\";\n  for (const propName in obj) {\n    if (obj.hasOwnProperty(propName)) {\n      const value = obj[propName];\n\n      const part = `${encodeURIComponent(propName)}=`;\n      if (Array.isArray(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          result += `${part + encodeURIComponent(value[i])}&`;\n        }\n      } else {\n        result += `${part + encodeURIComponent(value)}&`;\n      }\n    }\n  }\n\n  // trim last &\n  result = result.slice(0, -1);\n\n  // This function used to replace %20 with + which is more compact and readable.\n  // However, some servers didn't properly handle + as a space.\n  // https://github.com/CesiumGS/cesium/issues/2192\n\n  return result;\n}\nexport default objectToQuery;\n","import defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\nconst warnings = {};\n\n/**\n * Logs a one time message to the console.  Use this function instead of\n * <code>console.log</code> directly since this does not log duplicate messages\n * unless it is called from multiple workers.\n *\n * @function oneTimeWarning\n *\n * @param {String} identifier The unique identifier for this warning.\n * @param {String} [message=identifier] The message to log to the console.\n *\n * @example\n * for(let i=0;i<foo.length;++i) {\n *    if (!defined(foo[i].bar)) {\n *       // Something that can be recovered from but may happen a lot\n *       oneTimeWarning('foo.bar undefined', 'foo.bar is undefined. Setting to 0.');\n *       foo[i].bar = 0;\n *       // ...\n *    }\n * }\n *\n * @private\n */\nfunction oneTimeWarning(identifier, message) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(identifier)) {\n    throw new DeveloperError(\"identifier is required.\");\n  }\n  //>>includeEnd('debug');\n\n  if (!defined(warnings[identifier])) {\n    warnings[identifier] = true;\n    console.warn(defaultValue(message, identifier));\n  }\n}\n\noneTimeWarning.geometryOutlines =\n  \"Entity geometry outlines are unsupported on terrain. Outlines will be disabled. To enable outlines, disable geometry terrain clamping by explicitly setting height to 0.\";\n\noneTimeWarning.geometryZIndex =\n  \"Entity geometry with zIndex are unsupported when height or extrudedHeight are defined.  zIndex will be ignored\";\n\noneTimeWarning.geometryHeightReference =\n  \"Entity corridor, ellipse, polygon or rectangle with heightReference must also have a defined height.  heightReference will be ignored\";\noneTimeWarning.geometryExtrudedHeightReference =\n  \"Entity corridor, ellipse, polygon or rectangle with extrudedHeightReference must also have a defined extrudedHeight.  extrudedHeightReference will be ignored\";\nexport default oneTimeWarning;\n","/**\n * Parses the result of XMLHttpRequest's getAllResponseHeaders() method into\n * a dictionary.\n *\n * @function parseResponseHeaders\n *\n * @param {String} headerString The header string returned by getAllResponseHeaders().  The format is\n *                 described here: http://www.w3.org/TR/XMLHttpRequest/#the-getallresponseheaders()-method\n * @returns {Object} A dictionary of key/value pairs, where each key is the name of a header and the corresponding value\n *                   is that header's value.\n *\n * @private\n */\nfunction parseResponseHeaders(headerString) {\n  const headers = {};\n\n  if (!headerString) {\n    return headers;\n  }\n\n  const headerPairs = headerString.split(\"\\u000d\\u000a\");\n\n  for (let i = 0; i < headerPairs.length; ++i) {\n    const headerPair = headerPairs[i];\n    // Can't use split() here because it does the wrong thing\n    // if the header value has the string \": \" in it.\n    const index = headerPair.indexOf(\"\\u003a\\u0020\");\n    if (index > 0) {\n      const key = headerPair.substring(0, index);\n      const val = headerPair.substring(index + 2);\n      headers[key] = val;\n    }\n  }\n\n  return headers;\n}\nexport default parseResponseHeaders;\n","import barycentricCoordinates from \"./barycentricCoordinates.js\";\nimport Cartesian3 from \"./Cartesian3.js\";\nimport defined from \"./defined.js\";\n\nconst scratchBarycentricCoords = new Cartesian3();\n\n/**\n * Determines if a point is inside a triangle.\n *\n * @function pointInsideTriangle\n *\n * @param {Cartesian2|Cartesian3} point The point to test.\n * @param {Cartesian2|Cartesian3} p0 The first point of the triangle.\n * @param {Cartesian2|Cartesian3} p1 The second point of the triangle.\n * @param {Cartesian2|Cartesian3} p2 The third point of the triangle.\n * @returns {Boolean} <code>true</code> if the point is inside the triangle; otherwise, <code>false</code>.\n *\n * @example\n * // Returns true\n * const p = new Cesium.Cartesian2(0.25, 0.25);\n * const b = Cesium.pointInsideTriangle(p,\n *   new Cesium.Cartesian2(0.0, 0.0),\n *   new Cesium.Cartesian2(1.0, 0.0),\n *   new Cesium.Cartesian2(0.0, 1.0));\n */\nfunction pointInsideTriangle(point, p0, p1, p2) {\n  const coords = barycentricCoordinates(\n    point,\n    p0,\n    p1,\n    p2,\n    scratchBarycentricCoords\n  );\n  if (!defined(coords)) {\n    return false;\n  }\n  return coords.x > 0.0 && coords.y > 0.0 && coords.z > 0;\n}\nexport default pointInsideTriangle;\n","import defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Parses a query string into an object, where the keys and values of the object are the\n * name/value pairs from the query string, decoded. If a name appears multiple times,\n * the value in the object will be an array of values.\n * @function queryToObject\n *\n * @param {String} queryString The query string.\n * @returns {Object} An object containing the parameters parsed from the query string.\n *\n *\n * @example\n * const obj = Cesium.queryToObject('key1=some%20value&key2=a%2Fb&key3=x&key3=y');\n * // obj will be:\n * // {\n * //   key1 : 'some value',\n * //   key2 : 'a/b',\n * //   key3 : ['x', 'y']\n * // }\n *\n * @see objectToQuery\n */\nfunction queryToObject(queryString) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(queryString)) {\n    throw new DeveloperError(\"queryString is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const result = {};\n  if (queryString === \"\") {\n    return result;\n  }\n  const parts = queryString.replace(/\\+/g, \"%20\").split(/[&;]/);\n  for (let i = 0, len = parts.length; i < len; ++i) {\n    const subparts = parts[i].split(\"=\");\n\n    const name = decodeURIComponent(subparts[0]);\n    let value = subparts[1];\n    if (defined(value)) {\n      value = decodeURIComponent(value);\n    } else {\n      value = \"\";\n    }\n\n    const resultValue = result[name];\n    if (typeof resultValue === \"string\") {\n      // expand the single value to an array\n      result[name] = [resultValue, value];\n    } else if (Array.isArray(resultValue)) {\n      resultValue.push(value);\n    } else {\n      result[name] = value;\n    }\n  }\n  return result;\n}\nexport default queryToObject;\n","import defined from \"./defined.js\";\nimport getTimestamp from \"./getTimestamp.js\";\n\nlet implementation;\nif (typeof requestAnimationFrame !== \"undefined\") {\n  implementation = requestAnimationFrame;\n}\n\n(function () {\n  // look for vendor prefixed function\n  if (!defined(implementation) && typeof window !== \"undefined\") {\n    const vendors = [\"webkit\", \"moz\", \"ms\", \"o\"];\n    let i = 0;\n    const len = vendors.length;\n    while (i < len && !defined(implementation)) {\n      implementation = window[`${vendors[i]}RequestAnimationFrame`];\n      ++i;\n    }\n  }\n\n  // build an implementation based on setTimeout\n  if (!defined(implementation)) {\n    const msPerFrame = 1000.0 / 60.0;\n    let lastFrameTime = 0;\n    implementation = function (callback) {\n      const currentTime = getTimestamp();\n\n      // schedule the callback to target 60fps, 16.7ms per frame,\n      // accounting for the time taken by the callback\n      const delay = Math.max(msPerFrame - (currentTime - lastFrameTime), 0);\n      lastFrameTime = currentTime + delay;\n\n      return setTimeout(function () {\n        callback(lastFrameTime);\n      }, delay);\n    };\n  }\n})();\n\n/**\n * A browser-independent function to request a new animation frame.  This is used to create\n * an application's draw loop as shown in the example below.\n *\n * @function requestAnimationFrame\n *\n * @param {requestAnimationFrameCallback} callback The function to call when the next frame should be drawn.\n * @returns {Number} An ID that can be passed to {@link cancelAnimationFrame} to cancel the request.\n *\n *\n * @example\n * // Create a draw loop using requestAnimationFrame. The\n * // tick callback function is called for every animation frame.\n * function tick() {\n *   scene.render();\n *   Cesium.requestAnimationFrame(tick);\n * }\n * tick();\n *\n * @see {@link https://www.w3.org/TR/html51/webappapis.html#animation-frames|The Web API Animation Frames interface}\n */\nfunction requestAnimationFramePolyFill(callback) {\n  // we need this extra wrapper function because the native requestAnimationFrame\n  // functions must be invoked on the global scope (window), which is not the case\n  // if invoked as Cesium.requestAnimationFrame(callback)\n  return implementation(callback);\n}\n\n/**\n * A function that will be called when the next frame should be drawn.\n * @callback requestAnimationFrameCallback\n *\n * @param {Number} timestamp A timestamp for the frame, in milliseconds.\n */\nexport default requestAnimationFramePolyFill;\n","import Check from \"./Check.js\";\n\n/**\n * Initiates a terrain height query for an array of {@link Cartographic} positions by\n * requesting tiles from a terrain provider, sampling, and interpolating.  The interpolation\n * matches the triangles used to render the terrain at the specified level.  The query\n * happens asynchronously, so this function returns a promise that is resolved when\n * the query completes.  Each point height is modified in place.  If a height can not be\n * determined because no terrain data is available for the specified level at that location,\n * or another error occurs, the height is set to undefined.  As is typical of the\n * {@link Cartographic} type, the supplied height is a height above the reference ellipsoid\n * (such as {@link Ellipsoid.WGS84}) rather than an altitude above mean sea level.  In other\n * words, it will not necessarily be 0.0 if sampled in the ocean. This function needs the\n * terrain level of detail as input, if you need to get the altitude of the terrain as precisely\n * as possible (i.e. with maximum level of detail) use {@link sampleTerrainMostDetailed}.\n *\n * @function sampleTerrain\n *\n * @param {TerrainProvider} terrainProvider The terrain provider from which to query heights.\n * @param {Number} level The terrain level-of-detail from which to query terrain heights.\n * @param {Cartographic[]} positions The positions to update with terrain heights.\n * @returns {Promise.<Cartographic[]>} A promise that resolves to the provided list of positions when terrain the query has completed.\n *\n * @see sampleTerrainMostDetailed\n *\n * @example\n * // Query the terrain height of two Cartographic positions\n * const terrainProvider = Cesium.createWorldTerrain();\n * const positions = [\n *     Cesium.Cartographic.fromDegrees(86.925145, 27.988257),\n *     Cesium.Cartographic.fromDegrees(87.0, 28.0)\n * ];\n * const promise = Cesium.sampleTerrain(terrainProvider, 11, positions);\n * Promise.resolve(promise).then(function(updatedPositions) {\n *     // positions[0].height and positions[1].height have been updated.\n *     // updatedPositions is just a reference to positions.\n * });\n */\nfunction sampleTerrain(terrainProvider, level, positions) {\n  //>>includeStart('debug', pragmas.debug);\n  Check.typeOf.object(\"terrainProvider\", terrainProvider);\n  Check.typeOf.number(\"level\", level);\n  Check.defined(\"positions\", positions);\n  //>>includeEnd('debug');\n\n  return terrainProvider.readyPromise.then(function () {\n    return doSampling(terrainProvider, level, positions);\n  });\n}\n\nfunction doSampling(terrainProvider, level, positions) {\n  const tilingScheme = terrainProvider.tilingScheme;\n\n  let i;\n\n  // Sort points into a set of tiles\n  const tileRequests = []; // Result will be an Array as it's easier to work with\n  const tileRequestSet = {}; // A unique set\n  for (i = 0; i < positions.length; ++i) {\n    const xy = tilingScheme.positionToTileXY(positions[i], level);\n    const key = xy.toString();\n\n    if (!tileRequestSet.hasOwnProperty(key)) {\n      // When tile is requested for the first time\n      const value = {\n        x: xy.x,\n        y: xy.y,\n        level: level,\n        tilingScheme: tilingScheme,\n        terrainProvider: terrainProvider,\n        positions: [],\n      };\n      tileRequestSet[key] = value;\n      tileRequests.push(value);\n    }\n\n    // Now append to array of points for the tile\n    tileRequestSet[key].positions.push(positions[i]);\n  }\n\n  // Send request for each required tile\n  const tilePromises = [];\n  for (i = 0; i < tileRequests.length; ++i) {\n    const tileRequest = tileRequests[i];\n    const requestPromise = tileRequest.terrainProvider.requestTileGeometry(\n      tileRequest.x,\n      tileRequest.y,\n      tileRequest.level\n    );\n    const tilePromise = requestPromise\n      .then(createInterpolateFunction(tileRequest))\n      .catch(createMarkFailedFunction(tileRequest));\n    tilePromises.push(tilePromise);\n  }\n\n  return Promise.all(tilePromises).then(function () {\n    return positions;\n  });\n}\n\n/**\n * Calls {@link TerrainData#interpolateHeight} on a given {@link TerrainData} for a given {@link Cartographic} and\n *  will assign the height property if the return value is not undefined.\n *\n * If the return value is false; it's suggesting that you should call {@link TerrainData#createMesh} first.\n * @param {Cartographic} position The position to interpolate for and assign the height value to\n * @param {TerrainData} terrainData\n * @param {Rectangle} rectangle\n * @returns {Boolean} If the height was actually interpolated and assigned\n * @private\n */\nfunction interpolateAndAssignHeight(position, terrainData, rectangle) {\n  const height = terrainData.interpolateHeight(\n    rectangle,\n    position.longitude,\n    position.latitude\n  );\n  if (height === undefined) {\n    // if height comes back as undefined, it may implicitly mean the terrain data\n    //  requires us to call TerrainData.createMesh() first (ArcGIS requires this in particular)\n    //  so we'll return false and do that next!\n    return false;\n  }\n  position.height = height;\n  return true;\n}\n\nfunction createInterpolateFunction(tileRequest) {\n  const tilePositions = tileRequest.positions;\n  const rectangle = tileRequest.tilingScheme.tileXYToRectangle(\n    tileRequest.x,\n    tileRequest.y,\n    tileRequest.level\n  );\n  return function (terrainData) {\n    let isMeshRequired = false;\n    for (let i = 0; i < tilePositions.length; ++i) {\n      const position = tilePositions[i];\n      const isHeightAssigned = interpolateAndAssignHeight(\n        position,\n        terrainData,\n        rectangle\n      );\n      // we've found a position which returned undefined - hinting to us\n      //  that we probably need to create a mesh for this terrain data.\n      // so break out of this loop and create the mesh - then we'll interpolate all the heights again\n      if (!isHeightAssigned) {\n        isMeshRequired = true;\n        break;\n      }\n    }\n\n    if (!isMeshRequired) {\n      // all position heights were interpolated - we don't need the mesh\n      return Promise.resolve();\n    }\n\n    // create the mesh - and interpolate all the positions again\n    // note: terrain exaggeration is not passed in - we are only interested in the raw data\n    return terrainData\n      .createMesh({\n        tilingScheme: tileRequest.tilingScheme,\n        x: tileRequest.x,\n        y: tileRequest.y,\n        level: tileRequest.level,\n        // don't throttle this mesh creation because we've asked to sample these points;\n        //  so sample them! We don't care how many tiles that is!\n        throttle: false,\n      })\n      .then(function () {\n        // mesh has been created - so go through every position (maybe again)\n        //  and re-interpolate the heights - presumably using the mesh this time\n        for (let i = 0; i < tilePositions.length; ++i) {\n          const position = tilePositions[i];\n          // if it doesn't work this time - that's fine, we tried.\n          interpolateAndAssignHeight(position, terrainData, rectangle);\n        }\n      });\n  };\n}\n\nfunction createMarkFailedFunction(tileRequest) {\n  const tilePositions = tileRequest.positions;\n  return function () {\n    for (let i = 0; i < tilePositions.length; ++i) {\n      const position = tilePositions[i];\n      position.height = undefined;\n    }\n  };\n}\nexport default sampleTerrain;\n","import Cartesian2 from \"./Cartesian2.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport sampleTerrain from \"./sampleTerrain.js\";\n\nconst scratchCartesian2 = new Cartesian2();\n\n/**\n * Initiates a sampleTerrain() request at the maximum available tile level for a terrain dataset.\n *\n * @function sampleTerrainMostDetailed\n *\n * @param {TerrainProvider} terrainProvider The terrain provider from which to query heights.\n * @param {Cartographic[]} positions The positions to update with terrain heights.\n * @returns {Promise.<Cartographic[]>} A promise that resolves to the provided list of positions when terrain the query has completed.  This\n *                                     promise will reject if the terrain provider's `availability` property is undefined.\n *\n * @example\n * // Query the terrain height of two Cartographic positions\n * const terrainProvider = Cesium.createWorldTerrain();\n * const positions = [\n *     Cesium.Cartographic.fromDegrees(86.925145, 27.988257),\n *     Cesium.Cartographic.fromDegrees(87.0, 28.0)\n * ];\n * const promise = Cesium.sampleTerrainMostDetailed(terrainProvider, positions);\n * Promise.resolve(promise).then(function(updatedPositions) {\n *     // positions[0].height and positions[1].height have been updated.\n *     // updatedPositions is just a reference to positions.\n * });\n */\nfunction sampleTerrainMostDetailed(terrainProvider, positions) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(terrainProvider)) {\n    throw new DeveloperError(\"terrainProvider is required.\");\n  }\n  if (!defined(positions)) {\n    throw new DeveloperError(\"positions is required.\");\n  }\n  //>>includeEnd('debug');\n\n  return terrainProvider.readyPromise.then(function () {\n    const byLevel = [];\n    const maxLevels = [];\n\n    const availability = terrainProvider.availability;\n\n    //>>includeStart('debug', pragmas.debug);\n    if (!defined(availability)) {\n      throw new DeveloperError(\n        \"sampleTerrainMostDetailed requires a terrain provider that has tile availability.\"\n      );\n    }\n    //>>includeEnd('debug');\n\n    const promises = [];\n    for (let i = 0; i < positions.length; ++i) {\n      const position = positions[i];\n      const maxLevel = availability.computeMaximumLevelAtPosition(position);\n      maxLevels[i] = maxLevel;\n      if (maxLevel === 0) {\n        // This is a special case where we have a parent terrain and we are requesting\n        // heights from an area that isn't covered by the top level terrain at all.\n        // This will essentially trigger the loading of the parent terrains root tile\n        terrainProvider.tilingScheme.positionToTileXY(\n          position,\n          1,\n          scratchCartesian2\n        );\n        const promise = terrainProvider.loadTileDataAvailability(\n          scratchCartesian2.x,\n          scratchCartesian2.y,\n          1\n        );\n        if (defined(promise)) {\n          promises.push(promise);\n        }\n      }\n\n      let atLevel = byLevel[maxLevel];\n      if (!defined(atLevel)) {\n        byLevel[maxLevel] = atLevel = [];\n      }\n      atLevel.push(position);\n    }\n\n    return Promise.all(promises)\n      .then(function () {\n        return Promise.all(\n          byLevel.map(function (positionsAtLevel, index) {\n            if (defined(positionsAtLevel)) {\n              return sampleTerrain(terrainProvider, index, positionsAtLevel);\n            }\n          })\n        );\n      })\n      .then(function () {\n        const changedPositions = [];\n        for (let i = 0; i < positions.length; ++i) {\n          const position = positions[i];\n          const maxLevel = availability.computeMaximumLevelAtPosition(position);\n\n          if (maxLevel !== maxLevels[i]) {\n            // Now that we loaded the max availability, a higher level has become available\n            changedPositions.push(position);\n          }\n        }\n\n        if (changedPositions.length > 0) {\n          return sampleTerrainMostDetailed(terrainProvider, changedPositions);\n        }\n      })\n      .then(function () {\n        return positions;\n      });\n  });\n}\nexport default sampleTerrainMostDetailed;\n","import Cartesian3 from \"./Cartesian3.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\nimport CesiumMath from \"./Math.js\";\n\nconst scaleToGeodeticSurfaceIntersection = new Cartesian3();\nconst scaleToGeodeticSurfaceGradient = new Cartesian3();\n\n/**\n * Scales the provided Cartesian position along the geodetic surface normal\n * so that it is on the surface of this ellipsoid.  If the position is\n * at the center of the ellipsoid, this function returns undefined.\n *\n * @param {Cartesian3} cartesian The Cartesian position to scale.\n * @param {Cartesian3} oneOverRadii One over radii of the ellipsoid.\n * @param {Cartesian3} oneOverRadiiSquared One over radii squared of the ellipsoid.\n * @param {Number} centerToleranceSquared Tolerance for closeness to the center.\n * @param {Cartesian3} [result] The object onto which to store the result.\n * @returns {Cartesian3} The modified result parameter, a new Cartesian3 instance if none was provided, or undefined if the position is at the center.\n *\n * @function scaleToGeodeticSurface\n *\n * @private\n */\nfunction scaleToGeodeticSurface(\n  cartesian,\n  oneOverRadii,\n  oneOverRadiiSquared,\n  centerToleranceSquared,\n  result\n) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(cartesian)) {\n    throw new DeveloperError(\"cartesian is required.\");\n  }\n  if (!defined(oneOverRadii)) {\n    throw new DeveloperError(\"oneOverRadii is required.\");\n  }\n  if (!defined(oneOverRadiiSquared)) {\n    throw new DeveloperError(\"oneOverRadiiSquared is required.\");\n  }\n  if (!defined(centerToleranceSquared)) {\n    throw new DeveloperError(\"centerToleranceSquared is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const positionX = cartesian.x;\n  const positionY = cartesian.y;\n  const positionZ = cartesian.z;\n\n  const oneOverRadiiX = oneOverRadii.x;\n  const oneOverRadiiY = oneOverRadii.y;\n  const oneOverRadiiZ = oneOverRadii.z;\n\n  const x2 = positionX * positionX * oneOverRadiiX * oneOverRadiiX;\n  const y2 = positionY * positionY * oneOverRadiiY * oneOverRadiiY;\n  const z2 = positionZ * positionZ * oneOverRadiiZ * oneOverRadiiZ;\n\n  // Compute the squared ellipsoid norm.\n  const squaredNorm = x2 + y2 + z2;\n  const ratio = Math.sqrt(1.0 / squaredNorm);\n\n  // As an initial approximation, assume that the radial intersection is the projection point.\n  const intersection = Cartesian3.multiplyByScalar(\n    cartesian,\n    ratio,\n    scaleToGeodeticSurfaceIntersection\n  );\n\n  // If the position is near the center, the iteration will not converge.\n  if (squaredNorm < centerToleranceSquared) {\n    return !isFinite(ratio)\n      ? undefined\n      : Cartesian3.clone(intersection, result);\n  }\n\n  const oneOverRadiiSquaredX = oneOverRadiiSquared.x;\n  const oneOverRadiiSquaredY = oneOverRadiiSquared.y;\n  const oneOverRadiiSquaredZ = oneOverRadiiSquared.z;\n\n  // Use the gradient at the intersection point in place of the true unit normal.\n  // The difference in magnitude will be absorbed in the multiplier.\n  const gradient = scaleToGeodeticSurfaceGradient;\n  gradient.x = intersection.x * oneOverRadiiSquaredX * 2.0;\n  gradient.y = intersection.y * oneOverRadiiSquaredY * 2.0;\n  gradient.z = intersection.z * oneOverRadiiSquaredZ * 2.0;\n\n  // Compute the initial guess at the normal vector multiplier, lambda.\n  let lambda =\n    ((1.0 - ratio) * Cartesian3.magnitude(cartesian)) /\n    (0.5 * Cartesian3.magnitude(gradient));\n  let correction = 0.0;\n\n  let func;\n  let denominator;\n  let xMultiplier;\n  let yMultiplier;\n  let zMultiplier;\n  let xMultiplier2;\n  let yMultiplier2;\n  let zMultiplier2;\n  let xMultiplier3;\n  let yMultiplier3;\n  let zMultiplier3;\n\n  do {\n    lambda -= correction;\n\n    xMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredX);\n    yMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredY);\n    zMultiplier = 1.0 / (1.0 + lambda * oneOverRadiiSquaredZ);\n\n    xMultiplier2 = xMultiplier * xMultiplier;\n    yMultiplier2 = yMultiplier * yMultiplier;\n    zMultiplier2 = zMultiplier * zMultiplier;\n\n    xMultiplier3 = xMultiplier2 * xMultiplier;\n    yMultiplier3 = yMultiplier2 * yMultiplier;\n    zMultiplier3 = zMultiplier2 * zMultiplier;\n\n    func = x2 * xMultiplier2 + y2 * yMultiplier2 + z2 * zMultiplier2 - 1.0;\n\n    // \"denominator\" here refers to the use of this expression in the velocity and acceleration\n    // computations in the sections to follow.\n    denominator =\n      x2 * xMultiplier3 * oneOverRadiiSquaredX +\n      y2 * yMultiplier3 * oneOverRadiiSquaredY +\n      z2 * zMultiplier3 * oneOverRadiiSquaredZ;\n\n    const derivative = -2.0 * denominator;\n\n    correction = func / derivative;\n  } while (Math.abs(func) > CesiumMath.EPSILON12);\n\n  if (!defined(result)) {\n    return new Cartesian3(\n      positionX * xMultiplier,\n      positionY * yMultiplier,\n      positionZ * zMultiplier\n    );\n  }\n  result.x = positionX * xMultiplier;\n  result.y = positionY * yMultiplier;\n  result.z = positionZ * zMultiplier;\n  return result;\n}\nexport default scaleToGeodeticSurface;\n","import defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Subdivides an array into a number of smaller, equal sized arrays.\n *\n * @function subdivideArray\n *\n * @param {Array} array The array to divide.\n * @param {Number} numberOfArrays The number of arrays to divide the provided array into.\n *\n * @exception {DeveloperError} numberOfArrays must be greater than 0.\n */\nfunction subdivideArray(array, numberOfArrays) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(array)) {\n    throw new DeveloperError(\"array is required.\");\n  }\n\n  if (!defined(numberOfArrays) || numberOfArrays < 1) {\n    throw new DeveloperError(\"numberOfArrays must be greater than 0.\");\n  }\n  //>>includeEnd('debug');\n\n  const result = [];\n  const len = array.length;\n  let i = 0;\n  while (i < len) {\n    const size = Math.ceil((len - i) / numberOfArrays--);\n    result.push(array.slice(i, i + size));\n    i += size;\n  }\n  return result;\n}\nexport default subdivideArray;\n","import WebGLConstants from \"./WebGLConstants.js\";\n\nfunction webGLConstantToGlslType(webGLValue) {\n  switch (webGLValue) {\n    case WebGLConstants.FLOAT:\n      return \"float\";\n    case WebGLConstants.FLOAT_VEC2:\n      return \"vec2\";\n    case WebGLConstants.FLOAT_VEC3:\n      return \"vec3\";\n    case WebGLConstants.FLOAT_VEC4:\n      return \"vec4\";\n    case WebGLConstants.FLOAT_MAT2:\n      return \"mat2\";\n    case WebGLConstants.FLOAT_MAT3:\n      return \"mat3\";\n    case WebGLConstants.FLOAT_MAT4:\n      return \"mat4\";\n    case WebGLConstants.SAMPLER_2D:\n      return \"sampler2D\";\n    case WebGLConstants.BOOL:\n      return \"bool\";\n  }\n}\nexport default webGLConstantToGlslType;\n","import DeveloperError from \"./DeveloperError.js\";\n\n/**\n * Wraps a function on the provided objects with another function called in the\n * object's context so that the new function is always called immediately\n * before the old one.\n *\n * @private\n */\nfunction wrapFunction(obj, oldFunction, newFunction) {\n  //>>includeStart('debug', pragmas.debug);\n  if (typeof oldFunction !== \"function\") {\n    throw new DeveloperError(\"oldFunction is required to be a function.\");\n  }\n\n  if (typeof newFunction !== \"function\") {\n    throw new DeveloperError(\"oldFunction is required to be a function.\");\n  }\n  //>>includeEnd('debug');\n\n  return function () {\n    newFunction.apply(obj, arguments);\n    oldFunction.apply(obj, arguments);\n  };\n}\nexport default wrapFunction;\n","import Color from \"./Color.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport defined from \"./defined.js\";\nimport DeveloperError from \"./DeveloperError.js\";\n\nfunction measureText(context2D, textString, font, stroke, fill) {\n  const metrics = context2D.measureText(textString);\n  const isSpace = !/\\S/.test(textString);\n\n  if (!isSpace) {\n    const fontSize = document.defaultView\n      .getComputedStyle(context2D.canvas)\n      .getPropertyValue(\"font-size\")\n      .replace(\"px\", \"\");\n    const canvas = document.createElement(\"canvas\");\n    const padding = 100;\n    const width = (metrics.width + padding) | 0;\n    const height = 3 * fontSize;\n    const baseline = height / 2;\n    canvas.width = width;\n    canvas.height = height;\n\n    const ctx = canvas.getContext(\"2d\");\n    ctx.font = font;\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvas.width + 1, canvas.height + 1);\n\n    if (stroke) {\n      ctx.strokeStyle = \"black\";\n      ctx.lineWidth = context2D.lineWidth;\n      ctx.strokeText(textString, padding / 2, baseline);\n    }\n\n    if (fill) {\n      ctx.fillStyle = \"black\";\n      ctx.fillText(textString, padding / 2, baseline);\n    }\n\n    // Context image data has width * height * 4 elements, because\n    // each pixel's R, G, B and A are consecutive values in the array.\n    const pixelData = ctx.getImageData(0, 0, width, height).data;\n    const length = pixelData.length;\n    const width4 = width * 4;\n    let i, j;\n\n    let ascent, descent;\n    // Find the number of rows (from the top) until the first non-white pixel\n    for (i = 0; i < length; ++i) {\n      if (pixelData[i] !== 255) {\n        ascent = (i / width4) | 0;\n        break;\n      }\n    }\n\n    // Find the number of rows (from the bottom) until the first non-white pixel\n    for (i = length - 1; i >= 0; --i) {\n      if (pixelData[i] !== 255) {\n        descent = (i / width4) | 0;\n        break;\n      }\n    }\n\n    let minx = -1;\n    // For each column, for each row, check for first non-white pixel\n    for (i = 0; i < width && minx === -1; ++i) {\n      for (j = 0; j < height; ++j) {\n        const pixelIndex = i * 4 + j * width4;\n        if (\n          pixelData[pixelIndex] !== 255 ||\n          pixelData[pixelIndex + 1] !== 255 ||\n          pixelData[pixelIndex + 2] !== 255 ||\n          pixelData[pixelIndex + 3] !== 255\n        ) {\n          minx = i;\n          break;\n        }\n      }\n    }\n\n    return {\n      width: metrics.width,\n      height: descent - ascent,\n      ascent: baseline - ascent,\n      descent: descent - baseline,\n      minx: minx - padding / 2,\n    };\n  }\n\n  return {\n    width: metrics.width,\n    height: 0,\n    ascent: 0,\n    descent: 0,\n    minx: 0,\n  };\n}\n\nlet imageSmoothingEnabledName;\n\n/**\n * Writes the given text into a new canvas.  The canvas will be sized to fit the text.\n * If text is blank, returns undefined.\n *\n * @param {String} text The text to write.\n * @param {Object} [options] Object with the following properties:\n * @param {String} [options.font='10px sans-serif'] The CSS font to use.\n * @param {String} [options.textBaseline='bottom'] The baseline of the text.\n * @param {Boolean} [options.fill=true] Whether to fill the text.\n * @param {Boolean} [options.stroke=false] Whether to stroke the text.\n * @param {Color} [options.fillColor=Color.WHITE] The fill color.\n * @param {Color} [options.strokeColor=Color.BLACK] The stroke color.\n * @param {Number} [options.strokeWidth=1] The stroke width.\n * @param {Color} [options.backgroundColor=Color.TRANSPARENT] The background color of the canvas.\n * @param {Number} [options.padding=0] The pixel size of the padding to add around the text.\n * @returns {HTMLCanvasElement|undefined} A new canvas with the given text drawn into it.  The dimensions object\n *                   from measureText will also be added to the returned canvas. If text is\n *                   blank, returns undefined.\n * @function writeTextToCanvas\n */\nfunction writeTextToCanvas(text, options) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(text)) {\n    throw new DeveloperError(\"text is required.\");\n  }\n  //>>includeEnd('debug');\n  if (text === \"\") {\n    return undefined;\n  }\n\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n  const font = defaultValue(options.font, \"10px sans-serif\");\n  const stroke = defaultValue(options.stroke, false);\n  const fill = defaultValue(options.fill, true);\n  const strokeWidth = defaultValue(options.strokeWidth, 1);\n  const backgroundColor = defaultValue(\n    options.backgroundColor,\n    Color.TRANSPARENT\n  );\n  const padding = defaultValue(options.padding, 0);\n  const doublePadding = padding * 2.0;\n\n  const canvas = document.createElement(\"canvas\");\n  canvas.width = 1;\n  canvas.height = 1;\n  canvas.style.font = font;\n  const context2D = canvas.getContext(\"2d\");\n\n  if (!defined(imageSmoothingEnabledName)) {\n    if (defined(context2D.imageSmoothingEnabled)) {\n      imageSmoothingEnabledName = \"imageSmoothingEnabled\";\n    } else if (defined(context2D.mozImageSmoothingEnabled)) {\n      imageSmoothingEnabledName = \"mozImageSmoothingEnabled\";\n    } else if (defined(context2D.webkitImageSmoothingEnabled)) {\n      imageSmoothingEnabledName = \"webkitImageSmoothingEnabled\";\n    } else if (defined(context2D.msImageSmoothingEnabled)) {\n      imageSmoothingEnabledName = \"msImageSmoothingEnabled\";\n    }\n  }\n\n  context2D.font = font;\n  context2D.lineJoin = \"round\";\n  context2D.lineWidth = strokeWidth;\n  context2D[imageSmoothingEnabledName] = false;\n\n  // in order for measureText to calculate style, the canvas has to be\n  // (temporarily) added to the DOM.\n  canvas.style.visibility = \"hidden\";\n  document.body.appendChild(canvas);\n\n  const dimensions = measureText(context2D, text, font, stroke, fill);\n  // Set canvas.dimensions to be accessed in LabelCollection\n  canvas.dimensions = dimensions;\n\n  document.body.removeChild(canvas);\n  canvas.style.visibility = \"\";\n\n  // Some characters, such as the letter j, have a non-zero starting position.\n  // This value is used for kerning later, but we need to take it into account\n  // now in order to draw the text completely on the canvas\n  const x = -dimensions.minx;\n\n  // Expand the width to include the starting position.\n  const width = Math.ceil(dimensions.width) + x + doublePadding;\n\n  // While the height of the letter is correct, we need to adjust\n  // where we start drawing it so that letters like j and y properly dip\n  // below the line.\n\n  const height = dimensions.height + doublePadding;\n  const baseline = height - dimensions.ascent + padding;\n  const y = height - baseline + doublePadding;\n\n  canvas.width = width;\n  canvas.height = height;\n\n  // Properties must be explicitly set again after changing width and height\n  context2D.font = font;\n  context2D.lineJoin = \"round\";\n  context2D.lineWidth = strokeWidth;\n  context2D[imageSmoothingEnabledName] = false;\n\n  // Draw background\n  if (backgroundColor !== Color.TRANSPARENT) {\n    context2D.fillStyle = backgroundColor.toCssColorString();\n    context2D.fillRect(0, 0, canvas.width, canvas.height);\n  }\n\n  if (stroke) {\n    const strokeColor = defaultValue(options.strokeColor, Color.BLACK);\n    context2D.strokeStyle = strokeColor.toCssColorString();\n    context2D.strokeText(text, x + padding, y);\n  }\n\n  if (fill) {\n    const fillColor = defaultValue(options.fillColor, Color.WHITE);\n    context2D.fillStyle = fillColor.toCssColorString();\n    context2D.fillText(text, x + padding, y);\n  }\n\n  return canvas;\n}\nexport default writeTextToCanvas;\n"],"names":["Ray","origin","direction","this","clone","ray","result","getPoint","t","Rectangle","west","south","east","north","Object","defineProperties","prototype","width","get","computeWidth","height","computeHeight","packedLength","pack","value","array","startingIndex","unpack","rectangle","fromDegrees","fromRadians","fromCartographicArray","cartographics","Number","MAX_VALUE","westOverIDL","eastOverIDL","i","len","length","position","Math","min","longitude","max","latitude","lonAdjusted","fromCartesianArray","cartesians","ellipsoid","cartesianToCartographic","equalsEpsilon","left","right","absoluteEpsilon","abs","equals","other","epsilon","validate","PI","southwest","northwest","northeast","southeast","center","intersection","otherRectangle","rectangleEast","rectangleWest","otherRectangleEast","otherRectangleWest","simpleIntersection","union","expand","cartographic","contains","subsampleLlaScratch","subsample","surfaceHeight","lla","cartographicToCartesian","subsection","westLerp","southLerp","eastLerp","northLerp","freeze","RectangleCollisionChecker","_tree","RectangleWithId","minX","minY","maxX","maxY","id","idCompare","a","b","fromRectangleAndId","insert","withId","removalScratch","remove","collisionScratch","collides","positionScratch","normalScratch","tangentScratch","bitangentScratch","rectangleScratch","stScratch","bottomBoundingSphere","topBoundingSphere","createAttributes","vertexFormat","attributes","geo","primitiveType","componentDatatype","componentsPerAttribute","values","positions","normal","normals","tangent","tangents","bitangent","bitangents","v1Scratch","v2Scratch","constructRectangle","rectangleGeometry","computedOptions","_vertexFormat","_ellipsoid","northCap","southCap","rowStart","rowEnd","rowHeight","size","Float64Array","undefined","textureCoordinates","st","Float32Array","posIndex","stIndex","row","col","x","y","z","k","tangentRotationMatrix","attrIndex","p","attrIndex1","attrIndex2","geodeticSurfaceNormal","calculateAttributes","indicesSize","indices","index","indicesIndex","j","upperLeft","lowerLeft","lowerRight","upperRight","northIndex","southIndex","p1","p2","addWallPositions","wallPositions","topPositions","bottomPositions","addWallTextureCoordinates","wallTextures","scratchVertexFormat","constructExtrudedRectangle","shadowVolume","_shadowVolume","offsetAttributeValue","_offsetAttribute","minHeight","_extrudedHeight","maxHeight","_surfaceHeight","newVertexFormat","topBottomGeo","newLength","set","textures","topSt","topNormals","offsetValue","extrudeNormals","extrudeDirection","hasOffsets","offsetAttribute","Uint8Array","applyOffset","topTangents","topBitangents","indicesLength","posLength","newIndices","widthMultiplier","perimeterPositions","corners","dupliateCorners","wallCount","wallExtrudeNormals","wallOffsetAttribute","computeTopOffsets","extrudeNormalIndex","wallOffsetIndex","area","threeI","normalIndex","tangentIndex","bitangentIndex","recomputeNormal","calculateAttributesWall","wallIndices","geometry","scratchRectanglePoints","nwScratch","stNwScratch","computeRectangle","granularity","rotation","RectangleGeometry","options","extrudedHeight","_rectangle","_granularity","_rotation","_stRotation","stRotation","_workerName","_rotatedRectangle","_textureCoordinateRotationPoints","scratchRectangle","scratchEllipsoid","scratchOptions","tangentRotationMatrixScratch","quaternionScratch","centerScratch","createGeometry","axis","geodeticSurfaceNormalCartographic","extrude","boundingSphere","lonScalar","latScalar","topBS","bottomBS","createShadowVolume","minHeightFunc","maxHeightFunc","unrotatedTextureRectangleScratch","points2DScratch","rotation2DScratch","rectangleCenterScratch","textureCoordinateRotationPoints","unrotatedTextureRectangle","points2D","boundingRectangle","toDesiredInComputed","boundingRectangleCenter","point2D","minXYCorner","maxYCorner","maxXCorner","Array","cos","sin","sqrt","RectangleGeometryLibrary","computeST","radiiSquared","nwCorner","stLatitude","granYCos","granXSin","cosLatitude","nZ","kZ","stLongitude","granYSin","granXCos","nX","nY","kX","kY","gamma","stNwCorner","stGranYCos","stGranXSin","stGranYSin","stGranXCos","stWest","stSouth","rotationMatrixScratch","nwCartesian","centerCartesian","proj","getRotationOptions","granularityX","granularityY","cosRotation","sinRotation","project","rotationMatrix","unproject","latitude0","latitude1","latitude2","longitude0","longitude1","longitude2","computeOptions","boundingRectangleScratch","nwCornerResult","stNwCornerResult","dx","dy","ceil","rotationOptions","stRotationOptions","RectangleOutlineGeometry","bottomCorner","topRightCorner","bottomLeftCorner","FIXED","INERTIAL","Request","throttleByServer","throttle","url","requestFunction","cancelFunction","priorityFunction","priority","type","serverKey","state","deferred","cancelled","cancel","RequestState","UNISSUED","RequestErrorEvent","statusCode","response","responseHeaders","toString","str","statistics","numberOfAttemptedRequests","numberOfActiveRequests","numberOfCancelledRequests","numberOfCancelledActiveRequests","numberOfFailedRequests","numberOfActiveRequestsEver","lastNumberOfActiveRequests","priorityHeapLength","requestHeap","comparator","maximumLength","reserve","activeRequests","numberOfActiveRequestsByServer","pageUri","document","location","href","requestCompletedEvent","RequestScheduler","updatePriority","request","issueRequest","promise","startRequest","push","then","results","raiseEvent","resolve","getRequestReceivedFunction","catch","error","reject","getRequestFailedFunction","cancelRequest","active","maximumRequests","maximumRequestsPerServer","requestsByServer","throttleRequests","debugShowStatistics","pop","serverHasOpenSlots","desiredRequests","maxRequests","heapHasOpenSlots","update","removeCount","activeLength","issuedRequests","internalArray","issuedLength","resort","openSlots","filledSlots","updateStatistics","getServerKey","uri","scheme","absoluteTo","normalize","authority","test","removedRequest","clearForSpecs","ISSUED","ACTIVE","RECEIVED","CANCELLED","FAILED","TERRAIN","IMAGERY","TILES3D","OTHER","xhrBlobSupported","xhr","XMLHttpRequest","open","responseType","e","parseQuery","resource","merge","preserveQueryParameters","queryString","query","indexOf","_queryParameters","combineQueryParameters","search","defaultClone","val","defaultVal","checkAndResetRequest","q1","q2","param","hasOwnProperty","q2Value","isArray","concat","slice","Resource","_url","_templateValues","templateValues","queryParameters","headers","proxy","retryCallback","retryAttempts","_retryCount","fragment","supportsImageBitmapOptionsPromise","fetchImage","flipY","skipColorSpaceConversion","preferImageBitmap","crossOrigin","isDataUri","isBlobUri","isCrossOriginUrl","_Implementations","createImage","Promise","retryOnError","retry","fetchJsonp","callbackParameterName","functionName","callbackQuery","setQueryParameters","window","data","loadAndExecuteScript","createIfNeeded","getDerivedResource","supportsImageBitmapOptions","createImageBitmap","fetchBlob","blob","all","imageOrientation","premultiplyAlpha","colorSpaceConversion","imageBitmaps","colorWithOptions","colorWithDefaults","isBlobSupported","getUrlComponent","extension","hasHeaders","keys","queryObject","stringifyQuery","replace","match","key","replacement","encodeURIComponent","getURL","params","useAsDefault","appendQueryParameters","setTemplateValues","template","that","getBaseUri","includeQuery","appendForwardSlash","fetchArrayBuffer","fetch","preferBlob","blobPromise","supportsImageBitmap","useImageBitmap","generatedBlobResource","generatedBlob","createImageBitmapFromBlob","blobUrl","URL","createObjectURL","image","revokeObjectURL","fetchText","fetchJson","Accept","JSON","parse","fetchXML","overrideMimeType","substring","_makeRequest","method","loadWithXhr","abort","dataUriRegex","decodeDataUriText","isBase64","decodeURIComponent","atob","decodeDataUriArrayBuffer","byteString","buffer","ArrayBuffer","view","charCodeAt","decodeResponse","loadWithHttpResponse","delete","head","post","put","patch","loadImageElement","Image","onload","naturalWidth","naturalHeight","onerror","src","xhrDeferred","noXMLHttpRequest","dataUriRegexResult","exec","mimeType","parser","Blob","DOMParser","parseFromString","decodeDataUri","require","http","protocol","zlib","hostname","port","path","on","res","chunkArray","chunk","Buffer","gunzip","resultUnzipped","end","loadWithHttpRequest","withCredentials","setRequestHeader","localFile","status","getAllResponseHeaders","browserResponseType","splitHeaders","trim","split","forEach","line","parts","header","shift","join","responseXML","hasChildNodes","responseText","send","_DefaultImplementations","DEFAULT","RuntimeError","message","stack","name","Error","create","constructor","S2_MAX_LEVEL","S2_LOOKUP_POSITIONS","S2_LOOKUP_IJ","S2_POSITION_TO_IJ","S2_POSITION_TO_ORIENTATION_MASK","S2_SWAP_MASK","S2Cell","cellId","isValidId","_cellId","_level","getLevel","convertCellIdToFaceIJ","generateLookupCell","face","BigInt","bits","extractMask","offset","convertFaceUVtoXYZ","u","v","convertSTtoUV","s","convertSiTitoST","si","convertIJtoSTMinimum","level","originalOrientation","orientation","ij","r","lsb","fromToken","token","isValidToken","getIdFromToken","repeat","getTokenFromId","trailingZeroHexChars","floor","Mod67BitPosition","hexString","lsbPosition","getChild","newLsb","getParent","getParentAtLevel","lsbForLevel","getCenter","faceSiTi","faceIJ","isLeaf","shouldCorrect","correction","convertCellIdToFaceSiTi","ti","convertFaceSiTitoXYZ","getS2Center","getVertex","vertex","uv","cellSize","getSizeIJ","d","ijLow","ijHigh","convertIJLeveltoBoundUV","getS2Vertex","fromFacePositionLevel","pow","faceBitString","positionBitString","positionPrefixPadding","positionSuffixPadding","getPosition","screenSpaceEventHandler","event","element","_element","clientX","clientY","rect","getBoundingClientRect","top","getInputEventKey","modifier","getModifier","shiftKey","ctrlKey","altKey","MouseButton","registerListener","domType","callback","listener","addEventListener","capture","passive","_removalFunctions","removeEventListener","mouseDownEvent","gotTouchEvent","_lastSeenTouchEvent","canProcessMouseEvent","ScreenSpaceEventHandler","mouseEmulationIgnoreMilliseconds","checkPixelTolerance","startPosition","endPosition","pixelTolerance","xDiff","yDiff","handleMouseDown","button","screenSpaceEventType","_buttonDown","_primaryPosition","_primaryStartPosition","_primaryPreviousPosition","action","getInputAction","preventDefault","mouseUpEvent","mouseClickEvent","cancelMouseEvent","clickScreenSpaceEventType","clickAction","_clickPixelTolerance","handleMouseUp","mouseMoveEvent","handleMouseMove","previousPosition","mouseDblClickEvent","handleDblClick","handleWheel","delta","deltaY","deltaMode","DOM_DELTA_PIXEL","DOM_DELTA_LINE","detail","wheelDelta","handleTouchStart","changedTouches","touch","identifier","_positions","fireTouchEvents","previousPositions","_previousPositions","handleTouchEnd","touchStartEvent","touch2StartEvent","position1","position2","touchEndEvent","touchClickEvent","touchHoldEvent","numberOfTouches","pinching","_isPinching","_touchHoldTimer","clearTimeout","_isTouchHolding","setTimeout","isDestroyed","_holdPixelTolerance","touchHoldDelayMilliseconds","handleTouchMove","fireTouchMoveEvents","touchMoveEvent","touchPinchMovementEvent","distance","angleAndHeight","previousPosition1","previousPosition2","dX","dY","dist","prevDX","prevDY","prevDist","cY","prevCY","angle","atan2","prevAngle","handlePointerDown","target","setPointerCapture","pointerId","pointerType","handlePointerUp","handlePointerMove","_inputEvents","LEFT","MIDDLE","RIGHT","alternateElement","disableRootEvents","wheelEvent","onmousewheel","registerListeners","setInputAction","removeInputAction","destroy","removalFunctions","unregisterListeners","LEFT_DOWN","LEFT_UP","LEFT_CLICK","LEFT_DOUBLE_CLICK","RIGHT_DOWN","RIGHT_UP","RIGHT_CLICK","MIDDLE_DOWN","MIDDLE_UP","MIDDLE_CLICK","MOUSE_MOVE","WHEEL","PINCH_START","PINCH_END","PINCH_MOVE","ShowGeometryInstanceAttribute","show","toValue","Simon1994PlanetaryPositions","taiToTdb","date","days","daysSinceJ2000InTerrestrialTime","g","computeTdbMinusTtSpice","epoch","RadiansPerDegree","RadiansPerArcSecond","perifocalToEquatorial","elementsToCartesian","semimajorAxis","eccentricity","inclination","longitudeOfPerigee","longitudeOfNode","meanLongitude","radiusOfPeriapsis","argumentOfPeriapsis","rightAscensionOfAscendingNode","trueAnomaly","meanAnomaly","eccentricAnomaly","revs","trueAnomalyX","trueAnomalyY","eccentricAnomalyToTrueAnomaly","count","iterationValue","keplerEqConvergence","meanAnomalyToEccentricAnomaly","meanAnomalyToTrueAnomaly","tolerance","chooseOrbit","acos","rightAscension","cosap","sinap","cosi","sini","cosraan","sinraan","perifocalToCartesianMatrix","semilatus","costheta","sintheta","denom","radius","meanLongitude0","meanLongitude1","scratchDate","computeSimonMoon","dayNumber","secondsOfDay","t2","t3","t4","inclinationConstant","inclinationSecPart","longitudeOfPerigeeConstant","longitudeOfPerigeeSecPart","longitudeOfNodeConstant","longitudeOfNodeSecPart","meanLongitudeConstant","meanLongitudeSecPart","D","l","lprime","psi","twoD","fourD","sixD","twol","threel","fourl","twoF","twoPsi","threePsi","perigeeAndMean","axesTransformation","translation","computeSunPositionInEarthInertialFrame","julianDate","computeSimonEarthMoonBarycenter","computeSimonEarth","computeMoonPositionInEarthInertialFrame","interpolateColors","p0","color0","color1","minDistance","numPoints","r0","red","g0","green","b0","blue","a0","alpha","r1","g1","b1","a1","redPerVertex","greenPerVertex","bluePerVertex","alphaPerVertex","SimplePolylineGeometry","colors","colorsPerVertex","_colors","_colorsPerVertex","_arcType","arcType","numComponents","scratchArray1","scratchArray2","generateArcOptionsScratch","simplePolylineGeometry","maximumRadius","perSegmentColors","positionValues","numberOfPositions","colorValues","color","subdivisionSize","numberOfPointsFunction","generateArcFunction","heights","generateArcOptions","positionCount","ci","pos","segLen","lastColor","positionIndex","colorIndex","numberOfIndices","SphereGeometry","ellipsoidOptions","radii","stackPartitions","slicePartitions","_ellipsoidGeometry","scratchEllipsoidGeometry","ellipsoidGeometry","_stackPartitions","_slicePartitions","_radii","sphereGeometry","SphereOutlineGeometry","subdivisions","_subdivisions","Spherical","clock","cone","magnitude","fromCartesian3","cartesian3","radialSquared","spherical","Spline","times","points","getPointType","point","evaluate","findTimeInterval","time","startIndex","wrapTime","timeEnd","timeStart","timeStretch","divs","clampTime","SteppedSpline","_times","_points","_pointType","_lastTimeIndex","PointType","canTransferArrayBuffer","TaskProcessor","_canTransferArrayBuffer","worker","Worker","getWorkerUrl","postMessage","webkitPostMessage","Int8Array","onmessage","terminate","taskCompletedEvent","completeTask","processor","_activeTasks","deferreds","_deferreds","moduleID","script","blobBuilder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","webkitURL","bootstrapperUrlResult","createWorker","bootstrapMessage","loaderConfig","paths","Workers","baseUrl","workerModule","_workerPath","workerPath","maximumActiveTasks","_workerModulePrefix","_maximumActiveTasks","POSITIVE_INFINITY","_nextID","emptyTransferableObjectArray","scheduleTask","parameters","transferableObjects","_worker","initWebAssemblyModule","webAssemblyOptions","wasmOptions","config","modulePath","wasmBinaryFile","wasmBinary","fallbackModulePath","arrayBuffer","getWebAssemblyLoaderConfig","wasmConfig","binary","webAssemblyConfig","_defaultWorkerModulePrefix","TerrainData","credits","waterMask","interpolateHeight","isChildAvailable","createMesh","upsample","wasCreatedByUpsampling","maximumAsynchronousTasks","cartesian3Scratch","cartesian3DimScratch","cartesian2Scratch","matrix4Scratch","matrix4Scratch2","SHIFT_LEFT_12","TerrainEncoding","axisAlignedBoundingBox","minimumHeight","maximumHeight","fromENU","hasVertexNormals","hasWebMercatorT","hasGeodeticSurfaceNormals","exaggeration","exaggerationRelativeHeight","toENU","matrix","quantization","minimum","maximum","dimensions","hDim","scale","translationMatrix","scaleMatrix","toScaledENU","fromScaledENU","stride","_offsetGeodeticSurfaceNormal","_offsetVertexNormal","_calculateStrideAndOffsets","encode","vertexBuffer","bufferIndex","normalToPack","webMercatorT","h","compressed0","compressed1","compressed2","compressed3","scratchPosition","scratchGeodeticSurfaceNormal","addGeodeticSurfaceNormals","oldBuffer","newBuffer","oldStride","vertexCount","newStride","oldIndex","decodePosition","removeGeodeticSurfaceNormals","xy","zh","getExaggeratedPosition","decodeGeodeticSurfaceNormal","rawHeight","decodeHeight","heightDifference","decodeTextureCoordinates","decodeWebMercatorT","getOctEncodedNormal","temp","vertexStride","attributesIndicesNone","position3DAndHeight","textureCoordAndEncodedNormals","attributesIndicesBits12","getAttributes","datatype","sizeInBytes","strideInBytes","offsetInBytes","addAttribute","componentsTexCoordAndNormals","usingAttribute0Component4","usingAttribute1Component1","getAttributeLocations","encoding","TerrainExaggeration","relativeHeight","scratchCartographic","terrainExaggeration","terrainExaggerationRelativeHeight","newHeight","getHeight","vertices","indexCountWithoutSkirts","vertexCountWithoutSkirts","boundingSphere3D","occludeePointInScaledSpace","orientedBoundingBox","westIndicesSouthToNorth","southIndicesEastToWest","eastIndicesNorthToSouth","northIndicesWestToEast","TerrainProvider","errorEvent","credit","tilingScheme","ready","readyPromise","hasWaterMask","availability","regularGridIndicesCache","getRegularGridIndices","byWidth","Uint16Array","Uint32Array","addRegularGridIndices","regularGridAndEdgeIndicesCache","getRegularGridIndicesAndEdgeIndices","indicesAndEdges","edgeIndices","getEdgeIndices","regularGridAndSkirtAndEdgeIndicesCache","addSkirtIndices","vertexIndex","previousIndex","getRegularGridAndSkirtIndicesAndEdgeIndices","gridVertexCount","gridIndexCount","edgeVertexCount","indexCount","heightmapTerrainQuality","getEstimatedLevelZeroGeometricErrorForAHeightmap","tileImageWidth","numberOfTilesAtLevelZero","requestTileGeometry","getLevelMaximumGeometricError","getTileDataAvailable","loadTileDataAvailability","NONE","BITS12","TileAvailability","maximumLevel","_tilingScheme","_maximumLevel","_rootNodes","findNode","nodes","node","addAvailableTileRange","startX","startY","endX","endY","rootNodes","QuadtreeNode","tileXYToRectangle","rectangleWithLevel","RectangleWithLevel","rootNode","rectanglesOverlap","extent","putRectangleInQuadtree","computeMaximumLevelAtPosition","nodeIndex","rectangleContainsPosition","findMaxLevelFromNode","rectanglesScratch","remainingToCoverByLevelScratch","westScratch","eastScratch","computeBestAvailableLevelOverRectangle","rectangles","remainingToCoverByLevel","updateCoverageWithNode","cartographicScratch","parent","_sw","_se","_nw","_ne","rectangle1","rectangle2","maxDepth","rectangleFullyContainsRectangle","nw","ne","sw","se","rectangleLevelComparator","splice","potentialContainer","rectangleToTest","positionToTest","stopNode","maxLevel","found","rectanglesToCover","anyOverlap","subtractRectangle","rectangleList","rectangleToSubtract","isTileAvailable","computeChildMaskForTile","childLevel","mask","WEST","NORTH","EAST","SOUTH","NORTHWEST","NORTHEAST","SOUTHWEST","SOUTHEAST","TileProviderError","provider","timesRetried","handleError","previousError","retryFunction","errorDetails","numberOfListeners","handleSuccess","TilingScheme","projection","getNumberOfXTilesAtLevel","getNumberOfYTilesAtLevel","rectangleToNativeRectangle","tileXYToNativeRectangle","positionToTileXY","SECONDS_PER_MILLISECOND","SECONDS_PER_MINUTE","MINUTES_PER_HOUR","HOURS_PER_DAY","SECONDS_PER_HOUR","MINUTES_PER_DAY","SECONDS_PER_DAY","DAYS_PER_JULIAN_CENTURY","PICOSECOND","MODIFIED_JULIAN_DATE_DIFFERENCE","TimeInterval","start","stop","isStartIncluded","isStopIncluded","isEmpty","stopComparedToStart","scratchInterval","fromIso8601","iso8601","dates","toIso8601","timeInterval","precision","dataComparer","intersect","mergeCallback","EMPTY","leftStart","leftStop","rightStart","rightStop","intersectsStartRight","intersectsStartLeft","leftIsStartIncluded","leftIsStopIncluded","rightIsStartIncluded","rightIsStopIncluded","leftLessThanRight","startComparedToDate","dateComparedToStop","compareIntervalStartTimes","TimeIntervalCollection","intervals","_intervals","_changedEvent","addInterval","changedEvent","rightIntervals","removeAll","findIntervalContainingDate","findDataForIntervalContainingDate","indexOfScratch","findInterval","interval","comparison","removeInterval","otherIntervals","leftInterval","rightInterval","fromJulianDateArray","julianDates","dataCallback","leadingInterval","trailingInterval","startDate","endDate","scratchGregorianDate","monthLengths","addToDate","duration","millisecond","second","minute","hour","day","month","year","scratchJulianDate","durationRegex","parseDuration","matches","seconds","scratchDuration","fromIso8601DateArray","iso8601Dates","map","fromIso8601DurationArray","iso8601Durations","relativeToPrevious","previousDate","UTC","TAI","Tipsify","maximumIndex","cacheSize","numIndices","currentIndex","intoIndices","vertexTimeStamps","tipsify","cursor","getNextVertex","oneRing","deadEnd","maximumIndexPlusOne","n","m","itOneRing","numLiveTriangles","timeStamp","skipDeadEnd","endIndex","vertexTriangles","triangle","f","intoVertices","currentOutputIndex","outputIndices","numTriangles","triangleEmitted","limit","Transforms","vectorProductLocalFrame","up","down","degeneratePositionLocalFrame","localFrameToFixedFrameCache","scratchCalculateCartesian","scratchFirstCartesian","scratchSecondCartesian","scratchThirdCartesian","localFrameToFixedFrameGenerator","firstAxis","secondAxis","thirdAxis","resultat","hashAxis","sign","eastNorthUpToFixedFrame","northEastDownToFixedFrame","northUpEastToFixedFrame","northWestUpToFixedFrame","scratchHPRQuaternion","scratchScale","scratchHPRMatrix4","headingPitchRollToFixedFrame","headingPitchRoll","fixedFrameTransform","hprQuaternion","hprMatrix","scratchENUMatrix4","scratchHPRMatrix3","headingPitchRollQuaternion","transform","noScale","hprCenterScratch","ffScratch","hprTransformScratch","hprRotationScratch","hprQuaternionScratch","fixedFrameToHeadingPitchRoll","heading","pitch","roll","toFixedFrame","transformCopy","quaternionRotation","twoPiOverSecondsInDay","dateInUtc","computeTemeToPseudoFixedMatrix","utcDayNumber","utcSecondsIntoDay","diffDays","gha","cosGha","sinGha","iau2006XysData","earthOrientationParameters","ttMinusTai","preloadIcrfFixed","startDayTT","startSecondTT","stopDayTT","stopSecondTT","xysPromise","preload","eopPromise","getPromiseToLoad","computeIcrfToFixedMatrix","fixedToIcrfMtx","computeFixedToIcrfMatrix","xysScratch","eopScratch","rotation1Scratch","rotation2Scratch","eop","compute","dayTT","secondTT","xys","computeXysRadians","xPoleOffset","yPoleOffset","rotation1","rotation2","matrixQ","daysSinceJ2000","fractionOfDay","ut1MinusUtc","era","earthRotation","pfToIcrf","cosxp","xPoleWander","cosyp","yPoleWander","sinxp","sinyp","ttt","sp","cossp","sinsp","fToPfMtx","pointToWindowCoordinatesTemp","pointToWindowCoordinates","modelViewProjectionMatrix","viewportTransformation","pointToGLWindowCoordinates","tmp","w","rightScratch","upScratch","rotationMatrixFromPositionVelocity","velocity","swizzleMatrix","scratchCartesian3Projection","scratchCenter","scratchRotation","scratchFromENU","scratchToENU","basisTo2D","rtcCenter","projectedPosition","local","wgs84To2DModelMatrix","defaultScale","defaultTranslation","defaultRotation","TranslationRotationScale","TridiagonalSystemSolver","lower","diagonal","upper","c","scalar","TrustedServers","_servers","add","host","toLowerCase","getAuthority","clear","DataRectangle","VRTheWorldTerrainProvider","_resource","_errorEvent","_ready","_readyPromise","_terrainDataStructure","heightScale","heightOffset","elementsPerHeight","elementMultiplier","isBigEndian","lowestEncodedHeight","highestEncodedHeight","_credit","_rectangles","metadataError","metadataSuccess","xml","srs","getElementsByTagName","textContent","metadataFailure","tileFormat","_heightmapWidth","parseInt","getAttribute","_heightmapHeight","_levelZeroMaximumGeometricError","dataRectangles","dataRectangle","parseFloat","requestMetadata","yTiles","cesium","childTileMask","getChildMask","structure","parentRectangle","childMask","testRectangle","isTileInRectangle","tileRectangle","VertexFormat","POSITION_ONLY","POSITION_AND_NORMAL","POSITION_NORMAL_AND_ST","POSITION_AND_ST","POSITION_AND_COLOR","ALL","VideoSynchronizer","_clock","_clockSubscription","_seekFunction","_lastPlaybackRate","_seeking","_firstTickAfterSeek","oldValue","onTick","_onTick","_trySetPlaybackRate","multiplier","playbackRate","readyState","paused","shouldAnimate","play","pause","clockTime","currentTime","videoTime","desiredTime","loop","PARTIAL","FULL","VK_FORMAT_UNDEFINED","VK_FORMAT_R4G4_UNORM_PACK8","VK_FORMAT_R4G4B4A4_UNORM_PACK16","VK_FORMAT_B4G4R4A4_UNORM_PACK16","VK_FORMAT_R5G6B5_UNORM_PACK16","VK_FORMAT_B5G6R5_UNORM_PACK16","VK_FORMAT_R5G5B5A1_UNORM_PACK16","VK_FORMAT_B5G5R5A1_UNORM_PACK16","VK_FORMAT_A1R5G5B5_UNORM_PACK16","VK_FORMAT_R8_UNORM","VK_FORMAT_R8_SNORM","VK_FORMAT_R8_USCALED","VK_FORMAT_R8_SSCALED","VK_FORMAT_R8_UINT","VK_FORMAT_R8_SINT","VK_FORMAT_R8_SRGB","VK_FORMAT_R8G8_UNORM","VK_FORMAT_R8G8_SNORM","VK_FORMAT_R8G8_USCALED","VK_FORMAT_R8G8_SSCALED","VK_FORMAT_R8G8_UINT","VK_FORMAT_R8G8_SINT","VK_FORMAT_R8G8_SRGB","VK_FORMAT_R8G8B8_UNORM","VK_FORMAT_R8G8B8_SNORM","VK_FORMAT_R8G8B8_USCALED","VK_FORMAT_R8G8B8_SSCALED","VK_FORMAT_R8G8B8_UINT","VK_FORMAT_R8G8B8_SINT","VK_FORMAT_R8G8B8_SRGB","VK_FORMAT_B8G8R8_UNORM","VK_FORMAT_B8G8R8_SNORM","VK_FORMAT_B8G8R8_USCALED","VK_FORMAT_B8G8R8_SSCALED","VK_FORMAT_B8G8R8_UINT","VK_FORMAT_B8G8R8_SINT","VK_FORMAT_B8G8R8_SRGB","VK_FORMAT_R8G8B8A8_UNORM","VK_FORMAT_R8G8B8A8_SNORM","VK_FORMAT_R8G8B8A8_USCALED","VK_FORMAT_R8G8B8A8_SSCALED","VK_FORMAT_R8G8B8A8_UINT","VK_FORMAT_R8G8B8A8_SINT","VK_FORMAT_R8G8B8A8_SRGB","VK_FORMAT_B8G8R8A8_UNORM","VK_FORMAT_B8G8R8A8_SNORM","VK_FORMAT_B8G8R8A8_USCALED","VK_FORMAT_B8G8R8A8_SSCALED","VK_FORMAT_B8G8R8A8_UINT","VK_FORMAT_B8G8R8A8_SINT","VK_FORMAT_B8G8R8A8_SRGB","VK_FORMAT_A8B8G8R8_UNORM_PACK32","VK_FORMAT_A8B8G8R8_SNORM_PACK32","VK_FORMAT_A8B8G8R8_USCALED_PACK32","VK_FORMAT_A8B8G8R8_SSCALED_PACK32","VK_FORMAT_A8B8G8R8_UINT_PACK32","VK_FORMAT_A8B8G8R8_SINT_PACK32","VK_FORMAT_A8B8G8R8_SRGB_PACK32","VK_FORMAT_A2R10G10B10_UNORM_PACK32","VK_FORMAT_A2R10G10B10_SNORM_PACK32","VK_FORMAT_A2R10G10B10_USCALED_PACK32","VK_FORMAT_A2R10G10B10_SSCALED_PACK32","VK_FORMAT_A2R10G10B10_UINT_PACK32","VK_FORMAT_A2R10G10B10_SINT_PACK32","VK_FORMAT_A2B10G10R10_UNORM_PACK32","VK_FORMAT_A2B10G10R10_SNORM_PACK32","VK_FORMAT_A2B10G10R10_USCALED_PACK32","VK_FORMAT_A2B10G10R10_SSCALED_PACK32","VK_FORMAT_A2B10G10R10_UINT_PACK32","VK_FORMAT_A2B10G10R10_SINT_PACK32","VK_FORMAT_R16_UNORM","VK_FORMAT_R16_SNORM","VK_FORMAT_R16_USCALED","VK_FORMAT_R16_SSCALED","VK_FORMAT_R16_UINT","VK_FORMAT_R16_SINT","VK_FORMAT_R16_SFLOAT","VK_FORMAT_R16G16_UNORM","VK_FORMAT_R16G16_SNORM","VK_FORMAT_R16G16_USCALED","VK_FORMAT_R16G16_SSCALED","VK_FORMAT_R16G16_UINT","VK_FORMAT_R16G16_SINT","VK_FORMAT_R16G16_SFLOAT","VK_FORMAT_R16G16B16_UNORM","VK_FORMAT_R16G16B16_SNORM","VK_FORMAT_R16G16B16_USCALED","VK_FORMAT_R16G16B16_SSCALED","VK_FORMAT_R16G16B16_UINT","VK_FORMAT_R16G16B16_SINT","VK_FORMAT_R16G16B16_SFLOAT","VK_FORMAT_R16G16B16A16_UNORM","VK_FORMAT_R16G16B16A16_SNORM","VK_FORMAT_R16G16B16A16_USCALED","VK_FORMAT_R16G16B16A16_SSCALED","VK_FORMAT_R16G16B16A16_UINT","VK_FORMAT_R16G16B16A16_SINT","VK_FORMAT_R16G16B16A16_SFLOAT","VK_FORMAT_R32_UINT","VK_FORMAT_R32_SINT","VK_FORMAT_R32_SFLOAT","VK_FORMAT_R32G32_UINT","VK_FORMAT_R32G32_SINT","VK_FORMAT_R32G32_SFLOAT","VK_FORMAT_R32G32B32_UINT","VK_FORMAT_R32G32B32_SINT","VK_FORMAT_R32G32B32_SFLOAT","VK_FORMAT_R32G32B32A32_UINT","VK_FORMAT_R32G32B32A32_SINT","VK_FORMAT_R32G32B32A32_SFLOAT","VK_FORMAT_R64_UINT","VK_FORMAT_R64_SINT","VK_FORMAT_R64_SFLOAT","VK_FORMAT_R64G64_UINT","VK_FORMAT_R64G64_SINT","VK_FORMAT_R64G64_SFLOAT","VK_FORMAT_R64G64B64_UINT","VK_FORMAT_R64G64B64_SINT","VK_FORMAT_R64G64B64_SFLOAT","VK_FORMAT_R64G64B64A64_UINT","VK_FORMAT_R64G64B64A64_SINT","VK_FORMAT_R64G64B64A64_SFLOAT","VK_FORMAT_B10G11R11_UFLOAT_PACK32","VK_FORMAT_E5B9G9R9_UFLOAT_PACK32","VK_FORMAT_D16_UNORM","VK_FORMAT_X8_D24_UNORM_PACK32","VK_FORMAT_D32_SFLOAT","VK_FORMAT_S8_UINT","VK_FORMAT_D16_UNORM_S8_UINT","VK_FORMAT_D24_UNORM_S8_UINT","VK_FORMAT_D32_SFLOAT_S8_UINT","VK_FORMAT_BC1_RGB_UNORM_BLOCK","VK_FORMAT_BC1_RGB_SRGB_BLOCK","VK_FORMAT_BC1_RGBA_UNORM_BLOCK","VK_FORMAT_BC1_RGBA_SRGB_BLOCK","VK_FORMAT_BC2_UNORM_BLOCK","VK_FORMAT_BC2_SRGB_BLOCK","VK_FORMAT_BC3_UNORM_BLOCK","VK_FORMAT_BC3_SRGB_BLOCK","VK_FORMAT_BC4_UNORM_BLOCK","VK_FORMAT_BC4_SNORM_BLOCK","VK_FORMAT_BC5_UNORM_BLOCK","VK_FORMAT_BC5_SNORM_BLOCK","VK_FORMAT_BC6H_UFLOAT_BLOCK","VK_FORMAT_BC6H_SFLOAT_BLOCK","VK_FORMAT_BC7_UNORM_BLOCK","VK_FORMAT_BC7_SRGB_BLOCK","VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK","VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK","VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK","VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK","VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK","VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK","VK_FORMAT_EAC_R11_UNORM_BLOCK","VK_FORMAT_EAC_R11_SNORM_BLOCK","VK_FORMAT_EAC_R11G11_UNORM_BLOCK","VK_FORMAT_EAC_R11G11_SNORM_BLOCK","VK_FORMAT_ASTC_4x4_UNORM_BLOCK","VK_FORMAT_ASTC_4x4_SRGB_BLOCK","VK_FORMAT_ASTC_5x4_UNORM_BLOCK","VK_FORMAT_ASTC_5x4_SRGB_BLOCK","VK_FORMAT_ASTC_5x5_UNORM_BLOCK","VK_FORMAT_ASTC_5x5_SRGB_BLOCK","VK_FORMAT_ASTC_6x5_UNORM_BLOCK","VK_FORMAT_ASTC_6x5_SRGB_BLOCK","VK_FORMAT_ASTC_6x6_UNORM_BLOCK","VK_FORMAT_ASTC_6x6_SRGB_BLOCK","VK_FORMAT_ASTC_8x5_UNORM_BLOCK","VK_FORMAT_ASTC_8x5_SRGB_BLOCK","VK_FORMAT_ASTC_8x6_UNORM_BLOCK","VK_FORMAT_ASTC_8x6_SRGB_BLOCK","VK_FORMAT_ASTC_8x8_UNORM_BLOCK","VK_FORMAT_ASTC_8x8_SRGB_BLOCK","VK_FORMAT_ASTC_10x5_UNORM_BLOCK","VK_FORMAT_ASTC_10x5_SRGB_BLOCK","VK_FORMAT_ASTC_10x6_UNORM_BLOCK","VK_FORMAT_ASTC_10x6_SRGB_BLOCK","VK_FORMAT_ASTC_10x8_UNORM_BLOCK","VK_FORMAT_ASTC_10x8_SRGB_BLOCK","VK_FORMAT_ASTC_10x10_UNORM_BLOCK","VK_FORMAT_ASTC_10x10_SRGB_BLOCK","VK_FORMAT_ASTC_12x10_UNORM_BLOCK","VK_FORMAT_ASTC_12x10_SRGB_BLOCK","VK_FORMAT_ASTC_12x12_UNORM_BLOCK","VK_FORMAT_ASTC_12x12_SRGB_BLOCK","VK_FORMAT_G8B8G8R8_422_UNORM","VK_FORMAT_B8G8R8G8_422_UNORM","VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM","VK_FORMAT_G8_B8R8_2PLANE_420_UNORM","VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM","VK_FORMAT_G8_B8R8_2PLANE_422_UNORM","VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM","VK_FORMAT_R10X6_UNORM_PACK16","VK_FORMAT_R10X6G10X6_UNORM_2PACK16","VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16","VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16","VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16","VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16","VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16","VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16","VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16","VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16","VK_FORMAT_R12X4_UNORM_PACK16","VK_FORMAT_R12X4G12X4_UNORM_2PACK16","VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16","VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16","VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16","VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16","VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16","VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16","VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16","VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16","VK_FORMAT_G16B16G16R16_422_UNORM","VK_FORMAT_B16G16R16G16_422_UNORM","VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM","VK_FORMAT_G16_B16R16_2PLANE_420_UNORM","VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM","VK_FORMAT_G16_B16R16_2PLANE_422_UNORM","VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM","VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG","VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG","VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG","VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG","VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG","VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG","VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG","VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG","VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT","VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT","VK_FORMAT_G8B8G8R8_422_UNORM_KHR","VK_FORMAT_B8G8R8G8_422_UNORM_KHR","VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR","VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR","VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR","VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR","VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR","VK_FORMAT_R10X6_UNORM_PACK16_KHR","VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR","VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR","VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR","VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR","VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR","VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR","VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR","VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR","VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR","VK_FORMAT_R12X4_UNORM_PACK16_KHR","VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR","VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR","VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR","VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR","VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR","VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR","VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR","VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR","VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR","VK_FORMAT_G16B16G16R16_422_UNORM_KHR","VK_FORMAT_B16G16R16G16_422_UNORM_KHR","VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR","VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR","VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR","VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR","VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR","scratchCartesian3Position1","scratchCartesian3Position2","scratchCartesian3Position4","scratchCartesian3Position5","scratchBitangent","scratchTangent","scratchNormal","WallGeometry","maximumHeights","minimumHeights","_minimumHeights","_maximumHeights","fromConstantHeights","minHeights","maxHeights","doMin","doMax","wallGeometry","numCorners","ds","i3","topPosition","bottomPosition","nextTop","groundPosition","scalednextPosition","scaledGroundPosition","numVertices","edgeIndex","LL","LR","pl","pr","UL","UR","WallGeometryLibrary","latLonEquals","c0","c1","scratchCartographic1","scratchCartographic2","positionsArrayScratch","heightsArrayScratch","computePositions","duplicateCorners","o","topHeights","bottomHeights","hasBottomHeights","hasTopHeights","cleanedPositions","cleanedTopHeights","cleanedBottomHeights","v0","hasAllSameHeights","v1","removeDuplicates","generateArcPositions","generateArcHeights","WallOutlineGeometry","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","COLOR_BUFFER_BIT","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","FUNC_ADD","BLEND_EQUATION","BLEND_EQUATION_RGB","BLEND_EQUATION_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","BLEND_DST_RGB","BLEND_SRC_RGB","BLEND_DST_ALPHA","BLEND_SRC_ALPHA","CONSTANT_COLOR","ONE_MINUS_CONSTANT_COLOR","CONSTANT_ALPHA","ONE_MINUS_CONSTANT_ALPHA","BLEND_COLOR","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER_BINDING","STREAM_DRAW","STATIC_DRAW","DYNAMIC_DRAW","BUFFER_SIZE","BUFFER_USAGE","CURRENT_VERTEX_ATTRIB","FRONT","BACK","FRONT_AND_BACK","CULL_FACE","BLEND","DITHER","STENCIL_TEST","DEPTH_TEST","SCISSOR_TEST","POLYGON_OFFSET_FILL","SAMPLE_ALPHA_TO_COVERAGE","SAMPLE_COVERAGE","NO_ERROR","INVALID_ENUM","INVALID_VALUE","INVALID_OPERATION","OUT_OF_MEMORY","CW","CCW","LINE_WIDTH","ALIASED_POINT_SIZE_RANGE","ALIASED_LINE_WIDTH_RANGE","CULL_FACE_MODE","FRONT_FACE","DEPTH_RANGE","DEPTH_WRITEMASK","DEPTH_CLEAR_VALUE","DEPTH_FUNC","STENCIL_CLEAR_VALUE","STENCIL_FUNC","STENCIL_FAIL","STENCIL_PASS_DEPTH_FAIL","STENCIL_PASS_DEPTH_PASS","STENCIL_REF","STENCIL_VALUE_MASK","STENCIL_WRITEMASK","STENCIL_BACK_FUNC","STENCIL_BACK_FAIL","STENCIL_BACK_PASS_DEPTH_FAIL","STENCIL_BACK_PASS_DEPTH_PASS","STENCIL_BACK_REF","STENCIL_BACK_VALUE_MASK","STENCIL_BACK_WRITEMASK","VIEWPORT","SCISSOR_BOX","COLOR_CLEAR_VALUE","COLOR_WRITEMASK","UNPACK_ALIGNMENT","PACK_ALIGNMENT","MAX_TEXTURE_SIZE","MAX_VIEWPORT_DIMS","SUBPIXEL_BITS","RED_BITS","GREEN_BITS","BLUE_BITS","ALPHA_BITS","DEPTH_BITS","STENCIL_BITS","POLYGON_OFFSET_UNITS","POLYGON_OFFSET_FACTOR","TEXTURE_BINDING_2D","SAMPLE_BUFFERS","SAMPLES","SAMPLE_COVERAGE_VALUE","SAMPLE_COVERAGE_INVERT","COMPRESSED_TEXTURE_FORMATS","DONT_CARE","FASTEST","NICEST","GENERATE_MIPMAP_HINT","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","DEPTH_COMPONENT","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","FRAGMENT_SHADER","VERTEX_SHADER","MAX_VERTEX_ATTRIBS","MAX_VERTEX_UNIFORM_VECTORS","MAX_VARYING_VECTORS","MAX_COMBINED_TEXTURE_IMAGE_UNITS","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_IMAGE_UNITS","MAX_FRAGMENT_UNIFORM_VECTORS","SHADER_TYPE","DELETE_STATUS","LINK_STATUS","VALIDATE_STATUS","ATTACHED_SHADERS","ACTIVE_UNIFORMS","ACTIVE_ATTRIBUTES","SHADING_LANGUAGE_VERSION","CURRENT_PROGRAM","NEVER","LESS","EQUAL","LEQUAL","GREATER","NOTEQUAL","GEQUAL","ALWAYS","KEEP","REPLACE","INCR","DECR","INVERT","INCR_WRAP","DECR_WRAP","VENDOR","RENDERER","VERSION","NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_2D","TEXTURE","TEXTURE_CUBE_MAP","TEXTURE_BINDING_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","TEXTURE_CUBE_MAP_NEGATIVE_X","TEXTURE_CUBE_MAP_POSITIVE_Y","TEXTURE_CUBE_MAP_NEGATIVE_Y","TEXTURE_CUBE_MAP_POSITIVE_Z","TEXTURE_CUBE_MAP_NEGATIVE_Z","MAX_CUBE_MAP_TEXTURE_SIZE","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","TEXTURE9","TEXTURE10","TEXTURE11","TEXTURE12","TEXTURE13","TEXTURE14","TEXTURE15","TEXTURE16","TEXTURE17","TEXTURE18","TEXTURE19","TEXTURE20","TEXTURE21","TEXTURE22","TEXTURE23","TEXTURE24","TEXTURE25","TEXTURE26","TEXTURE27","TEXTURE28","TEXTURE29","TEXTURE30","TEXTURE31","ACTIVE_TEXTURE","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","VERTEX_ATTRIB_ARRAY_ENABLED","VERTEX_ATTRIB_ARRAY_SIZE","VERTEX_ATTRIB_ARRAY_STRIDE","VERTEX_ATTRIB_ARRAY_TYPE","VERTEX_ATTRIB_ARRAY_NORMALIZED","VERTEX_ATTRIB_ARRAY_POINTER","VERTEX_ATTRIB_ARRAY_BUFFER_BINDING","IMPLEMENTATION_COLOR_READ_TYPE","IMPLEMENTATION_COLOR_READ_FORMAT","COMPILE_STATUS","LOW_FLOAT","MEDIUM_FLOAT","HIGH_FLOAT","LOW_INT","MEDIUM_INT","HIGH_INT","FRAMEBUFFER","RENDERBUFFER","RGBA4","RGB5_A1","RGB565","DEPTH_COMPONENT16","STENCIL_INDEX","STENCIL_INDEX8","DEPTH_STENCIL","RENDERBUFFER_WIDTH","RENDERBUFFER_HEIGHT","RENDERBUFFER_INTERNAL_FORMAT","RENDERBUFFER_RED_SIZE","RENDERBUFFER_GREEN_SIZE","RENDERBUFFER_BLUE_SIZE","RENDERBUFFER_ALPHA_SIZE","RENDERBUFFER_DEPTH_SIZE","RENDERBUFFER_STENCIL_SIZE","FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE","FRAMEBUFFER_ATTACHMENT_OBJECT_NAME","FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL","FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE","COLOR_ATTACHMENT0","DEPTH_ATTACHMENT","STENCIL_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","FRAMEBUFFER_COMPLETE","FRAMEBUFFER_INCOMPLETE_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","FRAMEBUFFER_INCOMPLETE_DIMENSIONS","FRAMEBUFFER_UNSUPPORTED","FRAMEBUFFER_BINDING","RENDERBUFFER_BINDING","MAX_RENDERBUFFER_SIZE","INVALID_FRAMEBUFFER_OPERATION","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","CONTEXT_LOST_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","BROWSER_DEFAULT_WEBGL","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_ASTC_4x4_WEBGL","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGBA_BPTC_UNORM","HALF_FLOAT_OES","DOUBLE","READ_BUFFER","UNPACK_ROW_LENGTH","UNPACK_SKIP_ROWS","UNPACK_SKIP_PIXELS","PACK_ROW_LENGTH","PACK_SKIP_ROWS","PACK_SKIP_PIXELS","COLOR","DEPTH","STENCIL","RED","RGB8","RGBA8","RGB10_A2","TEXTURE_BINDING_3D","UNPACK_SKIP_IMAGES","UNPACK_IMAGE_HEIGHT","TEXTURE_3D","TEXTURE_WRAP_R","MAX_3D_TEXTURE_SIZE","UNSIGNED_INT_2_10_10_10_REV","MAX_ELEMENTS_VERTICES","MAX_ELEMENTS_INDICES","TEXTURE_MIN_LOD","TEXTURE_MAX_LOD","TEXTURE_BASE_LEVEL","TEXTURE_MAX_LEVEL","MIN","MAX","DEPTH_COMPONENT24","MAX_TEXTURE_LOD_BIAS","TEXTURE_COMPARE_MODE","TEXTURE_COMPARE_FUNC","CURRENT_QUERY","QUERY_RESULT","QUERY_RESULT_AVAILABLE","STREAM_READ","STREAM_COPY","STATIC_READ","STATIC_COPY","DYNAMIC_READ","DYNAMIC_COPY","MAX_DRAW_BUFFERS","DRAW_BUFFER0","DRAW_BUFFER1","DRAW_BUFFER2","DRAW_BUFFER3","DRAW_BUFFER4","DRAW_BUFFER5","DRAW_BUFFER6","DRAW_BUFFER7","DRAW_BUFFER8","DRAW_BUFFER9","DRAW_BUFFER10","DRAW_BUFFER11","DRAW_BUFFER12","DRAW_BUFFER13","DRAW_BUFFER14","DRAW_BUFFER15","MAX_FRAGMENT_UNIFORM_COMPONENTS","MAX_VERTEX_UNIFORM_COMPONENTS","SAMPLER_3D","SAMPLER_2D_SHADOW","FRAGMENT_SHADER_DERIVATIVE_HINT","PIXEL_PACK_BUFFER","PIXEL_UNPACK_BUFFER","PIXEL_PACK_BUFFER_BINDING","PIXEL_UNPACK_BUFFER_BINDING","FLOAT_MAT2x3","FLOAT_MAT2x4","FLOAT_MAT3x2","FLOAT_MAT3x4","FLOAT_MAT4x2","FLOAT_MAT4x3","SRGB","SRGB8","SRGB8_ALPHA8","COMPARE_REF_TO_TEXTURE","RGBA32F","RGB32F","RGBA16F","RGB16F","VERTEX_ATTRIB_ARRAY_INTEGER","MAX_ARRAY_TEXTURE_LAYERS","MIN_PROGRAM_TEXEL_OFFSET","MAX_PROGRAM_TEXEL_OFFSET","MAX_VARYING_COMPONENTS","TEXTURE_2D_ARRAY","TEXTURE_BINDING_2D_ARRAY","R11F_G11F_B10F","UNSIGNED_INT_10F_11F_11F_REV","RGB9_E5","UNSIGNED_INT_5_9_9_9_REV","TRANSFORM_FEEDBACK_BUFFER_MODE","MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS","TRANSFORM_FEEDBACK_VARYINGS","TRANSFORM_FEEDBACK_BUFFER_START","TRANSFORM_FEEDBACK_BUFFER_SIZE","TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN","RASTERIZER_DISCARD","MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS","MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS","INTERLEAVED_ATTRIBS","SEPARATE_ATTRIBS","TRANSFORM_FEEDBACK_BUFFER","TRANSFORM_FEEDBACK_BUFFER_BINDING","RGBA32UI","RGB32UI","RGBA16UI","RGB16UI","RGBA8UI","RGB8UI","RGBA32I","RGB32I","RGBA16I","RGB16I","RGBA8I","RGB8I","RED_INTEGER","RGB_INTEGER","RGBA_INTEGER","SAMPLER_2D_ARRAY","SAMPLER_2D_ARRAY_SHADOW","SAMPLER_CUBE_SHADOW","UNSIGNED_INT_VEC2","UNSIGNED_INT_VEC3","UNSIGNED_INT_VEC4","INT_SAMPLER_2D","INT_SAMPLER_3D","INT_SAMPLER_CUBE","INT_SAMPLER_2D_ARRAY","UNSIGNED_INT_SAMPLER_2D","UNSIGNED_INT_SAMPLER_3D","UNSIGNED_INT_SAMPLER_CUBE","UNSIGNED_INT_SAMPLER_2D_ARRAY","DEPTH_COMPONENT32F","DEPTH32F_STENCIL8","FLOAT_32_UNSIGNED_INT_24_8_REV","FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING","FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE","FRAMEBUFFER_ATTACHMENT_RED_SIZE","FRAMEBUFFER_ATTACHMENT_GREEN_SIZE","FRAMEBUFFER_ATTACHMENT_BLUE_SIZE","FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE","FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE","FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE","FRAMEBUFFER_DEFAULT","UNSIGNED_INT_24_8","DEPTH24_STENCIL8","UNSIGNED_NORMALIZED","DRAW_FRAMEBUFFER_BINDING","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","READ_FRAMEBUFFER_BINDING","RENDERBUFFER_SAMPLES","FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER","MAX_COLOR_ATTACHMENTS","COLOR_ATTACHMENT1","COLOR_ATTACHMENT2","COLOR_ATTACHMENT3","COLOR_ATTACHMENT4","COLOR_ATTACHMENT5","COLOR_ATTACHMENT6","COLOR_ATTACHMENT7","COLOR_ATTACHMENT8","COLOR_ATTACHMENT9","COLOR_ATTACHMENT10","COLOR_ATTACHMENT11","COLOR_ATTACHMENT12","COLOR_ATTACHMENT13","COLOR_ATTACHMENT14","COLOR_ATTACHMENT15","FRAMEBUFFER_INCOMPLETE_MULTISAMPLE","MAX_SAMPLES","HALF_FLOAT","RG","RG_INTEGER","R8","RG8","R16F","R32F","RG16F","RG32F","R8I","R8UI","R16I","R16UI","R32I","R32UI","RG8I","RG8UI","RG16I","RG16UI","RG32I","RG32UI","VERTEX_ARRAY_BINDING","R8_SNORM","RG8_SNORM","RGB8_SNORM","RGBA8_SNORM","SIGNED_NORMALIZED","COPY_READ_BUFFER","COPY_WRITE_BUFFER","COPY_READ_BUFFER_BINDING","COPY_WRITE_BUFFER_BINDING","UNIFORM_BUFFER","UNIFORM_BUFFER_BINDING","UNIFORM_BUFFER_START","UNIFORM_BUFFER_SIZE","MAX_VERTEX_UNIFORM_BLOCKS","MAX_FRAGMENT_UNIFORM_BLOCKS","MAX_COMBINED_UNIFORM_BLOCKS","MAX_UNIFORM_BUFFER_BINDINGS","MAX_UNIFORM_BLOCK_SIZE","MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS","MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS","UNIFORM_BUFFER_OFFSET_ALIGNMENT","ACTIVE_UNIFORM_BLOCKS","UNIFORM_TYPE","UNIFORM_SIZE","UNIFORM_BLOCK_INDEX","UNIFORM_OFFSET","UNIFORM_ARRAY_STRIDE","UNIFORM_MATRIX_STRIDE","UNIFORM_IS_ROW_MAJOR","UNIFORM_BLOCK_BINDING","UNIFORM_BLOCK_DATA_SIZE","UNIFORM_BLOCK_ACTIVE_UNIFORMS","UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES","UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER","UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER","INVALID_INDEX","MAX_VERTEX_OUTPUT_COMPONENTS","MAX_FRAGMENT_INPUT_COMPONENTS","MAX_SERVER_WAIT_TIMEOUT","OBJECT_TYPE","SYNC_CONDITION","SYNC_STATUS","SYNC_FLAGS","SYNC_FENCE","SYNC_GPU_COMMANDS_COMPLETE","UNSIGNALED","SIGNALED","ALREADY_SIGNALED","TIMEOUT_EXPIRED","CONDITION_SATISFIED","WAIT_FAILED","SYNC_FLUSH_COMMANDS_BIT","VERTEX_ATTRIB_ARRAY_DIVISOR","ANY_SAMPLES_PASSED","ANY_SAMPLES_PASSED_CONSERVATIVE","SAMPLER_BINDING","RGB10_A2UI","INT_2_10_10_10_REV","TRANSFORM_FEEDBACK","TRANSFORM_FEEDBACK_PAUSED","TRANSFORM_FEEDBACK_ACTIVE","TRANSFORM_FEEDBACK_BINDING","COMPRESSED_R11_EAC","COMPRESSED_SIGNED_R11_EAC","COMPRESSED_RG11_EAC","COMPRESSED_SIGNED_RG11_EAC","COMPRESSED_RGB8_ETC2","COMPRESSED_SRGB8_ETC2","COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2","COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","TEXTURE_IMMUTABLE_FORMAT","MAX_ELEMENT_INDEX","TEXTURE_IMMUTABLE_LEVELS","MAX_TEXTURE_MAX_ANISOTROPY_EXT","WebMercatorProjection","_semimajorAxis","_oneOverSemimajorAxis","mercatorAngleToGeodeticLatitude","mercatorAngle","atan","exp","geodeticLatitudeToMercatorAngle","MaximumLatitude","sinLatitude","log","cartesian","oneOverEarthSemimajorAxis","WebMercatorTilingScheme","_numberOfLevelZeroTilesX","numberOfLevelZeroTilesX","_numberOfLevelZeroTilesY","numberOfLevelZeroTilesY","_projection","rectangleSouthwestInMeters","rectangleNortheastInMeters","_rectangleSouthwestInMeters","_rectangleNortheastInMeters","semimajorAxisTimesPi","xTiles","xTileWidth","yTileHeight","nativeRectangle","webMercatorPosition","xTileCoordinate","yTileCoordinate","WindingOrder","CLOCKWISE","COUNTER_CLOCKWISE","windingOrder","WireframeIndexGenerator","createWireframeIndices","originalIndices","hasOriginalIndices","originalIndicesCount","wireframeIndices","point0","point1","point2","createWireframeFromTriangleIndices","createWireframeFromTriangles","numberOfTriangles","wireframeIndicesCount","createWireframeFromTriangleStripIndices","createWireframeFromTriangleStrip","firstPoint","createWireframeFromTriangleFanIndices","createWireframeFromTriangleFan","getWireframeIndicesCount","originalCount","fill","relativeStart","relativeEnd","last","removeDuplicatesEpsilon","wrapAround","removedIndices","storeRemovedIndices","cleanedValues","lastCleanIndex","removedIndexLCI","begin","copy","call","typedArrayTypes","scratchCartesian1","scratchCartesian2","scratchCartesian3","v2","dot00","dot01","dot02","dot11","dot12","q","itemToFind","low","high","cesiumScriptRegex","baseResource","implementation","tryMakeAbsolute","createElement","getCesiumBaseUrl","baseUrlString","buildModuleUrlFromRequireToUrl","toUrl","buildModuleUrlFromBaseUrl","buildModuleUrl","relativeUrl","define","amd","toUrlUndefined","_cesiumScriptRegex","_buildModuleUrlFromBaseUrl","_clearBaseResource","setBaseUrl","cancelAnimationFrame","vendors","requestID","object","deep","propertyName","combine","object1","object2","object1Defined","object2Defined","property","object1Value","object2Value","random","requestVertexNormals","requestWaterMask","decodeGoogleEarthEnterpriseData","passThroughDataForTesting","keyLength","byteLength","dataView","DataView","magic","getUint32","keyView","dp","dpend","dpend64","kpend","kp","off","setUint32","setUint8","getUint8","maxShort","scratchBVCartographic","scratchEncodedPosition","positionsLength","uBuffer","subarray","vBuffer","heightBuffer","decoded","lon","lat","alt","decodedPosition","defaultValue","EMPTY_OBJECT","rej","returnTrue","throwOnDestroyed","getAbsoluteUri","relative","base","documentObject","_implementation","baseURI","relativeUri","basePath","lastIndexOf","uriObject","substr","context2DsByWidthAndHeight","context2DsByHeight","context2d","canvas","getContext","globalCompositeOperation","drawImage","getImageData","uint8Array","byteOffset","getStringFromTypedArray","decode","inRange","decodeWithTextDecoder","TextDecoder","decodeWithFromCharCode","codePoints","utfBytes","codePoint","bytesSeen","bytesNeeded","lowerBoundary","upperBoundary","currentByte","utf8Handler","cp","String","fromCharCode","getTimestamp","performance","now","isFinite","Date","blobUriRegex","isNaN","async","removeChild","appendChild","format","supportedTranscoderFormats","loadKTX2","resourceOrUrlOrBuffer","loadPromise","isView","setKTX2SupportedFormats","s3tc","pvrtc","astc","etc","etc1","bc7","leftScratchArray","rightScratchArray","sort","compare","userDefinedObject","middle","leftLength","rightLength","leftElement","rightElement","scratchLength","obj","propName","part","warnings","oneTimeWarning","geometryOutlines","geometryZIndex","geometryHeightReference","geometryExtrudedHeightReference","headerString","headerPairs","headerPair","scratchBarycentricCoords","coords","subparts","resultValue","requestAnimationFrame","msPerFrame","lastFrameTime","delay","interpolateAndAssignHeight","terrainData","createInterpolateFunction","tileRequest","tilePositions","isMeshRequired","createMarkFailedFunction","terrainProvider","tileRequests","tileRequestSet","tilePromises","tilePromise","doSampling","sampleTerrainMostDetailed","byLevel","maxLevels","promises","atLevel","positionsAtLevel","changedPositions","scaleToGeodeticSurfaceIntersection","scaleToGeodeticSurfaceGradient","oneOverRadii","oneOverRadiiSquared","centerToleranceSquared","positionX","positionY","positionZ","oneOverRadiiX","oneOverRadiiY","oneOverRadiiZ","x2","y2","z2","squaredNorm","ratio","oneOverRadiiSquaredX","oneOverRadiiSquaredY","oneOverRadiiSquaredZ","gradient","func","denominator","xMultiplier","yMultiplier","zMultiplier","xMultiplier2","yMultiplier2","zMultiplier2","xMultiplier3","yMultiplier3","zMultiplier3","lambda","numberOfArrays","webGLValue","oldFunction","newFunction","apply","arguments","imageSmoothingEnabledName","text","font","stroke","strokeWidth","backgroundColor","padding","doublePadding","style","context2D","imageSmoothingEnabled","mozImageSmoothingEnabled","webkitImageSmoothingEnabled","msImageSmoothingEnabled","lineJoin","lineWidth","visibility","body","textString","metrics","measureText","fontSize","defaultView","getComputedStyle","getPropertyValue","baseline","ctx","fillStyle","fillRect","strokeStyle","strokeText","fillText","pixelData","width4","ascent","descent","minx","pixelIndex","toCssColorString","strokeColor","fillColor"],"sourceRoot":""}