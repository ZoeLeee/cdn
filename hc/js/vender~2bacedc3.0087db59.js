"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7011],{92624:(e,t,i)=>{i.d(t,{Z:()=>me});var n=i(52351),r=i(93517),o=i(6785),s=i(41631),a=i(37337),c=i(88779),u=i(54485),l=i(34971),h=i(90332),d=i(99996),m=i(3169),f=i(97262),_=i(22874),p=i(39109),g=i(71118),Z=i(42428),y=i(74408),b=i(34152),v=i(51625),S=i(59736),C=i(62969),E=i(22041),x=i(67197),T=i(21514),w=i(89297),O=i(10147),L=i(42551),P=i(72060),D=i(88311),A=i(28176),I=i(65606),R=i(35929),M=i(48836),N=i(97738),B=i(62318),V=i(30271),k=i(98289),U=i(41783),F=i(18061),z=i(74371),$=i(15545),q=i(26280),W=i(61057),G=i(1577);function H(e,t,i,n){this._tileset=e,this._header=i;const r=(0,u.Z)(i.contents),s=r&&i.contents.length>1||(0,V.Z)(i,"3DTILES_multiple_contents"),a=r&&!s?i.contents[0]:i.content;this._contentHeader=a,this.transform=(0,u.Z)(i.transform)?g.Z.unpack(i.transform):g.Z.clone(g.Z.IDENTITY);const c=(0,u.Z)(n)?n.computedTransform:e.modelMatrix,l=g.Z.multiply(c,this.transform,new g.Z),h=(0,u.Z)(n)?n._initialTransform:g.Z.IDENTITY;let d,m,_,p;this._initialTransform=g.Z.multiply(h,this.transform,new g.Z),this.computedTransform=l,this._boundingVolume=this.createBoundingVolume(i.boundingVolume,l),this._boundingVolume2D=void 0,(0,u.Z)(a)&&(0,u.Z)(a.boundingVolume)&&(d=this.createBoundingVolume(a.boundingVolume,l)),this._contentBoundingVolume=d,this._contentBoundingVolume2D=void 0,(0,u.Z)(i.viewerRequestVolume)&&(m=this.createBoundingVolume(i.viewerRequestVolume,l)),this._viewerRequestVolume=m,this.geometricError=i.geometricError,this._geometricError=i.geometricError,(0,u.Z)(this._geometricError)||(this._geometricError=(0,u.Z)(n)?n.geometricError:e._geometricError,H._deprecationWarning("geometricErrorUndefined","Required property geometricError is undefined for this tile. Using parent's geometric error instead.")),this.updateGeometricErrorScale(),(0,u.Z)(i.refine)?("replace"!==i.refine&&"add"!==i.refine||H._deprecationWarning("lowercase-refine",`This tile uses a lowercase refine "${i.refine}". Instead use "${i.refine.toUpperCase()}".`),_="REPLACE"===i.refine.toUpperCase()?I.Z.REPLACE:I.Z.ADD):_=(0,u.Z)(n)?n.refine:I.Z.REPLACE,this.refine=_,this.children=[],this.parent=n;let Z,y,b,v=!1;if(t=x.Z.createIfNeeded(t),s)Z=L.Z.UNLOADED,y=t.clone();else if((0,u.Z)(a)){let e=a.uri;(0,u.Z)(a.url)&&(H._deprecationWarning("contentUrl",'This tileset JSON uses the "content.url" property which has been deprecated. Use "content.uri" instead.'),e=a.url),Z=L.Z.UNLOADED,y=t.getDerivedResource({url:e}),b=S.Z.getServerKey(y.getUrlComponent())}else p=new R.Z(e,this),v=!0,Z=L.Z.READY;this._content=p,this._contentResource=y,this._contentState=Z,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this._expiredContent=void 0,this._serverKey=b,this.hasEmptyContent=v,this.hasTilesetContent=!1,this.hasImplicitContent=!1,this.hasImplicitContentMetadata=!1,this.hasMultipleContents=s,this.metadata=(0,B.Z)(e,i),this.cacheNode=void 0;const C=i.expire;let E,T;(0,u.Z)(C)&&(E=C.duration,(0,u.Z)(C.date)&&(T=f.Z.fromIso8601(C.date))),this.expireDuration=E,this.expireDate=T,this.lastStyleTime=0,this._optimChildrenWithinParent=D.Z.NOT_COMPUTED,this.clippingPlanesDirty=!1,this.priorityDeferred=!1,this.implicitTileset=void 0,this.implicitCoordinates=void 0,this.implicitSubtree=void 0,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._screenSpaceErrorProgressiveResolution=0,this._visibilityPlaneMask=0,this._visible=!1,this._inRequestVolume=!1,this._finalResolution=!0,this._depth=0,this._stackLength=0,this._selectionDepth=0,this._updatedVisibilityFrame=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._ancestorWithContent=void 0,this._ancestorWithContentAvailable=void 0,this._refines=!1,this._shouldSelect=!1,this._isClipped=!0,this._clippingPlanesState=0,this._debugBoundingVolume=void 0,this._debugContentBoundingVolume=void 0,this._debugViewerRequestVolume=void 0,this._debugColor=o.Z.fromRandom({alpha:1}),this._debugColorizeTiles=!1,this._priority=0,this._priorityHolder=this,this._priorityProgressiveResolution=!1,this._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1,this._priorityReverseScreenSpaceError=0,this._foveatedFactor=0,this._wasMinPriorityChild=!1,this._loadTimestamp=new f.Z,this._commandsLength=0,this._color=void 0,this._colorDirty=!1,this._request=void 0}H._deprecationWarning=l.Z,Object.defineProperties(H.prototype,{tileset:{get:function(){return this._tileset}},content:{get:function(){return this._content}},boundingVolume:{get:function(){return this._boundingVolume}},contentBoundingVolume:{get:function(){return(0,c.Z)(this._contentBoundingVolume,this._boundingVolume)}},boundingSphere:{get:function(){return this._boundingVolume.boundingSphere}},extras:{get:function(){return this._header.extras}},color:{get:function(){return(0,u.Z)(this._color)||(this._color=new o.Z),o.Z.clone(this._color)},set:function(e){this._color=o.Z.clone(e,this._color),this._colorDirty=!0}},contentAvailable:{get:function(){return this.contentReady&&!this.hasEmptyContent&&!this.hasTilesetContent&&!this.hasImplicitContent||(0,u.Z)(this._expiredContent)&&!this.contentFailed}},contentReady:{get:function(){return this._contentState===L.Z.READY}},contentUnloaded:{get:function(){return this._contentState===L.Z.UNLOADED}},contentExpired:{get:function(){return this._contentState===L.Z.EXPIRED}},contentFailed:{get:function(){return this._contentState===L.Z.FAILED}},contentReadyToProcessPromise:{get:function(){return this._contentReadyToProcessPromise}},contentReadyPromise:{get:function(){return this._contentReadyPromise}},commandsLength:{get:function(){return this._commandsLength}}});const Y=new r.Z;const j=new f.Z;function X(e){return function(){return e._priority}}function K(e,t,i){e._contentState===L.Z.PROCESSING&&--t.statistics.numberOfTilesProcessing,e._contentState=L.Z.FAILED}function Q(e,t){e._contentState===L.Z.PROCESSING?--t.statistics.numberOfTilesProcessing:--t.statistics.numberOfPendingRequests,e._contentState=L.Z.FAILED}H.prototype.getScreenSpaceError=function(e,t,i){const n=this._tileset,r=(0,c.Z)(i,1),o=(0,u.Z)(this.parent)?this.parent.geometricError:n._geometricError,s=t?o:this.geometricError;if(0===s)return 0;const a=e.camera;let l=a.frustum;const h=e.context,d=h.drawingBufferWidth,m=h.drawingBufferHeight*r;let f;if(e.mode===F.Z.SCENE2D||l instanceof y.Z){(0,u.Z)(l._offCenterFrustum)&&(l=l._offCenterFrustum);f=s/(Math.max(l.top-l.bottom,l.right-l.left)/Math.max(d,m))}else{const e=Math.max(this._distanceToCamera,_.Z.EPSILON7);if(f=s*m/(e*a.frustum.sseDenominator),n.dynamicScreenSpaceError){const t=n._dynamicScreenSpaceErrorComputedDensity,i=n.dynamicScreenSpaceErrorFactor;f-=_.Z.fog(e,t)*i}}return f/=e.pixelRatio,f},H.prototype.updateVisibility=function(e){const t=this.parent,i=this._tileset,n=(0,u.Z)(t)?t.computedTransform:i.modelMatrix,o=(0,u.Z)(t)?t._visibilityPlaneMask:a.Z.MASK_INDETERMINATE;this.updateTransform(n),this._distanceToCamera=this.distanceToTile(e),this._centerZDepth=this.distanceToTileCenter(e),this._screenSpaceError=this.getScreenSpaceError(e,!1),this._screenSpaceErrorProgressiveResolution=this.getScreenSpaceError(e,!1,i.progressiveResolutionHeightFraction),this._visibilityPlaneMask=this.visibility(e,o),this._visible=this._visibilityPlaneMask!==a.Z.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(e),this._priorityReverseScreenSpaceError=function(e,t){const i=t.parent,n=(0,u.Z)(i)&&(!e._skipLevelOfDetail||0===t._screenSpaceError||i.hasTilesetContent||i.hasImplicitContent)?i._screenSpaceError:t._screenSpaceError;return e.root._screenSpaceError-n}(i,this),this._priorityProgressiveResolution=function(e,t){if(e.progressiveResolutionHeightFraction<=0||e.progressiveResolutionHeightFraction>.5)return!1;let i=t._screenSpaceErrorProgressiveResolution>e._maximumScreenSpaceError;t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!1;const n=t.parent,r=e._maximumScreenSpaceError,o=t._screenSpaceErrorProgressiveResolution<=r,s=(0,u.Z)(n)&&n._screenSpaceErrorProgressiveResolution>r;return o&&s&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf=!0,i=!0),i}(i,this),this.priorityDeferred=function(e,t){const i=e._tileset,n=t.camera,o=e.boundingSphere,s=o.radius,a=r.Z.multiplyByScalar(n.directionWC,e._centerZDepth,Y),c=r.Z.add(n.positionWC,a,Y),l=r.Z.subtract(c,o.center,Y);if(r.Z.magnitude(l)>s){const t=r.Z.normalize(l,Y),i=r.Z.multiplyByScalar(t,s,Y),a=r.Z.add(o.center,i,Y),c=r.Z.subtract(a,n.positionWC,Y),u=r.Z.normalize(c,Y);e._foveatedFactor=1-Math.abs(r.Z.dot(n.directionWC,u))}else e._foveatedFactor=0;const h=e.refine===I.Z.REPLACE,d=i._skipLevelOfDetail;if(h&&!d||!i.foveatedScreenSpaceError||1===i.foveatedConeSize||e._priorityProgressiveResolution&&h&&d||i._pass===A.Z.PRELOAD_FLIGHT||i._pass===A.Z.PRELOAD)return!1;const m=1-Math.cos(.5*n.frustum.fov),f=i.foveatedConeSize*m;if(e._foveatedFactor<=f)return!1;const p=m-f,g=_.Z.clamp((e._foveatedFactor-f)/p,0,1),Z=i.foveatedInterpolationCallback(i.foveatedMinimumScreenSpaceErrorRelaxation,i.maximumScreenSpaceError,g),y=0===e._screenSpaceError&&(0,u.Z)(e.parent)?.5*e.parent._screenSpaceError:e._screenSpaceError;return i.maximumScreenSpaceError-Z<=y}(this,e)},H.prototype.updateExpiration=function(){if((0,u.Z)(this.expireDate)&&this.contentReady&&!this.hasEmptyContent&&!this.hasMultipleContents){const e=f.Z.now(j);f.Z.lessThan(this.expireDate,e)&&(this._contentState=L.Z.EXPIRED,this._expiredContent=this._content)}},H.prototype.requestContent=function(){return this.hasEmptyContent?0:this.hasMultipleContents?function(e){let t=e._content;const i=e._tileset;if(!(0,u.Z)(t)){const n=(0,V.Z)(e._header,"3DTILES_multiple_contents")?e._header.extensions["3DTILES_multiple_contents"]:e._header;t=new k.Z(i,e,e._contentResource.clone(),n),e._content=t}const n=t.requestInnerContents();if(n>0)return n;e._contentState=L.Z.LOADING;const r=t.contentsFetchedPromise.then((function(){if(e._contentState===L.Z.LOADING){if(!e.isDestroyed())return e._contentState=L.Z.PROCESSING,t;K(e,i,"Tile was unloaded while content was loading")}}));return e._contentReadyToProcessPromise=r,e._contentReadyPromise=r.then((function(e){if((0,u.Z)(e))return t.readyPromise})).then((function(t){if((0,u.Z)(t)){if(!e.isDestroyed())return e._selectedFrame=0,e.lastStyleTime=0,f.Z.now(e._loadTimestamp),e._contentState=L.Z.READY,t;K(e,i,"Tile was unloaded while content was processing")}})).catch((function(t){K(e,i,t)})),0}(this):function(e){const t=e._contentResource.clone(),i=e.contentExpired;i&&t.setQueryParameters({expired:e.expireDate.toString()});const n=new v.Z({throttle:!0,throttleByServer:!0,type:E.Z.TILES3D,priorityFunction:X(e),serverKey:e._serverKey});e._request=n,t.request=n;const r=t.fetchArrayBuffer();if(!(0,u.Z)(r))return 1;const o=e._contentState,s=e._tileset;e._contentState=L.Z.LOADING,++s.statistics.numberOfPendingRequests;const a=r.then((function(t){if(e.isDestroyed())return void Q(e,s);const n=function(e,t){const i=(0,U.Z)(t),n=e._tileset;n._disableSkipLevelOfDetail=n._disableSkipLevelOfDetail||i.contentType===P.Z.GEOMETRY||i.contentType===P.Z.VECTOR,(i.contentType===P.Z.IMPLICIT_SUBTREE||i.contentType===P.Z.IMPLICIT_SUBTREE_JSON)&&(e.hasImplicitContent=!0);i.contentType===P.Z.EXTERNAL_TILESET&&(e.hasTilesetContent=!0);let r;const o=O.Z[i.contentType];r=(0,u.Z)(i.binaryPayload)?o(n,e,e._contentResource,i.binaryPayload.buffer,0):o(n,e,e._contentResource,i.jsonPayload);const s=e._contentHeader;if(e.hasImplicitContentMetadata){const t=e.implicitSubtree,i=e.implicitCoordinates;r.metadata=t.getContentMetadataView(i,0)}else e.hasImplicitContent||(r.metadata=(0,M.Z)(n,s));const a=(0,N.Z)(n,s);(0,u.Z)(a)&&(r.group=new w.Z({metadata:a}));return r}(e,t);return i&&(e.expireDate=void 0),e._content=n,e._contentState=L.Z.PROCESSING,n}));return e._contentReadyToProcessPromise=a,e._contentReadyPromise=a.then((function(e){if((0,u.Z)(e))return--s.statistics.numberOfPendingRequests,e.readyPromise})).then((function(t){if((0,u.Z)(t)){if(!e.isDestroyed())return function(e){if((0,u.Z)(e.expireDuration)){const t=f.Z.now(j);f.Z.addSeconds(t,e.expireDuration,t),(0,u.Z)(e.expireDate)?f.Z.lessThan(e.expireDate,t)&&f.Z.clone(t,e.expireDate):e.expireDate=f.Z.clone(t)}}(e),e._selectedFrame=0,e.lastStyleTime=0,f.Z.now(e._loadTimestamp),e._contentState=L.Z.READY,t;Q(e,s)}})).catch((function(t){return n.state===C.Z.CANCELLED?(e._contentState=o,--s.statistics.numberOfPendingRequests,++s.statistics.numberOfAttemptedRequests,Promise.reject("Cancelled")):(Q(e,s),Promise.reject(t))})),0}(this)},H.prototype.cancelRequests=function(){this.hasMultipleContents?this._content.cancelRequests():this._request.cancel()},H.prototype.unloadContent=function(){this.hasEmptyContent||this.hasTilesetContent||this.hasImplicitContent||(this._content=this._content&&this._content.destroy(),this._contentState=L.Z.UNLOADED,this._contentReadyToProcessPromise=void 0,this._contentReadyPromise=void 0,this.lastStyleTime=0,this.clippingPlanesDirty=0===this._clippingPlanesState,this._clippingPlanesState=0,this._debugColorizeTiles=!1,this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy())};const J=new n.Z;function ee(e,t){if(t.mode!==F.Z.SCENE3D&&!(0,u.Z)(e._boundingVolume2D)){const i=e._boundingVolume.boundingSphere,r=n.Z.projectTo2D(i,t.mapProjection,J);e._boundingVolume2D=new q.Z(r.center,r.radius)}return t.mode!==F.Z.SCENE3D?e._boundingVolume2D:e._boundingVolume}H.prototype.visibility=function(e,t){const i=e.cullingVolume,n=ee(this,e),r=this._tileset,o=r.clippingPlanes;if((0,u.Z)(o)&&o.enabled){const e=o.computeIntersectionWithBoundingVolume(n,r.clippingPlanesOriginMatrix);if(this._isClipped=e!==m.Z.INSIDE,e===m.Z.OUTSIDE)return a.Z.MASK_OUTSIDE}return i.computeVisibilityWithPlaneMask(n,t)},H.prototype.contentVisibility=function(e){if(!(0,u.Z)(this._contentBoundingVolume))return m.Z.INSIDE;if(this._visibilityPlaneMask===a.Z.MASK_INSIDE)return m.Z.INSIDE;const t=e.cullingVolume,i=function(e,t){if(t.mode!==F.Z.SCENE3D&&!(0,u.Z)(e._contentBoundingVolume2D)){const i=e._contentBoundingVolume.boundingSphere,r=n.Z.projectTo2D(i,t.mapProjection,J);e._contentBoundingVolume2D=new q.Z(r.center,r.radius)}return t.mode!==F.Z.SCENE3D?e._contentBoundingVolume2D:e._contentBoundingVolume}(this,e),r=this._tileset,o=r.clippingPlanes;if((0,u.Z)(o)&&o.enabled){const e=o.computeIntersectionWithBoundingVolume(i,r.clippingPlanesOriginMatrix);if(this._isClipped=e!==m.Z.INSIDE,e===m.Z.OUTSIDE)return m.Z.OUTSIDE}return t.computeVisibility(i)},H.prototype.distanceToTile=function(e){return ee(this,e).distanceToCamera(e)};const te=new r.Z;H.prototype.distanceToTileCenter=function(e){const t=ee(this,e).boundingVolume,i=r.Z.subtract(t.center,e.camera.positionWC,te);return r.Z.dot(e.camera.directionWC,i)},H.prototype.insideViewerRequestVolume=function(e){const t=this._viewerRequestVolume;return!(0,u.Z)(t)||0===t.distanceToCamera(e)};const ie=new p.Z,ne=new r.Z,re=new p.Z,oe=new r.Z,se=new b.Z,ae=new Z.Z,ce=new g.Z;function ue(e,t,i,n){if(!g.Z.equalsEpsilon(t,i,_.Z.EPSILON8))return function(e,t,i,n){const r=b.Z.unpack(e,0,se),o=e[4],s=e[5],a=Z.Z.fromRectangle(r,o,s,d.Z.WGS84,ae);let c=a.center,l=a.halfAxes;t=g.Z.multiplyTransformation(t,g.Z.inverseTransformation(i,ce),ce),c=g.Z.multiplyByPoint(t,c,c);const h=g.Z.getMatrix3(t,ie);return l=p.Z.multiply(h,l,l),(0,u.Z)(n)&&n instanceof W.Z?(n.update(c,l),n):new W.Z(c,l)}(e,t,i,n);if((0,u.Z)(n))return n;const r=b.Z.unpack(e,0,se);return new z.Z({rectangle:r,minimumHeight:e[4],maximumHeight:e[5]})}H.prototype.createBoundingVolume=function(e,t,i){if(!(0,u.Z)(e))throw new T.Z("boundingVolume must be defined");if((0,V.Z)(e,"3DTILES_bounding_volume_S2"))return new $.Z(e.extensions["3DTILES_bounding_volume_S2"]);if((0,u.Z)(e.box))return function(e,t,i){let n=r.Z.fromElements(e[0],e[1],e[2],oe),o=p.Z.fromArray(e,3,re);n=g.Z.multiplyByPoint(t,n,n);const s=g.Z.getMatrix3(t,ie);return o=p.Z.multiply(s,o,o),(0,u.Z)(i)?(i.update(n,o),i):new W.Z(n,o)}(e.box,t,i);if((0,u.Z)(e.region))return ue(e.region,t,this._initialTransform,i);if((0,u.Z)(e.sphere))return function(e,t,i){let n=r.Z.fromElements(e[0],e[1],e[2],oe),o=e[3];n=g.Z.multiplyByPoint(t,n,n);const s=g.Z.getScale(t,ne);return o*=r.Z.maximumComponent(s),(0,u.Z)(i)?(i.update(n,o),i):new q.Z(n,o)}(e.sphere,t,i);throw new T.Z("boundingVolume must contain a sphere, region, or box")},H.prototype.updateTransform=function(e){e=(0,c.Z)(e,g.Z.IDENTITY);const t=g.Z.multiply(e,this.transform,ce);if(!!g.Z.equals(t,this.computedTransform))return;g.Z.clone(t,this.computedTransform);const i=this._header,n=this._contentHeader;this._boundingVolume=this.createBoundingVolume(i.boundingVolume,this.computedTransform,this._boundingVolume),(0,u.Z)(this._contentBoundingVolume)&&(this._contentBoundingVolume=this.createBoundingVolume(n.boundingVolume,this.computedTransform,this._contentBoundingVolume)),(0,u.Z)(this._viewerRequestVolume)&&(this._viewerRequestVolume=this.createBoundingVolume(i.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)),this.updateGeometricErrorScale(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy()},H.prototype.updateGeometricErrorScale=function(){const e=g.Z.getScale(this.computedTransform,ne),t=r.Z.maximumComponent(e);this.geometricError=this._geometricError*t},H.prototype.update=function(e,t,i){const n=t.commandList.length;!function(e,t){const i=t.clippingPlanes;let n=0;(0,u.Z)(i)&&e._isClipped&&i.enabled&&(n=i.clippingPlanesState),n!==e._clippingPlanesState&&(e._clippingPlanesState=n,e.clippingPlanesDirty=!0)}(this,e),function(e,t,i,n){if(!n.isRender)return;const r=(0,u.Z)(e._contentHeader)&&(0,u.Z)(e._contentHeader.boundingVolume),a=e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent,c=t.debugShowBoundingVolume||t.debugShowContentBoundingVolume&&!r;if(c){let t;t=e._finalResolution?a?o.Z.DARKGRAY:o.Z.WHITE:o.Z.YELLOW,(0,u.Z)(e._debugBoundingVolume)||(e._debugBoundingVolume=e._boundingVolume.createDebugVolume(t)),e._debugBoundingVolume.update(i);const n=e._debugBoundingVolume.getGeometryInstanceAttributes("outline");n.color=s.Z.toValue(t,n.color)}else!c&&(0,u.Z)(e._debugBoundingVolume)&&(e._debugBoundingVolume=e._debugBoundingVolume.destroy());t.debugShowContentBoundingVolume&&r?((0,u.Z)(e._debugContentBoundingVolume)||(e._debugContentBoundingVolume=e._contentBoundingVolume.createDebugVolume(o.Z.BLUE)),e._debugContentBoundingVolume.update(i)):!t.debugShowContentBoundingVolume&&(0,u.Z)(e._debugContentBoundingVolume)&&(e._debugContentBoundingVolume=e._debugContentBoundingVolume.destroy()),t.debugShowViewerRequestVolume&&(0,u.Z)(e._viewerRequestVolume)?((0,u.Z)(e._debugViewerRequestVolume)||(e._debugViewerRequestVolume=e._viewerRequestVolume.createDebugVolume(o.Z.YELLOW)),e._debugViewerRequestVolume.update(i)):!t.debugShowViewerRequestVolume&&(0,u.Z)(e._debugViewerRequestVolume)&&(e._debugViewerRequestVolume=e._debugViewerRequestVolume.destroy());const l=t.debugColorizeTiles&&!e._debugColorizeTiles||(0,u.Z)(t._heatmap.tilePropertyName),h=!t.debugColorizeTiles&&e._debugColorizeTiles;l?(t._heatmap.colorize(e,i),e._debugColorizeTiles=!0,e.color=e._debugColor):h&&(e._debugColorizeTiles=!1,e.color=o.Z.WHITE),e._colorDirty&&(e._colorDirty=!1,e._content.applyDebugSettings(!0,e._color)),h&&t.makeStyleDirty()}(this,e,t,i),function(e,t,i){const n=e._content,r=e._expiredContent;if(!e.hasMultipleContents&&(0,u.Z)(r)){if(!e.contentReady)return void r.update(t,i);e._expiredContent.destroy(),e._expiredContent=void 0}n.update(t,i)}(this,e,t);const r=t.commandList.length-n;this._commandsLength=r;for(let e=0;e<r;++e){const i=t.commandList[n+e],r=i.pass===G.Z.TRANSLUCENT;i.depthForTranslucentClassification=r}this.clippingPlanesDirty=!1};const le=[];function he(e,t,i){const n=e*Math.pow(10,t);return parseInt(n)*Math.pow(10,i)}function de(e,t,i){return Math.max(_.Z.normalize(e,t,i)-_.Z.EPSILON7,0)}H.prototype.process=function(e,t){const i=t.commandList;t.commandList=le,this._content.update(e,t),le.length=0,t.commandList=i},H.prototype.updatePriority=function(){const e=this.tileset,t=e.preferLeaves,i=e._minimumPriority,n=e._maximumPriority,r=Math.pow(10,8),o=Math.pow(10,9),s=Math.pow(10,10);let a=de(this._depth,i.depth,n.depth);a=t?1-a:a;const c=he(!e._skipLevelOfDetail&&this.refine===I.Z.REPLACE?de(this._priorityHolder._distanceToCamera,i.distance,n.distance):de(this._priorityReverseScreenSpaceError,i.reverseScreenSpaceError,n.reverseScreenSpaceError),4,0),u=this._priorityProgressiveResolution?0:r,l=he(de(this._priorityHolder._foveatedFactor,i.foveatedFactor,n.foveatedFactor),4,4),h=this.priorityDeferred?o:0,d=e._pass===A.Z.PRELOAD_FLIGHT?0:s;this._priority=a+c+u+l+h+d},H.prototype.isDestroyed=function(){return!1},H.prototype.destroy=function(){return this._content=this._content&&this._content.destroy(),this._expiredContent=this._expiredContent&&!this._expiredContent.isDestroyed()&&this._expiredContent.destroy(),this._debugBoundingVolume=this._debugBoundingVolume&&this._debugBoundingVolume.destroy(),this._debugContentBoundingVolume=this._debugContentBoundingVolume&&this._debugContentBoundingVolume.destroy(),this._debugViewerRequestVolume=this._debugViewerRequestVolume&&this._debugViewerRequestVolume.destroy(),(0,h.Z)(this)};const me=H},88311:(e,t,i)=>{i.d(t,{Z:()=>n});const n=Object.freeze({NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0})},16955:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(93517),r=i(17497),o=i(88311),s=i(74371),a=i(61057);const c={},u=new n.Z;c.checkChildrenWithinParent=function(e){r.Z.typeOf.object("tile",e);const t=e.children,i=t.length,c=e.boundingVolume;if(c instanceof a.Z||c instanceof s.Z){const r=c._orientedBoundingBox;e._optimChildrenWithinParent=o.Z.USE_OPTIMIZATION;for(let c=0;c<i;++c){const i=t[c].boundingVolume;if(!(i instanceof a.Z||i instanceof s.Z)){e._optimChildrenWithinParent=o.Z.SKIP_OPTIMIZATION;break}const l=i._orientedBoundingBox,h=n.Z.subtract(l.center,r.center,u),d=n.Z.magnitude(h);n.Z.divideByScalar(h,d,h);if(Math.abs(r.halfAxes[0]*h.x)+Math.abs(r.halfAxes[1]*h.y)+Math.abs(r.halfAxes[2]*h.z)+Math.abs(r.halfAxes[3]*h.x)+Math.abs(r.halfAxes[4]*h.y)+Math.abs(r.halfAxes[5]*h.z)+Math.abs(r.halfAxes[6]*h.x)+Math.abs(r.halfAxes[7]*h.y)+Math.abs(r.halfAxes[8]*h.z)<=Math.abs(l.halfAxes[0]*h.x)+Math.abs(l.halfAxes[1]*h.y)+Math.abs(l.halfAxes[2]*h.z)+Math.abs(l.halfAxes[3]*h.x)+Math.abs(l.halfAxes[4]*h.y)+Math.abs(l.halfAxes[5]*h.z)+Math.abs(l.halfAxes[6]*h.x)+Math.abs(l.halfAxes[7]*h.y)+Math.abs(l.halfAxes[8]*h.z)+d){e._optimChildrenWithinParent=o.Z.SKIP_OPTIMIZATION;break}}}return e._optimChildrenWithinParent===o.Z.USE_OPTIMIZATION};const l=c},28176:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(18027),r=i(3546);const o={RENDER:0,PICK:1,SHADOW:2,PRELOAD:3,PRELOAD_FLIGHT:4,REQUEST_RENDER_MODE_DEFER_CHECK:5,MOST_DETAILED_PRELOAD:6,MOST_DETAILED_PICK:7,NUMBER_OF_PASSES:8},s=new Array(o.NUMBER_OF_PASSES);s[o.RENDER]=Object.freeze({traversal:r.Z,isRender:!0,requestTiles:!0,ignoreCommands:!1}),s[o.PICK]=Object.freeze({traversal:r.Z,isRender:!1,requestTiles:!1,ignoreCommands:!1}),s[o.SHADOW]=Object.freeze({traversal:r.Z,isRender:!1,requestTiles:!0,ignoreCommands:!1}),s[o.PRELOAD]=Object.freeze({traversal:r.Z,isRender:!1,requestTiles:!0,ignoreCommands:!0}),s[o.PRELOAD_FLIGHT]=Object.freeze({traversal:r.Z,isRender:!1,requestTiles:!0,ignoreCommands:!0}),s[o.REQUEST_RENDER_MODE_DEFER_CHECK]=Object.freeze({traversal:r.Z,isRender:!1,requestTiles:!0,ignoreCommands:!0}),s[o.MOST_DETAILED_PRELOAD]=Object.freeze({traversal:n.Z,isRender:!1,requestTiles:!0,ignoreCommands:!0}),s[o.MOST_DETAILED_PICK]=Object.freeze({traversal:n.Z,isRender:!1,requestTiles:!1,ignoreCommands:!1}),o.getPassOptions=function(e){return s[e]};const a=Object.freeze(o)},71097:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(17497);const r=function(e){n.Z.typeOf.object("options",e),n.Z.typeOf.number("options.pass",e.pass),this.pass=e.pass,this.commandList=e.commandList,this.camera=e.camera,this.cullingVolume=e.cullingVolume,this.ready=!1}},95855:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(66866),r=i(6785),o=i(88779),s=i(54485),a=i(96059),c=i(24158);function u(e,t,i,n,r){this._content=e,this._billboard=i,this._label=n,this._polyline=r,this._batchId=t,this._billboardImage=void 0,this._billboardColor=void 0,this._billboardOutlineColor=void 0,this._billboardOutlineWidth=void 0,this._billboardSize=void 0,this._pointSize=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._heightOffset=void 0,this._pickIds=new Array(3),h(this)}const l=new n.Z;function h(e){const t=e._billboard;if((0,s.Z)(e._billboardImage)&&e._billboardImage!==t.image)return void(t.image=e._billboardImage);if((0,s.Z)(e._billboardImage))return;const i=(0,o.Z)(e._color,u.defaultColor),n=(0,o.Z)(e._pointOutlineColor,u.defaultPointOutlineColor),a=(0,o.Z)(e._pointOutlineWidth,u.defaultPointOutlineWidth),l=(0,o.Z)(e._pointSize,u.defaultPointSize),h=e._billboardColor,d=e._billboardOutlineColor,m=e._billboardOutlineWidth,f=e._billboardSize;if(r.Z.equals(i,h)&&r.Z.equals(n,d)&&a===m&&l===f)return;e._billboardColor=r.Z.clone(i,e._billboardColor),e._billboardOutlineColor=r.Z.clone(n,e._billboardOutlineColor),e._billboardOutlineWidth=a,e._billboardSize=l;const _=i.alpha,p=i.toCssColorString(),g=n.toCssColorString(),Z=JSON.stringify([p,l,g,a]);t.setImage(Z,(0,c.Z)(_,p,g,a,l))}Object.defineProperties(u.prototype,{show:{get:function(){return this._label.show},set:function(e){this._label.show=e,this._billboard.show=e,this._polyline.show=e}},color:{get:function(){return this._color},set:function(e){this._color=r.Z.clone(e,this._color),h(this)}},pointSize:{get:function(){return this._pointSize},set:function(e){this._pointSize=e,h(this)}},pointOutlineColor:{get:function(){return this._pointOutlineColor},set:function(e){this._pointOutlineColor=r.Z.clone(e,this._pointOutlineColor),h(this)}},pointOutlineWidth:{get:function(){return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=e,h(this)}},labelColor:{get:function(){return this._label.fillColor},set:function(e){this._label.fillColor=e,this._polyline.show=this._label.show&&e.alpha>0}},labelOutlineColor:{get:function(){return this._label.outlineColor},set:function(e){this._label.outlineColor=e}},labelOutlineWidth:{get:function(){return this._label.outlineWidth},set:function(e){this._label.outlineWidth=e}},font:{get:function(){return this._label.font},set:function(e){this._label.font=e}},labelStyle:{get:function(){return this._label.style},set:function(e){this._label.style=e}},labelText:{get:function(){return this._label.text},set:function(e){(0,s.Z)(e)||(e=""),this._label.text=e}},backgroundColor:{get:function(){return this._label.backgroundColor},set:function(e){this._label.backgroundColor=e}},backgroundPadding:{get:function(){return this._label.backgroundPadding},set:function(e){this._label.backgroundPadding=e}},backgroundEnabled:{get:function(){return this._label.showBackground},set:function(e){this._label.showBackground=e}},scaleByDistance:{get:function(){return this._label.scaleByDistance},set:function(e){this._label.scaleByDistance=e,this._billboard.scaleByDistance=e}},translucencyByDistance:{get:function(){return this._label.translucencyByDistance},set:function(e){this._label.translucencyByDistance=e,this._billboard.translucencyByDistance=e}},distanceDisplayCondition:{get:function(){return this._label.distanceDisplayCondition},set:function(e){this._label.distanceDisplayCondition=e,this._polyline.distanceDisplayCondition=e,this._billboard.distanceDisplayCondition=e}},heightOffset:{get:function(){return this._heightOffset},set:function(e){const t=(0,o.Z)(this._heightOffset,0),i=this._content.tileset.ellipsoid,n=i.cartesianToCartographic(this._billboard.position,l);n.height=n.height-t+e;const r=i.cartographicToCartesian(n);this._billboard.position=r,this._label.position=this._billboard.position,this._polyline.positions=[this._polyline.positions[0],r],this._heightOffset=e}},anchorLineEnabled:{get:function(){return this._polyline.show},set:function(e){this._polyline.show=e}},anchorLineColor:{get:function(){return this._polyline.material.uniforms.color},set:function(e){this._polyline.material.uniforms.color=r.Z.clone(e,this._polyline.material.uniforms.color)}},image:{get:function(){return this._billboardImage},set:function(e){const t=this._billboardImage!==e;this._billboardImage=e,t&&h(this)}},disableDepthTestDistance:{get:function(){return this._label.disableDepthTestDistance},set:function(e){this._label.disableDepthTestDistance=e,this._billboard.disableDepthTestDistance=e}},horizontalOrigin:{get:function(){return this._billboard.horizontalOrigin},set:function(e){this._billboard.horizontalOrigin=e}},verticalOrigin:{get:function(){return this._billboard.verticalOrigin},set:function(e){this._billboard.verticalOrigin=e}},labelHorizontalOrigin:{get:function(){return this._label.horizontalOrigin},set:function(e){this._label.horizontalOrigin=e}},labelVerticalOrigin:{get:function(){return this._label.verticalOrigin},set:function(e){this._label.verticalOrigin=e}},content:{get:function(){return this._content}},tileset:{get:function(){return this._content.tileset}},primitive:{get:function(){return this._content.tileset}},pickIds:{get:function(){const e=this._pickIds;return e[0]=this._billboard.pickId,e[1]=this._label.pickId,e[2]=this._polyline.pickId,e}}}),u.defaultColor=r.Z.WHITE,u.defaultPointOutlineColor=r.Z.BLACK,u.defaultPointOutlineWidth=0,u.defaultPointSize=8,u.prototype.hasProperty=function(e){return this._content.batchTable.hasProperty(this._batchId,e)},u.prototype.getPropertyNames=function(e){return this._content.batchTable.getPropertyNames(this._batchId,e)},u.prototype.getProperty=function(e){return this._content.batchTable.getProperty(this._batchId,e)},u.prototype.getPropertyInherited=function(e){return a.Z.getPropertyInherited(this._content,this._batchId,e)},u.prototype.setProperty=function(e,t){this._content.batchTable.setProperty(this._batchId,e,t),this._content.featurePropertiesDirty=!0},u.prototype.isExactClass=function(e){return this._content.batchTable.isExactClass(this._batchId,e)},u.prototype.isClass=function(e){return this._content.batchTable.isClass(this._batchId,e)},u.prototype.getExactClassName=function(){return this._content.batchTable.getExactClassName(this._batchId)};const d=u},65606:(e,t,i)=>{i.d(t,{Z:()=>n});const n=Object.freeze({ADD:0,REPLACE:1})},20993:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(55077),r=i(88779),o=i(54485),s=i(34971),a=i(20176),c=i(67197),u=i(20131),l=i(65155);function h(e){if(this._style={},this._ready=!1,this._show=void 0,this._color=void 0,this._pointSize=void 0,this._pointOutlineColor=void 0,this._pointOutlineWidth=void 0,this._labelColor=void 0,this._labelOutlineColor=void 0,this._labelOutlineWidth=void 0,this._font=void 0,this._labelStyle=void 0,this._labelText=void 0,this._backgroundColor=void 0,this._backgroundPadding=void 0,this._backgroundEnabled=void 0,this._scaleByDistance=void 0,this._translucencyByDistance=void 0,this._distanceDisplayCondition=void 0,this._heightOffset=void 0,this._anchorLineEnabled=void 0,this._anchorLineColor=void 0,this._image=void 0,this._disableDepthTestDistance=void 0,this._horizontalOrigin=void 0,this._verticalOrigin=void 0,this._labelHorizontalOrigin=void 0,this._labelVerticalOrigin=void 0,this._meta=void 0,this._colorShaderFunction=void 0,this._showShaderFunction=void 0,this._pointSizeShaderFunction=void 0,this._colorShaderFunctionReady=!1,this._showShaderFunctionReady=!1,this._pointSizeShaderFunctionReady=!1,this._colorShaderTranslucent=!1,"string"==typeof e||e instanceof c.Z){(0,s.Z)("Cesium3DTileStyle constructor","string or Resource style parameter in the Cesium3DTileStyle constructor was deprecated in CesiumJS 1.94.  If loading a style from a url, use Cesium3DTileStyle.fromUrl instead.");const t=c.Z.createIfNeeded(e),i=this;this._readyPromise=t.fetchJson(e).then((function(e){return d(i,e),i}))}else d(this,e),this._readyPromise=Promise.resolve(this)}function d(e,t){t=(0,r.Z)((0,n.Z)(t,!0),e._style),e._style=t,e.show=t.show,e.color=t.color,e.pointSize=t.pointSize,e.pointOutlineColor=t.pointOutlineColor,e.pointOutlineWidth=t.pointOutlineWidth,e.labelColor=t.labelColor,e.labelOutlineColor=t.labelOutlineColor,e.labelOutlineWidth=t.labelOutlineWidth,e.labelStyle=t.labelStyle,e.font=t.font,e.labelText=t.labelText,e.backgroundColor=t.backgroundColor,e.backgroundPadding=t.backgroundPadding,e.backgroundEnabled=t.backgroundEnabled,e.scaleByDistance=t.scaleByDistance,e.translucencyByDistance=t.translucencyByDistance,e.distanceDisplayCondition=t.distanceDisplayCondition,e.heightOffset=t.heightOffset,e.anchorLineEnabled=t.anchorLineEnabled,e.anchorLineColor=t.anchorLineColor,e.image=t.image,e.disableDepthTestDistance=t.disableDepthTestDistance,e.horizontalOrigin=t.horizontalOrigin,e.verticalOrigin=t.verticalOrigin,e.labelHorizontalOrigin=t.labelHorizontalOrigin,e.labelVerticalOrigin=t.labelVerticalOrigin;const i={};if((0,o.Z)(t.meta)){const e=t.defines,n=(0,r.Z)(t.meta,r.Z.EMPTY_OBJECT);for(const t in n)n.hasOwnProperty(t)&&(i[t]=new l.Z(n[t],e))}e._meta=i,e._ready=!0}function m(e,t){const i=(0,r.Z)(e._style,r.Z.EMPTY_OBJECT).defines;if((0,o.Z)(t))return"boolean"==typeof t||"number"==typeof t?new l.Z(String(t)):"string"==typeof t?new l.Z(t,i):(0,o.Z)(t.conditions)?new u.Z(t,i):t}function f(e){if((0,o.Z)(e))return(0,o.Z)(e.expression)?e.expression:(0,o.Z)(e.conditionsExpression)?(0,n.Z)(e.conditionsExpression,!0):e}Object.defineProperties(h.prototype,{style:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._style}},ready:{get:function(){return(0,s.Z)("ready","ready was deprecated in CesiumJS 1.94.  It will be removed in 1.96.  If loading a style from a url, use Cesium3DTileStyle.fromUrl instead."),this._ready}},readyPromise:{get:function(){return(0,s.Z)("readyPromise","readyPromise was deprecated in CesiumJS 1.94.  It will be removed in 1.96.  If loading a style from a url, use Cesium3DTileStyle.fromUrl instead."),this._readyPromise}},show:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._show},set:function(e){this._show=m(this,e),this._style.show=f(this._show),this._showShaderFunctionReady=!1}},color:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._color},set:function(e){this._color=m(this,e),this._style.color=f(this._color),this._colorShaderFunctionReady=!1}},pointSize:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._pointSize},set:function(e){this._pointSize=m(this,e),this._style.pointSize=f(this._pointSize),this._pointSizeShaderFunctionReady=!1}},pointOutlineColor:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._pointOutlineColor},set:function(e){this._pointOutlineColor=m(this,e),this._style.pointOutlineColor=f(this._pointOutlineColor)}},pointOutlineWidth:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._pointOutlineWidth},set:function(e){this._pointOutlineWidth=m(this,e),this._style.pointOutlineWidth=f(this._pointOutlineWidth)}},labelColor:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelColor},set:function(e){this._labelColor=m(this,e),this._style.labelColor=f(this._labelColor)}},labelOutlineColor:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelOutlineColor},set:function(e){this._labelOutlineColor=m(this,e),this._style.labelOutlineColor=f(this._labelOutlineColor)}},labelOutlineWidth:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelOutlineWidth},set:function(e){this._labelOutlineWidth=m(this,e),this._style.labelOutlineWidth=f(this._labelOutlineWidth)}},font:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._font},set:function(e){this._font=m(this,e),this._style.font=f(this._font)}},labelStyle:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelStyle},set:function(e){this._labelStyle=m(this,e),this._style.labelStyle=f(this._labelStyle)}},labelText:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelText},set:function(e){this._labelText=m(this,e),this._style.labelText=f(this._labelText)}},backgroundColor:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._backgroundColor},set:function(e){this._backgroundColor=m(this,e),this._style.backgroundColor=f(this._backgroundColor)}},backgroundPadding:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._backgroundPadding},set:function(e){this._backgroundPadding=m(this,e),this._style.backgroundPadding=f(this._backgroundPadding)}},backgroundEnabled:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._backgroundEnabled},set:function(e){this._backgroundEnabled=m(this,e),this._style.backgroundEnabled=f(this._backgroundEnabled)}},scaleByDistance:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._scaleByDistance},set:function(e){this._scaleByDistance=m(this,e),this._style.scaleByDistance=f(this._scaleByDistance)}},translucencyByDistance:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._translucencyByDistance},set:function(e){this._translucencyByDistance=m(this,e),this._style.translucencyByDistance=f(this._translucencyByDistance)}},distanceDisplayCondition:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._distanceDisplayCondition},set:function(e){this._distanceDisplayCondition=m(this,e),this._style.distanceDisplayCondition=f(this._distanceDisplayCondition)}},heightOffset:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._heightOffset},set:function(e){this._heightOffset=m(this,e),this._style.heightOffset=f(this._heightOffset)}},anchorLineEnabled:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._anchorLineEnabled},set:function(e){this._anchorLineEnabled=m(this,e),this._style.anchorLineEnabled=f(this._anchorLineEnabled)}},anchorLineColor:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._anchorLineColor},set:function(e){this._anchorLineColor=m(this,e),this._style.anchorLineColor=f(this._anchorLineColor)}},image:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._image},set:function(e){this._image=m(this,e),this._style.image=f(this._image)}},disableDepthTestDistance:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._disableDepthTestDistance},set:function(e){this._disableDepthTestDistance=m(this,e),this._style.disableDepthTestDistance=f(this._disableDepthTestDistance)}},horizontalOrigin:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._horizontalOrigin},set:function(e){this._horizontalOrigin=m(this,e),this._style.horizontalOrigin=f(this._horizontalOrigin)}},verticalOrigin:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._verticalOrigin},set:function(e){this._verticalOrigin=m(this,e),this._style.verticalOrigin=f(this._verticalOrigin)}},labelHorizontalOrigin:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelHorizontalOrigin},set:function(e){this._labelHorizontalOrigin=m(this,e),this._style.labelHorizontalOrigin=f(this._labelHorizontalOrigin)}},labelVerticalOrigin:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._labelVerticalOrigin},set:function(e){this._labelVerticalOrigin=m(this,e),this._style.labelVerticalOrigin=f(this._labelVerticalOrigin)}},meta:{get:function(){if(!this._ready)throw new a.Z("The style is not loaded.  Use Cesium3DTileStyle.readyPromise or wait for Cesium3DTileStyle.ready to be true.");return this._meta},set:function(e){this._meta=e}}}),h.fromUrl=function(e){if(!(0,o.Z)(e))throw new a.Z("url is required");return c.Z.createIfNeeded(e).fetchJson(e).then((function(e){return new h(e)}))},h.prototype.getColorShaderFunction=function(e,t,i){return this._colorShaderFunctionReady?(i.translucent=this._colorShaderTranslucent,this._colorShaderFunction):(this._colorShaderFunctionReady=!0,(0,o.Z)(this.color)&&(0,o.Z)(this.color.getShaderFunction)?this._colorShaderFunction=this.color.getShaderFunction(e,t,i,"vec4"):this._colorShaderFunction=void 0,this._colorShaderTranslucent=i.translucent,this._colorShaderFunction)},h.prototype.getShowShaderFunction=function(e,t,i){return this._showShaderFunctionReady||(this._showShaderFunctionReady=!0,(0,o.Z)(this.show)&&(0,o.Z)(this.show.getShaderFunction)?this._showShaderFunction=this.show.getShaderFunction(e,t,i,"bool"):this._showShaderFunction=void 0),this._showShaderFunction},h.prototype.getPointSizeShaderFunction=function(e,t,i){return this._pointSizeShaderFunctionReady||(this._pointSizeShaderFunctionReady=!0,(0,o.Z)(this.pointSize)&&(0,o.Z)(this.pointSize.getShaderFunction)?this._pointSizeShaderFunction=this.pointSize.getShaderFunction(e,t,i,"float"):this._pointSizeShaderFunction=void 0),this._pointSizeShaderFunction},h.prototype.getVariables=function(){let e=[];return(0,o.Z)(this.color)&&(0,o.Z)(this.color.getVariables)&&e.push.apply(e,this.color.getVariables()),(0,o.Z)(this.show)&&(0,o.Z)(this.show.getVariables)&&e.push.apply(e,this.show.getVariables()),(0,o.Z)(this.pointSize)&&(0,o.Z)(this.pointSize.getVariables)&&e.push.apply(e,this.pointSize.getVariables()),e=e.filter((function(e,t,i){return i.indexOf(e)===t})),e};const _=h},23136:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(54485);function r(){this._style=void 0,this._styleDirty=!1,this._lastStyleTime=0}Object.defineProperties(r.prototype,{style:{get:function(){return this._style},set:function(e){e!==this._style&&(this._style=e,this._styleDirty=!0)}}}),r.prototype.makeDirty=function(){this._styleDirty=!0},r.prototype.resetDirty=function(){this._styleDirty=!1},r.prototype.applyStyle=function(e){if(!e.ready)return;if((0,n.Z)(this._style)&&!this._style._ready)return;const t=this._styleDirty;t&&++this._lastStyleTime;const i=this._lastStyleTime,r=e._statistics,o=t?e._selectedTiles:e._selectedTilesToStyle,s=o.length;for(let e=0;e<s;++e){const t=o[e];if(t.lastStyleTime!==i){const e=t.content;t.lastStyleTime=i,e.applyStyle(this._style),r.numberOfFeaturesStyled+=e.featuresLength,++r.numberOfTilesStyled}}};const o=r},66207:(e,t,i)=>{i.d(t,{Z:()=>Se});var n=i(93237),r=i(59015),o=i(93517),s=i(66866),a=i(17497),c=i(55077),u=i(78505),l=i(88779),h=i(54485),d=i(34971),m=i(90332),f=i(20176),_=i(99996),p=i(92893),g=i(86066),Z=i(98140),y=i(97262),b=i(65812),v=i(22874),S=i(71118),C=i(67197),E=i(21514),x=i(7004),T=i(74366),w=i(1577),O=i(74064),L=i(81737),P=i(92624),D=i(40363),A=i(42551),I=i(28214),R=i(16955),M=i(28176),N=i(65606),B=i(68213),V=i(30475),k=i(56384),U=i(23136),F=i(53425),z=i(30271),$=i(22468),q=i(88472),W=i(77819),G=i(83714),H=i(85803),Y=i(22128),j=i(18061),X=i(49616),K=i(77493),Q=i(84067),J=i(74371),ee=i(26280),te=i(61057);function ie(e){e=(0,l.Z)(e,l.Z.EMPTY_OBJECT),a.Z.defined("options.url",e.url),this._url=void 0,this._basePath=void 0,this._root=void 0,this._resource=void 0,this._asset=void 0,this._properties=void 0,this._geometricError=void 0,this._extensionsUsed=void 0,this._extensions=void 0,this._gltfUpAxis=void 0,this._cache=new B.Z,this._processingQueue=[],this._selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this._selectedTilesToStyle=[],this._loadTimestamp=void 0,this._timeSinceLoad=0,this._updatedVisibilityFrame=0,this._updatedModelMatrixFrame=0,this._modelMatrixChanged=!1,this._previousModelMatrix=void 0,this._extras=void 0,this._credits=void 0,this._showCreditsOnScreen=(0,l.Z)(e.showCreditsOnScreen,!1),this._cullWithChildrenBounds=(0,l.Z)(e.cullWithChildrenBounds,!0),this._allTilesAdditive=!0,this._hasMixedContent=!1,this._stencilClearCommand=void 0,this._backfaceCommands=new b.Z,this._maximumScreenSpaceError=(0,l.Z)(e.maximumScreenSpaceError,16),this._maximumMemoryUsage=(0,l.Z)(e.maximumMemoryUsage,512),this._styleEngine=new U.Z,this._modelMatrix=(0,h.Z)(e.modelMatrix)?S.Z.clone(e.modelMatrix):S.Z.clone(S.Z.IDENTITY),this._statistics=new k.Z,this._statisticsLast=new k.Z,this._statisticsPerPass=new Array(M.Z.NUMBER_OF_PASSES);for(let e=0;e<M.Z.NUMBER_OF_PASSES;++e)this._statisticsPerPass[e]=new k.Z;this._requestedTilesInFlight=[],this._maximumPriority={foveatedFactor:-Number.MAX_VALUE,depth:-Number.MAX_VALUE,distance:-Number.MAX_VALUE,reverseScreenSpaceError:-Number.MAX_VALUE},this._minimumPriority={foveatedFactor:Number.MAX_VALUE,depth:Number.MAX_VALUE,distance:Number.MAX_VALUE,reverseScreenSpaceError:Number.MAX_VALUE},this._heatmap=new V.Z(e.debugHeatmapTilePropertyName),this.cullRequestsWhileMoving=(0,l.Z)(e.cullRequestsWhileMoving,!0),this._cullRequestsWhileMoving=!1,this.cullRequestsWhileMovingMultiplier=(0,l.Z)(e.cullRequestsWhileMovingMultiplier,60),this.progressiveResolutionHeightFraction=v.Z.clamp((0,l.Z)(e.progressiveResolutionHeightFraction,.3),0,.5),this.preferLeaves=(0,l.Z)(e.preferLeaves,!1),this._tilesLoaded=!1,this._initialTilesLoaded=!1,this._tileDebugLabels=void 0,this._classificationType=e.classificationType,this._ellipsoid=(0,l.Z)(e.ellipsoid,_.Z.WGS84),this._initialClippingPlanesOriginMatrix=S.Z.IDENTITY,this._clippingPlanesOriginMatrix=void 0,this._clippingPlanesOriginMatrixDirty=!0,this._vectorClassificationOnly=(0,l.Z)(e.vectorClassificationOnly,!1),this._vectorKeepDecodedPositions=(0,l.Z)(e.vectorKeepDecodedPositions,!1),this.preloadWhenHidden=(0,l.Z)(e.preloadWhenHidden,!1),this.preloadFlightDestinations=(0,l.Z)(e.preloadFlightDestinations,!0),this._pass=void 0,this.dynamicScreenSpaceError=(0,l.Z)(e.dynamicScreenSpaceError,!1),this.foveatedScreenSpaceError=(0,l.Z)(e.foveatedScreenSpaceError,!0),this._foveatedConeSize=(0,l.Z)(e.foveatedConeSize,.1),this._foveatedMinimumScreenSpaceErrorRelaxation=(0,l.Z)(e.foveatedMinimumScreenSpaceErrorRelaxation,0),this.foveatedInterpolationCallback=(0,l.Z)(e.foveatedInterpolationCallback,v.Z.lerp),this.foveatedTimeDelay=(0,l.Z)(e.foveatedTimeDelay,.2),this.dynamicScreenSpaceErrorDensity=.00278,this.dynamicScreenSpaceErrorFactor=4,this.dynamicScreenSpaceErrorHeightFalloff=.25,this._dynamicScreenSpaceErrorComputedDensity=0,this.shadows=(0,l.Z)(e.shadows,X.Z.ENABLED),this.show=(0,l.Z)(e.show,!0),this.colorBlendMode=D.Z.HIGHLIGHT,this.colorBlendAmount=.5,this._pointCloudShading=new H.Z(e.pointCloudShading),this._pointCloudEyeDomeLighting=new G.Z,this.loadProgress=new p.Z,this.allTilesLoaded=new p.Z,this.initialTilesLoaded=new p.Z,this.tileLoad=new p.Z,this.tileUnload=new p.Z,this.tileFailed=new p.Z,this.tileVisible=new p.Z,this.skipLevelOfDetail=(0,l.Z)(e.skipLevelOfDetail,!1),this._skipLevelOfDetail=this.skipLevelOfDetail,this._disableSkipLevelOfDetail=!1,this.baseScreenSpaceError=(0,l.Z)(e.baseScreenSpaceError,1024),this.skipScreenSpaceErrorFactor=(0,l.Z)(e.skipScreenSpaceErrorFactor,16),this.skipLevels=(0,l.Z)(e.skipLevels,1),this.immediatelyLoadDesiredLevelOfDetail=(0,l.Z)(e.immediatelyLoadDesiredLevelOfDetail,!1),this.loadSiblings=(0,l.Z)(e.loadSiblings,!1),this._clippingPlanes=void 0,this.clippingPlanes=e.clippingPlanes,(0,h.Z)(e.imageBasedLighting)?(this._imageBasedLighting=e.imageBasedLighting,this._shouldDestroyImageBasedLighting=!1):(this._imageBasedLighting=new Z.Z,this._shouldDestroyImageBasedLighting=!0),this.lightColor=e.lightColor,this.backFaceCulling=(0,l.Z)(e.backFaceCulling,!0),this.showOutline=(0,l.Z)(e.showOutline,!0),this.splitDirection=(0,l.Z)(e.splitDirection,K.Z.NONE),this.debugFreezeFrame=(0,l.Z)(e.debugFreezeFrame,!1),this.debugColorizeTiles=(0,l.Z)(e.debugColorizeTiles,!1),this._enableDebugWireframe=(0,l.Z)(e.enableDebugWireframe,!1),this.debugWireframe=(0,l.Z)(e.debugWireframe,!1),this.debugShowBoundingVolume=(0,l.Z)(e.debugShowBoundingVolume,!1),this.debugShowContentBoundingVolume=(0,l.Z)(e.debugShowContentBoundingVolume,!1),this.debugShowViewerRequestVolume=(0,l.Z)(e.debugShowViewerRequestVolume,!1),this._tileDebugLabels=void 0,this.debugPickedTileLabelOnly=!1,this.debugPickedTile=void 0,this.debugPickPosition=void 0,this.debugShowGeometricError=(0,l.Z)(e.debugShowGeometricError,!1),this.debugShowRenderingStatistics=(0,l.Z)(e.debugShowRenderingStatistics,!1),this.debugShowMemoryUsage=(0,l.Z)(e.debugShowMemoryUsage,!1),this.debugShowUrl=(0,l.Z)(e.debugShowUrl,!1),this.examineVectorLinesFunction=void 0,this._metadataExtension=void 0,this._customShader=e.customShader,this.enableModelExperimental=(0,l.Z)(e.enableModelExperimental,g.Z.enableModelExperimental);let t=(0,l.Z)(e.featureIdLabel,"featureId_0");"number"==typeof t&&(t=`featureId_${t}`),this._featureIdLabel=t;let i=(0,l.Z)(e.instanceFeatureIdLabel,"instanceFeatureId_0");"number"==typeof i&&(i=`instanceFeatureId_${i}`),this._instanceFeatureIdLabel=i,this._schemaLoader=void 0;const r=this;let o;this._readyPromise=Promise.resolve(e.url).then((function(e){let t;return o=C.Z.createIfNeeded(e),r._resource=o,r._credits=o.credits,"json"===o.extension?t=o.getBaseUri(!0):o.isDataUri&&(t=""),r._url=o.url,r._basePath=t,ie.loadJson(o)})).then((function(e){if(!r.isDestroyed())return function(e,t){const i=(0,z.Z)(t,"3DTILES_metadata")?t.extensions["3DTILES_metadata"]:t;let n;if((0,h.Z)(i.schemaUri)){const t=e._resource.getDerivedResource({url:i.schemaUri});n=Y.Z.loadSchema({resource:t})}else{if(!(0,h.Z)(i.schema))return Promise.resolve(t);n=Y.Z.loadSchema({schema:i.schema})}return e._schemaLoader=n,n.promise.then((function(n){return e._metadataExtension=new I.Z({schema:n.schema,metadataJson:i}),t}))}(r,e)})).then((function(e){if(r.isDestroyed())return;r._root=r.loadTileset(o,e);const t=(0,h.Z)(e.asset.gltfUpAxis)?L.Z.fromName(e.asset.gltfUpAxis):L.Z.Y,i=e.asset;r._asset=i,r._properties=e.properties,r._geometricError=e.geometricError,r._extensionsUsed=e.extensionsUsed,r._extensions=e.extensions,r._gltfUpAxis=t,r._extras=e.extras;const s=i.extras;if((0,h.Z)(s)&&(0,h.Z)(s.cesium)&&(0,h.Z)(s.cesium.credits)){const e=s.cesium.credits;let t=r._credits;(0,h.Z)(t)||(t=[],r._credits=t);for(let i=0;i<e.length;++i){const n=e[i];t.push(new u.Z(n.html,r._showCreditsOnScreen))}}const a=r._root.createBoundingVolume(e.root.boundingVolume,S.Z.IDENTITY).boundingSphere.center,c=r._ellipsoid.cartesianToCartographic(a);return(0,h.Z)(c)&&c.height>n.Z._defaultMinTerrainHeight&&(r._initialClippingPlanesOriginMatrix=x.Z.eastNorthUpToFixedFrame(a)),r._clippingPlanesOriginMatrix=S.Z.clone(r._initialClippingPlanesOriginMatrix),r}))}function ne(e,t,i,n){if((0,h.Z)(i.implicitTiling)||(0,z.Z)(i,"3DTILES_implicit_tiling")){const r=e.schema,o=new $.Z(t,i,r),s=new q.Z({subdivisionScheme:o.subdivisionScheme,subtreeLevels:o.subtreeLevels,level:0,x:0,y:0,z:0}),a=o.subtreeUriTemplate.getDerivedResource({templateValues:s.getTemplateValues()}).url,u=!0,l=(0,c.Z)(i,u);l.contents=[{uri:a}],delete l.content,delete l.extensions;const h=new P.Z(e,t,l,n);return h.implicitTileset=o,h.implicitCoordinates=s,h}return new P.Z(e,t,i,n)}Object.defineProperties(ie.prototype,{isCesium3DTileset:{get:function(){return!0}},asset:{get:function(){if(!this.ready)throw new f.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._asset}},extensions:{get:function(){if(!this.ready)throw new f.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._extensions}},clippingPlanes:{get:function(){return this._clippingPlanes},set:function(e){F.Z.setOwner(e,this,"_clippingPlanes")}},properties:{get:function(){if(!this.ready)throw new f.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._properties}},ready:{get:function(){return(0,h.Z)(this._root)}},readyPromise:{get:function(){return this._readyPromise}},tilesLoaded:{get:function(){return this._tilesLoaded}},resource:{get:function(){return this._resource}},basePath:{get:function(){return(0,d.Z)("Cesium3DTileset.basePath","Cesium3DTileset.basePath has been deprecated. All tiles are relative to the url of the tileset JSON file that contains them. Use the url property instead."),this._basePath}},style:{get:function(){return this._styleEngine.style},set:function(e){this._styleEngine.style=e}},customShader:{get:function(){return this._customShader},set:function(e){this._customShader=e}},metadataExtension:{get:function(){return this._metadataExtension}},metadata:{get:function(){if((0,h.Z)(this._metadataExtension))return this._metadataExtension.tileset}},schema:{get:function(){if((0,h.Z)(this._metadataExtension))return this._metadataExtension.schema}},maximumScreenSpaceError:{get:function(){return this._maximumScreenSpaceError},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("maximumScreenSpaceError",e,0),this._maximumScreenSpaceError=e}},maximumMemoryUsage:{get:function(){return this._maximumMemoryUsage},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("value",e,0),this._maximumMemoryUsage=e}},pointCloudShading:{get:function(){return this._pointCloudShading},set:function(e){a.Z.defined("pointCloudShading",e),this._pointCloudShading=e}},root:{get:function(){if(!this.ready)throw new f.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._root}},boundingSphere:{get:function(){if(!this.ready)throw new f.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._root.updateTransform(this._modelMatrix),this._root.boundingSphere}},modelMatrix:{get:function(){return this._modelMatrix},set:function(e){this._modelMatrix=S.Z.clone(e,this._modelMatrix)}},timeSinceLoad:{get:function(){return this._timeSinceLoad}},totalMemoryUsageInBytes:{get:function(){const e=this._statistics;return e.texturesByteLength+e.geometryByteLength+e.batchTableByteLength}},clippingPlanesOriginMatrix:{get:function(){return(0,h.Z)(this._clippingPlanesOriginMatrix)?(this._clippingPlanesOriginMatrixDirty&&(S.Z.multiply(this.root.computedTransform,this._initialClippingPlanesOriginMatrix,this._clippingPlanesOriginMatrix),this._clippingPlanesOriginMatrixDirty=!1),this._clippingPlanesOriginMatrix):S.Z.IDENTITY}},styleEngine:{get:function(){return this._styleEngine}},statistics:{get:function(){return this._statistics}},classificationType:{get:function(){return this._classificationType}},ellipsoid:{get:function(){return this._ellipsoid}},foveatedConeSize:{get:function(){return this._foveatedConeSize},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("foveatedConeSize",e,0),a.Z.typeOf.number.lessThanOrEquals("foveatedConeSize",e,1),this._foveatedConeSize=e}},foveatedMinimumScreenSpaceErrorRelaxation:{get:function(){return this._foveatedMinimumScreenSpaceErrorRelaxation},set:function(e){a.Z.typeOf.number.greaterThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,0),a.Z.typeOf.number.lessThanOrEquals("foveatedMinimumScreenSpaceErrorRelaxation",e,this.maximumScreenSpaceError),this._foveatedMinimumScreenSpaceErrorRelaxation=e}},extras:{get:function(){if(!this.ready)throw new f.Z("The tileset is not loaded.  Use Cesium3DTileset.readyPromise or wait for Cesium3DTileset.ready to be true.");return this._extras}},imageBasedLighting:{get:function(){return this._imageBasedLighting},set:function(e){a.Z.typeOf.object("imageBasedLighting",this._imageBasedLighting),e!==this._imageBasedLighting&&(this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=e,this._shouldDestroyImageBasedLighting=!1)}},vectorClassificationOnly:{get:function(){return this._vectorClassificationOnly}},vectorKeepDecodedPositions:{get:function(){return this._vectorKeepDecodedPositions}},showCreditsOnScreen:{get:function(){return this._showCreditsOnScreen},set:function(e){this._showCreditsOnScreen=e}},featureIdLabel:{get:function(){return this._featureIdLabel},set:function(e){"number"==typeof e&&(e=`featureId_${e}`),a.Z.typeOf.string("value",e),this._featureIdLabel=e}},instanceFeatureIdLabel:{get:function(){return this._instanceFeatureIdLabel},set:function(e){"number"==typeof e&&(e=`instanceFeatureId_${e}`),a.Z.typeOf.string("value",e),this._instanceFeatureIdLabel=e}}}),ie.loadJson=function(e){return C.Z.createIfNeeded(e).fetchJson()},ie.prototype.makeStyleDirty=function(){this._styleEngine.makeDirty()},ie.prototype.loadTileset=function(e,t,i){const n=t.asset;if(!(0,h.Z)(n))throw new E.Z("Tileset must have an asset property.");if("0.0"!==n.version&&"1.0"!==n.version&&"1.1"!==n.version)throw new E.Z("The tileset must be 3D Tiles version 0.0, 1.0, or 1.1");(0,h.Z)(t.extensionsRequired)&&ie.checkSupportedExtensions(t.extensionsRequired);const r=this._statistics,o=n.tilesetVersion;(0,h.Z)(o)&&(this._basePath+=`?v=${o}`,(e=e.clone()).setQueryParameters({v:o}));const s=ne(this,e,t.root,i);(0,h.Z)(i)&&(i.children.push(s),s._depth=i._depth+1);const a=[];for(a.push(s);a.length>0;){const t=a.pop();++r.numberOfTilesTotal,this._allTilesAdditive=this._allTilesAdditive&&t.refine===N.Z.ADD;const i=t._header.children;if((0,h.Z)(i)){const n=i.length;for(let r=0;r<n;++r){const n=ne(this,e,i[r],t);t.children.push(n),n._depth=t._depth+1,a.push(n)}}this._cullWithChildrenBounds&&R.Z.checkChildrenWithinParent(t)}return s};const re=new o.Z,oe=new s.Z,se=new S.Z,ae=new o.Z,ce=new o.Z,ue=new o.Z;function le(e,t){if(t.hasEmptyContent)return;const i=e._statistics,n=t.contentExpired,r=t.requestContent();r>0?i.numberOfAttemptedRequests+=r:(n&&(t.hasTilesetContent||t.hasImplicitContent?function(e,t){const i=t,n=Ze;n.push(t);for(;n.length>0;){const r=(t=n.pop()).children,o=r.length;for(let e=0;e<o;++e)n.push(r[e]);t!==i&&(be(e,t),--e._statistics.numberOfTilesTotal)}i.children=[]}(e,t):(i.decrementLoadCounts(t.content),--i.numberOfTilesWithContentReady)),e._requestedTilesInFlight.push(t),t.contentReadyToProcessPromise.then(function(e,t){return function(){e._processingQueue.push(t),++e._statistics.numberOfTilesProcessing}}(e,t)).catch((function(e){})),t.contentReadyPromise.then(function(e,t){return function(i){--e._statistics.numberOfTilesProcessing,(0,h.Z)(i)&&(t.hasTilesetContent||t.hasImplicitContent||(e._statistics.incrementLoadCounts(t.content),++e._statistics.numberOfTilesWithContentReady,++e._statistics.numberOfLoadedTilesTotal,e._cache.add(t)),e.tileLoad.raiseEvent(t))}}(e,t)).catch(function(e,t){return function(i){if(t._contentState!==A.Z.FAILED)return;const n=t._contentResource.url,r=(0,h.Z)(i.message)?i.message:i.toString();e.tileFailed.numberOfListeners>0&&e.tileFailed.raiseEvent({url:n,message:r})}}(e,t)))}function he(e,t){return e._priority-t._priority}ie.prototype.postPassesUpdate=function(e){this.ready&&(!function(e,t){const i=e._requestedTilesInFlight;let n=0;const r=i.length;for(let e=0;e<r;++e){const r=i[e],o=t.frameNumber-r._touchedFrame>=1;r._contentState===A.Z.LOADING?o?(r.cancelRequests(),++n):n>0&&(i[e-n]=r):++n}i.length-=n}(this,e),function(e,t){const i=e._statistics,n=e._statisticsLast,r=i.numberOfPendingRequests,o=i.numberOfTilesProcessing,s=n.numberOfPendingRequests,a=n.numberOfTilesProcessing;k.Z.clone(i,n);const c=r!==s||o!==a;c&&t.afterRender.push((function(){e.loadProgress.raiseEvent(r,o)}));e._tilesLoaded=0===i.numberOfPendingRequests&&0===i.numberOfTilesProcessing&&0===i.numberOfAttemptedRequests,c&&e._tilesLoaded&&(t.afterRender.push((function(){e.allTilesLoaded.raiseEvent()})),e._initialTilesLoaded||(e._initialTilesLoaded=!0,t.afterRender.push((function(){e.initialTilesLoaded.raiseEvent()}))))}(this,e),this._cache.unloadTiles(this,ye),this._styleEngine.resetDirty())},ie.prototype.prePassesUpdate=function(e){if(!this.ready)return;!function(e,t){!function(e){const t=e._processingQueue,i=t.length;let n=0;for(let e=0;e<i;++e){const i=t[e];i._contentState===A.Z.PROCESSING?n>0&&(t[e-n]=i):++n}t.length-=n}(e);const i=e._processingQueue,n=i.length;for(let r=0;r<n;++r)i[r].process(e,t)}(this,e);const t=this._clippingPlanes;this._clippingPlanesOriginMatrixDirty=!0,(0,h.Z)(t)&&t.enabled&&t.update(e),(0,h.Z)(this._loadTimestamp)||(this._loadTimestamp=y.Z.clone(e.time)),this._timeSinceLoad=Math.max(1e3*y.Z.secondsDifference(e.time,this._loadTimestamp),0),this._skipLevelOfDetail=this.skipLevelOfDetail&&!(0,h.Z)(this._classificationType)&&!this._disableSkipLevelOfDetail&&!this._allTilesAdditive,this.dynamicScreenSpaceError&&function(e,t){let i,n,r,a,c;const u=t.camera,l=e._root,h=l.contentBoundingVolume;if(h instanceof J.Z)i=o.Z.normalize(u.positionWC,re),n=u.directionWC,r=u.positionCartographic.height,a=h.minimumHeight,c=h.maximumHeight;else{const e=S.Z.inverseTransformation(l.computedTransform,se),d=t.mapProjection.ellipsoid,m=h.boundingVolume,f=S.Z.multiplyByPoint(e,m.center,ae);if(o.Z.magnitude(f)>d.minimumRadius){const e=s.Z.fromCartesian(f,d,oe);i=o.Z.normalize(u.positionWC,re),n=u.directionWC,r=u.positionCartographic.height,a=0,c=2*e.height}else{const t=S.Z.multiplyByPoint(e,u.positionWC,ce);if(i=o.Z.UNIT_Z,n=S.Z.multiplyByPointAsVector(e,u.directionWC,ue),n=o.Z.normalize(n,n),r=t.z,h instanceof te.Z){const e=l._header.boundingVolume.box[11];a=f.z-e,c=f.z+e}else if(h instanceof ee.Z){const e=m.radius;a=f.z-e,c=f.z+e}}}const d=a+(c-a)*e.dynamicScreenSpaceErrorHeightFalloff,m=c,f=v.Z.clamp((r-d)/(m-d),0,1);let _=1-Math.abs(o.Z.dot(n,i));_*=1-f;let p=e.dynamicScreenSpaceErrorDensity;p*=_,e._dynamicScreenSpaceErrorComputedDensity=p}(this,e),e.newFrame&&this._cache.reset()};const de=new o.Z,me={maximumFractionDigits:3};function fe(e){const t=e/1048576;return t<1?t.toLocaleString(void 0,me):Math.round(t).toLocaleString()}function _e(e){const t=e.boundingVolume.boundingVolume,i=t.halfAxes,n=t.radius;let r=o.Z.clone(t.center,de);if((0,h.Z)(i))r.x+=.75*(i[0]+i[3]+i[6]),r.y+=.75*(i[1]+i[4]+i[7]),r.z+=.75*(i[2]+i[5]+i[8]);else if((0,h.Z)(n)){let e=o.Z.normalize(t.center,de);e=o.Z.multiplyByScalar(e,.75*n,de),r=o.Z.add(e,t.center,de)}return r}function pe(e,t,i){let n="",r=0;if(t.debugShowGeometricError&&(n+=`\nGeometric error: ${e.geometricError}`,r++),t.debugShowRenderingStatistics){n+=`\nCommands: ${e.commandsLength}`,r++;e.content.pointsLength>0&&(n+=`\nPoints: ${e.content.pointsLength}`,r++);e.content.trianglesLength>0&&(n+=`\nTriangles: ${e.content.trianglesLength}`,r++),n+=`\nFeatures: ${e.content.featuresLength}`,r++}if(t.debugShowMemoryUsage&&(n+=`\nTexture Memory: ${fe(e.content.texturesByteLength)}`,n+=`\nGeometry Memory: ${fe(e.content.geometryByteLength)}`,r+=2),t.debugShowUrl)if(e.hasMultipleContents){n+="\nUrls:";const t=e.content.innerContentUrls;for(let e=0;e<t.length;e++)n+=`\n- ${t[e]}`;r+=t.length}else n+=`\nUrl: ${e._contentHeader.uri}`,r++;const o={text:n.substring(1),position:i,font:19-r+"px sans-serif",showBackground:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY};return t._tileDebugLabels.add(o)}function ge(e,t,i){e._styleEngine.applyStyle(e);const n=i.isRender,o=e._statistics,s=t.commandList,a=s.length,c=e._selectedTiles,u=c.length,l=e._emptyTiles,d=l.length,m=e.tileVisible;let f,_;const p=e._skipLevelOfDetail&&e._hasMixedContent&&t.context.stencilBuffer&&u>0;e._backfaceCommands.length=0,p&&((0,h.Z)(e._stencilClearCommand)||(e._stencilClearCommand=new T.Z({stencil:0,pass:w.Z.CESIUM_3D_TILE,renderState:O.Z.fromCache({stencilMask:Q.Z.SKIP_LOD_MASK})})),s.push(e._stencilClearCommand));const g=s.length;for(f=0;f<u;++f)_=c[f],n&&m.raiseEvent(_),_.update(e,t,i),o.incrementSelectionCounts(_.content),++o.selected;for(f=0;f<d;++f)_=l[f],_.update(e,t,i);let Z=s.length-g;if(e._backfaceCommands.trim(),p){const t=e._backfaceCommands.values,i=t.length;for(s.length+=i,f=Z-1;f>=0;--f)s[g+i+f]=s[g+f];for(f=0;f<i;++f)s[g+f]=t[f]}Z=s.length-a,o.numberOfCommands=Z,n&&e.pointCloudShading.attenuation&&e.pointCloudShading.eyeDomeLighting&&Z>0&&e._pointCloudEyeDomeLighting.update(t,a,e.pointCloudShading,e.boundingSphere),n&&(e.debugShowGeometricError||e.debugShowRenderingStatistics||e.debugShowMemoryUsage||e.debugShowUrl?((0,h.Z)(e._tileDebugLabels)||(e._tileDebugLabels=new W.Z),function(e,t){let i,n;const o=e._selectedTiles,s=o.length,a=e._emptyTiles,c=a.length;if(e._tileDebugLabels.removeAll(),e.debugPickedTileLabelOnly){if((0,h.Z)(e.debugPickedTile)){const t=(0,h.Z)(e.debugPickPosition)?e.debugPickPosition:_e(e.debugPickedTile);pe(e.debugPickedTile,e,t).pixelOffset=new r.Z(15,-15)}}else{for(i=0;i<s;++i)n=o[i],pe(n,e,_e(n));for(i=0;i<c;++i)n=a[i],(n.hasTilesetContent||n.hasImplicitContent)&&pe(n,e,_e(n))}e._tileDebugLabels.update(t)}(e,t)):e._tileDebugLabels=e._tileDebugLabels&&e._tileDebugLabels.destroy())}const Ze=[];function ye(e,t){e.tileUnload.raiseEvent(t),e._statistics.decrementLoadCounts(t.content),--e._statistics.numberOfTilesWithContentReady,t.unloadContent()}function be(e,t){e._cache.unloadTile(e,t,ye),t.destroy()}function ve(e,t,i,n){if(t.mode===j.Z.MORPHING)return!1;if(!e.ready)return!1;const r=e._statistics;r.clear();const o=n.isRender;++e._updatedVisibilityFrame,function(e){e._heatmap.resetMinimumMaximum(),e._minimumPriority.depth=Number.MAX_VALUE,e._maximumPriority.depth=-Number.MAX_VALUE,e._minimumPriority.foveatedFactor=Number.MAX_VALUE,e._maximumPriority.foveatedFactor=-Number.MAX_VALUE,e._minimumPriority.distance=Number.MAX_VALUE,e._maximumPriority.distance=-Number.MAX_VALUE,e._minimumPriority.reverseScreenSpaceError=Number.MAX_VALUE,e._maximumPriority.reverseScreenSpaceError=-Number.MAX_VALUE}(e),function(e,t){t.frameNumber===e._updatedModelMatrixFrame&&(0,h.Z)(e._previousModelMatrix)||(e._updatedModelMatrixFrame=t.frameNumber,e._modelMatrixChanged=!S.Z.equals(e.modelMatrix,e._previousModelMatrix),e._modelMatrixChanged&&(e._previousModelMatrix=S.Z.clone(e.modelMatrix,e._previousModelMatrix)))}(e,t),e._cullRequestsWhileMoving=e.cullRequestsWhileMoving&&!e._modelMatrixChanged;const s=n.traversal.selectTiles(e,t);if(n.requestTiles&&function(e,t){const i=e._requestedTiles,n=i.length;i.sort(he);for(let t=0;t<n;++t)le(e,i[t])}(e),ge(e,t,n),k.Z.clone(r,i),o){const i=e._credits;if((0,h.Z)(i)&&0!==r.selected){const n=i.length;for(let r=0;r<n;++r){const n=i[r];n.showOnScreen=e._showCreditsOnScreen,t.creditDisplay.addCredit(n)}}}return s}ie.prototype.trimLoadedTiles=function(){this._cache.trim()},ie.prototype.update=function(e){this.updateForPass(e,e.tilesetPassState)},ie.prototype.updateForPass=function(e,t){a.Z.typeOf.object("frameState",e),a.Z.typeOf.object("tilesetPassState",t);const i=t.pass;if(i===M.Z.PRELOAD&&(!this.preloadWhenHidden||this.show)||i===M.Z.PRELOAD_FLIGHT&&(!this.preloadFlightDestinations||!this.show&&!this.preloadWhenHidden)||i===M.Z.REQUEST_RENDER_MODE_DEFER_CHECK&&(!this._cullRequestsWhileMoving&&this.foveatedTimeDelay<=0||!this.show))return;const n=e.commandList,r=e.camera,o=e.cullingVolume;t.ready=!1;const s=M.Z.getPassOptions(i),c=s.ignoreCommands,u=(0,l.Z)(t.commandList,n),h=u.length;e.commandList=u,e.camera=(0,l.Z)(t.camera,r),e.cullingVolume=(0,l.Z)(t.cullingVolume,o);const d=this._statisticsPerPass[i];(this.show||c)&&(this._pass=i,t.ready=ve(this,e,d,s)),c&&(u.length=h),e.commandList=n,e.camera=r,e.cullingVolume=o},ie.prototype.hasExtension=function(e){return!!(0,h.Z)(this._extensionsUsed)&&this._extensionsUsed.indexOf(e)>-1},ie.prototype.isDestroyed=function(){return!1},ie.prototype.destroy=function(){if(this._tileDebugLabels=this._tileDebugLabels&&this._tileDebugLabels.destroy(),this._clippingPlanes=this._clippingPlanes&&this._clippingPlanes.destroy(),(0,h.Z)(this._schemaLoader)&&Y.Z.unload(this._schemaLoader),(0,h.Z)(this._root)){const e=Ze;for(e.push(this._root);e.length>0;){const t=e.pop();t.destroy();const i=t.children,n=i.length;for(let t=0;t<n;++t)e.push(i[t])}}return this._root=void 0,this._shouldDestroyImageBasedLighting&&!this._imageBasedLighting.isDestroyed()&&this._imageBasedLighting.destroy(),this._imageBasedLighting=void 0,(0,m.Z)(this)},ie.supportedExtensions={"3DTILES_metadata":!0,"3DTILES_implicit_tiling":!0,"3DTILES_content_gltf":!0,"3DTILES_multiple_contents":!0,"3DTILES_bounding_volume_S2":!0,"3DTILES_batch_table_hierarchy":!0,"3DTILES_draco_point_compression":!0,MAXAR_content_geojson:!0},ie.checkSupportedExtensions=function(e){for(let t=0;t<e.length;t++)if(!ie.supportedExtensions[e[t]])throw new E.Z(`Unsupported 3D Tiles Extension: ${e[t]}`)};const Se=ie},68213:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(54485),r=i(65073);function o(){this._list=new r.Z,this._sentinel=this._list.add(),this._trimTiles=!1}o.prototype.reset=function(){this._list.splice(this._list.tail,this._sentinel)},o.prototype.touch=function(e){const t=e.cacheNode;(0,n.Z)(t)&&this._list.splice(this._sentinel,t)},o.prototype.add=function(e){(0,n.Z)(e.cacheNode)||(e.cacheNode=this._list.add(e))},o.prototype.unloadTile=function(e,t,i){const r=t.cacheNode;(0,n.Z)(r)&&(this._list.remove(r),t.cacheNode=void 0,i(e,t))},o.prototype.unloadTiles=function(e,t){const i=this._trimTiles;this._trimTiles=!1;const n=this._list,r=1024*e.maximumMemoryUsage*1024,o=this._sentinel;let s=n.head;for(;s!==o&&(e.totalMemoryUsageInBytes>r||i);){const i=s.item;s=s.next,this.unloadTile(e,i,t)}},o.prototype.trim=function(){this._trimTiles=!0};const s=o},30475:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(6785),r=i(54485),o=i(97262),s=i(22874);function a(e){this.tilePropertyName=e,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE,this._previousMinimum=Number.MAX_VALUE,this._previousMaximum=-Number.MAX_VALUE,this._referenceMinimum={},this._referenceMaximum={}}function c(e,t){let i;return i="_loadTimestamp"===t?o.Z.toDate(e).getTime():e,i}a.prototype.setReferenceMinimumMaximum=function(e,t,i){this._referenceMinimum[i]=c(e,i),this._referenceMaximum[i]=c(t,i)};const u=[new n.Z(.1,.1,.1,1),new n.Z(.153,.278,.878,1),new n.Z(.827,.231,.49,1),new n.Z(.827,.188,.22,1),new n.Z(1,.592,.259,1),new n.Z(1,.843,0,1)];a.prototype.colorize=function(e,t){const i=this.tilePropertyName;if(!(0,r.Z)(i)||!e.contentAvailable||e._selectedFrame!==t.frameNumber)return;const o=function(e,t){const i=e.tilePropertyName;if((0,r.Z)(i)){const n=c(t[i],i);return(0,r.Z)(n)?(e._maximum=Math.max(n,e._maximum),e._minimum=Math.min(n,e._minimum),n):(e.tilePropertyName=void 0,n)}}(this,e),a=this._previousMinimum,l=this._previousMaximum;if(a===Number.MAX_VALUE||l===-Number.MAX_VALUE)return;const h=l-a+s.Z.EPSILON7,d=s.Z.clamp(o-a,0,h)/h*(u.length-1),m=Math.floor(d),f=Math.ceil(d),_=d-m,p=u[m],g=u[f],Z=n.Z.clone(n.Z.WHITE);Z.red=s.Z.lerp(p.red,g.red,_),Z.green=s.Z.lerp(p.green,g.green,_),Z.blue=s.Z.lerp(p.blue,g.blue,_),e._debugColor=Z},a.prototype.resetMinimumMaximum=function(){const e=this.tilePropertyName;if((0,r.Z)(e)){const t=this._referenceMinimum[e],i=this._referenceMaximum[e],n=(0,r.Z)(t)&&(0,r.Z)(i);this._previousMinimum=n?t:this._minimum,this._previousMaximum=n?i:this._maximum,this._minimum=Number.MAX_VALUE,this._maximum=-Number.MAX_VALUE}};const l=a},28214:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(17497),r=i(88779),o=i(54485),s=i(18125),a=i(47347);function c(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).metadataJson,i=e.schema;n.Z.typeOf.object("options.metadataJson",t),n.Z.typeOf.object("options.schema",i);const c=(0,r.Z)(t.metadata,t.tileset);let u;(0,o.Z)(c)&&(u=new a.Z({tileset:c,class:i.classes[c.class]}));let l=[];const h=[],d=t.groups;if(Array.isArray(d)){const e=d.length;for(let t=0;t<e;t++){const e=d[t];h.push(new s.Z({group:e,class:i.classes[e.class]}))}}else if((0,o.Z)(d)){l=Object.keys(d).sort();const e=l.length;for(let t=0;t<e;t++){const e=l[t];if(d.hasOwnProperty(e)){const t=d[e];h.push(new s.Z({id:e,group:d[e],class:i.classes[t.class]}))}}}this._schema=i,this._groups=h,this._groupIds=l,this._tileset=u,this._statistics=t.statistics,this._extras=t.extras,this._extensions=t.extensions}Object.defineProperties(c.prototype,{schema:{get:function(){return this._schema}},groups:{get:function(){return this._groups}},groupIds:{get:function(){return this._groupIds}},tileset:{get:function(){return this._tileset}},statistics:{get:function(){return this._statistics}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}});const u=c},18027:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(3169),r=i(65812),o=i(65606);function s(){}const a={stack:new r.Z,stackMaximumLength:0};function c(e){return e._visible&&e._inRequestVolume}function u(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function l(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:(t.hasEmptyContent,!0))}function h(e,t,i,n){const r=t.children,o=r.length;for(let e=0;e<o;++e){const t=r[e];t.updateVisibility(n),c(t)&&i.push(t)}}function d(e,t){(function(e){return!u(e)&&e.contentUnloaded}(t)||t.contentExpired)&&(t._priority=0,e._requestedTiles.push(t))}function m(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function f(e){++e.statistics.visited}function _(e,t,i){t.contentAvailable&&t.contentVisibility(i)!==n.Z.OUTSIDE&&e._selectedTiles.push(t)}s.selectTiles=function(e,t){e._selectedTiles.length=0,e._requestedTiles.length=0,e._hasMixedContent=!1;let i=!0;const n=e.root;if(n.updateVisibility(t),!c(n))return i;const r=a.stack;for(r.push(e.root);r.length>0;){a.stackMaximumLength=Math.max(a.stackMaximumLength,r.length);const n=r.pop(),s=n.refine===o.Z.ADD,c=n.refine===o.Z.REPLACE,p=l(e,n);p&&h(e,n,r,t),(s||c&&!p)&&(d(e,n),m(e,n,t),_(e,n,t),u(n)||n.contentAvailable||(i=!1)),f(e)}return a.stack.trim(a.stackMaximumLength),i};const p=s},56384:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(54485);function r(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfPendingRequests=0,this.numberOfTilesProcessing=0,this.numberOfTilesWithContentReady=0,this.numberOfTilesTotal=0,this.numberOfLoadedTilesTotal=0,this.numberOfFeaturesSelected=0,this.numberOfFeaturesLoaded=0,this.numberOfPointsSelected=0,this.numberOfPointsLoaded=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0,this.geometryByteLength=0,this.texturesByteLength=0,this.batchTableByteLength=0}function o(e,t,i,r){const s=t.innerContents,a=t.pointsLength,c=t.trianglesLength,u=t.featuresLength,l=t.geometryByteLength,h=t.texturesByteLength,d=t.batchTableByteLength;if(r?(e.numberOfFeaturesLoaded+=i?-u:u,e.numberOfPointsLoaded+=i?-a:a,e.geometryByteLength+=i?-l:l,e.texturesByteLength+=i?-h:h,e.batchTableByteLength+=i?-d:d):(e.numberOfFeaturesSelected+=i?-u:u,e.numberOfPointsSelected+=i?-a:a,e.numberOfTrianglesSelected+=i?-c:c),(0,n.Z)(s)){const t=s.length;for(let n=0;n<t;++n)o(e,s[n],i,r)}}r.prototype.clear=function(){this.selected=0,this.visited=0,this.numberOfCommands=0,this.numberOfAttemptedRequests=0,this.numberOfFeaturesSelected=0,this.numberOfPointsSelected=0,this.numberOfTrianglesSelected=0,this.numberOfTilesStyled=0,this.numberOfFeaturesStyled=0,this.numberOfTilesCulledWithChildrenUnion=0},r.prototype.incrementSelectionCounts=function(e){o(this,e,!1,!1)},r.prototype.incrementLoadCounts=function(e){o(this,e,!1,!0)},r.prototype.decrementLoadCounts=function(e){o(this,e,!0,!0)},r.clone=function(e,t){t.selected=e.selected,t.visited=e.visited,t.numberOfCommands=e.numberOfCommands,t.selected=e.selected,t.numberOfAttemptedRequests=e.numberOfAttemptedRequests,t.numberOfPendingRequests=e.numberOfPendingRequests,t.numberOfTilesProcessing=e.numberOfTilesProcessing,t.numberOfTilesWithContentReady=e.numberOfTilesWithContentReady,t.numberOfTilesTotal=e.numberOfTilesTotal,t.numberOfFeaturesSelected=e.numberOfFeaturesSelected,t.numberOfFeaturesLoaded=e.numberOfFeaturesLoaded,t.numberOfPointsSelected=e.numberOfPointsSelected,t.numberOfPointsLoaded=e.numberOfPointsLoaded,t.numberOfTrianglesSelected=e.numberOfTrianglesSelected,t.numberOfTilesStyled=e.numberOfTilesStyled,t.numberOfFeaturesStyled=e.numberOfFeaturesStyled,t.numberOfTilesCulledWithChildrenUnion=e.numberOfTilesCulledWithChildrenUnion,t.geometryByteLength=e.geometryByteLength,t.texturesByteLength=e.texturesByteLength,t.batchTableByteLength=e.batchTableByteLength};const s=r},3546:(e,t,i)=>{i.d(t,{Z:()=>M});var n=i(54485),r=i(3169),o=i(65812),s=i(88311),a=i(65606);function c(){}function u(e){return e._visible&&e._inRequestVolume}const l={stack:new o.Z,stackMaximumLength:0},h={stack:new o.Z,stackMaximumLength:0},d={stack:new o.Z,stackMaximumLength:0},m={stack:new o.Z,stackMaximumLength:0,ancestorStack:new o.Z,ancestorStackMaximumLength:0};function f(e){return e._skipLevelOfDetail}function _(e,t){e._emptyTiles.push(t)}function p(e,t,i){if(t.contentVisibility(i)!==r.Z.OUTSIDE){const n=t.content;n.featurePropertiesDirty?(n.featurePropertiesDirty=!1,t.lastStyleTime=0,e._selectedTilesToStyle.push(t)):t._selectedFrame<i.frameNumber-1&&e._selectedTilesToStyle.push(t),t._selectedFrame=i.frameNumber,e._selectedTiles.push(t)}}function g(e,t,i){if(!f(e))return void(t.contentAvailable&&p(e,t,i));const r=t.contentAvailable?t:t._ancestorWithContentAvailable;(0,n.Z)(r)?r._shouldSelect=!0:function(e,t,i){const n=d.stack;for(n.push(t);n.length>0;){d.stackMaximumLength=Math.max(d.stackMaximumLength,n.length);const r=n.pop().children,o=r.length;for(let s=0;s<o;++s){const o=r[s];u(o)&&(o.contentAvailable?(C(e,o,i),y(e,o,i),p(e,o,i)):o._depth-t._depth<2&&n.push(o))}}}(e,t,i)}function Z(e,t,i){++e._statistics.visited,t._visitedFrame=i.frameNumber}function y(e,t,i){t._touchedFrame!==i.frameNumber&&(e._cache.touch(t),t._touchedFrame=i.frameNumber)}function b(e,t,i){if(t._requestedFrame===i.frameNumber||!T(t)&&!t.contentExpired)return;if(!function(e,t,i){if(!e._cullRequestsWhileMoving)return!0;const n=t.boundingSphere,r=Math.max(2*n.radius,1),o=i.camera,s=0!==o.positionWCDeltaMagnitude?o.positionWCDeltaMagnitude:o.positionWCDeltaMagnitudeLastFrame;return e.cullRequestsWhileMovingMultiplier*s/r<1}(e,t,i))return;const n=i.camera.timeSinceMoved<e.foveatedTimeDelay;t.priorityDeferred&&n||(t._requestedFrame=i.frameNumber,e._requestedTiles.push(t))}function v(e,t,i){t._updatedVisibilityFrame!==e._updatedVisibilityFrame&&(t.updateVisibility(i),t._updatedVisibilityFrame=e._updatedVisibilityFrame)}function S(e,t,i){if(v(e,t,i),!u(t))return;const r=t.children.length>0;if((t.hasTilesetContent||t.hasImplicitContent)&&r){const n=t.children[0];return S(e,n,i),void(t._visible=n._visible)}if(function(e,t,i){const r=t.parent;return!(!(0,n.Z)(r)||r.hasTilesetContent||r.hasImplicitContent||r.refine!==a.Z.ADD)&&t.getScreenSpaceError(i,!0)<=e._maximumScreenSpaceError}(e,t,i))return void(t._visible=!1);const o=t.refine===a.Z.REPLACE,c=t._optimChildrenWithinParent===s.Z.USE_OPTIMIZATION;return o&&c&&r&&!function(e,t,i){let n=!1;const r=t.children,o=r.length;for(let t=0;t<o;++t){const o=r[t];v(e,o,i),n=n||u(o)}return n}(e,t,i)?(++e._statistics.numberOfTilesCulledWithChildrenUnion,void(t._visible=!1)):void 0}function C(e,t,i){S(e,t,i),t.updateExpiration(),t._wasMinPriorityChild=!1,t._priorityHolder=t,function(e,t){e._maximumPriority.distance=Math.max(t._priorityHolder._distanceToCamera,e._maximumPriority.distance),e._minimumPriority.distance=Math.min(t._priorityHolder._distanceToCamera,e._minimumPriority.distance),e._maximumPriority.depth=Math.max(t._depth,e._maximumPriority.depth),e._minimumPriority.depth=Math.min(t._depth,e._minimumPriority.depth),e._maximumPriority.foveatedFactor=Math.max(t._priorityHolder._foveatedFactor,e._maximumPriority.foveatedFactor),e._minimumPriority.foveatedFactor=Math.min(t._priorityHolder._foveatedFactor,e._minimumPriority.foveatedFactor),e._maximumPriority.reverseScreenSpaceError=Math.max(t._priorityReverseScreenSpaceError,e._maximumPriority.reverseScreenSpaceError),e._minimumPriority.reverseScreenSpaceError=Math.min(t._priorityReverseScreenSpaceError,e._minimumPriority.reverseScreenSpaceError)}(e,t),t._shouldSelect=!1,t._finalResolution=!0}function E(e,t){e._ancestorWithContent=void 0,e._ancestorWithContentAvailable=void 0;const i=e.parent;if((0,n.Z)(i)){const n=!T(i)||i._requestedFrame===t.frameNumber;e._ancestorWithContent=n?i:i._ancestorWithContent,e._ancestorWithContentAvailable=i.contentAvailable?i:i._ancestorWithContentAvailable}}function x(e){return e.hasEmptyContent||e.hasTilesetContent||e.hasImplicitContent}function T(e){return!x(e)&&e.contentUnloaded}function w(e,t){const i=t._ancestorWithContent;return!e.immediatelyLoadDesiredLevelOfDetail&&(t._priorityProgressiveResolutionScreenSpaceErrorLeaf||(0,n.Z)(i)&&t._screenSpaceError<i._screenSpaceError/e.skipScreenSpaceErrorFactor&&t._depth>i._depth+e.skipLevels)}function O(e,t){return 0===t._distanceToCamera&&0===e._distanceToCamera?t._centerZDepth-e._centerZDepth:t._distanceToCamera-e._distanceToCamera}function L(e,t,i,n){let r;const o=t.refine===a.Z.REPLACE,s=t.children,c=s.length;for(r=0;r<c;++r)C(e,s[r],n);s.sort(O);const l=!f(e)&&o&&!x(t);let h,d=!0,m=!1,_=-1,p=Number.MAX_VALUE;for(r=0;r<c;++r)if(h=s[r],u(h)?(i.push(h),h._foveatedFactor<p&&(_=r,p=h._foveatedFactor),m=!0):(l||e.loadSiblings)&&(h._foveatedFactor<p&&(_=r,p=h._foveatedFactor),b(e,h,n),y(e,h,n)),l){let t;t=!!h._inRequestVolume&&(x(h)?I(e,h,n):h.contentAvailable),d=d&&t}if(m||(d=!1),-1!==_&&!f(e)&&o){const i=s[_];i._wasMinPriorityChild=!0;const n=(t._wasMinPriorityChild||t===e.root)&&p<=t._priorityHolder._foveatedFactor?t._priorityHolder:t;for(n._foveatedFactor=Math.min(i._foveatedFactor,n._foveatedFactor),n._distanceToCamera=Math.min(i._distanceToCamera,n._distanceToCamera),r=0;r<c;++r)h=s[r],h._priorityHolder=n}return d}function P(e,t,i){return!f(e)||!e.immediatelyLoadDesiredLevelOfDetail&&(!(0,n.Z)(t._ancestorWithContent)||(0===t._screenSpaceError?t.parent._screenSpaceError>i:t._screenSpaceError>i))}function D(e,t){return 0!==t.children.length&&(t.hasTilesetContent||t.hasImplicitContent?!t.contentExpired:t._screenSpaceError>e._maximumScreenSpaceError)}function A(e,t,i,r,o){const s=l.stack;for(s.push(t);s.length>0;){l.stackMaximumLength=Math.max(l.stackMaximumLength,s.length);const t=s.pop();E(t,o);const r=P(e,t,i),c=t.refine===a.Z.ADD,u=t.refine===a.Z.REPLACE,h=t.parent,d=!(0,n.Z)(h)||h._refines;let m=!1;D(e,t)&&(m=L(e,t,s,o)&&d);const f=!m&&d;x(t)?(_(e,t),b(e,t,o),f&&g(e,t,o)):c?(g(e,t,o),b(e,t,o)):u&&(r?(b(e,t,o),f&&g(e,t,o)):f?(g(e,t,o),b(e,t,o)):w(e,t)&&b(e,t,o)),Z(e,t,o),y(e,t,o),t._refines=m}}function I(e,t,i){let n=!0;const r=h.stack;for(r.push(t);r.length>0;){h.stackMaximumLength=Math.max(h.stackMaximumLength,r.length);const t=r.pop(),o=t.children,s=o.length,a=x(t),c=a&&D(e,t),l=a&&0===t.children.length;if(c||t.contentAvailable||l||(n=!1),C(e,t,i),u(t)||(b(e,t,i),y(e,t,i)),c)for(let e=0;e<s;++e){const t=o[e];r.push(t)}}return n}function R(e,t,i){const r=m.stack,o=m.ancestorStack;let s;for(r.push(t);r.length>0||o.length>0;){if(m.stackMaximumLength=Math.max(m.stackMaximumLength,r.length),m.ancestorStackMaximumLength=Math.max(m.ancestorStackMaximumLength,o.length),o.length>0){const t=o.peek();if(t._stackLength===r.length){o.pop(),t!==s&&(t._finalResolution=!1),p(e,t,i);continue}}const t=r.pop();if(!(0,n.Z)(t))continue;const c=t.refine===a.Z.ADD,l=t._shouldSelect,h=t.children,d=h.length,f=D(e,t);if(l)if(c)p(e,t,i);else{if(t._selectionDepth=o.length,t._selectionDepth>0&&(e._hasMixedContent=!0),s=t,!f){p(e,t,i);continue}o.push(t),t._stackLength=r.length}if(f)for(let e=0;e<d;++e){const t=h[e];u(t)&&r.push(t)}}}c.selectTiles=function(e,t){if(e._requestedTiles.length=0,e.debugFreezeFrame)return;e._selectedTiles.length=0,e._selectedTilesToStyle.length=0,e._emptyTiles.length=0,e._hasMixedContent=!1;const i=e.root;if(C(e,i,t),!u(i))return;if(i.getScreenSpaceError(t,!0)<=e._maximumScreenSpaceError)return;f(e)?e.immediatelyLoadDesiredLevelOfDetail?function(e,t,i){const n=Number.MAX_VALUE,r=e._maximumScreenSpaceError;A(e,t,n,r,i),R(e,t,i)}(e,i,t):function(e,t,i){const n=Math.max(e.baseScreenSpaceError,e.maximumScreenSpaceError),r=e.maximumScreenSpaceError;A(e,t,n,r,i),R(e,t,i)}(e,i,t):function(e,t,i){const n=e._maximumScreenSpaceError,r=e._maximumScreenSpaceError;A(e,t,n,r,i)}(e,i,t),l.stack.trim(l.stackMaximumLength),h.stack.trim(h.stackMaximumLength),d.stack.trim(d.stackMaximumLength),m.stack.trim(m.stackMaximumLength),m.ancestorStack.trim(m.ancestorStackMaximumLength);const n=e._requestedTiles,r=n.length;for(let e=0;e<r;++e)n[e].updatePriority()};const M=c},65214:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(93517),r=i(17497),o=i(88779),s=i(22874);function a(e){e=(0,o.Z)(e,1),r.Z.typeOf.number.greaterThan("radius",e,0),this._radius=(0,o.Z)(e,1)}Object.defineProperties(a.prototype,{radius:{get:function(){return this._radius},set:function(e){r.Z.typeOf.number.greaterThan("value",e,0),this._radius=e}}}),a.prototype.emit=function(e){const t=s.Z.randomBetween(0,s.Z.TWO_PI),i=s.Z.randomBetween(0,this._radius),r=i*Math.cos(t),o=i*Math.sin(t);e.position=n.Z.fromElements(r,o,0,e.position),e.velocity=n.Z.clone(n.Z.UNIT_Z,e.velocity)};const c=a},15157:(e,t,i)=>{i.d(t,{Z:()=>Y});var n=i(35742),r=i(52351),o=i(93517),s=i(90868),a=i(6785),c=i(51138),u=i(44990),l=i(88779),h=i(58587),d=i(54485),m=i(90332),f=i(20176),_=i(74834),p=i(39172),g=i(71118),Z=i(84473),y=i(21514),b=i(7004),v=i(95411),S=i(96232),C=i(45813),E=i(47428),x=i(57727),T=i(58943),w=i(319),O=i(81737),L=i(16234),P=i(11487),D=i(35550),A=i(91507),I=i(18061),R=i(66563),M=i(55634);const N=new o.Z,B=P.Z.ModelState;function V(e){let t=(e=(0,l.Z)(e,l.Z.EMPTY_OBJECT)).gltf;if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),!(t instanceof Uint8Array))throw new y.Z("Only binary glTF is supported as a classifier.");t=(0,T.Z)(t),(0,w.Z)(t),(0,S.Z)(t),(0,D.Z)(t),(0,A.Z)(t),C.Z.buffer(t,(function(e){if(!(0,d.Z)(e.extras._pipeline.source))throw new y.Z("Buffer data must be embedded in the binary gltf.")}));const i=t.nodes,n=t.meshes,o=i[0].mesh;if(1!==i.length||!(0,d.Z)(o))throw new y.Z("Only one node is supported for classification and it must have a mesh.");if(1!==n.length)throw new y.Z("Only one mesh is supported when using b3dm for classification.");const s=n[0].primitives;if(1!==s.length)throw new y.Z("Only one primitive per mesh is supported when using b3dm for classification.");const a=s[0].attributes.POSITION;if(!(0,d.Z)(a))throw new y.Z("The mesh must have a position attribute.");const c=s[0].attributes._BATCHID;if(!(0,d.Z)(c))throw new y.Z("The mesh must have a batch id attribute.");this._gltf=t,this.show=(0,l.Z)(e.show,!0),this.modelMatrix=g.Z.clone((0,l.Z)(e.modelMatrix,g.Z.IDENTITY)),this._modelMatrix=g.Z.clone(this.modelMatrix),this._ready=!1,this._readyPromise=(0,h.Z)(),this.debugShowBoundingVolume=(0,l.Z)(e.debugShowBoundingVolume,!1),this._debugShowBoundingVolume=!1,this.debugWireframe=(0,l.Z)(e.debugWireframe,!1),this._debugWireframe=!1,this._classificationType=e.classificationType,this._vertexShaderLoaded=e.vertexShaderLoaded,this._classificationShaderLoaded=e.classificationShaderLoaded,this._uniformMapLoaded=e.uniformMapLoaded,this._pickIdLoaded=e.pickIdLoaded,this._ignoreCommands=(0,l.Z)(e.ignoreCommands,!1),this._upAxis=(0,l.Z)(e.upAxis,O.Z.Y),this._batchTable=e.batchTable,this._computedModelMatrix=new g.Z,this._initialRadius=void 0,this._boundingSphere=void 0,this._scaledBoundingSphere=new r.Z,this._state=B.NEEDS_LOAD,this._loadResources=void 0,this._mode=void 0,this._dirty=!1,this._nodeMatrix=new g.Z,this._primitive=void 0,this._extensionsUsed=void 0,this._extensionsRequired=void 0,this._quantizedUniforms=void 0,this._buffers={},this._vertexArray=void 0,this._shaderProgram=void 0,this._uniformMap=void 0,this._geometryByteLength=0,this._trianglesLength=0,this._rtcCenter=void 0,this._rtcCenterEye=void 0,this._rtcCenter3D=void 0,this._rtcCenter2D=void 0}function k(e,t){const i=t._loadResources,n=t.gltf.bufferViews[e],r=i.getBuffer(n);t._buffers[e]=r,t._geometryByteLength+=r.byteLength}function U(e,t,i){const n=i._loadResources,r=i.gltf.bufferViews[e],o={typedArray:n.getBuffer(r),indexDatatype:t};i._buffers[e]=o,i._geometryByteLength+=o.typedArray.byteLength}function F(e,t){return(0,d.Z)(t)&&(e=t(e)),e}function z(e){const t=e.gltf,i=P.Z.getAttributeOrUniformBySemantic(t,"POSITION"),n=P.Z.getAttributeOrUniformBySemantic(t,"_BATCHID"),r={};r[i]=0,r[n]=1;const o=P.Z.getAttributeOrUniformBySemantic(t,"MODELVIEWPROJECTION");let s,a;if((0,d.Z)(o))s=`uniform mat4 ${o};\n`,a=`${o} * vec4(${i}, 1.0)`;else{const e=P.Z.getAttributeOrUniformBySemantic(t,"PROJECTION");let n=P.Z.getAttributeOrUniformBySemantic(t,"MODELVIEW");(0,d.Z)(n)||(n=P.Z.getAttributeOrUniformBySemantic(t,"CESIUM_RTC_MODELVIEW")),s=`uniform mat4 ${n};\nuniform mat4 ${e};\n`,a=`${e} * ${n} * vec4(${i}, 1.0)`}let c=`attribute vec3 ${i};\nattribute float ${n};\n${s}void main() {\n${`    vec4 positionInClipCoords = ${a};\n`}    gl_Position = czm_depthClamp(positionInClipCoords);\n}\n`;e.extensionsUsed.WEB3D_quantized_attributes&&(c=function(e,t){const i=t.gltf.meshes[0].primitives[0],n=P.Z.modifyShaderForQuantizedAttributes(t.gltf,i,e);return t._quantizedUniforms=n.uniforms,n.shader}(c,e));const u=F(c,e._vertexShaderLoaded),l=F("#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n#endif\nvoid main() \n{ \n    gl_FragColor = vec4(1.0); \n    czm_writeDepthClamp();\n}\n",e._classificationShaderLoaded);e._shaderProgram={vertexShaderSource:u,fragmentShaderSource:l,attributeLocations:r}}Object.defineProperties(V.prototype,{gltf:{get:function(){return this._gltf}},gltfInternal:{get:function(){return this._gltf}},boundingSphere:{get:function(){if(this._state!==B.LOADED)throw new f.Z("The model is not loaded.  Use ClassificationModel.readyPromise or wait for ClassificationModel.ready to be true.");const e=this.modelMatrix,t=g.Z.getScale(e,N),i=this._scaledBoundingSphere;return i.center=o.Z.multiplyComponents(this._boundingSphere.center,t,i.center),i.radius=o.Z.maximumComponent(t)*this._initialRadius,(0,d.Z)(this._rtcCenter)&&o.Z.add(this._rtcCenter,i.center,i.center),i}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},dirty:{get:function(){return this._dirty}},extensionsUsed:{get:function(){return(0,d.Z)(this._extensionsUsed)||(this._extensionsUsed=P.Z.getUsedExtensions(this.gltf)),this._extensionsUsed}},extensionsRequired:{get:function(){return(0,d.Z)(this._extensionsRequired)||(this._extensionsRequired=P.Z.getRequiredExtensions(this.gltf)),this._extensionsRequired}},upAxis:{get:function(){return this._upAxis}},trianglesLength:{get:function(){return this._trianglesLength}},geometryByteLength:{get:function(){return this._geometryByteLength}},texturesByteLength:{get:function(){return 0}},classificationType:{get:function(){return this._classificationType}}});const $={PROJECTION:function(e,t){return P.Z.getGltfSemanticUniforms().PROJECTION(e,t)},MODELVIEW:function(e,t){return P.Z.getGltfSemanticUniforms().MODELVIEW(e,t)},CESIUM_RTC_MODELVIEW:function(e,t){return P.Z.getGltfSemanticUniforms().CESIUM_RTC_MODELVIEW(e,t)},MODELVIEWPROJECTION:function(e,t){return P.Z.getGltfSemanticUniforms().MODELVIEWPROJECTION(e,t)}};function q(e){const t=e._batchTable;let i=e._uniformMap;const s=e._vertexArray,l=e.gltf,h=l.accessors,m=l.meshes[0].primitives[0],f=h[m.indices],_=m.attributes.POSITION,y=P.Z.getAccessorMinMax(l,_),b=r.Z.fromCornerPoints(o.Z.fromArray(y.min),o.Z.fromArray(y.max));let v,S;if((0,d.Z)(f))S=f.count,v=f.byteOffset/p.Z.getSizeInBytes(f.componentType);else{S=h[m.attributes.POSITION].count,v=0}if(e._trianglesLength+=function(e,t){switch(e.mode){case Z.Z.TRIANGLES:return t/3;case Z.Z.TRIANGLE_STRIP:case Z.Z.TRIANGLE_FAN:return Math.max(t-2,0);default:return 0}}(m,S),(0,d.Z)(e._uniformMapLoaded)&&(i=e._uniformMapLoaded(i)),e.extensionsUsed.WEB3D_quantized_attributes){const t=function(e,t){return P.Z.createUniformsForQuantizedAttributes(e.gltf,t,e._quantizedUniforms)}(e,m);i=(0,c.Z)(i,t)}let C=s.attributes.POSITION,E=C.componentDatatype,x=C.vertexBuffer,T=x.byteOffset,w=x.byteLength/u.Z.getSizeInBytes(E),O=u.Z.createArrayBufferView(E,x.buffer,T,w);C=s.attributes._BATCHID,E=C.componentDatatype,x=C.vertexBuffer,T=x.byteOffset,w=x.byteLength/u.Z.getSizeInBytes(E);let L=u.Z.createArrayBufferView(E,x.buffer,T,w);const D=s.indexBuffer.typedArray;let A;A=s.indexBuffer.indexDatatype===p.Z.UNSIGNED_SHORT?new Uint16Array(D.buffer,D.byteOffset,D.byteLength/Uint16Array.BYTES_PER_ELEMENT):new Uint32Array(D.buffer,D.byteOffset,D.byteLength/Uint32Array.BYTES_PER_ELEMENT),O=(0,n.Z)(O),L=(0,n.Z)(L),A=(0,n.Z)(A,v,v+S);const I=[],N=[],B=[],V=[];let k,U,F,z=L[A[0]];I.push(z),B.push(0);const $=A.length;for(let e=1;e<$;++e)k=L[A[e]],k!==z&&(U=B[B.length-1],F=e-U,I.push(k),N.push(F),B.push(e),V.push(new R.Z({offset:U,count:F,batchIds:[z],color:a.Z.WHITE})),z=k);U=B[B.length-1],F=$-U,N.push(F),V.push(new R.Z({offset:U,count:F,batchIds:[z],color:a.Z.WHITE}));const q=e._shaderProgram,W=q.vertexShaderSource,G=q.fragmentShaderSource,H=q.attributeLocations,Y=(0,d.Z)(e._pickIdLoaded)?e._pickIdLoaded():void 0;e._primitive=new M.Z({classificationType:e._classificationType,positions:O,indices:A,indexOffsets:B,indexCounts:N,batchIds:I,vertexBatchIds:L,batchedIndices:V,batchTable:t,boundingVolume:new r.Z,_vertexShaderSource:W,_fragmentShaderSource:G,_attributeLocations:H,_uniformMap:i,_pickId:Y,_modelMatrix:new g.Z,_boundingSphere:b}),e._buffers=void 0,e._vertexArray=void 0,e._shaderProgram=void 0,e._uniformMap=void 0}function W(e,t){const i=t.context;P.Z.checkSupportedGlExtensions(e.gltf.glExtensionsUsed,i),function(e){const t=e._loadResources;if(0!==t.pendingBufferLoads)return;const i=t.vertexBuffersToCreate,n=t.indexBuffersToCreate;for(;i.length>0;)k(i.dequeue(),e);for(;n.length>0;){const t=n.dequeue();U(t.id,t.componentType,e)}}(e),z(e),function(e){if(!e._loadResources.finishedBuffersCreation()||(0,d.Z)(e._vertexArray))return;const t=e._buffers,i=e.gltf,n=i.accessors,r=i.meshes[0].primitives[0],o={POSITION:0,_BATCHID:1},s={};let a;if(C.Z.meshPrimitiveAttribute(r,(function(e,r){const a=o[r];if((0,d.Z)(a)){const o=n[e];s[r]={index:a,vertexBuffer:t[o.bufferView],componentsPerAttribute:(0,x.Z)(o.type),componentDatatype:o.componentType,offsetInBytes:o.byteOffset,strideInBytes:(0,E.Z)(i,o)}}})),(0,d.Z)(r.indices)){const e=n[r.indices];a=t[e.bufferView]}e._vertexArray={attributes:s,indexBuffer:a}}(e),function(e,t){if((0,d.Z)(e._uniformMap))return;const i={};C.Z.technique(e.gltf,(function(n){C.Z.techniqueUniform(n,(function(n,r){(0,d.Z)(n.semantic)&&(0,d.Z)($[n.semantic])&&(i[r]=$[n.semantic](t.uniformState,e))}))})),e._uniformMap=i}(e,i),function(e){if(!e._loadResources.finished())return;if((0,d.Z)(e._primitive))return;const t=e.gltf.nodes[0];e._nodeMatrix=P.Z.getTransform(t,e._nodeMatrix),q(e)}(e)}const G=new s.Z,H=new g.Z;V.prototype.updateCommands=function(e,t){this._primitive.updateCommands(e,t)},V.prototype.update=function(e){if(e.mode===I.Z.MORPHING)return;if(!_.Z.supportsWebP.initialized)return void _.Z.supportsWebP.initialize();const t=_.Z.supportsWebP();if(this._state===B.NEEDS_LOAD&&(0,d.Z)(this.gltf)&&(this._state=B.LOADING,this._state!==B.FAILED)){const t=this.gltf.extensions;if((0,d.Z)(t)&&(0,d.Z)(t.CESIUM_RTC)){const i=o.Z.fromArray(t.CESIUM_RTC.center);if(!o.Z.equals(i,o.Z.ZERO)){this._rtcCenter3D=i;const t=e.mapProjection,n=t.ellipsoid.cartesianToCartographic(this._rtcCenter3D),r=t.project(n);o.Z.fromElements(r.z,r.x,r.y,r),this._rtcCenter2D=r,this._rtcCenterEye=new o.Z,this._rtcCenter=this._rtcCenter3D}}this._loadResources=new L.Z,P.Z.parseBuffers(this)}const i=this._loadResources;let n=!1;this._state===B.LOADING&&(0===i.pendingBufferLoads&&(P.Z.checkSupportedExtensions(this.extensionsRequired,t),function(e){const t=e.gltf,i=e._loadResources;C.Z.buffer(t,(function(e,t){i.buffers[t]=e.extras._pipeline.source}))}(this),function(e){const t=e.gltf.bufferViews,i=e._loadResources.vertexBuffersToCreate;C.Z.bufferView(e.gltf,(function(e,t){e.target===v.Z.ARRAY_BUFFER&&i.enqueue(t)}));const n=e._loadResources.indexBuffersToCreate,r={};C.Z.accessor(e.gltf,(function(e){const i=e.bufferView;t[i].target!==v.Z.ELEMENT_ARRAY_BUFFER||(0,d.Z)(r[i])||(r[i]=!0,n.enqueue({id:i,componentType:e.componentType}))}))}(this),this._boundingSphere=P.Z.computeBoundingSphere(this),this._initialRadius=this._boundingSphere.radius,W(this,e)),i.finished()&&(this._state=B.LOADED,n=!0)),(0,d.Z)(i)&&this._state===B.LOADED&&(n||W(this,e),i.finished()&&(this._loadResources=void 0));const a=this.show;if(a&&this._state===B.LOADED||n){this._dirty=!1;const t=this.modelMatrix,i=e.mode!==this._mode;this._mode=e.mode;const a=!g.Z.equals(this._modelMatrix,t)||i;if(a||n){g.Z.clone(t,this._modelMatrix);const e=this._computedModelMatrix;g.Z.clone(t,e),this._upAxis===O.Z.Y?g.Z.multiplyTransformation(e,O.Z.Y_UP_TO_Z_UP,e):this._upAxis===O.Z.X&&g.Z.multiplyTransformation(e,O.Z.X_UP_TO_Z_UP,e)}(a||n)&&(!function(e,t,i,n){let a=e._computedModelMatrix;if(e._mode!==I.Z.SCENE3D&&!e._ignoreCommands){const t=g.Z.getColumn(a,3,G);if(s.Z.equals(t,s.Z.UNIT_W)){const t=e.boundingSphereInternal.center,i=b.Z.wgs84To2DModelMatrix(n,t,H);a=g.Z.multiply(i,a,H),(0,d.Z)(e._rtcCenter)&&(g.Z.setTranslation(a,s.Z.UNIT_W,a),e._rtcCenter=e._rtcCenter2D)}else a=b.Z.basisTo2D(n,a,H),e._rtcCenter=e._rtcCenter3D}const c=e._primitive;(t||i)&&(g.Z.multiplyTransformation(a,e._nodeMatrix,c._modelMatrix),r.Z.transform(c._boundingSphere,c._modelMatrix,c._boundingVolume),(0,d.Z)(e._rtcCenter)&&o.Z.add(e._rtcCenter,c._boundingVolume.center,c._boundingVolume.center))}(this,a,n,e.mapProjection),this._dirty=!0)}if(n){const t=this;e.afterRender.push((function(){t._ready=!0,t._readyPromise.resolve(t)}))}else a&&!this._ignoreCommands&&(this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.debugWireframe=this.debugWireframe,this._primitive.update(e))},V.prototype.isDestroyed=function(){return!1},V.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,m.Z)(this)};const Y=V},28169:(e,t,i)=>{i.d(t,{Z:()=>B});var n=i(41631),r=i(51138),o=i(88779),s=i(58587),a=i(54485),c=i(90332),u=i(20176),l=i(78224),h=i(71087),d=i(1577),m=i(74064),f=i(17426),_=i(7048),p=i(90421),g=i(67277),Z=i(995),y=i(98179),b=i(86672),v=i(73020),S=i(27401),C=i(18061),E=i(342),x=i(84067),T=i(88307),w=i(59215);function O(e){const t=(e=(0,o.Z)(e,o.Z.EMPTY_OBJECT)).geometryInstances;this.geometryInstances=t,this.show=(0,o.Z)(e.show,!0),this.classificationType=(0,o.Z)(e.classificationType,y.Z.BOTH),this.debugShowBoundingVolume=(0,o.Z)(e.debugShowBoundingVolume,!1),this.debugShowShadowVolume=(0,o.Z)(e.debugShowShadowVolume,!1),this._debugShowShadowVolume=!1,this._extruded=(0,o.Z)(e._extruded,!1),this._uniformMap=e._uniformMap,this._sp=void 0,this._spStencil=void 0,this._spPick=void 0,this._spColor=void 0,this._spPick2D=void 0,this._spColor2D=void 0,this._rsStencilDepthPass=void 0,this._rsStencilDepthPass3DTiles=void 0,this._rsColorPass=void 0,this._rsPickPass=void 0,this._commandsIgnoreShow=[],this._ready=!1,this._readyPromise=(0,s.Z)(),this._primitive=void 0,this._pickPrimitive=e._pickPrimitive,this._hasSphericalExtentsAttribute=!1,this._hasPlanarExtentsAttributes=!1,this._hasPerColorAttribute=!1,this.appearance=e.appearance,this._createBoundingVolumeFunction=e._createBoundingVolumeFunction,this._updateAndQueueCommandsFunction=e._updateAndQueueCommandsFunction,this._usePickOffsets=!1,this._primitiveOptions={geometryInstances:void 0,appearance:void 0,vertexCacheOptimize:(0,o.Z)(e.vertexCacheOptimize,!1),interleave:(0,o.Z)(e.interleave,!1),releaseGeometryInstances:(0,o.Z)(e.releaseGeometryInstances,!0),allowPicking:(0,o.Z)(e.allowPicking,!0),asynchronous:(0,o.Z)(e.asynchronous,!0),compressVertices:(0,o.Z)(e.compressVertices,!0),_createBoundingVolumeFunction:void 0,_createRenderStatesFunction:void 0,_createShaderProgramFunction:void 0,_createCommandsFunction:void 0,_updateAndQueueCommandsFunction:void 0,_createPickOffsets:!0}}function L(e,t){const i=t?T.Z.EQUAL:T.Z.ALWAYS;return{colorMask:{red:!1,green:!1,blue:!1,alpha:!1},stencilTest:{enabled:e,frontFunction:i,frontOperation:{fail:w.Z.KEEP,zFail:w.Z.DECREMENT_WRAP,zPass:w.Z.KEEP},backFunction:i,backOperation:{fail:w.Z.KEEP,zFail:w.Z.INCREMENT_WRAP,zPass:w.Z.KEEP},reference:x.Z.CESIUM_3D_TILE_MASK,mask:x.Z.CESIUM_3D_TILE_MASK},stencilMask:x.Z.CLASSIFICATION_MASK,depthTest:{enabled:!0,func:b.Z.LESS_OR_EQUAL},depthMask:!1}}function P(e){return{stencilTest:{enabled:e,frontFunction:T.Z.NOT_EQUAL,frontOperation:{fail:w.Z.ZERO,zFail:w.Z.ZERO,zPass:w.Z.ZERO},backFunction:T.Z.NOT_EQUAL,backOperation:{fail:w.Z.ZERO,zFail:w.Z.ZERO,zPass:w.Z.ZERO},reference:0,mask:x.Z.CLASSIFICATION_MASK},stencilMask:x.Z.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1,blending:Z.Z.PRE_MULTIPLIED_ALPHA_BLEND}}Object.defineProperties(O.prototype,{vertexCacheOptimize:{get:function(){return this._primitiveOptions.vertexCacheOptimize}},interleave:{get:function(){return this._primitiveOptions.interleave}},releaseGeometryInstances:{get:function(){return this._primitiveOptions.releaseGeometryInstances}},allowPicking:{get:function(){return this._primitiveOptions.allowPicking}},asynchronous:{get:function(){return this._primitiveOptions.asynchronous}},compressVertices:{get:function(){return this._primitiveOptions.compressVertices}},ready:{get:function(){return this._ready}},readyPromise:{get:function(){return this._readyPromise.promise}},_needs2DShader:{get:function(){return this._hasPlanarExtentsAttributes||this._hasSphericalExtentsAttribute}}}),O.isSupported=function(e){return e.context.stencilBuffer};const D={stencilTest:{enabled:!0,frontFunction:T.Z.NOT_EQUAL,frontOperation:{fail:w.Z.ZERO,zFail:w.Z.ZERO,zPass:w.Z.ZERO},backFunction:T.Z.NOT_EQUAL,backOperation:{fail:w.Z.ZERO,zFail:w.Z.ZERO,zPass:w.Z.ZERO},reference:0,mask:x.Z.CLASSIFICATION_MASK},stencilMask:x.Z.CLASSIFICATION_MASK,depthTest:{enabled:!1},depthMask:!1};function A(e,t){const i=t.context,n=e._primitive;let r=p.Z;r=e._primitive._batchTable.getVertexShaderCallback()(r),r=S.Z._appendDistanceDisplayConditionToShader(n,r),r=S.Z._modifyShaderPosition(e,r,t.scene3DOnly),r=S.Z._updateColorAttribute(n,r);const o=e._hasPlanarExtentsAttributes,s=o||e._hasSphericalExtentsAttribute;e._extruded&&(r=function(e,t){if(!e.compressVertices)return t;if(-1!==t.search(/attribute\s+vec3\s+extrudeDirection;/g)){const e="compressedAttributes",i=`attribute vec2 ${e};`,n="vec3 extrudeDirection;\n",r=`    extrudeDirection = czm_octDecode(${e}, 65535.0);\n`;let o=t;return o=o.replace(/attribute\s+vec3\s+extrudeDirection;/g,""),o=_.Z.replaceMain(o,"czm_non_compressed_main"),[i,n,o,`void main() \n{ \n${r}    czm_non_compressed_main(); \n}`].join("\n")}}(n,r));const c=e._extruded?"EXTRUDED_GEOMETRY":"";let u=new _.Z({defines:[c],sources:[r]});const l=new _.Z({sources:[g.Z]}),h=e._primitive._attributeLocations,d=new E.Z(s,o,e.appearance);if(e._spStencil=f.Z.replaceCache({context:i,shaderProgram:e._spStencil,vertexShaderSource:u,fragmentShaderSource:l,attributeLocations:h}),e._primitive.allowPicking){let o=_.Z.createPickVertexShaderSource(r);o=S.Z._appendShowToShader(n,o),o=S.Z._updatePickColorAttribute(o);const u=d.createPickFragmentShader(!1),l=d.createPickVertexShader([c],o,!1,t.mapProjection);if(e._spPick=f.Z.replaceCache({context:i,shaderProgram:e._spPick,vertexShaderSource:l,fragmentShaderSource:u,attributeLocations:h}),s){let n=i.shaderCache.getDerivedShaderProgram(e._spPick,"2dPick");if(!(0,a.Z)(n)){const r=d.createPickFragmentShader(!0),s=d.createPickVertexShader([c],o,!0,t.mapProjection);n=i.shaderCache.createDerivedShaderProgram(e._spPick,"2dPick",{vertexShaderSource:s,fragmentShaderSource:r,attributeLocations:h})}e._spPick2D=n}}else e._spPick=f.Z.fromCache({context:i,vertexShaderSource:u,fragmentShaderSource:l,attributeLocations:h});r=S.Z._appendShowToShader(n,r),u=new _.Z({defines:[c],sources:[r]}),e._sp=f.Z.replaceCache({context:i,shaderProgram:e._sp,vertexShaderSource:u,fragmentShaderSource:l,attributeLocations:h});const m=d.createFragmentShader(!1),Z=d.createVertexShader([c],r,!1,t.mapProjection);if(e._spColor=f.Z.replaceCache({context:i,shaderProgram:e._spColor,vertexShaderSource:Z,fragmentShaderSource:m,attributeLocations:h}),s){let n=i.shaderCache.getDerivedShaderProgram(e._spColor,"2dColor");if(!(0,a.Z)(n)){const o=d.createFragmentShader(!0),s=d.createVertexShader([c],r,!0,t.mapProjection);n=i.shaderCache.createDerivedShaderProgram(e._spColor,"2dColor",{vertexShaderSource:s,fragmentShaderSource:o,attributeLocations:h})}e._spColor2D=n}}function I(e,t,i,n,o,s,c){!function(e,t){const i=e._primitive;let n,o,s,c=2*i._va.length;t.length=c;let u=0,l=i._batchTable.getUniformMapCallback()(e._uniformMap);const m=e._needs2DShader;for(n=0;n<c;n+=2){const c=i._va[u++];o=t[n],(0,a.Z)(o)||(o=t[n]=new h.Z({owner:e,primitiveType:i._primitiveType})),o.vertexArray=c,o.renderState=e._rsStencilDepthPass,o.shaderProgram=e._sp,o.uniformMap=l,o.pass=d.Z.TERRAIN_CLASSIFICATION,s=h.Z.shallowClone(o,o.derivedCommands.tileset),s.renderState=e._rsStencilDepthPass3DTiles,s.pass=d.Z.CESIUM_3D_TILE_CLASSIFICATION,o.derivedCommands.tileset=s,o=t[n+1],(0,a.Z)(o)||(o=t[n+1]=new h.Z({owner:e,primitiveType:i._primitiveType})),o.vertexArray=c,o.renderState=e._rsColorPass,o.shaderProgram=e._spColor,o.pass=d.Z.TERRAIN_CLASSIFICATION;const f=e.appearance.material;if((0,a.Z)(f)&&(l=(0,r.Z)(l,f._uniforms)),o.uniformMap=l,s=h.Z.shallowClone(o,o.derivedCommands.tileset),s.pass=d.Z.CESIUM_3D_TILE_CLASSIFICATION,o.derivedCommands.tileset=s,m){let t=h.Z.shallowClone(o,o.derivedCommands.appearance2D);t.shaderProgram=e._spColor2D,o.derivedCommands.appearance2D=t,t=h.Z.shallowClone(s,s.derivedCommands.appearance2D),t.shaderProgram=e._spColor2D,s.derivedCommands.appearance2D=t}}const f=e._commandsIgnoreShow,_=e._spStencil;let p=0;c=f.length=c/2;for(let e=0;e<c;++e){const i=f[e]=h.Z.shallowClone(t[p],f[e]);i.shaderProgram=_,i.pass=d.Z.CESIUM_3D_TILE_CLASSIFICATION_IGNORE_SHOW,p+=2}}(e,s),function(e,t){const i=e._usePickOffsets,n=e._primitive;let r,o,s,c,u,l=2*n._va.length,m=0;i&&(r=n._pickOffsets,l=2*r.length),t.length=l;let f=0;const _=n._batchTable.getUniformMapCallback()(e._uniformMap),p=e._needs2DShader;for(s=0;s<l;s+=2){let l=n._va[f++];if(i&&(o=r[m++],l=n._va[o.index]),c=t[s],(0,a.Z)(c)||(c=t[s]=new h.Z({owner:e,primitiveType:n._primitiveType,pickOnly:!0})),c.vertexArray=l,c.renderState=e._rsStencilDepthPass,c.shaderProgram=e._sp,c.uniformMap=_,c.pass=d.Z.TERRAIN_CLASSIFICATION,i&&(c.offset=o.offset,c.count=o.count),u=h.Z.shallowClone(c,c.derivedCommands.tileset),u.renderState=e._rsStencilDepthPass3DTiles,u.pass=d.Z.CESIUM_3D_TILE_CLASSIFICATION,c.derivedCommands.tileset=u,c=t[s+1],(0,a.Z)(c)||(c=t[s+1]=new h.Z({owner:e,primitiveType:n._primitiveType,pickOnly:!0})),c.vertexArray=l,c.renderState=e._rsPickPass,c.shaderProgram=e._spPick,c.uniformMap=_,c.pass=d.Z.TERRAIN_CLASSIFICATION,i&&(c.offset=o.offset,c.count=o.count),u=h.Z.shallowClone(c,c.derivedCommands.tileset),u.pass=d.Z.CESIUM_3D_TILE_CLASSIFICATION,c.derivedCommands.tileset=u,p){let t=h.Z.shallowClone(c,c.derivedCommands.pick2D);t.shaderProgram=e._spPick2D,c.derivedCommands.pick2D=t,t=h.Z.shallowClone(u,u.derivedCommands.pick2D),t.shaderProgram=e._spPick2D,u.derivedCommands.pick2D=t}}}(e,c)}function R(e,t){return Math.floor(e%t/2)}function M(e,t,i,n,r,o){e.modelMatrix=i,e.boundingVolume=r,e.cull=n,e.debugShowBoundingVolume=o,t.commandList.push(e)}function N(e,t,i,n,r){e.modelMatrix=i,e.boundingVolume=r,e.cull=n,t.commandList.push(e)}O.prototype.update=function(e){if(!(0,a.Z)(this._primitive)&&!(0,a.Z)(this.geometryInstances))return;let t=this.appearance;(0,a.Z)(t)&&(0,a.Z)(t.material)&&t.material.update(e.context);const i=this,r=this._primitiveOptions;if(!(0,a.Z)(this._primitive)){const e=Array.isArray(this.geometryInstances)?this.geometryInstances:[this.geometryInstances],s=e.length;let c,h,d,f,_=!1,p=!0,g=!1,Z=!1;for(s>0&&(d=e[0].attributes,g=E.Z.hasAttributesForSphericalExtents(d),Z=E.Z.hasAttributesForTextureCoordinatePlanes(d),f=d.color),c=0;c<s;c++){h=e[c];const t=h.attributes.color;if((0,a.Z)(t))_=!0;else if(_)throw new u.Z("All GeometryInstances must have color attributes to use per-instance color.");p=p&&(0,a.Z)(t)&&n.Z.equals(f,t)}if(!p&&!g&&!Z)throw new u.Z("All GeometryInstances must have the same color attribute except via GroundPrimitives");if(_&&!(0,a.Z)(t)&&(t=new v.Z({flat:!0}),this.appearance=t),!_&&t instanceof v.Z)throw new u.Z("PerInstanceColorAppearance requires color GeometryInstanceAttributes on all GeometryInstances");if((0,a.Z)(t.material)&&!g&&!Z)throw new u.Z("Materials on ClassificationPrimitives are not supported except via GroundPrimitives");this._usePickOffsets=!g&&!Z,this._hasSphericalExtentsAttribute=g,this._hasPlanarExtentsAttributes=Z,this._hasPerColorAttribute=_;const b=new Array(s);for(c=0;c<s;++c)h=e[c],b[c]=new l.Z({geometry:h.geometry,attributes:h.attributes,modelMatrix:h.modelMatrix,id:h.id,pickPrimitive:(0,o.Z)(this._pickPrimitive,i)});r.appearance=t,r.geometryInstances=b,(0,a.Z)(this._createBoundingVolumeFunction)&&(r._createBoundingVolumeFunction=function(e,t){i._createBoundingVolumeFunction(e,t)}),r._createRenderStatesFunction=function(e,t,n,r){!function(e,t,i,n){if((0,a.Z)(e._rsStencilDepthPass))return;const r=!e.debugShowShadowVolume;e._rsStencilDepthPass=m.Z.fromCache(L(r,!1)),e._rsStencilDepthPass3DTiles=m.Z.fromCache(L(r,!0)),e._rsColorPass=m.Z.fromCache(P(r)),e._rsPickPass=m.Z.fromCache(D)}(i)},r._createShaderProgramFunction=function(e,t,n){A(i,t)},r._createCommandsFunction=function(e,t,n,r,o,s,a){I(i,0,0,0,0,s,a)},(0,a.Z)(this._updateAndQueueCommandsFunction)?r._updateAndQueueCommandsFunction=function(e,t,n,r,o,s,a,c){i._updateAndQueueCommandsFunction(e,t,n,r,o,s,a,c)}:r._updateAndQueueCommandsFunction=function(e,t,n,r,o,s,c,u){!function(e,t,i,n,r,o,s,c){const u=e._primitive;let l;S.Z._updateBoundingVolumes(u,t,r),t.mode===C.Z.SCENE3D?l=u._boundingSphereWC:t.mode===C.Z.COLUMBUS_VIEW?l=u._boundingSphereCV:t.mode===C.Z.SCENE2D&&(0,a.Z)(u._boundingSphere2D)?l=u._boundingSphere2D:(0,a.Z)(u._boundingSphereMorph)&&(l=u._boundingSphereMorph);const h=e.classificationType,d=h!==y.Z.CESIUM_3D_TILE,m=h!==y.Z.TERRAIN,f=t.passes;let _,p,g;if(f.render){const n=i.length;for(_=0;_<n;++_)p=l[R(_,n)],d&&(g=i[_],M(g,t,r,o,p,s)),m&&(g=i[_].derivedCommands.tileset,M(g,t,r,o,p,s));if(t.invertClassification){const i=e._commandsIgnoreShow,n=i.length;for(_=0;_<n;++_)p=l[_],g=i[_],M(g,t,r,o,p,s)}}if(f.pick){const e=n.length,i=u._pickOffsets;for(_=0;_<e;++_)p=l[i[R(_,e)].index],d&&(g=n[_],N(g,t,r,o,p)),m&&(g=n[_].derivedCommands.tileset,N(g,t,r,o,p))}}(i,t,n,r,o,s,c)},this._primitive=new S.Z(r),this._primitive.readyPromise.then((function(e){i._ready=!0,i.releaseGeometryInstances&&(i.geometryInstances=void 0);const t=e._error;(0,a.Z)(t)?i._readyPromise.reject(t):i._readyPromise.resolve(i)}))}if(this.debugShowShadowVolume&&!this._debugShowShadowVolume&&this._ready?(this._debugShowShadowVolume=!0,this._rsStencilDepthPass=m.Z.fromCache(L(!1,!1)),this._rsStencilDepthPass3DTiles=m.Z.fromCache(L(!1,!0)),this._rsColorPass=m.Z.fromCache(P(!1))):!this.debugShowShadowVolume&&this._debugShowShadowVolume&&(this._debugShowShadowVolume=!1,this._rsStencilDepthPass=m.Z.fromCache(L(!0,!1)),this._rsStencilDepthPass3DTiles=m.Z.fromCache(L(!0,!0)),this._rsColorPass=m.Z.fromCache(P(!0))),this._primitive.appearance!==t){if(!this._hasSphericalExtentsAttribute&&!this._hasPlanarExtentsAttributes&&(0,a.Z)(t.material))throw new u.Z("Materials on ClassificationPrimitives are not supported except via GroundPrimitive");if(!this._hasPerColorAttribute&&t instanceof v.Z)throw new u.Z("PerInstanceColorAppearance requires color GeometryInstanceAttribute");this._primitive.appearance=t}this._primitive.show=this.show,this._primitive.debugShowBoundingVolume=this.debugShowBoundingVolume,this._primitive.update(e)},O.prototype.getGeometryInstanceAttributes=function(e){if(!(0,a.Z)(this._primitive))throw new u.Z("must call update before calling getGeometryInstanceAttributes");return this._primitive.getGeometryInstanceAttributes(e)},O.prototype.isDestroyed=function(){return!1},O.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),this._sp=this._sp&&this._sp.destroy(),this._spPick=this._spPick&&this._spPick.destroy(),this._spColor=this._spColor&&this._spColor.destroy(),this._spPick2D=void 0,this._spColor2D=void 0,(0,c.Z)(this)};const B=O},98179:(e,t,i)=>{i.d(t,{Z:()=>r});const n={TERRAIN:0,CESIUM_3D_TILE:1,BOTH:2,NUMBER_OF_CLASSIFICATION_TYPES:3},r=Object.freeze(n)},69823:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(93517),r=i(17497),o=i(54485);function s(e,t){r.Z.typeOf.object("normal",e),r.Z.typeOf.number("distance",t),this._distance=t,this._normal=new a(e,this),this.onChangeCallback=void 0,this.index=-1}function a(e,t){this._clippingPlane=t,this._cartesian3=n.Z.clone(e)}Object.defineProperties(s.prototype,{distance:{get:function(){return this._distance},set:function(e){r.Z.typeOf.number("value",e),(0,o.Z)(this.onChangeCallback)&&e!==this._distance&&this.onChangeCallback(this.index),this._distance=e}},normal:{get:function(){return this._normal},set:function(e){r.Z.typeOf.object("value",e),(0,o.Z)(this.onChangeCallback)&&!n.Z.equals(this._normal._cartesian3,e)&&this.onChangeCallback(this.index),n.Z.clone(e,this._normal._cartesian3)}}}),s.fromPlane=function(e,t){return r.Z.typeOf.object("plane",e),(0,o.Z)(t)?(t.normal=e.normal,t.distance=e.distance):t=new s(e.normal,e.distance),t},s.clone=function(e,t){return(0,o.Z)(t)?(t.normal=e.normal,t.distance=e.distance,t):new s(e.normal,e.distance)},Object.defineProperties(a.prototype,{x:{get:function(){return this._cartesian3.x},set:function(e){r.Z.typeOf.number("value",e),(0,o.Z)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.x&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.x=e}},y:{get:function(){return this._cartesian3.y},set:function(e){r.Z.typeOf.number("value",e),(0,o.Z)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.y&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.y=e}},z:{get:function(){return this._cartesian3.z},set:function(e){r.Z.typeOf.number("value",e),(0,o.Z)(this._clippingPlane.onChangeCallback)&&e!==this._cartesian3.z&&this._clippingPlane.onChangeCallback(this._clippingPlane.index),this._cartesian3.z=e}}});const c=s},53425:(e,t,i)=>{i.d(t,{Z:()=>N});var n=i(69310),r=i(59015),o=i(93517),s=i(90868),a=i(17497),c=i(6785),u=i(88779),l=i(54485),h=i(90332),d=i(20176),m=i(92893),f=i(3169),_=i(71118),p=i(91166),g=i(30445),Z=i(85834),y=i(27400),b=i(28696),v=i(47334),S=i(69823);function C(e){e=(0,u.Z)(e,u.Z.EMPTY_OBJECT),this._planes=[],this._dirtyIndex=-1,this._multipleDirtyPlanes=!1,this._enabled=(0,u.Z)(e.enabled,!0),this.modelMatrix=_.Z.clone((0,u.Z)(e.modelMatrix,_.Z.IDENTITY)),this.edgeColor=c.Z.clone((0,u.Z)(e.edgeColor,c.Z.WHITE)),this.edgeWidth=(0,u.Z)(e.edgeWidth,0),this.planeAdded=new m.Z,this.planeRemoved=new m.Z,this._owner=void 0;const t=(0,u.Z)(e.unionClippingRegions,!1);this._unionClippingRegions=t,this._testIntersection=t?E:x,this._uint8View=void 0,this._float32View=void 0,this._clippingPlanesTexture=void 0;const i=e.planes;if((0,l.Z)(i)){const e=i.length;for(let t=0;t<e;++t)this.add(i[t])}}function E(e){return e===f.Z.OUTSIDE}function x(e){return e===f.Z.INSIDE}function T(e,t){e._multipleDirtyPlanes=e._multipleDirtyPlanes||-1!==e._dirtyIndex&&e._dirtyIndex!==t,e._dirtyIndex=t}function w(e,t){const i=e.length;for(let n=0;n<i;++n)if(g.Z.equals(e[n],t))return n;return-1}Object.defineProperties(C.prototype,{length:{get:function(){return this._planes.length}},unionClippingRegions:{get:function(){return this._unionClippingRegions},set:function(e){this._unionClippingRegions!==e&&(this._unionClippingRegions=e,this._testIntersection=e?E:x)}},enabled:{get:function(){return this._enabled},set:function(e){this._enabled!==e&&(this._enabled=e)}},texture:{get:function(){return this._clippingPlanesTexture}},owner:{get:function(){return this._owner}},clippingPlanesState:{get:function(){return this._unionClippingRegions?this._planes.length:-this._planes.length}}}),C.prototype.add=function(e){const t=this._planes.length,i=this;e.onChangeCallback=function(e){T(i,e)},e.index=t,T(this,t),this._planes.push(e),this.planeAdded.raiseEvent(e,t)},C.prototype.get=function(e){return a.Z.typeOf.number("index",e),this._planes[e]},C.prototype.contains=function(e){return-1!==w(this._planes,e)},C.prototype.remove=function(e){const t=this._planes,i=w(t,e);if(-1===i)return!1;e instanceof S.Z&&(e.onChangeCallback=void 0,e.index=-1);const n=t.length-1;for(let e=i;e<n;++e){const i=t[e+1];t[e]=i,i instanceof S.Z&&(i.index=e)}return this._multipleDirtyPlanes=!0,t.length=n,this.planeRemoved.raiseEvent(e,i),!0},C.prototype.removeAll=function(){const e=this._planes,t=e.length;for(let i=0;i<t;++i){const t=e[i];t instanceof S.Z&&(t.onChangeCallback=void 0,t.index=-1),this.planeRemoved.raiseEvent(t,i)}this._multipleDirtyPlanes=!0,this._planes=[]};const O=new s.Z,L=new s.Z;function P(e,t,i){const r=e._uint8View,o=e._planes;let a=0;for(let e=t;e<i;++e){const t=o[e],i=n.Z.octEncodeToCartesian4(t.normal,L);r[a]=i.x,r[a+1]=i.y,r[a+2]=i.z,r[a+3]=i.w;const c=s.Z.packFloat(t.distance,O);r[a+4]=c.x,r[a+5]=c.y,r[a+6]=c.z,r[a+7]=c.w,a+=8}}function D(e,t,i){const n=e._float32View,r=e._planes;let o=0;for(let e=t;e<i;++e){const t=r[e],i=t.normal;n[o]=i.x,n[o+1]=i.y,n[o+2]=i.z,n[o+3]=t.distance,o+=4}}function A(e,t){const i=Z.Z.maximumTextureSize;return t.x=Math.min(e,i),t.y=Math.ceil(e/t.x),t}const I=new r.Z;C.prototype.update=function(e){let t=this._clippingPlanesTexture;const i=e.context,n=C.useFloatTexture(i),r=n?this.length:2*this.length;if((0,l.Z)(t)){const e=t.width*t.height;(e<r||r<.25*e)&&(t.destroy(),t=void 0,this._clippingPlanesTexture=void 0)}if(0===this.length)return;if(!(0,l.Z)(t)){const e=A(r,I);e.y*=2,n?(t=new v.Z({context:i,width:e.x,height:e.y,pixelFormat:p.Z.RGBA,pixelDatatype:y.Z.FLOAT,sampler:b.Z.NEAREST,flipY:!1}),this._float32View=new Float32Array(e.x*e.y*4)):(t=new v.Z({context:i,width:e.x,height:e.y,pixelFormat:p.Z.RGBA,pixelDatatype:y.Z.UNSIGNED_BYTE,sampler:b.Z.NEAREST,flipY:!1}),this._uint8View=new Uint8Array(e.x*e.y*4)),this._clippingPlanesTexture=t,this._multipleDirtyPlanes=!0}const o=this._dirtyIndex;if(this._multipleDirtyPlanes||-1!==o){if(this._multipleDirtyPlanes)n?(D(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._float32View}})):(P(this,0,this._planes.length),t.copyFrom({source:{width:t.width,height:t.height,arrayBufferView:this._uint8View}}));else{let e=0,i=0;n?(i=Math.floor(o/t.width),e=Math.floor(o-i*t.width),D(this,o,o+1),t.copyFrom({source:{width:1,height:1,arrayBufferView:this._float32View},xOffset:e,yOffset:i})):(i=Math.floor(2*o/t.width),e=Math.floor(2*o-i*t.width),P(this,o,o+1),t.copyFrom({source:{width:2,height:1,arrayBufferView:this._uint8View},xOffset:e,yOffset:i}))}this._multipleDirtyPlanes=!1,this._dirtyIndex=-1}};const R=new _.Z,M=new g.Z(o.Z.UNIT_X,0);C.prototype.computeIntersectionWithBoundingVolume=function(e,t){const i=this._planes,n=i.length;let r=this.modelMatrix;(0,l.Z)(t)&&(r=_.Z.multiply(t,r,R));let o=f.Z.INSIDE;!this.unionClippingRegions&&n>0&&(o=f.Z.OUTSIDE);for(let t=0;t<n;++t){const n=i[t];g.Z.transform(n,r,M);const s=e.intersectPlane(M);if(s===f.Z.INTERSECTING)o=s;else if(this._testIntersection(s))return s}return o},C.setOwner=function(e,t,i){if(e!==t[i]&&(t[i]=t[i]&&t[i].destroy(),(0,l.Z)(e))){if((0,l.Z)(e._owner))throw new d.Z("ClippingPlaneCollection should only be assigned to one object");e._owner=t,t[i]=e}},C.useFloatTexture=function(e){return e.floatingPointTexture},C.getTextureResolution=function(e,t,i){const n=e.texture;if((0,l.Z)(n))return i.x=n.width,i.y=n.height,i;const r=A(C.useFloatTexture(t)?e.length:2*e.length,i);return r.y*=2,r},C.prototype.isDestroyed=function(){return!1},C.prototype.destroy=function(){return this._clippingPlanesTexture=this._clippingPlanesTexture&&this._clippingPlanesTexture.destroy(),(0,h.Z)(this)};const N=C},64825:(e,t,i)=>{i.d(t,{Z:()=>_e});var n=i(995),r=i(31328),o=i(36627),s=i(93517),a=i(17497),c=i(6785),u=i(2099),l=i(59048),h=i(10631),d=i(74650),m=i(21766),f=i(41749),_=i(44990),p=i(61699),g=i(88779),Z=i(54485),y=i(90332),b=i(20176),v=i(71087),S=i(88173),C=i(39172),E=i(1577),x=i(27400),T=i(91166),w=i(74064),O=i(28696),L=i(7048),P=i(17426),D=i(47334),A=i(92106),I=i(48867),R=i(91373),M=i(46801),N=i(19695),B=i(95411);let V;const k=new s.Z,U={positionHighAndScaleX:0,positionLowAndScaleY:1,packedAttribute0:2,packedAttribute1:3,color:4},F={direction:0,positionHighAndScaleX:1,positionLowAndScaleY:2,packedAttribute0:3,packedAttribute1:4,color:5},z=p.Z.SHOW_INDEX,$=p.Z.POSITION_INDEX,q=p.Z.SCALE_INDEX,W=p.Z.MAXIMUM_SIZE_INDEX,G=p.Z.SLICE_INDEX,H=p.Z.BRIGHTNESS_INDEX,Y=p.Z.NUMBER_OF_PROPERTIES,j=p.Z.COLOR_INDEX;function X(e){e=(0,g.Z)(e,g.Z.EMPTY_OBJECT),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!1,this._propertiesChanged=new Uint32Array(Y),this._noiseTexture=void 0,this._textureSliceWidth=128,this._noiseTextureRows=4,this.noiseDetail=(0,g.Z)(e.noiseDetail,16),this.noiseOffset=s.Z.clone((0,g.Z)(e.noiseOffset,s.Z.ZERO)),this._loading=!1,this._ready=!1;const t=this;this._uniforms={u_noiseTexture:function(){return t._noiseTexture},u_noiseTextureDimensions:K(t),u_noiseDetail:function(){return t.noiseDetail}},this._vaNoise=void 0,this._spNoise=void 0,this._spCreated=!1,this._sp=void 0,this._rs=void 0,this.show=(0,g.Z)(e.show,!0),this._colorCommands=[],this.debugBillboards=(0,g.Z)(e.debugBillboards,!1),this._compiledDebugBillboards=!1,this.debugEllipsoids=(0,g.Z)(e.debugEllipsoids,!1),this._compiledDebugEllipsoids=!1}function K(e){return function(){return k.x=e._textureSliceWidth,k.y=e._noiseTextureRows,k.z=1/e._noiseTextureRows,k}}function Q(e){const t=e.length;for(let i=0;i<t;++i)e[i]&&e[i]._destroy()}function J(e){if(e._cloudsRemoved){e._cloudsRemoved=!1;const t=[],i=e._clouds,n=i.length;for(let e=0,r=0;e<n;++e){const n=i[e];(0,Z.Z)(n)&&(i._index=r++,t.push(n))}e._clouds=t}}Object.defineProperties(X.prototype,{length:{get:function(){return J(this),this._clouds.length}}}),X.prototype.add=function(e){e=(0,g.Z)(e,g.Z.EMPTY_OBJECT);const t=(0,g.Z)(e.cloudType,l.Z.CUMULUS);if(!l.Z.validate(t))throw new b.Z("invalid cloud type");let i;return t===l.Z.CUMULUS&&(i=new p.Z(e,this),i._index=this._clouds.length,this._clouds.push(i),this._createVertexArray=!0),i},X.prototype.remove=function(e){return!!this.contains(e)&&(this._clouds[e._index]=void 0,this._cloudsRemoved=!0,this._createVertexArray=!0,e._destroy(),!0)},X.prototype.removeAll=function(){Q(this._clouds),this._clouds=[],this._cloudsToUpdate=[],this._cloudsToUpdateIndex=0,this._cloudsRemoved=!1,this._createVertexArray=!0},X.prototype._updateCloud=function(e,t){e._dirty||(this._cloudsToUpdate[this._cloudsToUpdateIndex++]=e),++this._propertiesChanged[t]},X.prototype.contains=function(e){return(0,Z.Z)(e)&&e._cloudCollection===this},X.prototype.get=function(e){return a.Z.typeOf.number("index",e),J(this),this._clouds[e]};const ee=new Float32Array([-1,-1,1,-1,1,1,-1,1]),te=new Uint16Array([0,1,2,0,2,3]);let ie;function ne(e){let t=e.cache.cloudCollection_indexBufferBatched;if((0,Z.Z)(t))return t;const i=new Uint16Array(98298);for(let e=0,t=0;e<98298;e+=6,t+=4)i[e]=t,i[e+1]=t+1,i[e+2]=t+2,i[e+3]=t,i[e+4]=t+2,i[e+5]=t+3;return t=r.Z.createIndexBuffer({context:e,typedArray:i,usage:o.Z.STATIC_DRAW,indexDatatype:C.Z.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferBatched=t,t}function re(e){let t=e.cache.cloudCollection_indexBufferInstanced;return(0,Z.Z)(t)||(t=r.Z.createIndexBuffer({context:e,typedArray:new Uint16Array([0,1,2,0,2,3]),usage:o.Z.STATIC_DRAW,indexDatatype:C.Z.UNSIGNED_SHORT}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_indexBufferInstanced=t),t}function oe(e){let t=e.cache.cloudCollection_vertexBufferInstanced;return(0,Z.Z)(t)||(t=r.Z.createVertexBuffer({context:e,typedArray:new Float32Array([0,0,1,0,1,1,0,1]),usage:o.Z.STATIC_DRAW}),t.vertexArrayDestroyable=!1,e.cache.cloudCollection_vertexBufferInstanced=t),t}const se=new S.Z;function ae(e,t,i,n){let r;const o=i[V.positionHighAndScaleX],s=i[V.positionLowAndScaleY],a=n.position;S.Z.fromCartesian(a,se);const c=n.scale,u=se.high,l=se.low;e._instanced?(r=n._index,o(r,u.x,u.y,u.z,c.x),s(r,l.x,l.y,l.z,c.y)):(r=4*n._index,o(r+0,u.x,u.y,u.z,c.x),o(r+1,u.x,u.y,u.z,c.x),o(r+2,u.x,u.y,u.z,c.x),o(r+3,u.x,u.y,u.z,c.x),s(r+0,l.x,l.y,l.z,c.y),s(r+1,l.x,l.y,l.z,c.y),s(r+2,l.x,l.y,l.z,c.y),s(r+3,l.x,l.y,l.z,c.y))}function ce(e,t,i,n){let r;const o=i[V.packedAttribute0],s=n.show,a=n.brightness;e._instanced?(r=n._index,o(r,s,a,0,0)):(r=4*n._index,o(r+0,s,a,0,0),o(r+1,s,a,1,0),o(r+2,s,a,1,1),o(r+3,s,a,0,1))}function ue(e,t,i,n){let r;const o=i[V.packedAttribute1],s=n.maximumSize,a=n.slice;e._instanced?(r=n._index,o(r,s.x,s.y,s.z,a)):(r=4*n._index,o(r+0,s.x,s.y,s.z,a),o(r+1,s.x,s.y,s.z,a),o(r+2,s.x,s.y,s.z,a),o(r+3,s.x,s.y,s.z,a))}function le(e,t,i,n){let r;const o=i[V.color],s=n.color,a=c.Z.floatToByte(s.red),u=c.Z.floatToByte(s.green),l=c.Z.floatToByte(s.blue),h=c.Z.floatToByte(s.alpha);e._instanced?(r=n._index,o(r,a,u,l,h)):(r=4*n._index,o(r+0,a,u,l,h),o(r+1,a,u,l,h),o(r+2,a,u,l,h),o(r+3,a,u,l,h))}function he(e,t,i,n){ae(e,0,i,n),ce(e,0,i,n),ue(e,0,i,n),le(e,0,i,n)}function de(e,t,i,n){const s=e,a=s._textureSliceWidth,c=s._noiseTextureRows;if(a/c<1||a%c!=0)throw new b.Z("noiseTextureRows must evenly divide textureSliceWidth");const l=t.context;s._vaNoise=function(e){const t=r.Z.createVertexBuffer({context:e,typedArray:ee,usage:o.Z.STATIC_DRAW}),i=r.Z.createIndexBuffer({context:e,typedArray:te,usage:o.Z.STATIC_DRAW,indexDatatype:C.Z.UNSIGNED_SHORT}),n=[{index:0,vertexBuffer:t,componentsPerAttribute:2,componentDatatype:_.Z.FLOAT}];return new M.Z({context:e,attributes:n,indexBuffer:i})}(l),s._spNoise=P.Z.fromCache({context:l,vertexShaderSource:i,fragmentShaderSource:n,attributeLocations:{position:0}});const h=s.noiseDetail,d=s.noiseOffset;s._noiseTexture=new D.Z({context:l,width:a*a/c,height:a*c,pixelDatatype:x.Z.UNSIGNED_BYTE,pixelFormat:T.Z.RGBA,sampler:new O.Z({wrapS:R.Z.REPEAT,wrapT:R.Z.REPEAT,minificationFilter:I.Z.NEAREST,magnificationFilter:A.Z.NEAREST})});const m=new u.Z({vertexArray:s._vaNoise,shaderProgram:s._spNoise,outputTexture:s._noiseTexture,uniformMap:{u_noiseTextureDimensions:K(s),u_noiseDetail:function(){return h},u_noiseOffset:function(){return d}},persists:!1,owner:e,postExecute:function(e){s._ready=!0,s._loading=!1}});t.commandList.push(m),s._loading=!0}function me(e,t){const i=e,n=t.context;i._createVertexArray=!1,i._vaf=i._vaf&&i._vaf.destroy();const r=e._clouds,s=r.length;if(s>0){i._vaf=function(e,t,i){const n=[{index:V.positionHighAndScaleX,componentsPerAttribute:4,componentDatatype:_.Z.FLOAT,usage:o.Z.STATIC_DRAW},{index:V.positionLowAndScaleY,componentsPerAttribute:4,componentDatatype:_.Z.FLOAT,usage:o.Z.STATIC_DRAW},{index:V.packedAttribute0,componentsPerAttribute:4,componentDatatype:_.Z.FLOAT,usage:o.Z.STATIC_DRAW},{index:V.packedAttribute1,componentsPerAttribute:4,componentDatatype:_.Z.FLOAT,usage:o.Z.STATIC_DRAW},{index:V.color,componentsPerAttribute:4,componentDatatype:_.Z.UNSIGNED_BYTE,normalize:!0,usage:o.Z.STATIC_DRAW}];i&&n.push({index:V.direction,componentsPerAttribute:2,componentDatatype:_.Z.FLOAT,vertexBuffer:oe(e)});const r=i?t:4*t;return new N.Z(e,n,r,i)}(n,s,i._instanced);const t=i._vaf.writers;let a;for(a=0;a<s;++a){he(e,0,t,r[a])}i._vaf.commit(ie(n))}}const fe=[];X.prototype.update=function(e){if(J(this),!this.show)return;const t=this.debugBillboards||this.debugEllipsoids;this._ready=!!t||(0,Z.Z)(this._noiseTexture),this._ready||this._loading||t||de(this,e,f.Z,m.Z),this._instanced=e.context.instancedArrays,V=this._instanced?F:U,ie=this._instanced?re:ne;const i=this._clouds.length,r=this._cloudsToUpdate,o=this._cloudsToUpdateIndex;this._createVertexArray?me(this,e):o>0&&function(e,t){const i=t.context,n=e,r=n._clouds.length,o=n._cloudsToUpdate,s=n._cloudsToUpdateIndex,a=n._propertiesChanged,c=fe;c.length=0,(a[$]||a[q])&&c.push(ae),(a[z]||a[H])&&c.push(ce),(a[W]||a[G])&&c.push(ue),a[j]&&c.push(le);const u=c.length,l=n._vaf.writers;let h,d,m;if(s/r>.1){for(h=0;h<s;++h)for(d=o[h],d._dirty=!1,m=0;m<u;++m)c[m](e,t,l,d);n._vaf.commit(ie(i))}else{for(h=0;h<s;++h){for(d=o[h],d._dirty=!1,m=0;m<u;++m)c[m](e,t,l,d);n._instanced?n._vaf.subCommit(d._index,1):n._vaf.subCommit(4*d._index,4)}n._vaf.endSubCommits()}n._cloudsToUpdateIndex=0}(this,e),o>1.5*i&&(r.length=i),!(0,Z.Z)(this._vaf)||!(0,Z.Z)(this._vaf.va)||!this._ready&!t||(this._spCreated&&this.debugBillboards===this._compiledDebugBillboards&&this.debugEllipsoids===this._compiledDebugEllipsoids||function(e,t,i,r){const o=t.context,s=e,a=new L.Z({defines:[],sources:[i]});s._instanced&&a.defines.push("INSTANCED");const c=new L.Z({defines:[],sources:[r]});s.debugBillboards&&c.defines.push("DEBUG_BILLBOARDS"),s.debugEllipsoids&&c.defines.push("DEBUG_ELLIPSOIDS"),s._sp=P.Z.replaceCache({context:o,shaderProgram:s._sp,vertexShaderSource:a,fragmentShaderSource:c,attributeLocations:V}),s._rs=w.Z.fromCache({depthTest:{enabled:!0,func:B.Z.LESS},depthMask:!1,blending:n.Z.ALPHA_BLEND}),s._spCreated=!0,s._compiledDebugBillboards=s.debugBillboards,s._compiledDebugEllipsoids=s.debugEllipsoids}(this,e,d.Z,h.Z),function(e,t){const i=e,n=t.passes,r=i._uniforms,o=t.commandList;if(n.render){const t=i._colorCommands,n=i._vaf.va,s=n.length;t.length=s;for(let a=0;a<s;a++){let s=t[a];(0,Z.Z)(s)||(s=t[a]=new v.Z),s.pass=E.Z.TRANSLUCENT,s.owner=e,s.uniformMap=r,s.count=n[a].indicesCount,s.vertexArray=n[a].va,s.shaderProgram=i._sp,s.renderState=i._rs,i._instanced&&(s.count=6,s.instanceCount=i._clouds.length),o.push(s)}}}(this,e))},X.prototype.isDestroyed=function(){return!1},X.prototype.destroy=function(){return this._noiseTexture=this._noiseTexture&&this._noiseTexture.destroy(),this._sp=this._sp&&this._sp.destroy(),this._vaf=this._vaf&&this._vaf.destroy(),Q(this._clouds),(0,y.Z)(this)};const _e=X},59048:(e,t,i)=>{i.d(t,{Z:()=>r});const n={CUMULUS:0,validate:function(e){return e===n.CUMULUS}},r=Object.freeze(n)},30562:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(22874);const r={HIGHLIGHT:0,REPLACE:1,MIX:2,getColorBlend:function(e,t){return e===r.HIGHLIGHT?0:e===r.REPLACE?1:e===r.MIX?n.Z.clamp(t,n.Z.EPSILON4,1):void 0}},o=Object.freeze(r)},94416:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(88779),r=i(54485),o=i(90332),s=i(52312),a=i(21514);function c(e,t,i,o,c,l){this._tileset=e,this._tile=t,this._resource=i,this._contents=[],this._metadata=void 0,this._group=void 0,this._readyPromise=function(e,t,i,o){i=(0,n.Z)(i,0);const c=new Uint8Array(t),l=new DataView(t);i+=u;const h=l.getUint32(i,!0);if(1!==h)throw new a.Z(`Only Composite Tile version 1 is supported. Version ${h} is not.`);i+=u,i+=u;const d=l.getUint32(i,!0);i+=u;const m=[];for(let n=0;n<d;++n){const n=(0,s.Z)(c,i),h=l.getUint32(i+2*u,!0),d=o[n];if(!(0,r.Z)(d))throw new a.Z(`Unknown tile content type, ${n}, inside Composite tile`);{const n=d(e._tileset,e._tile,e._resource,t,i);e._contents.push(n),m.push(n.readyPromise)}i+=h}return Promise.all(m).then((function(){return e}))}(this,o,c,l)}Object.defineProperties(c.prototype,{featurePropertiesDirty:{get:function(){const e=this._contents,t=e.length;for(let i=0;i<t;++i)if(e[i].featurePropertiesDirty)return!0;return!1},set:function(e){const t=this._contents,i=t.length;for(let n=0;n<i;++n)t[n].featurePropertiesDirty=e}},featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){return this._contents}},readyPromise:{get:function(){return this._readyPromise}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){return this._resource.getUrlComponent(!0)}},metadata:{get:function(){return this._metadata},set:function(e){this._metadata=e;const t=this._contents,i=t.length;for(let n=0;n<i;++n)t[n].metadata=e}},batchTable:{get:function(){}},group:{get:function(){return this._group},set:function(e){this._group=e;const t=this._contents,i=t.length;for(let n=0;n<i;++n)t[n].group=e}}});const u=Uint32Array.BYTES_PER_ELEMENT;c.prototype.hasProperty=function(e,t){return!1},c.prototype.getFeature=function(e){},c.prototype.applyDebugSettings=function(e,t){const i=this._contents,n=i.length;for(let r=0;r<n;++r)i[r].applyDebugSettings(e,t)},c.prototype.applyStyle=function(e){const t=this._contents,i=t.length;for(let n=0;n<i;++n)t[n].applyStyle(e)},c.prototype.update=function(e,t){const i=this._contents,n=i.length;for(let r=0;r<n;++r)i[r].update(e,t)},c.prototype.isDestroyed=function(){return!1},c.prototype.destroy=function(){const e=this._contents,t=e.length;for(let i=0;i<t;++i)e[i].destroy();return(0,o.Z)(this)};const l=c},20131:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(55077),r=i(54485),o=i(65155);function s(e,t){this._conditionsExpression=(0,n.Z)(e,!0),this._conditions=e.conditions,this._runtimeConditions=void 0,function(e,t){const i=[],n=e._conditions;if(!(0,r.Z)(n))return;const s=n.length;for(let e=0;e<s;++e){const r=n[e],s=String(r[0]),c=String(r[1]);i.push(new a(new o.Z(s,t),new o.Z(c,t)))}e._runtimeConditions=i}(this,t)}function a(e,t){this.condition=e,this.expression=t}Object.defineProperties(s.prototype,{conditionsExpression:{get:function(){return this._conditionsExpression}}}),s.prototype.evaluate=function(e,t){const i=this._runtimeConditions;if(!(0,r.Z)(i))return;const n=i.length;for(let r=0;r<n;++r){const n=i[r];if(n.condition.evaluate(e))return n.expression.evaluate(e,t)}},s.prototype.evaluateColor=function(e,t){const i=this._runtimeConditions;if(!(0,r.Z)(i))return;const n=i.length;for(let r=0;r<n;++r){const n=i[r];if(n.condition.evaluate(e))return n.expression.evaluateColor(e,t)}},s.prototype.getShaderFunction=function(e,t,i,n){const o=this._runtimeConditions;if(!(0,r.Z)(o)||0===o.length)return;let s="";const a=o.length;for(let e=0;e<a;++e){const n=o[e];s+=`    ${0===e?"if":"else if"} (${n.condition.getShaderExpression(t,i)})\n    {\n        return ${n.expression.getShaderExpression(t,i)};\n    }\n`}return s=`${n} ${e}\n{\n${s}    return ${n}(1.0);\n}\n`,s},s.prototype.getVariables=function(){let e=[];const t=this._runtimeConditions;if(!(0,r.Z)(t)||0===t.length)return e;const i=t.length;for(let n=0;n<i;++n){const i=t[n];e.push.apply(e,i.condition.getVariables()),e.push.apply(e,i.expression.getVariables())}return e=e.filter((function(e,t,i){return i.indexOf(e)===t})),e};const c=s},60551:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(93517),r=i(17497),o=i(88779),s=i(22874);const a=s.Z.toRadians(30);function c(e){this._angle=(0,o.Z)(e,a)}Object.defineProperties(c.prototype,{angle:{get:function(){return this._angle},set:function(e){r.Z.typeOf.number("value",e),this._angle=e}}}),c.prototype.emit=function(e){const t=Math.tan(this._angle),i=s.Z.randomBetween(0,s.Z.TWO_PI),r=s.Z.randomBetween(0,t),o=r*Math.cos(i),a=r*Math.sin(i);e.velocity=n.Z.fromElements(o,a,1,e.velocity),n.Z.normalize(e.velocity,e.velocity),e.position=n.Z.clone(n.Z.ZERO,e.position)};const u=c},6356:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(17497),r=i(88779),o=i(8754);function s(e){const t=(e=(0,r.Z)(e,r.Z.EMPTY_OBJECT)).content,i=e.class;n.Z.typeOf.object("options.content",t),n.Z.typeOf.object("options.class",i),this._class=i,this._properties=t.properties,this._extensions=t.extensions,this._extras=t.extras}Object.defineProperties(s.prototype,{class:{get:function(){return this._class}},extras:{get:function(){return this._extras}},extensions:{get:function(){return this._extensions}}}),s.prototype.hasProperty=function(e){return o.Z.hasProperty(e,this._properties,this._class)},s.prototype.hasPropertyBySemantic=function(e){return o.Z.hasPropertyBySemantic(e,this._properties,this._class)},s.prototype.getPropertyIds=function(e){return o.Z.getPropertyIds(this._properties,this._class,e)},s.prototype.getProperty=function(e){return o.Z.getProperty(e,this._properties,this._class)},s.prototype.setProperty=function(e,t){return o.Z.setProperty(e,t,this._properties,this._class)},s.prototype.getPropertyBySemantic=function(e){return o.Z.getPropertyBySemantic(e,this._properties,this._class)},s.prototype.setPropertyBySemantic=function(e,t){return o.Z.setPropertyBySemantic(e,t,this._properties,this._class)}},48556:(e,t,i)=>{i.d(t,{Z:()=>C});var n=i(28474),r=i(25914),o=i(17497),s=i(78505),a=i(88779),c=i(54485),u=i(90332),l=i(42113);const h="#ffffff",d="#48b";function m(e,t){this.credit=e,this.count=(0,a.Z)(t,1)}const f="cesium-credit-delimiter";function _(e){const t=document.createElement("span");return t.textContent=e,t.className=f,t}function p(e,t){if((0,c.Z)(t)){const i=document.createElement(t);i._creditId=e._creditId,i.appendChild(e),e=i}return e}function g(e,t,i,n){const r=e.childNodes;let o=-1;t.sort((function(e,t){return t.count-e.count}));for(let s=0;s<t.length;++s){const a=t[s].credit;if((0,c.Z)(a)){if(o=s,(0,c.Z)(i)&&(o*=2,s>0)){const t=o-1;if(r.length<=t)e.appendChild(_(i));else{const n=r[t];n.className!==f&&e.replaceChild(_(i),n)}}const t=a.element;if(r.length<=o)e.appendChild(p(t,n));else{const i=r[o];i._creditId!==a._id&&e.replaceChild(p(t,n),i)}}}for(++o;o<r.length;)e.removeChild(r[o])}function Z(e,t){let i=`${e} {`;for(const e in t)t.hasOwnProperty(e)&&(i+=`${e}: ${t[e]}; `);return i+=" }\n",i}function y(e,t,i){o.Z.defined("container",e);const r=this;i=(0,a.Z)(i,document.body);const c=document.createElement("div");c.className="cesium-credit-lightbox-overlay",i.appendChild(c);const u=document.createElement("div");function l(e){u.contains(e.target)||r.hideLightbox()}u.className="cesium-credit-lightbox",c.appendChild(u),c.addEventListener("click",l,!1);const m=document.createElement("div");m.className="cesium-credit-lightbox-title",m.textContent="Data provided by:",u.appendChild(m);const f=document.createElement("a");f.onclick=this.hideLightbox.bind(this),f.innerHTML="&times;",f.className="cesium-credit-lightbox-close",u.appendChild(f);const _=document.createElement("ul");u.appendChild(_);const p=document.createElement("div");p.className="cesium-credit-logoContainer",p.style.display="inline",e.appendChild(p);const g=document.createElement("div");g.className="cesium-credit-textContainer",g.style.display="inline",e.appendChild(g);const b=document.createElement("a");b.className="cesium-credit-expand-link",b.onclick=this.showLightbox.bind(this),b.textContent="Data attribution",e.appendChild(b),function(){let e="";e+=Z(".cesium-credit-lightbox-overlay",{display:"none","z-index":"1",position:"absolute",top:"0",left:"0",width:"100%",height:"100%","background-color":"rgba(80, 80, 80, 0.8)"}),e+=Z(".cesium-credit-lightbox",{"background-color":"#303336",color:h,position:"relative","min-height":"100px",margin:"auto"}),e+=Z(".cesium-credit-lightbox > ul > li a, .cesium-credit-lightbox > ul > li a:visited",{color:h}),e+=Z(".cesium-credit-lightbox > ul > li a:hover",{color:d}),e+=Z(".cesium-credit-lightbox.cesium-credit-lightbox-expanded",{border:"1px solid #444","border-radius":"5px","max-width":"370px"}),e+=Z(".cesium-credit-lightbox.cesium-credit-lightbox-mobile",{height:"100%",width:"100%"}),e+=Z(".cesium-credit-lightbox-title",{padding:"20px 20px 0 20px"}),e+=Z(".cesium-credit-lightbox-close",{"font-size":"18pt",cursor:"pointer",position:"absolute",top:"0",right:"6px",color:h}),e+=Z(".cesium-credit-lightbox-close:hover",{color:d}),e+=Z(".cesium-credit-lightbox > ul",{margin:"0",padding:"12px 20px 12px 40px","font-size":"13px"}),e+=Z(".cesium-credit-lightbox > ul > li",{"padding-bottom":"6px"}),e+=Z(".cesium-credit-lightbox > ul > li *",{padding:"0",margin:"0"}),e+=Z(".cesium-credit-expand-link",{"padding-left":"5px",cursor:"pointer","text-decoration":"underline",color:h}),e+=Z(".cesium-credit-expand-link:hover",{color:d}),e+=Z(".cesium-credit-text",{color:h}),e+=Z(".cesium-credit-textContainer *, .cesium-credit-logoContainer *",{display:"inline"});const t=document.head,i=document.createElement("style");i.innerHTML=e,t.insertBefore(i,t.firstChild)}();const v=s.Z.clone(y.cesiumCredit);this._delimiter=(0,a.Z)(t," \u2022 "),this._screenContainer=g,this._cesiumCreditContainer=p,this._lastViewportHeight=void 0,this._lastViewportWidth=void 0,this._lightboxCredits=u,this._creditList=_,this._lightbox=c,this._hideLightbox=l,this._expandLink=b,this._expanded=!1,this._defaultCredits=[],this._cesiumCredit=v,this._previousCesiumCredit=void 0,this._currentCesiumCredit=v,this._creditDisplayElementPool=[],this._creditDisplayElementIndex=0,this._currentFrameCredits={screenCredits:new n.Z,lightboxCredits:new n.Z},this._defaultCredit=void 0,this.viewport=i,this.container=e}function b(e,t,i,n){n=(0,a.Z)(n,1);let r=t.get(i.id);if((0,c.Z)(r))r.count<Number.MAX_VALUE&&(r.count+=n);else{const o=e._creditDisplayElementPool,s=e._creditDisplayElementPoolIndex;s<o.length?(r=o[s],r.credit=i,r.count=n):(r=new m(i,n),o.push(r)),++e._creditDisplayElementPoolIndex,t.set(i.id,r)}}let v;function S(){if(!(0,c.Z)(v)){let e=(0,r.Z)("Assets/Images/ion-credit.png");if(0!==e.indexOf("http://")&&0!==e.indexOf("https://")&&0!==e.indexOf("data:")){e=new l.Z(e).path()}v=new s.Z(`<a href="https://cesium.com/" target="_blank"><img src="${e}" title="Cesium ion"/></a>`,!0)}return y._cesiumCreditInitialized||(y._cesiumCredit=v,y._cesiumCreditInitialized=!0),v}y.prototype.addCredit=function(e){if(o.Z.defined("credit",e),e._isIon)return(0,c.Z)(this._defaultCredit)||(this._defaultCredit=s.Z.clone(S())),void(this._currentCesiumCredit=this._defaultCredit);let t;t=e.showOnScreen?this._currentFrameCredits.screenCredits:this._currentFrameCredits.lightboxCredits,b(this,t,e)},y.prototype.addDefaultCredit=function(e){o.Z.defined("credit",e);const t=this._defaultCredits;(function(e,t){const i=e.length;for(let n=0;n<i;n++){const i=e[n];if(s.Z.equals(i,t))return!0}return!1})(t,e)||t.push(e)},y.prototype.removeDefaultCredit=function(e){o.Z.defined("credit",e);const t=this._defaultCredits,i=t.indexOf(e);-1!==i&&t.splice(i,1)},y.prototype.showLightbox=function(){this._lightbox.style.display="block",this._expanded=!0},y.prototype.hideLightbox=function(){this._lightbox.style.display="none",this._expanded=!1},y.prototype.update=function(){this._expanded&&function(e){const t=e._lightboxCredits,i=e.viewport.clientWidth,n=e.viewport.clientHeight;i!==e._lastViewportWidth&&(i<576?(t.className="cesium-credit-lightbox cesium-credit-lightbox-mobile",t.style.marginTop="0"):(t.className="cesium-credit-lightbox cesium-credit-lightbox-expanded",t.style.marginTop=`${Math.floor(.5*(n-t.clientHeight))}px`),e._lastViewportWidth=i),i>=576&&n!==e._lastViewportHeight&&(t.style.marginTop=`${Math.floor(.5*(n-t.clientHeight))}px`,e._lastViewportHeight=n)}(this)},y.prototype.beginFrame=function(){const e=this._currentFrameCredits;this._creditDisplayElementPoolIndex=0;const t=e.screenCredits;t.removeAll();const i=this._defaultCredits;for(let e=0;e<i.length;++e){b(this,t,i[e],Number.MAX_VALUE)}e.lightboxCredits.removeAll(),s.Z.equals(y.cesiumCredit,this._cesiumCredit)||(this._cesiumCredit=s.Z.clone(y.cesiumCredit)),this._currentCesiumCredit=this._cesiumCredit},y.prototype.endFrame=function(){const e=this._currentFrameCredits.screenCredits.values;g(this._screenContainer,e,this._delimiter,void 0);const t=this._currentFrameCredits.lightboxCredits.values;this._expandLink.style.display=t.length>0?"inline":"none",g(this._creditList,t,void 0,"li"),function(e){const t=e._previousCesiumCredit,i=e._currentCesiumCredit;s.Z.equals(i,t)||((0,c.Z)(t)&&e._cesiumCreditContainer.removeChild(t.element),(0,c.Z)(i)&&e._cesiumCreditContainer.appendChild(i.element),e._previousCesiumCredit=i)}(this)},y.prototype.destroy=function(){return this._lightbox.removeEventListener("click",this._hideLightbox,!1),this.container.removeChild(this._cesiumCreditContainer),this.container.removeChild(this._screenContainer),this.container.removeChild(this._expandLink),this.viewport.removeChild(this._lightbox),(0,u.Z)(this)},y.prototype.isDestroyed=function(){return!1},y._cesiumCredit=void 0,y._cesiumCreditInitialized=!1,Object.defineProperties(y,{cesiumCredit:{get:function(){return S(),y._cesiumCredit},set:function(e){y._cesiumCredit=e,y._cesiumCreditInitialized=!0}}}),y.CreditDisplayElement=m;const C=y},28075:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(95411);const r={FRONT:n.Z.FRONT,BACK:n.Z.BACK,FRONT_AND_BACK:n.Z.FRONT_AND_BACK},o=Object.freeze(r)},61699:(e,t,i)=>{i.d(t,{Z:()=>Z});var n=i(59015),r=i(93517),o=i(17497),s=i(6785),a=i(88779),c=i(54485);function u(e,t){if(e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),this._show=(0,a.Z)(e.show,!0),this._position=r.Z.clone((0,a.Z)(e.position,r.Z.ZERO)),!(0,c.Z)(e.scale)&&(0,c.Z)(e.maximumSize))this._maximumSize=r.Z.clone(e.maximumSize),this._scale=new n.Z(this._maximumSize.x,this._maximumSize.y);else{this._scale=n.Z.clone((0,a.Z)(e.scale,new n.Z(20,12)));const t=new r.Z(this._scale.x,this._scale.y,Math.min(this._scale.x,this._scale.y)/1.5);this._maximumSize=r.Z.clone((0,a.Z)(e.maximumSize,t))}this._slice=(0,a.Z)(e.slice,-1),this._color=s.Z.clone((0,a.Z)(e.color,s.Z.WHITE)),this._brightness=(0,a.Z)(e.brightness,1),this._cloudCollection=t,this._index=-1}const l=u.SHOW_INDEX=0,h=u.POSITION_INDEX=1,d=u.SCALE_INDEX=2,m=u.MAXIMUM_SIZE_INDEX=3,f=u.SLICE_INDEX=4,_=u.BRIGHTNESS_INDEX=5,p=u.COLOR_INDEX=6;function g(e,t){const i=e._cloudCollection;(0,c.Z)(i)&&(i._updateCloud(e,t),e._dirty=!0)}u.NUMBER_OF_PROPERTIES=7,Object.defineProperties(u.prototype,{show:{get:function(){return this._show},set:function(e){o.Z.typeOf.bool("value",e),this._show!==e&&(this._show=e,g(this,l))}},position:{get:function(){return this._position},set:function(e){o.Z.typeOf.object("value",e);const t=this._position;r.Z.equals(t,e)||(r.Z.clone(e,t),g(this,h))}},scale:{get:function(){return this._scale},set:function(e){o.Z.typeOf.object("value",e);const t=this._scale;n.Z.equals(t,e)||(n.Z.clone(e,t),g(this,d))}},maximumSize:{get:function(){return this._maximumSize},set:function(e){o.Z.typeOf.object("value",e);const t=this._maximumSize;r.Z.equals(t,e)||(r.Z.clone(e,t),g(this,m))}},color:{get:function(){return this._color},set:function(e){o.Z.typeOf.object("value",e);const t=this._color;s.Z.equals(t,e)||(s.Z.clone(e,t),g(this,p))}},slice:{get:function(){return this._slice},set:function(e){o.Z.typeOf.number("value",e);this._slice!==e&&(this._slice=e,g(this,f))}},brightness:{get:function(){return this._brightness},set:function(e){o.Z.typeOf.number("value",e);this._brightness!==e&&(this._brightness=e,g(this,_))}}}),u.prototype._destroy=function(){this._cloudCollection=void 0};const Z=u},80184:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(88779),r=i(54485),o=i(20176),s=i(58466);function a(e){const t=(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT)).attributeName;let i=e.perInstanceAttribute;if(!(0,r.Z)(t))throw new o.Z("options.attributeName is required.");(0,r.Z)(i)||(i=!1);let a=(0,n.Z)(e.glslDatatype,"vec3");const c=`v_${t}`;let u;if("normal"===t||"tangent"===t||"bitangent"===t)u=`vec4 getColor() { return vec4((${c} + vec3(1.0)) * 0.5, 1.0); }\n`;else switch("st"===t&&(a="vec2"),a){case"float":u=`vec4 getColor() { return vec4(vec3(${c}), 1.0); }\n`;break;case"vec2":u=`vec4 getColor() { return vec4(${c}, 0.0, 1.0); }\n`;break;case"vec3":u=`vec4 getColor() { return vec4(${c}, 1.0); }\n`;break;case"vec4":u=`vec4 getColor() { return ${c}; }\n`;break;default:throw new o.Z("options.glslDatatype must be float, vec2, vec3, or vec4.")}const l=`attribute vec3 position3DHigh;\nattribute vec3 position3DLow;\nattribute float batchId;\n${i?"":`attribute ${a} ${t};\n`}varying ${a} ${c};\nvoid main()\n{\nvec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n${i?`${c} = czm_batchTable_${t}(batchId);\n`:`${c} = ${t};\n`}gl_Position = czm_modelViewProjectionRelativeToEye * p;\n}`,h=`varying ${a} ${c};\n${u}\nvoid main()\n{\ngl_FragColor = getColor();\n}`;this.material=void 0,this.translucent=(0,n.Z)(e.translucent,!1),this._vertexShaderSource=(0,n.Z)(e.vertexShaderSource,l),this._fragmentShaderSource=(0,n.Z)(e.fragmentShaderSource,h),this._renderState=s.Z.getDefaultRenderState(!1,!1,e.renderState),this._closed=(0,n.Z)(e.closed,!1),this._attributeName=t,this._glslDatatype=a}Object.defineProperties(a.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},attributeName:{get:function(){return this._attributeName}},glslDatatype:{get:function(){return this._glslDatatype}}}),a.prototype.getFragmentShaderSource=s.Z.prototype.getFragmentShaderSource,a.prototype.isTranslucent=s.Z.prototype.isTranslucent,a.prototype.getRenderState=s.Z.prototype.getRenderState;const c=a},40543:(e,t,i)=>{i.d(t,{Z:()=>D});var n=i(93517),r=i(6785),o=i(41631),s=i(88779),a=i(54485),c=i(90332),u=i(20176),l=i(30796),h=i(83211),d=i(78224),m=i(39109),f=i(74408),_=i(16587),p=i(84929),g=i(87823),Z=i(20291),y=i(73020),b=i(27401);function v(e){if(e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),!(0,a.Z)(e.camera))throw new u.Z("options.camera is required.");this._camera=e.camera,this._frustumSplits=e.frustumSplits,this._color=(0,s.Z)(e.color,r.Z.CYAN),this._updateOnChange=(0,s.Z)(e.updateOnChange,!0),this.show=(0,s.Z)(e.show,!0),this.id=e.id,this._id=void 0,this._outlinePrimitives=[],this._planesPrimitives=[]}const S=new n.Z,C=new m.Z,E=new Z.Z,x=new p.Z,T=new g.Z,w=new f.Z,O=new _.Z,L=new r.Z,P=[1,1e5];v.prototype.update=function(e){if(!this.show)return;const t=this._planesPrimitives,i=this._outlinePrimitives;let s,c;if(this._updateOnChange){for(c=t.length,s=0;s<c;++s)i[s]=i[s]&&i[s].destroy(),t[s]=t[s]&&t[s].destroy();t.length=0,i.length=0}if(0===t.length){const e=this._camera,c=e.frustum;let u,_;u=c instanceof p.Z?x:c instanceof g.Z?T:c instanceof f.Z?w:O,u=c.clone(u);let v=this._frustumSplits;!(0,a.Z)(v)||v.length<=1?(v=P,v[0]=this._camera.frustum.near,v[1]=this._camera.frustum.far,_=1):_=v.length-1;const D=e.positionWC,A=e.directionWC,I=e.upWC;let R=e.rightWC;R=n.Z.negate(R,S);const M=C;m.Z.setColumn(M,0,R,M),m.Z.setColumn(M,1,I,M),m.Z.setColumn(M,2,A,M);const N=Z.Z.fromRotationMatrix(M,E);for(t.length=i.length=_,s=0;s<_;++s)u.near=v[s],u.far=v[s+1],t[s]=new b.Z({geometryInstances:new d.Z({geometry:new l.Z({origin:D,orientation:N,frustum:u,_drawNearPlane:0===s}),attributes:{color:o.Z.fromColor(r.Z.fromAlpha(this._color,.1,L))},id:this.id,pickPrimitive:this}),appearance:new y.Z({translucent:!0,flat:!0}),asynchronous:!1}),i[s]=new b.Z({geometryInstances:new d.Z({geometry:new h.Z({origin:D,orientation:N,frustum:u,_drawNearPlane:0===s}),attributes:{color:o.Z.fromColor(this._color)},id:this.id,pickPrimitive:this}),appearance:new y.Z({translucent:!1,flat:!0}),asynchronous:!1})}for(c=t.length,s=0;s<c;++s)i[s].update(e),t[s].update(e)},v.prototype.isDestroyed=function(){return!1},v.prototype.destroy=function(){const e=this._planesPrimitives.length;for(let t=0;t<e;++t)this._outlinePrimitives[t]=this._outlinePrimitives[t]&&this._outlinePrimitives[t].destroy(),this._planesPrimitives[t]=this._planesPrimitives[t]&&this._planesPrimitives[t].destroy();return(0,c.Z)(this)};const D=v},22763:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(6785),r=i(71087),o=i(7048),s=i(17426),a=i(54485);function c(){this._cachedShowFrustumsShaders={}}const u=new n.Z;const l=new r.Z;c.prototype.executeDebugShowFrustumsCommand=function(e,t,i){const c=t.shaderProgram.id;let h=this._cachedShowFrustumsShaders[c];(0,a.Z)(h)||(h=function(e,t){const i=e.context,n=t,r=n.fragmentShaderSource.clone(),a=[];r.sources=r.sources.map((function(e){e=o.Z.replaceMain(e,"czm_Debug_main");const t=/gl_FragData\[(\d+)\]/g;let i;for(;null!==(i=t.exec(e));)-1===a.indexOf(i[1])&&a.push(i[1]);return e}));const c=a.length;let u,l="";if(l+="uniform vec3 debugShowCommandsColor;\n",l+="uniform vec3 debugShowFrustumsColor;\n",l+="void main() \n{ \n    czm_Debug_main(); \n",c>0)for(u=0;u<c;++u)l+=`    gl_FragData[${a[u]}].rgb *= debugShowCommandsColor;\n`,l+=`    gl_FragData[${a[u]}].rgb *= debugShowFrustumsColor;\n`;else l+="    gl_FragColor.rgb *= debugShowCommandsColor;\n",l+="    gl_FragColor.rgb *= debugShowFrustumsColor;\n";l+="}",r.sources.push(l);const h=function(e){const t={},i=e.vertexAttributes;for(const e in i)i.hasOwnProperty(e)&&(t[e]=i[e].index);return t}(n);return s.Z.fromCache({context:i,vertexShaderSource:n.vertexShaderSource,fragmentShaderSource:r,attributeLocations:h})}(e,t.shaderProgram),this._cachedShowFrustumsShaders[c]=h);const d=r.Z.shallowClone(t,l);d.shaderProgram=h,d.uniformMap=function(e,t){let i;return i=(0,a.Z)(t.uniformMap)?t.uniformMap:{},(0,a.Z)(i.debugShowCommandsColor)||(0,a.Z)(i.debugShowFrustumsColor)||(i.debugShowCommandsColor=function(){return e.debugShowCommands?((0,a.Z)(t._debugColor)||(t._debugColor=n.Z.fromRandom()),t._debugColor):n.Z.WHITE},i.debugShowFrustumsColor=function(){return e.debugShowFrustums?(u.red=1&t.debugOverlappingFrustums?1:0,u.green=2&t.debugOverlappingFrustums?1:0,u.blue=4&t.debugOverlappingFrustums?1:0,u.alpha=1,u):n.Z.WHITE}),i}(e,t),d.execute(e.context,i)};const h=c},42455:(e,t,i)=>{i.d(t,{Z:()=>_});var n=i(85162),r=i(93517),o=i(6785),s=i(88779),a=i(54485),c=i(90332),u=i(78224),l=i(71118),h=i(47328),d=i(69154),m=i(27401);function f(e){e=(0,s.Z)(e,s.Z.EMPTY_OBJECT),this.length=(0,s.Z)(e.length,1e7),this._length=void 0,this.width=(0,s.Z)(e.width,2),this._width=void 0,this.show=(0,s.Z)(e.show,!0),this.modelMatrix=l.Z.clone((0,s.Z)(e.modelMatrix,l.Z.IDENTITY)),this._modelMatrix=new l.Z,this.id=e.id,this._id=void 0,this._primitive=void 0}f.prototype.update=function(e){if(this.show){if(!(0,a.Z)(this._primitive)||!l.Z.equals(this._modelMatrix,this.modelMatrix)||this._length!==this.length||this._width!==this.width||this._id!==this.id){this._modelMatrix=l.Z.clone(this.modelMatrix,this._modelMatrix),this._length=this.length,this._width=this.width,this._id=this.id,(0,a.Z)(this._primitive)&&this._primitive.destroy(),0===this.modelMatrix[12]&&0===this.modelMatrix[13]&&0===this.modelMatrix[14]&&(this.modelMatrix[14]=.01);const e=new u.Z({geometry:new h.Z({positions:[r.Z.ZERO,r.Z.UNIT_X],width:this.width,vertexFormat:d.Z.VERTEX_FORMAT,colors:[o.Z.RED,o.Z.RED],arcType:n.Z.NONE}),modelMatrix:l.Z.multiplyByUniformScale(this.modelMatrix,this.length,new l.Z),id:this.id,pickPrimitive:this}),t=new u.Z({geometry:new h.Z({positions:[r.Z.ZERO,r.Z.UNIT_Y],width:this.width,vertexFormat:d.Z.VERTEX_FORMAT,colors:[o.Z.GREEN,o.Z.GREEN],arcType:n.Z.NONE}),modelMatrix:l.Z.multiplyByUniformScale(this.modelMatrix,this.length,new l.Z),id:this.id,pickPrimitive:this}),i=new u.Z({geometry:new h.Z({positions:[r.Z.ZERO,r.Z.UNIT_Z],width:this.width,vertexFormat:d.Z.VERTEX_FORMAT,colors:[o.Z.BLUE,o.Z.BLUE],arcType:n.Z.NONE}),modelMatrix:l.Z.multiplyByUniformScale(this.modelMatrix,this.length,new l.Z),id:this.id,pickPrimitive:this});this._primitive=new m.Z({geometryInstances:[e,t,i],appearance:new d.Z,asynchronous:!1})}this._primitive.update(e)}},f.prototype.isDestroyed=function(){return!1},f.prototype.destroy=function(){return this._primitive=this._primitive&&this._primitive.destroy(),(0,c.Z)(this)};const _=f},86672:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(95411);const r={NEVER:n.Z.NEVER,LESS:n.Z.LESS,EQUAL:n.Z.EQUAL,LESS_OR_EQUAL:n.Z.LEQUAL,GREATER:n.Z.GREATER,NOT_EQUAL:n.Z.NOTEQUAL,GREATER_OR_EQUAL:n.Z.GEQUAL,ALWAYS:n.Z.ALWAYS},o=Object.freeze(r)},1966:(e,t,i)=>{i.d(t,{Z:()=>D});var n=i(52351),r=i(93517),o=i(44990),s=i(54485),a=i(74834),c=i(97845),u=i(94061),l=i(74408),h=i(84473),d=i(36627),m=i(71087),f=i(1577),_=i(74064),p=i(17426),g=i(7048),Z=i(46801),y=i(3824),b=i(86043),v=i(18061),S=i(88779),C=i(99996);function E(e){this._rs=void 0,this._sp=void 0,this._va=void 0,this._command=void 0,this._mode=void 0,this._useLogDepth=!1,this._ellipsoidOffset=(0,S.Z)(e,0)}const x=a.Z.supportsTypedArrays()?new Float32Array(12):[],T=new r.Z,w=new r.Z,O=new r.Z,L=new r.Z,P=new r.Z;E.prototype.update=function(e){if(this._mode=e.mode,e.mode!==v.Z.SCENE3D)return;const t=e.context,i=e.mapProjection.ellipsoid.radii,a=new C.Z(i.x+this._ellipsoidOffset,i.y+this._ellipsoidOffset,i.z+this._ellipsoidOffset),S=e.useLogDepth;if((0,s.Z)(this._command)||(this._rs=_.Z.fromCache({cull:{enabled:!0},depthTest:{enabled:!0},colorMask:{red:!1,green:!1,blue:!1,alpha:!1}}),this._command=new m.Z({renderState:this._rs,boundingVolume:new n.Z(r.Z.ZERO,a.maximumRadius),pass:f.Z.OPAQUE,owner:this})),!(0,s.Z)(this._sp)||this._useLogDepth!==S){this._useLogDepth=S;const e=new g.Z({sources:[b.Z]}),i=new g.Z({sources:[y.Z]});if(S){const t="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";i.sources.push(t),i.defines.push("LOG_DEPTH"),e.defines.push("LOG_DEPTH")}this._sp=p.Z.replaceCache({shaderProgram:this._sp,context:t,vertexShaderSource:e,fragmentShaderSource:i,attributeLocations:{position:0}}),this._command.shaderProgram=this._sp}const E=function(e,t){const i=e.radii,n=t.camera;let o,s,a;if(n.frustum instanceof l.Z)o=r.Z.ZERO,s=n.rightWC,a=n.upWC;else{const t=n.positionWC,i=r.Z.multiplyComponents(e.oneOverRadii,t,T),c=r.Z.normalize(i,w),u=r.Z.normalize(r.Z.cross(r.Z.UNIT_Z,i,O),O),l=r.Z.normalize(r.Z.cross(c,u,L),L),h=r.Z.magnitude(i),d=Math.sqrt(h*h-1);o=r.Z.multiplyByScalar(c,1/h,T);const m=d/h;s=r.Z.multiplyByScalar(u,m,w),a=r.Z.multiplyByScalar(l,m,O)}const c=r.Z.add(o,a,P);r.Z.subtract(c,s,c),r.Z.multiplyComponents(i,c,c),r.Z.pack(c,x,0);const u=r.Z.subtract(o,a,P);r.Z.subtract(u,s,u),r.Z.multiplyComponents(i,u,u),r.Z.pack(u,x,3);const h=r.Z.add(o,a,P);r.Z.add(h,s,h),r.Z.multiplyComponents(i,h,h),r.Z.pack(h,x,6);const d=r.Z.subtract(o,a,P);return r.Z.add(d,s,d),r.Z.multiplyComponents(i,d,d),r.Z.pack(d,x,9),x}(a,e);if((0,s.Z)(this._va))this._va.getAttribute(0).vertexBuffer.copyFromArrayView(E);else{const e=new c.Z({attributes:{position:new u.Z({componentDatatype:o.Z.FLOAT,componentsPerAttribute:3,values:E})},indices:[0,1,2,2,1,3],primitiveType:h.Z.TRIANGLES});this._va=Z.Z.fromGeometry({context:t,geometry:e,attributeLocations:{position:0},bufferUsage:d.Z.DYNAMIC_DRAW}),this._command.vertexArray=this._va}},E.prototype.execute=function(e,t){this._mode===v.Z.SCENE3D&&this._command.execute(e,t)},E.prototype.isDestroyed=function(){return!1},E.prototype.destroy=function(){this._sp=this._sp&&this._sp.destroy(),this._va=this._va&&this._va.destroy()};const D=E},85337:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(54485),r=i(71087),o=i(74064),s=i(7048);function a(){}const c=/\bgl_FragDepthEXT\b/,u=/\bdiscard\b/;a.createDepthOnlyDerivedCommand=function(e,t,i,a){let l,h;return(0,n.Z)(a)||(a={}),(0,n.Z)(a.depthOnlyCommand)&&(l=a.depthOnlyCommand.shaderProgram,h=a.depthOnlyCommand.renderState),a.depthOnlyCommand=r.Z.shallowClone(t,a.depthOnlyCommand),(0,n.Z)(l)&&a.shaderProgramId===t.shaderProgram.id?(a.depthOnlyCommand.shaderProgram=l,a.depthOnlyCommand.renderState=h):(a.depthOnlyCommand.shaderProgram=function(e,t){let i=e.shaderCache.getDerivedShaderProgram(t,"depthOnly");if(!(0,n.Z)(i)){const n=t._attributeLocations;let r,o=t.fragmentShaderSource,a=!1;const l=o.sources;let h=l.length;for(r=0;r<h;++r)if(c.test(l[r])||u.test(l[r])){a=!0;break}let d=!1;const m=o.defines;for(h=m.length,r=0;r<h;++r)if("LOG_DEPTH"===m[r]){d=!0;break}let f;a||d?!a&&d&&(f="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\nvoid main() \n{ \n    gl_FragColor = vec4(1.0); \n    czm_writeLogDepth(); \n} \n",o=new s.Z({defines:["LOG_DEPTH"],sources:[f]})):(f="void main() \n{ \n    gl_FragColor = vec4(1.0); \n} \n",o=new s.Z({sources:[f]})),i=e.shaderCache.createDerivedShaderProgram(t,"depthOnly",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:n})}return i}(i,t.shaderProgram),a.depthOnlyCommand.renderState=function(e,t){const i=e._depthOnlyRenderStateCache;let r=i[t.id];if(!(0,n.Z)(r)){const e=o.Z.getState(t);e.depthMask=!0,e.colorMask={red:!1,green:!1,blue:!1,alpha:!1},r=o.Z.fromCache(e),i[t.id]=r}return r}(e,t.renderState),a.shaderProgramId=t.shaderProgram.id),a};const l=/\s+czm_writeLogDepth\(/,h=/\s+czm_vertexLogDepth\(/,d=/\s*#extension\s+GL_EXT_frag_depth\s*:\s*enable/;a.createLogDepthCommand=function(e,t,i){let o;return(0,n.Z)(i)||(i={}),(0,n.Z)(i.command)&&(o=i.command.shaderProgram),i.command=r.Z.shallowClone(e,i.command),(0,n.Z)(o)&&i.shaderProgramId===e.shaderProgram.id?i.command.shaderProgram=o:(i.command.shaderProgram=function(e,t){let i=e.shaderCache.getDerivedShaderProgram(t,"logDepth");if(!(0,n.Z)(i)){const r=t._attributeLocations,o=t.vertexShaderSource.clone(),a=t.fragmentShaderSource.clone();let c,u;o.defines=(0,n.Z)(o.defines)?o.defines.slice(0):[],o.defines.push("LOG_DEPTH"),a.defines=(0,n.Z)(a.defines)?a.defines.slice(0):[],a.defines.push("LOG_DEPTH");let m=!1,f=o.sources,_=f.length;for(c=0;c<_;++c)if(h.test(f[c])){m=!0;break}if(!m){for(c=0;c<_;++c)f[c]=s.Z.replaceMain(f[c],"czm_log_depth_main");u="\n\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_vertexLogDepth(); \n} \n",f.push(u)}for(f=a.sources,_=f.length,m=!1,c=0;c<_;++c)l.test(f[c])&&(m=!0);-1!==a.defines.indexOf("LOG_DEPTH_WRITE")&&(m=!0);let p=!0;for(c=0;c<_;++c)d.test(f[c])&&(p=!1);let g="";if(p&&(g+="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n"),!m){for(c=0;c<_;c++)f[c]=s.Z.replaceMain(f[c],"czm_log_depth_main");g+="\nvoid main() \n{ \n    czm_log_depth_main(); \n    czm_writeLogDepth(); \n} \n"}f.push(g),i=e.shaderCache.createDerivedShaderProgram(t,"logDepth",{vertexShaderSource:o,fragmentShaderSource:a,attributeLocations:r})}return i}(t,e.shaderProgram),i.shaderProgramId=e.shaderProgram.id),i},a.createPickDerivedCommand=function(e,t,i,a){let c,u;return(0,n.Z)(a)||(a={}),(0,n.Z)(a.pickCommand)&&(c=a.pickCommand.shaderProgram,u=a.pickCommand.renderState),a.pickCommand=r.Z.shallowClone(t,a.pickCommand),(0,n.Z)(c)&&a.shaderProgramId===t.shaderProgram.id?(a.pickCommand.shaderProgram=c,a.pickCommand.renderState=u):(a.pickCommand.shaderProgram=function(e,t,i){let r=e.shaderCache.getDerivedShaderProgram(t,"pick");if(!(0,n.Z)(r)){const n=t._attributeLocations;let o=t.fragmentShaderSource;const a=o.sources,c=a.length,u=`void main() \n{ \n    czm_non_pick_main(); \n    if (gl_FragColor.a == 0.0) { \n        discard; \n    } \n    gl_FragColor = ${i}; \n} \n`,l=new Array(c+1);for(let e=0;e<c;++e)l[e]=s.Z.replaceMain(a[e],"czm_non_pick_main");l[c]=u,o=new s.Z({sources:l,defines:o.defines}),r=e.shaderCache.createDerivedShaderProgram(t,"pick",{vertexShaderSource:t.vertexShaderSource,fragmentShaderSource:o,attributeLocations:n})}return r}(i,t.shaderProgram,t.pickId),a.pickCommand.renderState=function(e,t){const i=e.picking.pickRenderStateCache;let r=i[t.id];if(!(0,n.Z)(r)){const e=o.Z.getState(t);e.blending.enabled=!1,e.depthMask=!0,r=o.Z.fromCache(e),i[t.id]=r}return r}(e,t.renderState),a.shaderProgramId=t.shaderProgram.id),a},a.createHdrCommand=function(e,t,i){let o;return(0,n.Z)(i)||(i={}),(0,n.Z)(i.command)&&(o=i.command.shaderProgram),i.command=r.Z.shallowClone(e,i.command),(0,n.Z)(o)&&i.shaderProgramId===e.shaderProgram.id?i.command.shaderProgram=o:(i.command.shaderProgram=function(e,t){let i=e.shaderCache.getDerivedShaderProgram(t,"HDR");if(!(0,n.Z)(i)){const r=t._attributeLocations,o=t.vertexShaderSource.clone(),s=t.fragmentShaderSource.clone();o.defines=(0,n.Z)(o.defines)?o.defines.slice(0):[],o.defines.push("HDR"),s.defines=(0,n.Z)(s.defines)?s.defines.slice(0):[],s.defines.push("HDR"),i=e.shaderCache.createDerivedShaderProgram(t,"HDR",{vertexShaderSource:o,fragmentShaderSource:s,attributeLocations:r})}return i}(t,e.shaderProgram),i.shaderProgramId=e.shaderProgram.id),i};const m=a},66133:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(54485),r=i(90332),o=i(20176),s=i(22874),a=i(39109),c=i(20291);function u(e){if(!(0,n.Z)(e))throw new o.Z("scene is required.");this._scene=e,this._lastAlpha=void 0,this._lastBeta=void 0,this._lastGamma=void 0,this._alpha=void 0,this._beta=void 0,this._gamma=void 0;const t=this;function i(e){const i=e.alpha;if(!(0,n.Z)(i))return t._alpha=void 0,t._beta=void 0,void(t._gamma=void 0);t._alpha=s.Z.toRadians(i),t._beta=s.Z.toRadians(e.beta),t._gamma=s.Z.toRadians(e.gamma)}window.addEventListener("deviceorientation",i,!1),this._removeListener=function(){window.removeEventListener("deviceorientation",i,!1)}}const l=new c.Z,h=new c.Z,d=new a.Z;u.prototype.update=function(){if(!(0,n.Z)(this._alpha))return;(0,n.Z)(this._lastAlpha)||(this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma);const e=this._lastAlpha-this._alpha,t=this._lastBeta-this._beta,i=this._lastGamma-this._gamma;!function(e,t,i,n){const r=e.direction,o=e.right,s=e.up,u=c.Z.fromAxisAngle(r,i,h),m=c.Z.fromAxisAngle(o,n,l),f=c.Z.multiply(m,u,m),_=c.Z.fromAxisAngle(s,t,h);c.Z.multiply(_,f,f);const p=a.Z.fromQuaternion(f,d);a.Z.multiplyByVector(p,o,o),a.Z.multiplyByVector(p,s,s),a.Z.multiplyByVector(p,r,r)}(this._scene.camera,-e,t,i),this._lastAlpha=this._alpha,this._lastBeta=this._beta,this._lastGamma=this._gamma},u.prototype.isDestroyed=function(){return!1},u.prototype.destroy=function(){return this._removeListener(),(0,r.Z)(this)};const m=u},16081:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(93517),r=i(17497),o=i(6785),s=i(88779),a=i(20176);const c=function(e){if(r.Z.typeOf.object("options",e),r.Z.typeOf.object("options.direction",e.direction),n.Z.equals(e.direction,n.Z.ZERO))throw new a.Z("options.direction cannot be zero-length");this.direction=n.Z.clone(e.direction),this.color=o.Z.clone((0,s.Z)(e.color,o.Z.WHITE)),this.intensity=(0,s.Z)(e.intensity,1)}},99773:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(54485);function r(e){}let o;r.prototype.isReady=function(){return!0},r.prototype.shouldDiscardImage=function(e){return r.EMPTY_IMAGE===e},Object.defineProperties(r,{EMPTY_IMAGE:{get:function(){return(0,n.Z)(o)||(o=new Image,o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="),o}}});const s=r},9381:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(88779),r=i(54485),o=i(20176),s=i(20852),a=i(67197);function c(e){if(e=(0,n.Z)(e,n.Z.EMPTY_OBJECT),!(0,r.Z)(e.missingImageUrl))throw new o.Z("options.missingImageUrl is required.");if(!(0,r.Z)(e.pixelsToCheck))throw new o.Z("options.pixelsToCheck is required.");this._pixelsToCheck=e.pixelsToCheck,this._missingImagePixels=void 0,this._missingImageByteLength=void 0,this._isReady=!1;const t=a.Z.createIfNeeded(e.missingImageUrl),i=this;t.fetchImage({preferBlob:!0,preferImageBitmap:!0,flipY:!0}).then((function(t){(0,r.Z)(t.blob)&&(i._missingImageByteLength=t.blob.size);let n=(0,s.Z)(t);if(e.disableCheckIfAllPixelsAreTransparent){let i=!0;const r=t.width,o=e.pixelsToCheck;for(let e=0,t=o.length;i&&e<t;++e){const t=o[e];n[4*t.x+t.y*r+3]>0&&(i=!1)}i&&(n=void 0)}i._missingImagePixels=n,i._isReady=!0})).catch((function(){i._missingImagePixels=void 0,i._isReady=!0}))}c.prototype.isReady=function(){return this._isReady},c.prototype.shouldDiscardImage=function(e){if(!this._isReady)throw new o.Z("shouldDiscardImage must not be called before the discard policy is ready.");const t=this._pixelsToCheck,i=this._missingImagePixels;if(!(0,r.Z)(i))return!1;if((0,r.Z)(e.blob)&&e.blob.size!==this._missingImageByteLength)return!1;const n=(0,s.Z)(e),a=e.width;for(let e=0,r=t.length;e<r;++e){const r=t[e],o=4*r.x+r.y*a;for(let e=0;e<4;++e){const t=o+e;if(n[t]!==i[t])return!1}}return!0};const u=c},10613:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(35742),r=i(44990),o=i(54485),s=i(74834),a=i(7612),c=i(45813);function u(){}function l(e,t){const i=`runtime.${Object.keys(e.createdBufferViews).length}`,n=e.buffers,r=Object.keys(n).length;return n[r]=t,e.createdBufferViews[i]={buffer:r,byteOffset:0,byteLength:t.byteLength},i}function h(e,t,i){const n=t._loadResources,r=l(n,e);return n.vertexBuffersToCreate.enqueue(r),r}function d(e,t,i,n){if(!u._taskProcessorReady)return;const s=i.primitivesToDecode.peek();if(!(0,o.Z)(s))return;const a=e.scheduleTask(s,[s.array.buffer]);return(0,o.Z)(a)?(i.activeDecodingTasks++,i.primitivesToDecode.dequeue(),a.then((function(e){i.activeDecodingTasks--;const n=function(e,t,i){const n=e.typedArray,o=t._loadResources,s=l(o,n);return o.indexBuffersToCreate.enqueue({id:s,componentType:r.Z.fromTypedArray(n)}),{bufferViewId:s,numberOfIndices:e.numberOfIndices}}(e.indexArray,t),o={},a=e.attributeData;for(const e in a)if(a.hasOwnProperty(e)){const i=a[e],n=h(i.array,t),r=i.data;r.bufferView=n,o[e]=r}t._decodedData[`${s.mesh}.primitive.${s.primitive}`]={bufferView:n.bufferViewId,numberOfIndices:n.numberOfIndices,attributes:o}}))):void 0}u._maxDecodingConcurrency=Math.max(s.Z.hardwareConcurrency-1,1),u._decoderTaskProcessor=void 0,u._taskProcessorReady=!1,u._getDecoderTaskProcessor=function(){if(!(0,o.Z)(u._decoderTaskProcessor)){const e=new a.Z("decodeDraco",u._maxDecodingConcurrency);e.initWebAssemblyModule({modulePath:"ThirdParty/Workers/draco_decoder_nodejs.js",wasmBinaryFile:"ThirdParty/draco_decoder.wasm"}).then((function(){u._taskProcessorReady=!0})),u._decoderTaskProcessor=e}return u._decoderTaskProcessor},u.hasExtension=function(e){return(0,o.Z)(e.extensionsRequired.KHR_draco_mesh_compression)||(0,o.Z)(e.extensionsUsed.KHR_draco_mesh_compression)},u._decodedModelResourceCache=void 0,u.parse=function(e,t){if(!u.hasExtension(e))return;const i=e._loadResources,r=e.cacheKey;if((0,o.Z)(r)){(0,o.Z)(u._decodedModelResourceCache)||((0,o.Z)(t.cache.modelDecodingCache)||(t.cache.modelDecodingCache={}),u._decodedModelResourceCache=t.cache.modelDecodingCache);const e=u._decodedModelResourceCache[r];if((0,o.Z)(e))return e.count++,void(i.pendingDecodingCache=!0)}const s=e._dequantizeInShader,a=e.gltfInternal;c.Z.mesh(a,(function(e,t){c.Z.meshPrimitive(e,(function(e,r){if(!(0,o.Z)(e.extensions))return;const c=e.extensions.KHR_draco_mesh_compression;if(!(0,o.Z)(c))return;const u=a.bufferViews[c.bufferView],l=(0,n.Z)(a.buffers[u.buffer].extras._pipeline.source,u.byteOffset,u.byteOffset+u.byteLength);i.primitivesToDecode.enqueue({mesh:t,primitive:r,array:l,bufferView:u,compressedAttributes:c.attributes,dequantizeInShader:s})}))}))},u.decodeModel=function(e,t){if(!u.hasExtension(e))return Promise.resolve();const i=e._loadResources,n=e.cacheKey;if((0,o.Z)(n)&&(0,o.Z)(u._decodedModelResourceCache)){const t=u._decodedModelResourceCache[n];if((0,o.Z)(t)&&i.pendingDecodingCache)return Promise.resolve(t.ready).then((function(){e._decodedData=t.data,i.pendingDecodingCache=!1}));u._decodedModelResourceCache[n]={ready:!1,count:1,data:void 0}}if(0===i.primitivesToDecode.length)return Promise.resolve();const r=u._getDecoderTaskProcessor(),s=[];let a=d(r,e,i);for(;(0,o.Z)(a);)s.push(a),a=d(r,e,i);return Promise.all(s)},u.decodePointCloud=function(e){const t=u._getDecoderTaskProcessor();if(u._taskProcessorReady)return t.scheduleTask(e,[e.buffer.buffer])},u.decodeBufferView=function(e){const t=u._getDecoderTaskProcessor();if(u._taskProcessorReady)return t.scheduleTask(e,[e.array.buffer])},u.cacheDataForModel=function(e){const t=e.cacheKey;if((0,o.Z)(t)&&(0,o.Z)(u._decodedModelResourceCache)){const i=u._decodedModelResourceCache[t];(0,o.Z)(i)&&(i.ready=!0,i.data=e._decodedData)}},u.destroyCachedDataForModel=function(e){const t=e.cacheKey;if((0,o.Z)(t)&&(0,o.Z)(u._decodedModelResourceCache)){const e=u._decodedModelResourceCache[t];(0,o.Z)(e)&&0==--e.count&&delete u._decodedModelResourceCache[t]}};const m=u},35270:(e,t,i)=>{i.d(t,{Z:()=>L});var n=i(52351),r=i(33365),o=i(93517),s=i(51138),a=i(88779),c=i(54485),u=i(90332),l=i(20176),h=i(71118),d=i(25225),m=i(36627),f=i(71087),_=i(1577),p=i(74064),g=i(17426),Z=i(7048),y=i(46801),b=i(74835),v=i(39547),S=i(995),C=i(28075),E=i(7063),x=i(18061);const T={position:0};function w(e){e=(0,a.Z)(e,a.Z.EMPTY_OBJECT),this.center=o.Z.clone((0,a.Z)(e.center,o.Z.ZERO)),this._center=new o.Z,this.radii=o.Z.clone(e.radii),this._radii=new o.Z,this._oneOverEllipsoidRadiiSquared=new o.Z,this._boundingSphere=new n.Z,this.modelMatrix=h.Z.clone((0,a.Z)(e.modelMatrix,h.Z.IDENTITY)),this._modelMatrix=new h.Z,this._computedModelMatrix=new h.Z,this.show=(0,a.Z)(e.show,!0),this.material=(0,a.Z)(e.material,E.Z.fromType(E.Z.ColorType)),this._material=void 0,this._translucent=void 0,this.id=e.id,this._id=void 0,this.debugShowBoundingVolume=(0,a.Z)(e.debugShowBoundingVolume,!1),this.onlySunLighting=(0,a.Z)(e.onlySunLighting,!1),this._onlySunLighting=!1,this._depthTestEnabled=(0,a.Z)(e.depthTestEnabled,!0),this._useLogDepth=!1,this._sp=void 0,this._rs=void 0,this._va=void 0,this._pickSP=void 0,this._pickId=void 0,this._colorCommand=new f.Z({owner:(0,a.Z)(e._owner,this)}),this._pickCommand=new f.Z({owner:(0,a.Z)(e._owner,this),pickOnly:!0});const t=this;this._uniforms={u_radii:function(){return t.radii},u_oneOverEllipsoidRadiiSquared:function(){return t._oneOverEllipsoidRadiiSquared}},this._pickUniforms={czm_pickColor:function(){return t._pickId.color}}}const O="#ifdef GL_EXT_frag_depth \n#extension GL_EXT_frag_depth : enable \n#endif \n\n";w.prototype.update=function(e){if(!this.show||e.mode!==x.Z.SCENE3D||!(0,c.Z)(this.center)||!(0,c.Z)(this.radii))return;if(!(0,c.Z)(this.material))throw new l.Z("this.material must be defined.");const t=e.context,i=this.material.isTranslucent(),a=this._translucent!==i;(0,c.Z)(this._rs)&&!a||(this._translucent=i,this._rs=p.Z.fromCache({cull:{enabled:!0,face:C.Z.FRONT},depthTest:{enabled:this._depthTestEnabled},depthMask:!i&&t.fragmentDepth,blending:i?S.Z.ALPHA_BLEND:void 0})),(0,c.Z)(this._va)||(this._va=function(e){let t=e.cache.ellipsoidPrimitive_vertexArray;if((0,c.Z)(t))return t;const i=r.Z.createGeometry(r.Z.fromDimensions({dimensions:new o.Z(2,2,2),vertexFormat:d.Z.POSITION_ONLY}));return t=y.Z.fromGeometry({context:e,geometry:i,attributeLocations:T,bufferUsage:m.Z.STATIC_DRAW,interleave:!0}),e.cache.ellipsoidPrimitive_vertexArray=t,t}(t));let u=!1;const f=this.radii;if(!o.Z.equals(this._radii,f)){o.Z.clone(f,this._radii);const e=this._oneOverEllipsoidRadiiSquared;e.x=1/(f.x*f.x),e.y=1/(f.y*f.y),e.z=1/(f.z*f.z),u=!0}h.Z.equals(this.modelMatrix,this._modelMatrix)&&o.Z.equals(this.center,this._center)||(h.Z.clone(this.modelMatrix,this._modelMatrix),o.Z.clone(this.center,this._center),h.Z.multiplyByTranslation(this.modelMatrix,this.center,this._computedModelMatrix),u=!0),u&&(o.Z.clone(o.Z.ZERO,this._boundingSphere.center),this._boundingSphere.radius=o.Z.maximumComponent(f),n.Z.transform(this._boundingSphere,this._computedModelMatrix,this._boundingSphere));const E=this._material!==this.material;this._material=this.material,this._material.update(t);const w=this.onlySunLighting!==this._onlySunLighting;this._onlySunLighting=this.onlySunLighting;const L=e.useLogDepth,P=this._useLogDepth!==L;this._useLogDepth=L;const D=this._colorCommand;let A,I;(E||w||a||P)&&(A=new Z.Z({sources:[v.Z]}),I=new Z.Z({sources:[this.material.shaderSource,b.Z]}),this.onlySunLighting&&I.defines.push("ONLY_SUN_LIGHTING"),!i&&t.fragmentDepth&&I.defines.push("WRITE_DEPTH"),this._useLogDepth&&(A.defines.push("LOG_DEPTH"),I.defines.push("LOG_DEPTH"),I.sources.push(O)),this._sp=g.Z.replaceCache({context:t,shaderProgram:this._sp,vertexShaderSource:A,fragmentShaderSource:I,attributeLocations:T}),D.vertexArray=this._va,D.renderState=this._rs,D.shaderProgram=this._sp,D.uniformMap=(0,s.Z)(this._uniforms,this.material._uniforms),D.executeInClosestFrustum=i);const R=e.commandList,M=e.passes;if(M.render&&(D.boundingVolume=this._boundingSphere,D.debugShowBoundingVolume=this.debugShowBoundingVolume,D.modelMatrix=this._computedModelMatrix,D.pass=i?_.Z.TRANSLUCENT:_.Z.OPAQUE,R.push(D)),M.pick){const e=this._pickCommand;(0,c.Z)(this._pickId)&&this._id===this.id||(this._id=this.id,this._pickId=this._pickId&&this._pickId.destroy(),this._pickId=t.createPickId({primitive:this,id:this.id})),(E||w||!(0,c.Z)(this._pickSP)||P)&&(A=new Z.Z({sources:[v.Z]}),I=new Z.Z({sources:[this.material.shaderSource,b.Z],pickColorQualifier:"uniform"}),this.onlySunLighting&&I.defines.push("ONLY_SUN_LIGHTING"),!i&&t.fragmentDepth&&I.defines.push("WRITE_DEPTH"),this._useLogDepth&&(A.defines.push("LOG_DEPTH"),I.defines.push("LOG_DEPTH"),I.sources.push(O)),this._pickSP=g.Z.replaceCache({context:t,shaderProgram:this._pickSP,vertexShaderSource:A,fragmentShaderSource:I,attributeLocations:T}),e.vertexArray=this._va,e.renderState=this._rs,e.shaderProgram=this._pickSP,e.uniformMap=(0,s.Z)((0,s.Z)(this._uniforms,this._pickUniforms),this.material._uniforms),e.executeInClosestFrustum=i),e.boundingVolume=this._boundingSphere,e.modelMatrix=this._computedModelMatrix,e.pass=i?_.Z.TRANSLUCENT:_.Z.OPAQUE,R.push(e)}},w.prototype.isDestroyed=function(){return!1},w.prototype.destroy=function(){return this._sp=this._sp&&this._sp.destroy(),this._pickSP=this._pickSP&&this._pickSP.destroy(),this._pickId=this._pickId&&this._pickId.destroy(),(0,u.Z)(this)};const L=w},15726:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(88779),r=i(54485),o=i(25225),s=i(28232),a=i(20134),c=i(58466),u=i(7063);function l(e){e=(0,n.Z)(e,n.Z.EMPTY_OBJECT);const t=(0,n.Z)(e.translucent,!0),i=(0,n.Z)(e.aboveGround,!1);this.material=(0,r.Z)(e.material)?e.material:u.Z.fromType(u.Z.ColorType),this.translucent=(0,n.Z)(e.translucent,!0),this._vertexShaderSource=(0,n.Z)(e.vertexShaderSource,a.Z),this._fragmentShaderSource=(0,n.Z)(e.fragmentShaderSource,s.Z),this._renderState=c.Z.getDefaultRenderState(t,!i,e.renderState),this._closed=!1,this._flat=(0,n.Z)(e.flat,!1),this._faceForward=(0,n.Z)(e.faceForward,i),this._aboveGround=i}Object.defineProperties(l.prototype,{vertexShaderSource:{get:function(){return this._vertexShaderSource}},fragmentShaderSource:{get:function(){return this._fragmentShaderSource}},renderState:{get:function(){return this._renderState}},closed:{get:function(){return this._closed}},vertexFormat:{get:function(){return l.VERTEX_FORMAT}},flat:{get:function(){return this._flat}},faceForward:{get:function(){return this._faceForward}},aboveGround:{get:function(){return this._aboveGround}}}),l.VERTEX_FORMAT=o.Z.POSITION_AND_ST,l.prototype.getFragmentShaderSource=c.Z.prototype.getFragmentShaderSource,l.prototype.isTranslucent=c.Z.prototype.isTranslucent,l.prototype.getRenderState=c.Z.prototype.getRenderState;const h=l},35929:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(90332),r=i(20176);function o(e,t){this._tileset=e,this._tile=t,this.featurePropertiesDirty=!1}Object.defineProperties(o.prototype,{featuresLength:{get:function(){return 0}},pointsLength:{get:function(){return 0}},trianglesLength:{get:function(){return 0}},geometryByteLength:{get:function(){return 0}},texturesByteLength:{get:function(){return 0}},batchTableByteLength:{get:function(){return 0}},innerContents:{get:function(){}},readyPromise:{get:function(){}},tileset:{get:function(){return this._tileset}},tile:{get:function(){return this._tile}},url:{get:function(){}},metadata:{get:function(){},set:function(e){throw new r.Z("Empty3DTileContent cannot have content metadata")}},batchTable:{get:function(){}},group:{get:function(){},set:function(e){throw new r.Z("Empty3DTileContent cannot have group metadata")}}}),o.prototype.hasProperty=function(e,t){return!1},o.prototype.getFeature=function(e){},o.prototype.applyDebugSettings=function(e,t){},o.prototype.applyStyle=function(e){},o.prototype.update=function(e,t){},o.prototype.isDestroyed=function(){return!1},o.prototype.destroy=function(){return(0,n.Z)(this)};const s=o},65155:(e,t,i)=>{i.d(t,{Z:()=>$});var n=i(59015),r=i(93517),o=i(90868),s=i(17497),a=i(6785),c=i(54485),u=i(20176),l=i(22874),h=i(21514),d=i(37722),m=i(54851);function f(e,t){let i;s.Z.typeOf.string("expression",e),this._expression=e,e=function(e,t){if(!(0,c.Z)(t))return e;for(const i in t)if(t.hasOwnProperty(i)){const n=new RegExp(`\\$\\{${i}\\}`,"g"),r=`(${t[i]})`;(0,c.Z)(r)&&(e=e.replace(n,r))}return e}(e,t),e=function(e){let t=e,i="",n=t.indexOf("${");for(;n>=0;){const e=t.indexOf("'"),r=t.indexOf('"');let o;if(e>=0&&e<n)o=t.indexOf("'",e+1),i+=t.substr(0,o+1),t=t.substr(o+1),n=t.indexOf("${");else if(r>=0&&r<n)o=t.indexOf('"',r+1),i+=t.substr(0,o+1),t=t.substr(o+1),n=t.indexOf("${");else{i+=t.substr(0,n);const e=t.indexOf("}");if(e<0)throw new h.Z("Unmatched {.");i+=`czm_${t.substr(n+2,e-(n+2))}`,t=t.substr(e+1),n=t.indexOf("${")}}return i+=t,i}(function(e){return e.replace(y,"@#%")}(e)),d.Z.addBinaryOp("=~",0),d.Z.addBinaryOp("!~",0);try{i=(0,d.Z)(e)}catch(e){throw new h.Z(e)}this._runtimeAst=I(this,i)}Object.defineProperties(f.prototype,{expression:{get:function(){return this._expression}}});const _={arrayIndex:0,arrayArray:[[]],cartesian2Index:0,cartesian3Index:0,cartesian4Index:0,cartesian2Array:[new n.Z],cartesian3Array:[new r.Z],cartesian4Array:[new o.Z],reset:function(){this.arrayIndex=0,this.cartesian2Index=0,this.cartesian3Index=0,this.cartesian4Index=0},getArray:function(){this.arrayIndex>=this.arrayArray.length&&this.arrayArray.push([]);const e=this.arrayArray[this.arrayIndex++];return e.length=0,e},getCartesian2:function(){return this.cartesian2Index>=this.cartesian2Array.length&&this.cartesian2Array.push(new n.Z),this.cartesian2Array[this.cartesian2Index++]},getCartesian3:function(){return this.cartesian3Index>=this.cartesian3Array.length&&this.cartesian3Array.push(new r.Z),this.cartesian3Array[this.cartesian3Index++]},getCartesian4:function(){return this.cartesian4Index>=this.cartesian4Array.length&&this.cartesian4Array.push(new o.Z),this.cartesian4Array[this.cartesian4Index++]}};f.prototype.evaluate=function(e,t){_.reset();const i=this._runtimeAst.evaluate(e);return t instanceof a.Z&&i instanceof o.Z?a.Z.fromCartesian4(i,t):i instanceof n.Z||i instanceof r.Z||i instanceof o.Z?i.clone(t):i},f.prototype.evaluateColor=function(e,t){_.reset();const i=this._runtimeAst.evaluate(e);return a.Z.fromCartesian4(i,t)},f.prototype.getShaderFunction=function(e,t,i,n){let r=this.getShaderExpression(t,i);return r=`${n} ${e}\n{\n    return ${r};\n}\n`,r},f.prototype.getShaderExpression=function(e,t){return this._runtimeAst.getShaderExpression(e,t)},f.prototype.getVariables=function(){let e=[];return this._runtimeAst.getVariables(e),e=e.filter((function(e,t,i){return i.indexOf(e)===t})),e};const p=["!","-","+"],g=["+","-","*","/","%","===","!==",">",">=","<","<=","&&","||","!~","=~"],Z=/\${(.*?)}/g,y=/\\/g,b=/@#%/g,v=new a.Z,S={abs:x(Math.abs),sqrt:x(Math.sqrt),cos:x(Math.cos),sin:x(Math.sin),tan:x(Math.tan),acos:x(Math.acos),asin:x(Math.asin),atan:x(Math.atan),radians:x(l.Z.toRadians),degrees:x(l.Z.toDegrees),sign:x(l.Z.sign),floor:x(Math.floor),ceil:x(Math.ceil),round:x(Math.round),exp:x(Math.exp),exp2:x((function(e){return Math.pow(2,e)})),log:x(Math.log),log2:x((function(e){return l.Z.log2(e)})),fract:x((function(e){return e-Math.floor(e)})),length:function(e,t){if("number"==typeof t)return Math.abs(t);if(t instanceof n.Z)return n.Z.magnitude(t);if(t instanceof r.Z)return r.Z.magnitude(t);if(t instanceof o.Z)return o.Z.magnitude(t);throw new h.Z(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)},normalize:function(e,t){if("number"==typeof t)return 1;if(t instanceof n.Z)return n.Z.normalize(t,_.getCartesian2());if(t instanceof r.Z)return r.Z.normalize(t,_.getCartesian3());if(t instanceof o.Z)return o.Z.normalize(t,_.getCartesian4());throw new h.Z(`Function "${e}" requires a vector or number argument. Argument is ${t}.`)}},C={atan2:T(Math.atan2,!1),pow:T(Math.pow,!1),min:T(Math.min,!0),max:T(Math.max,!0),distance:function(e,t,i){if("number"==typeof t&&"number"==typeof i)return Math.abs(t-i);if(t instanceof n.Z&&i instanceof n.Z)return n.Z.distance(t,i);if(t instanceof r.Z&&i instanceof r.Z)return r.Z.distance(t,i);if(t instanceof o.Z&&i instanceof o.Z)return o.Z.distance(t,i);throw new h.Z(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${i}.`)},dot:function(e,t,i){if("number"==typeof t&&"number"==typeof i)return t*i;if(t instanceof n.Z&&i instanceof n.Z)return n.Z.dot(t,i);if(t instanceof r.Z&&i instanceof r.Z)return r.Z.dot(t,i);if(t instanceof o.Z&&i instanceof o.Z)return o.Z.dot(t,i);throw new h.Z(`Function "${e}" requires vector or number arguments of matching types. Arguments are ${t} and ${i}.`)},cross:function(e,t,i){if(t instanceof r.Z&&i instanceof r.Z)return r.Z.cross(t,i,_.getCartesian3());throw new h.Z(`Function "${e}" requires vec3 arguments. Arguments are ${t} and ${i}.`)}},E={clamp:w(l.Z.clamp,!0),mix:w(l.Z.lerp,!0)};function x(e){return function(t,i){if("number"==typeof i)return e(i);if(i instanceof n.Z)return n.Z.fromElements(e(i.x),e(i.y),_.getCartesian2());if(i instanceof r.Z)return r.Z.fromElements(e(i.x),e(i.y),e(i.z),_.getCartesian3());if(i instanceof o.Z)return o.Z.fromElements(e(i.x),e(i.y),e(i.z),e(i.w),_.getCartesian4());throw new h.Z(`Function "${t}" requires a vector or number argument. Argument is ${i}.`)}}function T(e,t){return function(i,s,a){if(t&&"number"==typeof a){if("number"==typeof s)return e(s,a);if(s instanceof n.Z)return n.Z.fromElements(e(s.x,a),e(s.y,a),_.getCartesian2());if(s instanceof r.Z)return r.Z.fromElements(e(s.x,a),e(s.y,a),e(s.z,a),_.getCartesian3());if(s instanceof o.Z)return o.Z.fromElements(e(s.x,a),e(s.y,a),e(s.z,a),e(s.w,a),_.getCartesian4())}if("number"==typeof s&&"number"==typeof a)return e(s,a);if(s instanceof n.Z&&a instanceof n.Z)return n.Z.fromElements(e(s.x,a.x),e(s.y,a.y),_.getCartesian2());if(s instanceof r.Z&&a instanceof r.Z)return r.Z.fromElements(e(s.x,a.x),e(s.y,a.y),e(s.z,a.z),_.getCartesian3());if(s instanceof o.Z&&a instanceof o.Z)return o.Z.fromElements(e(s.x,a.x),e(s.y,a.y),e(s.z,a.z),e(s.w,a.w),_.getCartesian4());throw new h.Z(`Function "${i}" requires vector or number arguments of matching types. Arguments are ${s} and ${a}.`)}}function w(e,t){return function(i,s,a,c){if(t&&"number"==typeof c){if("number"==typeof s&&"number"==typeof a)return e(s,a,c);if(s instanceof n.Z&&a instanceof n.Z)return n.Z.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),_.getCartesian2());if(s instanceof r.Z&&a instanceof r.Z)return r.Z.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),e(s.z,a.z,c),_.getCartesian3());if(s instanceof o.Z&&a instanceof o.Z)return o.Z.fromElements(e(s.x,a.x,c),e(s.y,a.y,c),e(s.z,a.z,c),e(s.w,a.w,c),_.getCartesian4())}if("number"==typeof s&&"number"==typeof a&&"number"==typeof c)return e(s,a,c);if(s instanceof n.Z&&a instanceof n.Z&&c instanceof n.Z)return n.Z.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),_.getCartesian2());if(s instanceof r.Z&&a instanceof r.Z&&c instanceof r.Z)return r.Z.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),e(s.z,a.z,c.z),_.getCartesian3());if(s instanceof o.Z&&a instanceof o.Z&&c instanceof o.Z)return o.Z.fromElements(e(s.x,a.x,c.x),e(s.y,a.y,c.y),e(s.z,a.z,c.z),e(s.w,a.w,c.w),_.getCartesian4());throw new h.Z(`Function "${i}" requires vector or number arguments of matching types. Arguments are ${s}, ${a}, and ${c}.`)}}function O(e,t,i,n,r){var o;this._type=e,this._value=t,this._left=i,this._right=n,this._test=r,this.evaluate=void 0,(o=this)._type===m.Z.CONDITIONAL?o.evaluate=o._evaluateConditional:o._type===m.Z.FUNCTION_CALL?"test"===o._value?o.evaluate=o._evaluateRegExpTest:"exec"===o._value?o.evaluate=o._evaluateRegExpExec:"toString"===o._value&&(o.evaluate=o._evaluateToString):o._type===m.Z.UNARY?"!"===o._value?o.evaluate=o._evaluateNot:"-"===o._value?o.evaluate=o._evaluateNegative:"+"===o._value?o.evaluate=o._evaluatePositive:"isNaN"===o._value?o.evaluate=o._evaluateNaN:"isFinite"===o._value?o.evaluate=o._evaluateIsFinite:"isExactClass"===o._value?o.evaluate=o._evaluateIsExactClass:"isClass"===o._value?o.evaluate=o._evaluateIsClass:"getExactClassName"===o._value?o.evaluate=o._evaluateGetExactClassName:"Boolean"===o._value?o.evaluate=o._evaluateBooleanConversion:"Number"===o._value?o.evaluate=o._evaluateNumberConversion:"String"===o._value?o.evaluate=o._evaluateStringConversion:(0,c.Z)(S[o._value])&&(o.evaluate=function(e){const t=S[e];return function(i){const n=this._left.evaluate(i);return t(e,n)}}(o._value)):o._type===m.Z.BINARY?"+"===o._value?o.evaluate=o._evaluatePlus:"-"===o._value?o.evaluate=o._evaluateMinus:"*"===o._value?o.evaluate=o._evaluateTimes:"/"===o._value?o.evaluate=o._evaluateDivide:"%"===o._value?o.evaluate=o._evaluateMod:"==="===o._value?o.evaluate=o._evaluateEqualsStrict:"!=="===o._value?o.evaluate=o._evaluateNotEqualsStrict:"<"===o._value?o.evaluate=o._evaluateLessThan:"<="===o._value?o.evaluate=o._evaluateLessThanOrEquals:">"===o._value?o.evaluate=o._evaluateGreaterThan:">="===o._value?o.evaluate=o._evaluateGreaterThanOrEquals:"&&"===o._value?o.evaluate=o._evaluateAnd:"||"===o._value?o.evaluate=o._evaluateOr:"=~"===o._value?o.evaluate=o._evaluateRegExpMatch:"!~"===o._value?o.evaluate=o._evaluateRegExpNotMatch:(0,c.Z)(C[o._value])&&(o.evaluate=function(e){const t=C[e];return function(i){const n=this._left.evaluate(i),r=this._right.evaluate(i);return t(e,n,r)}}(o._value)):o._type===m.Z.TERNARY?o.evaluate=function(e){const t=E[e];return function(i){const n=this._left.evaluate(i),r=this._right.evaluate(i),o=this._test.evaluate(i);return t(e,n,r,o)}}(o._value):o._type===m.Z.MEMBER?"brackets"===o._value?o.evaluate=o._evaluateMemberBrackets:o.evaluate=o._evaluateMemberDot:o._type===m.Z.ARRAY?o.evaluate=o._evaluateArray:o._type===m.Z.VARIABLE?o.evaluate=o._evaluateVariable:o._type===m.Z.VARIABLE_IN_STRING?o.evaluate=o._evaluateVariableString:o._type===m.Z.LITERAL_COLOR?o.evaluate=o._evaluateLiteralColor:o._type===m.Z.LITERAL_VECTOR?o.evaluate=o._evaluateLiteralVector:o._type===m.Z.LITERAL_STRING?o.evaluate=o._evaluateLiteralString:o._type===m.Z.REGEX?o.evaluate=o._evaluateRegExp:o._type===m.Z.BUILTIN_VARIABLE?"tiles3d_tileset_time"===o._value&&(o.evaluate=R):o.evaluate=o._evaluateLiteral}function L(e){return e.replace(b,"\\")}function P(e,t){const i=t.arguments,n=i.length;let r,o,s,a;if("MemberExpression"===t.callee.type){r=t.callee.property.name;const c=t.callee.object;if("test"===r||"exec"===r){if("regExp"!==c.callee.name)throw new h.Z(`${r} is not a function.`);return 0===n?"test"===r?new O(m.Z.LITERAL_BOOLEAN,!1):new O(m.Z.LITERAL_NULL,null):(s=I(e,c),a=I(e,i[0]),new O(m.Z.FUNCTION_CALL,r,s,a))}if("toString"===r)return o=I(e,c),new O(m.Z.FUNCTION_CALL,r,o);throw new h.Z(`Unexpected function call "${r}".`)}if(r=t.callee.name,"color"===r){if(0===n)return new O(m.Z.LITERAL_COLOR,r);if(o=I(e,i[0]),(0,c.Z)(i[1])){const t=I(e,i[1]);return new O(m.Z.LITERAL_COLOR,r,[o,t])}return new O(m.Z.LITERAL_COLOR,r,[o])}if("rgb"===r||"hsl"===r){if(n<3)throw new h.Z(`${r} requires three arguments.`);return o=[I(e,i[0]),I(e,i[1]),I(e,i[2])],new O(m.Z.LITERAL_COLOR,r,o)}if("rgba"===r||"hsla"===r){if(n<4)throw new h.Z(`${r} requires four arguments.`);return o=[I(e,i[0]),I(e,i[1]),I(e,i[2]),I(e,i[3])],new O(m.Z.LITERAL_COLOR,r,o)}if("vec2"===r||"vec3"===r||"vec4"===r){o=new Array(n);for(let t=0;t<n;++t)o[t]=I(e,i[t]);return new O(m.Z.LITERAL_VECTOR,r,o)}if("isNaN"===r||"isFinite"===r)return 0===n?new O(m.Z.LITERAL_BOOLEAN,"isNaN"===r):(o=I(e,i[0]),new O(m.Z.UNARY,r,o));if("isExactClass"===r||"isClass"===r){if(n<1||n>1)throw new h.Z(`${r} requires exactly one argument.`);return o=I(e,i[0]),new O(m.Z.UNARY,r,o)}if("getExactClassName"===r){if(n>0)throw new h.Z(`${r} does not take any argument.`);return new O(m.Z.UNARY,r)}if((0,c.Z)(S[r])){if(1!==n)throw new h.Z(`${r} requires exactly one argument.`);return o=I(e,i[0]),new O(m.Z.UNARY,r,o)}if((0,c.Z)(C[r])){if(2!==n)throw new h.Z(`${r} requires exactly two arguments.`);return s=I(e,i[0]),a=I(e,i[1]),new O(m.Z.BINARY,r,s,a)}if((0,c.Z)(E[r])){if(3!==n)throw new h.Z(`${r} requires exactly three arguments.`);s=I(e,i[0]),a=I(e,i[1]);const t=I(e,i[2]);return new O(m.Z.TERNARY,r,s,a,t)}if("Boolean"===r)return 0===n?new O(m.Z.LITERAL_BOOLEAN,!1):(o=I(e,i[0]),new O(m.Z.UNARY,r,o));if("Number"===r)return 0===n?new O(m.Z.LITERAL_NUMBER,0):(o=I(e,i[0]),new O(m.Z.UNARY,r,o));if("String"===r)return 0===n?new O(m.Z.LITERAL_STRING,""):(o=I(e,i[0]),new O(m.Z.UNARY,r,o));if("regExp"===r)return function(e,t){const i=t.arguments;if(0===i.length)return new O(m.Z.LITERAL_REGEX,new RegExp);const n=I(e,i[0]);let r;if(i.length>1){const t=I(e,i[1]);if(A(n)&&A(t)){try{r=new RegExp(L(String(n._value)),t._value)}catch(e){throw new h.Z(e)}return new O(m.Z.LITERAL_REGEX,r)}return new O(m.Z.REGEX,n,t)}if(A(n)){try{r=new RegExp(L(String(n._value)))}catch(e){throw new h.Z(e)}return new O(m.Z.LITERAL_REGEX,r)}return new O(m.Z.REGEX,n)}(e,t);throw new h.Z(`Unexpected function call "${r}".`)}function D(e,t){if("Math"===t.object.name)return function(e){const t=e.property.name;return"PI"===t?new O(m.Z.LITERAL_NUMBER,Math.PI):"E"===t?new O(m.Z.LITERAL_NUMBER,Math.E):void 0}(t);if("Number"===t.object.name)return function(e){if("POSITIVE_INFINITY"===e.property.name)return new O(m.Z.LITERAL_NUMBER,Number.POSITIVE_INFINITY)}(t);let i;const n=I(e,t.object);return t.computed?(i=I(e,t.property),new O(m.Z.MEMBER,"brackets",n,i)):(i=new O(m.Z.LITERAL_STRING,t.property.name),new O(m.Z.MEMBER,"dot",n,i))}function A(e){return e._type>=m.Z.LITERAL_NULL}function I(e,t){let i,n,r,o;if("Literal"===t.type)i=function(e){const t=typeof e.value;return null===e.value?new O(m.Z.LITERAL_NULL,null):"boolean"===t?new O(m.Z.LITERAL_BOOLEAN,e.value):"number"===t?new O(m.Z.LITERAL_NUMBER,e.value):"string"===t?e.value.indexOf("${")>=0?new O(m.Z.VARIABLE_IN_STRING,e.value):new O(m.Z.LITERAL_STRING,L(e.value)):void 0}(t);else if("CallExpression"===t.type)i=P(e,t);else if("Identifier"===t.type)i=function(e){if("czm_"===e.name.substr(0,4)){const t=e.name.substr(4);return"tiles3d_"===t.substr(0,8)?new O(m.Z.BUILTIN_VARIABLE,t):new O(m.Z.VARIABLE,t)}if("NaN"===e.name)return new O(m.Z.LITERAL_NUMBER,NaN);if("Infinity"===e.name)return new O(m.Z.LITERAL_NUMBER,1/0);if("undefined"===e.name)return new O(m.Z.LITERAL_UNDEFINED,void 0);throw new h.Z(`${e.name} is not defined.`)}(t);else if("UnaryExpression"===t.type){n=t.operator;const r=I(e,t.argument);if(!(p.indexOf(n)>-1))throw new h.Z(`Unexpected operator "${n}".`);i=new O(m.Z.UNARY,n,r)}else if("BinaryExpression"===t.type){if(n=t.operator,r=I(e,t.left),o=I(e,t.right),!(g.indexOf(n)>-1))throw new h.Z(`Unexpected operator "${n}".`);i=new O(m.Z.BINARY,n,r,o)}else if("LogicalExpression"===t.type)n=t.operator,r=I(e,t.left),o=I(e,t.right),g.indexOf(n)>-1&&(i=new O(m.Z.BINARY,n,r,o));else if("ConditionalExpression"===t.type){const n=I(e,t.test);r=I(e,t.consequent),o=I(e,t.alternate),i=new O(m.Z.CONDITIONAL,"?",r,o,n)}else if("MemberExpression"===t.type)i=D(e,t);else{if("ArrayExpression"!==t.type)throw"Compound"===t.type?new h.Z("Provide exactly one expression."):new h.Z("Cannot parse expression.");{const n=[];for(let i=0;i<t.elements.length;i++)n[i]=I(e,t.elements[i]);i=new O(m.Z.ARRAY,n)}}return i}function R(e){return(0,c.Z)(e)?e.content.tileset.timeSinceLoad:0}function M(e,t){if((0,c.Z)(e))return e.getPropertyInherited(t)}function N(e){return"feature"===e._value}function B(e){const t=e._left,i=t.length;for(let e=0;e<i;++e)if(t[e]._type!==m.Z.LITERAL_NUMBER)return;const n=t[0]._value,r=t[1]._value,o=t[2]._value,s=4===i?t[3]._value:1;return a.Z.fromHsl(n,r,o,s,v)}function V(e){const t=e._left,i=t.length;for(let e=0;e<i;++e)if(t[e]._type!==m.Z.LITERAL_NUMBER)return;const n=v;return n.red=t[0]._value/255,n.green=t[1]._value/255,n.blue=t[2]._value/255,n.alpha=4===i?t[3]._value:1,n}function k(e){return e%1==0?e.toFixed(1):e.toString()}function U(e){return`vec4(${k(e.red)}, ${k(e.green)}, ${k(e.blue)}, ${k(e.alpha)})`}function F(e,t,i,n){const r=e.length,o=new Array(r);for(let s=0;s<r;++s)o[s]=e[s].getShaderExpression(t,i,n);return o}function z(e,t){return(0,c.Z)(t[e])?t[e]:f.NULL_SENTINEL}O.prototype._evaluateLiteral=function(){return this._value},O.prototype._evaluateLiteralColor=function(e){const t=v,i=this._left;if("color"===this._value)(0,c.Z)(i)?i.length>1?(a.Z.fromCssColorString(i[0].evaluate(e),t),t.alpha=i[1].evaluate(e)):a.Z.fromCssColorString(i[0].evaluate(e),t):a.Z.fromBytes(255,255,255,255,t);else if("rgb"===this._value)a.Z.fromBytes(i[0].evaluate(e),i[1].evaluate(e),i[2].evaluate(e),255,t);else if("rgba"===this._value){const n=255*i[3].evaluate(e);a.Z.fromBytes(i[0].evaluate(e),i[1].evaluate(e),i[2].evaluate(e),n,t)}else"hsl"===this._value?a.Z.fromHsl(i[0].evaluate(e),i[1].evaluate(e),i[2].evaluate(e),1,t):"hsla"===this._value&&a.Z.fromHsl(i[0].evaluate(e),i[1].evaluate(e),i[2].evaluate(e),i[3].evaluate(e),t);return o.Z.fromColor(t,_.getCartesian4())},O.prototype._evaluateLiteralVector=function(e){const t=_.getArray(),i=this._value,s=this._left,a=s.length;for(let c=0;c<a;++c){const a=s[c].evaluate(e);if("number"==typeof a)t.push(a);else if(a instanceof n.Z)t.push(a.x,a.y);else if(a instanceof r.Z)t.push(a.x,a.y,a.z);else{if(!(a instanceof o.Z))throw new h.Z(`${i} argument must be a vector or number. Argument is ${a}.`);t.push(a.x,a.y,a.z,a.w)}}const c=t.length,u=parseInt(i.charAt(3));if(0===c)throw new h.Z(`Invalid ${i} constructor. No valid arguments.`);if(c<u&&c>1)throw new h.Z(`Invalid ${i} constructor. Not enough arguments.`);if(c>u&&a>1)throw new h.Z(`Invalid ${i} constructor. Too many arguments.`);if(1===c){const e=t[0];t.push(e,e,e)}return"vec2"===i?n.Z.fromArray(t,0,_.getCartesian2()):"vec3"===i?r.Z.fromArray(t,0,_.getCartesian3()):"vec4"===i?o.Z.fromArray(t,0,_.getCartesian4()):void 0},O.prototype._evaluateLiteralString=function(){return this._value},O.prototype._evaluateVariableString=function(e){let t=this._value,i=Z.exec(t);for(;null!==i;){const n=i[0];let r=M(e,i[1]);(0,c.Z)(r)||(r=""),t=t.replace(n,r),i=Z.exec(t)}return t},O.prototype._evaluateVariable=function(e){return M(e,this._value)},O.prototype._evaluateMemberDot=function(e){if(N(this._left))return M(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!(0,c.Z)(t))return;const i=this._right.evaluate(e);if(t instanceof n.Z||t instanceof r.Z||t instanceof o.Z){if("r"===i)return t.x;if("g"===i)return t.y;if("b"===i)return t.z;if("a"===i)return t.w}return t[i]},O.prototype._evaluateMemberBrackets=function(e){if(N(this._left))return M(e,this._right.evaluate(e));const t=this._left.evaluate(e);if(!(0,c.Z)(t))return;const i=this._right.evaluate(e);if(t instanceof n.Z||t instanceof r.Z||t instanceof o.Z){if(0===i||"r"===i)return t.x;if(1===i||"g"===i)return t.y;if(2===i||"b"===i)return t.z;if(3===i||"a"===i)return t.w}return t[i]},O.prototype._evaluateArray=function(e){const t=[];for(let i=0;i<this._value.length;i++)t[i]=this._value[i].evaluate(e);return t},O.prototype._evaluateNot=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new h.Z(`Operator "!" requires a boolean argument. Argument is ${t}.`);return!t},O.prototype._evaluateNegative=function(e){const t=this._left.evaluate(e);if(t instanceof n.Z)return n.Z.negate(t,_.getCartesian2());if(t instanceof r.Z)return r.Z.negate(t,_.getCartesian3());if(t instanceof o.Z)return o.Z.negate(t,_.getCartesian4());if("number"==typeof t)return-t;throw new h.Z(`Operator "-" requires a vector or number argument. Argument is ${t}.`)},O.prototype._evaluatePositive=function(e){const t=this._left.evaluate(e);if(!(t instanceof n.Z||t instanceof r.Z||t instanceof o.Z||"number"==typeof t))throw new h.Z(`Operator "+" requires a vector or number argument. Argument is ${t}.`);return t},O.prototype._evaluateLessThan=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof i)throw new h.Z(`Operator "<" requires number arguments. Arguments are ${t} and ${i}.`);return t<i},O.prototype._evaluateLessThanOrEquals=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof i)throw new h.Z(`Operator "<=" requires number arguments. Arguments are ${t} and ${i}.`);return t<=i},O.prototype._evaluateGreaterThan=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof i)throw new h.Z(`Operator ">" requires number arguments. Arguments are ${t} and ${i}.`);return t>i},O.prototype._evaluateGreaterThanOrEquals=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if("number"!=typeof t||"number"!=typeof i)throw new h.Z(`Operator ">=" requires number arguments. Arguments are ${t} and ${i}.`);return t>=i},O.prototype._evaluateOr=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new h.Z(`Operator "||" requires boolean arguments. First argument is ${t}.`);if(t)return!0;const i=this._right.evaluate(e);if("boolean"!=typeof i)throw new h.Z(`Operator "||" requires boolean arguments. Second argument is ${i}.`);return t||i},O.prototype._evaluateAnd=function(e){const t=this._left.evaluate(e);if("boolean"!=typeof t)throw new h.Z(`Operator "&&" requires boolean arguments. First argument is ${t}.`);if(!t)return!1;const i=this._right.evaluate(e);if("boolean"!=typeof i)throw new h.Z(`Operator "&&" requires boolean arguments. Second argument is ${i}.`);return t&&i},O.prototype._evaluatePlus=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(i instanceof n.Z&&t instanceof n.Z)return n.Z.add(t,i,_.getCartesian2());if(i instanceof r.Z&&t instanceof r.Z)return r.Z.add(t,i,_.getCartesian3());if(i instanceof o.Z&&t instanceof o.Z)return o.Z.add(t,i,_.getCartesian4());if("string"==typeof t||"string"==typeof i)return t+i;if("number"==typeof t&&"number"==typeof i)return t+i;throw new h.Z(`Operator "+" requires vector or number arguments of matching types, or at least one string argument. Arguments are ${t} and ${i}.`)},O.prototype._evaluateMinus=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(i instanceof n.Z&&t instanceof n.Z)return n.Z.subtract(t,i,_.getCartesian2());if(i instanceof r.Z&&t instanceof r.Z)return r.Z.subtract(t,i,_.getCartesian3());if(i instanceof o.Z&&t instanceof o.Z)return o.Z.subtract(t,i,_.getCartesian4());if("number"==typeof t&&"number"==typeof i)return t-i;throw new h.Z(`Operator "-" requires vector or number arguments of matching types. Arguments are ${t} and ${i}.`)},O.prototype._evaluateTimes=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(i instanceof n.Z&&t instanceof n.Z)return n.Z.multiplyComponents(t,i,_.getCartesian2());if(i instanceof n.Z&&"number"==typeof t)return n.Z.multiplyByScalar(i,t,_.getCartesian2());if(t instanceof n.Z&&"number"==typeof i)return n.Z.multiplyByScalar(t,i,_.getCartesian2());if(i instanceof r.Z&&t instanceof r.Z)return r.Z.multiplyComponents(t,i,_.getCartesian3());if(i instanceof r.Z&&"number"==typeof t)return r.Z.multiplyByScalar(i,t,_.getCartesian3());if(t instanceof r.Z&&"number"==typeof i)return r.Z.multiplyByScalar(t,i,_.getCartesian3());if(i instanceof o.Z&&t instanceof o.Z)return o.Z.multiplyComponents(t,i,_.getCartesian4());if(i instanceof o.Z&&"number"==typeof t)return o.Z.multiplyByScalar(i,t,_.getCartesian4());if(t instanceof o.Z&&"number"==typeof i)return o.Z.multiplyByScalar(t,i,_.getCartesian4());if("number"==typeof t&&"number"==typeof i)return t*i;throw new h.Z(`Operator "*" requires vector or number arguments. If both arguments are vectors they must be matching types. Arguments are ${t} and ${i}.`)},O.prototype._evaluateDivide=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(i instanceof n.Z&&t instanceof n.Z)return n.Z.divideComponents(t,i,_.getCartesian2());if(t instanceof n.Z&&"number"==typeof i)return n.Z.divideByScalar(t,i,_.getCartesian2());if(i instanceof r.Z&&t instanceof r.Z)return r.Z.divideComponents(t,i,_.getCartesian3());if(t instanceof r.Z&&"number"==typeof i)return r.Z.divideByScalar(t,i,_.getCartesian3());if(i instanceof o.Z&&t instanceof o.Z)return o.Z.divideComponents(t,i,_.getCartesian4());if(t instanceof o.Z&&"number"==typeof i)return o.Z.divideByScalar(t,i,_.getCartesian4());if("number"==typeof t&&"number"==typeof i)return t/i;throw new h.Z(`Operator "/" requires vector or number arguments of matching types, or a number as the second argument. Arguments are ${t} and ${i}.`)},O.prototype._evaluateMod=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(i instanceof n.Z&&t instanceof n.Z)return n.Z.fromElements(t.x%i.x,t.y%i.y,_.getCartesian2());if(i instanceof r.Z&&t instanceof r.Z)return r.Z.fromElements(t.x%i.x,t.y%i.y,t.z%i.z,_.getCartesian3());if(i instanceof o.Z&&t instanceof o.Z)return o.Z.fromElements(t.x%i.x,t.y%i.y,t.z%i.z,t.w%i.w,_.getCartesian4());if("number"==typeof t&&"number"==typeof i)return t%i;throw new h.Z(`Operator "%" requires vector or number arguments of matching types. Arguments are ${t} and ${i}.`)},O.prototype._evaluateEqualsStrict=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);return i instanceof n.Z&&t instanceof n.Z||i instanceof r.Z&&t instanceof r.Z||i instanceof o.Z&&t instanceof o.Z?t.equals(i):t===i},O.prototype._evaluateNotEqualsStrict=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);return i instanceof n.Z&&t instanceof n.Z||i instanceof r.Z&&t instanceof r.Z||i instanceof o.Z&&t instanceof o.Z?!t.equals(i):t!==i},O.prototype._evaluateConditional=function(e){const t=this._test.evaluate(e);if("boolean"!=typeof t)throw new h.Z(`Conditional argument of conditional expression must be a boolean. Argument is ${t}.`);return t?this._left.evaluate(e):this._right.evaluate(e)},O.prototype._evaluateNaN=function(e){return isNaN(this._left.evaluate(e))},O.prototype._evaluateIsFinite=function(e){return isFinite(this._left.evaluate(e))},O.prototype._evaluateIsExactClass=function(e){return!!(0,c.Z)(e)&&e.isExactClass(this._left.evaluate(e))},O.prototype._evaluateIsClass=function(e){return!!(0,c.Z)(e)&&e.isClass(this._left.evaluate(e))},O.prototype._evaluateGetExactClassName=function(e){if((0,c.Z)(e))return e.getExactClassName()},O.prototype._evaluateBooleanConversion=function(e){return Boolean(this._left.evaluate(e))},O.prototype._evaluateNumberConversion=function(e){return Number(this._left.evaluate(e))},O.prototype._evaluateStringConversion=function(e){return String(this._left.evaluate(e))},O.prototype._evaluateRegExp=function(e){const t=this._value.evaluate(e);let i,n="";(0,c.Z)(this._left)&&(n=this._left.evaluate(e));try{i=new RegExp(t,n)}catch(e){throw new h.Z(e)}return i},O.prototype._evaluateRegExpTest=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"==typeof i))throw new h.Z(`RegExp.test requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${i}.`);return t.test(i)},O.prototype._evaluateRegExpMatch=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(t instanceof RegExp&&"string"==typeof i)return t.test(i);if(i instanceof RegExp&&"string"==typeof t)return i.test(t);throw new h.Z(`Operator "=~" requires one RegExp argument and one string argument. Arguments are ${t} and ${i}.`)},O.prototype._evaluateRegExpNotMatch=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(t instanceof RegExp&&"string"==typeof i)return!t.test(i);if(i instanceof RegExp&&"string"==typeof t)return!i.test(t);throw new h.Z(`Operator "!~" requires one RegExp argument and one string argument. Arguments are ${t} and ${i}.`)},O.prototype._evaluateRegExpExec=function(e){const t=this._left.evaluate(e),i=this._right.evaluate(e);if(!(t instanceof RegExp&&"string"==typeof i))throw new h.Z(`RegExp.exec requires the first argument to be a RegExp and the second argument to be a string. Arguments are ${t} and ${i}.`);const n=t.exec(i);return(0,c.Z)(n)?n[1]:null},O.prototype._evaluateToString=function(e){const t=this._left.evaluate(e);if(t instanceof RegExp||t instanceof n.Z||t instanceof r.Z||t instanceof o.Z)return String(t);throw new h.Z(`Unexpected function call "${this._value}".`)},f.NULL_SENTINEL="czm_infinity",O.prototype.getShaderExpression=function(e,t,i){let n,r,o,s;const l=this._type;let d,_,p,g=this._value;switch((0,c.Z)(this._left)&&(r=Array.isArray(this._left)?F(this._left,e,t,this):this._left.getShaderExpression(e,t,this)),(0,c.Z)(this._right)&&(o=this._right.getShaderExpression(e,t,this)),(0,c.Z)(this._test)&&(s=this._test.getShaderExpression(e,t,this)),Array.isArray(this._value)&&(g=F(this._value,e,t,this)),l){case m.Z.VARIABLE:if(N(this))return;return z(g,e);case m.Z.UNARY:if("Boolean"===g)return`bool(${r})`;if("Number"===g)return`float(${r})`;if("round"===g)return`floor(${r} + 0.5)`;if((0,c.Z)(S[g]))return`${g}(${r})`;if("isNaN"===g)return`(${r} != ${r})`;if("isFinite"===g)return`(abs(${r}) < czm_infinity)`;if("String"===g||"isExactClass"===g||"isClass"===g||"getExactClassName"===g)throw new h.Z(`Error generating style shader: "${g}" is not supported.`);return g+r;case m.Z.BINARY:return"%"===g?`mod(${r}, ${o})`:"==="===g?`(${r} == ${o})`:"!=="===g?`(${r} != ${o})`:"atan2"===g?`atan(${r}, ${o})`:(0,c.Z)(C[g])?`${g}(${r}, ${o})`:`(${r} ${g} ${o})`;case m.Z.TERNARY:if((0,c.Z)(E[g]))return`${g}(${r}, ${o}, ${s})`;break;case m.Z.CONDITIONAL:return`(${s} ? ${r} : ${o})`;case m.Z.MEMBER:return N(this._left)?z(o,e):"r"===o||"x"===o||"0.0"===o?`${r}[0]`:"g"===o||"y"===o||"1.0"===o?`${r}[1]`:"b"===o||"z"===o||"2.0"===o?`${r}[2]`:"a"===o||"w"===o||"3.0"===o?`${r}[3]`:`${r}[int(${o})]`;case m.Z.FUNCTION_CALL:throw new h.Z(`Error generating style shader: "${g}" is not supported.`);case m.Z.ARRAY:if(4===g.length)return`vec4(${g[0]}, ${g[1]}, ${g[2]}, ${g[3]})`;if(3===g.length)return`vec3(${g[0]}, ${g[1]}, ${g[2]})`;if(2===g.length)return`vec2(${g[0]}, ${g[1]})`;throw new h.Z("Error generating style shader: Invalid array length. Array length should be 2, 3, or 4.");case m.Z.REGEX:throw new h.Z("Error generating style shader: Regular expressions are not supported.");case m.Z.VARIABLE_IN_STRING:throw new h.Z("Error generating style shader: Converting a variable to a string is not supported.");case m.Z.LITERAL_NULL:return f.NULL_SENTINEL;case m.Z.LITERAL_BOOLEAN:return g?"true":"false";case m.Z.LITERAL_NUMBER:return k(g);case m.Z.LITERAL_STRING:if((0,c.Z)(i)&&i._type===m.Z.MEMBER&&("r"===g||"g"===g||"b"===g||"a"===g||"x"===g||"y"===g||"z"===g||"w"===g||N(i._left)))return g;if(n=a.Z.fromCssColorString(g,v),(0,c.Z)(n))return function(e){return`vec3(${k(e.red)}, ${k(e.green)}, ${k(e.blue)})`}(n);throw new h.Z("Error generating style shader: String literals are not supported.");case m.Z.LITERAL_COLOR:if(d=r,"color"===g){if(!(0,c.Z)(d))return"vec4(1.0)";if(d.length>1){const e=d[0],i=d[1];return"1.0"!==i&&(t.translucent=!0),`vec4(${e}, ${i})`}return`vec4(${d[0]}, 1.0)`}if("rgb"===g)return n=V(this),(0,c.Z)(n)?U(n):`vec4(${d[0]} / 255.0, ${d[1]} / 255.0, ${d[2]} / 255.0, 1.0)`;if("rgba"===g)return"1.0"!==d[3]&&(t.translucent=!0),n=V(this),(0,c.Z)(n)?U(n):`vec4(${d[0]} / 255.0, ${d[1]} / 255.0, ${d[2]} / 255.0, ${d[3]})`;if("hsl"===g)return n=B(this),(0,c.Z)(n)?U(n):`vec4(czm_HSLToRGB(vec3(${d[0]}, ${d[1]}, ${d[2]})), 1.0)`;if("hsla"===g)return n=B(this),(0,c.Z)(n)?(1!==n.alpha&&(t.translucent=!0),U(n)):("1.0"!==d[3]&&(t.translucent=!0),`vec4(czm_HSLToRGB(vec3(${d[0]}, ${d[1]}, ${d[2]})), ${d[3]})`);break;case m.Z.LITERAL_VECTOR:if(!(0,c.Z)(r))throw new u.Z("left should always be defined for type ExpressionNodeType.LITERAL_VECTOR");_=r.length,p=`${g}(`;for(let e=0;e<_;++e)p+=r[e],e<_-1&&(p+=", ");return p+=")",p;case m.Z.LITERAL_REGEX:throw new h.Z("Error generating style shader: Regular expressions are not supported.");case m.Z.LITERAL_UNDEFINED:return f.NULL_SENTINEL;case m.Z.BUILTIN_VARIABLE:if("tiles3d_tileset_time"===g)return"u_time"}},O.prototype.getVariables=function(e,t){let i,n,r;const o=this._type,s=this._value;if((0,c.Z)(this._left))if(Array.isArray(this._left))for(i=this._left,n=i.length,r=0;r<n;++r)i[r].getVariables(e,this);else this._left.getVariables(e,this);if((0,c.Z)(this._right)&&this._right.getVariables(e,this),(0,c.Z)(this._test)&&this._test.getVariables(e,this),Array.isArray(this._value))for(i=this._value,n=i.length,r=0;r<n;++r)i[r].getVariables(e,this);let a;switch(o){case m.Z.VARIABLE:N(this)||e.push(s);break;case m.Z.VARIABLE_IN_STRING:for(a=Z.exec(s);null!==a;)e.push(a[1]),a=Z.exec(s);break;case m.Z.LITERAL_STRING:(0,c.Z)(t)&&t._type===m.Z.MEMBER&&N(t._left)&&e.push(s)}};const $=f},54851:(e,t,i)=>{i.d(t,{Z:()=>n});const n=Object.freeze({VARIABLE:0,UNARY:1,BINARY:2,TERNARY:3,CONDITIONAL:4,MEMBER:5,FUNCTION_CALL:6,ARRAY:7,REGEX:8,VARIABLE_IN_STRING:9,LITERAL_NULL:10,LITERAL_BOOLEAN:11,LITERAL_NUMBER:12,LITERAL_STRING:13,LITERAL_COLOR:14,LITERAL_VECTOR:15,LITERAL_REGEX:16,LITERAL_UNDEFINED:17,BUILTIN_VARIABLE:18})}}]);