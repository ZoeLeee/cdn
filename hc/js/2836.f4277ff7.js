"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2836],{18163:(e,t,a)=>{a.d(t,{Z:()=>f});var n=a(74857),l=a(21092),r=a(32735),i=a(75393),o=a(68867),c=a(57426),m=a(58181),s=a(37211),u=a(67970),d=a(44700),p=a(61241),g=a(3450),E=a(89294),h=a.n(E);const Z=["children","onClose"],v=(0,g.ZP)(o.Z)((({theme:e})=>({"& .MuiDialogContent-root":{padding:e.spacing(2)},"& .MuiDialogActions-root":{padding:e.spacing(1)}}))),y=e=>{const{children:t,onClose:a}=e,i=(0,l.Z)(e,Z);return r.createElement(c.Z,(0,n.Z)({sx:{m:0,p:2,cursor:"move"}},i),t,a?r.createElement(u.Z,{"aria-label":"close",onClick:a,sx:{position:"absolute",right:8,top:8,color:e=>e.palette.grey[500]}},r.createElement(d.Z,null)):null)},b=e=>r.createElement(h(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},r.createElement(p.Z,e)),f=({title:e,visible:t,size:a,children:n,header:l,footer:o,fullWidth:c,sx:u,height:d,hideFooter:p,handleOk:g,handleClose:E})=>{const h=()=>{E&&E()};return r.createElement(v,{open:t,maxWidth:a,fullWidth:c,PaperComponent:b,"aria-labelledby":"draggable-dialog-title"},l||r.createElement(y,{id:"draggable-dialog-title",onClose:h},e),r.createElement(m.Z,{sx:{height:""+(d?d+"px":"auto")},dividers:!0},n),p?null:r.createElement(s.Z,null,o||r.createElement(r.Fragment,null,r.createElement(i.Z,{onClick:h},"\u53d6\u6d88"),r.createElement(i.Z,{onClick:()=>{g&&g()}},"\u786e\u5b9a"))))}},60092:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(36800),l=a.n(n),r=a(32735),i=a(65404);const o=({total:e,pagenation:t,onPageChange:a,onRowsPerPageChange:n})=>{const{pageNum:o,pageSize:c,pageSizeOptions:m}=t;return r.createElement(i.Z,{rowsPerPageOptions:m||[],component:"div",count:e,rowsPerPage:c,page:o>0?o-1:0,onPageChange:(e,t)=>{a&&a(t+1)},onRowsPerPageChange:e=>{n&&n(l()(e.target.value,10))},labelRowsPerPage:"\u6bcf\u9875\u6761\u6570\uff1a",labelDisplayedRows:({from:t,to:a})=>`${t}\u2013${a} \u5171 ${Math.ceil(e/c)}\u9875, ${e}\u6761`})}},23246:(e,t,a)=>{a.d(t,{Z:()=>X});var n=a(93213),l=a(17349),r=a.n(l),i=a(51463),o=a.n(i),c=a(38110),m=a.n(c),s=a(66989),u=a.n(s),d=a(97539),p=a.n(d),g=a(58044),E=a.n(g),h=a(20246),Z=a.n(h),v=a(32849),y=a.n(v),b=(a(36800),a(39831)),f=a.n(b),C=a(61799),x=a.n(C),w=a(26117),k=a.n(w),S=a(5996),P=a.n(S),I=a(20658),V=a.n(I),D=a(3434),M=a.n(D),A=a(97828),R=a.n(A),F=a(32735),N=a(54603),L=a(72448),T=a(78991),j=a(29143),z=a(82295),U=a(32048),B=a(61241),O=a(86191),W=a(56541),H=a(94063),K=a(71644),$=a(3450),Q=a(92513),G=a(60092);function _(e,t){var a=Z()(e);if(f()){var n=f()(e);t&&(n=x()(n).call(n,(function(t){return k()(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a,l,r=null!=arguments[t]?arguments[t]:{};t%2?P()(a=_(Object(r),!0)).call(a,(function(t){(0,n.Z)(e,t,r[t])})):V()?M()(e,V()(r)):P()(l=_(Object(r))).call(l,(function(t){R()(e,t,k()(r,t))}))}return e}const q=(0,$.ZP)("div")((({theme:e})=>({textAlign:"center",fontSize:"14px",padding:"20px 0","& img":{width:300,height:300},"& p":{margin:0}}))),J=(0,$.ZP)(T.Z)((({theme:e})=>({padding:"15px"}))),X=({columns:e,dataSource:t,rowKey:a,ipagenation:n,handleChangePage:l,handleChangeRowsPerPage:i,selectedRowKeys:c,selectionRows:s,selectedChange:d,changeSort:g,tableStyle:h,total:v})=>{const[b,f]=(0,F.useState)({}),C=(e,t)=>{let a=!e[t],n=JSON.parse(u()(b));n[t]=a,f(n),g&&g(a,t)},x=(e,t,a)=>{let n=e.target.checked,l=[],r=[];if(t||a)if(n)l=[...c,t],r=[...s,a];else{l=[...c],r=[...s];let e=p()(l).call(l,t);E()(l).call(l,e,1),E()(r).call(r,e,1)}else l=n?w().rowKeys:[],r=n?w().rows:[];d&&d(c,s)},w=()=>{var e;let l=n.pageNum*n.pageSize,i=n.pageNum*n.pageSize+n.pageSize;return{rows:r()(t).call(t,l,i),rowKeys:o()(e=r()(t).call(t,l,i)).call(e,(e=>e[a]))}};return(()=>{const s=a||"id";return F.createElement(B.Z,{sx:{width:"100%",mb:2,height:"100%",overflow:"auto"}},F.createElement(j.Z,{sx:Y({width:"100%",overflow:"auto",height:"100%",minHeight:650},h||{})},F.createElement(N.Z,{"aria-label":"simple table",sx:{overflowY:"auto"}},F.createElement(z.Z,null,e?(e=>{let a=n.pageNum*n.pageSize,l=n.pageNum*n.pageSize+n.pageSize,i=r()(t).call(t,a,l).length;return F.createElement(U.Z,null,c?F.createElement(J,{key:(0,Q.F)(),padding:"checkbox"},F.createElement(O.Z,{color:"primary",checked:c.length>0&&c.length===i,onChange:e=>x(e,null,null),indeterminate:c.length>0&&c.length<i})):null,o()(e).call(e,(e=>m()(e)?F.createElement(J,{key:e.key,align:e.align?e.align:"left",sortDirection:b?"desc":"asc",onClick:()=>C(b,e.key)},F.createElement(W.Z,{direction:b[e.key]?"desc":"asc"},e.title),F.createElement(H.Z,{component:"span",sx:K.Z},"sorted descending")):F.createElement(J,{key:e.key,align:e.align?e.align:"left"},e.title))))})(e):null),F.createElement(L.Z,null,t&&o()(t).call(t,((t,a)=>{return F.createElement(U.Z,{key:t[s]||(0,Q.F)(),sx:{"&:last-child td, &:last-child th":{border:0}}},c?F.createElement(J,{key:(0,Q.F)(),padding:"checkbox"},F.createElement(O.Z,{color:"primary",checked:(n=t.id,l=c,!!y()(l).call(l,(e=>e===n))),onChange:e=>x(e,t.id,t)})):null,((t,a)=>{let n=[],l=Z()(t);for(let r of e)if(r.render){let e="";y()(l).call(l,(e=>e===r.key))&&(e=t[r.key]),n.push(F.createElement(J,{key:(0,Q.F)(),align:r.align?r.align:"left"},r.render(e,t,a)))}else y()(l).call(l,(e=>e===r.key))?n.push(F.createElement(J,{key:r.key,align:r.align?r.align:"left"},t[r.key])):n.push(F.createElement(J,{key:(0,Q.F)(),align:r.align?r.align:"left"}));return n})(t,a));var n,l})))),n&&v>0?F.createElement(G.Z,{pagenation:n,total:v,onPageChange:l,onRowsPerPageChange:i}):null,t&&0!==t.length?null:F.createElement(q,null,F.createElement("img",{src:"/static/images/nodata.svg"}),F.createElement("p",null,"\u6682\u65e0\u6570\u636e"))))})()}},52836:(e,t,a)=>{a.r(t),a.d(t,{default:()=>dr});var n=a(32735),l=a(59263),r=a(74857),i=a(21092),o=a(12519);const c=["children"],m=e=>{let{children:t}=e,a=(0,i.Z)(e,c);return n.createElement(o.Z,(0,r.Z)({maxWidth:!1,disableGutters:!0},a),t)};var s=a(71722),u=a.n(s),d=a(96867),p=a.n(d),g=a(51463),E=a.n(g),h=a(94063),Z=a(92509),v=a(62211),y=a(16802),b=a(27660),f=a(23122),C=a(4675),x=a(46269),w=a(57239),k=a(54056),S=a(59753),P=a(20913),I=a(6475),V=a(29115),D=a(19853),M=a(68867),A=a(75393),R=a(37211),F=a(58181),N=a(57426),L=a(25783),T=a(48182),j=a(15855);const z=({onClose:e,onConfirm:t,isUpdate:a,selectName:l=""})=>{const[r,i]=(0,n.useState)(l),o=async()=>{await t(r)&&e()};return n.createElement(M.Z,{open:!0,onClose:e},n.createElement(N.Z,null,a?"\u66f4\u65b0\u573a\u666f":"\u65b0\u5efa\u573a\u666f"),n.createElement(F.Z,null,n.createElement(L.Z,{variant:"standard"},n.createElement(j.Z,{htmlFor:"component-simple"},"\u573a\u666f\u540d\u79f0"),n.createElement(T.Z,{id:"component-simple",value:r,onChange:e=>{i(e.target.value)},onKeyPress:e=>{13===e.nativeEvent.keyCode&&o()}}))),n.createElement(R.Z,null,n.createElement(A.Z,{color:"primary",onClick:o},"\u786e\u5b9a")))};var U=a(73554);const B=w.Z,O=(0,x.Pi)((()=>{const{fileStore:e,rootStore:t}=(0,y.m)(),{leftTabIndex:a,changeLeftTab:r}=(0,Z.M)(),[i,o]=(0,n.useState)({open:!1,info:null});return(0,n.useEffect)((()=>{r(S.V.Scene);const a=new(p())(location.href),n=a.searchParams.get("projectId"),l=a.searchParams.get("id"),i=a.searchParams.get("code");i&&((0,V.ZL)(I.ZQ.detailEx,{params:{product_code:i}}).then((e=>{if(e.code===V.Mx.Ok){const t=e.data;o({open:!0,info:t})}})),(0,D.$6)(location.href,"code",!0)),(async()=>{await(0,k.$_)(),n&&(await t.loadProject(n?Number(n):void 0),await u().all([b.l.load()]),l&&e.load(Number(l)))})()}),[]),n.createElement(v.k.Provider,{value:{commonStore:b.l}},n.createElement(B,{width:220,minWidth:220,maxWidth:440,enable:{top:!1,right:!0,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},onResizeStop:(e,t,a,n)=>{l.l.Viewer.setSize()}},n.createElement(h.Z,{id:"leftPanel",sx:{flexWrap:"wrap",minWidth:220,display:"flex",maxWidth:440,flex:1,height:"100%",borderLeft:"1px solid #F2F2F2"}},E()(C.Z).call(C.Z,(e=>!e.isHide&&n.createElement(f.x,{value:a,currentValue:e.id,key:e.id,style:{flex:1,minWidth:0,height:"100%",overflow:"auto"}},e.component))))),n.createElement(P.Z,{open:i.open,shop:i.info,onClose:()=>{o({open:!1,info:null}),history.go(-2)},commonStore:b.l,fileStore:e,needProject:!0,onSuccess:async e=>{o({open:!1,info:null}),(0,D.HY)("projectId",e),await t.loadProject(Number(e)),await u().all([b.l.load()])}}),e.isOpenModal&&n.createElement(z,{onClose:()=>{e.closeModal()},isUpdate:!!e.selectFile.id,selectName:e.selectFile.name,onConfirm:t=>t?e.selectFile.id?e.updateFileName(t,e.selectFile.id):e.addFile(t).then((e=>{if(!e)return!1;U.y.success("\u65b0\u5efa\u573a\u666f\u6210\u529f");const t=(0,D.GW)(location.href,"id",e.toString());return history.replaceState({path:t},"",t),!0})):(U.y.error("\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!"),!1)}))}));var W=a(32849),H=a.n(W),K=a(56622),$=a(36717),Q=a(26095),G=a(67970),_=a(11881),Y=a(30268),q=a(59548),J=a(93187),X=a(20151),ee=a(39282),te=a.n(ee),ae=a(95719),ne=a.n(ae),le=a(45285),re=a.n(le),ie=a(33591),oe=a.n(ie),ce=a(5996),me=a.n(ce),se=a(57055),ue=a(35140),de=a(43634),pe=a(87075),ge=a(91181),Ee=a(46561),he=a(52015),Ze=a(37394),ve=a(64496),ye=a(37360),be=a(69430),fe=a(31025),Ce=a(84337),xe=a(42733),we=a(23920),ke=a(98942),Se=a(84786),Pe=a(38235),Ie=a(70181),Ve=a(49213),De=a(93100),Me=a(14568),Ae=a(39825),Re=a(94610);const Fe=w.Z,Ne=["\u521b\u5efa","DELETE","\u5207\u6362\u53ef\u89c1\u6027","\u5220\u9664"];(0,be.Z)(pe.Z)((({theme:e})=>({[`& .${ge.Z.content}`]:{"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:"#a3d1d5"}},[`& .${ge.Z.group}`]:{maxHeight:200,overflowY:"auto"}})));let Le,Te=!1,je=!0,ze=[];const Ue=e=>{const[t,a]=(0,n.useState)(!0),[l,r]=(0,n.useState)([]),[i,o]=(0,n.useState)([]),c=(0,n.useRef)(null),[m,s]=(0,n.useState)(new(te())),[u,d]=(0,n.useState)(new(te())),[p,g]=(0,n.useState)(new(te())),{dispatch:Z}=(0,Y._i)(),v=(e=k.gV.intance.Database.AllObjects)=>{const t=[],a=new(te()),n=new(te()),l=new(te());for(const r of e){if(r.IsErase)continue;if(r instanceof se.Interaction.Interaction)continue;if(r instanceof se.Light)continue;if(r instanceof se.Entity&&r.GroupId)continue;let e,o,c=!0,m=!0,s=!1;var i;if((r instanceof se.ParticleSystem||r instanceof se.ParticleSystemGroup)&&(c=!1,m=!1,s=!0,e=Ie.Z,l.add(r.Id)),r instanceof se.Entity&&(e=Ve.Z,r.isLight&&(e=De.Z)),r instanceof se.BaseGui&&(e=Me.Z),r instanceof se.BaseDom&&(e=Ae.Z),r instanceof se.GroupRecord)e=Re.Z,o=v(E()(i=r.entitys).call(i,(e=>e.Object)));"Visiable"in r?r.Visiable||a.add(r.Id):c=!1,"IsPickable"in r?r.IsPickable||n.add(r.Id):m=!1,t.push({label:r.Name,id:r.Id,object:r,canVisiable:c,canPick:m,canStop:s,icon:e,children:o})}s(a),d(n),r(t),g(l),ze=t},y=e=>{k.gV.intance.Editor.selectControl.clearSelect(!0),re()(Ne).call(Ne,(t=>{var a;return oe()(a=e.commandName).call(a,t)}))&&v()};return(0,n.useEffect)((()=>{let e=[];return(0,fe.gx)((()=>!!k.gV.intance),(()=>{v(),e.push((0,se.end)(k.gV.intance.Database.ModelSpace,k.gV.intance.Database.ModelSpace.appendEvent,(e=>{je&&v()})),(0,se.end)(k.gV.intance.Database.LightSpace,k.gV.intance.Database.LightSpace.appendEvent,(e=>{je&&v()})),(0,se.end)(k.gV.intance.Database.GuiSpace,k.gV.intance.Database.GuiSpace.appendEvent,(e=>{je&&v()})),(0,se.end)(k.gV.intance.Database.DomSpace,k.gV.intance.Database.DomSpace.appendEvent,(e=>{je&&v()})),(0,se.end)(k.gV.intance.Database.ParticleSystemSpace,k.gV.intance.Database.ParticleSystemSpace.appendEvent,(e=>{je&&v()})),(0,se.end)(k.gV.intance.Database.GroupTable,k.gV.intance.Database.GroupTable.appendEvent,(e=>{je&&v()})),k.gV.intance.on("updateName",(()=>{je&&v()})),k.gV.intance.on("updateVisiable",(()=>{je&&v()})),k.gV.intance.on("remove",(()=>{je&&v()})),k.gV.intance.on("startLoad",(()=>{je=!1})),k.gV.intance.on("loadFile",(()=>{v(),je=!0})),k.gV.intance.Editor.selectControl.on((e=>{if("select"===e.type){if(Te)return void(Te=!1);e.entitys?.[0];if(Le=void 0,e.entitys){var t;const a=E()(t=e.entitys).call(t,(e=>e.Id));o(a),Le=a[0]}else o([]);(()=>{if(c.current&&Le){const e=ne()(ze).call(ze,(e=>e.id===Le));if(e>=0){const t=48*e;c.current.scrollTop=t}}})()}})),(0,se.end)(k.gV.intance.Database.HistoryManager,k.gV.intance.Database.HistoryManager.redoEvent,(e=>{y(e)})),(0,se.end)(k.gV.intance.Database.HistoryManager,k.gV.intance.Database.HistoryManager.undoEvent,(e=>{y(e)})))})),()=>{me()(e).call(e,(e=>e()))}}),[]),n.createElement(h.Z,{sx:{maxHeight:"100%",minHeight:55,borderBottom:2,borderColor:"divider"}},n.createElement(Fe,{height:225,minHeight:150,maxHeight:840,enable:{top:!0,right:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1}},n.createElement(Ze.Z,{onClick:()=>{a(!t)},sx:{bgcolor:"#ccc"}},n.createElement(ye.Z,{primary:"\u573a\u666f\u96c6\u5408"})),n.createElement(h.Z,{sx:{height:"calc(100% - 50px)",overflowY:"auto"},ref:c},n.createElement(Ee.Z,null,E()(l).call(l,(e=>n.createElement(he.ZP,{key:e.id,onClick:()=>(e=>{Te=!0,o([e.id]);const t=e.object;t&&(t instanceof se.Entity?t.IsPickable?k.gV.intance.Editor.selectControl.SelectEntitys=[t]:(Te=!1,Z({type:Pe.pr,entity:t})):t instanceof se.BaseDom?k.gV.intance.Editor.selectControl.SelectDOM=t:t instanceof se.BaseGui?t.IsPickable?k.gV.intance.Editor.selectControl.SelectGui=t:Z({type:Pe.E$,gui:t}):t instanceof se.Particle&&(k.gV.intance.Editor.selectControl.SelectParticle=t))})(e),onDoubleClick:()=>{var t;(t=e.object)&&t instanceof se.Entity&&k.gV.intance.Viewer.cameraManager.zoomToEntity(t)},sx:{cursor:"pointer","&:hover":{backgroundColor:"#ccc"},backgroundColor:oe()(i).call(i,e.id)?"#a3d1d5":void 0},secondaryAction:n.createElement(n.Fragment,null,e.canVisiable&&n.createElement(G.Z,{edge:"end","aria-label":"delete",onClick:t=>((e,t)=>{t.stopPropagation(),e&&(m.has(e.Id)?m.delete(e.Id):m.add(e.Id),s(new(te())(m)),se.CMD.CommandWrap((()=>{e.Visiable=!e.Visiable}),"\u5207\u6362\u53ef\u89c1\u6027"))})(e.object,t),title:"\u663e\u793a/\u9690\u85cf"},m.has(e.id)?n.createElement(de.Z,null):n.createElement(ue.Z,null)),e.canPick&&n.createElement(G.Z,{edge:"end","aria-label":"delete",onClick:t=>((e,t)=>{t.stopPropagation(),u.has(e.Id)?u.delete(e.Id):u.add(e.Id),d(new(te())(u)),se.CMD.CommandWrap((()=>{e.IsPickable=!e.IsPickable}),"\u5207\u6362\u53ef\u9009")})(e.object,t),title:"\u5207\u6362\u53ef\u9009\u4e2d"},u.has(e.id)?n.createElement(xe.Z,null):n.createElement(Ce.Z,null)),e.canStop&&n.createElement(G.Z,{edge:"end","aria-label":"stop",onClick:()=>{return t=e.object,p.has(t.Id)?(p.delete(t.Id),t.start()):(p.add(t.Id),t.stop()),void g(p);var t},title:"\u542f\u505c\u7279\u6548"},p.has(e.id)?n.createElement(ke.Z,null):n.createElement(Se.Z,null)))},e.icon&&n.createElement(ve.Z,{sx:{minWidth:30}},n.createElement(e.icon,null)),n.createElement(ye.Z,{primary:e.label}))))))))};var Be=a(29405),Oe=a.n(Be),We=a(86191),He=a(28926),Ke=a(48460),$e=a(42854),Qe=a(537),Ge=a(73983),_e=a(52802),Ye=a(90762),qe=a(73764),Je=a(11528);const Xe=()=>{const[e,t]=(0,n.useState)("");return(0,n.useEffect)((()=>{(0,fe.gx)((()=>!!k.gV.intance),(()=>{const e=k.gV.intance;e.on("loadFile",(()=>{t(e.Viewer.sceneControl.Background)}))}))}),[]),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u80cc\u666f"}),n.createElement(Ge.Z,{color:e,onChange:e=>{t(e.hex),k.gV.intance.Viewer.sceneControl.Background=e.hex}}))};var et=a(20246),tt=a.n(et),at=a(39831),nt=a.n(at),lt=a(61799),rt=a.n(lt),it=a(26117),ot=a.n(it),ct=a(20658),mt=a.n(ct),st=a(3434),ut=a.n(st),dt=a(97828),pt=a.n(dt),gt=a(93213),Et=a(24729);function ht(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function Zt(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=ht(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=ht(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}const vt=()=>{const[e,t]=(0,n.useState)({Turbidity:0,Rayleigh:0,Luminance:0,Inclination:0,Azimuth:0}),[a,l]=(0,n.useState)({x:"0",y:"0",z:"0"}),r=a=>{t(Zt(Zt({},e),{},{[a.target.name]:a.target.value})),k.gV.intance.Viewer.sceneControl[a.target.name]=a.target.value},i=()=>{const e=k.gV.intance;t({Turbidity:e.Viewer.sceneControl.Turbidity,Rayleigh:e.Viewer.sceneControl.Rayleigh,Luminance:e.Viewer.sceneControl.Luminance,Inclination:e.Viewer.sceneControl.Inclination,Azimuth:e.Viewer.sceneControl.Azimuth}),l((0,Et.eR)(e.Viewer.sceneControl.SunPosition))};return(0,n.useEffect)((()=>{(0,fe.gx)((()=>!!k.gV.intance),(()=>{const e=k.gV.intance;i(),e.on("loadFile",(()=>{i()}))}))}),[]),n.createElement(h.Z,null,n.createElement(K.Z,{direction:"row",sx:{m:0,p:0}},n.createElement(Ye.Z,{title:"\u6d4a\u5ea6",mt:1.1}),n.createElement(Ke.ZP,{size:"small",value:e.Turbidity,"aria-label":"Small",valueLabelDisplay:"auto",min:0,max:200,step:1,name:"Turbidity",onChange:r})),n.createElement(K.Z,{direction:"row",sx:{m:0,p:0}},n.createElement(Ye.Z,{title:"\u5f3a\u5ea6",mt:1.1}),n.createElement(Ke.ZP,{size:"small",value:e.Rayleigh,"aria-label":"Small",valueLabelDisplay:"auto",min:0,max:10,step:.1,name:"Rayleigh",onChange:r})),n.createElement(K.Z,{direction:"row",sx:{m:0,p:0}},n.createElement(Ye.Z,{title:"\u4eae\u5ea6",mt:1.1}),n.createElement(Ke.ZP,{size:"small",value:e.Luminance,"aria-label":"Small",valueLabelDisplay:"auto",min:0,max:1,step:.1,name:"Luminance",onChange:r})),n.createElement(K.Z,{direction:"row",sx:{m:0,p:0}},n.createElement(Ye.Z,{title:"\u503e\u89d2",mt:1.1}),n.createElement(Ke.ZP,{size:"small",value:e.Inclination,"aria-label":"Small",valueLabelDisplay:"auto",min:-.5,max:.5,step:.01,name:"Inclination",onChange:r})),n.createElement(K.Z,{direction:"row",sx:{m:0,p:0}},n.createElement(Ye.Z,{title:"\u65b9\u4f4d\u89d2",mt:1.1}),n.createElement(Ke.ZP,{size:"small",value:e.Azimuth,"aria-label":"Small",valueLabelDisplay:"auto",min:0,max:1,step:.1,name:"Azimuth",onChange:r})))},yt=[{label:"\u9ed8\u8ba4",value:se.SkyboxMode.None},{label:"\u5929\u7a7a\u76d2",value:se.SkyboxMode.Image},{label:"\u65e5\u5149\u6a21\u578b",value:se.SkyboxMode.Sun}],bt=()=>{const[e,t]=(0,n.useState)(se.SkyboxMode.None),{fileStore:a,rootStore:l}=(0,y.m)(),r=e=>{l.BgType=e.target.value,k.gV.intance.Viewer.sceneControl.Mode=e.target.value},i=(0,n.useMemo)((()=>{let e=l.BgType;return e===se.SkyboxMode.None?n.createElement(Xe,null):e!==se.SkyboxMode.Image?e===se.SkyboxMode.Sun?n.createElement(vt,null):n.createElement(n.Fragment,null):void 0}),[e]);return(0,n.useEffect)((()=>{(0,fe.U5)((()=>l.BgType),(()=>{t(l.BgType)}))}),[]),(0,n.useEffect)((()=>{(0,fe.gx)((()=>!!k.gV.intance),(()=>{const e=k.gV.intance;l.BgType=e.Viewer.sceneControl.Mode}))}),[a.currentFileName]),n.createElement(x.Qj,null,(()=>n.createElement(n.Fragment,null,n.createElement(h.Z,null,n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u80cc\u666f\u7c7b\u578b"}),n.createElement(h.Z,{sx:{position:"relative",width:165}},n.createElement(qe.Z,{id:"outlined-select-currency",select:!0,value:l.BgType,onChange:r,size:"small",placeholder:"\u9009\u62e9\u5929\u7a7a\u76d2\u7c7b\u578b",sx:{width:165},InputProps:{sx:{height:24,borderRadius:1,background:"#F4F4F4",border:0,fontSize:14}},inputProps:{sx:{pt:1,height:24,fontSize:14}}},E()(yt).call(yt,(e=>n.createElement(Je.Z,{key:e.value,value:e.value,sx:{fontSize:14}},e.label))))))),i)))},ft=()=>{const[e,t]=(0,n.useState)(.5);return n.createElement(n.Fragment,null,n.createElement(K.Z,{direction:"row",sx:{mt:1}},n.createElement(Ye.Z,{title:"\u53d1\u5149\u5f3a\u5ea6",mt:.5}),n.createElement(Ke.ZP,{size:"small",value:e,"aria-label":"Small",valueLabelDisplay:"auto",min:0,max:1,step:.1,sx:{width:150},onChange:(e,a)=>{t(a),k.gV.intance.Viewer.sceneControl.EmissiveIntensity=a}})))},Ct=(0,x.Pi)((e=>{const[t,a]=(0,n.useState)(!0),{fileStore:l,rootStore:r}=(0,y.m)(),[i,o]=(0,n.useState)(""),[c,m]=(0,n.useState)(""),[s,u]=(0,n.useState)(1),[d,p]=(0,n.useState)(!1),[g,E]=(0,n.useState)(!1);let Z;const v=()=>{const e=k.gV.intance;u(e.Viewer.hemisphericLight.Intensity),o(e.Viewer.hemisphericLight.Color),m(e.Viewer.sceneControl.AmbientColor),a(e.IsShadow),p(e.Viewer.sceneControl.IsReflect)};(0,n.useEffect)((()=>{let e;return(0,fe.gx)((()=>!!k.gV.intance),(()=>{const t=k.gV.intance;v(),e=t.on("loadFile",(()=>{v()}))})),()=>{e?.()}}),[]);return n.createElement(Ee.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",paddingTop:"0px"},component:"nav","aria-labelledby":"nested-list-subheader"},n.createElement(h.Z,null,n.createElement(He.Z,{checked:r.appIndexId===l.currentFileId,onChange:(e,t)=>{(0,Qe.N)((()=>{t?l.setAppIndex(l.currentFileId):U.y.warn("\u65e0\u6cd5\u53d6\u6d88,\u5fc5\u987b\u5b58\u5728\u4e00\u4e2a\u9996\u9875")}))},control:n.createElement(We.Z,null),label:"\u8bbe\u4e3a\u9996\u9875"}),n.createElement(K.Z,{direction:"row"},n.createElement(_e.Z,{title:"\u540d\u79f0",value:l.currentFileName,onChange:e=>{l.updateFileName(e.target.value)}})),n.createElement(bt,null),n.createElement(K.Z,{direction:"row",sx:{mt:1}},n.createElement(Ye.Z,{title:"\u5f00\u542f\u9634\u5f71",mt:1.1}),n.createElement($e.Z,{checked:t,onChange:(e,t)=>{a(t),k.gV.intance.IsShadow=t},inputProps:{"aria-label":"controlled"}})),n.createElement(K.Z,{direction:"row"},n.createElement(Ye.Z,{title:"\u53cd\u5c04\u73af\u5883",mt:.7}),n.createElement($e.Z,{checked:d,onChange:e=>{p(e.target.checked),k.gV.intance.Viewer.sceneControl.IsReflect=e.target.checked}})),n.createElement(ft,null),n.createElement(K.Z,{direction:"row",sx:{m:0,p:0},alignItems:"center"},n.createElement(Ye.Z,{title:"\u73af\u5883\u5149\u989c\u8272",mt:1.1}),n.createElement(Ge.Z,{color:c,onChange:e=>{m(e.hex),k.gV.intance.Viewer.sceneControl.AmbientColor=e.hex}})),n.createElement(K.Z,{direction:"row",sx:{m:0,p:0}},n.createElement(Ye.Z,{title:"\u5168\u5c40\u5149\u5f3a\u5ea6",mt:1.1}),n.createElement(Ke.ZP,{size:"small",value:s,"aria-label":"Small",valueLabelDisplay:"auto",min:0,max:1,step:.1,onChange:(e,t)=>{u(t),Z&&clearTimeout(Z),Z=Oe()((()=>{k.gV.intance.Viewer.hemisphericLight.Intensity=t}),100)}})),n.createElement(K.Z,{direction:"row",sx:{m:0,p:0},alignItems:"center"},n.createElement(Ye.Z,{title:"\u5168\u5c40\u5149\u989c\u8272",mt:1.1}),n.createElement(Ge.Z,{color:i,onChange:e=>{o(e.hex),k.gV.intance.Viewer.hemisphericLight.Color=e.hex}}))))})),xt=(0,x.Pi)((e=>{const{fileStore:t}=(0,y.m)();return n.createElement(Ee.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",paddingTop:"0px"},component:"nav","aria-labelledby":"nested-list-subheader"},n.createElement(h.Z,null,n.createElement(_e.Z,{title:"\u770b\u677f\u5730\u5740",value:t.Url2d||"",onChange:e=>{t.Url2d=e.target.value}})))}));var wt=a(52069),kt=a.n(wt),St=a(90946),Pt=a(50215),It=a(33796),Vt=a(49867);function Dt(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function Mt(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=Dt(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=Dt(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}const At=()=>{const{editorState:e,dispatch:t}=(0,Y._i)(),a=e.dom,l=e=>{t(Mt({type:Pe.wb},e))},r=(e,t)=>{t&&se.CMD.CommandWrap((()=>{a[e]=t}),"\u66f4\u65b0DOM")},i=(e,t)=>{se.CMD.CommandWrap((()=>{a[e]=t}),"\u53d8\u6362DOM")},o=(n,l)=>{t({type:Pe.dI,other:Mt(Mt({},e.other),{},{[n.target.name]:Number(l)})}),a[n.target.name]=Number(l)};return n.createElement(h.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",fontSize:"14px"},component:"nav","aria-labelledby":"nested-list-subheader"},n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Vt.Z,{title:"\u540d\u79f0",value:e.name,onChange:e=>t({type:Pe.MI,name:e.target.value}),onBlur:e=>{a.Name=e.target.value}})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Vt.Z,{title:"\u5bbd",value:e?.other?.width,onChange:a=>t({type:Pe.dI,other:Mt(Mt({},e.other),{},{width:a.target.value})}),onBlur:e=>{r("Width",e.target.value)}})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Vt.Z,{title:"\u9ad8",value:e?.other?.height,onChange:a=>t({type:Pe.dI,other:Mt(Mt({},e.other),{},{height:a.target.value})}),onBlur:e=>{r("Height",e.target.value)}})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u4f4d\u7f6e",mt:.7}),n.createElement(It.Z,{vector:e.position,onChange:(t,a)=>l({position:Mt(Mt({},e.position),{},{[t]:a})}),onBlur:()=>{i("Position",e.position)}})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u6c34\u5e73\u5bf9\u9f50",mt:.7}),n.createElement(Pt.Z,{"aria-labelledby":"\u6c34\u5e73\u5bf9\u9f50",name:"HorAlign",value:e?.other?.HorAlign,onChange:o,row:!0},n.createElement(He.Z,{value:0,control:n.createElement(St.Z,null),label:"\u5de6"}),n.createElement(He.Z,{value:1,control:n.createElement(St.Z,null),label:"\u5c45\u4e2d"}),n.createElement(He.Z,{value:2,control:n.createElement(St.Z,null),label:"\u53f3"}))),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u5782\u76f4\u5bf9\u9f50",mt:.7}),n.createElement(Pt.Z,{"aria-labelledby":"\u5782\u76f4\u5bf9\u9f50",name:"VerAlign",value:e?.other?.VerAlign,onChange:o,row:!0},n.createElement(He.Z,{value:0,control:n.createElement(St.Z,null),label:"\u4e0a"}),n.createElement(He.Z,{value:1,control:n.createElement(St.Z,null),label:"\u5c45\u4e2d"}),n.createElement(He.Z,{value:2,control:n.createElement(St.Z,null),label:"\u4e0b"}))),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u65cb\u8f6c",mt:.7}),n.createElement(It.Z,{vector:e.rotation,onBlur:()=>{i("Rotation",kt()(e.rotation.x))},onChange:(t,a)=>l({rotation:Mt(Mt({},e.rotation),{},{[t]:a})})})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u7f29\u653e",mt:.7}),n.createElement(It.Z,{vector:e.scale,onBlur:()=>{i("Scale",(0,Et.l)(e.scale))},onChange:(t,a)=>l({scale:Mt(Mt({},e.scale),{},{[t]:a})})})))};var Rt=a(28295),Ft=a(68242),Nt=a(38497),Lt=a(32690),Tt=a(31763),jt=a(10728);const zt=({expand:e,isExpand:t,entity:a})=>{const[l,r]=(0,n.useState)(!1),[i,o]=(0,n.useState)([]),[c,m]=(0,n.useState)(a.AnimationNames),s=()=>{r(!1),o([])},u=(e,t,a)=>{t[a]=e,o([...i])},d=e=>{var t;switch(e.type){case 0:return n.createElement(n.Fragment,null,E()(t=e.data).call(t,((e,t)=>n.createElement(he.ZP,{key:t},n.createElement(qe.Z,{label:"x",size:"small",value:e.x,onChange:t=>u(t.target.value,e,"x")}),n.createElement(qe.Z,{label:"y",size:"small",value:e.y,onChange:t=>u(t.target.value,e,"y")}),n.createElement(qe.Z,{label:"z",size:"small",value:e.z,onChange:t=>u(t.target.value,e,"z")})))),n.createElement(Ze.Z,{onClick:()=>(e=>{e.data.push({x:"0",y:"0",z:"0"}),o([...i])})(e)},n.createElement(A.Z,{variant:"outlined",endIcon:n.createElement(jt.Z,null)},"\u6dfb\u52a0\u79fb\u52a8\u70b9")));case 1:return n.createElement(he.ZP,null,n.createElement(qe.Z,{label:"\u4ece",size:"small",value:e.data[0],onChange:t=>{e.data[0]=t.target.value,o([...i])}}),n.createElement(qe.Z,{label:"\u5230",size:"small",value:e.data[1],onChange:t=>{e.data[1]=t.target.value,o([...i])}}));default:return null}};return(0,n.useEffect)((()=>{a.on("addAnimation",(()=>{m(a.AnimationNames)}))}),[]),n.createElement(n.Fragment,null,n.createElement(Ze.Z,{onClick:e},n.createElement(ye.Z,{primary:"\u52a8\u753b"}),t?n.createElement(Lt.Z,null):n.createElement(Tt.Z,null)),n.createElement(Ft.Z,{in:t,timeout:"auto",unmountOnExit:!0},n.createElement(Ee.Z,{component:"div",disablePadding:!0,sx:{overflow:"auto",maxHeight:300}},n.createElement(Rt.Z,{fullWidth:!0,orientation:"vertical","aria-label":"vertical outlined button group",sx:{"& button":{marginBottom:1}}},E()(c).call(c,(e=>n.createElement(A.Z,{variant:"contained",color:"primary",key:e,onClick:()=>a.startAnimates(e)},e))),n.createElement(A.Z,{color:"primary",onClick:()=>{r(!0)}},"\u6dfb\u52a0"),n.createElement(A.Z,{color:"primary",onClick:()=>a.stopAnimates()},"\u6682\u505c\u6240\u6709"))),n.createElement(M.Z,{onClose:s,open:l,fullWidth:!0,maxWidth:"lg",PaperProps:{sx:{height:"90vh"}}},n.createElement(N.Z,null,"\u6dfb\u52a0\u52a8\u753b"),n.createElement(F.Z,{sx:{display:"flex",overflow:"hidden"}},E()(i).call(i,((e,t)=>n.createElement(Ee.Z,{key:t,sx:{pt:0,width:"20%"},subheader:n.createElement(Nt.Z,{component:"div",id:"nested-list-subheader"},n.createElement(K.Z,{direction:"row"},n.createElement(T.Z,{value:e.title,onChange:t=>{e.title=t.target.value,o([...i])}}),n.createElement(He.Z,{control:n.createElement(We.Z,null),label:"\u7ec4",onChange:(t,a)=>{e.group=a,o([...i])}})))},d(e))))),n.createElement(R.Z,null,n.createElement(A.Z,{variant:"contained",onClick:()=>{o((e=>[...e,{title:"\u79fb\u52a8",type:0,data:[],group:!1}]))}},"\u6dfb\u52a0\u79fb\u52a8\u52a8\u753b"),n.createElement(A.Z,{variant:"contained",onClick:()=>{o((e=>[...e,{title:"\u65cb\u8f6c",type:1,data:["0","0"],group:!1}]))}},"\u6dfb\u52a0\u65cb\u8f6c\u52a8\u753b"),n.createElement(A.Z,{variant:"contained",onClick:()=>{for(const n of i){var e;if(0===n.type&&n.data?.length>0)a.moveAnimate({name:n.title,path:E()(e=n.data).call(e,(e=>({x:Number(e.x)||0,y:Number(e.y)||0,z:Number(e.z)||0})))});else if(1===n.type){var t;re()(t=n.data).call(t,(e=>Number(e)))&&a.rotateAnimate({name:n.title,from:se.Utils.deg2rad(Number(n.data[0])),angle:se.Utils.deg2rad(Number(n.data[1])),time:3,loop:!0})}}r(!1)}},"\u786e\u5b9a"),n.createElement(A.Z,{variant:"contained",onClick:s},"\u53d6\u6d88")))))};function Ut(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function Bt(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=Ut(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=Ut(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}const Ot=()=>{const{editorState:e,dispatch:t}=(0,Y._i)(),a=e.entity,[l,r]=(0,n.useState)(new(te())),i=e=>{t(Bt({type:Pe.wb},e))};return n.createElement(h.Z,{sx:{bgcolor:"background.paper",fontSize:"14px"},component:"nav","aria-labelledby":"nested-list-subheader"},n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(_e.Z,{title:"\u540d\u79f0",value:e.name,onChange:e=>t({type:Pe.MI,name:e.target.value}),onBlur:t=>{se.CMD.CommandWrap((()=>{e.entity.Name=t.target.value}),"\u6539\u53d8\u540d\u79f0")}})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u4f4d\u7f6e",mt:.5}),n.createElement(It.Z,{vector:e.position,onChange:(t,a)=>i({position:Bt(Bt({},e.position),{},{[t]:a})}),onBlur:()=>{se.CMD.CommandWrap((()=>{a.Position=(0,Et.l)(e.position)}),"\u4fee\u6539\u4f4d\u7f6e")}})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u65cb\u8f6c",mt:.7}),n.createElement(It.Z,{vector:e.rotation,onBlur:()=>{se.CMD.CommandWrap((()=>{a.Rotation=(0,Et.l)(e.rotation,(e=>se.Utils.deg2rad(e)))}),"\u4fee\u6539\u65cb\u8f6c")},onChange:(t,a)=>i({rotation:Bt(Bt({},e.rotation),{},{[t]:a})})})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u7f29\u653e",mt:.7}),n.createElement(It.Z,{vector:e.scale,onBlur:()=>{se.CMD.CommandWrap((()=>{a.Scale=(0,Et.l)(e.scale)}),"\u4fee\u6539\u7f29\u653e")},onChange:(t,a)=>i({scale:Bt(Bt({},e.scale),{},{[t]:a})})})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u6295\u5f71",mt:.7}),n.createElement($e.Z,{color:"primary",checked:e.enableShadow,onChange:e=>{a.EnableShadow=e.target.checked,t({type:Pe.wn})}})),n.createElement("div",{style:{display:"none"}},n.createElement(zt,{expand:()=>{return e="animate",l.has(e)?l.delete(e):l.add(e),void r(new(te())(l));var e},isExpand:l.has("animate"),entity:a})))};function Wt(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ht(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=Wt(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=Wt(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}const Kt=()=>{const{editorState:e,dispatch:t}=(0,Y._i)(),a=e.gui,l=e=>{t(Ht({type:Pe.wb},e))},r=n=>{t({type:Pe.wb,other:Ht(Ht({},e.other),{},{[n.target.name]:n.target.value})}),n.target.value&&(0,Qe.N)((()=>{se.CMD.CommandWrap((()=>{a[n.target.name]=n.target.value}),"\u6539\u53d8\u5c3a\u5bf8")}))};return n.createElement(h.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",fontSize:"14px"},component:"nav","aria-labelledby":"nested-list-subheader"},n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Vt.Z,{title:"\u540d\u79f0",value:e.name,onChange:e=>t({type:Pe.MI,name:e.target.value}),onBlur:e=>{se.CMD.CommandWrap((()=>{a.Name=e.target.value}),"\u6539\u53d8\u540d\u79f0")}})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Vt.Z,{name:"Width",title:"\u5bbd",value:e.other.Width,onChange:r})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Vt.Z,{name:"Height",title:"\u9ad8",value:e.other.Height,onChange:r})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u4f4d\u7f6e",mt:.7}),n.createElement(It.Z,{vector:e.position,onChange:(t,a)=>l({position:Ht(Ht({},e.position),{},{[t]:a})}),onBlur:()=>{se.CMD.CommandWrap((()=>{a.Position=e.position}),"\u6539\u53d8\u4f4d\u7f6e")}})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u65cb\u8f6c",mt:.7}),n.createElement(It.Z,{vector:e.rotation,onBlur:()=>{se.CMD.CommandWrap((()=>{a.Rotation=se.Utils.deg2rad(kt()(e.rotation.x))}),"\u6539\u53d8\u65cb\u8f6c")},onChange:(t,a)=>l({rotation:Ht(Ht({},e.rotation),{},{[t]:a})})})),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u7f29\u653e",mt:.7}),n.createElement(It.Z,{vector:e.scale,onBlur:()=>{se.CMD.CommandWrap((()=>{a.Scale=(0,Et.l)(e.scale)}),"\u6539\u53d8\u7f29\u653e")},onChange:(t,a)=>l({scale:Ht(Ht({},e.scale),{},{[t]:a})})})))},$t=()=>{const{editorState:e}=(0,Y._i)();return e.entity?n.createElement(Ot,null):e.gui?n.createElement(Kt,null):e.dom?n.createElement(At,null):n.createElement("div",null,"\u672a\u77e5\u9762\u677f")};var Qt=a(61241),Gt=a(91993),_t=a(67341),Yt=a(49431),qt=a(97539),Jt=a.n(qt),Xt=a(58044),ea=a.n(Xt),ta=a(2493),aa=a(97610),na=a(97892),la=a(17871);const ra=e=>{let t="";return t="entity"===e.type?e.value?.Object?e.value?.Object?.Name+"\u7684\u503c":"[\u7a7a]":e.value||"[\u7a7a]",t},ia=e=>{let t="";return t+=ra(e.value1),t+=" ",t+=(e=>{switch(e){case se.CompareType.Equal:return"==";case se.CompareType.UnEqual:return"!=";case se.CompareType.Great:return">";case se.CompareType.GtEqual:return">=";case se.CompareType.Less:return"<";case se.CompareType.LessEqual:return"<=";default:return" "}})(e.type),t+=" ",t+=ra(e.value2),t};function oa(e,t,a){return n.createElement(h.Z,null,n.createElement("span",{style:{color:"#075FB8",marginRight:10}},0===a?"If":"Else If"),0===e.length?" \u771f":E()(e).call(e,(e=>ia(e))).join(t?" && ":" || "))}const ca=[{label:"\u7b49\u4e8e",value:se.CompareType.Equal},{label:"\u4e0d\u7b49\u4e8e",value:se.CompareType.UnEqual},{label:"\u5927\u4e8e",value:se.CompareType.Great},{label:"\u5c0f\u4e8e",value:se.CompareType.Less},{label:"\u5927\u4e8e\u7b49\u4e8e",value:se.CompareType.GtEqual},{label:"\u5c0f\u4e8e\u7b49\u4e8e",value:se.CompareType.LessEqual}];var ma=a(18442),sa=a(62750),ua=a.n(sa),da=a(47068),pa=a(3450),ga=a(45709);const Ea=["bgColor","color","labelIcon","endElement","labelText","desc"],ha=(0,pa.ZP)(pe.Z)((({theme:e})=>({color:e.palette.text.secondary,[`& .${ge.Z.content}`]:{color:e.palette.text.secondary,borderTopRightRadius:e.spacing(2),borderBottomRightRadius:e.spacing(2),paddingRight:e.spacing(1),fontWeight:e.typography.fontWeightMedium,"&.Mui-expanded":{fontWeight:e.typography.fontWeightRegular},"&:hover":{backgroundColor:e.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:`var(--tree-view-bg-color, ${e.palette.action.selected})`,color:"var(--tree-view-color)"},[`& .${ge.Z.label}`]:{fontWeight:"inherit",color:"inherit"}}}))),Za=n.forwardRef((function(e,t){const{classes:a,className:l,label:r,nodeId:i,descption:o,icon:c,expansionIcon:m,displayIcon:s,onClick:u,onMouseDown:d}=e,{disabled:p,expanded:g,selected:E,focused:h,handleExpansion:Z,handleSelection:v,preventSelection:y}=(0,da.Z)(i),b=c||m||s,f=n.useMemo((()=>{const e=new(te())(l.split(" "));return e.add(a.root),g&&e.add(a.expanded),E&&e.add(a.selected),h&&e.add(a.focused),p&&e.add(a.disabled),ua()(e).join(" ")}),[p,h,E,g]);return n.createElement("div",{className:f,onMouseDown:e=>{y(e),d?.(e)},ref:t},n.createElement("div",{onClick:e=>{Z(e)},className:a.iconContainer},b),n.createElement(ga.Z,{onClick:e=>{v(e),u?.(e)},component:"div",className:a.label},r))})),va=n.forwardRef(((e,t)=>{const{bgColor:a,color:l,labelIcon:o,endElement:c,labelText:m,desc:s}=e,u=(0,i.Z)(e,Ea);return n.createElement(x.Qj,null,(()=>n.createElement(ha,(0,r.Z)({ContentComponent:Za,ref:t,label:n.createElement(n.Fragment,null,n.createElement(h.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"wrap"}},o&&n.createElement(h.Z,{component:o,color:"inherit",sx:{mr:1}}),n.createElement(ga.Z,{variant:"body2",sx:{fontWeight:"inherit",flexGrow:1}},m),n.createElement(ga.Z,{variant:"caption",color:"inherit"},c)),s&&n.createElement(ga.Z,{variant:"subtitle2",color:"inherit",sx:{ml:3}},s)),style:{"--tree-view-color":l,"--tree-view-bg-color":a}},u))))}));var ya=a(3360),ba=a(53189),fa=a(42875),Ca=a(19529);const xa=({actions:e,onTogglePopover:t,onMouseDown:a,act:l,isNew:r,onEnter:i})=>{let o=ne()(e).call(e,(e=>e===l));const c=n.useRef(null);return(0,n.useEffect)((()=>{c.current&&r&&c.current.click()}),[]),n.createElement(n.Fragment,null,"Wait"!==l.type&&n.createElement(A.Z,{ref:c,onMouseDown:a,onClick:t,"data-page":"Dispatch"===l.type?"1":"0","data-type":l.param?"param":void 0,onMouseEnter:i},l.target?"\u6dfb\u52a0\u76ee\u6807":"\u6dfb\u52a0\u53d8\u91cf"),n.createElement(G.Z,{onClick:()=>{Yt.FQ.handleUp(e,o)}},n.createElement(Ca.Z,null)),n.createElement(G.Z,{onClick:()=>{Yt.FQ.handleDown(e,o)}},n.createElement(fa.Z,null)))},wa=(0,x.Pi)((({actions:e,onTogglePopover:t,onClick:a,newAddId:l,onRef:r,store:i,onEnter:o})=>{const c=(e,t)=>ba.gJ[e.type]?.getDesc?ba.gJ[e.type]?.getDesc(t):e.target?`${e.label} ${t.objectId?t.objectId.Object?.Name:""}`:e.param?`${t.key} \u7684\u503c\u8bbe\u7f6e\u4e3a" "`:e.label,m=()=>{a(void 0,void 0),i.step=2};return 0===e.length&&2!==i.step&&i.mode===Yt.Ee.List?n.createElement(ya.Z,{onClick:m,title:"\u70b9\u51fb\u6b64\u5904\u7ed9\u5f53\u524d\u4e8b\u4ef6\u6dfb\u52a0\u52a8\u4f5c?"}):n.createElement(n.Fragment,null,E()(e).call(e,((i,m)=>{var s;return n.createElement(va,{key:i.id,nodeId:i.id.toString(),labelText:i.label,ref:e=>r?.(e,i.id),onClick:()=>{a(void 0,m)},endElement:n.createElement(xa,{actions:e,act:i,isNew:i.id===l,onMouseDown:()=>a(void 0,m),onTogglePopover:t,onEnter:o})},E()(s=i.data).call(s,((e,t)=>n.createElement(va,{onClick:()=>{a(t,m)},key:e.objectId?.Index??t,nodeId:`${i.id}-${(e.objectId?.Index??t).toString()}`,labelText:c(i,e)}))))})),i.mode===Yt.Ee.List&&2!==i.step&&n.createElement(A.Z,{onClick:m},"\u6dfb\u52a0\u52a8\u4f5c"))}));var ka=a(6512),Sa=a(48155),Pa=a(83361),Ia=a(32138),Va=a(65400),Da=a(2812),Ma=a(27679);const Aa=(0,x.Pi)((({onClose:e,open:t,subTitle:a,onConfirm:l})=>{var r;const i=(0,_t.Y)(),{globalVarStore:o}=(0,q.R)(),c=i.tempCondition,m=e=>{const t=e.currentTarget.getAttribute("data-index");i.addNewCompare(t?Number(t):void 0)},s=e=>{const t=e.currentTarget.getAttribute("data-index");i.removeCompare(Number(t))},u=(e,t)=>{i.updateState((()=>{"entity"===e.type?e.value=k.gV.intance.Database.getObjectId(t.target.value):e.value="boolean"==typeof e.value?Boolean(t.target.value):t.target.value}))},d=e=>H()(Ma.jG).call(Ma.jG,(t=>t.value===(0,Ma.Uc)(e)))?.bool,p=(e,t,a)=>{const n=e.target.value.split("-");i.updateState((()=>{t.type=n[0],t.entityKey=n[1],a&&d(t)&&(a.type="value",a.value=!0)}))};return n.createElement(M.Z,{fullWidth:!0,maxWidth:"md",open:t,onClose:e,PaperProps:{sx:{height:"70%"}}},n.createElement(ka.Z,{onClose:e,title:"\u60c5\u5f62\u7f16\u8f91-"+a,sx:{background:"#F6F7FB"}}),n.createElement(F.Z,null,n.createElement(we.U,{justifyContent:"space-between"},n.createElement(Sa.Z,{label:"\u60c5\u5f62\u540d\u79f0",sx:{flex:1},value:c.name,onChange:e=>{i.updateState((()=>{c.name=e.target.value}))}}),n.createElement(Pa.Z,{options:[{label:"\u5339\u914d\u5168\u90e8",value:0},{label:"\u5339\u914d\u4efb\u4f55",value:1}],value:c.isAll?0:1,onChange:e=>i.updateState((()=>{c.isAll=0===e.target.value}))})),n.createElement(X.Z,{sx:{my:1}}),n.createElement(Ee.Z,null,E()(r=c.conditions).call(r,((e,t)=>n.createElement(he.ZP,{key:e.id,sx:{"&>.MuiFormControl-root":{flex:1}}},n.createElement(Ia.Z,{widgetValue:e.value1,onChange:t=>{p(t,e.value1,e.value2)},onChangeValue:t=>u(e.value1,t),variables:o.variables,selectProps:{fullWidth:!0,sx:{my:1}}}),n.createElement(Pa.Z,{value:e.type,options:ca,onChange:t=>{i.updateState((()=>{e.type=t.target.value}))}}),n.createElement(Ia.Z,{widgetValue:e.value2,onChange:t=>{p(t,e.value2)},onChangeValue:t=>u(e.value2,t),variables:o.variables,selectProps:{fullWidth:!0,sx:{my:1}},bool:d(e.value1)}),n.createElement(h.Z,{sx:{width:80,display:"flex",justifyContent:"flex-end"}},n.createElement(G.Z,{color:"primary","data-index":t,onClick:m},n.createElement(Va.Z,null)),n.createElement(G.Z,{color:"error","data-index":t,onClick:s},n.createElement(Da.Z,null))))))),n.createElement(A.Z,{variant:"contained",onClick:m},"\u6dfb\u52a0\u6761\u4ef6"),n.createElement(h.Z,null,oa(c.conditions,c.isAll,0))),n.createElement(R.Z,null,n.createElement(A.Z,{autoFocus:!0,onClick:e},"\u53d6\u6d88"),n.createElement(A.Z,{onClick:()=>{const t=i.saveConditions();l(t),e()},autoFocus:!0},"\u4fdd\u5b58")))})),Ra=(0,x.Pi)((({interaction:e,eventIndex:t})=>{const a=(0,_t.Y)(),{globalVarStore:l}=(0,q.R)(),[r,i]=n.useState(null),[o,c]=n.useState([]),[m,s]=n.useState(!1),u=n.useRef({isParam:!1,hasPage:!1}),[d,p,g]=(0,la.Z)((()=>{})),[h,Z]=n.useState(a.getActionAllIds(e)),[v,y]=n.useState(""),b=e=>{var t;(u.current.isParam="param"===e.target.getAttribute("data-type"),u.current.hasPage="1"===e.target.getAttribute("data-page"),i(e.currentTarget),a.CurrentAction)&&c(E()(t=a.CurrentAction.data).call(t,(e=>e.objectId)))},f=e=>{},C=()=>{a.NewAddActionId="",i(null),c([]),y("")},x=()=>{a.editorCondition(),s(!0)},w=(e,t)=>{a.CurrentAction?.id===t&&(a.portalContainer3=e)};return n.createElement(n.Fragment,null,n.createElement(na.Z,{"aria-label":"gmail",defaultCollapseIcon:n.createElement(ta.Z,{fontSize:"large"}),defaultExpandIcon:n.createElement(aa.Z,{fontSize:"large"}),sx:{flexGrow:1,overflowY:0===a.step?"auto":void 0,width:"100%"},onContextMenu:d,expanded:h,onNodeToggle:(e,t)=>{Z(t)}},n.createElement(va,{nodeId:e.id.toString(),"data-nodeid":e.type+e.id,labelText:e.label,ref:t=>{a.CurrentInteraction?.id===e.id&&(a.portalContainer=t)},sx:{width:"100%",position:"relative"},onClick:()=>a.setAllIndex(void 0,void 0,void 0,t),endElement:n.createElement(A.Z,{onClick:e=>{a.addNewCondition(),s(!0)}},"\u6dfb\u52a0\u6761\u4ef6")},e.conditions.length>0?E()(k=e.conditions).call(k,((e,l)=>n.createElement(va,{key:e.id,nodeId:e.id.toString(),labelText:e.name,onClick:()=>{a.setAllIndex(void 0,void 0,l,t)},onDoubleClick:x,desc:oa(e.conditions,e.isAll,l)},n.createElement(wa,{newAddId:a.NewAddActionId,actions:e.actions,onTogglePopover:b,onEnter:f,store:a,onRef:w,onClick:(e,n)=>{a.setAllIndex(e,n,l,t)}})))):n.createElement(wa,{actions:e.actions,onEnter:f,onClick:(e,n)=>{a.setAllIndex(e,n,void 0,t)},store:a,onTogglePopover:b,newAddId:a.NewAddActionId,onRef:w}))),n.createElement(ma.Z,{open:Boolean(r),anchorEl:r,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},n.createElement(T.Z,{placeholder:"\u641c\u7d22",value:v,onChange:e=>y(e.target.value)}),n.createElement(Ee.Z,{sx:{height:300,overflowY:"auto"}},(()=>{if(u.current.isParam){let e=l.variables;return v&&(e=rt()(e).call(e,(e=>{var t;return oe()(t=e.key).call(t,v)}))),E()(e).call(e,(e=>{return n.createElement(he.ZP,{key:e.key,disablePadding:!0},n.createElement(Ze.Z,{role:void 0,onClick:(t=e,()=>{const e=Jt()(o).call(o,t),n=[...o];-1===e?(n.push(t),a.addParamItem(t.key)):(ea()(n).call(n,e,1),a.removeParamItem(t.key)),c(n)}),dense:!0},n.createElement(ve.Z,null,n.createElement(We.Z,{edge:"start",checked:oe()(o).call(o,e),tabIndex:-1,disableRipple:!0})),n.createElement(ye.Z,{id:e.key,primary:e.key})));var t}))}{let e=(0,Ma.IZ)(u.current.hasPage);return v&&(e=rt()(e).call(e,(e=>{var t;return oe()(t=e.label).call(t,v)}))),E()(e).call(e,(e=>{return n.createElement(he.ZP,{key:e.value,disablePadding:!0},n.createElement(Ze.Z,{role:void 0,onClick:(t=e.objectId,()=>{const e=Jt()(o).call(o,t),n=[...o];-1===e?(n.push(t),a.addActionDataItem(t)):(ea()(n).call(n,e,1),a.removeActionDataItem(t)),c(n),a.mode===Yt.Ee.List&&-1===e&&(a.step=3,C())}),dense:!0},n.createElement(ve.Z,null,n.createElement(We.Z,{edge:"start",checked:oe()(o).call(o,e.objectId),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":e.value}})),n.createElement(ye.Z,{id:e.value,primary:e.label})));var t}))}})())),n.createElement(Aa,{subTitle:e.label,open:m,onClose:()=>s(!1),onConfirm:e=>{Z((t=>[...t,e.toString()]))}}),n.createElement(g,null,n.createElement(Je.Z,{onClick:()=>{a.remove(),p()}},"\u5220\u9664")));var k}));var Fa=a(13697),Na=a(76344),La=a(93885);function Ta(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function ja(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=Ta(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=Ta(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}function za(e){const[t,a]=n.useState({width:(.9*window.innerWidth).toString(),height:(.9*window.innerHeight).toString(),x:.05*window.innerWidth,y:.05*window.innerHeight});return n.createElement(La.s,{dragHandleClassName:"draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',minWidth:800,minHeight:600,maxHeight:.9*window.innerHeight,maxWidth:.9*window.innerWidth,size:{width:t.width,height:t.height},position:{x:t.x,y:t.y},onDragStop:(e,n)=>{n.y<0&&(n.y=0),a(ja(ja({},t),{},{x:n.x,y:n.y}))},onResizeStop:(e,t,n,l,r)=>{a(ja({width:n.style.width,height:n.style.height},r))}},n.createElement(Qt.Z,(0,r.Z)({},e,{sx:{"&":{margin:0,width:"100%",minWidth:800,minHeight:600,height:"100%",maxHeight:"100%"}}})))}var Ua=a(9742),Ba=a(94010);const Oa=e=>n.createElement(h.Z,null,n.createElement(Ba.Z,null),n.createElement(Ba.Z,null),n.createElement(Ba.Z,null)),Wa=(0,x.Pi)((()=>{const e=(0,_t.Y)(),{globalVarStore:t}=(0,q.R)(),a=(t,a,n)=>{if("selectOption"===n)if(0===a.value)e.addActionDataItem(void 0);else{const t=k.gV.intance.Database.getObjectId(a.value);t&&e.addActionDataItem(t)}},l=t=>{t.target.value&&e.addParamItem(t.target.value)};if(!e.CurrentActionDetail){if(3===e.step){if(e.CurrentAction?.target)return"Dispatch"===e.CurrentAction?.type?n.createElement(Ua.d,{openSelect:!0,value:null,onChange:a,hasPage:!0}):n.createElement(Ua.d,{openSelect:!0,value:null,onChange:a});if(e.CurrentAction?.param)return n.createElement(Ua.D,{variables:t.variables,onChange:l})}return n.createElement(Oa,null)}const r=e.CurrentAction;return ba.gJ[r.type]?.detail?ba.gJ[r.type].detail:n.createElement("div",null,"\u672a\u77e5\u52a8\u4f5c\u7c7b\u578b")})),Ha=(0,x.Pi)((e=>n.createElement(h.Z,{p:"8px"},n.createElement(ga.Z,null,"3.\u8bbe\u7f6e\u52a8\u4f5c"),n.createElement(Wa,null)))),Ka=(0,x.Pi)((()=>{var e;const t=(0,_t.Y)();return n.createElement(h.Z,{p:"8px"},n.createElement(ga.Z,null,"2.\u7ec4\u7ec7\u52a8\u4f5c"),E()(e=t.interactions).call(e,((e,t)=>n.createElement(Ra,{interaction:e,key:t,eventIndex:t}))))}));var $a=a(5385),Qa=a(89044),Ga=a(95279),_a=a(25909);const Ya=(0,x.Pi)((({title:e,open:t,toggle:a,list:l,isEvent:r})=>{const i=(0,_t.Y)();return n.createElement(n.Fragment,null,n.createElement(Ze.Z,{onClick:a,"data-key":e},n.createElement(ve.Z,null,n.createElement(_a.Z,null)),n.createElement(ye.Z,{primary:e}),t?n.createElement(Lt.Z,null):n.createElement(Tt.Z,null)),n.createElement(Ft.Z,{in:t,timeout:"auto",unmountOnExit:!0},n.createElement(Ga.ZP,{container:!0,spacing:1,onClick:e=>{const t=e.target.getAttribute("data-type"),a=H()(l).call(l,(e=>e.type===t));a&&(r?(i.changeTabIndex(1),i.addInteraction(a)):i.addActionItem(a))}},E()(l).call(l,((e,t)=>n.createElement(Ga.ZP,{item:!0,xs:6,key:t,sx:{textAlign:"center"}},n.createElement(A.Z,{fullWidth:!0,sx:{backgroundColor:"#F4F4F4",fontWeight:400,color:"#424B54"},disabled:r&&i.isUsedEvent(e.type),"data-type":e.type,variant:"text"},e.label)))))))})),qa=(0,x.Pi)((({data:e,isEvent:t})=>{var a;const l=(0,_t.Y)(),r=a=>{var n;const r=a.currentTarget.getAttribute("data-type"),i=H()(n=e.list).call(n,(e=>e.type===r));i&&(t?(l.changeTabIndex(1),l.addInteraction(i),l.step=2):(l.addActionItem(i),l.step=3))};return n.createElement(n.Fragment,null,n.createElement(X.Z,null,e.label),E()(a=e.list).call(a,(e=>n.createElement(Ze.Z,{disabled:t&&l.isUsedEvent(e.type),"data-type":e.type,onClick:r,key:e.type},n.createElement(ye.Z,{primary:e.label})))))}));let Ja,Xa=!1;const en=({dataList:e,title:t,isList:a,onClose:l})=>{const[r,i]=(0,n.useState)(""),o=(0,n.useRef)(null),[c,m]=(0,n.useState)(new(te())(E()(e).call(e,(e=>e.label)))),s=e=>{const t=e.currentTarget.getAttribute("data-key");c.has(t)?c.delete(t):c.add(t),m(new(te())(c))},u=e=>{let t=e.relatedTarget;if(!t)return;const a=o.current;Ja=Oe()((()=>{if(!Xa&&a?.parentNode){for(;t;){if(t.parentElement===a)return;t=t.parentElement}l?.()}}),200)};return(0,n.useEffect)((()=>()=>{Ja&&clearTimeout(Ja),Xa=!0})),a?n.createElement(h.Z,{sx:{width:a?250:"100%",bgcolor:"background.paper",p:1},ref:o,component:Qt.Z},n.createElement(K.Z,{flexDirection:"row",sx:{height:"5%"}},n.createElement(Qt.Z,{sx:{display:"flex",alignItems:"center",width:"100%"}},n.createElement($a.ZP,{value:r,sx:{flex:1},placeholder:"\u9009\u62e9\u89e6\u53d1\u4e8b\u4ef6",autoFocus:!0,onBlur:u}),n.createElement(G.Z,null,n.createElement(Qa.Z,{fontSize:"small"})))),n.createElement(Ee.Z,{sx:{overflowY:"auto",maxHeight:400},component:"nav","aria-labelledby":"nested-list-subheader"},E()(e).call(e,(e=>n.createElement(qa,{key:e.label,data:e,isEvent:oe()(t).call(t,"\u4e8b\u4ef6")}))))):n.createElement(h.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper",overflowY:"auto"}},n.createElement(ga.Z,null," ",t),n.createElement(Ee.Z,{component:"nav","aria-labelledby":"nested-list-subheader"},E()(e).call(e,(e=>n.createElement(Ya,{key:e.label,title:e.label,open:c.has(e.label),toggle:s,list:e.list,isEvent:oe()(t).call(t,"\u4e8b\u4ef6")})))))};var tn=a(40334);const an=[{label:"\u6dfb\u52a0\u4e8b\u4ef6",id:"event",component:n.createElement(en,{title:"1.\u4e8b\u4ef6",dataList:tn.qF})},{label:"\u6dfb\u52a0\u52a8\u4f5c",id:"action",component:n.createElement(en,{title:"1.\u52a8\u4f5c",dataList:tn.S0})}],nn=[{label:"\u6dfb\u52a0\u4e8b\u4ef6",id:"event",component:n.createElement(en,{title:"1.\u4e8b\u4ef6",dataList:tn.h_})},{label:"\u6dfb\u52a0\u52a8\u4f5c",id:"action",component:n.createElement(en,{title:"1.\u52a8\u4f5c",dataList:tn.S0})}],ln=n.forwardRef((function(e,t){return n.createElement(Na.Z,(0,r.Z)({direction:"up",ref:t},e))})),rn=(0,x.Pi)((({onClose:e})=>{const t=(0,_t.Y)(),a=(a,n)=>{t.resetIndexs(),t.UseReal=!0,e(a,n)},l=t.SelectEntity?nn:an;return n.createElement(M.Z,{fullWidth:!0,maxWidth:"xl",open:!0,onClose:a,TransitionComponent:ln,PaperComponent:za},n.createElement(ka.Z,{onClose:a,title:"\u4ea4\u4e92\u8bbe\u8ba1",className:"draggable-dialog-title",sx:{cursor:"move"}}),n.createElement(F.Z,null,n.createElement(h.Z,{height:"100%"},n.createElement(h.Z,{height:50},n.createElement(Q.Z,{value:t.tabIndex,onChange:(e,a)=>{t.changeTabIndex(a)},"aria-label":"\u4ea4\u4e92\u8bbe\u8ba1"},E()(l).call(l,((e,a)=>n.createElement($.Z,(0,r.Z)({key:e.id,label:e.label},(0,f.P)(a),{disabled:-1===t.currentEventIndex&&1===a})))))),n.createElement(K.Z,{flexDirection:"row",component:Fa.Z,raised:!0,elevation:3,sx:{height:"calc(100% - 50px)"}},n.createElement(h.Z,{width:"30%",component:Fa.Z,overflow:"auto"},E()(l).call(l,((e,a)=>n.createElement(f.x,{value:t.tabIndex,key:a,currentValue:a},e.component)))),n.createElement(h.Z,{flex:1,component:Fa.Z,overflow:"auto"},n.createElement(Ka,null)),n.createElement(h.Z,{flex:1,component:Fa.Z},n.createElement(Ha,null))))),n.createElement(R.Z,null,n.createElement(A.Z,{autoFocus:!0,onClick:a},"\u53d6\u6d88"),n.createElement(A.Z,{onClick:()=>{t.save(),a(null)},autoFocus:!0},"\u4fdd\u5b58")))}));var on=a(84119),cn=a(8578);const mn=(0,x.Pi)((()=>{var e;const{fileStore:t}=(0,y.m)(),[a,l]=(0,n.useState)(!1),[r,i]=n.useState(null),o=()=>{i(null),Yt.FQ.step=0},c=()=>{t.save()};return t.currentFileId?n.createElement(_t.D.Provider,{value:Yt.FQ},n.createElement(h.Z,{textAlign:"right",width:"100%"},n.createElement(G.Z,{onClick:()=>{Yt.FQ.UseReal=!1,Yt.FQ.mode=Yt.Ee.Modal,Yt.FQ.resetIndexs(),Yt.FQ.save2VsInteractions(),l(!0)}},n.createElement(on.Z,null)),a&&n.createElement(rn,{onClose:(e,t)=>{t&&"backdropClick"===t||(Yt.FQ.mode=Yt.Ee.List,l(!1))}})),n.createElement(h.Z,{width:"100%"},E()(e=Yt.FQ.RealInteractionList).call(e,((e,t)=>n.createElement(Ra,{interaction:e,key:e.id,eventIndex:t})))),n.createElement(h.Z,{width:"100%",position:"relative"},n.createElement(A.Z,{color:"primary",variant:"contained",fullWidth:!0,startIcon:n.createElement(jt.Z,null),onClick:e=>{i(e.currentTarget),Yt.FQ.step=1}},"\u6dfb\u52a0\u4ea4\u4e92"),n.createElement(Gt.ZP,{open:!(1!==Yt.FQ.step),anchorEl:r,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"left"}},n.createElement(en,{isList:!0,title:"\u4e8b\u4ef6",dataList:tn.qF,onClose:o})),n.createElement(Gt.ZP,{open:!(!Yt.FQ.portalContainer?.isConnected||2!==Yt.FQ.step),anchorEl:Yt.FQ.portalContainer,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"left"}},n.createElement(en,{isList:!0,title:"\u52a8\u4f5c",dataList:tn.S0,onClose:o})),n.createElement(Gt.ZP,{open:!(!Yt.FQ.portalContainer3?.isConnected||3!==Yt.FQ.step),anchorEl:Yt.FQ.portalContainer3,onClose:()=>{Yt.FQ.step=0,Yt.FQ.isEditor?Yt.FQ.isEditor=!1:(Yt.FQ.remove(),Yt.FQ.updateDatabase())},anchorOrigin:{vertical:"bottom",horizontal:"left"},PaperProps:{sx:{overflow:"visible"}}},n.createElement(Qt.Z,{sx:{width:300,p:1}},n.createElement(Wa,null),n.createElement(we.U,{justifyContent:"space-between",sx:{mt:1}},n.createElement(A.Z,{color:"primary",onClick:()=>{Yt.FQ.step=0,Yt.FQ.updateDatabase()}},"\u786e\u5b9a"),n.createElement(A.Z,{color:"error",onClick:()=>{Yt.FQ.step=0,Yt.FQ.isEditor=!1,Yt.FQ.remove(),Yt.FQ.updateDatabase()}},Yt.FQ.isEditor?"\u5220\u9664":"\u53d6\u6d88")))))):n.createElement(cn.Z,{title:n.createElement(h.Z,null,n.createElement(h.Z,null,"\u8bf7\u5148\u6253\u5f00\u6216\u521b\u5efa\u4e00\u4e2a\u65b0\u573a\u666f"),n.createElement(h.Z,null,"\u6216\u8005\u70b9\u51fb",n.createElement(A.Z,{onClick:c},"\u4fdd\u5b58")," "))})})),sn=mn,un={Box:[{key:"Depth",value:1,type:"number",title:"\u957f"},{key:"Width",value:1,type:"number",title:"\u5bbd"},{key:"Height",value:1,type:"number",title:"\u9ad8"}],Sphere:[{key:"Diameter",value:1,type:"number",title:"\u76f4\u5f84"}],Plane:[{key:"Width",value:1,type:"number",title:"\u5bbd"},{key:"Height",value:1,type:"number",title:"\u9ad8"}],Cylinder:[{key:"DiameterTop",value:1,type:"number",title:"\u4e0a\u5706\u76f4\u5f84"},{key:"DiameterBottom",value:1,type:"number",title:"\u4e0b\u5706\u76f4\u5f84"},{key:"Height",value:1,type:"number",title:"\u9ad8"}],Capsule:[{key:"Radius",value:1,type:"number",title:"\u534a\u5f84"},{key:"Height",value:1,type:"number",title:"\u9ad8"},{key:"Subdivisions",value:1,type:"number",title:"\u7ba1\u6bb5\u6570"},{key:"Tessellation",value:1,type:"number",title:"\u5706\u6bb5\u6570"},{key:"CapSubdivisions",value:1,type:"number",title:"\u5e3d\u6bb5\u6570"}],Ground:[{key:"Width",value:1,type:"number",title:"\u5bbd"},{key:"Height",value:1,type:"number",title:"\u9ad8"}]};var dn=a(76373),pn=a(69326),gn=a(66989),En=a.n(gn),hn=a(14549),Zn=a.n(hn),vn=a(43653),yn=a.n(vn),bn=a(65503),fn=a(69428),Cn=a(10800);const xn=({title:e,options:t,buttonProps:a={}})=>{const[l,i]=(0,n.useState)(null),o=Boolean(l),c=()=>{i(null)};return n.createElement(n.Fragment,null,n.createElement(A.Z,(0,r.Z)({onClick:e=>{i(e.currentTarget)}},a),e),n.createElement(Cn.Z,{id:"basic-menu",anchorEl:l,open:o,onClose:c,MenuListProps:{"aria-labelledby":"basic-button"}},E()(t).call(t,((e,t)=>n.createElement(Je.Z,{key:t,onClick:()=>e.onClick(c)},e.label)))))};var wn=a(73443);const kn=({data:e,onChange:t,addParam:a,updateParam:l,deleteParam:r})=>{var i;return n.createElement(n.Fragment,null,n.createElement(he.ZP,null,n.createElement(Pa.Z,{value:e.type,fullWidth:!0,options:["GET","POST"],label:"\u8bf7\u6c42\u65b9\u5f0f"})),n.createElement(he.ZP,null,n.createElement(qe.Z,{fullWidth:!0,label:"\u8bf7\u6c42\u5730\u5740",size:"small",value:e.url,name:"url",onChange:t})),E()(i=e.params).call(i,((e,t)=>n.createElement(he.ZP,{key:e.id},n.createElement(h.Z,null,n.createElement(we.U,{justifyContent:"space-between"},n.createElement(ga.Z,null,"\u53c2\u6570",t+1),n.createElement(G.Z,{onClick:()=>r(t)},n.createElement(wn.Z,null))),n.createElement(qe.Z,{label:"\u952e",size:"small",sx:{mb:1},value:e.key,onChange:e=>l(t,{key:e.target.value})}),n.createElement(we.U,null,n.createElement(qe.Z,{sx:{width:"70%"},label:"\u503c",size:"small",value:e.value,onChange:e=>l(t,{value:e.target.value})}),n.createElement(xn,{buttonProps:{variant:"contained",size:"small"},title:"\u53c2\u6570\u6765\u6e90",options:[{label:"\u7ec4\u4ef6\u503c",onClick:e=>e()}]})))))),n.createElement(he.ZP,null,n.createElement(A.Z,{variant:"contained",onClick:a},"\u6dfb\u52a0\u53c2\u6570")),n.createElement(he.ZP,null,n.createElement(ye.Z,null,"\u8fd4\u56de\u503c")),n.createElement(he.ZP,null,n.createElement(fn.Z,{"aria-label":"\u5c55\u793a\u8fd4\u56de\u503c",minRows:3,placeholder:"\u4ec5\u5c55\u793a\u8fd4\u56de\u503c",value:e.response,style:{width:300}})),n.createElement(he.ZP,null,n.createElement(ye.Z,null,"\u8fc7\u6ee4\u5668")),n.createElement(he.ZP,null,n.createElement(fn.Z,{"aria-label":"filter",minRows:3,placeholder:"\u8fc7\u6ee4\u51fd\u6570",value:rt()(e),name:"filter",onChange:t,style:{width:300}})),n.createElement(he.ZP,null,n.createElement(He.Z,{control:n.createElement(We.Z,null),checked:e.useTime,onChange:t,name:"useTime",label:"\u5b9a\u65f6\u5237\u65b0",color:"primary",sx:{width:200}}),e.useTime&&n.createElement(qe.Z,{value:e.time,name:"time",onChange:t,InputProps:{startAdornment:n.createElement(bn.Z,{position:"start"},"\u9891\u7387"),endAdornment:n.createElement(bn.Z,{position:"start"},"\u79d2")}})))};var Sn=a(98789);function Pn(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function In(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=Pn(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=Pn(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}const Vn=(0,pa.ZP)($a.ZP)((({theme:e})=>({"label + &":{marginTop:e.spacing(3)},"& .MuiInputBase-input":{borderRadius:4,position:"relative",border:"1px solid #ced4da",fontSize:16,width:"auto",padding:"10px 12px",transition:e.transitions.create(["border-color","background-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{boxShadow:`${(0,Sn.Fq)(e.palette.primary.main,.25)} 0 0 0 0.2rem`,borderColor:e.palette.primary.main}}}))),Dn=({data:e,onChange:t})=>n.createElement(n.Fragment,null,n.createElement(he.ZP,null,n.createElement(L.Z,{variant:"standard"},n.createElement(j.Z,{shrink:!0,htmlFor:"accound"},"ali\u8d26\u53f7"),n.createElement(Vn,{id:"accound",value:e.accountName,onChange:a=>{let n=In(In({},e),{},{accountName:a.target.value});t(n)}}))),n.createElement(he.ZP,null,n.createElement(L.Z,{variant:"standard"},n.createElement(j.Z,{shrink:!0,htmlFor:"prod"},"\u4ea7\u54c1"),n.createElement(Vn,{id:"prod",value:e.prodName,onChange:a=>{let n=In(In({},e),{},{prodName:a.target.value});t(n)}}))),n.createElement(he.ZP,null,n.createElement(L.Z,{variant:"standard"},n.createElement(j.Z,{shrink:!0,htmlFor:"device"},"\u8bbe\u5907"),n.createElement(Vn,{id:"device",value:e.deviceName,onChange:a=>{let n=In(In({},e),{},{deviceName:a.target.value});t(n)}}))),n.createElement(he.ZP,null,n.createElement(L.Z,{variant:"standard"},n.createElement(j.Z,{shrink:!0,htmlFor:"fun"},"\u5c5e\u6027"),n.createElement(Vn,{id:"fun",value:e.funName,onChange:a=>{let n=In(In({},e),{},{funName:a.target.value});t(n)}}))));var Mn=a(93765),An=a(27566),Rn=a.n(An);let Fn=yn().create({});async function Nn(e){const t=await(0,V.ZL)(I.Lc.sign+"/"+e.id);if(t.code===V.Mx.Ok){let e={appKey:"",timestamp:"",sign:""},a=t.data;return e.appKey=a.app_key,e.timestamp=a.timestamp,e.sign=a.sign,e}return null}Fn.defaults.baseURL="http://iot.gkiiot.com/prod-api";const Ln=({onClose:e,value:t,title:a,options:l})=>{const[r,i]=(0,n.useState)(t);(0,n.useEffect)((()=>{i(t)}),[t]);return n.createElement(M.Z,{open:!0,sx:{"& .MuiDialog-paper":{width:"80%",maxHeight:435}},maxWidth:"xs"},n.createElement(N.Z,null,a),n.createElement(F.Z,{dividers:!0},n.createElement(Pt.Z,{"aria-label":"ringtone",name:"ringtone",value:r,onChange:e=>{let t=e.target.value;i("number"==typeof r?Number(t):t)}},E()(l).call(l,(e=>n.createElement(He.Z,{value:e.id,key:e.id,control:n.createElement(St.Z,null),label:e.name}))))),n.createElement(R.Z,null,n.createElement(A.Z,{autoFocus:!0,onClick:()=>{e()}},"\u53d6\u6d88"),n.createElement(A.Z,{onClick:()=>{e(r)}},"\u786e\u5b9a")))},Tn=(0,pa.ZP)($a.ZP)((({theme:e})=>({"label + &":{marginTop:e.spacing(3)},"& .MuiInputBase-input":{borderRadius:4,position:"relative",border:"1px solid #ced4da",fontSize:16,width:"100%",padding:"10px 12px",transition:e.transitions.create(["border-color","background-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{boxShadow:`${(0,Sn.Fq)(e.palette.primary.main,.25)} 0 0 0 0.2rem`,borderColor:e.palette.primary.main}}}))),jn=({data:e,onChange:t})=>{const[a,l]=(0,n.useState)(!1),[r,i]=(0,n.useState)([]),o=t=>{const a=H()(r).call(r,(e=>e.id===t));e.accountId=a.id,e.accountName=a.name},[c,m]=(0,n.useState)(!1),[s,u]=(0,n.useState)([]),d=t=>{const a=H()(s).call(s,(e=>e.id===t));e.prodId=a.id,e.prodName=a.name},[p,g]=(0,n.useState)(!1),[E,h]=(0,n.useState)([]),Z=t=>{const a=H()(E).call(E,(e=>e.id===t));e.deviceId=a.id,e.deviceName=a.name,e.deviceKey=a.deviceKey,e.deviceSecret=a.deviceSecret},[v,y]=(0,n.useState)(!1),[b,f]=(0,n.useState)([]),C=t=>{const a=H()(b).call(b,(e=>e.id===t));e.funId=a.id,e.funName=a.name,e.key=a.funKey,e.funDataType=a.funDataType};return n.createElement(n.Fragment,null,n.createElement(he.ZP,null,n.createElement(L.Z,{variant:"standard",sx:{width:"100%"}},n.createElement(j.Z,{shrink:!0,htmlFor:"account"},"\u8d26\u53f7"),n.createElement(Tn,{id:"account",value:e.accountName,onClick:()=>{(async function(e){const t=[],a=await(0,V.ZL)(I.Lc.list,{params:{project_id:e.projectId,type:e.source}});if(a.code===V.Mx.Ok){let e=a.data;var n;return e&&Rn()(e.list)&&me()(n=e.list).call(n,(e=>{let a={name:"",id:0};a.id=e.id,a.name=e.name,t.push(a)})),t}return null})({projectId:Mn.U.projectId,source:e.source}).then((e=>{i(e)})),l(!0)}}))),n.createElement(he.ZP,null,n.createElement(L.Z,{variant:"standard",sx:{width:"100%"}},n.createElement(j.Z,{shrink:!0,htmlFor:"prod"},"\u4ea7\u54c1"),n.createElement(Tn,{id:"prod",value:e.prodName,onClick:async()=>{let t=await Nn({id:e.accountId});t&&(async function(e){const t=[],a=await Fn.get(I.CY.prodList,{params:{appkey:e.appKey,timestamp:e.timestamp,sign:e.sign}});if(200===a.data.code){let e=a.data.data;return e&&Rn()(e)&&me()(e).call(e,(e=>{let a={name:"",id:""};a.id=e.prodId,a.name=e.prodName,t.push(a)})),t||[]}return null}({appKey:t.appKey,timestamp:t.timestamp,sign:t.sign}).then((e=>{u(e)})),m(!0))}}))),e.prodId&&n.createElement(n.Fragment,null,n.createElement(he.ZP,null,n.createElement(L.Z,{variant:"standard",sx:{width:"100%"}},n.createElement(j.Z,{shrink:!0,htmlFor:"device"},"\u8bbe\u5907"),n.createElement(Tn,{id:"device",value:e.deviceName,onClick:async()=>{let t=await Nn({id:e.accountId});t&&(async function(e){const t=[],a=await Fn.get(I.CY.devList,{params:{appkey:e.appKey,timestamp:e.timestamp,sign:e.sign,prodId:e.prodId}});if(200===a.data.code){let e=a.data.data;return e&&Rn()(e)&&me()(e).call(e,(e=>{let a={name:"",id:0,deviceKey:"",deviceSecret:""};a.id=e.deviceId,a.name=e.deviceName,a.deviceKey=e.deviceKey,a.deviceSecret=e.deviceSecret,t.push(a)})),t||[]}return null}({appKey:t.appKey,timestamp:t.timestamp,sign:t.sign,prodId:e.prodId}).then((e=>{h(e)})),g(!0))}}))),n.createElement(he.ZP,null,n.createElement(L.Z,{variant:"standard",sx:{width:"100%"}},n.createElement(j.Z,{shrink:!0,htmlFor:"fun"},"\u5c5e\u6027"),n.createElement(Tn,{id:"fun",value:e.funName,onClick:async()=>{let t=await Nn({id:e.accountId});t&&(async function(e){const t=[],a=await Fn.get(I.CY.funList,{params:{appkey:e.appKey,timestamp:e.timestamp,sign:e.sign,sourceId:e.prodId}});if(200===a.data.code){let e=a.data.data;return e&&Rn()(e)&&me()(e).call(e,(e=>{let a={name:"",id:0,funKey:"",funDataType:""};a.id=e.funId,a.name=e.funName,a.funKey=e.funKey,a.funDataType=e.funDataType,t.push(a)})),t||[]}return null}({appKey:t.appKey,timestamp:t.timestamp,sign:t.sign,prodId:e.prodId}).then((e=>{f(e)})),y(!0))}})))),a&&n.createElement(Ln,{title:"\u9009\u62e9\u8d26\u53f7",onClose:t=>{t&&t!==e.accountId&&o(t),l(!1)},value:e.accountId,options:r}),c&&n.createElement(Ln,{title:"\u9009\u62e9\u4ea7\u54c1",onClose:t=>{t&&t!==e.prodId&&d(t),m(!1)},value:e.prodId,options:s}),p&&n.createElement(Ln,{title:"\u9009\u62e9\u8bbe\u5907",onClose:t=>{t&&t!==e.deviceId&&Z(t),g(!1)},value:e.deviceId,options:E}),v&&n.createElement(Ln,{title:"\u9009\u62e9\u5c5e\u6027",onClose:t=>{t&&t!==e.funId&&C(t),y(!1)},value:e.funId,options:b}))};function zn(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}const Un={accountId:0,accountName:"",prodId:"",prodName:"",deviceId:0,deviceName:"",deviceKey:"",deviceSecret:"",funId:0,funName:"",funDataType:"",funKey:"",wsUrl:""},Bn=({data:e,onChange:t})=>n.createElement(n.Fragment,null,n.createElement(he.ZP,null,n.createElement(Pa.Z,{label:"\u6765\u6e90",fullWidth:!0,value:e.source,onChange:e=>{let a=function(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=zn(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=zn(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}({source:Number(e.target.value)},Un);t(a)},options:[{label:"\u6d77\u521b\u4e91",value:0}]})),0===e.source?n.createElement(jn,{data:e,onChange:t}):n.createElement(Dn,{data:e,onChange:t}));function On(e,t){const a=k.gV.intance.Database.DataBindTable.list;return H()(a).call(a,(a=>a.target.Index===e.Id&&a.targetKey===t))}var Wn=a(17349),Hn=a.n(Wn),Kn=a(11004),$n=a.n(Kn),Qn=a(13158);const Gn="https:"===location.protocol?"wss":"ws";const _n={histron:function(e){let t,a,n,l,r,{deviceKey:i,deviceSecret:o,prodId:c,realm:m}=e,s=function(e){if("string"!=typeof e)return I.zp;{let t=Jt()(e).call(e,"://");if(t>-1)return Hn()(e).call(e,t+3)}}(m),u=`${Gn}://${s}/device/ws/dev/send/`;return n=`dev:${c}:${i}`,a=(new Date).getTime(),l=`md5:${a}`,r=$n()(`${c}${i}${o}${a}`),t=`${u}${n}/${l}/${r}`,t},ali:function(e){let t,a,n,l,r;return a=`${Gn}://${Qn.env.VUE_APP_HOST}/api/b/ws/aliyun`,r=e.deviceKey,n=e.prodId,l=e.selectId,t=`${a}/${l}/${n}/${r}`,t}};function Yn(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function qn(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=Yn(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=Yn(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}let Jn=0;const Xn=({onClose:e,entity:t,targetKey:a,onConfirm:l})=>{const r=On(t,a),[i,o]=(0,n.useState)((()=>r?.type??"1")),[c,m]=(0,n.useState)((()=>{if(r&&"2"===i){const e=r.data;return qn(qn({},e),{},{useTime:!!e.time})}return{type:"GET",params:[],url:"http://cicd3d.gkiiot.com/test3D",time:"",useTime:!1,filter:"function _filter(data){\n          return data;\n        }"}})),[s,u]=(0,n.useState)((()=>{if(r&&"1"===i){return qn({},r.data)}return{source:0,accountId:0,accountName:"",prodId:"",prodName:"",deviceId:0,deviceName:"",deviceKey:"",deviceSecret:"",funId:0,funName:"",funDataType:"",key:"",ws:""}})),d=()=>{let e=0===s.source?"histron":"ali";return _n[e](s)};return n.createElement(K.Z,{sx:{width:300,height:"100%"}},n.createElement(Ee.Z,{sx:{flex:1}},n.createElement(he.ZP,null,n.createElement(Pa.Z,{label:"\u9009\u62e9\u6570\u636e\u6e90",value:i,options:[{label:"\u8bbe\u5907",value:"1"},{label:"\u63a5\u53e3",value:"2"}],fullWidth:!0,onChange:e=>{o(e.target.value),"1"===r?.type?m(qn({},c)):u(qn({},s))}})),"1"===i?n.createElement(Bn,{data:s,onChange:e=>{u(qn({},e))}}):n.createElement(kn,{data:c,onChange:(e,t)=>{const a=e.target.name;a&&m(qn(qn({},c),{},{[a]:void 0===t?e.target.value:t}))},addParam:()=>{m(qn(qn({},c),{},{params:[...c.params,{key:"",value:"",type:"value",id:Jn++}]}))},deleteParam:e=>{m((t=>{const a=t.params;return ea()(a).call(a,e,1),qn(qn({},t),{},{params:[...a]})}))},updateParam:(e,t)=>{m((a=>{const n=a.params;return Zn()(n[e],t),qn(qn({},a),{},{params:[...n]})}))}})),n.createElement(we.U,{height:30,justifyContent:"flex-end"},n.createElement(A.Z,{variant:"contained",color:"primary",onClick:()=>{let e=On(t,a);e||(e=new se.DataBind(t.ObjectId,a),k.gV.intance.Database.DataBindTable.append(e),e.type=i),"2"===i?e.data=qn(qn({},c),{},{time:kt()(c.time)}):(s.ws=d(),e.data=qn({},s)),l(e)}},"\u786e\u5b9a"),n.createElement(A.Z,{onClick:e,variant:"contained",color:"error",sx:{mx:1}},"\u53d6\u6d88"),"2"===i&&n.createElement(A.Z,{onClick:()=>{yn()({method:c.type.toLowerCase(),url:c.url,data:"POST"===c.type?qn({},c.params):{params:c.params}}).then((e=>{200===e.status&&m(qn(qn({},c),{},{response:En()(e.data)}))}))},variant:"contained",sx:{mx:1}},"\u6d4b\u8bd5\u8fde\u63a5")))};var el=a(42211),tl=a(24977);const al=({label:e,onClick:t,targetKey:a,isAttach:l,onDelete:r,children:i})=>n.createElement(we.U,{direction:"row",sx:{flex:1},spacing:2,alignItems:"center"},n.createElement(ga.Z,{sx:{marginRight:.1,minWidth:"45px",fontSize:14}},e),l?n.createElement(n.Fragment,null,n.createElement(A.Z,null,"\u5df2\u7f16\u8f91\u6570\u636e\u6e90"),n.createElement(G.Z,{onClick:()=>{r()}},n.createElement(wn.Z,null))):i,n.createElement(G.Z,{style:{marginLeft:0},onClick:t,"data-key":a},n.createElement(tl.Z,null))),nl=({title:e,value:t,onConfirm:a})=>{const l=(0,n.useRef)(null),[r,i]=(0,n.useState)(!1),o=()=>{i(!1)},c=()=>{l.current.getAction("editor.action.formatDocument").run()};return n.createElement(n.Fragment,null,n.createElement(A.Z,{onClick:()=>{i(!0)},fullWidth:!0,sx:{flex:1}},e),n.createElement(M.Z,{open:r,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{height:"50vh"}},onClose:o},n.createElement(F.Z,null,n.createElement(el.ZP,{onMount:(e,t)=>{l.current=e,Oe()((()=>{c()}),300)},height:"100%",defaultLanguage:"json",defaultValue:t?En()(t):"",options:{minimap:{enabled:!1}}})),n.createElement(R.Z,null,n.createElement(A.Z,{onClick:c},"\u683c\u5f0f\u5316"),n.createElement(A.Z,{onClick:()=>{o(),a(l.current.getValue())}},"\u786e\u5b9a"),n.createElement(A.Z,{onClick:o},"\u53d6\u6d88"))))},ll=new(te())(["POSITIVENUMBER","NUMBER","STRING","ALIGN","VALIGN","IMAGE"]),rl=new(te())(["OBJECT","COLORARRAY","OBJECTARRAY"]),il=({prop:e,entity:t,onUpdate:a})=>{const l=t=>{e.value=t.target.value,a()},r=a=>{se.CMD.CommandWrap((()=>{t instanceof se.BaseGui||t instanceof pn.E?t.setProp(e.key,a):t[e.key]=a}),"\u4fee\u6539\u5c5e\u6027")},i=t=>{e.value=t.hex,a(),(0,Qe.N)((()=>{r(t.hex)}),300)},o=e=>{try{const t=JSON.parse(e);r(t)}catch(e){U.y.error("\u6570\u636e\u6709\u8bef")}},c=a=>{se.CMD.CommandWrap((()=>{t instanceof se.BaseGui||t instanceof pn.E?t.setProp(e.key,a.target.value):t[e.key]=kt()(a.target.value)}),"\u4fee\u6539\u5c5e\u6027")},m=e.type.toUpperCase();return"BOOLEAN"===m?n.createElement(h.Z,{flex:1,textAlign:"right"},n.createElement($e.Z,{checked:Boolean(e.value),onChange:t=>{e.value=t.target.checked,a(),r(e.value)}})):"Color"===e.type?n.createElement(Ge.Z,{sx:{flex:1,width:"auto"},color:e.value,onChange:i}):ll.has(m)?n.createElement(qe.Z,{value:e.value,onChange:l,onBlur:c,sx:{padding:"2px"},variant:"outlined",size:"small",autoComplete:"false"}):rl.has(m)?n.createElement(nl,{title:e.key,value:e.value,onConfirm:o}):n.createElement(h.Z,null,"\u4e0d\u652f\u6301\u7c7b\u578b",m)};function ol(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function cl(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=ol(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=ol(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}const ml=({props:e,entity:t,onClick:a,onUnAttach:l,onUpdate:r})=>n.createElement(n.Fragment,null,E()(e).call(e,(e=>n.createElement(al,{key:e.key,label:e.title,onClick:a,targetKey:e.key,onDelete:()=>l(e),isAttach:!!e.object},n.createElement(il,{prop:e,onUpdate:r,entity:t}))))),sl=({entity:e,properties:t})=>{const[a,l]=(0,n.useState)(!1),[r,i]=(0,n.useState)(""),[o,c]=(0,n.useState)([]),m=()=>{l(!1)};return(0,n.useEffect)((()=>{if(t){const a=[];for(const n of t){const t=On(e,n.key);a.push(cl(cl({},n),{},{object:t,targetKey:n.key}))}c(a)}}),[t]),n.createElement(h.Z,null,n.createElement(ml,{props:o,entity:e,onClick:e=>{const t=e.currentTarget.getAttribute("data-key");i(t),l(!0)},onUnAttach:e=>{e.object&&k.gV.intance.Database.DataBindTable.remove(e.object),e.object=null,c([...o])},onUpdate:()=>{c([...o])}}),n.createElement(dn.ZP,{anchor:"right",open:a,onClose:m},n.createElement(Xn,{onClose:m,entity:e,targetKey:r,onConfirm:e=>{c((t=>{for(const a of t)a.targetKey===r&&(a.object=e);return[...t]})),m()}})))};function ul(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function dl(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=ul(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=ul(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}const pl=({props:e,entity:t,onClick:a,onUnAttach:l})=>n.createElement(n.Fragment,null,E()(e).call(e,(e=>n.createElement(al,{key:e.prop,label:e.name,onClick:a,targetKey:`data/${e.prop}`,onDelete:()=>l(e),isAttach:!!e.object},(e=>"boolean"===e.type?n.createElement($e.Z,{checked:t.data[e.prop],onChange:a=>{se.CMD.CommandWrap((()=>{t.data[e.prop]=a.target.checked}),"\u4fee\u6539\u81ea\u5b9a\u4e49\u5c5e\u6027")}}):n.createElement(qe.Z,{defaultValue:t.data[e.prop],onBlur:a=>{se.CMD.CommandWrap((()=>{t.data[e.prop]=a.target.value}),"\u4fee\u6539\u81ea\u5b9a\u4e49\u5c5e\u6027")},sx:{padding:"2px"},variant:"outlined",size:"small",autoComplete:"false"}))(e))))),gl=({entity:e})=>{const[t,a]=(0,n.useState)(!1),[l,r]=(0,n.useState)(""),i=e.constructor,[o,c]=(0,n.useState)([]),m=()=>{a(!1)};return(0,n.useEffect)((()=>{if(i.Schema?.propertys){const t=[];for(const a of i.Schema.propertys){const n=On(e,`data/${a.prop}`);t.push(dl(dl({},a),{},{object:n,targetKey:`data/${a.prop}`}))}c(t)}}),[]),n.createElement(h.Z,null,n.createElement(pl,{props:o,entity:e,onClick:e=>{const t=e.currentTarget.getAttribute("data-key");r(t),a(!0)},onUnAttach:e=>{e.object&&k.gV.intance.Database.DataBindTable.remove(e.object),e.object=null,c([...o])}}),n.createElement(dn.ZP,{anchor:"left",open:t,onClose:m},n.createElement(Xn,{onClose:m,entity:e,targetKey:l,onConfirm:e=>{c((t=>{for(const a of t)a.targetKey===l&&(a.object=e);return[...t]})),m()}})))};var El=a(29556);const hl=["\u4fee\u6539\u81ea\u5b9a\u4e49\u5c5e\u6027","\u66f4\u65b0DOM","\u53d8\u6362DOM","\u4fee\u6539\u5c5e\u6027"],Zl=()=>{const{editorState:e,dispatch:t}=(0,Y._i)(),[a,l]=(0,n.useState)([]),r=e=>{re()(hl).call(hl,(t=>{var a;return oe()(a=e.commandName).call(a,t)}))&&t({type:Pe.wb})};return(0,n.useEffect)((()=>{const e=[(0,se.end)(k.gV.intance.Database.HistoryManager,k.gV.intance.Database.HistoryManager.redoEvent,(e=>{r(e)})),(0,se.end)(k.gV.intance.Database.HistoryManager,k.gV.intance.Database.HistoryManager.undoEvent,(e=>{r(e)}))];return()=>{me()(e).call(e,(e=>e()))}}),[]),(0,n.useEffect)((()=>{let t=[];var a;if(e.gui&&(t=E()(a=e.gui.DataList).call(a,(e=>({key:e.key,value:e.value,type:"number",title:e.label,unit:e.unit}))),e.gui instanceof El.v)){const a=e.gui.DataBindings;for(const n of a)"basic_hide"!==n.description&&t.push({key:n.attr,value:e.gui.Attr[n.attr]??n.defaultValue,type:n.valueType,title:n.name,unit:""})}if(e.dom&&e.dom instanceof pn.E){const a=e.dom.DataBindings;for(const n of a)"basic_hide"!==n.description&&t.push({key:n.attr,value:e.dom.Attr[n.attr]??n.defaultValue,type:n.valueType,title:n.name,unit:""})}if(e.entity&&un[e.type]){t=[...un[e.type]];for(const a of t)a.value=e.entity[a.key]}l(t)}),[e]),e.entity?.IsComponent?n.createElement(h.Z,null,n.createElement(gl,{entity:e.entity})):e.gui?n.createElement(h.Z,null,n.createElement(sl,{entity:e.gui,properties:a})):e.dom?n.createElement(h.Z,null,n.createElement(sl,{entity:e.dom,properties:a})):n.createElement(h.Z,null,n.createElement(sl,{entity:e.entity,properties:a}))};let vl;!function(e){e[e.Basic=1]="Basic",e[e.Interaction=2]="Interaction",e[e.Script=3]="Script",e[e.Prop=4]="Prop",e[e.Material=5]="Material",e[e.Camera=6]="Camera",e[e.Board=7]="Board"}(vl||(vl={}));var yl=a(83228);function bl(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function fl(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=bl(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=bl(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}let Cl;const xl=()=>{const[e,t]=n.useState({x:"0",y:"0",z:"0"}),[a,l]=n.useState({x:"0",y:"0",z:"0"}),[r,i]=(0,n.useState)(0),[o,c]=(0,n.useState)(se.CameraType.ArcRotate),[m,s]=(0,n.useState)({Alpha:"",Beta:"",Radius:""}),[u,d]=(0,n.useState)({LowerRadiusLimit:"",UpperRadiusLimit:"",LowerAlphaLimit:"",UpperAlphaLimit:"",LowerBetaLimit:"",UpperBetaLimit:"",MinZ:"",MaxZ:""}),[p,g]=(0,n.useState)({PanningAxis:{x:"",y:"",z:""},OriginPanTarget:{x:"",y:"",z:""},PanDistance:""}),[E,h]=(0,n.useState)({EnableRotate:!0,EnableZoom:!0,EnablePan:!0}),Z=(a,n)=>{const l=fl(fl({},e),{},{[a]:n});t(l),isNaN(kt()(n))||(k.gV.intance.Viewer.cameraManager.Position={x:kt()(l.x)||0,y:kt()(l.y)||0,z:kt()(l.z)||0})},v=e=>{const t=e.target.name,a=e.target.value;t&&a&&(s(fl(fl({},m),{},{[t]:a})),(0,Qe.N)((()=>{"Radius"===t?k.gV.intance.Viewer.cameraManager.Radius=kt()(a):k.gV.intance.Viewer.cameraManager[t]=se.Utils.deg2rad(kt()(a))}),200))},y=e=>{const t=e.target.name,a=e.target.value;t&&(d(fl(fl({},u),{},{[t]:a})),(0,Qe.N)((()=>{"LowerRadiusLimit"===t||"UpperRadiusLimit"===t?k.gV.intance.Viewer.cameraManager.ArcRotateControl[t]=a?kt()(a):null:"MinZ"===t||"MaxZ"===t?a&&(k.gV.intance.Viewer.cameraManager.ArcRotateControl[t]=kt()(a)):k.gV.intance.Viewer.cameraManager.ArcRotateControl[t]=(0,yl.Vl)(a)}),500))},b=(e,t)=>{const a=e.target.name;a&&(h(fl(fl({},E),{},{[a]:t})),(0,Qe.N)((()=>{k.gV.intance.Viewer.cameraManager.ArcRotateControl[a]=t}),500))},f=()=>{const e=k.gV.intance;t((0,Et.eR)(e.Viewer.cameraManager.Position,(e=>(0,yl.P3)(e,2)))),l((0,Et.eR)(e.Viewer.cameraManager.Target,(e=>(0,yl.P3)(e,2))));const a=(0,yl.P3)(se.Utils.rad2Deg(e.Viewer.cameraManager.Alpha),2),n=(0,yl.P3)(se.Utils.rad2Deg(e.Viewer.cameraManager.Beta),2),r=(0,yl.P3)(e.Viewer.cameraManager.Radius,2);s({Alpha:a,Beta:n,Radius:r}),i(e.Viewer.cameraManager.Mode),d({LowerRadiusLimit:e.Viewer.cameraManager.ArcRotateControl.LowerRadiusLimit?.toString?.()??"",UpperRadiusLimit:e.Viewer.cameraManager.ArcRotateControl.UpperRadiusLimit?.toString?.()??"",LowerAlphaLimit:(0,yl.v5)(e.Viewer.cameraManager.ArcRotateControl.LowerAlphaLimit),UpperAlphaLimit:(0,yl.v5)(e.Viewer.cameraManager.ArcRotateControl.UpperAlphaLimit),LowerBetaLimit:(0,yl.v5)(e.Viewer.cameraManager.ArcRotateControl.LowerBetaLimit),UpperBetaLimit:(0,yl.v5)(e.Viewer.cameraManager.ArcRotateControl.UpperBetaLimit),MinZ:e.Viewer.cameraManager.ArcRotateControl.MinZ,MaxZ:e.Viewer.cameraManager.ArcRotateControl.MaxZ}),h({EnablePan:e.Viewer.cameraManager.ArcRotateControl.EnablePan,EnableRotate:e.Viewer.cameraManager.ArcRotateControl.EnableRotate,EnableZoom:e.Viewer.cameraManager.ArcRotateControl.EnableZoom}),g({PanningAxis:(0,Et.eR)(e.Viewer.cameraManager.ArcRotateControl.PanningAxis,(e=>(0,yl.P3)(e,2))),OriginPanTarget:(0,Et.eR)(e.Viewer.cameraManager.ArcRotateControl.OriginPanTarget,(e=>(0,yl.P3)(e,2))),PanDistance:e.Viewer.cameraManager.ArcRotateControl.PanDistance?.toString?.()??""})},C=(e,t,a)=>{if("string"!=typeof e)g(fl(fl({},p),{},{PanDistance:e.target.value})),(0,Qe.N)((()=>{k.gV.intance.Viewer.cameraManager.ArcRotateControl.PanDistance=e.target.value?kt()(e.target.value):null}),500);else{const n=fl(fl({},p[a]),{},{[e]:t});if(g(fl(fl({},p),{},{[a]:n})),isNaN(kt()(t)))return;k.gV.intance.Viewer.cameraManager.ArcRotateControl[a]={x:kt()(n.x)||0,y:kt()(n.y)||0,z:kt()(n.z)||0}}};return(0,n.useEffect)((()=>{let e=[];return(0,fe.gx)((()=>!!k.gV.intance),(()=>{f();const t=k.gV.intance;e.push(t.on("CameraUpdate",(e=>{Cl&&clearTimeout(Cl),Cl=Oe()((()=>{f()}),100)})),(0,se.end)(t.Viewer.cameraManager,t.Viewer.cameraManager.switchEvent,(e=>{c(e.Type)})))})),()=>{Cl&&clearTimeout(Cl),me()(e).call(e,(e=>e())),e.length=0}}),[]),n.createElement(n.Fragment,null,n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u7c7b\u578b",mt:.7}),n.createElement(Pa.Z,{value:r,onChange:e=>{i(e.target.value),k.gV.intance.Viewer.cameraManager.Mode=Number(e.target.value)},disabled:o!==se.CameraType.ArcRotate,options:[{label:"\u900f\u89c6",value:0},{label:"\u6b63\u4ea4",value:1}]})),o===se.CameraType.ArcRotate?n.createElement(n.Fragment,null,n.createElement(K.Z,{direction:"row",sx:{mt:2},title:"\u6a2a\u5411\u65cb\u8f6c\u89d2\u5ea6"},n.createElement(Vt.Z,{title:"\u6a2a\u5411\u65cb\u8f6c",value:m.Alpha,onChange:v,name:"Alpha"})),n.createElement(K.Z,{direction:"row",title:"\u7eb5\u5411\u65cb\u8f6c\u89d2\u5ea6",sx:{mt:2}},n.createElement(Vt.Z,{title:"\u7eb5\u5411\u65cb\u8f6c",value:m.Beta,onChange:v,name:"Beta"})),n.createElement(K.Z,{direction:"row",title:"\u89c2\u5bdf\u534a\u5f84",sx:{mt:2}},n.createElement(Vt.Z,{disabled:1===r,title:"\u89c2\u5bdf\u534a\u5f84",value:m.Radius,onChange:v,name:"Radius"}))):n.createElement(n.Fragment,null,n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u4f4d\u7f6e",mt:.7}),n.createElement(It.Z,{sx:{width:50},vector:e,onChange:Z}))),n.createElement(K.Z,{direction:"row",sx:{mt:2}},n.createElement(Ye.Z,{title:"\u76ee\u6807",mt:.7}),n.createElement(It.Z,{sx:{width:50},vector:a,onChange:(e,t)=>{const n=fl(fl({},a),{},{[e]:t});l(n),isNaN(kt()(t))||(k.gV.intance.Viewer.cameraManager.Target={x:kt()(n.x)||0,y:kt()(n.y)||0,z:kt()(n.z)||0})}})),o===se.CameraType.ArcRotate&&n.createElement(n.Fragment,null,n.createElement(K.Z,{direction:"row",sx:{mt:1}},n.createElement(Ye.Z,{title:"\u5141\u8bb8\u5e73\u79fb",mt:1.1}),n.createElement($e.Z,{checked:E.EnablePan,onChange:b,name:"EnablePan",inputProps:{"aria-label":"controlled"}})),n.createElement(K.Z,{direction:"row",sx:{mt:1}},n.createElement(Ye.Z,{title:"\u5141\u8bb8\u65cb\u8f6c",mt:1.1}),n.createElement($e.Z,{checked:E.EnableRotate,onChange:b,name:"EnableRotate",inputProps:{"aria-label":"controlled"}})),n.createElement(K.Z,{direction:"row",sx:{mt:1}},n.createElement(Ye.Z,{title:"\u5141\u8bb8\u7f29\u653e",mt:1.1}),n.createElement($e.Z,{checked:E.EnableZoom,onChange:b,name:"EnableZoom",inputProps:{"aria-label":"controlled"}})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"MinZ",title:"\u8fd1\u5e73\u9762",value:u.MinZ,onChange:y})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"MaxZ",title:"\u8fdc\u5e73\u9762",value:u.MaxZ,onChange:y})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"LowerRadiusLimit",title:"\u6700\u5c0f\u89c2\u5bdf\u8ddd\u79bb",value:u.LowerRadiusLimit,onChange:y})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"UpperRadiusLimit",title:"\u6700\u5927\u89c2\u5bdf\u8ddd\u79bb",value:u.UpperRadiusLimit,onChange:y})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"LowerAlphaLimit",title:"\u6700\u5c0f\u6a2a\u5411\u65cb\u8f6c",value:u.LowerAlphaLimit,onChange:y})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"UpperAlphaLimit",title:"\u6700\u5927\u6a2a\u5411\u65cb\u8f6c",value:u.UpperAlphaLimit,onChange:y})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"LowerBetaLimit",title:"\u6700\u5c0f\u7eb5\u5411\u65cb\u8f6c",value:u.LowerBetaLimit,onChange:y})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"UpperBetaLimit",title:"\u6700\u5927\u7eb5\u5411\u65cb\u8f6c",value:u.UpperBetaLimit,onChange:y})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Ye.Z,{title:"\u521d\u59cb\u5e73\u79fb\u70b9",mt:.7}),n.createElement(It.Z,{sx:{width:50},vector:p.OriginPanTarget,onChange:C,name:"OriginPanTarget"})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Ye.Z,{title:"\u5141\u8bb8\u5e73\u79fb\u65b9\u5411",mt:.7}),n.createElement(It.Z,{sx:{width:50},vector:p.PanningAxis,onChange:C,name:"PanningAxis"})),n.createElement(we.U,{sx:{mt:2}},n.createElement(Vt.Z,{name:"PanDistance",title:"\u6700\u5927\u5e73\u79fb\u8303\u56f4",value:p.PanDistance,onChange:C}))))};var wl=a(13567),kl=a.n(wl),Sl=a(47107);var Pl=a(91191),Il=a(12117);const Vl=()=>{const{fileStore:e}=(0,y.m)(),[t,a]=(0,n.useState)(!1),[l,r]=(0,n.useState)("\u9ed8\u8ba4\u811a\u672c"),i=(0,n.useRef)(null),o=()=>{a(!0)},c=()=>{e.editorScriptId=0,a(!1)},m=()=>{for(const t of e.codeList){(0,Il.uf)(t.code)()(k.gV.intance,se)}Oe()((()=>{se.AppEvent.trigger({type:"loadComplete",target:null})}),1e3)},s=t=>{var a;const n=H()(a=e.codeList).call(a,(e=>e.id===t));if(n)return n.code},u=()=>{e.editorScriptId?(e.updateCodeScript({name:l,code:i.current.getValue(),id:e.editorScriptId}),e.editorScriptId=0):e.appendCodeScript({name:l,code:i.current.getValue(),id:kl()()}),c()};return n.createElement(x.Qj,null,(()=>{var a;return n.createElement(h.Z,{sx:{width:"100%"}},n.createElement(Ee.Z,null,E()(a=e.codeList).call(a,(t=>n.createElement(he.ZP,{sx:{outline:"1px solid #ccc"},key:t.id,secondaryAction:n.createElement(n.Fragment,null,n.createElement(G.Z,{"aria-label":"delete",onClick:()=>(t=>{o(),e.editorScriptId=t.id,r(t.name)})(t)},n.createElement(Pl.Z,null)),n.createElement(G.Z,{"aria-label":"delete",onClick:()=>e.deleteScript(t.id)},n.createElement(wn.Z,null)))},t.name)))),n.createElement(A.Z,{variant:"contained",onClick:o,fullWidth:!0,sx:{width:"100%"}},"\u6dfb\u52a0\u811a\u672c"),localStorage.getItem("DEBUGSCRIPT")&&n.createElement(A.Z,{variant:"contained",onClick:m,fullWidth:!0,sx:{width:"100%",mt:2}},"\u6d4b\u8bd5\u811a\u672c"),n.createElement(M.Z,{open:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"80vh"}}},n.createElement(ka.Z,{title:"\u811a\u672c\u7f16\u8f91",onClose:c}),n.createElement(F.Z,null,n.createElement(we.U,{alignItems:"center"},n.createElement(ga.Z,null,"\u811a\u672c\u540d\u79f0:"),n.createElement(qe.Z,{value:l,onChange:e=>r(e.target.value),size:"small"})),n.createElement(Sl.Z,{updateProperyty:()=>{},getEditor:e=>i.current=e,onChange:()=>{},onMount:()=>{},code:s(e.editorScriptId)??"function(app,HC){\n    console.log(app,HC)\n}"})),n.createElement(R.Z,null,n.createElement(A.Z,{onClick:u},"\u786e\u5b9a"),n.createElement(A.Z,{onClick:c},"\u53d6\u6d88"))))}))},Dl=[{title:"\u573a\u666f",id:vl.Basic,component:n.createElement(Ct,null)},{title:"\u76f8\u673a",id:vl.Camera,component:n.createElement(xl,null)},{title:"\u4ea4\u4e92",id:vl.Interaction,component:n.createElement(sn,null)},{title:"\u770b\u677f",id:vl.Board,component:n.createElement(xt,null)},{title:"\u811a\u672c",id:vl.Script,component:n.createElement(Vl,null)}],Ml=[{title:"\u57fa\u7840",id:vl.Basic,component:n.createElement($t,null)},{title:"\u7279\u6027",id:vl.Prop,component:n.createElement(Zl,null)},{title:"\u4ea4\u4e92",id:vl.Interaction,component:n.createElement(sn,null)}];var Al=a(43966),Rl=a(54603),Fl=a(72448),Nl=a(78991),Ll=a(29143),Tl=a(82295),jl=a(32048),zl=a(19957);const Ul=(0,x.Pi)((()=>{var e;const{globalVarStore:t}=(0,q.R)(),a=()=>{t.cancel()};return n.createElement(M.Z,{open:t.Open,maxWidth:"md",PaperProps:{sx:{height:"522px"}}},n.createElement(ka.Z,{onClose:a,title:"\u5168\u5c40\u53d8\u91cf"}),n.createElement(F.Z,null,n.createElement(we.U,null,n.createElement(A.Z,{onClick:()=>t.add()},"\u6dfb\u52a0"),n.createElement(A.Z,{onClick:()=>t.up()},"\u4e0a\u79fb"),n.createElement(A.Z,{onClick:()=>t.down()},"\u4e0b\u79fb"),n.createElement(A.Z,{onClick:()=>t.delete()},"\u5220\u9664")),n.createElement(Ll.Z,{component:Qt.Z,sx:{height:"calc(100% - 40px)"}},n.createElement(Rl.Z,{sx:{minWidth:650},"aria-label":"simple table",stickyHeader:!0},n.createElement(Tl.Z,null,n.createElement(jl.Z,null,n.createElement(Nl.Z,{align:"center"},"\u53d8\u91cf\u540d\u79f0"),n.createElement(Nl.Z,{align:"center"},"\u9ed8\u8ba4\u503c"),n.createElement(Nl.Z,{align:"center"},"\u5907\u6ce8"))),n.createElement(Fl.Z,null,E()(e=t.variables).call(e,((e,a)=>n.createElement(jl.Z,{onClick:()=>t.CurrentIndex=a,key:e.key,sx:{"&:last-child td, &:last-child th":{border:0}},selected:t.CurrentIndex===a},n.createElement(zl.Z,{align:"center",defaultValue:e.key,onBlur:a=>{a.target.value&&t.update(e.key,{key:a.target.value})}}),n.createElement(zl.Z,{align:"center",defaultValue:"boolean"==typeof e.value?String(e.value):e.value,onBlur:a=>{a.target.value&&t.update(e.key,{value:a.target.value})}}),n.createElement(zl.Z,{align:"center",defaultValue:e.desc,onBlur:a=>{a.target.value&&t.update(e.key,{desc:a.target.value})}})))))))),n.createElement(R.Z,{sx:{justifyContent:"space-between"}},n.createElement(h.Z,null,n.createElement(ga.Z,{variant:"subtitle2"},"\u5168\u5c40\u53d8\u91cf\u7531\u5b57\u6bcd\u6570\u5b57\u7ec4\u6210"),n.createElement(ga.Z,{variant:"subtitle2"},"\u5168\u5c40\u53d8\u91cf\u53ef\u5728\u6574\u4e2a\u9879\u76ee\u7684\u5e94\u7528\u4e2d\u8d2f\u7a7f\u4f7f\u7528")),n.createElement(we.U,null,n.createElement(A.Z,{onClick:()=>{t.confirm()},autoFocus:!0,variant:"contained",sx:{mr:2}},"\u786e\u5b9a"),n.createElement(A.Z,{autoFocus:!0,onClick:a,variant:"contained",color:"error"},"\u53d6\u6d88"))))})),Bl=n.forwardRef(((e,t)=>{const{globalVarStore:a}=(0,q.R)();return n.createElement(x.Qj,null,(()=>n.createElement(n.Fragment,null,n.createElement(G.Z,(0,r.Z)({onClick:()=>a.Open=!0,ref:t},e,{sx:{height:"40px"}}),n.createElement(Al.Z,{name:"icon-3Dhanshu"})),a.Open&&n.createElement(Ul,null))))})),Ol=(0,x.Pi)(Bl);var Wl=a(70485),Hl=a(25146),Kl=a(50952),$l=a(23246),Ql=a(18163),Gl=a(99394);function _l(e,t){var a=tt()(e);if(nt()){var n=nt()(e);t&&(n=rt()(n).call(n,(function(t){return ot()(e,t).enumerable}))),a.push.apply(a,n)}return a}function Yl(e){for(var t=1;t<arguments.length;t++){var a,n,l=null!=arguments[t]?arguments[t]:{};t%2?me()(a=_l(Object(l),!0)).call(a,(function(t){(0,gt.Z)(e,t,l[t])})):mt()?ut()(e,mt()(l)):me()(n=_l(Object(l))).call(n,(function(t){pt()(e,t,ot()(l,t))}))}return e}const ql=(0,pa.ZP)(qe.Z)((({theme:e})=>({"& input":{height:"1em",width:"300px"}}))),Jl=(0,pa.ZP)(A.Z)((({theme:e})=>({marginRight:"8px"}))),Xl=(0,pa.ZP)("div")((({theme:e})=>({display:"inline-block",width:"100px",fontSize:"14px",textAlign:"right"}))),er={display:"inline-flex",alignItems:"center",justifyContent:"center",height:"50px"};let tr={name:"",appKey:"",appSecret:"",remark:"",type:0,projectId:"",regionId:"",aliId:"",iotInstanceId:"",groupId:""};const ar=(0,x.Pi)((()=>{const[e,t]=(0,n.useState)(!1),[a,l]=(0,n.useState)("\u65b0\u589e\u94fe\u63a5"),[r,i]=(0,n.useState)(tr),[o,c]=(0,n.useState)([{key:"name",title:"\u540d\u79f0",align:"left"},{key:"type",title:"\u63a5\u5165\u7c7b\u578b",align:"center",render:(e,t,a)=>n.createElement("span",null,0===e?"\u6d77\u521b\u4e91":"\u963f\u91cc\u4e91")},{key:"remark",title:"\u63cf\u8ff0",align:"center"},{key:"action",title:"\u64cd\u4f5c",align:"center",render:(e,t,a)=>n.createElement(n.Fragment,null,n.createElement(Jl,{variant:"outlined",onClick:()=>y(t)},"\u7f16\u8f91"),n.createElement(Jl,{variant:"outlined",onClick:()=>x(t.id),color:"error",sx:{marginRight:0}},"\u5220\u9664"))}]),[m,s]=(0,n.useState)([]),[u,d]=(0,n.useState)({pageNum:0,pageSize:5,pageSizeOptions:[1,3,5,10,25]}),[p,g]=(0,n.useState)(!1),[E,h]=(0,n.useState)([]),[Z,v]=(0,n.useState)([]),y=e=>{i(e),l("\u4fee\u6539\u8fde\u63a5"),t(!0),g(!0)},b=(e,t)=>{let a=Yl({},r);a[t]=e.target.value,i(a)};(0,n.useEffect)((()=>{(0,fe.U5)((()=>Mn.U.projectId),(()=>{f()}))}),[]);const f=()=>{0!==Mn.U.projectId&&(0,Gl.s7)(I.Lc.list,{project_id:Mn.U.projectId}).then((e=>{if(0===e.code){let{list:t}=e.data;if(t&&t.length>0){let e=[];for(let a of t){let t={id:a.id,name:a.name,appKey:a.app_key,appSecret:a.app_secret,remark:a.remark,type:a.type,projectId:a.project_id,regionId:a.region_id,aliId:a.ali_id,iotInstanceId:a.iot_instance_id,groupId:a.group_id,realm:a.realm};e.push(t)}s(e)}else s([])}})).catch((e=>{}))},C=e=>{(0,Gl.XD)(I.Lc.edit,e,"post").then((e=>{0===e.code&&(f(),U.y.success("\u64cd\u4f5c\u6210\u529f"),t(!1))}))},x=e=>{let t={id:[e]};(0,Gl.mn)(I.Lc.delete,t).then((e=>{0===e.code&&(f(),U.y.success("\u5220\u9664\u6210\u529f"))}))};(0,n.useEffect)((()=>{f()}),[]),(0,n.useEffect)((()=>{(0,fe.U5)((()=>Mn.U.BgType),(()=>{f()}))}),[]);const{cloudServicesStore:w}=(0,q.R)();return n.createElement(M.Z,{open:w.Open,maxWidth:"md",PaperProps:{sx:{height:"620px",minWidth:"620px"}}},n.createElement(ka.Z,{onClose:()=>{w.Open=!1},title:"\u6570\u636e\u8fde\u63a5"}),n.createElement(F.Z,null,n.createElement(Jl,{variant:"outlined",onClick:()=>{i(tr),l("\u65b0\u589e\u8fde\u63a5"),t(!0),g(!1)},sx:{marginBottom:"8px"}},"\u6dfb\u52a0\u6570\u636e"),n.createElement(Jl,{variant:"outlined",onClick:()=>{if(E.length>0){let e={id:E};(0,Gl.mn)(I.Lc.delete,e).then((e=>{0===e.code&&(f(),U.y.success("\u5220\u9664\u6210\u529f"))}))}else U.y.error("\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u9879\uff01")},color:"error",sx:{marginRight:0,marginBottom:"8px"}},"\u6279\u91cf\u5220\u9664"),n.createElement($l.Z,{columns:o,dataSource:m,rowKey:"id",ipagenation:u,handleChangePage:e=>{d({pageNum:e,pageSize:u.pageSize,pageSizeOptions:u.pageSizeOptions})},handleChangeRowsPerPage:e=>{d({pageNum:0,pageSize:e,pageSizeOptions:u.pageSizeOptions})},selectedRowKeys:E,selectionRows:Z,selectedChange:(e,t)=>{h(e),v(t)}}),n.createElement(Ql.Z,{size:"sm",title:a,visible:e,handleOk:()=>{let e=Yl(Yl({},r),{},{projectId:Mn.U.projectId});C(e)},handleClose:()=>{t(!1)},fullWidth:!0},n.createElement(Ga.ZP,{container:!0,spacing:2},n.createElement(Ga.ZP,{item:!0,xs:12,sx:er},n.createElement(Xl,null,"\u540d\u79f0\uff1a"),n.createElement(ql,{size:"small",value:r.name,onChange:e=>{b(e,"name")}})),n.createElement(Ga.ZP,{item:!0,xs:12,sx:er},n.createElement(Xl,null,"\u63a5\u5165\u7c7b\u578b\uff1a"),n.createElement(Hl.Z,{disabled:p,color:"primary",value:r.type,exclusive:!0,onChange:(e,t)=>{((e,t)=>{let a=Yl({},r);a[t]=e,i(a)})(t,"type")},sx:{width:"326px",height:"30px"}},n.createElement(Kl.Z,{value:0},"\u6d77\u521b\u4e91"),n.createElement(Kl.Z,{value:1},"\u963f\u91cc\u4e91"))),n.createElement(Ga.ZP,{item:!0,xs:12,sx:er},n.createElement(Xl,null,"appKey\uff1a"),n.createElement(ql,{disabled:p,size:"small",value:r.appKey,onChange:e=>{b(e,"appKey")}})),n.createElement(Ga.ZP,{item:!0,xs:12,sx:er},n.createElement(Xl,null,"app\u79d8\u94a5\uff1a"),n.createElement(ql,{disabled:p,size:"small",value:r.appSecret,onChange:e=>{b(e,"appSecret")}})),1===r.type?n.createElement(n.Fragment,null,n.createElement(Ga.ZP,{item:!0,xs:12,sx:er},n.createElement(Xl,null,"\u5730\u57df\uff1a"),n.createElement(ql,{disabled:p,size:"small",value:r.regionId,onChange:e=>{b(e,"regionId")}})),n.createElement(Ga.ZP,{item:!0,xs:12,sx:er},n.createElement(Xl,null,"\u963f\u91cc\u4e91ID\uff1a"),n.createElement(ql,{disabled:p,size:"small",value:r.aliId,onChange:e=>{b(e,"aliId")}})),n.createElement(Ga.ZP,{item:!0,xs:12,sx:er},n.createElement(Xl,null,"\u4f01\u4e1a\u7248\u5b9e\u4f8bID\uff1a"),n.createElement(ql,{disabled:p,size:"small",value:r.iotInstanceId,onChange:e=>{b(e,"iotInstanceId")}})),n.createElement(Ga.ZP,{item:!0,xs:12,sx:er},n.createElement(Xl,null,"\u6d88\u606f\u7ec4ID\uff1a"),n.createElement(ql,{disabled:p,size:"small",value:r.groupId,onChange:e=>{b(e,"groupId")}}))):null,n.createElement(Ga.ZP,{item:!0,xs:12,sx:Yl(Yl({},er),{},{height:70})},n.createElement(Xl,null,"\u5907\u6ce8\uff1a"),n.createElement(fn.Z,{minRows:3,maxRows:3,style:{width:328},value:r.remark,onChange:e=>{b(e,"remark")}}))))))})),nr=n.forwardRef(((e,t)=>{const{cloudServicesStore:a}=(0,q.R)();return n.createElement(x.Qj,null,(()=>n.createElement(n.Fragment,null,n.createElement(G.Z,(0,r.Z)({onClick:()=>a.Open=!0,ref:t},e,{sx:{height:"40px"}}),n.createElement(Al.Z,{name:"icon-3Dmoxingshuju"})),n.createElement(ar,null))))})),lr=n.forwardRef((({isUndo:e,iconName:t},a)=>{const[l,r]=(0,n.useState)(!0),i=()=>{r(e?!k.gV.intance.Database.HistoryManager.HasUndo:!k.gV.intance.Database.HistoryManager.HasRedo)};return(0,n.useEffect)((()=>{const t=[];return(0,fe.gx)((()=>!!k.gV.intance),(()=>{t.push((0,se.end)(k.gV.intance.Database.HistoryManager,k.gV.intance.Database.HistoryManager.endCmdEvent,(()=>{e&&r(!1)})),(0,se.end)(k.gV.intance.Database.HistoryManager,k.gV.intance.Database.HistoryManager.redoEvent,(e=>{i()})),(0,se.end)(k.gV.intance.Database.HistoryManager,k.gV.intance.Database.HistoryManager.undoEvent,(e=>{i()})))})),()=>{me()(t).call(t,(e=>e()))}}),[]),n.createElement(_.Z,{title:e?"\u64a4\u9500":"\u6062\u590d",placement:"left"},n.createElement(G.Z,{onClick:l?()=>{}:()=>{se.CMD.commandManager.ExecCommand(e?"UNDO":"REDO")},sx:{height:40,cursor:l?"not-allowed":"pointer",color:l?"rgba(0, 0, 0, 0.26)":"rgba(0, 0, 0, 1)"}},n.createElement(Al.Z,{name:t,color:l?"rgba(0, 0, 0, 0.26)":"rgba(0, 0, 0, 1)"})))}));function rr(e,t,a=(e=>e)){const[l,r]=(0,n.useState)(a((e=>localStorage.getItem(e))(t))??e);return[l,e=>{r(e),localStorage.setItem(t,e.toString())},()=>!!localStorage.getItem(t)]}const ir=n.forwardRef((({iconName:e,targetKey:t,tip:a},l)=>{const[r,i,o]=rr(!0,t,(e=>"true"===e));return(0,n.useEffect)((()=>{o?k.gV.intance.Viewer[t]=r:(0,fe.gx)((()=>!!k.gV.intance),(()=>{i(k.gV.intance.Viewer[t])}))}),[]),n.createElement(_.Z,{title:a,placement:"left"},n.createElement(G.Z,{onClick:()=>{i(!k.gV.intance.Viewer[t]),k.gV.intance.Viewer[t]=!k.gV.intance.Viewer[t]},sx:{height:"40px"}},n.createElement(Al.Z,{name:e})))}));let or=0;const cr=[{id:or++,tip:"\u5237\u65b0",icon:Al.Z,iconName:"icon-3Dshuaxin",onClick:()=>{Wl.T.currentFileName&&(Wl.T.setLoadProcess(!1),Wl.T.load(Wl.T.currentFileId))},divider:!1},{id:or++,tip:"\u64a4\u9500",component:n.createElement(lr,{iconName:"icon-3Dchexiao",isUndo:!0}),divider:!1},{id:or++,tip:"\u91cd\u505a",component:n.createElement(lr,{iconName:"icon-3Dhuanyuan",isUndo:!1}),divider:!1},{id:or++,tip:"\u5730\u9762\u7f51\u683c\u7ebf",icon:Al.Z,iconName:"icon-3Dwanggekai",component:n.createElement(ir,{iconName:"icon-3Dwanggekai",targetKey:"ShowGround",tip:"\u5730\u9762\u7f51\u683c\u7ebf"}),divider:!1},{id:or++,tip:"\u8f85\u52a9\u8f74",icon:Al.Z,iconName:"icon-3Dzuobiaoxi",onClick:()=>{k.gV.intance.Viewer.ShowAxesViewer=!k.gV.intance.Viewer.ShowAxesViewer},component:n.createElement(ir,{iconName:"icon-3Dzuobiaoxi",targetKey:"ShowAxesViewer",tip:"\u8f85\u52a9\u8f74"}),divider:!1},{id:or++,tip:"\u6f2b\u6e38",icon:Al.Z,iconName:"icon-3Dzoulu",onClick:()=>{if(k.gV.intance.Viewer.cameraManager.Type===se.CameraType.ArcRotate){if(U.Q.has("freeCamera"))return;U.y.info("\u8bf7\u5728\u573a\u666f\u4e2d\u901a\u8fc7\u9f20\u6807\u5355\u51fb\u9009\u62e9\u6f2b\u6e38\u76f8\u673a\u521d\u59cb\u4f4d\u7f6e",{key:"freeCamera",action:n.createElement(A.Z,{onClick:()=>U.y.close("freeCamera")},"\u53d6\u6d88"),autoHideDuration:null})}else k.gV.intance.Viewer.cameraManager.Type=se.CameraType.ArcRotate},divider:!1},{id:or++,tip:"\u7279\u6548",icon:Al.Z,iconName:"icon-3Dtexiao2",onClick:()=>{let e=Mn.U.particleDisplay,t=k.gV.intance.Database.ParticleSystemSpace.Entitys;Rn()(t)&&me()(t).call(t,(t=>{!0===e?t.stop():t.start()})),Mn.U.particleDisplay=!e},divider:!1},{id:or++,tip:"\u5c45\u4e2d(\u53cc\u51fb\u9f20\u6807)",icon:Al.Z,iconName:"icon-3Dline-focusguanzhujiaodian-02",onClick:()=>{k.gV.intance.zoomAll()},divider:!0},{id:or++,tip:"\u5168\u5c40\u53d8\u91cf",iconName:"icon-3Dchexiao",icon:Al.Z,component:n.createElement(Ol,null),divider:!1},{id:or++,tip:"\u6570\u636e\u8fde\u63a5",iconName:"icon-3Dmoxingshuju",icon:Al.Z,component:n.createElement(nr,null),divider:!0},{id:or++,tip:"\u5168\u5c4f",icon:Al.Z,iconName:"icon-3Dquanping",onClick:()=>{if(!!document.fullscreenElement)document.exitFullscreen();else{document.documentElement.requestFullscreen()}},divider:!1}],mr=(0,pa.ZP)($.Z)`
  min-height: 34px;
`,sr=(0,pa.ZP)(Q.Z)`
  height: 34px;
  min-height: 34px;
  & .MuiTabs-indicator {
    background: #0084ff;
  }
  & .MuiTabs-flexContainer {
    height: 34px;
  }
`,ur=e=>{const[t,a]=(0,n.useState)(vl.Basic),{editorState:l}=(0,Y._i)(),i=(e,t)=>{a(t)},o=l.entity||l.gui||l.dom?Ml:Dl;return n.createElement(q.O.Provider,{value:J.E},n.createElement(x.Qj,null,(()=>n.createElement(K.Z,{sx:{width:300},flexDirection:"row"},n.createElement(K.Z,{width:40,sx:{boxShadow:"1px 0 0 0 #ccc"}},E()(cr).call(cr,((e,t)=>n.createElement(n.Fragment,{key:t},n.createElement(_.Z,{title:e.tip,placement:"left"},e.component||n.createElement(G.Z,{onClick:e.onClick,sx:{height:"40px"}},n.createElement(e.icon,{name:e.iconName}))),e.divider&&n.createElement(X.Z,{sx:{width:"24px",ml:"8px",mt:"16px",mb:"16px"}}))))),n.createElement(K.Z,{sx:{flex:1,minWidth:0,height:"100%"},flexDirection:"column"},n.createElement(h.Z,{sx:{flex:1,minHeight:0,overflowY:"auto",overflowX:"hidden",height:"100%"}},n.createElement(sr,{value:H()(o).call(o,(e=>e.id===t))?t:vl.Basic,onChange:i,"aria-label":"right-panel-tabs",sx:{borderColor:"divider"}},E()(o).call(o,(e=>n.createElement(mr,(0,r.Z)({key:e.id,value:e.id,label:e.title},(0,f.P)(e.id),{sx:{minWidth:"30px",pl:"8px",pr:"8px"}}))))),E()(o).call(o,(e=>n.createElement(f.x,{value:e.id,currentValue:H()(o).call(o,(e=>e.id===t))?t:vl.Basic,key:e.id},e.component)))),n.createElement(Ue,null))))))},dr=()=>{const[e,t]=(0,n.useReducer)(Pe.d9,Y.y1);return n.createElement(Y.rU.Provider,{value:{editorState:e,dispatch:t}},n.createElement(m,{sx:{display:"flex",height:"100%",overflow:"hidden"},id:"editor"},n.createElement(O,null),n.createElement(l.Z,null),n.createElement(ur,null)))}}}]);